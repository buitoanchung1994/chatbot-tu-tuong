<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>AI CHUY√äN GIA T∆Ø T∆Ø·ªûNG</title>
    <script src="https://code.responsivevoice.org/responsivevoice.js?key=76Y2N6U7"></script>
    <style>
        :root { --army-green: #1b5e20; --gold: #ffd600; }
        body { background: #e8f5e9; font-family: 'Segoe UI', sans-serif; margin: 0; display: flex; flex-direction: column; height: 100vh; }
        header { background: var(--army-green); color: white; padding: 15px; text-align: center; border-bottom: 4px solid var(--gold); }
        #chat { flex: 1; overflow-y: auto; padding: 15px; display: flex; flex-direction: column; gap: 10px; }
        .bubble { padding: 12px; border-radius: 10px; max-width: 85%; line-height: 1.5; }
        .user { background: #c8e6c9; align-self: flex-end; border: 1px solid #4caf50; }
        .ai { background: white; align-self: flex-start; border-left: 5px solid var(--army-green); box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        #input-area { padding: 15px; background: white; display: flex; gap: 8px; border-top: 1px solid #ddd; }
        input { flex: 1; padding: 12px; border: 1px solid #ccc; border-radius: 5px; }
        button { background: var(--army-green); color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; }
        .mic { background: #d32f2f; }
    </style>
</head>
<body>
    <header><h1>‚≠ê CHUY√äN GIA T∆Ø T∆Ø·ªûNG QK7</h1></header>
    <div id="chat">
        <div class="bubble ai">B√°o c√°o ƒë·ªìng ch√≠! T√¥i ƒë√£ n·∫°p ƒë·ªß 300 t√¨nh hu·ªëng t∆∞ t∆∞·ªüng. ƒê·ªìng ch√≠ c·∫ßn t∆∞ v·∫•n v·ªÅ tr∆∞·ªùng h·ª£p n√†o?</div>
    </div>
    <div id="input-area">
        <button class="mic" onclick="startMic()">üé§</button>
        <input type="text" id="msg" placeholder="Nh·∫≠p t√¨nh hu·ªëng ho·∫∑c nh·∫•n Mic...">
        <button onclick="send()">G·ª¨I</button>
    </div>

    <script>
        const API_URL = 'https://chatbot-tu-tuong.onrender.com/api/chat'; // Thay link Render c·ªßa ƒë·ªìng ch√≠

        async function send() {
            const input = document.getElementById('msg');
            const chat = document.getElementById('chat');
            const text = input.value.trim();
            if(!text) return;

            chat.innerHTML += `<div class="bubble user"><b>B√°o c√°o:</b> ${text}</div>`;
            input.value = '';
            chat.scrollTop = chat.scrollHeight;

            const res = await fetch(API_URL, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({user_input: text})
            });
            const data = await res.json();
            
            chat.innerHTML += `<div class="bubble ai"><b>Chuy√™n gia:</b> ${data.response}</div>`;
            chat.scrollTop = chat.scrollHeight;
            responsiveVoice.speak(data.response, "Vietnamese Male", {rate: 1});
        }

        function startMic() {
            const rec = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
            rec.lang = 'vi-VN';
            rec.onresult = (e) => { document.getElementById('msg').value = e.results[0][0].transcript; send(); };
            rec.start();
        }
    </script>
</body>
</html>
