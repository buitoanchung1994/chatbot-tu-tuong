"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([[30721],{11418:(e,t,r)=>{let s;r.d(t,{H:()=>M});var a=r(35750),i=r(18150),n=r(85242),o=r(88243),c=r(16213),l=r(10204),u=new WeakMap,d=new WeakSet;let AliveSession=class AliveSession extends l.ib{constructor(e,t,r,s,a){super(e,()=>(0,o._)(this,d,h).call(this),r,s,void 0,a),(0,c._)(this,d),(0,i._)(this,u,{writable:!0,value:void 0}),(0,n._)(this,u,t)}};function h(){return p((0,a._)(this,u))}async function p(e){let t=await f(e);return t&&t.url&&t.token?g(t.url,t.token):null}async function f(e){let t=await fetch(e,{headers:{Accept:"application/json"}});if(t.ok)return t.json();if(404===t.status)return null;throw Error("fetch error")}async function g(e,t){let r=await fetch(e,{method:"POST",mode:"same-origin",headers:{"Scoped-CSRF-Token":t}});if(r.ok)return r.text();throw Error("fetch error")}var _=r(70170),w=r(34095),m=r(82075),b=r(23683),y=r(69599);function v(e,{channel:t,type:r,data:s}){for(let a of e)a.dispatchEvent(new CustomEvent(`socket:${r}`,{bubbles:!1,cancelable:!1,detail:{name:t,data:s}}))}var S=new WeakMap,E=new WeakMap,A=new WeakMap,k=new WeakMap,N=new WeakMap,C=new WeakSet;let I=class AliveSessionProxy{subscribe(e){let t=(0,a._)(this,E).add(...e);t.length&&(0,a._)(this,S).port.postMessage({subscribe:t});let r=new Set(t.map(e=>e.name)),s=e.reduce((e,t)=>{let s=t.topic.name;return(0,l.JR)(s)&&!r.has(s)&&e.add(s),e},new Set);s.size&&(0,a._)(this,S).port.postMessage({requestPresence:Array.from(s)})}unsubscribeAll(...e){let t=(0,a._)(this,E).drain(...e);t.length&&(0,a._)(this,S).port.postMessage({unsubscribe:t});let r=(0,a._)(this,A).removeSubscribers(e);this.sendPresenceMetadataUpdate(r)}updatePresenceMetadata(e){let t=new Set;for(let r of e)(0,a._)(this,A).setMetadata(r),t.add(r.channelName);this.sendPresenceMetadataUpdate(t)}sendPresenceMetadataUpdate(e){if(!e.size)return;let t=[];for(let r of e)t.push({channelName:r,metadata:(0,a._)(this,A).getChannelMetadata(r)});(0,a._)(this,S).port.postMessage({updatePresenceMetadata:t})}online(){(0,a._)(this,S).port.postMessage({online:!0})}offline(){(0,a._)(this,S).port.postMessage({online:!1})}hangup(){(0,a._)(this,S).port.postMessage({hangup:!0})}constructor(e,t,r,s,u,d){(0,c._)(this,C),(0,i._)(this,S,{writable:!0,value:void 0}),(0,i._)(this,E,{writable:!0,value:new l.m0}),(0,i._)(this,A,{writable:!0,value:new l.VH}),(0,i._)(this,k,{writable:!0,value:void 0}),(0,i._)(this,N,{writable:!0,value:new Map}),(0,n._)(this,k,u),(0,n._)(this,S,new SharedWorker(`${e}?module=true`,{name:`github-socket-worker-v3-${s}`,type:"module"})),(0,a._)(this,S).port.onmessage=({data:e})=>(0,o._)(this,C,T).call(this,e),(0,a._)(this,S).port.postMessage({connect:{url:t,refreshUrl:r,options:d}})}};function T(e){let{channel:t}=e;if("presence"===e.type){let r=(0,a._)(this,N).get(t);r||(r=(0,_.s)((e,r)=>{(0,a._)(this,k).call(this,e,r),(0,a._)(this,N).delete(t)},100),(0,a._)(this,N).set(t,r)),r((0,a._)(this,E).subscribers(t),e);return}(0,a._)(this,k).call(this,(0,a._)(this,E).subscribers(t),e)}async function O(){let e,t=(e=document.head.querySelector("link[rel=shared-web-socket-src]")?.getAttribute("href"))&&e.startsWith("/")?e:null;if(!t)return;let r=document.head.querySelector("link[rel=shared-web-socket]")?.href??null;if(!r)return;let s=document.head.querySelector("link[rel=shared-web-socket]")?.getAttribute("data-refresh-url")??null;if(!s)return;let a=document.head.querySelector("link[rel=shared-web-socket]")?.getAttribute("data-session-id")??null;if(!a)return;let i=(()=>{let e=(0,y.G7)("alive_legacy_retries")?{socketPolicy:{timeout:4e3,attempts:7}}:{};if(!(0,b.nr)()&&"SharedWorker"in window&&"true"!==(0,m.A)("localStorage").getItem("bypassSharedWorker"))try{return new I(t,r,s,a,v,e)}catch{}return new AliveSession(r,s,!1,v,e)})();return window.addEventListener("online",()=>i.online()),window.addEventListener("offline",()=>i.offline()),window.addEventListener("pagehide",()=>{"hangup"in i&&i.hangup()}),i}async function $(){return await w.G,O()}function M(){return s||(s=$())}},30721:(e,t,r)=>{r.d(t,{mf:()=>P.RelayEnvironmentProvider,VB:()=>SSRNetwork,SD:()=>x,E7:()=>q});var s=r(50467),a=r(40961),i=r(69487),n=r(37285),o=r(96379),c=r(71315),l=r(38102),u=r(69599);let d=["SAML","SERVICE_UNAVAILABLE"],h={FORBIDDEN:["SAML error"],AUTHENTICATION:["Couldn\u2019t authenticate you"]},p={NOT_FOUND:[["repository","issue"]]};var f=r(51987);function g(e,t,r=!1){let s=p[e];if(!s)return!1;for(let a of s){if(t.length!==a.length)continue;let s=!0;for(let e=0;e<t.length;e++)if(t[e]!==a[e]&&"*"!==a[e]){s=!1;break}if(s){if(r&&"NOT_FOUND"===e)return!0;return!1}}return!0}var _=r(86185);let w=class ValidationError extends Error{constructor(e,t,r){super(e,t),(0,s._)(this,"catalogService",void 0),this.catalogService=r,this.name="ValidationError"}},m=class RateLimitError extends Error{constructor(...e){super(...e),this.name="RateLimitError"}},b=class NotAcceptableError extends Error{constructor(...e){super(...e),this.name="NotAcceptableError"}},y=class SecFetchDestError extends Error{constructor(...e){super(...e),this.name="SecFetchDestError"}};async function v(e,t,r){if(e.status>401&&404!==e.status){let s=await e.text(),a={url:e.url,timestamp:new Date().toISOString(),persistedQueryId:t,persistedQueryName:r,failureRequestId:e.headers.get("X-Github-Request-Id")},i=`HTTP error (${e.status}): ${s||"No additional text"}.
    Error Info: ${JSON.stringify(a)}`;if(429===e.status)throw new m(i,{cause:e.status});if((0,u.G7)("react_fetch_graphql_ignore_expected_errors")){if(406===e.status)throw new b(i,{cause:e.status});if(422===e.status&&s.includes("sec-fetch-dest"))throw new y(i,{cause:e.status})}throw Error(i,{cause:e.status})}}async function S(e,t,r,s="GET",a,i,n,o,c){return(await E(e,t,r,s,{isSubscription:!1,scope:void 0},a,i,n,o,c)).response}async function E(e,t,r,s="POST",a={},o,u,p,f,_){let m=JSON.stringify((0,i.stableCopy)({persistedQueryName:t,query:e,variables:r,...a.scopeObject?{scopeObject:a.scopeObject}:{}})),{isSubscription:b,scope:y,subscriptionTopic:v,dispatchTime:S}=a,k=o;void 0===o||""!==o&&o.endsWith("/_graphql")||((0,l.N7)(Error(`fetchGraphQL received invalid baseUrl - must end with /_graphql persistedQueryId: ${e}, persistedQueryName: ${t}, invalidBaseUrl: ${o}`)),k=void 0);let N=function(e,t,r,s,a,i,n="/_graphql"){let o=[];if("GET"===e&&o.push(`body=${t}`),r&&o.push("subscription=1"),a&&o.push(`scope=${encodeURIComponent(a)}`),s&&o.push(`subscriptionTopic=${encodeURIComponent(s)}`),i&&o.push(`dispatchTime=${encodeURIComponent(i)}`),c.cg){let e=new URL(c.cg.location.href,c.cg.location.origin).searchParams.get("_features");e&&o.push(`_features=${e}`)}return o.length>0?`${n}?${o.join("&")}`:n}(s,encodeURIComponent(m),b,v,y,S,k),C=null;try{let{subscriptionId:r,requestId:a,json:i,status:o}=await A(N,s,e,t,m,u);if(C=r,p&&i.errors){let e=p[o];if(e)for(let r of i.errors){let s=e[r.type];s?.({persistedQueryName:t,errorMessage:r.message})}}let c=function(e,t,r,s,a){if(function(e,t,r){if("errors"in t){let s=r?.issues_react_graceful_not_found_handling??!1;t.errors.filter(e=>{let t=d.includes(e.type)||!!h[e.type]?.includes(e.message),r=g(e.type,e.path,s);return t||r}).map(t=>{console.error(`Failed to fetch data. Please use this request ID when contacting support: ${e} Error: ${t.type}: ${t.message} (path: ${t.path})`)}),t.errors=t.errors.filter(e=>{let t=d.includes(e.type)||!!h[e.type]?.includes(e.message),r=g(e.type,e.path,s);return!t&&!r})}}(t,e,a),"errors"in e&&e.errors.length){let t=e.errors.map(e=>`GraphQL error: ${e.type}: ${e.message} (path: ${e.path})`).join(", "),a=new w(`${t} (Persisted query id: ${r})`,{cause:e.errors},e.extensions?.query_owning_catalog_service);if(s)(0,l.N7)(a),s.error(a);else throw a}if(!("data"in e)){let a=function e(t){if(null==t)return t;if(Array.isArray(t))return t.map(t=>null==t?t:"object"==typeof t?e(t):"[FILTERED]");if("object"==typeof t){let r={};for(let s in t)if(Object.prototype.hasOwnProperty.call(t,s)){let a=t[s];"errors"===s||null==a?r[s]=a:"object"==typeof a?r[s]=e(a):r[s]="[FILTERED]"}return r}return t}(e),i=Error(`Expected data property in response: ${JSON.stringify(a)}. persistedQueryId: ${r}, requestId: ${t}`);if(s)(0,l.N7)(i),s.error(i);else throw i}return e}(i,a,e,f,u);if(c)if(_){let e={__trace:{...c?.__trace,cache_result:"refresh"}};(0,n.Av)(e)}else(0,n.Av)(c);return{subscriptionId:C,response:c}}catch(e){if(f){let t;return"RateLimitError"!==(t=e?.name)&&"SecFetchDestError"!==t&&"NotAcceptableError"!==t&&(0,l.N7)(e),f.error(e),{subscriptionId:C,response:{errors:[{message:"An error occurred while fetching data. Please try again later."}],extensions:{}}}}throw e}}async function A(e,t,r,s,a,i){return k((0,n.RD)(e),t,r,s,a,i)}async function k(e,t,r,s,a,i){let n,c,d={...(0,f.kt)()};i?.issues_react_perf_test&&(d["X-LUC-Environment"]="issues");let h=(n="GET"===t?await fetch(e,{method:t,cache:"no-cache",credentials:"include",headers:{Accept:"application/json",...d}}):await (0,o.DI)(e,{method:t,headers:{Accept:"application/json",...d},...a?{body:a}:void 0})).headers.get("X-Subscription-ID"),p=n.headers.get("X-Github-Request-Id")||"",g=n.status;_.z.checkResponse(n),await v(n,r,s);try{c=await n.json()}catch(r){let t={error:(0,u.G7)("fetch_graphql_improved_error_serialization")?r instanceof Error?`${r.name}: ${r.message}`:String(r):r,status:g,url:e,requestId:p};throw(0,l.N7)(Error(`Failed to parse server JSON response ${JSON.stringify(t)}`)),Error(`Failed to parse server response. Please try again later. ${JSON.stringify(t)}`)}return{subscriptionId:h,requestId:p,json:c,status:g}}let N=[{kind:"linked",handle(e,t,r){if(null!=t&&t.getType()===i.ROOT_TYPE&&"node"===e.name&&r.hasOwnProperty("id"))return r.id}},{kind:"pluralLinked",handle(e,t,r){if(null!=t&&t.getType()===i.ROOT_TYPE&&"nodes"===e.name&&r.hasOwnProperty("ids"))return r.ids}}];var C=r(11418),I=r(73056),T=r(69982);function O(e){return(0,T.unstable_scheduleCallback)(T.unstable_LowPriority,e)}var $=r(68021),M=r(53419),P=r(18312);async function R({params:e,variables:t,baseUrl:r,enabledFeatures:s,errorCallbacks:a,observer:i,cache:n,metadata:o}){let c=(0,u.G7)("issues_react_client_side_caching");if(!e.id)throw Error("Params has no id property!");let l=o?.ttl,d=o?.defaultValues,h=void 0!==l&&l>0,p="mutation"===e.operationKind?"POST":"GET",f=n=>S(e.id,e.name,t,p,r,s,a,i,n);return n&&c&&h&&"mutation"!==e.operationKind?n.persisterFn(f,e.id,t,i,l,{query_name:e.name},d):f()}let D={cancel:()=>!1,schedule:e=>((0,a.unstable_batchedUpdates)(e),"")};let SSRNetwork=class SSRNetwork{execute(e,t,r){return this.relayNetwork.execute(e,t,r)}getPreloadedSubscriptions(){return this.preloadedSubscriptions}constructor(e,t={},r,a,n,o,u){(0,s._)(this,"relayNetwork",void 0),(0,s._)(this,"ssrPreloadedData",void 0),(0,s._)(this,"preloadedSubscriptions",void 0),(0,s._)(this,"warningsShown",void 0),(0,s._)(this,"enabled_features",void 0),(0,s._)(this,"maxAge",void 0),(0,s._)(this,"errorCallbacks",void 0),(0,s._)(this,"cache",void 0),this.ssrPreloadedData=e,this.enabled_features=t,this.preloadedSubscriptions=r,this.warningsShown=new Set,this.maxAge=n,this.errorCallbacks=o,this.cache=u,this.relayNetwork=i.Network.create((e,t,r)=>i.Observable.create(s=>{let i=function({params:e,variables:t,ssrPreloadedQueries:r,baseUrl:s,emitWarning:a,enabledFeatures:i,maxAge:n,errorCallbacks:o,observer:l,cache:u,metadata:d}){if(!e.id)throw Error("params has no id property!");if(e.id&&r){let s=JSON.stringify(t),a=r.get(e.id)?.get(s),i=Math.floor(Date.now()/1e3),o=a?.timestamp;if(a&&(l.next(a),!(n&&o&&i>o+n)))return void l.complete();e.metadata?.isRelayRouteRequest&&(0,c.g5)()}if(c.KJ)return R({params:e,variables:t,baseUrl:s,enabledFeatures:i,errorCallbacks:o,observer:l,cache:u,metadata:{...d??{},...e.metadata}})}({params:e,variables:t,ssrPreloadedQueries:this.ssrPreloadedData,baseUrl:a,emitWarning:e=>{this.warningsShown.has(e)||(this.warningsShown.add(e),console.warn(e))},enabledFeatures:this.enabled_features,maxAge:n,errorCallbacks:this.errorCallbacks,observer:s,cache:this.cache,metadata:r.metadata});i instanceof Promise&&i.then(e=>{if(!Array.isArray(e)&&"extensions"in e&&e.extensions&&e.extensions.subscriptions){let t=e.extensions.subscriptions;for(let e in t)for(let r in this.preloadedSubscriptions.has(e)||this.preloadedSubscriptions.set(e,new Map),t[e])this.preloadedSubscriptions.get(e)?.set(r,t[e][r])}s.next(e),s.complete()})}),(e,t)=>(function(e,t,r=new Map){let s=e.id,a=e.name;return i.Observable.create(i=>{let n=()=>{},o=!1;return async function(){if(!s)throw Error("unexpected operation with no id!");let c=e.metadata?.scope,u=function(e,t,r,s){let a=s.get(e);if(a)e:for(let[e,s]of a){for(let[s,a]of Object.entries(JSON.parse(e)))if("$scope"===s&&r!==a||t[s]!==a)continue e;return s}}(s,t,c,r),d=null;if(u)d=u.subscriptionId,u.response&&i.next(u.response);else try{let e=await E(s,a,t,"GET",{isSubscription:!0,scope:c});d=e.subscriptionId,e.response&&i.next(e.response)}catch(e){if(e instanceof Error&&e.message.includes("Subscription halted"))return;throw e}try{let e=await (0,C.H)();if(o)return;let r=(0,I.$)(e,d,async({scope_object:e,subscription_topic:r,dispatch_time:n})=>{try{let{response:o}=await E(s,a,{...t},"GET",{isSubscription:!0,scopeObject:e,subscriptionTopic:r,dispatchTime:n,scope:c});o&&i.next(o)}catch(e){(0,l.N7)(e,{message:`Error in fetching update for ${s} with variables ${JSON.stringify(t)}`})}});r?.unsubscribe&&(n=r.unsubscribe)}catch(e){i.error(e)}}(),{get closed(){return o},unsubscribe(){o=!0,n()}}})})(e,t,this.preloadedSubscriptions))}};let q=(e,t)=>{let r;if(c.KJ){let e=(0,u.G7)("issues_react_client_side_caching_analytics");r=(0,$.VC)({sendAnalyticsEvent:(e,t,r={})=>{let s={react:!0,version:$.L7};(0,M.BI)(e,{...s,...r,target:t})},reportableEvents:e?$.Zf.ANY:$.Zf.NONE})}let s=new SSRNetwork(new Map,{},new Map,e,void 0,t,r),a=new i.Environment({scheduler:D,store:new i.Store(new i.RecordSource,{gcReleaseBufferSize:50,queryCacheExpirationTime:3e5,gcScheduler:O}),getDataID:(e,t)=>{if("Viewer"===t)return null==e.id?(0,i.generateClientID)("client:root","viewer"):e.id;if("ProjectV2SingleSelectFieldOption"===t){let t=[];return e.id&&t.push(e.id),e.name&&t.push(e.name),e.color&&t.push(e.color),e.description&&t.push(function(e){let t=0;if(0===e.length)return t;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r)|0;return t}(e.description)),t.join("_")}return e.id},network:s,missingFieldHandlers:N});return a.options={baseUrl:e,getPreloadedSubscriptions:()=>s.getPreloadedSubscriptions()},a};function x({environment:e,query:t,variables:r={},metadata:s}){let a=(0,i.getRequest)(t),n=(0,i.createOperationDescriptor)(a,r);return e.retain(n),(0,i.fetchQuery)(e,t,r,{fetchPolicy:"store-or-network",networkCacheConfig:{metadata:s}})}},33303:(e,t,r)=>{function s(){return Promise.resolve()}function a(){return new Promise(window.requestAnimationFrame)}async function i(e,t){let r,s=new Promise(t=>{r=self.setTimeout(t,e)});if(!t)return s;try{var a;await Promise.race([s,(a=t,new Promise((e,t)=>{let r=Error("aborted");r.name="AbortError",a.aborted?t(r):a.addEventListener("abort",()=>t(r))}))])}catch(e){throw self.clearTimeout(r),e}}function n(e){let t=[];return function(r){t.push(r),1===t.length&&queueMicrotask(()=>{let r=t.slice(0);t.length=0,e(r)})}}r.d(t,{G$:()=>a,k2:()=>s,rK:()=>n,uk:()=>i})},68021:(e,t,r)=>{r.d(t,{Zf:()=>s.Zf,L7:()=>l,VC:()=>u});var s=r(96698),a=r(21067),i=r(37285);function n(e,t,r,s){let a={...s,...Object.fromEntries(Object.entries(r).filter(([,e])=>void 0!==e))},i=Object.keys(a).sort(),n={};for(let e of i){let t=a[e];null!=t&&(n[e]=t)}return`${e}-${t}#${JSON.stringify(n)}`}let o={Check:e=>"object"==typeof e&&null!==e&&(void 0===e.data||"object"==typeof e.data)&&(void 0===e.errors||!!Array.isArray(e.errors)),Code:()=>"manual-validator",Errors:()=>[]},c=6048e5,l="1.0.0",u=({sendAnalyticsEvent:e,reportableEvents:t=s.Zf.ANY,maxAgeMs:r=c})=>(function({storage:e,prefix:t,maxAgeMs:r}){async function s(r,s,a,i){if(!e)return;let o=n(t,r,s,i);try{let t=await e.getItem(o,a);return t?.state.data}catch{return}}async function a(r,s,a,i,o,c){if(!e)return;let l=n(t,r,s,c);try{await e.setItem(l,{queryHash:r,queryKey:Object.entries(s).flat(),state:{data:a,dataUpdatedAt:Date.now(),ttl:i}},void 0,void 0,o)}catch{console.warn(`Failed to persist query for key: ${l}`)}}return{persisterFn:async function(t,n,o,c,l,u,d){let h=await s(n,o,u,d),p=null,f=null;h&&("object"==typeof h&&null!==h&&"data"in h&&(p=JSON.stringify(h.data)),(0,i.Av)({__trace:{query_name:u?.query_name,query_id:n,query_variables:o,duration_ms:1,cache_result:"hit"}}),c.next(h));let g=await t(!!h);if(g&&e){"object"==typeof g&&null!==g&&"data"in g&&(f=JSON.stringify(g.data));let e=h?p!==f?"changed":"unchanged":"new";a(n,o,g,l??r,{...u,update_type:e},d)}return g},retrieveQuery:s}})({storage:(0,s.i5)({validator:o,sendAnalyticsEvent:(r,...a)=>{t!==s.Zf.NONE&&(t===s.Zf.ANY||Array.isArray(t)&&t.includes(r))&&e(r,...a)}}),prefix:`relay-query-${(0,a.cj)()}`,maxAgeMs:r})},73056:(e,t,r)=>{r.d(t,{$:()=>n});var s=r(10204),a=r(33303);let i=new WeakMap;function n(e,t,r){let n;if(!e)throw Error("Not connected to alive");if(!t)throw Error("No channel name");let o=s.KK.parse(t);if(!o)throw Error("Invalid channel name");let c={subscriber:{dispatchEvent:e=>{e instanceof CustomEvent&&r(e.detail.data)}},topic:o},l=((n=i.get(e))||(n={subscribe:(0,a.rK)(t=>e.subscribe(t.flat())),unsubscribeAll:(0,a.rK)(t=>e.unsubscribeAll(...t))},i.set(e,n)),n);return l.subscribe([c]),{unsubscribe:()=>l.unsubscribeAll(c.subscriber)}}},86185:(e,t,r)=>{r.d(t,{z:()=>p});var s=r(35750),a=r(18150),i=r(87057),n=r(69599),o=r(82075);let c="VERSION_MISMATCH_LAST_TRIGGERED",l=(0,o.A)("localStorage",{ttl:9e7,throwQuotaErrorsOnSet:!1}),u=null;let VersionMismatchRateLimiter=class VersionMismatchRateLimiter{canTrigger(){let e=this.getLastTriggerTime();return null===e||Date.now()-e>=864e5}recordTrigger(){let e=Date.now();l.setItem(c,e.toString()),u=e}getLastTriggerTime(){let e=l.getItem(c);if(e){let t=parseInt(e,10);return isNaN(t)?null:t}return u}clearTriggerRecord(){l.removeItem(c),u=null}};let d=new VersionMismatchRateLimiter;var h=new WeakMap;let p=new class VersionMismatchDetector{registerApp(e,t){(0,s._)(this,h).set(e,t)}unregisterApp(e){(0,s._)(this,h).delete(e)}checkResponse(e,t){if("true"!==e.headers.get("X-GitHub-Version-Mismatch")||!(0,n.G7)("react_version_mismatch_detection")||!d.canTrigger())return!1;let r={clientVersion:(0,i.O)(),serverVersion:e.headers.get("X-GitHub-Server-Version")||void 0,requestUrl:e.url,responseHeaders:e.headers,appName:t};if(d.recordTrigger(),t){let e=(0,s._)(this,h).get(t);if(e)return e.onMismatchDetected(r),!0}else{let e=!1;for(let[t,a]of(0,s._)(this,h).entries()){let s={...r,appName:t};a.onMismatchDetected(s),e=!0}return e}return!1}constructor(){(0,a._)(this,h,{writable:!0,value:new Map})}}},96698:(e,t,r)=>{r.d(t,{Zf:()=>n,mW:()=>l,i5:()=>c});var s=r(77783),a=r(21067);let i=async(e,t)=>{if(t&&"undefined"!=typeof navigator&&navigator.storage?.estimate)try{let r=await navigator.storage.estimate(),s=r.quota??0,a=r.usage??0;t("offline_cache.storage_space",e,{quota_bytes:s,usage_bytes:a,available_bytes:s-a,usage_percent:s>0?a/s*100:0})}catch{}},n={CACHE_HIT:"offline_cache.cache_hit",CACHE_MISS:"offline_cache.cache_miss",CACHE_EVICT:"offline_cache.cache_evict",CACHE_INVALID:"offline_cache.stale_structure",CACHE_EXPIRED:"offline_cache.expired_item",CACHE_SET:"offline_cache.cache_set",ANY:"offline_cache.*",NONE:"offline_cache.none"},o="offline_cache::";function c({validator:e,sendAnalyticsEvent:t,storeName:r="queries"}){function c(e){return!!e.state.dataUpdatedAt&&!!e.state.ttl&&Date.now()-e.state.dataUpdatedAt>e.state.ttl}let l=(0,s.y$)(o+(0,a.cj)(),r);return{async getItem(r,a){try{let i=await (0,s.Jt)(r,l);if(!i?.state?.data)return void t(n.CACHE_MISS,r.toString(),a);if(c(i)){this.removeItem(r),t?.("offline_cache.expired_item",r.toString(),a);return}if(!e.Check(i.state.data))return void t(n.CACHE_INVALID,r.toString(),a);let o=i.state.dataUpdatedAt?Date.now()-i.state.dataUpdatedAt:"N/A",u=i.state.ttl??"N/A";return t(n.CACHE_HIT,r.toString(),{...a,age:o,ttl:u}),i}catch(e){throw e}},setItem(e,r,a,o,c){let u=o??r.state.ttl,d={...r,state:{...r.state,dataUpdatedAt:a??r.state.dataUpdatedAt,ttl:u}};return i(e,t),t(n.CACHE_SET,e.toString(),{...c,ttl:u}),(0,s.hZ)(e,d,l)},removeItem:(e,r)=>(t(n.CACHE_EVICT,e.toString(),r),(0,s.yH)(e,l)),isBustedOrExpired:e=>c(e),entries:async()=>await (0,s.jO)(l)}}async function l(){try{let e=await window?.indexedDB?.databases?.();if(!e)return;let t=e.filter(e=>e.name?.startsWith(o)).map(async e=>{if(e.name)try{let t=indexedDB.open(e.name),r=await new Promise((e,r)=>{t.onsuccess=()=>e(t.result),t.onerror=()=>r(t.error)}),a=Array.from(r.objectStoreNames);r.close();let i=a.map(async t=>{if(e.name)try{let r=(0,s.y$)(e.name,t);await (0,s.IU)(r)}catch{}});await Promise.all(i)}catch{}});await Promise.allSettled(t)}catch{}}}}]);
//# sourceMappingURL=30721-a6945c3d5442.js.map