"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([[55989],{295:(e,t,n)=>{n.d(t,{h:()=>d});var i=n(21728),a=n(97665),s=n(94747),r=n(99519),l=n(80770),o=n(99993);function d(){let e,t,n,d=(0,i.c)(7),c=(0,a.jE)(),u=(0,r.EY)();return d[0]!==u?(e=async e=>await u.deleteLoop(e),d[0]=u,d[1]=e):e=d[1],d[2]!==c?(t=(e,t)=>{e.success&&(c.removeQueries({queryKey:[o.M1,t]}),c.invalidateQueries({queryKey:[l.n]}))},d[2]=c,d[3]=t):t=d[3],d[4]!==e||d[5]!==t?(n={mutationFn:e,onSuccess:t},d[4]=e,d[5]=t,d[6]=n):n=d[6],(0,s.n)(n)}},1747:(e,t,n)=>{n.d(t,{BH:()=>R,xx:()=>F,tZ:()=>M,wI:()=>$});var i=n(74848),a=n(21728),s=n(2635),r=n(35247),l=n(42312),o=n(33535),d=n(6551),c=n(40104),u=n(50899),m=n(96540),h=n(93380),f=n(79064),p=n(7812),g=n(33592),y=n(25641),x=n(82075),v=n(46996);let b=["thread-scoped-file","draft-issue","draft-update-issue"],j=e=>!!e.isUserEdited,w=(e,t)=>e.size===t.size&&Array.from(e).every(([e,n])=>(0,v.A)(t.get(e),n)),_=(e,t)=>!w(new Map(e.filter(e=>b.includes(e.type)).map(e=>[(0,y.Vb)(e),e])),new Map(t.filter(e=>b.includes(e.type)).map(e=>[(0,y.Vb)(e),e]))),C=(e,t)=>!w(new Map(Array.from(e).filter(([,e])=>j(e))),new Map(Array.from(t).filter(([,e])=>j(e))));function N(e){return[e.id,e]}function S(e){return null!=e}function I(e){return[(0,y.Vb)(e),e]}function k(e){return null!=e}function L(e){return(0,p.PO)(e)}let T=(0,m.createContext)(void 0),D=new Map,E=[];function R(e){let t,n,c,v,w,R,F,M,$,B,V,U,q,G,H,K=(0,a.c)(55),{children:W}=e,z=(0,o.AI)(!1),Q=(0,o.AI)(!1),Z=(0,l.U)(),J=(0,m.useRef)(null),[Y,X]=(0,m.useState)(D),[ee,et]=(0,m.useState)(E),[en,ei]=(0,m.useState)(E),[ea,es]=(0,m.useState)(void 0),[er,el,eo]=(0,h.B)(!1),ed=(0,d.S)((0,s.pn)(O)),ec=(0,s.pn)(A);K[0]!==z||K[1]!==ed||K[2]!==ec?(t=()=>{ed&&ed!==ec&&(X(D),et(E),es(void 0),null===ec&&z.setValue(!1))},n=[ec,ed,z],K[0]=z,K[1]=ed,K[2]=ec,K[3]=t,K[4]=n):(t=K[3],n=K[4]),(0,m.useEffect)(t,n),K[5]===Symbol.for("react.memo_cache_sentinel")?(c=(e,t)=>{let n=void 0===t||t;et(t=>{if(t.includes(e))return t;let n=(0,p.oy)(e),i=t.findIndex(e=>(0,p.oy)(e)===n),a=[...t];return -1===i?a.push(e):a.splice(i,1,e),a}),es(t=>n||void 0===t||(0,p.oy)(t)===(0,p.oy)(e)?e:t)},K[5]=c):c=K[5];let eu=c;K[6]===Symbol.for("react.memo_cache_sentinel")?(v=e=>{X(t=>{let n=new Map(t);return n.set(e.id,e),n})},K[6]=v):v=K[6];let em=v;K[7]!==ee||K[8]!==ea?(w=e=>{let t=ee.indexOf(e);if(-1===t)return;let n=ee.toSpliced(t,1);ea===e&&es(n[t-1]??n[0]),et(n)},K[7]=ee,K[8]=ea,K[9]=w):w=K[9];let eh=(0,u.K)(w);K[10]!==ee||K[11]!==ea?(R=e=>{if(e){let t=ee;for(let n of e){let e=t.indexOf(n);-1!==e&&(t=t.toSpliced(e,1),ea===n&&es(t[e-1]??t[0]))}et(t)}else et(E),es(void 0)},K[10]=ee,K[11]=ea,K[12]=R):R=K[12];let ef=(0,u.K)(R);if(K[13]!==Y){for(let[e,t]of(F=new Map,Y)){let n=(0,p.oy)(e),i=F.get(n)??[];i.push(t.id),F.set(n,i)}for(let e of F.values())e.sort((e,t)=>{let n=Y.get(e),i=Y.get(t);return"timestamp"in n&&"timestamp"in i?n.timestamp.valueOf()-i.timestamp.valueOf():0});K[13]=Y,K[14]=F}else F=K[14];let ep=F;K[15]!==eh||K[16]!==ee||K[17]!==ep?(M=e=>{if(e){for(let t of e)if(X(e=>{let n=new Map(e);return n.delete(t)?n:e}),ee.includes(t)){let e=(0,p.oy)(t),n=ep.get(e),i=n?.indexOf(t)??-1,a=n?.[i-1];a?eu(a,!1):eh(t)}}else X(D),et(E),es(void 0)},K[15]=eh,K[16]=ee,K[17]=ep,K[18]=M):M=K[18];let eg=(0,u.K)(M);K[19]!==z.value||K[20]!==ee?($=()=>z.value?ee:E,K[19]=z.value,K[20]=ee,K[21]=$):$=K[21];let ey=(0,u.K)($);K[22]!==Z||K[23]!==z?(B=e=>{z.setValue(!0),queueMicrotask(()=>{Z.current?.focus()}),void 0!==e&&(J.current=e)},K[22]=Z,K[23]=z,K[24]=B):B=K[24];let ex=B;K[25]!==z||K[26]!==Q?(V=()=>{z.setValue(!1),Q.setValue(!1)},K[25]=z,K[26]=Q,K[27]=V):V=K[27];let ev=V;K[28]!==Q?(U=()=>Q.setValue(!0),K[28]=Q,K[29]=U):U=K[29];let eb=U;K[30]!==Q?(q=()=>Q.setValue(!1),K[30]=Q,K[31]=q):q=K[31];let ej=q;K[32]!==eh||K[33]!==ef||K[34]!==ev||K[35]!==ej||K[36]!==Z||K[37]!==eo||K[38]!==el||K[39]!==ey||K[40]!==z||K[41]!==Q||K[42]!==Y||K[43]!==ee||K[44]!==en||K[45]!==ex||K[46]!==eb||K[47]!==eg||K[48]!==ea||K[49]!==er||K[50]!==ep?(G={items:Y,versionedItems:ep,contentPreviewRef:Z,isContentPreviewOpen:z,isResourcePanelOpen:Q,getOpenItems:ey,allOpenItems:ee,openItemsBeforeSubthreadChange:en,selectedItem:ea,updateItem:em,setOpenItemsBeforeSubthreadChange:ei,openItem:eu,closeItem:eh,closeItems:ef,openPreviewPane:ex,closePreviewPane:ev,openResourcePanel:eb,closeResourcePanel:ej,removeItems:eg,showLoadingState:er,enableLoadingState:el,disableLoadingState:eo,returnFocusElementRef:J},K[32]=eh,K[33]=ef,K[34]=ev,K[35]=ej,K[36]=Z,K[37]=eo,K[38]=el,K[39]=ey,K[40]=z,K[41]=Q,K[42]=Y,K[43]=ee,K[44]=en,K[45]=ex,K[46]=eb,K[47]=eg,K[48]=ea,K[49]=er,K[50]=ep,K[51]=G):G=K[51];let ew=G;return!function(e){let t,n,i=(0,a.c)(5),{updateItem:s,openItem:l,openPreviewPane:o}=e;i[0]!==l||i[1]!==o||i[2]!==s?(t=()=>{if(!r.W.copilotRedirectDiffViewToImmersive)return;let e=f.Jt.getCopilotDiffReferences();if(e&&0!==e.length){for(let t of e){let e=(0,p.g)(t);s(e),l(e.id)}o(),f.Jt.removeCopilotDiffReferences()}},n=[s,l,o],i[0]=l,i[1]=o,i[2]=s,i[3]=t,i[4]=n):(t=i[3],n=i[4]),(0,m.useEffect)(t,n)}(ew),P(ew),!function(e){let t,n,i,l=(0,a.c)(10),{items:o,removeItems:d,updateItem:c}=e,{currentReferences:u,messages:h,selectedThreadID:f}=(0,s.Pk)(),v=(0,g.b)(),w=(0,m.useRef)(o),T=(0,m.useRef)(u);l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,x.A)("sessionStorage"),l[0]=t):t=l[0];let D=t;l[1]!==u||l[2]!==o||l[3]!==v||l[4]!==h.length||l[5]!==d||l[6]!==f||l[7]!==c?(n=()=>{let e=C(w.current,o);w.current=o;let t=_(T.current,u);if(T.current=u,e){let e=new Map(Array.from(o.values()).filter(j).map(L).filter(k).map(I)),t=new Set;for(let n of u)if(b.includes(n.type)){let i=(0,y.Vb)(n);t.add(i);let a=e.get(i);a?_([a],[n])&&v.addReference(a,"content-preview"):v.removeReference(n)}for(let[n,i]of e)t.has(n)||v.addReference(i,"content-preview")}else if(t){let e=new Map(u.map(e=>(0,p.oR)({ref:e,messageIndex:h.length})).filter(S).map(N)),t=new Set;for(let[n,i]of o)if(j(i)){t.add(n);let a=e.get(n);null!=a?C(new Map([[a.id,a]]),new Map([[i.id,i]]))&&c(a):(d([n]),r.W.copilotPersistEditedDraftIssues&&D.removeItem(`edited-${f}-${n}`))}for(let[n,i]of e)t.has(n)||c(i)}},i=[o,v,u,h.length,d,c,D,f],l[1]=u,l[2]=o,l[3]=v,l[4]=h.length,l[5]=d,l[6]=f,l[7]=c,l[8]=n,l[9]=i):(n=l[8],i=l[9]),(0,m.useEffect)(n,i)}(ew),K[52]!==W||K[53]!==ew?(H=(0,i.jsx)(T.Provider,{value:ew,children:W}),K[52]=W,K[53]=ew,K[54]=H):H=K[54],H}function A(e){return e.selectedThreadID}function O(e){return e.selectedThreadID}let P=e=>{let t,n,i,l=(0,a.c)(8),{updateItem:o}=e,{messagesLoading:d,selectedThreadID:u}=(0,s.Pk)(),h=`edited-${u}`;if(r.W.copilotPersistEditedDraftIssues){let e;l[0]!==h?(e=(0,c.MV)(h),l[0]=h,l[1]=e):e=l[1],t=e}else{let e;l[2]===Symbol.for("react.memo_cache_sentinel")?(e=[],l[2]=e):e=l[2],t=e}let f=t;l[3]!==f||l[4]!==d.state||l[5]!==o?(n=()=>{if(f&&"loaded"===d.state)for(let e of f)o(e)},i=[f,o,d.state],l[3]=f,l[4]=d.state,l[5]=o,l[6]=n,l[7]=i):(n=l[6],i=l[7]),(0,m.useEffect)(n,i)};function F(){let e=(0,m.useContext)(T);if(!e)throw Error("useContentPreview must be used within ContentPreviewContextProvider");return e}function M(){let e=(0,m.useContext)(T);if(!e)throw Error("useContentPreviewOpen must be used within ContentPreviewContextProvider");return(0,o.HN)(e.isContentPreviewOpen)}function $(){let e=(0,m.useContext)(T);if(!e)throw Error("useResourcePanelOpen must be used within ContentPreviewContextProvider");return(0,o.HN)(e.isResourcePanelOpen)}try{T.displayName||(T.displayName="ContentPreviewContext")}catch{}try{R.displayName||(R.displayName="ContentPreviewProvider")}catch{}},2265:(e,t,n)=>{n.d(t,{W:()=>d,j:()=>o});var i=n(74848),a=n(68273),s=n(21728),r=n(96540);let l=(0,r.createContext)({}),o=(0,a.GV)()?function(e){let t,n,a=(0,s.c)(5),{children:o}=e,[d,c]=(0,r.useState)(!1);a[0]!==d?(t={isDialogOpen:d,setIsDialogOpen:c},a[0]=d,a[1]=t):t=a[1];let u=t;return a[2]!==o||a[3]!==u?(n=(0,i.jsx)(l.Provider,{value:u,children:o}),a[2]=o,a[3]=u,a[4]=n):n=a[4],n}:function({children:e}){let[t,n]=(0,r.useState)(!1),a=(0,r.useMemo)(()=>({isDialogOpen:t,setIsDialogOpen:n}),[t,n]);return(0,i.jsx)(l.Provider,{value:a,children:e})},d=((0,a.GV)(),()=>(0,r.useContext)(l));try{l.displayName||(l.displayName="DialogStateContext")}catch{}try{o.displayName||(o.displayName="DialogStateProvider")}catch{}},2803:(e,t,n)=>{n.d(t,{b:()=>sh});var i,a,s,r,l,o=n(74848),d=n(68273),c=n(21728),u=n(70719),m=n(79472),h=n(18799),f=n(83494),p=n(70843),g=n(15220),y=n(87555),x=n(34164),v=n(96540),b=n(70170),j=n(56051),w=n(5524),_=n(57478),C=n(96459),N=n(53627),S=n(82603),I=n(27011);let k=(0,v.forwardRef)((0,d.Z6)()?function(e,t){let n,i,a,s,r,l,d,u,m,h,f,p,g,y,x,k,T=(0,c.c)(62),{basePath:D,fileFilterMenuOptions:E,fileFilterState:R,filterSize:A,viewerLogin:O,setFileFilterState:P}=e,[F]=(0,C.o)();T[0]!==D?(n={basePath:D},T[0]=D,T[1]=n):n=T[1];let{data:M}=(0,S.dG)(n),$=(0,v.useRef)(null);T[2]===Symbol.for("react.memo_cache_sentinel")?(i=()=>({focus:()=>{$.current?.focus()}}),T[2]=i):i=T[2],(0,v.useImperativeHandle)(t,i),T[3]!==R?(a={...R},T[3]=R,T[4]=a):a=T[4];let{filterText:B,fileExtensions:V,unselectedFileExtensions:U,showOnlyOwnedFiles:q,showDeletedFiles:G,showOnlyManifestFiles:H,showVendoredFiles:K,showViewedFiles:W}=a,{canSeeDeletedFilesFilter:z,canSeeOnlyManifestFilesFilter:Q,canSeeVendorFilesFilter:Z}=E,J=(0,I.q6)(),{clearAllFilters:Y}=(0,I.or)(),{canSeeCodeownersFilter:X}=E,ee=0;if(M){let e;X=M.isViewerOneOfMultipleCodeowners,T[5]!==M.ownershipByPath?(e=Object.values(M.ownershipByPath).filter(L),T[5]=M.ownershipByPath,T[6]=e):e=T[6],ee=e.length}let et=(0,v.useRef)((0,b.s)(e=>ei({filterText:e}),250)),en=(e,t)=>{let n=U;"selectFileExtension"===e?n=new Set([...U].filter(e=>e!==t.extension)):"unselectFileExtension"===e&&(n=new Set([...U,t.extension]));let i=Object.keys(V).filter(e=>!n.has(e)),a=new URLSearchParams(F);a.delete("file-filters[]"),i.map(e=>{a.append("file-filters[]",e)}),ei({unselectedFileExtensions:n},a)};T[7]!==P?(s=(e,t)=>{t&&(0,N.MM)(t),P({...e})},T[7]=P,T[8]=s):s=T[8];let ei=s;T[9]!==Y||T[10]!==F?(r=()=>{let e=new URLSearchParams(F);e.delete("file-filters[]"),e.delete("owned-by[]"),e.delete("show-deleted-files"),e.delete("manifests"),e.delete("show-vendored-files"),e.delete("show-viewed-files"),(0,N.MM)(e),Y()},T[9]=Y,T[10]=F,T[11]=r):r=T[11];let ea=r;return T[12]!==et?(l=e=>et.current(e),T[12]=et,T[13]=l):l=T[13],T[14]!==X||T[15]!==ee||T[16]!==ei||T[17]!==F||T[18]!==q||T[19]!==O?(d=X&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(w.l.Divider,{}),(0,o.jsx)(w.l.Group,{selectionVariant:"single",children:(0,o.jsx)(w.l.Item,{selected:q,onSelect:()=>{if(!O)return;let e=new URLSearchParams(F);q?e.delete("owned-by[]",O):e.set("owned-by[]",O),ei({showOnlyOwnedFiles:!q},e)},children:(0,o.jsxs)(o.Fragment,{children:["Only files owned by you ",(0,o.jsx)(_.A,{children:ee})]})})})]}),T[14]=X,T[15]=ee,T[16]=ei,T[17]=F,T[18]=q,T[19]=O,T[20]=d):d=T[20],T[21]===Symbol.for("react.memo_cache_sentinel")?(u=(0,o.jsx)(w.l.Divider,{}),T[21]=u):u=T[21],T[22]!==Q||T[23]!==ei||T[24]!==F||T[25]!==H?(m=Q&&(0,o.jsx)(w.l.Item,{selected:H,onSelect:()=>{let e=new URLSearchParams(F);e.set("manifests",`${!H}`),ei({showOnlyManifestFiles:!H},e)},children:"Only manifest files"}),T[22]=Q,T[23]=ei,T[24]=F,T[25]=H,T[26]=m):m=T[26],T[27]!==z||T[28]!==ei||T[29]!==F||T[30]!==G?(h=z&&(0,o.jsx)(w.l.Item,{selected:G,onSelect:()=>{let e=new URLSearchParams(F);e.set("show-deleted-files",`${!G}`),ei({showDeletedFiles:!G},e)},children:"Deleted files"}),T[27]=z,T[28]=ei,T[29]=F,T[30]=G,T[31]=h):h=T[31],T[32]!==Z||T[33]!==ei||T[34]!==F||T[35]!==K?(f=Z&&(0,o.jsx)(w.l.Item,{selected:K,onSelect:()=>{let e=new URLSearchParams(F);e.set("show-vendored-files",`${!K}`),ei({showVendoredFiles:!K},e)},children:"Vendored files"}),T[32]=Z,T[33]=ei,T[34]=F,T[35]=K,T[36]=f):f=T[36],T[37]!==ei||T[38]!==F||T[39]!==W?(p=()=>{let e=new URLSearchParams(F);e.set("show-viewed-files",`${!W}`),ei({showViewedFiles:!W},e)},T[37]=ei,T[38]=F,T[39]=W,T[40]=p):p=T[40],T[41]!==W||T[42]!==p?(g=(0,o.jsx)(w.l.Item,{selected:W,onSelect:p,children:"Viewed files"}),T[41]=W,T[42]=p,T[43]=g):g=T[43],T[44]!==h||T[45]!==f||T[46]!==g||T[47]!==m?(y=(0,o.jsxs)(w.l.Group,{"aria-label":"More",selectionVariant:"multiple",children:[m,h,f,g]}),T[44]=h,T[45]=f,T[46]=g,T[47]=m,T[48]=y):y=T[48],T[49]!==y||T[50]!==d?(x=(0,o.jsxs)(o.Fragment,{children:[d,u,y]}),T[49]=y,T[50]=d,T[51]=x):x=T[51],T[52]!==V||T[53]!==A||T[54]!==B||T[55]!==J||T[56]!==ea||T[57]!==en||T[58]!==x||T[59]!==l||T[60]!==U?(k=(0,o.jsx)(j.kF,{filterSize:A,filterText:B,fileExtensions:V,unselectedFileExtensions:U,onFilterTextChange:l,onFilterChange:en,onClearAllFilters:ea,isFilteringActive:J,additionalFilterGroups:x,ref:$}),T[52]=V,T[53]=A,T[54]=B,T[55]=J,T[56]=ea,T[57]=en,T[58]=x,T[59]=l,T[60]=U,T[61]=k):k=T[61],k}:function({basePath:e,fileFilterMenuOptions:t,fileFilterState:n,filterSize:i,viewerLogin:a,setFileFilterState:s},r){let[l]=(0,C.o)(),{data:d}=(0,S.dG)({basePath:e}),c=(0,v.useRef)(null);(0,v.useImperativeHandle)(r,()=>({focus:()=>{c.current?.focus()}}));let{filterText:u,fileExtensions:m,unselectedFileExtensions:h,showOnlyOwnedFiles:f,showDeletedFiles:p,showOnlyManifestFiles:g,showVendoredFiles:y,showViewedFiles:x}={...n},{canSeeDeletedFilesFilter:k,canSeeOnlyManifestFilesFilter:L,canSeeVendorFilesFilter:T}=t,D=(0,I.q6)(),{clearAllFilters:E}=(0,I.or)(),{canSeeCodeownersFilter:R}=t,A=0;d&&(R=d.isViewerOneOfMultipleCodeowners,A=Object.values(d.ownershipByPath).filter(e=>e.isOwnedByViewer).length);let O=(0,v.useRef)((0,b.s)(e=>P({filterText:e}),250)),P=(0,v.useCallback)((e,t)=>{t&&(0,N.MM)(t),s({...e})},[s]),F=(0,v.useCallback)(()=>{let e=new URLSearchParams(l);e.delete("file-filters[]"),e.delete("owned-by[]"),e.delete("show-deleted-files"),e.delete("manifests"),e.delete("show-vendored-files"),e.delete("show-viewed-files"),(0,N.MM)(e),E()},[l,E]);return(0,o.jsx)(j.kF,{filterSize:i,filterText:u,fileExtensions:m,unselectedFileExtensions:h,onFilterTextChange:e=>O.current(e),onFilterChange:(e,t)=>{let n=h;"selectFileExtension"===e?n=new Set([...h].filter(e=>e!==t.extension)):"unselectFileExtension"===e&&(n=new Set([...h,t.extension]));let i=Object.keys(m).filter(e=>!n.has(e)),a=new URLSearchParams(l);a.delete("file-filters[]"),i.map(e=>{a.append("file-filters[]",e)}),P({unselectedFileExtensions:n},a)},onClearAllFilters:F,isFilteringActive:D,additionalFilterGroups:(0,o.jsxs)(o.Fragment,{children:[R&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(w.l.Divider,{}),(0,o.jsx)(w.l.Group,{selectionVariant:"single",children:(0,o.jsx)(w.l.Item,{selected:f,onSelect:()=>{if(!a)return;let e=new URLSearchParams(l);f?e.delete("owned-by[]",a):e.set("owned-by[]",a),P({showOnlyOwnedFiles:!f},e)},children:(0,o.jsxs)(o.Fragment,{children:["Only files owned by you ",(0,o.jsx)(_.A,{children:A})]})})})]}),(0,o.jsx)(w.l.Divider,{}),(0,o.jsxs)(w.l.Group,{"aria-label":"More",selectionVariant:"multiple",children:[L&&(0,o.jsx)(w.l.Item,{selected:g,onSelect:()=>{let e=new URLSearchParams(l);e.set("manifests",`${!g}`),P({showOnlyManifestFiles:!g},e)},children:"Only manifest files"}),k&&(0,o.jsx)(w.l.Item,{selected:p,onSelect:()=>{let e=new URLSearchParams(l);e.set("show-deleted-files",`${!p}`),P({showDeletedFiles:!p},e)},children:"Deleted files"}),T&&(0,o.jsx)(w.l.Item,{selected:y,onSelect:()=>{let e=new URLSearchParams(l);e.set("show-vendored-files",`${!y}`),P({showVendoredFiles:!y},e)},children:"Vendored files"}),(0,o.jsx)(w.l.Item,{selected:x,onSelect:()=>{let e=new URLSearchParams(l);e.set("show-viewed-files",`${!x}`),P({showViewedFiles:!x},e)},children:"Viewed files"})]})]}),ref:c})});try{k.displayName||(k.displayName="FileFilter")}catch{}function L(e){return e.isOwnedByViewer}var T=n(1946),D=n(75202),E=n(81960),R=n(69726),A=n(84268),O=n(11196);let P="GroupsList-module__GroupsListContainer--x6dMy",F="GroupsList-module__GroupsListItemsShiftLeft--PGMNM",M="GroupsList-module__GroupItem--vAFCe",$="GroupsList-module__GroupsListToggle--KO5Om";var B=n(34535),V=n(82130);let U=(0,d.Z6)()?function(){let e,t,n=(0,c.c)(5),{sendPullRequestAnalyticsEvent:i}=(0,V.q)(),a=(0,I.JA)();n[0]!==a||n[1]!==i?(e=e=>{let{isErrorState:t,unavailableReason:n,userPreferenceDisabled:s,hasGroups:r}=e,l=void 0!==t&&t,o=void 0!==s&&s,d=void 0!==r&&r;i("change_groups.presented","CHANGE_GROUPS_PRESENTED",{presented_and_visible:d&&!l&&!o,presented_and_not_visible:d&&!l&&o,has_groups:d,is_error_state:l,selected_group_id:a?.id,browser_width:"undefined"!=typeof window?window.innerWidth:0,...n&&{unavailable_reason:n},...a&&{selected_group_name:a.name}})},n[0]=a,n[1]=i,n[2]=e):e=n[2];let s=e;return n[3]!==s?(t={sendChangeGroupsPresentedEvent:s},n[3]=s,n[4]=t):t=n[4],t}:function(){let{sendPullRequestAnalyticsEvent:e}=(0,V.q)(),t=(0,I.JA)();return{sendChangeGroupsPresentedEvent:(0,v.useCallback)(({isErrorState:n=!1,unavailableReason:i,userPreferenceDisabled:a=!1,hasGroups:s=!1})=>{e("change_groups.presented","CHANGE_GROUPS_PRESENTED",{presented_and_visible:s&&!n&&!a,presented_and_not_visible:s&&!n&&a,has_groups:s,is_error_state:n,selected_group_id:t?.id,browser_width:"undefined"!=typeof window?window.innerWidth:0,...i&&{unavailable_reason:i},...t&&{selected_group_name:t.name}})},[e,t])}};var q=n(38621),G=n(26108),H=n(64451),K=n(86877),W=n(46720),z=n(4175),Q=n(21373);let Z=(0,d.Z6)()?function(e){let t,n,i,a,s=(0,c.c)(16),{onClose:r,onSubmit:l,returnFocusRef:d,feedbackOptions:u,precheckOther:m}=e,h=void 0!==m&&m,[f,p]=(0,v.useState)(!1);s[0]!==h?(t=h?["OTHER"]:[],s[0]=h,s[1]=t):t=s[1];let[y,x]=(0,v.useState)(t),[b,j]=(0,v.useState)("");s[2]!==y||s[3]!==l||s[4]!==b?(n=e=>{e.preventDefault(),p(!0),y.length&&l({type:"NEGATIVE",feedbackChoice:y,textResponse:b})},s[2]=y,s[3]=l,s[4]=b,s[5]=n):n=s[5];let w=n;return s[6]!==f||s[7]!==y||s[8]!==u||s[9]!==w||s[10]!==b?(i=()=>(0,o.jsxs)("form",{onSubmit:w,children:[(0,o.jsxs)(g.l.Body,{children:[(0,o.jsx)("div",{className:"mb-3",children:(0,o.jsxs)(H.A,{onChange:x,required:!0,children:[(0,o.jsx)(H.A.Label,{children:"Category"}),u.map(e=>(0,o.jsxs)(K.A,{id:`feedback_choice_${e.value}`,children:[(0,o.jsx)(W.A,{value:e.value,checked:y.includes(e.value)}),(0,o.jsx)(K.A.Label,{children:e.label})]},e.value)),f&&!y.length&&(0,o.jsx)(H.A.Validation,{variant:"error",children:"Please select a feedback category"})]})}),(0,o.jsxs)(K.A,{id:"text_response",children:[(0,o.jsx)(K.A.Label,{children:"How should we improve this response?"}),(0,o.jsx)(z.Ay,{block:!0,rows:2,wrap:"wrap",name:"text_response",value:b,resize:"vertical",onChange:e=>j(e.currentTarget.value)})]})]}),(0,o.jsx)(g.l.Footer,{children:(0,o.jsx)(Q.Q,{type:"submit",disabled:f&&(!b||!y),children:"Submit"})})]}),s[6]=f,s[7]=y,s[8]=u,s[9]=w,s[10]=b,s[11]=i):i=s[11],s[12]!==r||s[13]!==d||s[14]!==i?(a=(0,o.jsx)(g.l,{onClose:r,title:"Provide additional feedback",subtitle:"Please help us improve Groups by Copilot by sharing more details about these generated groups.",returnFocusRef:d,renderBody:i}),s[12]=r,s[13]=d,s[14]=i,s[15]=a):a=s[15],a}:function({onClose:e,onSubmit:t,returnFocusRef:n,feedbackOptions:i,precheckOther:a=!1}){let[s,r]=(0,v.useState)(!1),[l,d]=(0,v.useState)(a?["OTHER"]:[]),[c,u]=(0,v.useState)(""),m=e=>{e.preventDefault(),r(!0),l.length&&t({type:"NEGATIVE",feedbackChoice:l,textResponse:c})};return(0,o.jsx)(g.l,{onClose:e,title:"Provide additional feedback",subtitle:"Please help us improve Groups by Copilot by sharing more details about these generated groups.",returnFocusRef:n,renderBody:()=>(0,o.jsxs)("form",{onSubmit:m,children:[(0,o.jsxs)(g.l.Body,{children:[(0,o.jsx)("div",{className:"mb-3",children:(0,o.jsxs)(H.A,{onChange:d,required:!0,children:[(0,o.jsx)(H.A.Label,{children:"Category"}),i.map(e=>(0,o.jsxs)(K.A,{id:`feedback_choice_${e.value}`,children:[(0,o.jsx)(W.A,{value:e.value,checked:l.includes(e.value)}),(0,o.jsx)(K.A.Label,{children:e.label})]},e.value)),s&&!l.length&&(0,o.jsx)(H.A.Validation,{variant:"error",children:"Please select a feedback category"})]})}),(0,o.jsxs)(K.A,{id:"text_response",children:[(0,o.jsx)(K.A.Label,{children:"How should we improve this response?"}),(0,o.jsx)(z.Ay,{block:!0,rows:2,wrap:"wrap",name:"text_response",value:c,resize:"vertical",onChange:e=>u(e.currentTarget.value)})]})]}),(0,o.jsx)(g.l.Footer,{children:(0,o.jsx)(Q.Q,{type:"submit",disabled:s&&(!c||!l),children:"Submit"})})]})})};try{Z.displayName||(Z.displayName="NegativeFeedbackForm")}catch{}let J=(0,d.Z6)()?function(e){let t,n,i=(0,c.c)(5),{disabled:a,onSubmit:s}=e;return i[0]!==s?(t=()=>s({type:"POSITIVE"}),i[0]=s,i[1]=t):t=i[1],i[2]!==a||i[3]!==t?(n=(0,o.jsx)(G.K,{size:"small",variant:"invisible",disabled:a,icon:q.ThumbsupIcon,"aria-label":"Positive feedback",onClick:t}),i[2]=a,i[3]=t,i[4]=n):n=i[4],n}:function({disabled:e,onSubmit:t}){return(0,o.jsx)(G.K,{size:"small",variant:"invisible",disabled:e,icon:q.ThumbsupIcon,"aria-label":"Positive feedback",onClick:()=>t({type:"POSITIVE"})})},Y=(0,d.Z6)()?function(e){let t,n,i,a,s,r=(0,c.c)(12),{disabled:l,onSubmit:d,feedbackOptions:u}=e,[m,h]=(0,v.useState)(!1),f=(0,v.useRef)(null);r[0]!==d?(t=e=>{d(e),h(!1)},r[0]=d,r[1]=t):t=r[1];let p=t;return r[2]!==m||r[3]!==u||r[4]!==p?(n=m&&(0,o.jsx)(Z,{onClose:()=>h(!1),onSubmit:p,returnFocusRef:f,feedbackOptions:u}),r[2]=m,r[3]=u,r[4]=p,r[5]=n):n=r[5],r[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>h(!0),r[6]=i):i=r[6],r[7]!==l?(a=(0,o.jsx)(G.K,{ref:f,size:"small",variant:"invisible",disabled:l,icon:q.ThumbsdownIcon,"aria-label":"Negative feedback",onClick:i}),r[7]=l,r[8]=a):a=r[8],r[9]!==n||r[10]!==a?(s=(0,o.jsxs)(o.Fragment,{children:[n,a]}),r[9]=n,r[10]=a,r[11]=s):s=r[11],s}:function({disabled:e,onSubmit:t,feedbackOptions:n}){let[i,a]=(0,v.useState)(!1),s=(0,v.useRef)(null);return(0,o.jsxs)(o.Fragment,{children:[i&&(0,o.jsx)(Z,{onClose:()=>a(!1),onSubmit:e=>{t(e),a(!1)},returnFocusRef:s,feedbackOptions:n}),(0,o.jsx)(G.K,{ref:s,size:"small",variant:"invisible",disabled:e,icon:q.ThumbsdownIcon,"aria-label":"Negative feedback",onClick:()=>a(!0)})]})};try{J.displayName||(J.displayName="PositiveFeedbackButton")}catch{}try{Y.displayName||(Y.displayName="NegativeFeedbackButton")}catch{}var X=n(20622),ee=n(53885),et=n(94747),en=n(48845);let ei=(0,d.Z6)()?function(){let e,t=(0,c.c)(2),n=(0,ee.e)(X.uT.submitCopilotGroupsFeedback);return t[0]!==n?(e={mutationFn:async e=>{let{type:t,feedbackChoice:i,textResponse:a}=e,s={feedback:t};a&&(s.text_response=a),i&&i.length>0&&(s.feedback_choice=i);let r=await (0,en.q$)(n,{method:"POST",headers:{Accept:"application/json"},body:s}),l=await (0,en.hp)(r);return(0,en.R)(r,l),l}},t[0]=n,t[1]=e):e=t[1],(0,et.n)(e)}:function(){let e=(0,ee.e)(X.uT.submitCopilotGroupsFeedback);return(0,et.n)({mutationFn:async({type:t,feedbackChoice:n,textResponse:i})=>{let a={feedback:t};i&&(a.text_response=i),n&&n.length>0&&(a.feedback_choice=n);let s=await (0,en.q$)(e,{method:"POST",headers:{Accept:"application/json"},body:a}),r=await (0,en.hp)(s);return(0,en.R)(s,r),r}})},ea=(0,d.Z6)()?e=>{let t,n,i,a,s,r=(0,c.c)(15),{onNegativeFeedbackSubmit:l}=e,[d,u]=(0,v.useState)(),{mutate:m}=ei(),h=(0,I.xW)().changeGroupFeedbackOptions;r[0]!==m?(t=e=>{u(e.type),m(e)},r[0]=m,r[1]=t):t=r[1];let f=t;r[2]!==f||r[3]!==l?(n=e=>{l(),f(e)},r[2]=f,r[3]=l,r[4]=n):n=r[4];let p=n;return r[5]!==f||r[6]!==d?(i="NEGATIVE"!==d&&(0,o.jsx)(J,{disabled:!!d,onSubmit:f}),r[5]=f,r[6]=d,r[7]=i):i=r[7],r[8]!==h||r[9]!==p||r[10]!==d?(a="POSITIVE"!==d&&(0,o.jsx)(Y,{disabled:!!d,onSubmit:p,feedbackOptions:h}),r[8]=h,r[9]=p,r[10]=d,r[11]=a):a=r[11],r[12]!==i||r[13]!==a?(s=(0,o.jsxs)("div",{className:"d-flex",children:[i,a]}),r[12]=i,r[13]=a,r[14]=s):s=r[14],s}:({onNegativeFeedbackSubmit:e})=>{let[t,n]=(0,v.useState)(),{mutate:i}=ei(),a=(0,I.xW)().changeGroupFeedbackOptions,s=e=>{n(e.type),i(e)};return(0,o.jsxs)("div",{className:"d-flex",children:["NEGATIVE"!==t&&(0,o.jsx)(J,{disabled:!!t,onSubmit:s}),"POSITIVE"!==t&&(0,o.jsx)(Y,{disabled:!!t,onSubmit:t=>{e(),s(t)},feedbackOptions:a})]})},es=(0,d.Z6)()?e=>{let t,n,i=(0,c.c)(5),{className:a,onNegativeFeedbackSubmit:s}=e;return i[0]!==s?(t=(0,o.jsx)(D.t,{fallback:null,children:(0,o.jsx)(ea,{onNegativeFeedbackSubmit:s})}),i[0]=s,i[1]=t):t=i[1],i[2]!==a||i[3]!==t?(n=(0,o.jsx)("div",{className:a,children:t}),i[2]=a,i[3]=t,i[4]=n):n=i[4],n}:({className:e,onNegativeFeedbackSubmit:t})=>(0,o.jsx)("div",{className:e,children:(0,o.jsx)(D.t,{fallback:null,children:(0,o.jsx)(ea,{onNegativeFeedbackSubmit:t})})});try{ea.displayName||(ea.displayName="Feedback")}catch{}try{es.displayName||(es.displayName="GroupsFeedback")}catch{}var er=n(70263),el=n(40235),eo=n(97286),ed=n(96379);function ec(e){switch(e){case"CREATED":case"RUNNING":case"STARTED":case"WAITING":return!1;default:return!0}}function eu(e){switch(e){case"ABANDONED":case"FAILED":case"SKIPPED":return!0;default:return!1}}function em({baseSha:e,headSha:t,changeGroupsURL:n}){return[X.uT.changeGroups,n,`baseSha:${e}`,`headSha:${t}`]}let eh=(0,d.Z6)()?function(e,t){let n,i,a,s,r,l=(0,c.c)(15),o=(0,ee.e)(X.uT.changeGroups);l[0]!==t||l[1]!==o||l[2]!==e?(n=em({headSha:e,baseSha:t,changeGroupsURL:o}),l[0]=t,l[1]=o,l[2]=e,l[3]=n):n=l[3];let d=n,{updateChangeGroupGeneration:u}=(0,I.wL)(),m=(0,I.xW)();l[4]!==m?(i=()=>{let e=m.latestChangeGroupOrchestration?.state;if(e&&ec(e))return m},l[4]=m,l[5]=i):i=l[5];let h=i;return l[6]!==o||l[7]!==u?(a=async()=>{let e=await (0,ed.QJ)(o);if(!e.ok)throw Error(`HTTP ${e.status}`);let t=await e.json();return u(t),t},l[6]=o,l[7]=u,l[8]=a):a=l[8],l[9]!==h?(s=h(),l[9]=h,l[10]=s):s=l[10],l[11]!==d||l[12]!==a||l[13]!==s?(r={queryKey:d,queryFn:a,initialData:s,staleTime:1/0},l[11]=d,l[12]=a,l[13]=s,l[14]=r):r=l[14],(0,eo.I)(r)}:function(e,t){let n=(0,ee.e)(X.uT.changeGroups),i=em({headSha:e,baseSha:t,changeGroupsURL:n}),{updateChangeGroupGeneration:a}=(0,I.wL)(),s=(0,I.xW)(),r=(0,v.useCallback)(()=>{let e=s.latestChangeGroupOrchestration?.state;if(e&&ec(e))return s},[s]);return(0,eo.I)({queryKey:i,queryFn:async()=>{let e=await (0,ed.QJ)(n);if(!e.ok)throw Error(`HTTP ${e.status}`);let t=await e.json();return a(t),t},initialData:r(),staleTime:1/0})},ef=(0,d.Z6)()?function(e,t,n){let i,a,s=(0,c.c)(7),r=(0,er.A)(),{refetch:l}=eh(n,t);s[0]!==r||s[1]!==l?(i=(0,b.n)(()=>{r()&&l()},2e3),s[0]=r,s[1]=l,s[2]=i):i=s[2];let o=i;s[3]!==t||s[4]!==n||s[5]!==o?(a=e=>{e?.base_commit_oid===t&&e?.head_commit_oid===n&&window.setTimeout(()=>o(),e.wait||0)},s[3]=t,s[4]=n,s[5]=o,s[6]=a):a=s[6];let d=a;(0,el.x)(e,d)}:function(e,t,n){let i=(0,er.A)(),{refetch:a}=eh(n,t),s=(0,v.useMemo)(()=>(0,b.n)(()=>{i()&&a()},2e3),[i,a]),r=(0,v.useMemo)(()=>e=>{e?.base_commit_oid===t&&e?.head_commit_oid===n&&window.setTimeout(()=>s(),e.wait||0)},[t,n,s]);(0,el.x)(e,r)};function ep(e){switch(e){case"DIFF_TOO_LARGE":case"TOO_MANY_GROUPS":return"Groups are unavailable because the PR exceeds the size limit.";case"DIFF_TOO_SMALL":case"TOO_FEW_GROUPS":return"Grouping was skipped because all changes are closely related.";default:return"Copilot was unable to generate groups for this pull request."}}var eg=n(82075),ey=n(71315);let ex=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f=(0,c.c)(46),{groups:p,activeGroupId:g,onSelectGroup:y,onClearActiveGroup:b,isLoadingState:j}=e,{sendPullRequestAnalyticsEvent:C}=(0,V.q)(),{sendChangeGroupsPresentedEvent:N}=U(),{fullDiff:S}=(0,I.L3)(),k=(0,I.a_)(),L=(0,I.TV)(),T=(0,I.r$)(),D=(0,v.useRef)(null),{error:A}=eh(S.headOid,S.baseOid),O=!!A&&!j;ef(k,S.baseOid,S.headOid),f[0]!==p.length||f[1]!==j||f[2]!==N||f[3]!==O||f[4]!==L?(t=()=>{j||(O||L?N({isErrorState:!0,unavailableReason:L||void 0}):p.length>0?N({isErrorState:!1,hasGroups:!0}):N({isErrorState:!1,hasGroups:!1}))},f[0]=p.length,f[1]=j,f[2]=N,f[3]=O,f[4]=L,f[5]=t):t=f[5],f[6]!==p||f[7]!==j||f[8]!==N||f[9]!==O||f[10]!==L?(n=[p,j,O,L,N],f[6]=p,f[7]=j,f[8]=N,f[9]=O,f[10]=L,f[11]=n):n=f[11],(0,v.useEffect)(t,n),f[12]!==b||f[13]!==C?(i=()=>{C("groups_list.clear_group","GROUPS_LIST_ITEM"),b()},f[12]=b,f[13]=C,f[14]=i):i=f[14];let M=i;f[15]!==M?(a=()=>{M(),requestAnimationFrame(()=>{D.current?.focus()})},f[15]=M,f[16]=a):a=f[16];let B=a,G=p.length>0,{isCollapsed:H,handleToggleCollapsed:K}=e_(T);f[17]!==K?(s=()=>{K(),requestAnimationFrame(()=>{D.current?.focus()})},f[17]=K,f[18]=s):s=f[18];let W=s;f[19]===Symbol.for("react.memo_cache_sentinel")?(r=(0,o.jsx)(E.A,{as:"h2",className:"h6",children:"Groups by Copilot"}),f[19]=r):r=f[19];let z=r;return f[20]===Symbol.for("react.memo_cache_sentinel")?(l=(0,x.$)(P),f[20]=l):l=f[20],f[21]!==p.length||f[22]!==K||f[23]!==G||f[24]!==H||f[25]!==j?(d=j?(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center fgColor-muted pt-2 px-2 pb-1",children:[z,(0,o.jsx)("span",{className:"ml-auto d-flex flex-items-center",children:(0,o.jsx)(R.A,{size:"small","aria-label":"Loading change groups"})})]}):(0,o.jsxs)("button",{className:(0,x.$)("d-flex flex-row flex-items-center fgColor-muted",$),onClick:K,"aria-expanded":!H,ref:D,children:[z,H&&G&&(0,o.jsx)(_.A,{scheme:"secondary",className:"mx-2",children:p.length}),H?(0,o.jsx)(q.ChevronDownIcon,{className:"ml-auto"}):(0,o.jsx)(q.ChevronUpIcon,{className:"ml-auto"})]}),f[21]=p.length,f[22]=K,f[23]=G,f[24]=H,f[25]=j,f[26]=d):d=f[26],f[27]!==g||f[28]!==p||f[29]!==M||f[30]!==B||f[31]!==G||f[32]!==H||f[33]!==y||f[34]!==W?(u=G&&(0,o.jsxs)("div",{className:(0,x.$)("mt-n2",F),children:[H&&!g?(0,o.jsx)("div",{className:"pb-2"}):(0,o.jsxs)(w.l,{children:[!H&&(0,o.jsx)(w.l.Item,{active:void 0===g,onSelect:M,children:"All files"},"All files"),p.toSorted(ev).map(e=>(0,o.jsx)(ej,{group:e,activeGroupId:g,onSelectGroup:y,isListCollapsed:H,onClickGroupWhenCollapsed:B},e.id)).filter(Boolean)]}),!H&&(0,o.jsx)(es,{className:"ml-2",onNegativeFeedbackSubmit:W})]}),f[27]=g,f[28]=p,f[29]=M,f[30]=B,f[31]=G,f[32]=H,f[33]=y,f[34]=W,f[35]=u):u=f[35],f[36]!==G||f[37]!==H||f[38]!==j||f[39]!==O||f[40]!==L?(m=!H&&!G&&!j&&(0,o.jsx)("div",{className:"px-2 pb-2 pt-0 f6 fgColor-muted",children:L?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{className:"mb-0 d-inline",children:ep(L)})," ",(0,o.jsx)(eb,{})]}):O&&(0,o.jsx)("p",{className:"mb-0",children:"No groups created"})}),f[36]=G,f[37]=H,f[38]=j,f[39]=O,f[40]=L,f[41]=m):m=f[41],f[42]!==m||f[43]!==d||f[44]!==u?(h=(0,o.jsxs)("div",{className:l,children:[d,u,m]}),f[42]=m,f[43]=d,f[44]=u,f[45]=h):h=f[45],h}:function({groups:e,activeGroupId:t,onSelectGroup:n,onClearActiveGroup:i,isLoadingState:a}){let{sendPullRequestAnalyticsEvent:s}=(0,V.q)(),{sendChangeGroupsPresentedEvent:r}=U(),{fullDiff:l}=(0,I.L3)(),d=(0,I.a_)(),c=(0,I.TV)(),u=(0,I.r$)(),m=(0,v.useRef)(null),{error:h}=eh(l.headOid,l.baseOid),f=!!h&&!a;ef(d,l.baseOid,l.headOid),(0,v.useEffect)(()=>{a||(f||c?r({isErrorState:!0,unavailableReason:c||void 0}):e.length>0?r({isErrorState:!1,hasGroups:!0}):r({isErrorState:!1,hasGroups:!1}))},[e,a,f,c,r]);let p=()=>{s("groups_list.clear_group","GROUPS_LIST_ITEM"),i()},g=()=>{p(),requestAnimationFrame(()=>{m.current?.focus()})},y=e.length>0,{isCollapsed:b,handleToggleCollapsed:j}=e_(u),C=(0,o.jsx)(E.A,{as:"h2",className:"h6",children:"Groups by Copilot"});return(0,o.jsxs)("div",{className:(0,x.$)(P),children:[a?(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center fgColor-muted pt-2 px-2 pb-1",children:[C,(0,o.jsx)("span",{className:"ml-auto d-flex flex-items-center",children:(0,o.jsx)(R.A,{size:"small","aria-label":"Loading change groups"})})]}):(0,o.jsxs)("button",{className:(0,x.$)("d-flex flex-row flex-items-center fgColor-muted",$),onClick:j,"aria-expanded":!b,ref:m,children:[C,b&&y&&(0,o.jsx)(_.A,{scheme:"secondary",className:"mx-2",children:e.length}),b?(0,o.jsx)(q.ChevronDownIcon,{className:"ml-auto"}):(0,o.jsx)(q.ChevronUpIcon,{className:"ml-auto"})]}),y&&(0,o.jsxs)("div",{className:(0,x.$)("mt-n2",F),children:[b&&!t?(0,o.jsx)("div",{className:"pb-2"}):(0,o.jsxs)(w.l,{children:[!b&&(0,o.jsx)(w.l.Item,{active:void 0===t,onSelect:p,children:"All files"},"All files"),e.toSorted((e,t)=>t.priority-e.priority).map(e=>(0,o.jsx)(ej,{group:e,activeGroupId:t,onSelectGroup:n,isListCollapsed:b,onClickGroupWhenCollapsed:g},e.id)).filter(Boolean)]}),!b&&(0,o.jsx)(es,{className:"ml-2",onNegativeFeedbackSubmit:()=>{j(),requestAnimationFrame(()=>{m.current?.focus()})}})]}),!b&&!y&&!a&&(0,o.jsx)("div",{className:"px-2 pb-2 pt-0 f6 fgColor-muted",children:c?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{className:"mb-0 d-inline",children:ep(c)})," ",(0,o.jsx)(eb,{})]}):f&&(0,o.jsx)("p",{className:"mb-0",children:"No groups created"})})]})};function ev(e,t){return t.priority-e.priority}let eb=(0,d.Z6)()?function(){let e,t,n,i,a=(0,c.c)(9),s=(0,v.useRef)(null),{mutate:r}=ei(),[l,d]=(0,v.useState)(!1),u=(0,I.xW)().changeGroupFeedbackOptions;a[0]!==r?(e=e=>{r(e),d(!1)},a[0]=r,a[1]=e):e=a[1];let m=e;return a[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)(A.A,{className:"d-inline",as:"button",ref:s,inline:!0,muted:!0,onClick:()=>d(!0),children:"Give feedback"}),a[2]=t):t=a[2],a[3]!==l||a[4]!==u||a[5]!==m?(n=l&&(0,o.jsx)(Z,{feedbackOptions:u,onSubmit:m,onClose:()=>d(!1),returnFocusRef:s,precheckOther:!0}),a[3]=l,a[4]=u,a[5]=m,a[6]=n):n=a[6],a[7]!==n?(i=(0,o.jsxs)(o.Fragment,{children:[t,n]}),a[7]=n,a[8]=i):i=a[8],i}:function(){let e=(0,v.useRef)(null),{mutate:t}=ei(),[n,i]=(0,v.useState)(!1),a=(0,I.xW)().changeGroupFeedbackOptions;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(A.A,{className:"d-inline",as:"button",ref:e,inline:!0,muted:!0,onClick:()=>i(!0),children:"Give feedback"}),n&&(0,o.jsx)(Z,{feedbackOptions:a,onSubmit:e=>{t(e),i(!1)},onClose:()=>i(!1),returnFocusRef:e,precheckOther:!0})]})},ej=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l=(0,c.c)(20),{group:d,activeGroupId:u,isListCollapsed:m,onSelectGroup:h,onClickGroupWhenCollapsed:f}=e,{sendPullRequestAnalyticsEvent:p}=(0,V.q)(),g=(0,v.useRef)(null);l[0]===Symbol.for("react.memo_cache_sentinel")?(t={focusRowRef:g,mouseRowRef:g},l[0]=t):t=l[0];let y=(0,B.Z)(t);l[1]!==d.id||l[2]!==h||l[3]!==p?(n=()=>{p("groups_list.select_group","GROUPS_LIST_ITEM"),h(d.id)},l[1]=d.id,l[2]=h,l[3]=p,l[4]=n):n=l[4];let b=n,j=u===d.id;if(m&&!j)return null;let _=`${d.name}-${m?"collapsed":"expanded"}`,C=m?void 0:b;l[5]===Symbol.for("react.memo_cache_sentinel")?(i=(0,x.$)(M,"PRIVATE_TreeView-item-content-text"),l[5]=i):i=l[5],l[6]!==d.name?(a=(0,o.jsx)("div",{className:i,children:d.name}),l[6]=d.name,l[7]=a):a=l[7],l[8]!==m||l[9]!==f?(s=m?(0,o.jsx)(w.l.TrailingAction,{as:"button",label:"Clear active group",icon:q.XIcon,onClick:e=>{e.preventDefault(),e.stopPropagation(),f()}}):null,l[8]=m,l[9]=f,l[10]=s):s=l[10],l[11]!==j||l[12]!==_||l[13]!==C||l[14]!==a||l[15]!==s?(r=(0,o.jsxs)(w.l.Item,{active:j,onSelect:C,ref:g,children:[a,s]},_),l[11]=j,l[12]=_,l[13]=C,l[14]=a,l[15]=s,l[16]=r):r=l[16];let N=r;if(y){let e;return l[17]!==d.name||l[18]!==N?(e=(0,o.jsx)(O.m,{text:d.name,direction:"ne",children:N}),l[17]=d.name,l[18]=N,l[19]=e):e=l[19],e}return N}:function({group:e,activeGroupId:t,isListCollapsed:n,onSelectGroup:i,onClickGroupWhenCollapsed:a}){let{sendPullRequestAnalyticsEvent:s}=(0,V.q)(),r=(0,v.useRef)(null),l=(0,B.Z)({focusRowRef:r,mouseRowRef:r}),d=t===e.id;if(n&&!d)return null;let c=(0,o.jsxs)(w.l.Item,{active:d,onSelect:n?void 0:()=>{s("groups_list.select_group","GROUPS_LIST_ITEM"),i(e.id)},ref:r,children:[(0,o.jsx)("div",{className:(0,x.$)(M,"PRIVATE_TreeView-item-content-text"),children:e.name}),n?(0,o.jsx)(w.l.TrailingAction,{as:"button",label:"Clear active group",icon:q.XIcon,onClick:e=>{e.preventDefault(),e.stopPropagation(),a()}}):null]},`${e.name}-${n?"collapsed":"expanded"}`);return l?(0,o.jsx)(O.m,{text:e.name,direction:"ne",children:c}):c};function ew(e){return`GroupsListIsCollapsed_${e}`}function e_(e){let t=(0,eg.A)("localStorage"),[n,i]=(0,v.useState)(!1),{sendPullRequestAnalyticsEvent:a}=(0,V.q)();return(0,v.useEffect)(()=>{let n=t.getItem(ew(e));null!==n&&i(JSON.parse(n))},[]),{isCollapsed:n,handleToggleCollapsed:()=>{let s=!n;ey.cg?.requestAnimationFrame(()=>{t.setItem(ew(e),JSON.stringify(s))}),i(()=>s),a("groups_list.toggle_collapse","GROUPS_LIST_TOGGLE",{is_collapsed:s})}}}try{ex.displayName||(ex.displayName="GroupsList")}catch{}try{eb.displayName||(eb.displayName="FeedbackButton")}catch{}try{ej.displayName||(ej.displayName="GroupItem")}catch{}let eC="PullRequestFileTree-module__sidebar--A_ZKx",eN="PullRequestFileTree-module__FileTreeScrollable--tm_BE";var eS=n(69599);let eI="pr-file-tree",ek=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f,p=(0,c.c)(35),{className:g,fileFilter:y,filteredDiffs:b,onFileSelected:j,onSetFilterState:w,allowPullRequestGroups:_}=e,C=void 0!==_&&_,N=(0,I.iY)(),S=(0,I.YL)(),k=(0,I.ww)(),L=(0,I.Fl)(),E=(0,I.WA)(),{sendChangeGroupsPresentedEvent:R}=U();p[0]!==L?(t=L&&!ec(L.state),p[0]=L,p[1]=t):t=p[1];let A=t,O=(0,I.TV)();p[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,eS.G7)("hide_groups_list_for_few_groups"),p[2]=n):n=p[2];let P=n&&("TOO_FEW_GROUPS"===O||"DIFF_TOO_SMALL"===O||"NOT_GENERATED_YET"===O);return p[3]!==C||p[4]!==N.length||p[5]!==k||p[6]!==R||p[7]!==E?(i=()=>{C&&N.length>0&&!k&&!E&&R({isErrorState:!1,userPreferenceDisabled:!0,hasGroups:!0})},a=[C,k,E,R,N.length],p[3]=C,p[4]=N.length,p[5]=k,p[6]=R,p[7]=E,p[8]=i,p[9]=a):(i=p[8],a=p[9]),(0,v.useEffect)(i,a),p[10]!==S||p[11]!==C||p[12]!==N||p[13]!==k||p[14]!==A||p[15]!==w||p[16]!==P||p[17]!==E?(s=C&&!k&&E&&!P&&(0,o.jsx)(ex,{activeGroupId:S,groups:N,onClearActiveGroup:()=>{w({activeChangeGroupId:void 0})},onSelectGroup:e=>{w({activeChangeGroupId:e})},isLoadingState:A||!1}),p[10]=S,p[11]=C,p[12]=N,p[13]=k,p[14]=A,p[15]=w,p[16]=P,p[17]=E,p[18]=s):s=p[18],p[19]===Symbol.for("react.memo_cache_sentinel")?(r=(0,o.jsx)("span",{children:"File tree failed to load."}),p[19]=r):r=p[19],p[20]!==g?(l=(0,x.$)("d-flex flex-column min-height-0",g),p[20]=g,p[21]=l):l=p[21],p[22]!==y?(d=(0,o.jsx)("div",{className:"pb-3 pr-lg-3",children:y}),p[22]=y,p[23]=d):d=p[23],p[24]===Symbol.for("react.memo_cache_sentinel")?(u=(0,o.jsx)("h2",{className:"sr-only",children:"File tree"}),p[24]=u):u=p[24],p[25]!==b||p[26]!==j?(m=(0,o.jsxs)("div",{className:eN,children:[u,(0,o.jsx)(T.oj,{diffs:b,fileNodeRenderer:eL,sortByDiffOrder:!0,onSelect:j,className:"pr-lg-3"})]}),p[25]=b,p[26]=j,p[27]=m):m=p[27],p[28]!==m||p[29]!==l||p[30]!==d?(h=(0,o.jsx)(D.t,{fallback:r,children:(0,o.jsxs)("div",{className:l,id:eI,children:[d,m]})}),p[28]=m,p[29]=l,p[30]=d,p[31]=h):h=p[31],p[32]!==h||p[33]!==s?(f=(0,o.jsxs)("div",{className:"d-flex flex-column height-fit",children:[s,h]}),p[32]=h,p[33]=s,p[34]=f):f=p[34],f}:function({className:e,fileFilter:t,filteredDiffs:n,onFileSelected:i,onSetFilterState:a,allowPullRequestGroups:s=!1}){let r=(0,v.useCallback)(e=>(0,o.jsx)(eT,{...e},e.file.filePath),[]),l=(0,I.iY)(),d=(0,I.YL)(),c=(0,I.ww)(),u=(0,I.Fl)(),m=(0,I.WA)(),{sendChangeGroupsPresentedEvent:h}=U(),f=u&&!ec(u.state),p=(0,I.TV)(),g=(0,eS.G7)("hide_groups_list_for_few_groups");return(0,v.useEffect)(()=>{s&&l.length>0&&!c&&!m&&h({isErrorState:!1,userPreferenceDisabled:!0,hasGroups:!0})},[s,c,m,h,l.length]),(0,o.jsxs)("div",{className:"d-flex flex-column height-fit",children:[s&&!c&&m&&!(g&&("TOO_FEW_GROUPS"===p||"DIFF_TOO_SMALL"===p||"NOT_GENERATED_YET"===p))&&(0,o.jsx)(ex,{activeGroupId:d,groups:l,onClearActiveGroup:()=>{a({activeChangeGroupId:void 0})},onSelectGroup:e=>{a({activeChangeGroupId:e})},isLoadingState:f||!1}),(0,o.jsx)(D.t,{fallback:(0,o.jsx)("span",{children:"File tree failed to load."}),children:(0,o.jsxs)("div",{className:(0,x.$)("d-flex flex-column min-height-0",e),id:eI,children:[(0,o.jsx)("div",{className:"pb-3 pr-lg-3",children:t}),(0,o.jsxs)("div",{className:eN,children:[(0,o.jsx)("h2",{className:"sr-only",children:"File tree"}),(0,o.jsx)(T.oj,{diffs:n,fileNodeRenderer:r,sortByDiffOrder:!0,onSelect:i,className:"pr-lg-3"})]})]})})]})};function eL(e){return(0,o.jsx)(eT,{...e},e.file.filePath)}let eT=(0,v.memo)((0,d.Z6)()?function(e){let t,n,i,a,s,r,l=(0,c.c)(14);l[0]!==e?({file:t,...n}=e,l[0]=e,l[1]=t,l[2]=n):(t=l[1],n=l[2]),l[3]!==t.diff?(i=Object.values(t.diff?.markersMap??{}).flatMap(eE),l[3]=t.diff,l[4]=i):i=l[4];let d=i,u=(0,I.Qb)(d);l[5]!==u||l[6]!==t.diff?(a={...t.diff,totalCommentsCount:u},l[5]=u,l[6]=t.diff,l[7]=a):a=l[7],l[8]!==t||l[9]!==a?(s={...t,diff:a},l[8]=t,l[9]=a,l[10]=s):s=l[10];let m=s;return l[11]!==m||l[12]!==n?(r=(0,o.jsx)(T.ZH,{file:m,...n}),l[11]=m,l[12]=n,l[13]=r):r=l[13],r}:function({file:e,...t}){let n=(0,v.useMemo)(()=>Object.values(e.diff?.markersMap??{}).flatMap(e=>e.threads.map(e=>e.id)),[e.diff]),i=(0,I.Qb)(n),a=(0,v.useMemo)(()=>({...e,diff:{...e.diff,totalCommentsCount:i}}),[e,i]);return(0,o.jsx)(T.ZH,{file:a,...t})});try{ek.displayName||(ek.displayName="PullRequestFileTree")}catch{}try{eT.displayName||(eT.displayName="PullRequestFile")}catch{}function eD(e){return e.id}function eE(e){return e.threads.map(eD)}var eR=n(11680),eA=n(25407);let eO=(0,d.Z6)()?function(e){let t,n,i,a,s,r=(0,c.c)(17),{pageLimits:l,repository:d,urls:u}=e,m=l.filesLimitExceeded||l.reviewThreadsLimitExceeded||l.annotationsLimitExceeded;r[0]!==l.annotationsLimit||r[1]!==l.annotationsLimitExceeded||r[2]!==l.filesLimit||r[3]!==l.filesLimitExceeded||r[4]!==l.reviewThreadsLimit||r[5]!==l.reviewThreadsLimitExceeded?(t=()=>{let e=[];l.filesLimitExceeded&&e.push(`${l.filesLimit} files`),l.reviewThreadsLimitExceeded&&e.push(`${l.reviewThreadsLimit} comments`),l.annotationsLimitExceeded&&e.push(`${l.annotationsLimit} alerts`);let t="";return 1===e.length?t=`${e[0]}`:2===e.length?t=`${e[0]} and ${e[1]}`:3===e.length&&(t=`${e[0]}, ${e[1]}, and ${e[2]}`),"Only the first "+t+" are currently being shown."},r[0]=l.annotationsLimit,r[1]=l.annotationsLimitExceeded,r[2]=l.filesLimit,r[3]=l.filesLimitExceeded,r[4]=l.reviewThreadsLimit,r[5]=l.reviewThreadsLimitExceeded,r[6]=t):t=r[6];let h=t;r[7]!==d?(n=async function(){let e=new FormData;e.append("feature_name","prx_files"),await (0,ed.DI)((0,eA.ZD8)({repo:d}),{body:e,method:"POST"})},r[7]=d,r[8]=n):n=r[8];let f=n,p=h(),g=`${u.files}?new_files_changed=false`;r[9]!==f||r[10]!==g?(i=(0,o.jsx)(A.A,{inline:!0,href:g,onClick:f,rel:"noreferrer",children:"switch back"}),r[9]=f,r[10]=g,r[11]=i):i=r[11],r[12]!==p||r[13]!==i?(a=(0,o.jsxs)(o.Fragment,{children:[p," To see more,"," ",i," ","to the classic page."]}),r[12]=p,r[13]=i,r[14]=a):a=r[14];let y=a;return m?(r[15]!==y?(s=(0,o.jsx)(eR.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:y,className:"mb-3"}),r[15]=y,r[16]=s):s=r[16],s):null}:function({pageLimits:e,repository:t,urls:n}){let i,a,s=e.filesLimitExceeded||e.reviewThreadsLimitExceeded||e.annotationsLimitExceeded;async function r(){let e=new FormData;e.append("feature_name","prx_files"),await (0,ed.DI)((0,eA.ZD8)({repo:t}),{body:e,method:"POST"})}let l=(0,o.jsxs)(o.Fragment,{children:[(i=[],e.filesLimitExceeded&&i.push(`${e.filesLimit} files`),e.reviewThreadsLimitExceeded&&i.push(`${e.reviewThreadsLimit} comments`),e.annotationsLimitExceeded&&i.push(`${e.annotationsLimit} alerts`),a="",1===i.length?a=`${i[0]}`:2===i.length?a=`${i[0]} and ${i[1]}`:3===i.length&&(a=`${i[0]}, ${i[1]}, and ${i[2]}`),"Only the first "+a+" are currently being shown.")," To see more,"," ",(0,o.jsx)(A.A,{inline:!0,href:`${n.files}?new_files_changed=false`,onClick:r,rel:"noreferrer",children:"switch back"})," ","to the classic page."]});return s?(0,o.jsx)(eR.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:l,className:"mb-3"}):null};try{eO.displayName||(eO.displayName="PageLimitsBanner")}catch{}let eP="ViewedFileProgress-module__ProgressContainer--ZQ1e8",eF="ViewedFileProgress-module__FilesCountText--q4rKx",eM="ViewedFileProgress-module__ViewedText--vvFsM",e$=(0,d.Z6)()?e=>{let t,n,i,a,s=(0,c.c)(5),{progress:r}=e;s[0]===Symbol.for("react.memo_cache_sentinel")?(t={transform:"rotate(-90deg)"},s[0]=t):t=s[0],s[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,o.jsx)("circle",{cx:"50%",cy:"50%",fill:"transparent",r:"6",stroke:"var(--borderColor-default, var(--color-border-default))",strokeWidth:"2"}),s[1]=n):n=s[1];let l=38-38*r;return s[2]===Symbol.for("react.memo_cache_sentinel")?(i={transition:"stroke-dashoffset 0.35s"},s[2]=i):i=s[2],s[3]!==l?(a=(0,o.jsxs)("svg",{"data-circumference":"38",height:"16",role:"presentation",style:t,width:"16",children:[n,(0,o.jsx)("circle",{cx:"50%",cy:"50%",fill:"transparent",r:"6",stroke:"var(--fgColor-done, var(--color-done-fg))",strokeDasharray:38,strokeDashoffset:l,strokeLinecap:"round",strokeWidth:"2",style:i})]}),s[3]=l,s[4]=a):a=s[4],a}:({progress:e})=>(0,o.jsxs)("svg",{"data-circumference":"38",height:"16",role:"presentation",style:{transform:"rotate(-90deg)"},width:"16",children:[(0,o.jsx)("circle",{cx:"50%",cy:"50%",fill:"transparent",r:"6",stroke:"var(--borderColor-default, var(--color-border-default))",strokeWidth:"2"}),(0,o.jsx)("circle",{cx:"50%",cy:"50%",fill:"transparent",r:"6",stroke:"var(--fgColor-done, var(--color-done-fg))",strokeDasharray:38,strokeDashoffset:38-38*e,strokeLinecap:"round",strokeWidth:"2",style:{transition:"stroke-dashoffset 0.35s"}})]}),eB=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d=(0,c.c)(14),{totalFilesCount:u}=e,m=(0,I.gi)();if(0===u)return null;let h=(m??0)/u||0;return d[0]!==h?(t=(0,o.jsx)(e$,{progress:h}),d[0]=h,d[1]=t):t=d[1],d[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,x.$)("ml-1",eP),d[2]=n):n=d[2],d[3]!==m?(i=(0,o.jsx)("span",{className:eF,children:m}),d[3]=m,d[4]=i):i=d[4],d[5]!==u?(a=(0,o.jsx)("span",{className:eF,children:u}),d[5]=u,d[6]=a):a=d[6],d[7]===Symbol.for("react.memo_cache_sentinel")?(s=(0,o.jsx)("span",{className:eM,children:"viewed"}),d[7]=s):s=d[7],d[8]!==i||d[9]!==a?(r=(0,o.jsxs)("span",{className:n,children:[i," /"," ",a," ",s]}),d[8]=i,d[9]=a,d[10]=r):r=d[10],d[11]!==t||d[12]!==r?(l=(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center",children:[t,r]}),d[11]=t,d[12]=r,d[13]=l):l=d[13],l}:function({totalFilesCount:e}){let t=(0,I.gi)();return 0===e?null:(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center",children:[(0,o.jsx)(e$,{progress:(t??0)/e||0}),(0,o.jsxs)("span",{className:(0,x.$)("ml-1",eP),children:[(0,o.jsx)("span",{className:eF,children:t})," /"," ",(0,o.jsx)("span",{className:eF,children:e})," ",(0,o.jsx)("span",{className:eM,children:"viewed"})]})]})};try{e$.displayName||(e$.displayName="ProgressIcon")}catch{}try{eB.displayName||(eB.displayName="ViewedFileProgress")}catch{}function eV(e){let t=document.querySelector('#__primerPortalRoot__ div[role="dialog"]'),n=document.querySelector(`#${e} div[role="dialog"]`);(t||n)&&document.dispatchEvent(new KeyboardEvent("keydown",{key:"Escape",code:"Escape",ctrlKey:!0}))}var eU=n(99511),eq=n(94236),eG=n(77430);function eH(e,t){return new Set([...e.filter(e=>{let{thread:n,previewInfo:i}=e;return function(e,t){let{filterText:n,showResolvedThreads:i}=t;if(!i&&e.isResolved||!t.showOutdatedThreads&&e.isOutdated)return!1;if(n){let t=n.toLowerCase();if(!e.authorLogin.toLowerCase().includes(t)&&!e.body.toLowerCase().includes(t)&&!e.path.toLowerCase().includes(t))return!1}return!t.selectedAuthor||e.authorLogin===t.selectedAuthor}({authorLogin:i.firstComment?.author?.login??"",body:i.firstComment?.body??"",id:i.threadId,isResolved:n?.isResolved??!1,isOutdated:n?.isOutdated??!1,path:i.path},t)}).map(e=>e.previewInfo.threadId??"")])}let eK={filterText:"",showResolvedThreads:!0,showOutdatedThreads:!0},eW=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f,p,g,y,v=(0,c.c)(42),{authorList:b,className:j,filterState:_,onFilterStateChange:C}=e;v[0]!==_||v[1]!==C?(t=e=>{C({..._,filterText:e})},v[0]=_,v[1]=C,v[2]=t):t=v[2];let N=t;v[3]!==_||v[4]!==C?(n=()=>{C({..._,showResolvedThreads:!_.showResolvedThreads})},v[3]=_,v[4]=C,v[5]=n):n=v[5];let S=n;v[6]!==_||v[7]!==C?(i=()=>{C({..._,showOutdatedThreads:!_.showOutdatedThreads})},v[6]=_,v[7]=C,v[8]=i):i=v[8];let I=i;v[9]!==_||v[10]!==C?(a=e=>{if(_.selectedAuthor===e)return C({..._,selectedAuthor:void 0});C({..._,selectedAuthor:e})},v[9]=_,v[10]=C,v[11]=a):a=v[11];let k=a;return v[12]!==j?(s=(0,x.$)("d-flex flex-row gap-2 flex-nowrap",j),v[12]=j,v[13]=s):s=v[13],v[14]!==N?(r=e=>N(e.target.value),v[14]=N,v[15]=r):r=v[15],v[16]!==_.filterText||v[17]!==r?(l=(0,o.jsx)(eU.A,{block:!0,"aria-label":"Filter comments",leadingVisual:q.SearchIcon,placeholder:"Filter comments",value:_.filterText,onChange:r}),v[16]=_.filterText,v[17]=r,v[18]=l):l=v[18],v[19]===Symbol.for("react.memo_cache_sentinel")?(d=(0,o.jsx)(eq.W.Anchor,{children:(0,o.jsx)(Q.Q,{"aria-label":"Additional comment filters",className:"flex-shink-0",leadingVisual:q.FilterIcon,trailingAction:q.TriangleDownIcon,children:"Filter"})}),v[19]=d):d=v[19],v[20]!==S?(u=()=>S(),v[20]=S,v[21]=u):u=v[21],v[22]!==_.showResolvedThreads||v[23]!==u?(m=(0,o.jsx)(w.l.Item,{selected:_.showResolvedThreads,onSelect:u,children:"Show resolved comments"}),v[22]=_.showResolvedThreads,v[23]=u,v[24]=m):m=v[24],v[25]!==I?(h=()=>I(),v[25]=I,v[26]=h):h=v[26],v[27]!==_.showOutdatedThreads||v[28]!==h?(f=(0,o.jsx)(w.l.Item,{selected:_.showOutdatedThreads,onSelect:h,children:"Show outdated comments"}),v[27]=_.showOutdatedThreads,v[28]=h,v[29]=f):f=v[29],v[30]!==b||v[31]!==_.selectedAuthor||v[32]!==k?(p=b.length>1&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(w.l.Divider,{}),(0,o.jsxs)(w.l.Group,{children:[(0,o.jsx)(w.l.GroupHeading,{children:"Filter by"}),b.map(e=>(0,o.jsxs)(w.l.Item,{selected:_.selectedAuthor===e.login,onSelect:()=>k(e.login),children:[(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)(eG.r,{src:e.avatarUrl})}),e.login]},e.login))]})]}),v[30]=b,v[31]=_.selectedAuthor,v[32]=k,v[33]=p):p=v[33],v[34]!==m||v[35]!==f||v[36]!==p?(g=(0,o.jsxs)(eq.W,{children:[d,(0,o.jsx)(eq.W.Overlay,{width:"small",children:(0,o.jsxs)(w.l,{selectionVariant:"single",children:[m,f,p]})})]}),v[34]=m,v[35]=f,v[36]=p,v[37]=g):g=v[37],v[38]!==g||v[39]!==s||v[40]!==l?(y=(0,o.jsxs)("div",{className:s,children:[l,g]}),v[38]=g,v[39]=s,v[40]=l,v[41]=y):y=v[41],y}:function({authorList:e,className:t,filterState:n,onFilterStateChange:i}){return(0,o.jsxs)("div",{className:(0,x.$)("d-flex flex-row gap-2 flex-nowrap",t),children:[(0,o.jsx)(eU.A,{block:!0,"aria-label":"Filter comments",leadingVisual:q.SearchIcon,placeholder:"Filter comments",value:n.filterText,onChange:e=>{var t;return t=e.target.value,void i({...n,filterText:t})}}),(0,o.jsxs)(eq.W,{children:[(0,o.jsx)(eq.W.Anchor,{children:(0,o.jsx)(Q.Q,{"aria-label":"Additional comment filters",className:"flex-shink-0",leadingVisual:q.FilterIcon,trailingAction:q.TriangleDownIcon,children:"Filter"})}),(0,o.jsx)(eq.W.Overlay,{width:"small",children:(0,o.jsxs)(w.l,{selectionVariant:"single",children:[(0,o.jsx)(w.l.Item,{selected:n.showResolvedThreads,onSelect:()=>void i({...n,showResolvedThreads:!n.showResolvedThreads}),children:"Show resolved comments"}),(0,o.jsx)(w.l.Item,{selected:n.showOutdatedThreads,onSelect:()=>void i({...n,showOutdatedThreads:!n.showOutdatedThreads}),children:"Show outdated comments"}),e.length>1&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(w.l.Divider,{}),(0,o.jsxs)(w.l.Group,{children:[(0,o.jsx)(w.l.GroupHeading,{children:"Filter by"}),e.map(e=>(0,o.jsxs)(w.l.Item,{selected:n.selectedAuthor===e.login,onSelect:()=>(e=>{if(n.selectedAuthor===e)return i({...n,selectedAuthor:void 0});i({...n,selectedAuthor:e})})(e.login),children:[(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)(eG.r,{src:e.avatarUrl})}),e.login]},e.login))]})]})]})})]})]})};try{eW.displayName||(eW.displayName="CommentsFilter")}catch{}var ez=n(61219),eQ=n(98091),eZ=n(58615),eJ=n(72511),eY=n(26607);let eX="ConversationHeader-module__file-name-overflow--Ymb0e",e0=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f,p,g,y,b=(0,c.c)(47),{firstCommentId:j,isCollapsed:w,isOutdated:_,isResolved:C,line:N,onToggleCollapsed:S,onNavigateToDiffComment:I,path:k,rightSideContent:L,threadId:T,headingLevel:D}=e,R=void 0===D?"h3":D;b[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,eg.A)("localStorage"),b[0]=t):t=b[0];let P=t,[F,M]=(0,v.useState)(w);b[1]!==T?(n=()=>{let e=localStorage.getItem(`reviewThreadIsCollapsed_${T}`);null!==e&&M(JSON.parse(e))},b[1]=T,b[2]=n):n=b[2],b[3]!==F||b[4]!==T?(i=[F,T],b[3]=F,b[4]=T,b[5]=i):i=b[5],(0,v.useEffect)(n,i),b[6]!==F||b[7]!==S||b[8]!==T?(a=()=>{P.setItem(`reviewThreadIsCollapsed_${T}`,JSON.stringify(!F)),M(e1),S()},b[6]=F,b[7]=S,b[8]=T,b[9]=a):a=b[9];let $=a,B=F&&"rounded-2",V=F&&"border-bottom-0";b[10]!==B||b[11]!==V?(s=(0,x.$)("d-flex flex-row flex-items-center px-2 py-1 bgColor-muted rounded-top-2 border-bottom",B,V),b[10]=B,b[11]=V,b[12]=s):s=b[12];let U=F?"Open review comment":"Close review comment",H=F?q.ChevronRightIcon:q.ChevronDownIcon;b[13]!==$||b[14]!==H||b[15]!==U?(r=(0,o.jsx)(G.K,{"aria-label":U,icon:H,size:"small",variant:"invisible",onClick:$}),b[13]=$,b[14]=H,b[15]=U,b[16]=r):r=b[16],b[17]===Symbol.for("react.memo_cache_sentinel")?(l=(0,x.$)(eX,"d-inline text-mono no-wrap overflow-hidden direction-rtl fgColor-default"),b[17]=l):l=b[17];let K=`#r${j}`;b[18]!==I||b[19]!==k||b[20]!==K?(d=(0,o.jsxs)(A.A,{className:l,onClick:I,href:K,muted:!0,children:["\u200E",k,"\u200E"]}),b[18]=I,b[19]=k,b[20]=K,b[21]=d):d=b[21],b[22]!==k||b[23]!==d?(u=(0,o.jsx)(O.m,{direction:"n",text:k,type:"label",children:d}),b[22]=k,b[23]=d,b[24]=u):u=b[24],b[25]!==N?(m=!!N&&(0,o.jsxs)("span",{className:"f6 fgColor-muted text-normal no-wrap ml-2",children:["Line ",N]}),b[25]=N,b[26]=m):m=b[26],b[27]!==R||b[28]!==u||b[29]!==m?(h=(0,o.jsxs)(E.A,{as:R,className:"d-flex flex-items-center flex-1 min-width-0 mr-2 ml-1 f6 text-semibold",children:[u,m]}),b[27]=R,b[28]=u,b[29]=m,b[30]=h):h=b[30],b[31]!==C?(f=C&&(0,o.jsx)(eY.A,{size:"large",className:"mx-1",variant:"secondary",children:"Resolved"}),b[31]=C,b[32]=f):f=b[32],b[33]!==_||b[34]!==C?(p=_&&!C&&(0,o.jsx)(eY.A,{size:"large",className:"mx-1",variant:"attention",children:"Outdated"}),b[33]=_,b[34]=C,b[35]=p):p=b[35];let W=`#r${j}`;return b[36]!==I||b[37]!==W?(g=(0,o.jsx)(G.K,{as:"a","aria-label":"Jump to the comment in the diff",tooltipDirection:"se",icon:q.FileSymlinkFileIcon,variant:"invisible",href:W,onClick:I}),b[36]=I,b[37]=W,b[38]=g):g=b[38],b[39]!==L||b[40]!==r||b[41]!==h||b[42]!==f||b[43]!==p||b[44]!==g||b[45]!==s?(y=(0,o.jsxs)("div",{className:s,children:[r,h,f,p,g,L]}),b[39]=L,b[40]=r,b[41]=h,b[42]=f,b[43]=p,b[44]=g,b[45]=s,b[46]=y):y=b[46],y}:function({firstCommentId:e,isCollapsed:t,isOutdated:n,isResolved:i,line:a,onToggleCollapsed:s,onNavigateToDiffComment:r,path:l,rightSideContent:d,threadId:c,headingLevel:u="h3"}){let m=(0,eg.A)("localStorage"),[h,f]=(0,v.useState)(t);return(0,v.useEffect)(()=>{let e=localStorage.getItem(`reviewThreadIsCollapsed_${c}`);null!==e&&f(JSON.parse(e))},[h,c]),(0,o.jsxs)("div",{className:(0,x.$)("d-flex flex-row flex-items-center px-2 py-1 bgColor-muted rounded-top-2 border-bottom",h&&"rounded-2",h&&"border-bottom-0"),children:[(0,o.jsx)(G.K,{"aria-label":h?"Open review comment":"Close review comment",icon:h?q.ChevronRightIcon:q.ChevronDownIcon,size:"small",variant:"invisible",onClick:()=>{m.setItem(`reviewThreadIsCollapsed_${c}`,JSON.stringify(!h)),f(e=>!e),s()}}),(0,o.jsxs)(E.A,{as:u,className:"d-flex flex-items-center flex-1 min-width-0 mr-2 ml-1 f6 text-semibold",children:[(0,o.jsx)(O.m,{direction:"n",text:l,type:"label",children:(0,o.jsxs)(A.A,{className:(0,x.$)(eX,"d-inline text-mono no-wrap overflow-hidden direction-rtl fgColor-default"),onClick:r,href:`#r${e}`,muted:!0,children:["\u200E",l,"\u200E"]})}),!!a&&(0,o.jsxs)("span",{className:"f6 fgColor-muted text-normal no-wrap ml-2",children:["Line ",a]})]}),i&&(0,o.jsx)(eY.A,{size:"large",className:"mx-1",variant:"secondary",children:"Resolved"}),n&&!i&&(0,o.jsx)(eY.A,{size:"large",className:"mx-1",variant:"attention",children:"Outdated"}),(0,o.jsx)(G.K,{as:"a","aria-label":"Jump to the comment in the diff",tooltipDirection:"se",icon:q.FileSymlinkFileIcon,variant:"invisible",href:`#r${e}`,onClick:r}),d]})};function e1(e){return!e}try{e0.displayName||(e0.displayName="ConversationHeader")}catch{}let e2="ThreadHeader-module__ThreadHeaderIconButton--RGjVM";var e3=n(97695),e4=n(39698),e5=n(21067);let e6=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d=(0,c.c)(35),{firstCommentId:u,isCollapsed:m,onToggleCollapsed:h,onNavigateToDiffComment:f,threadPreview:p,headingLevel:g,isResolved:y,isOutdated:x,lineKey:b}=e,{sendPullRequestAnalyticsEvent:j}=(0,V.q)(),[w,_]=(0,v.useState)(void 0),C=p.previewInfo,{line:N}=C;d[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,e5.M3)(),d[0]=t):t=d[0];let S=t,{mutate:I}=(0,e3.H)(C.path,b);d[1]!==m||d[2]!==y||d[3]!==h||d[4]!==C.threadId||d[5]!==I?(n=()=>{y||I({threadId:C.threadId},{onError:()=>_("Failed to resolve thread"),onSuccess:()=>{m||h()}})},d[1]=m,d[2]=y,d[3]=h,d[4]=C.threadId,d[5]=I,d[6]=n):n=d[6];let k=n,{mutate:L}=(0,e4.i)(C.path,b);d[7]!==m||d[8]!==y||d[9]!==h||d[10]!==j||d[11]!==p||d[12]!==L?(i=async()=>{!p||y&&(L({threadId:p.previewInfo.threadId},{onError:()=>_("Failed to unresolve thread"),onSuccess:()=>{m&&h()}}),j("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON"))},d[7]=m,d[8]=y,d[9]=h,d[10]=j,d[11]=p,d[12]=L,d[13]=i):i=d[13];let T=i;return d[14]!==k||d[15]!==T||d[16]!==y?(a=S?(0,o.jsx)(G.K,{"aria-label":y?"Unresolve conversation":"Resolve conversation",tooltipDirection:"sw",icon:y?q.CheckCircleFillIcon:q.CheckCircleIcon,"data-thread-resolved":y,className:e2,variant:"invisible",onClick:y?T:k}):null,d[14]=k,d[15]=T,d[16]=y,d[17]=a):a=d[17],d[18]!==u||d[19]!==g||d[20]!==m||d[21]!==x||d[22]!==y||d[23]!==N||d[24]!==f||d[25]!==h||d[26]!==C.path||d[27]!==C.threadId||d[28]!==a?(s=(0,o.jsx)(e0,{firstCommentId:u,isCollapsed:m,isOutdated:x,isResolved:y,line:N,path:C.path,rightSideContent:a,onNavigateToDiffComment:f,onToggleCollapsed:h,threadId:C.threadId,headingLevel:g}),d[18]=u,d[19]=g,d[20]=m,d[21]=x,d[22]=y,d[23]=N,d[24]=f,d[25]=h,d[26]=C.path,d[27]=C.threadId,d[28]=a,d[29]=s):s=d[29],d[30]!==w?(r=w&&(0,o.jsxs)(eJ.A,{variant:"danger",className:"m-2",children:[(0,o.jsx)(q.StopIcon,{className:"mr-2"}),w]}),d[30]=w,d[31]=r):r=d[31],d[32]!==s||d[33]!==r?(l=(0,o.jsxs)(o.Fragment,{children:[s,r]}),d[32]=s,d[33]=r,d[34]=l):l=d[34],l}:function({firstCommentId:e,isCollapsed:t,onToggleCollapsed:n,onNavigateToDiffComment:i,threadPreview:a,headingLevel:s,isResolved:r,isOutdated:l,lineKey:d}){let{sendPullRequestAnalyticsEvent:c}=(0,V.q)(),[u,m]=(0,v.useState)(void 0),h=a.previewInfo,{line:f}=h,p=(0,e5.M3)(),{mutate:g}=(0,e3.H)(h.path,d),{mutate:y}=(0,e4.i)(h.path,d),x=async()=>{!a||r&&(y({threadId:a.previewInfo.threadId},{onError:()=>m("Failed to unresolve thread"),onSuccess:()=>{t&&n()}}),c("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON"))};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e0,{firstCommentId:e,isCollapsed:t,isOutdated:l,isResolved:r,line:f,path:h.path,rightSideContent:p?(0,o.jsx)(G.K,{"aria-label":r?"Unresolve conversation":"Resolve conversation",tooltipDirection:"sw",icon:r?q.CheckCircleFillIcon:q.CheckCircleIcon,"data-thread-resolved":r,className:e2,variant:"invisible",onClick:r?x:()=>{r||g({threadId:h.threadId},{onError:()=>m("Failed to resolve thread"),onSuccess:()=>{t||n()}})}}):null,onNavigateToDiffComment:i,onToggleCollapsed:n,threadId:h.threadId,headingLevel:s}),u&&(0,o.jsxs)(eJ.A,{variant:"danger",className:"m-2",children:[(0,o.jsx)(q.StopIcon,{className:"mr-2"}),u]})]})};try{e6.displayName||(e6.displayName="ThreadHeader")}catch{}var e7=n(24494);let e8=(0,d.Z6)()?function(e){let t,n,i=(0,c.c)(4),{commentAuthors:a}=e;return a.length<1?null:(i[0]!==a?(t=a.map(e9),i[0]=a,i[1]=t):t=i[1],i[2]!==t?(n=(0,o.jsx)(e7.A,{children:t}),i[2]=t,i[3]=n):n=i[3],n)}:function({commentAuthors:e}){return e.length<1?null:(0,o.jsx)(e7.A,{children:e.map(({login:e,avatarUrl:t})=>(0,o.jsx)(eG.r,{alt:e,size:18,src:t},e))})};function e9(e){let{login:t,avatarUrl:n}=e;return(0,o.jsx)(eG.r,{alt:t,size:18,src:n},t)}try{e8.displayName||(e8.displayName="PreviewAuthors")}catch{}var te=n(36729),tt=n(73017);let tn=(0,v.memo)((0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d=(0,c.c)(29),{commentPreview:u,onNavigateToDiffComment:m,tabSize:h}=e,[f,p]=(0,v.useState)(!1),g=u.commentId;d[0]!==g||d[1]!==m?(t=()=>{window.location.hash=`#r${g}`,m(g)},d[0]=g,d[1]=m,d[2]=t):t=d[2];let y=t;d[3]!==u.commentsData?(n=u.commentsData??{comments:[]},d[3]=u.commentsData,d[4]=n):n=d[4],d[5]!==g||d[6]!==n?(i=ti(g,n),d[5]=g,d[6]=n,d[7]=i):i=d[7];let x=i,b=u.threadPreviewComments.length,j=`${b} previous ${1===b?"comment":"comments"}`,w=u.isOutdated||!1,_=u.isResolved||!1,C=u.line,N=u.path;d[8]===Symbol.for("react.memo_cache_sentinel")?(a=()=>p(ts),d[8]=a):a=d[8];let S=u.threadId,I=parseInt(u.commentId);return d[9]!==u.line||d[10]!==u.path||d[11]!==u.threadId||d[12]!==f||d[13]!==y||d[14]!==I||d[15]!==w||d[16]!==_?(s=(0,o.jsx)(e0,{isCollapsed:f,isOutdated:w,isResolved:_,line:C,path:N,onNavigateToDiffComment:y,onToggleCollapsed:a,threadId:S,firstCommentId:I}),d[9]=u.line,d[10]=u.path,d[11]=u.threadId,d[12]=f,d[13]=y,d[14]=I,d[15]=w,d[16]=_,d[17]=s):s=d[17],d[18]!==x||d[19]!==u||d[20]!==f||d[21]!==y||d[22]!==b||d[23]!==j||d[24]!==h?(r=!f&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"border-bottom borderColor-muted overflow-x-auto",children:(0,o.jsx)(eQ.i,{diffTableClassName:"border-0",diffLines:u.subject?.diffLines,className:"m-0 border-0",tabSize:h||4})}),b>0&&(0,o.jsx)("div",{className:"my-2 px-2",children:(0,o.jsx)(Q.Q,{"aria-label":"View comment in diff",size:"small",trailingVisual:q.ChevronRightIcon,variant:"invisible",onClick:y,children:(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-start flex-items-center gap-2",children:[(0,o.jsx)("span",{children:j}),(0,o.jsx)(e8,{commentAuthors:x})]})})}),(0,o.jsx)(tt.vb,{className:"markdown-body",html:ta(u),sx:{p:3,fontSize:1}})]}),d[18]=x,d[19]=u,d[20]=f,d[21]=y,d[22]=b,d[23]=j,d[24]=h,d[25]=r):r=d[25],d[26]!==s||d[27]!==r?(l=(0,o.jsxs)("div",{className:"border rounded-2 d-flex flex-column",children:[s,r]}),d[26]=s,d[27]=r,d[28]=l):l=d[28],l}:function({commentPreview:e,onNavigateToDiffComment:t,tabSize:n}){let[i,a]=(0,v.useState)(!1),s=e.commentId,r=(0,v.useCallback)(()=>{window.location.hash=`#r${s}`,t(s)},[s,t]),l=ti(s,e.commentsData??{comments:[]}),d=e.threadPreviewComments.length,c=`${d} previous ${1===d?"comment":"comments"}`;return(0,o.jsxs)("div",{className:"border rounded-2 d-flex flex-column",children:[(0,o.jsx)(e0,{isCollapsed:i,isOutdated:e.isOutdated||!1,isResolved:e.isResolved||!1,line:e.line,path:e.path,onNavigateToDiffComment:r,onToggleCollapsed:()=>a(e=>!e),threadId:e.threadId,firstCommentId:parseInt(e.commentId)}),!i&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"border-bottom borderColor-muted overflow-x-auto",children:(0,o.jsx)(eQ.i,{diffTableClassName:"border-0",diffLines:e.subject?.diffLines,className:"m-0 border-0",tabSize:n||4})}),d>0&&(0,o.jsx)("div",{className:"my-2 px-2",children:(0,o.jsx)(Q.Q,{"aria-label":"View comment in diff",size:"small",trailingVisual:q.ChevronRightIcon,variant:"invisible",onClick:r,children:(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-start flex-items-center gap-2",children:[(0,o.jsx)("span",{children:c}),(0,o.jsx)(e8,{commentAuthors:l})]})})}),(0,o.jsx)(tt.vb,{className:"markdown-body",html:ta(e),sx:{p:3,fontSize:1}})]})]})});function ti(e,t){let n=new Set;return(t?.comments??[]).reduce((t,i)=>{if(!i||i.id===e)return t;let a=i.author?.login??"",s=i.author?.avatarUrl??"",r=i.author?.id??"",l=i.author?.url??"";return n.has(a)||(t.push({avatarUrl:s,login:a,id:r,url:l}),n.add(a)),t},[])}function ta(e){let t=(e.commentsData?.comments??[]).find(t=>t&&String(t.databaseId)===e.commentId);return t?.bodyHTML??""}try{tn.displayName||(tn.displayName="PendingCommentPreview")}catch{}function ts(e){return!e}function tr(e){return`panel-thread-collapsed-state-${e}`}let tl=(0,v.memo)((0,d.Z6)()?function(e){let t,n,i,a,s,r=(0,c.c)(34),{onNavigateToDiffComment:l,pullRequestId:d,tabSize:u,threadPreview:m,headingLevel:h}=e,{previewInfo:f}=m,{threadId:p,firstComment:g}=f,y=g?.id,x=f.path,v=(0,I.j5)(),{navigateToSelectedComment:b}=(0,I.Lh)(),j=(0,I.SM)(),w=f.subject?.endDiffSide==="RIGHT"?"R":"L",_=f.subject?.originalEndLine?`${w}${f.subject.originalEndLine}`:te.zW,C=j(Number(f.threadId),f.path,_),N=C?.isResolved||!1,S=C?.isOutdated||!1,k=()=>{if(S&&f.originalDiffPathUri){let e=new URL(f.originalDiffPathUri);e.searchParams.set("new_files_changed","true"),window.location.href=e.toString()}else window.location.hash=`#r${g?.databaseId}`,v&&g?.databaseId&&b(g?.databaseId);l()};r[0]!==p?(t=tr(p),r[0]=p,r[1]=t):t=r[1];let[L,T]=(0,eZ.M)(t,!1),D=f.threadPreviewComments.length,E=0===D?"No replies":`${D} ${1===D?"reply":"replies"}`,R={...C,id:C?.id??"",commentsData:{comments:[]}};if(!g||!R)return null;let A=ti(f.commentId,C?.commentsData??{comments:[]}),O=g?.databaseId;return r[2]!==L||r[3]!==T?(n=()=>T(!L),r[2]=L,r[3]=T,r[4]=n):n=r[4],r[5]!==h||r[6]!==L||r[7]!==S||r[8]!==N||r[9]!==_||r[10]!==k||r[11]!==O||r[12]!==n||r[13]!==m?(i=(0,o.jsx)(e6,{firstCommentId:O,isCollapsed:L,threadPreview:m,onNavigateToDiffComment:k,onToggleCollapsed:n,headingLevel:h,isResolved:N,isOutdated:S,lineKey:_}),r[5]=h,r[6]=L,r[7]=S,r[8]=N,r[9]=_,r[10]=k,r[11]=O,r[12]=n,r[13]=m,r[14]=i):i=r[14],r[15]!==A||r[16]!==y||r[17]!==x||r[18]!==g||r[19]!==L||r[20]!==S||r[21]!==N||r[22]!==_||r[23]!==k||r[24]!==f.originalDiffPathUri||r[25]!==f.subject?.diffLines||r[26]!==d||r[27]!==E||r[28]!==u||r[29]!==p?(a=!L&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"border-bottom borderColor-muted overflow-x-auto",children:(0,o.jsx)(eQ.i,{diffTableClassName:"border-0",diffLines:f?.subject?.diffLines,className:"m-0 border-0",tabSize:u||4})}),(0,o.jsx)("div",{children:(0,o.jsx)(ez.U,{lineMarkersKey:_,hideActions:!0,isInlineComment:!1,comment:g,filePath:x,index:0,isAnchorable:!1,isOutdated:S,isThreadResolved:N,subjectId:d,threadId:p,originalDiffPathUri:f.originalDiffPathUri,headingLevel:"h3"},y)}),(0,o.jsx)("div",{className:"mb-2 px-2",children:(0,o.jsx)(Q.Q,{"aria-label":`View ${E}`,size:"small",trailingVisual:q.ChevronRightIcon,variant:"invisible",onClick:k,children:(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-start flex-items-center gap-2",children:[(0,o.jsx)("span",{children:E}),(0,o.jsx)(e8,{commentAuthors:A})]})})})]}),r[15]=A,r[16]=y,r[17]=x,r[18]=g,r[19]=L,r[20]=S,r[21]=N,r[22]=_,r[23]=k,r[24]=f.originalDiffPathUri,r[25]=f.subject?.diffLines,r[26]=d,r[27]=E,r[28]=u,r[29]=p,r[30]=a):a=r[30],r[31]!==i||r[32]!==a?(s=(0,o.jsxs)("div",{className:"border rounded-2 d-flex flex-column",children:[i,a]}),r[31]=i,r[32]=a,r[33]=s):s=r[33],s}:function({onNavigateToDiffComment:e,pullRequestId:t,tabSize:n,threadPreview:i,headingLevel:a}){let{previewInfo:s}=i,{threadId:r,firstComment:l}=s,d=l?.id,c=s.path,u=(0,I.j5)(),{navigateToSelectedComment:m}=(0,I.Lh)(),h=(0,I.SM)(),f=s.subject?.endDiffSide==="RIGHT"?"R":"L",p=s.subject?.originalEndLine?`${f}${s.subject.originalEndLine}`:te.zW,g=h(Number(s.threadId),s.path,p),y=g?.isResolved||!1,x=g?.isOutdated||!1,v=()=>{if(x&&s.originalDiffPathUri){let e=new URL(s.originalDiffPathUri);e.searchParams.set("new_files_changed","true"),window.location.href=e.toString()}else window.location.hash=`#r${l?.databaseId}`,u&&l?.databaseId&&m(l?.databaseId);e()},[b,j]=(0,eZ.M)(tr(r),!1),w=s.threadPreviewComments.length,_=0===w?"No replies":`${w} ${1===w?"reply":"replies"}`,C={...g,id:g?.id??"",commentsData:{comments:[]}};if(!l||!C)return null;let N=ti(s.commentId,g?.commentsData??{comments:[]});return(0,o.jsxs)("div",{className:"border rounded-2 d-flex flex-column",children:[(0,o.jsx)(e6,{firstCommentId:l?.databaseId,isCollapsed:b,threadPreview:i,onNavigateToDiffComment:v,onToggleCollapsed:()=>j(!b),headingLevel:a,isResolved:y,isOutdated:x,lineKey:p}),!b&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"border-bottom borderColor-muted overflow-x-auto",children:(0,o.jsx)(eQ.i,{diffTableClassName:"border-0",diffLines:s?.subject?.diffLines,className:"m-0 border-0",tabSize:n||4})}),(0,o.jsx)("div",{children:(0,o.jsx)(ez.U,{lineMarkersKey:p,hideActions:!0,isInlineComment:!1,comment:l,filePath:c,index:0,isAnchorable:!1,isOutdated:x,isThreadResolved:y,subjectId:t,threadId:r,originalDiffPathUri:s.originalDiffPathUri,headingLevel:"h3"},d)}),(0,o.jsx)("div",{className:"mb-2 px-2",children:(0,o.jsx)(Q.Q,{"aria-label":`View ${_}`,size:"small",trailingVisual:q.ChevronRightIcon,variant:"invisible",onClick:v,children:(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-start flex-items-center gap-2",children:[(0,o.jsx)("span",{children:_}),(0,o.jsx)(e8,{commentAuthors:N})]})})})]})]})});try{tl.displayName||(tl.displayName="ThreadPreview")}catch{}var to=n(4559),td=n(76720);let tc=(0,d.Z6)()?function(e){let t,n,i,a,s=(0,c.c)(11),{heading:r,description:l,icon:d,headingLevel:u}=e,m=void 0===u?"h1":u;return s[0]!==d?(t=(0,o.jsx)(td.E.Visual,{children:(0,o.jsx)(d,{size:"medium"})}),s[0]=d,s[1]=t):t=s[1],s[2]!==r||s[3]!==m?(n=(0,o.jsx)(td.E.Heading,{as:m,children:r}),s[2]=r,s[3]=m,s[4]=n):n=s[4],s[5]!==l?(i=l&&(0,o.jsx)(td.E.Description,{children:l}),s[5]=l,s[6]=i):i=s[6],s[7]!==t||s[8]!==n||s[9]!==i?(a=(0,o.jsxs)(td.E,{children:[t,n,i]}),s[7]=t,s[8]=n,s[9]=i,s[10]=a):a=s[10],a}:function({heading:e,description:t,icon:n,headingLevel:i="h1"}){return(0,o.jsxs)(td.E,{children:[(0,o.jsx)(td.E.Visual,{children:(0,o.jsx)(n,{size:"medium"})}),(0,o.jsx)(td.E.Heading,{as:i,children:e}),t&&(0,o.jsx)(td.E.Description,{children:t})]})};try{tc.displayName||(tc.displayName="ZeroState")}catch{}var tu=n(69510);let tm=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h=(0,c.c)(28),{filteredThreadIds:f,onClose:p,pageLimits:g,pathName:y,pullRequestId:x,isOpen:j,setThreadPreviews:w,tabSize:_}=e;h[0]!==y?(t={pathName:y},h[0]=y,h[1]=t):t=h[1];let{data:C}=(0,tu._l)(t),N=void 0===C?[]:C;(0,v.useEffect)(()=>{w(N)},[N,w]);let S=(0,v.useRef)(null);h[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,b.s)(to.i,300),h[2]=n):n=h[2];let I=n,k=N.length>0;h[3]!==p?(i=()=>{p()},h[3]=p,h[4]=i):i=h[4];let L=i;h[5]!==f||h[6]!==L||h[7]!==x||h[8]!==_?(a=e=>e&&f.has(e.previewInfo.threadId)?(0,o.jsx)(tl,{tabSize:_,threadPreview:e,onNavigateToDiffComment:L,pullRequestId:x,headingLevel:"h2"},e.previewInfo.threadId):null,h[5]=f,h[6]=L,h[7]=x,h[8]=_,h[9]=a):a=h[9];let T=N.map(a).filter(Boolean);return h[10]!==I||h[11]!==j||h[12]!==T.length?(s=()=>{j&&I(T.length>0?`${T.length} ${1===T.length?"comment":"comments"}`:"No comments found",{element:S.current})},h[10]=I,h[11]=j,h[12]=T.length,h[13]=s):s=h[13],h[14]!==I||h[15]!==j||h[16]!==T?(r=[j,I,T],h[14]=I,h[15]=j,h[16]=T,h[17]=r):r=h[17],(0,v.useEffect)(s,r),h[18]!==g.reviewThreadsLimit||h[19]!==g.reviewThreadsLimitExceeded?(l=g.reviewThreadsLimitExceeded&&(0,o.jsx)(eR.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:`Only the first ${g.reviewThreadsLimit} comments are currently being shown.`,className:"mb-3"}),h[18]=g.reviewThreadsLimit,h[19]=g.reviewThreadsLimitExceeded,h[20]=l):l=h[20],h[21]!==k||h[22]!==T?(d=T.length>0?(0,o.jsx)(v.Suspense,{fallback:(0,o.jsx)(R.A,{}),children:(0,o.jsx)("div",{className:"d-flex flex-column position-relative width-full gap-3",children:T})}):(0,o.jsx)("div",{className:"d-flex flex-column position-relative width-full height-full flex-justify-center",children:(0,o.jsx)(tc,{description:"Comments will show up here as soon as there are some.",heading:k?"No comments match the current filter":"No comments on changes yet",icon:q.CommentIcon,headingLevel:"h2"})}),h[21]=k,h[22]=T,h[23]=d):d=h[23],h[24]===Symbol.for("react.memo_cache_sentinel")?(u=(0,o.jsx)("div",{className:"sr-only","aria-live":"polite","aria-atomic":"true",ref:S}),h[24]=u):u=h[24],h[25]!==l||h[26]!==d?(m=(0,o.jsxs)(o.Fragment,{children:[l,d,u]}),h[25]=l,h[26]=d,h[27]=m):m=h[27],m}:function({filteredThreadIds:e,onClose:t,pageLimits:n,pathName:i,pullRequestId:a,isOpen:s,setThreadPreviews:r,tabSize:l}){let{data:d=[]}=(0,tu._l)({pathName:i});(0,v.useEffect)(()=>{r(d)},[d,r]);let c=(0,v.useRef)(null),u=(0,v.useMemo)(()=>(0,b.s)(to.i,300),[]),m=d.length>0,h=(0,v.useCallback)(()=>{t()},[t]),f=d.map(t=>t&&e.has(t.previewInfo.threadId)?(0,o.jsx)(tl,{tabSize:l,threadPreview:t,onNavigateToDiffComment:h,pullRequestId:a,headingLevel:"h2"},t.previewInfo.threadId):null).filter(Boolean);return(0,v.useEffect)(()=>{s&&u(f.length>0?`${f.length} ${1===f.length?"comment":"comments"}`:"No comments found",{element:c.current})},[s,u,f]),(0,o.jsxs)(o.Fragment,{children:[n.reviewThreadsLimitExceeded&&(0,o.jsx)(eR.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:`Only the first ${n.reviewThreadsLimit} comments are currently being shown.`,className:"mb-3"}),f.length>0?(0,o.jsx)(v.Suspense,{fallback:(0,o.jsx)(R.A,{}),children:(0,o.jsx)("div",{className:"d-flex flex-column position-relative width-full gap-3",children:f})}):(0,o.jsx)("div",{className:"d-flex flex-column position-relative width-full height-full flex-justify-center",children:(0,o.jsx)(tc,{description:"Comments will show up here as soon as there are some.",heading:m?"No comments match the current filter":"No comments on changes yet",icon:q.CommentIcon,headingLevel:"h2"})}),(0,o.jsx)("div",{className:"sr-only","aria-live":"polite","aria-atomic":"true",ref:c})]})},th=(0,v.memo)((0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f=(0,c.c)(25);f[0]!==e?({pathName:t,toggleSidesheetRef:i,...n}=e,f[0]=e,f[1]=t,f[2]=n,f[3]=i):(t=f[1],n=f[2],i=f[3]),f[4]===Symbol.for("react.memo_cache_sentinel")?(a=[],f[4]=a):a=f[4];let[p,y]=(0,v.useState)(a),[x,b]=(0,v.useState)(tf);f[5]!==x||f[6]!==p?(s=eH(p,x),f[5]=x,f[6]=p,f[7]=s):s=f[7];let j=s,w=(0,v.useRef)(null);if(f[8]!==p){for(let e of(r=[],p)){let t=e.previewInfo.firstComment;t?.author&&!r.some(e=>e.login===t.author?.login)&&("Copilot"===t.author.login?r.unshift(t.author):r.push(t.author))}f[8]=p,f[9]=r}else r=f[9];let _=r;return n.isOpen?(f[10]===Symbol.for("react.memo_cache_sentinel")?(l={narrow:"fullscreen",regular:"right",wide:"right"},f[10]=l):l=f[10],f[11]!==_||f[12]!==x||f[13]!==n.onClose?(d=e=>{let{dialogLabelId:t}=e;return(0,o.jsxs)(g.l.Header,{className:"p-3",children:[(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-between flex-items-center width-full",children:[(0,o.jsx)(g.l.Title,{id:t,children:"Comments"}),(0,o.jsx)(G.K,{ref:w,"aria-label":"Close comments panel",icon:q.XIcon,variant:"invisible",onClick:n.onClose})]}),(0,o.jsx)(eW,{authorList:_,className:"mt-2 width-full",filterState:x,onFilterStateChange:b})]})},f[11]=_,f[12]=x,f[13]=n.onClose,f[14]=d):d=f[14],f[15]===Symbol.for("react.memo_cache_sentinel")?(u=(0,o.jsx)("div",{className:"d-flex flex-justify-center",children:(0,o.jsx)(R.A,{})}),f[15]=u):u=f[15],f[16]!==j||f[17]!==t||f[18]!==n?(m=(0,o.jsx)(v.Suspense,{fallback:u,children:(0,o.jsx)(tm,{...n,filteredThreadIds:j,pathName:t,setThreadPreviews:y})}),f[16]=j,f[17]=t,f[18]=n,f[19]=m):m=f[19],f[20]!==n.onClose||f[21]!==d||f[22]!==m||f[23]!==i?(h=(0,o.jsx)(g.l,{initialFocusRef:w,position:l,returnFocusRef:i,onClose:n.onClose,renderHeader:d,children:m}),f[20]=n.onClose,f[21]=d,f[22]=m,f[23]=i,f[24]=h):h=f[24],h):null}:function(e){let{pathName:t,toggleSidesheetRef:n,...i}=e,[a,s]=(0,v.useState)([]),[r,l]=(0,v.useState)(()=>({...eK})),d=eH(a,r),c=(0,v.useRef)(null),u=(0,v.useMemo)(()=>{let e=[];for(let t of a){let n=t.previewInfo.firstComment;n?.author&&!e.some(e=>e.login===n.author?.login)&&("Copilot"===n.author.login?e.unshift(n.author):e.push(n.author))}return e},[a]);return i.isOpen?(0,o.jsx)(g.l,{initialFocusRef:c,position:{narrow:"fullscreen",regular:"right",wide:"right"},returnFocusRef:n,onClose:i.onClose,renderHeader:({dialogLabelId:e})=>(0,o.jsxs)(g.l.Header,{className:"p-3",children:[(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-between flex-items-center width-full",children:[(0,o.jsx)(g.l.Title,{id:e,children:"Comments"}),(0,o.jsx)(G.K,{ref:c,"aria-label":"Close comments panel",icon:q.XIcon,variant:"invisible",onClick:i.onClose})]}),(0,o.jsx)(eW,{authorList:u,className:"mt-2 width-full",filterState:r,onFilterStateChange:l})]}),children:(0,o.jsx)(v.Suspense,{fallback:(0,o.jsx)("div",{className:"d-flex flex-justify-center",children:(0,o.jsx)(R.A,{})}),children:(0,o.jsx)(tm,{...i,filteredThreadIds:d,pathName:t,setThreadPreviews:s})})}):null});try{tm.displayName||(tm.displayName="CommentsSidePanelContent")}catch{}try{th.displayName||(th.displayName="CommentsSidePanel")}catch{}function tf(){return{...eK}}let tp=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d=(0,c.c)(19),{isFileTreeExpanded:u,pageLimits:m,pullRequest:h,tabSize:f}=e,[p,g]=(0,v.useState)(!1),y=(0,v.useRef)(null),x=h.id,b=(0,I.Qb)(),{sendPullRequestAnalyticsEvent:j}=(0,V.q)();return d[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)(Q.Q,{"aria-label":"The comments side panel cannot currently be opened.",leadingVisual:q.CommentDiscussionIcon,size:"small",variant:"invisible"}),d[0]=t):t=d[0],d[1]!==j?(n=()=>{j("comments_side_panel.open","COMMENTS_SIDE_PANEL_BUTTON"),eV(),g(!0)},d[1]=j,d[2]=n):n=d[2],d[3]!==u?(i=u&&(0,o.jsx)("span",{className:"d-none d-xl-block",children:"Comments"}),d[3]=u,d[4]=i):i=d[4],d[5]!==b||d[6]!==n||d[7]!==i?(a=(0,o.jsx)(Q.Q,{ref:y,"aria-label":"Open comments side panel",count:b,leadingVisual:q.CommentDiscussionIcon,size:"small",onClick:n,children:i}),d[5]=b,d[6]=n,d[7]=i,d[8]=a):a=d[8],d[9]===Symbol.for("react.memo_cache_sentinel")?(s=()=>g(!1),d[9]=s):s=d[9],d[10]!==p||d[11]!==m||d[12]!==h.pathName||d[13]!==x||d[14]!==f?(r=(0,o.jsx)(th,{isOpen:p,pageLimits:m,pathName:h.pathName,pullRequestId:x,tabSize:f,toggleSidesheetRef:y,onClose:s}),d[10]=p,d[11]=m,d[12]=h.pathName,d[13]=x,d[14]=f,d[15]=r):r=d[15],d[16]!==a||d[17]!==r?(l=(0,o.jsx)("div",{className:"d-flex flex-items-center",children:(0,o.jsxs)(D.t,{fallback:t,children:[a,r]})}),d[16]=a,d[17]=r,d[18]=l):l=d[18],l}:function({isFileTreeExpanded:e,pageLimits:t,pullRequest:n,tabSize:i}){let[a,s]=(0,v.useState)(!1),r=(0,v.useRef)(null),l=n.id,d=(0,I.Qb)(),{sendPullRequestAnalyticsEvent:c}=(0,V.q)();return(0,o.jsx)("div",{className:"d-flex flex-items-center",children:(0,o.jsxs)(D.t,{fallback:(0,o.jsx)(Q.Q,{"aria-label":"The comments side panel cannot currently be opened.",leadingVisual:q.CommentDiscussionIcon,size:"small",variant:"invisible"}),children:[(0,o.jsx)(Q.Q,{ref:r,"aria-label":"Open comments side panel",count:d,leadingVisual:q.CommentDiscussionIcon,size:"small",onClick:()=>{c("comments_side_panel.open","COMMENTS_SIDE_PANEL_BUTTON"),eV(),s(!0)},children:e&&(0,o.jsx)("span",{className:"d-none d-xl-block",children:"Comments"})}),(0,o.jsx)(th,{isOpen:a,pageLimits:t,pathName:n.pathName,pullRequestId:l,tabSize:i,toggleSidesheetRef:r,onClose:()=>s(!1)})]})})};try{tp.displayName||(tp.displayName="OpenCommentsSidePanelButton")}catch{}var tg=n(86909);function ty(e,t){return new Set(e.filter(e=>(function(e,t){if(t){let n=t.toLowerCase();if(!e.annotationLevel.toLowerCase().includes(n)&&!e.message.toLowerCase().includes(n)&&!e.path.toLowerCase().includes(n)&&!e.title?.toLowerCase().includes(n)&&!e.checkRun.name?.toLowerCase().includes(n)&&!e.appAvatarAltText.toLowerCase().includes(n)&&!e.checkSuiteName?.toLowerCase().includes(n))return!1}return!0})(e,t)).map(e=>e.id))}let tx=(0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(8),{className:s,filteredText:r,onFilteredTextChange:l}=e;return a[0]!==l?(t=e=>l(e.target.value),a[0]=l,a[1]=t):t=a[1],a[2]!==r||a[3]!==t?(n=(0,o.jsx)(eU.A,{block:!0,"aria-label":"Filter alerts\u2026",leadingVisual:q.SearchIcon,placeholder:"Filter alerts\u2026",value:r,onChange:t}),a[2]=r,a[3]=t,a[4]=n):n=a[4],a[5]!==s||a[6]!==n?(i=(0,o.jsx)("div",{className:s,children:n}),a[5]=s,a[6]=n,a[7]=i):i=a[7],i}:function({className:e,filteredText:t,onFilteredTextChange:n}){return(0,o.jsx)("div",{className:e,children:(0,o.jsx)(eU.A,{block:!0,"aria-label":"Filter alerts\u2026",leadingVisual:q.SearchIcon,placeholder:"Filter alerts\u2026",value:t,onChange:e=>n(e.target.value)})})};try{tx.displayName||(tx.displayName="AlertsFilter")}catch{}let tv="AlertsSidePanel-module__annotationsHeaderFileName--JzcsF",tb=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u=(0,c.c)(25),{databaseId:m,lineNumber:h,path:f,toggleCollapsed:p,isCollapsed:g,onNavigateToAnnotation:y,annotationLevel:v}=e,b=g?"Expand annotation":"Collapse annotation",j=g?q.ChevronRightIcon:q.ChevronDownIcon;u[0]!==b||u[1]!==j||u[2]!==p?(t=(0,o.jsx)(G.K,{"aria-label":b,icon:j,size:"small",variant:"invisible",className:"mr-1",onClick:p}),u[0]=b,u[1]=j,u[2]=p,u[3]=t):t=u[3];let w=tg.Gt[v];u[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,x.$)("overflow-hidden text-mono text-semibold f6 no-wrap",tv),u[4]=n):n=u[4];let _=`#annotation_${m}`;u[5]!==y||u[6]!==f||u[7]!==_?(i=(0,o.jsxs)(A.A,{className:n,href:_,onClick:y,muted:!0,children:["\u200E",f]}),u[5]=y,u[6]=f,u[7]=_,u[8]=i):i=u[8],u[9]!==f||u[10]!==i?(a=(0,o.jsx)(O.m,{direction:"n",text:f,type:"label",children:i}),u[9]=f,u[10]=i,u[11]=a):a=u[11],u[12]!==h?(s=(0,o.jsxs)("span",{className:"f6 fgColor-muted text-normal ml-2 no-wrap",children:["Line ",h]}),u[12]=h,u[13]=s):s=u[13],u[14]!==t||u[15]!==w||u[16]!==a||u[17]!==s?(r=(0,o.jsxs)("h2",{className:"d-flex flex-items-center flex-1 min-width-0 ml-1 mr-2",children:[t,w,a,s]}),u[14]=t,u[15]=w,u[16]=a,u[17]=s,u[18]=r):r=u[18];let C=`#annotation_${m}`;return u[19]!==y||u[20]!==C?(l=(0,o.jsx)(G.K,{as:"a","aria-label":"Jump to the alert in the diff",tooltipDirection:"se",icon:q.FileSymlinkFileIcon,variant:"invisible",href:C,onClick:y}),u[19]=y,u[20]=C,u[21]=l):l=u[21],u[22]!==r||u[23]!==l?(d=(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center py-1 px-2 bgColor-inset rounded-top-2 border-bottom",children:[r,l]}),u[22]=r,u[23]=l,u[24]=d):d=u[24],d}:function({databaseId:e,lineNumber:t,path:n,toggleCollapsed:i,isCollapsed:a,onNavigateToAnnotation:s,annotationLevel:r}){return(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center py-1 px-2 bgColor-inset rounded-top-2 border-bottom",children:[(0,o.jsxs)("h2",{className:"d-flex flex-items-center flex-1 min-width-0 ml-1 mr-2",children:[(0,o.jsx)(G.K,{"aria-label":a?"Expand annotation":"Collapse annotation",icon:a?q.ChevronRightIcon:q.ChevronDownIcon,size:"small",variant:"invisible",className:"mr-1",onClick:i}),tg.Gt[r],(0,o.jsx)(O.m,{direction:"n",text:n,type:"label",children:(0,o.jsxs)(A.A,{className:(0,x.$)("overflow-hidden text-mono text-semibold f6 no-wrap",tv),href:`#annotation_${e}`,onClick:s,muted:!0,children:["\u200E",n]})}),(0,o.jsxs)("span",{className:"f6 fgColor-muted text-normal ml-2 no-wrap",children:["Line ",t]})]}),(0,o.jsx)(G.K,{as:"a","aria-label":"Jump to the alert in the diff",tooltipDirection:"se",icon:q.FileSymlinkFileIcon,variant:"invisible",href:`#annotation_${e}`,onClick:s})]})},tj=(0,v.memo)((0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h=(0,c.c)(26),{annotations:f,onClose:p,isOpen:y,pageLimits:x,returnFocusRef:j}=e,[w,_]=(0,v.useState)(""),C=ty(f,w),N=(0,v.useRef)(null),S=f.length>0,k=(0,I.j5)(),{navigateToSelectedAnnotation:L}=(0,I.Lh)();h[0]!==k||h[1]!==L||h[2]!==p?(t=e=>{k&&L(e),p()},h[0]=k,h[1]=L,h[2]=p,h[3]=t):t=h[3];let T=t,D=f.map(e=>e&&C.has(e.id)?(0,o.jsx)(tw,{annotation:e,handleNavigateToAnnotation:T},e.id):null).filter(Boolean),R=(0,v.useRef)(null);h[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,b.s)(to.i,300),h[4]=n):n=h[4];let A=n;return(h[5]!==D||h[6]!==y?(i=()=>{y&&A(D.length>0?`${D.length} ${1===D.length?"alert":"alerts"}`:"No alerts found",{element:R.current})},a=[y,A,D],h[5]=D,h[6]=y,h[7]=i,h[8]=a):(i=h[7],a=h[8]),(0,v.useEffect)(i,a),y)?(h[9]===Symbol.for("react.memo_cache_sentinel")?(s={narrow:"fullscreen",regular:"right",wide:"right"},h[9]=s):s=h[9],h[10]!==w||h[11]!==p?(r=e=>{let{dialogLabelId:t}=e;return(0,o.jsxs)(g.l.Header,{className:"p-3",children:[(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center flex-justify-between width-full",children:[(0,o.jsx)(E.A,{as:"h1",className:"f4 text-bold",id:t,children:"Alerts"}),(0,o.jsx)(G.K,{ref:N,"aria-label":"Close alerts panel",icon:q.XIcon,variant:"invisible",onClick:p})]}),(0,o.jsx)(tx,{className:"mt-2 width-full",filteredText:w,onFilteredTextChange:_})]})},h[10]=w,h[11]=p,h[12]=r):r=h[12],h[13]!==x.annotationsLimit||h[14]!==x.annotationsLimitExceeded?(l=x.annotationsLimitExceeded&&(0,o.jsx)(eR.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:`Only the first ${x.annotationsLimit} alerts are currently being shown.`,className:"mb-3"}),h[13]=x.annotationsLimit,h[14]=x.annotationsLimitExceeded,h[15]=l):l=h[15],h[16]!==D||h[17]!==S?(d=D.length>0?(0,o.jsx)("div",{className:"d-flex flex-column position-relative width-full gap-3",children:D}):(0,o.jsx)("div",{className:"d-flex flex-column position-relative width-full height-full flex-justify-center",children:(0,o.jsx)(tc,{heading:S?"No alerts match the current filter":"No alerts on changes yet",icon:q.AlertIcon})}),h[16]=D,h[17]=S,h[18]=d):d=h[18],h[19]===Symbol.for("react.memo_cache_sentinel")?(u=(0,o.jsx)("div",{className:"sr-only","aria-live":"polite","aria-atomic":"true",ref:R}),h[19]=u):u=h[19],h[20]!==p||h[21]!==j||h[22]!==r||h[23]!==l||h[24]!==d?(m=(0,o.jsxs)(g.l,{initialFocusRef:N,onClose:p,position:s,returnFocusRef:j,renderHeader:r,children:[l,d,u]}),h[20]=p,h[21]=j,h[22]=r,h[23]=l,h[24]=d,h[25]=m):m=h[25],m):null}:function({annotations:e,onClose:t,isOpen:n,pageLimits:i,returnFocusRef:a}){let[s,r]=(0,v.useState)(""),l=ty(e,s),d=(0,v.useRef)(null),c=e.length>0,u=(0,I.j5)(),{navigateToSelectedAnnotation:m}=(0,I.Lh)(),h=(0,v.useCallback)(e=>{u&&m(e),t()},[t,u,m]),f=e.map(e=>e&&l.has(e.id)?(0,o.jsx)(tw,{annotation:e,handleNavigateToAnnotation:h},e.id):null).filter(Boolean),p=(0,v.useRef)(null),y=(0,v.useMemo)(()=>(0,b.s)(to.i,300),[]);return((0,v.useEffect)(()=>{n&&y(f.length>0?`${f.length} ${1===f.length?"alert":"alerts"}`:"No alerts found",{element:p.current})},[n,y,f]),n)?(0,o.jsxs)(g.l,{initialFocusRef:d,onClose:t,position:{narrow:"fullscreen",regular:"right",wide:"right"},returnFocusRef:a,renderHeader:({dialogLabelId:e})=>(0,o.jsxs)(g.l.Header,{className:"p-3",children:[(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center flex-justify-between width-full",children:[(0,o.jsx)(E.A,{as:"h1",className:"f4 text-bold",id:e,children:"Alerts"}),(0,o.jsx)(G.K,{ref:d,"aria-label":"Close alerts panel",icon:q.XIcon,variant:"invisible",onClick:t})]}),(0,o.jsx)(tx,{className:"mt-2 width-full",filteredText:s,onFilteredTextChange:r})]}),children:[i.annotationsLimitExceeded&&(0,o.jsx)(eR.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:`Only the first ${i.annotationsLimit} alerts are currently being shown.`,className:"mb-3"}),f.length>0?(0,o.jsx)("div",{className:"d-flex flex-column position-relative width-full gap-3",children:f}):(0,o.jsx)("div",{className:"d-flex flex-column position-relative width-full height-full flex-justify-center",children:(0,o.jsx)(tc,{heading:c?"No alerts match the current filter":"No alerts on changes yet",icon:q.AlertIcon})}),(0,o.jsx)("div",{className:"sr-only","aria-live":"polite","aria-atomic":"true",ref:p})]}):null}),tw=(0,d.Z6)()?function(e){let t,n,i,a,s=(0,c.c)(18),{annotation:r,handleNavigateToAnnotation:l}=e,{isCollapsed:d,handleToggleCollapsed:u}=(0,tg.Vv)(r);return s[0]!==r.databaseId||s[1]!==l?(t=()=>l(r.databaseId),s[0]=r.databaseId,s[1]=l,s[2]=t):t=s[2],s[3]!==r.annotationLevel||s[4]!==r.databaseId||s[5]!==r.endLine||s[6]!==r.path||s[7]!==u||s[8]!==d||s[9]!==t?(n=(0,o.jsx)(tb,{databaseId:r.databaseId,lineNumber:r.endLine,annotationLevel:r.annotationLevel,path:r.path,toggleCollapsed:u,isCollapsed:d,onNavigateToAnnotation:t}),s[3]=r.annotationLevel,s[4]=r.databaseId,s[5]=r.endLine,s[6]=r.path,s[7]=u,s[8]=d,s[9]=t,s[10]=n):n=s[10],s[11]!==r||s[12]!==d?(i=!d&&(0,o.jsx)(tg.YH,{annotation:r,inSidePanel:!0}),s[11]=r,s[12]=d,s[13]=i):i=s[13],s[14]!==r.id||s[15]!==n||s[16]!==i?(a=(0,o.jsxs)("div",{className:"border rounded-2 bgColor-default overflow-hidden",children:[n,i]},r.id),s[14]=r.id,s[15]=n,s[16]=i,s[17]=a):a=s[17],a}:function({annotation:e,handleNavigateToAnnotation:t}){let{isCollapsed:n,handleToggleCollapsed:i}=(0,tg.Vv)(e);return(0,o.jsxs)("div",{className:"border rounded-2 bgColor-default overflow-hidden",children:[(0,o.jsx)(tb,{databaseId:e.databaseId,lineNumber:e.endLine,annotationLevel:e.annotationLevel,path:e.path,toggleCollapsed:i,isCollapsed:n,onNavigateToAnnotation:()=>t(e.databaseId)}),!n&&(0,o.jsx)(tg.YH,{annotation:e,inSidePanel:!0})]},e.id)};try{tb.displayName||(tb.displayName="AnnotationHeader")}catch{}try{tj.displayName||(tj.displayName="AlertsSidePanel")}catch{}try{tw.displayName||(tw.displayName="SidePanelAlert")}catch{}let t_=(0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(11),{isFileTreeExpanded:s,pageLimits:r,className:l}=e,[d,u]=(0,v.useState)(!1),m=(0,v.useRef)(null);a[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>u(!1),a[0]=t):t=a[0];let h=t,f=(0,I.wI)(),{sendPullRequestAnalyticsEvent:p}=(0,V.q)();if(!f)return null;a[1]!==f?(n=Object.values(f),a[1]=f,a[2]=n):n=a[2];let g=n,y=g.length;return a[3]!==g||a[4]!==l||a[5]!==s||a[6]!==r||a[7]!==p||a[8]!==d||a[9]!==y?(i=y>0?(0,o.jsx)("div",{className:"d-flex flex-items-center",children:(0,o.jsxs)(D.t,{fallback:(0,o.jsx)(G.K,{inactive:!0,"aria-label":"The alerts side panel cannot currently be opened.",icon:q.AlertIcon,size:"small",variant:"invisible"}),children:[(0,o.jsx)(Q.Q,{ref:m,className:l,"aria-label":"Open alerts side panel",count:y,leadingVisual:q.AlertIcon,size:"small",onClick:()=>{p("alerts_side_panel.open","ALERTS_SIDE_PANEL_BUTTON"),eV(),u(!0)},children:s&&(0,o.jsx)("span",{className:"d-none d-xl-block",children:"Alerts"})}),(0,o.jsx)(tj,{annotations:g,isOpen:d,pageLimits:r,returnFocusRef:m,onClose:h})]})}):null,a[3]=g,a[4]=l,a[5]=s,a[6]=r,a[7]=p,a[8]=d,a[9]=y,a[10]=i):i=a[10],i}:function({isFileTreeExpanded:e,pageLimits:t,className:n}){let[i,a]=(0,v.useState)(!1),s=(0,v.useRef)(null),r=(0,v.useCallback)(()=>a(!1),[]),l=(0,I.wI)(),{sendPullRequestAnalyticsEvent:d}=(0,V.q)();if(!l)return null;let c=Object.values(l),u=c.length;return u>0?(0,o.jsx)("div",{className:"d-flex flex-items-center",children:(0,o.jsxs)(D.t,{fallback:(0,o.jsx)(G.K,{inactive:!0,"aria-label":"The alerts side panel cannot currently be opened.",icon:q.AlertIcon,size:"small",variant:"invisible"}),children:[(0,o.jsx)(Q.Q,{ref:s,className:n,"aria-label":"Open alerts side panel",count:u,leadingVisual:q.AlertIcon,size:"small",onClick:()=>{d("alerts_side_panel.open","ALERTS_SIDE_PANEL_BUTTON"),eV(),a(!0)},children:e&&(0,o.jsx)("span",{className:"d-none d-xl-block",children:"Alerts"})}),(0,o.jsx)(tj,{annotations:c,isOpen:i,pageLimits:t,returnFocusRef:s,onClose:r})]})}):null};try{t_.displayName||(t_.displayName="OpenAlertsPanelButton")}catch{}var tC=n(70109),tN=n(42255),tS=n(46251),tI=n(31604),tk=n(33578);let tL={approve:"approve",comment:"comment",requestChanges:"request changes"},tT=(0,d.Z6)()?function(e){let t,n,i,a,s=(0,c.c)(10),{onSuccess:r,onError:l}=e,o=(0,ee.e)(X.uT.submitReview);return s[0]!==o?(t=async e=>{let{body:t,event:n,headSha:i}=e;return(0,ed.Sr)(`${o}`,{method:"PUT",headers:{Accept:"application/json"},body:{body:t,event:n,headSha:i}})},s[0]=o,s[1]=t):t=s[1],s[2]!==r?(n=async e=>{let t=await e.json(),n=t.error||"Unknown error occurred";if(!e.ok)throw Error(n);r(t)},s[2]=r,s[3]=n):n=s[3],s[4]!==l?(i=e=>{l(e)},s[4]=l,s[5]=i):i=s[5],s[6]!==t||s[7]!==n||s[8]!==i?(a={mutationFn:t,onSuccess:n,onError:i},s[6]=t,s[7]=n,s[8]=i,s[9]=a):a=s[9],(0,et.n)(a)}:function({onSuccess:e,onError:t}){let n=(0,ee.e)(X.uT.submitReview);return(0,et.n)({mutationFn:async({body:e,event:t,headSha:i})=>(0,ed.Sr)(`${n}`,{method:"PUT",headers:{Accept:"application/json"},body:{body:e,event:t,headSha:i}}),onSuccess:async t=>{let n=await t.json(),i=n.error||"Unknown error occurred";if(!t.ok)throw Error(i);e(n)},onError:e=>{t(e)}})},tD=(0,d.Z6)()?function(e){let t,n,i,a,s=(0,c.c)(10),{onSuccess:r,onError:l}=e,o=(0,ee.e)(X.uT.abandonReview);return s[0]!==o?(t=async()=>(0,ed.Sr)(`${o}`,{method:"DELETE",headers:{Accept:"application/json"}}),s[0]=o,s[1]=t):t=s[1],s[2]!==r?(n=async e=>{let t=await e.json(),n=t.error||"Unknown error occurred";if(!e.ok)throw Error(n);r(t)},s[2]=r,s[3]=n):n=s[3],s[4]!==l?(i=e=>{l(e)},s[4]=l,s[5]=i):i=s[5],s[6]!==t||s[7]!==n||s[8]!==i?(a={mutationFn:t,onSuccess:n,onError:i},s[6]=t,s[7]=n,s[8]=i,s[9]=a):a=s[9],(0,et.n)(a)}:function({onSuccess:e,onError:t}){let n=(0,ee.e)(X.uT.abandonReview);return(0,et.n)({mutationFn:async()=>(0,ed.Sr)(`${n}`,{method:"DELETE",headers:{Accept:"application/json"}}),onSuccess:async t=>{let n=await t.json(),i=n.error||"Unknown error occurred";if(!t.ok)throw Error(i);e(n)},onError:e=>{t(e)}})};var tE=n(46747);let{getItem:tR,removeItem:tA,setItem:tO}=(0,eg.D)("localStorage"),tP=(0,d.Z6)()?function(e){let t,n,i,a,s=(0,c.c)(11),[r,l]=(0,v.useState)(!1),o=`Review:${e}`;s[0]!==o?(t=tR(o),s[0]=o,s[1]=t):t=s[1];let d=t;s[2]!==o?(n=()=>{tA(o)},s[2]=o,s[3]=n):n=s[3];let u=n;s[4]!==r||s[5]!==o?(i=(e,t)=>{if(!r)try{tO(o,{event:e,text:t})}catch{l(!0)}},s[4]=r,s[5]=o,s[6]=i):i=s[6];let m=(0,tE.d)(i,1e3);return s[7]!==m||s[8]!==d||s[9]!==u?(a={persistedReview:d,persistReviewToStorage:m,removePersistedReviewFromStorage:u},s[7]=m,s[8]=d,s[9]=u,s[10]=a):a=s[10],a}:function(e){let[t,n]=(0,v.useState)(!1),i=(0,v.useMemo)(()=>`Review:${e}`,[e]);return{persistedReview:tR(i),persistReviewToStorage:(0,tE.d)((e,a)=>{if(!t)try{tO(i,{event:e,text:a})}catch{n(!0)}},1e3),removePersistedReviewFromStorage:()=>{tA(i)}}},tF="ReviewMenuButton-module__ReviewMenuButton--uK7FN",tM="ReviewMenuButton-module__CommentBoxContainer--Un2Pq",t$="ReviewMenuButton-module__SubmitReviewButton--ZSu4L",tB="ReviewMenuButton-module__ErrorMessage--bglZe",tV="ReviewMenuButton-module__ExpandSection--sAB8o",tU="ReviewMenuButton-module__AnchoredReviewBody--nirqE";function tq(e,t){let n=(0,I.BI)(e),i=(0,I.l0)();return(0,v.useMemo)(()=>{let a=e;if(void 0===n||void 0===i)return[];let s=[];for(let e of Object.keys(t)){let r=t[e];if(!r)continue;let l=0,{path:o,diffLines:d}=r,c=i[o];if(c){let e=function(e,t){if(!e||!e.markersMap)return[];let n=e.markersMap.FILE;if(void 0===n)return[];let i=[];for(let a of n.threads){if(void 0===a.id)continue;let n=t.find(e=>Number(e.id)===a.id);if(!n)continue;let s=n.commentsData?.comments.slice(0,-1),r=[];for(let e of s??[])e.author&&r.push({author:{avatarUrl:e.author.avatarUrl,login:e.author.login}});let l=(n.commentsData?.comments??[]).filter(e=>"pending"===e.state).map(t=>({bodyHTML:t.bodyHTML??"",threadId:n.id,commentId:(t.databaseId??0).toString(),isOutdated:n.isOutdated??!1,isResolved:!1,path:e.path,subjectType:"FILE",commentsData:n.commentsData,threadPreviewComments:r}));i.push(...l)}return i}(c,n);e.length>0&&(s.push(...e),a=a.filter(t=>!e.some(e=>e.threadId===t.toString()))),d.map(e=>{let t=function(e,t,n,i,a,s){let r="DELETION"!==t.type?`R${t.right}`:`L${t.left}`;if(!n||!n.markersMap)return{pendingCommentsReturnArray:[],markersFoundInLine:[]};let l=n.markersMap[r],o=[],d=[];if(l){for(let t of l.threads){let n;if(void 0===t.id)continue;let l=i.find(e=>Number(e.id)===t.id);if(!l)continue;let c=parseInt(r.slice(1))||0,u=-1,m=5;t.start&&(n="L"===t.start[0]?"LEFT":"RIGHT",u=parseInt(t.start.slice(1))||-1),-1!==u&&(m=c-u),m>a&&(m=a+1);let h=s.slice(a+1-m,a+1);for(let e=0;e<h.length;e++)h[e]?.type==="HUNK"&&h.splice(0,e+1);let f=l.commentsData?.comments.slice(0,-1),p=[];for(let e of f??[])e.author&&p.push({author:{avatarUrl:e.author.avatarUrl,login:e.author.login}});o.push(t.id),l.commentsData&&(d=d.concat(l.commentsData.comments.filter(e=>"pending"===e.state).map(t=>({bodyHTML:t.bodyHTML??"",threadId:l.id,commentId:(t.databaseId??0).toString(),isOutdated:l.isOutdated??!1,isResolved:!1,line:c,path:e,subject:{diffLines:h,endLine:c,startDiffSide:n,startLine:-1===u?null:u},subjectType:t.subjectType??"LINE",commentsData:l.commentsData,threadPreviewComments:p}))))}return{pendingCommentsReturnArray:d,markersFoundInLine:o}}return{pendingCommentsReturnArray:[],markersFoundInLine:[]}}(r.path,e,c,n,l,d);l++,void 0!==t&&(s.push(...t.pendingCommentsReturnArray),a=a.filter(e=>!t.markersFoundInLine.includes(e)))})}}return[...s,...function(e,t){let n=[];for(let i of e){let e=t[i];if(!e)continue;let a=e.commentsData?.comments.slice(0,-1),s=[];for(let e of a??[])e.author&&s.push({author:{avatarUrl:e.author.avatarUrl,login:e.author.login}});let r=(e.commentsData?.comments??[]).filter(e=>"pending"===e.state).map(t=>({bodyHTML:t.bodyHTML??"",threadId:e.id,commentId:(t.databaseId??0).toString(),isOutdated:e.isOutdated??!1,isResolved:!1,path:"",subjectType:t.subjectType??"LINE",commentsData:e.commentsData,threadPreviewComments:s}));n.push(...r)}return n}(a,n)]},[e,n,i,t])}var tG=n(29255),tH=n(55461),tK=n(15837),tW=n(33989),tz=n(55255);let tQ="ReviewMenu-module__Radio--i3DSd",tZ="ReviewMenu-module__RadioGroup--uQwUG",tJ="ReviewMenu-module__RadioText--dXY49",tY=(0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(13),{isPROpen:s,reviewEvent:r,viewerAllowedNonCommentReviewTypes:l,viewerCanWriteToRepo:d,viewerHasViolatedPushPolicy:u,viewerIsAuthor:m,viewerIsCopilotAttributed:h,handleReviewEventChange:p,handleReviewSubmit:g}=e;return s?(a[0]!==g?(t={"pull-request-files-changed:submit-review":g},a[0]=g,a[1]=t):t=a[1],a[2]!==p||a[3]!==r||a[4]!==l||a[5]!==d||a[6]!==u||a[7]!==m||a[8]!==h?(n=(0,o.jsx)(tX,{reviewEvent:r,viewerAllowedNonCommentReviewTypes:l,viewerCanWriteToRepo:d,viewerHasViolatedPushPolicy:u,viewerIsAuthor:m,viewerIsCopilotAttributed:h,onReviewEventChange:p}),a[2]=p,a[3]=r,a[4]=l,a[5]=d,a[6]=u,a[7]=m,a[8]=h,a[9]=n):n=a[9],a[10]!==t||a[11]!==n?(i=(0,o.jsx)(f.tL,{commands:t,children:n}),a[10]=t,a[11]=n,a[12]=i):i=a[12],i):null}:function({isPROpen:e,reviewEvent:t,viewerAllowedNonCommentReviewTypes:n,viewerCanWriteToRepo:i,viewerHasViolatedPushPolicy:a,viewerIsAuthor:s,viewerIsCopilotAttributed:r,handleReviewEventChange:l,handleReviewSubmit:d}){return e?(0,o.jsx)(f.tL,{commands:{"pull-request-files-changed:submit-review":d},children:(0,o.jsx)(tX,{reviewEvent:t,viewerAllowedNonCommentReviewTypes:n,viewerCanWriteToRepo:i,viewerHasViolatedPushPolicy:a,viewerIsAuthor:s,viewerIsCopilotAttributed:r,onReviewEventChange:l})}):null},tX=(0,v.memo)((0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f,p,g=(0,c.c)(34),{onReviewEventChange:y,reviewEvent:x,viewerAllowedNonCommentReviewTypes:v,viewerCanWriteToRepo:b,viewerHasViolatedPushPolicy:j,viewerIsAuthor:w,viewerIsCopilotAttributed:_}=e;g[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)(tK.A.Label,{visuallyHidden:!0,children:"Review Event"}),g[0]=t):t=g[0];let C=x===tL.comment;g[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,tH.ZH)(tL.comment),g[1]=n):n=g[1],g[2]!==C?(i=(0,o.jsx)(t0,{checked:C,label:n,subLabel:"Submit general feedback without explicit approval.",value:tL.comment}),g[2]=C,g[3]=i):i=g[3];let N=x===tL.approve;g[4]!==v?(a=v.includes("APPROVE"),g[4]=v,g[5]=a):a=g[5];let S=!a;g[6]===Symbol.for("react.memo_cache_sentinel")?(s=(0,tH.ZH)(tL.approve),g[6]=s):s=g[6],g[7]!==_?(r=t3(_),g[7]=_,g[8]=r):r=g[8];let I=!!j;g[9]!==I||g[10]!==v||g[11]!==w?(l=t1(w,I,v),g[9]=I,g[10]=v,g[11]=w,g[12]=l):l=g[12],g[13]!==l||g[14]!==N||g[15]!==S||g[16]!==r?(d=(0,o.jsx)(t0,{checked:N,disabled:S,label:s,subLabel:r,value:tL.approve,disabledTooltip:l}),g[13]=l,g[14]=N,g[15]=S,g[16]=r,g[17]=d):d=g[17];let k=x===tL.requestChanges;g[18]!==v?(u=v.includes("REQUEST_CHANGES"),g[18]=v,g[19]=u):u=g[19];let L=!u;g[20]!==v||g[21]!==w?(m=t2(w,v),g[20]=v,g[21]=w,g[22]=m):m=g[22],g[23]===Symbol.for("react.memo_cache_sentinel")?(h=(0,tH.ZH)(tL.requestChanges),g[23]=h):h=g[23];let T=b?"Submit feedback that must be addressed before merging.":"Submit feedback suggesting changes.";return g[24]!==k||g[25]!==L||g[26]!==m||g[27]!==T?(f=(0,o.jsx)(t0,{checked:k,disabled:L,disabledTooltip:m,label:h,value:tL.requestChanges,subLabel:T}),g[24]=k,g[25]=L,g[26]=m,g[27]=T,g[28]=f):f=g[28],g[29]!==y||g[30]!==d||g[31]!==f||g[32]!==i?(p=(0,o.jsxs)(tK.A,{name:"reviewEvent",onChange:y,className:tZ,children:[t,i,d,f]}),g[29]=y,g[30]=d,g[31]=f,g[32]=i,g[33]=p):p=g[33],p}:function({onReviewEventChange:e,reviewEvent:t,viewerAllowedNonCommentReviewTypes:n,viewerCanWriteToRepo:i,viewerHasViolatedPushPolicy:a,viewerIsAuthor:s,viewerIsCopilotAttributed:r}){return(0,o.jsxs)(tK.A,{name:"reviewEvent",onChange:e,className:tZ,children:[(0,o.jsx)(tK.A.Label,{visuallyHidden:!0,children:"Review Event"}),(0,o.jsx)(t0,{checked:t===tL.comment,label:(0,tH.ZH)(tL.comment),subLabel:"Submit general feedback without explicit approval.",value:tL.comment}),(0,o.jsx)(t0,{checked:t===tL.approve,disabled:!n.includes("APPROVE"),label:(0,tH.ZH)(tL.approve),subLabel:t3(r),value:tL.approve,disabledTooltip:t1(s,!!a,n)}),(0,o.jsx)(t0,{checked:t===tL.requestChanges,disabled:!n.includes("REQUEST_CHANGES"),disabledTooltip:t2(s,n),label:(0,tH.ZH)(tL.requestChanges),value:tL.requestChanges,subLabel:i?"Submit feedback that must be addressed before merging.":"Submit feedback suggesting changes."})]})}),t0=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l=(0,c.c)(18),{checked:d,disabled:u,disabledTooltip:m,label:h,subLabel:f,value:p}=e;l[0]!==d||l[1]!==p?(t=(0,o.jsx)(tW.A,{checked:d,value:p,className:tQ}),l[0]=d,l[1]=p,l[2]=t):t=l[2],l[3]!==h?(n=(0,o.jsx)("span",{className:"text-bold",children:h}),l[3]=h,l[4]=n):n=l[4],l[5]!==f?(i=(0,o.jsx)("span",{className:tJ,children:f}),l[5]=f,l[6]=i):i=l[6],l[7]!==n||l[8]!==i?(a=(0,o.jsxs)(K.A.Label,{className:"d-flex flex-column",children:[n,i]}),l[7]=n,l[8]=i,l[9]=a):a=l[9],l[10]!==u||l[11]!==t||l[12]!==a?(s=(0,o.jsxs)(K.A,{disabled:u,children:[t,a]}),l[10]=u,l[11]=t,l[12]=a,l[13]=s):s=l[13];let g=s;return l[14]!==u||l[15]!==m||l[16]!==g?(r=u&&m?(0,o.jsx)(tz.A,{text:m,children:g}):g,l[14]=u,l[15]=m,l[16]=g,l[17]=r):r=l[17],r}:function({checked:e,disabled:t,disabledTooltip:n,label:i,subLabel:a,value:s}){let r=(0,o.jsxs)(K.A,{disabled:t,children:[(0,o.jsx)(tW.A,{checked:e,value:s,className:tQ}),(0,o.jsxs)(K.A.Label,{className:"d-flex flex-column",children:[(0,o.jsx)("span",{className:"text-bold",children:i}),(0,o.jsx)("span",{className:tJ,children:a})]})]});return t&&n?(0,o.jsx)(tz.A,{text:n,children:r}):r};function t1(e,t,n){return e?"Pull request authors can't approve their own pull requests.":t?"Users that pushed changes to this pull request after it was opened can't approve":n.includes("APPROVE")?"":"Only users with explicit access to this repository may approve pull requests"}function t2(e,t){return e?"Pull request authors can't request changes on their own pull requests.":t.includes("REQUEST_CHANGES")?"":"Only users with explicit access to this repository may request changes on pull requests"}function t3(e){return e?"Only users who did not collaborate with Copilot will satisfy review requirements.":"Submit feedback and approve merging these changes."}try{tY.displayName||(tY.displayName="ReviewTypeSelector")}catch{}try{tX.displayName||(tX.displayName="ReviewRadioButtons")}catch{}try{t0.displayName||(t0.displayName="RadioButton")}catch{}var t4=n(4908),t5=n(23398);let t6=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h=(0,c.c)(23),{totalPendingComments:f,commentsList:p,handleNavigateToDiffComment:g}=e;h[0]===Symbol.for("react.memo_cache_sentinel")?(t={defaultOpen:!0,closeOnOutsideClick:!1},h[0]=t):t=h[0];let{getDetailsProps:y,open:x}=(0,t4.A)(t);return f?(h[1]!==y?(n=y(),h[1]=y,h[2]=n):n=h[2],h[3]!==x?(i=x&&(0,o.jsx)(q.ChevronDownIcon,{className:"fgColor-muted"}),h[3]=x,h[4]=i):i=h[4],h[5]!==x?(a=!x&&(0,o.jsx)(q.ChevronRightIcon,{className:"fgColor-muted"}),h[5]=x,h[6]=a):a=h[6],h[7]!==f?(s=(0,o.jsxs)(E.A,{as:"h2",className:"f5",children:["Pending comments ",(0,o.jsx)(_.A,{children:f})]}),h[7]=f,h[8]=s):s=h[8],h[9]!==i||h[10]!==a||h[11]!==s?(r=(0,o.jsx)(t5.A.Summary,{children:(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center gap-2 mt-4 mb-2",children:[i,a,s]})}),h[9]=i,h[10]=a,h[11]=s,h[12]=r):r=h[12],h[13]===Symbol.for("react.memo_cache_sentinel")?(l=(0,o.jsx)(R.A,{}),h[13]=l):l=h[13],h[14]!==p||h[15]!==g?(d=p?.map(e=>(0,o.jsx)(tn,{commentPreview:e,onNavigateToDiffComment:g},e.threadId)),h[14]=p,h[15]=g,h[16]=d):d=h[16],h[17]!==d?(u=(0,o.jsx)(v.Suspense,{fallback:l,children:(0,o.jsx)("div",{className:"d-flex flex-column gap-3",children:d})}),h[17]=d,h[18]=u):u=h[18],h[19]!==n||h[20]!==r||h[21]!==u?(m=(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(t5.A,{...n,children:[r,u]})}),h[19]=n,h[20]=r,h[21]=u,h[22]=m):m=h[22],m):null}:function({totalPendingComments:e,commentsList:t,handleNavigateToDiffComment:n}){let{getDetailsProps:i,open:a}=(0,t4.A)({defaultOpen:!0,closeOnOutsideClick:!1});return e?(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(t5.A,{...i(),children:[(0,o.jsx)(t5.A.Summary,{children:(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center gap-2 mt-4 mb-2",children:[a&&(0,o.jsx)(q.ChevronDownIcon,{className:"fgColor-muted"}),!a&&(0,o.jsx)(q.ChevronRightIcon,{className:"fgColor-muted"}),(0,o.jsxs)(E.A,{as:"h2",className:"f5",children:["Pending comments ",(0,o.jsx)(_.A,{children:e})]})]})}),(0,o.jsx)(v.Suspense,{fallback:(0,o.jsx)(R.A,{}),children:(0,o.jsx)("div",{className:"d-flex flex-column gap-3",children:t?.map(e=>(0,o.jsx)(tn,{commentPreview:e,onNavigateToDiffComment:n},e.threadId))})})]})}):null};try{t6.displayName||(t6.displayName="ReviewCommentsSection")}catch{}var t7=n(56149);let t8=(0,d.Z6)()?e=>{let t,n,i,a=(0,c.c)(4),{portalName:s}=e,r=(0,v.useRef)(null);return a[0]!==s?(t=()=>{r.current&&(0,t7.cw)(r.current,s)},n=[s],a[0]=s,a[1]=t,a[2]=n):(t=a[1],n=a[2]),(0,v.useEffect)(t,n),a[3]===Symbol.for("react.memo_cache_sentinel")?(i=(0,o.jsx)("div",{ref:r,className:"position-absolute"}),a[3]=i):i=a[3],i}:({portalName:e})=>{let t=(0,v.useRef)(null);return(0,v.useEffect)(()=>{t.current&&(0,t7.cw)(t.current,e)},[e]),(0,o.jsx)("div",{ref:t,className:"position-absolute"})};try{t8.displayName||(t8.displayName="OverlayPortalContainer")}catch{}let t9="review-menu-portal-root";function ne({viewerIsAuthor:e,viewerAllowedNonCommentReviewTypes:t,isPROpen:n}){let i=t.includes("APPROVE"),a=t.includes("REQUEST_CHANGES");switch(!0){case!n:return{isHidden:!1,text:"comments"};case e:case i:case a:return{isHidden:!1,text:"review"};default:return{isHidden:!1,text:"comments"}}}let nt=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f,p,y,x,b,j,w,_,C,N,S,k,L,T,D,R,A,O,P,F,M,$,B,U=(0,c.c)(125),{currentUserLogin:H,pullRequest:K,repository:W,redirectOnMutation:z}=e,Z=void 0===z||z,{author:J,pathName:Y,state:X,viewerAllowedNonCommentReviewTypes:ee,viewerHasViolatedPushPolicy:et,viewerIsCopilotAttributed:en,comparison:ei}=K,ea=(0,I.ys)(),es=(0,I.HZ)(),{persistedReview:er,persistReviewToStorage:el,removePersistedReviewFromStorage:eo}=tP(Y);U[0]!==ea?.pendingReviewIDs?(t=ea?.pendingReviewIDs??[],U[0]=ea?.pendingReviewIDs,U[1]=t):t=U[1];let ed=tq(t,es),ec=ed?.length??0,eu=J?.login===H,em=X!==tk.Q.Closed&&X!==tk.Q.Merged,eh="WRITE"===W.viewerPermission||"ADMIN"===W.viewerPermission,ef=ei.headOid,[ep,eg]=(0,tN.A)("none"),[ey,ex]=(0,tN.A)("idle"),[ev,eb]=(0,tN.A)(),[ej,ew]=(0,tN.A)(er?.event??tL.comment);U[2]!==ea?.pendingReviewIDs?(n=ea?.pendingReviewIDs??[],U[2]=ea?.pendingReviewIDs,U[3]=n):n=U[3];let e_=n.length>0,eC=(0,v.useRef)(null),eN=er?.text??"",eS=(0,v.useRef)(eN),[eI,ek]=(0,tN.A)(!!er?.text),eL="submitting"===ey||!eI&&ej===tL.comment&&!ec,{sendPullRequestAnalyticsEvent:eT}=(0,V.q)();U[4]!==el||U[5]!==ej||U[6]!==ek?(i=e=>{eS.current=e,ek(!!e.trim()),el(ej,e)},U[4]=el,U[5]=ej,U[6]=ek,U[7]=i):i=U[7];let eD=i;U[8]!==el||U[9]!==ew?(a=e=>{Object.values(tL).includes(e)&&(ew(e),el(e,eS.current))},U[8]=el,U[9]=ew,U[10]=a):a=U[10];let eE=a;U[11]!==Z||U[12]!==eo?(s=e=>{let{redirectUrl:t}=e;eo(),Z&&(window.location.href=t)},U[11]=Z,U[12]=eo,U[13]=s):s=U[13],U[14]!==eb||U[15]!==ex?(r=e=>{ex("idle"),eb(e.message)},U[14]=eb,U[15]=ex,U[16]=r):r=U[16],U[17]!==s||U[18]!==r?(l={onSuccess:s,onError:r},U[17]=s,U[18]=r,U[19]=l):l=U[19];let{mutate:eR}=tT(l);U[20]!==Z||U[21]!==eo?(d=e=>{let{redirectUrl:t}=e;eo(),Z&&(window.location.href=t)},U[20]=Z,U[21]=eo,U[22]=d):d=U[22],U[23]!==eb||U[24]!==ex?(u=e=>{ex("idle"),eb(e.message)},U[23]=eb,U[24]=ex,U[25]=u):u=U[25],U[26]!==u||U[27]!==d?(m={onSuccess:d,onError:u},U[26]=u,U[27]=d,U[28]=m):m=U[28];let{mutate:eA}=tD(m);U[29]!==ev||U[30]!==ef||U[31]!==ej||U[32]!==eT||U[33]!==eb||U[34]!==ex||U[35]!==eL||U[36]!==eR?(h=()=>{eL||(ev&&eb(void 0),ex("submitting"),eT("submit_review_dialog.submit","SUBMIT_REVIEW_BUTTON"),eR({body:eS.current,event:ej,headSha:ef}))},U[29]=ev,U[30]=ef,U[31]=ej,U[32]=eT,U[33]=eb,U[34]=ex,U[35]=eL,U[36]=eR,U[37]=h):h=U[37];let eO=h;U[38]!==eA||U[39]!==ev||U[40]!==ea?.pendingReviewIDs||U[41]!==eT||U[42]!==eb||U[43]!==ex?(f=()=>{0===(ea?.pendingReviewIDs??[]).length||confirm("Are you sure you want to cancel? You will lose all your pending comments.")&&(ev&&eb(void 0),ex("canceling"),eT("submit_review_dialog.cancel","CANCEL_REVIEW_BUTTON"),eA())},U[38]=eA,U[39]=ev,U[40]=ea?.pendingReviewIDs,U[41]=eT,U[42]=eb,U[43]=ex,U[44]=f):f=U[44],ea?.pendingReviewIDs;let eP=f;U[45]!==em||U[46]!==ee||U[47]!==eu?(p=ne({isPROpen:em,viewerAllowedNonCommentReviewTypes:ee,viewerIsAuthor:eu}),U[45]=em,U[46]=ee,U[47]=eu,U[48]=p):p=U[48];let eF=p;U[49]!==eT||U[50]!==eg?(y=()=>{window.innerWidth<768?eg("dialog"):eg("anchored"),eT("submit_review_dialog.open","REVIEW_CHANGES_BUTTON")},U[49]=eT,U[50]=eg,U[51]=y):y=U[51];let eM=y;U[52]!==eg?(x=()=>{eg("none")},U[52]=eg,U[53]=x):x=U[53];let e$=x;U[54]!==eg?(b=()=>{eg("none")},U[54]=eg,U[55]=b):b=U[55];let eB=b;U[56]!==e$||U[57]!==eM||U[58]!==ep?(j=()=>{"none"===ep?eM():e$()},U[56]=e$,U[57]=eM,U[58]=ep,U[59]=j):j=U[59];let eV=j;U[60]!==ed||U[61]!==eB||U[62]!==eE||U[63]!==eO||U[64]!==eN||U[65]!==em||U[66]!==eD||U[67]!==ej||U[68]!==ec||U[69]!==ee||U[70]!==eh||U[71]!==et||U[72]!==eu||U[73]!==en?(w=(0,o.jsx)(na,{initialReviewBody:eN,isPROpen:em,onReviewBodyChange:eD,reviewEvent:ej,viewerAllowedNonCommentReviewTypes:ee,viewerCanWriteToRepo:eh,viewerHasViolatedPushPolicy:et,viewerIsAuthor:eu,viewerIsCopilotAttributed:en,commentsList:ed,totalPendingComments:ec,handleNavigateToDiffComment:eB,handleReviewSubmit:eO,handleReviewEventChange:eE}),U[60]=ed,U[61]=eB,U[62]=eE,U[63]=eO,U[64]=eN,U[65]=em,U[66]=eD,U[67]=ej,U[68]=ec,U[69]=ee,U[70]=eh,U[71]=et,U[72]=eu,U[73]=en,U[74]=w):w=U[74];let eU=w;if(eF.isHidden)return null;U[75]!==ev||U[76]!==e$||U[77]!==eP||U[78]!==eO||U[79]!==e_||U[80]!==eF||U[81]!==ey||U[82]!==eL?(_=()=>(0,o.jsx)(ni,{errorMessage:ev,hasPendingReviews:e_,reviewSubmissionState:ey,handleReviewCancel:eP,handleCloseReviewDialog:e$,handleReviewSubmit:eO,submitDisabled:eL,reviewMenuButtonDisplayState:eF}),U[75]=ev,U[76]=e$,U[77]=eP,U[78]=eO,U[79]=e_,U[80]=eF,U[81]=ey,U[82]=eL,U[83]=_):_=U[83];let eq=_,eG=ec||void 0;U[84]!==eV||U[85]!==eF.text||U[86]!==eG?(C=(0,o.jsxs)(Q.Q,{count:eG,className:tF,trailingAction:q.TriangleDownIcon,variant:"primary",onClick:eV,size:"small",ref:eC,children:["Submit ",eF.text]}),U[84]=eV,U[85]=eF.text,U[86]=eG,U[87]=C):C=U[87],U[88]===Symbol.for("react.memo_cache_sentinel")?(N=(0,o.jsx)(t8,{portalName:t9}),U[88]=N):N=U[88];let eH="anchored"===ep;return U[89]===Symbol.for("react.memo_cache_sentinel")?(S={regular:"anchored",narrow:"fullscreen"},U[89]=S):S=U[89],U[90]===Symbol.for("react.memo_cache_sentinel")?(k={disabled:!0},L={role:"dialog","aria-labelledby":"anchored-review-title","aria-modal":"true",portalContainerName:t9},U[90]=k,U[91]=L):(k=U[90],L=U[91]),U[92]!==eF.text?(T=(0,o.jsxs)(E.A,{as:"h1",className:"flex-1 f5",variant:"small",id:"anchored-review-title",children:["Finish your ",eF.text]}),U[92]=eF.text,U[93]=T):T=U[93],U[94]!==e_||U[95]!==eg?(D=e_&&(0,o.jsx)(G.K,{icon:q.MaximizeIcon,className:tV,variant:"invisible","aria-label":"Expand this section",onClick:()=>eg("dialog")}),U[94]=e_,U[95]=eg,U[96]=D):D=U[96],U[97]!==e$?(R=(0,o.jsx)(G.K,{icon:q.XIcon,variant:"invisible","aria-label":"Close",onClick:e$}),U[97]=e$,U[98]=R):R=U[98],U[99]!==D||U[100]!==R?(A=(0,o.jsxs)(tS.B,{direction:"horizontal",align:"center",gap:"none",children:[D,R]}),U[99]=D,U[100]=R,U[101]=A):A=U[101],U[102]!==T||U[103]!==A?(O=(0,o.jsxs)(tS.B,{direction:"horizontal",align:"center",justify:"space-between",className:"py-2 border-bottom px-3",children:[T,A]}),U[102]=T,U[103]=A,U[104]=O):O=U[104],U[105]!==eU?(P=(0,o.jsx)("div",{className:tU,children:eU}),U[105]=eU,U[106]=P):P=U[106],U[107]!==eq?(F=(0,o.jsx)("div",{className:"p-3 border-top",children:(0,o.jsx)(eq,{})}),U[107]=eq,U[108]=F):F=U[108],U[109]!==e$||U[110]!==eH||U[111]!==O||U[112]!==P||U[113]!==F?(M=(0,o.jsxs)(tI.T,{open:eH,anchorRef:eC,width:"xlarge",onClose:e$,displayCloseButton:!1,variant:S,renderAnchor:null,focusZoneSettings:k,overlayProps:L,children:[O,P,F]}),U[109]=e$,U[110]=eH,U[111]=O,U[112]=P,U[113]=F,U[114]=M):M=U[114],U[115]!==eU||U[116]!==eq||U[117]!==e$||U[118]!==ep||U[119]!==eF.text?($="dialog"===ep&&(0,o.jsx)(g.l,{onClose:e$,returnFocusRef:eC,"aria-label":"Review changes",position:{narrow:"fullscreen",regular:"right",wide:"right"},title:`Finish your ${eF.text}`,renderFooter:()=>(0,o.jsx)(g.l.Footer,{children:(0,o.jsx)(eq,{})}),children:eU}),U[115]=eU,U[116]=eq,U[117]=e$,U[118]=ep,U[119]=eF.text,U[120]=$):$=U[120],U[121]!==C||U[122]!==M||U[123]!==$?(B=(0,o.jsxs)(o.Fragment,{children:[C,N,M,$]}),U[121]=C,U[122]=M,U[123]=$,U[124]=B):B=U[124],B}:function({currentUserLogin:e,pullRequest:t,repository:n,redirectOnMutation:i=!0}){let{author:a,pathName:s,state:r,viewerAllowedNonCommentReviewTypes:l,viewerHasViolatedPushPolicy:d,viewerIsCopilotAttributed:c,comparison:u}=t,m=(0,I.ys)(),h=(0,I.HZ)(),{persistedReview:f,persistReviewToStorage:p,removePersistedReviewFromStorage:y}=tP(s),x=tq(m?.pendingReviewIDs??[],h),b=x?.length??0,j=a?.login===e,w=r!==tk.Q.Closed&&r!==tk.Q.Merged,_="WRITE"===n.viewerPermission||"ADMIN"===n.viewerPermission,C=u.headOid,[N,S]=(0,tN.A)("none"),[k,L]=(0,tN.A)("idle"),[T,D]=(0,tN.A)(),[R,A]=(0,tN.A)(f?.event??tL.comment),O=(m?.pendingReviewIDs??[]).length>0,P=(0,v.useRef)(null),F=f?.text??"",M=(0,v.useRef)(F),[$,B]=(0,tN.A)(!!f?.text),U="submitting"===k||!$&&R===tL.comment&&!b,{sendPullRequestAnalyticsEvent:H}=(0,V.q)(),K=(0,v.useCallback)(e=>{M.current=e,B(!!e.trim()),p(R,e)},[p,R,B]),W=(0,v.useCallback)(e=>{Object.values(tL).includes(e)&&(A(e),p(e,M.current))},[p,A]),{mutate:z}=tT({onSuccess:({redirectUrl:e})=>{y(),i&&(window.location.href=e)},onError:e=>{L("idle"),D(e.message)}}),{mutate:Z}=tD({onSuccess:({redirectUrl:e})=>{y(),i&&(window.location.href=e)},onError:e=>{L("idle"),D(e.message)}}),J=(0,v.useCallback)(()=>{U||(T&&D(void 0),L("submitting"),H("submit_review_dialog.submit","SUBMIT_REVIEW_BUTTON"),z({body:M.current,event:R,headSha:C}))},[T,C,R,H,D,L,U,z]),Y=(0,v.useCallback)(()=>{0===(m?.pendingReviewIDs??[]).length||confirm("Are you sure you want to cancel? You will lose all your pending comments.")&&(T&&D(void 0),L("canceling"),H("submit_review_dialog.cancel","CANCEL_REVIEW_BUTTON"),Z())},[Z,T,m?.pendingReviewIDs,H,D,L]),X=(0,v.useMemo)(()=>ne({isPROpen:w,viewerAllowedNonCommentReviewTypes:l,viewerIsAuthor:j}),[l,j,w]),ee=(0,v.useCallback)(()=>{window.innerWidth<768?S("dialog"):S("anchored"),H("submit_review_dialog.open","REVIEW_CHANGES_BUTTON")},[H,S]),et=(0,v.useCallback)(()=>{S("none")},[S]),en=(0,v.useCallback)(()=>{S("none")},[S]),ei=(0,v.useCallback)(()=>{"none"===N?ee():et()},[et,ee,N]),ea=(0,v.useMemo)(()=>(0,o.jsx)(na,{initialReviewBody:F,isPROpen:w,onReviewBodyChange:K,reviewEvent:R,viewerAllowedNonCommentReviewTypes:l,viewerCanWriteToRepo:_,viewerHasViolatedPushPolicy:d,viewerIsAuthor:j,viewerIsCopilotAttributed:c,commentsList:x,totalPendingComments:b,handleNavigateToDiffComment:en,handleReviewSubmit:J,handleReviewEventChange:W}),[x,en,W,J,F,w,K,R,b,l,_,d,j,c]);if(X.isHidden)return null;let es=()=>(0,o.jsx)(ni,{errorMessage:T,hasPendingReviews:O,reviewSubmissionState:k,handleReviewCancel:Y,handleCloseReviewDialog:et,handleReviewSubmit:J,submitDisabled:U,reviewMenuButtonDisplayState:X});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(Q.Q,{count:b||void 0,className:tF,trailingAction:q.TriangleDownIcon,variant:"primary",onClick:ei,size:"small",ref:P,children:["Submit ",X.text]}),(0,o.jsx)(t8,{portalName:t9}),(0,o.jsxs)(tI.T,{open:"anchored"===N,anchorRef:P,width:"xlarge",onClose:et,displayCloseButton:!1,variant:{regular:"anchored",narrow:"fullscreen"},renderAnchor:null,focusZoneSettings:{disabled:!0},overlayProps:{role:"dialog","aria-labelledby":"anchored-review-title","aria-modal":"true",portalContainerName:t9},children:[(0,o.jsxs)(tS.B,{direction:"horizontal",align:"center",justify:"space-between",className:"py-2 border-bottom px-3",children:[(0,o.jsxs)(E.A,{as:"h1",className:"flex-1 f5",variant:"small",id:"anchored-review-title",children:["Finish your ",X.text]}),(0,o.jsxs)(tS.B,{direction:"horizontal",align:"center",gap:"none",children:[O&&(0,o.jsx)(G.K,{icon:q.MaximizeIcon,className:tV,variant:"invisible","aria-label":"Expand this section",onClick:()=>S("dialog")}),(0,o.jsx)(G.K,{icon:q.XIcon,variant:"invisible","aria-label":"Close",onClick:et})]})]}),(0,o.jsx)("div",{className:tU,children:ea}),(0,o.jsx)("div",{className:"p-3 border-top",children:(0,o.jsx)(es,{})})]}),"dialog"===N&&(0,o.jsx)(g.l,{onClose:et,returnFocusRef:P,"aria-label":"Review changes",position:{narrow:"fullscreen",regular:"right",wide:"right"},title:`Finish your ${X.text}`,renderFooter:()=>(0,o.jsx)(g.l.Footer,{children:(0,o.jsx)(es,{})}),children:ea})]})},nn=(0,v.forwardRef)((0,d.Z6)()?(e,t)=>{let n,i,a,s,r,l=(0,c.c)(12);l[0]!==e?({initialValue:n,onChange:i,...a}=e,l[0]=e,l[1]=n,l[2]=i,l[3]=a):(n=l[1],i=l[2],a=l[3]);let[d,u]=(0,tN.A)(n);l[4]!==i||l[5]!==u?(s=e=>{u(e),i(e)},l[4]=i,l[5]=u,l[6]=s):s=l[6];let m=s;return l[7]!==m||l[8]!==a||l[9]!==t||l[10]!==d?(r=(0,o.jsx)(tC.S,{...a,value:d,onChange:m,ref:t}),l[7]=m,l[8]=a,l[9]=t,l[10]=d,l[11]=r):r=l[11],r}:({initialValue:e,onChange:t,...n},i)=>{let[a,s]=(0,tN.A)(e),r=(0,v.useCallback)(e=>{s(e),t(e)},[s,t]);return(0,o.jsx)(tC.S,{...n,value:a,onChange:r,ref:i})});nn.displayName="ControlledCommentBox";let ni=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m=(0,c.c)(28),{errorMessage:h,handleReviewCancel:f,handleCloseReviewDialog:p,handleReviewSubmit:g,hasPendingReviews:y,submitDisabled:x,reviewMenuButtonDisplayState:v,reviewSubmissionState:b}=e,j="canceling"===b,w="submitting"===b;m[0]!==h?(t=h&&(0,o.jsxs)(eJ.A,{className:tB,variant:"danger",children:[(0,o.jsx)(q.StopIcon,{className:"mr-2"}),h]}),m[0]=h,m[1]=t):t=m[1],m[2]!==f||m[3]!==y||m[4]!==j||m[5]!==w||m[6]!==v.text?(n=y?(0,o.jsx)(Q.Q,{disabled:j||w,loading:j,onClick:f,tabIndex:0,variant:"danger",children:(0,o.jsxs)(tS.B,{direction:"horizontal",align:"center",children:["Discard ",v.text]})}):(0,o.jsx)("div",{}),m[2]=f,m[3]=y,m[4]=j,m[5]=w,m[6]=v.text,m[7]=n):n=m[7];let _=j||w;m[8]!==p||m[9]!==_?(i=(0,o.jsx)(Q.Q,{onClick:p,disabled:_,children:"Cancel"}),m[8]=p,m[9]=_,m[10]=i):i=m[10];let C=x||w;return m[11]===Symbol.for("react.memo_cache_sentinel")?(a=(0,o.jsx)(tG.U,{keys:"Mod+enter"}),m[11]=a):a=m[11],m[12]!==v.text?(s=(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-center",children:["Submit ",v.text]}),m[12]=v.text,m[13]=s):s=m[13],m[14]!==g||m[15]!==w||m[16]!==C||m[17]!==s?(r=(0,o.jsx)(Q.Q,{disabled:C,variant:"primary",onClick:g,loading:w,className:t$,trailingVisual:a,children:s}),m[14]=g,m[15]=w,m[16]=C,m[17]=s,m[18]=r):r=m[18],m[19]!==i||m[20]!==r?(l=(0,o.jsxs)("div",{className:"d-flex flex-row gap-2",children:[i,r]}),m[19]=i,m[20]=r,m[21]=l):l=m[21],m[22]!==n||m[23]!==l?(d=(0,o.jsxs)("div",{className:"d-flex flex-row flex-1 flex-items-center flex-justify-between gap-2",children:[n,l]}),m[22]=n,m[23]=l,m[24]=d):d=m[24],m[25]!==t||m[26]!==d?(u=(0,o.jsxs)(o.Fragment,{children:[t,d]}),m[25]=t,m[26]=d,m[27]=u):u=m[27],u}:function({errorMessage:e,handleReviewCancel:t,handleCloseReviewDialog:n,handleReviewSubmit:i,hasPendingReviews:a,submitDisabled:s,reviewMenuButtonDisplayState:r,reviewSubmissionState:l}){let d="canceling"===l,c="submitting"===l;return(0,o.jsxs)(o.Fragment,{children:[e&&(0,o.jsxs)(eJ.A,{className:tB,variant:"danger",children:[(0,o.jsx)(q.StopIcon,{className:"mr-2"}),e]}),(0,o.jsxs)("div",{className:"d-flex flex-row flex-1 flex-items-center flex-justify-between gap-2",children:[a?(0,o.jsx)(Q.Q,{disabled:d||c,loading:d,onClick:t,tabIndex:0,variant:"danger",children:(0,o.jsxs)(tS.B,{direction:"horizontal",align:"center",children:["Discard ",r.text]})}):(0,o.jsx)("div",{}),(0,o.jsxs)("div",{className:"d-flex flex-row gap-2",children:[(0,o.jsx)(Q.Q,{onClick:n,disabled:d||c,children:"Cancel"}),(0,o.jsx)(Q.Q,{disabled:s||c,variant:"primary",onClick:i,loading:c,className:t$,trailingVisual:(0,o.jsx)(tG.U,{keys:"Mod+enter"}),children:(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-center",children:["Submit ",r.text]})})]})]})]})},na=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l=(0,c.c)(24),{initialReviewBody:d,isPROpen:u,onReviewBodyChange:m,reviewEvent:h,viewerAllowedNonCommentReviewTypes:f,viewerCanWriteToRepo:p,viewerHasViolatedPushPolicy:g,viewerIsAuthor:y,viewerIsCopilotAttributed:x,commentsList:b,totalPendingComments:j,handleNavigateToDiffComment:w,handleReviewSubmit:_,handleReviewEventChange:C}=e,N=(0,v.useRef)(null);return l[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{let e=window.setTimeout(()=>N.current?.focus());return()=>{window.clearTimeout(e)}},n=[],l[0]=t,l[1]=n):(t=l[0],n=l[1]),(0,v.useEffect)(t,n),l[2]!==_||l[3]!==d||l[4]!==m?(i=(0,o.jsx)(nn,{ref:N,label:"Add review comment",placeholder:"Leave a comment",className:tM,initialValue:d,onChange:m,onPrimaryAction:_}),l[2]=_,l[3]=d,l[4]=m,l[5]=i):i=l[5],l[6]!==C||l[7]!==_||l[8]!==u||l[9]!==h||l[10]!==f||l[11]!==p||l[12]!==g||l[13]!==y||l[14]!==x?(a=(0,o.jsx)(tY,{isPROpen:u,reviewEvent:h,viewerAllowedNonCommentReviewTypes:f,viewerCanWriteToRepo:p,viewerHasViolatedPushPolicy:g,viewerIsAuthor:y,viewerIsCopilotAttributed:x,handleReviewEventChange:C,handleReviewSubmit:_}),l[6]=C,l[7]=_,l[8]=u,l[9]=h,l[10]=f,l[11]=p,l[12]=g,l[13]=y,l[14]=x,l[15]=a):a=l[15],l[16]!==b||l[17]!==w||l[18]!==j?(s=(0,o.jsx)(t6,{totalPendingComments:j,commentsList:b,handleNavigateToDiffComment:w}),l[16]=b,l[17]=w,l[18]=j,l[19]=s):s=l[19],l[20]!==i||l[21]!==a||l[22]!==s?(r=(0,o.jsxs)(o.Fragment,{children:[i,a,s]}),l[20]=i,l[21]=a,l[22]=s,l[23]=r):r=l[23],r}:function({initialReviewBody:e,isPROpen:t,onReviewBodyChange:n,reviewEvent:i,viewerAllowedNonCommentReviewTypes:a,viewerCanWriteToRepo:s,viewerHasViolatedPushPolicy:r,viewerIsAuthor:l,viewerIsCopilotAttributed:d,commentsList:c,totalPendingComments:u,handleNavigateToDiffComment:m,handleReviewSubmit:h,handleReviewEventChange:f}){let p=(0,v.useRef)(null);return(0,v.useEffect)(()=>{let e=window.setTimeout(()=>p.current?.focus());return()=>{window.clearTimeout(e)}},[]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(nn,{ref:p,label:"Add review comment",placeholder:"Leave a comment",className:tM,initialValue:e,onChange:n,onPrimaryAction:h}),(0,o.jsx)(tY,{isPROpen:t,reviewEvent:i,viewerAllowedNonCommentReviewTypes:a,viewerCanWriteToRepo:s,viewerHasViolatedPushPolicy:r,viewerIsAuthor:l,viewerIsCopilotAttributed:d,handleReviewEventChange:f,handleReviewSubmit:h}),(0,o.jsx)(t6,{totalPendingComments:u,commentsList:c,handleNavigateToDiffComment:m})]})};try{nt.displayName||(nt.displayName="ReviewMenuButton")}catch{}try{(i=ReviewMenuBody).displayName||(i.displayName="ReviewMenuBody")}catch{}try{(a=ReviewMenuFooter).displayName||(a.displayName="ReviewMenuFooter")}catch{}try{ni.displayName||(ni.displayName="ReviewMenuFooterComponent")}catch{}try{na.displayName||(na.displayName="ReviewMenuBodyComponent")}catch{}var ns=n(27028),nr=n(39029);let nl="RefreshButton-module__refresh--gOrN1";var no=n(91747),nd=n(43073),nc=n(61526);let nu=(0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(6),{aliveChannel:s,pathName:r}=e,[l,d]=(0,v.useState)(!1),u=(0,nd.E)(),m=(0,no.u)("combined_pr_changes_route")?`${r}/changes`:`${r}/files`,{markComparisonOutdated:h}=(0,I.yo)();a[0]!==h?(t=()=>{h(),d(!0)},a[0]=h,a[1]=t):t=a[1];let f=t;if(a[2]===Symbol.for("react.memo_cache_sentinel")?(n={git_updated:!0},a[2]=n):n=a[2],(0,nr.G)(s,f,n),!l)return null;if(u){let e;return a[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(nh,{}),a[3]=e):e=a[3],e}return a[4]!==m?(i=(0,o.jsx)(nm,{refreshUrl:m}),a[4]=m,a[5]=i):i=a[5],i}:function({aliveChannel:e,pathName:t}){let[n,i]=(0,v.useState)(!1),a=(0,nd.E)(),s=(0,no.u)("combined_pr_changes_route")?`${t}/changes`:`${t}/files`,{markComparisonOutdated:r}=(0,I.yo)();return((0,nr.G)(e,()=>{r(),i(!0)},{git_updated:!0}),n)?a?(0,o.jsx)(nh,{}):(0,o.jsx)(nm,{refreshUrl:s}):null},nm=(0,d.Z6)()?function(e){let t,n,i=(0,c.c)(5),{refreshUrl:a}=e;i[0]!==a?(t=e=>{e.preventDefault(),window.location.href=a},i[0]=a,i[1]=t):t=i[1];let s=t;return i[2]!==s||i[3]!==a?(n=(0,o.jsx)(Q.Q,{as:A.A,variant:"invisible",href:a,className:nl,leadingVisual:q.SyncIcon,size:"small",onClick:s,children:"Refresh"}),i[2]=s,i[3]=a,i[4]=n):n=i[4],n}:function({refreshUrl:e}){return(0,o.jsx)(Q.Q,{as:A.A,variant:"invisible",href:e,className:nl,leadingVisual:q.SyncIcon,size:"small",onClick:t=>{t.preventDefault(),window.location.href=e},children:"Refresh"})},nh=(0,d.Z6)()?function(){let e,t,n=(0,c.c)(4),i=(0,nc.zy)(),[a,s]=(0,v.useState)(!1);n[0]===Symbol.for("react.memo_cache_sentinel")?(e=async()=>{s(!0)},n[0]=e):e=n[0];let r=e;return n[1]!==a||n[2]!==i.pathname?(t=(0,o.jsx)(Q.Q,{as:nc.N_,to:i.pathname,variant:"invisible",className:nl,leadingVisual:q.SyncIcon,size:"small",onClick:r,loading:a,preventScrollReset:!0,children:"Refresh"}),n[1]=a,n[2]=i.pathname,n[3]=t):t=n[3],t}:function(){let e=(0,nc.zy)(),[t,n]=(0,v.useState)(!1),i=async()=>{n(!0)};return(0,o.jsx)(Q.Q,{as:nc.N_,to:e.pathname,variant:"invisible",className:nl,leadingVisual:q.SyncIcon,size:"small",onClick:i,loading:t,preventScrollReset:!0,children:"Refresh"})};try{nu.displayName||(nu.displayName="RefreshButton")}catch{}try{nm.displayName||(nm.displayName="NavigatorRefreshButton")}catch{}try{nh.displayName||(nh.displayName="DataRouterRefreshButton")}catch{}var nf=n(40523),np=n(68874),ng=n(14808);let ny=(0,v.forwardRef)(function(e,t){let n,i,a,s,r,l,d,u,m,h,f,p,g,y,x,b,j,_,C,N,S,I,k,L,T=(0,c.c)(77),{items:D,onMultiSelect:E,onSingleSelect:R,onApply:A,onCancel:O,buttonProps:P,anchorLabel:F,variant:M,title:$,dialogProps:B}=e,V=void 0===M?"overlay":M,U=(0,v.useRef)(null),[q,G]=(0,v.useState)(!1),[H,K]=(0,v.useState)();T[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>({open:()=>G(!0)}),T[0]=n):n=T[0],(0,v.useImperativeHandle)(t,n),T[1]!==D?(i=D.reduce(nv,{single:[],multiple:[]}),T[1]=D,T[2]=i):i=T[2];let W=i;T[3]!==W?(a=()=>W,T[3]=W,T[4]=a):a=T[4];let[z,Z]=(0,v.useState)(a);T[5]!==z?.multiple||T[6]!==z?.single?(s=e=>{Z({single:z?.single.map(t=>t.id===e.id?{...t,selected:!t.selected}:t.selected?{...t,selected:!1}:t)||[],multiple:z?.multiple||[]})},T[5]=z?.multiple,T[6]=z?.single,T[7]=s):s=T[7];let J=s;T[8]!==z?.multiple||T[9]!==z?.single?(r=e=>{let t=z?.multiple.map(t=>t.id===e.id?{...t,selected:!t.selected}:t)||[];Z({single:z?.single||[],multiple:t})},T[8]=z?.multiple,T[9]=z?.single,T[10]=r):r=T[10];let Y=r;T[11]!==z?.multiple||T[12]!==E||T[13]!==W?.multiple?(l=E?W?.multiple.filter(nj).length:z?.multiple.filter(nb).length||0,T[11]=z?.multiple,T[12]=E,T[13]=W?.multiple,T[14]=l):l=T[14];let X=l;T[15]!==H?.multiple?(d=H?.multiple.filter(nw).length||0,T[15]=H?.multiple,T[16]=d):d=T[16];let ee=d,et=X&&0!==ee?`${ee} commit${ee>1?"s":""} selected`:"Select commits";T[17]!==z||T[18]!==A?(u=()=>{K(z),G(!1),A&&A(z?.multiple.filter(n_)||[])},T[17]=z,T[18]=A,T[19]=u):u=T[19];let en=u;T[20]!==O||T[21]!==W?(m=()=>{Z(W),K(W),O?.()},T[20]=O,T[21]=W,T[22]=m):m=T[22];let ei=m;T[23]!==q?(h=()=>G(!q),T[23]=q,T[24]=h):h=T[24];let ea=F||et;T[25]!==P||T[26]!==h||T[27]!==ea?(f=(0,o.jsx)(Q.Q,{ref:U,onClick:h,...P,children:ea}),T[25]=P,T[26]=h,T[27]=ea,T[28]=f):f=T[28],T[29]!==z?.single||T[30]!==H?.multiple||T[31]!==W?(p=()=>{Z({single:z?.single||[],multiple:H?.multiple||W.multiple}),G(!1)},T[29]=z?.single,T[30]=H?.multiple,T[31]=W,T[32]=p):p=T[32],T[33]===Symbol.for("react.memo_cache_sentinel")?(g={focusOutBehavior:"wrap",focusableElementFilter:nC},T[33]=g):g=T[33],T[34]!==ei?(y=()=>{ei(),G(!1)},T[34]=ei,T[35]=y):y=T[35],T[36]!==z?.single||T[37]!==R||T[38]!==W?(x=R?W.single:z?.single||[],T[36]=z?.single,T[37]=R,T[38]=W,T[39]=x):x=T[39],T[40]!==J||T[41]!==R||T[42]!==V?(b=e=>{R?R(e):J(e),"modal"!==V&&G(!1)},T[40]=J,T[41]=R,T[42]=V,T[43]=b):b=T[43],T[44]!==x||T[45]!==b?(j=(0,o.jsx)(nx,{selectionVariant:"single",items:x,onSelect:b,showGroupHeading:!1}),T[44]=x,T[45]=b,T[46]=j):j=T[46],T[47]!==z?.multiple||T[48]!==E||T[49]!==W?(_=E?W.multiple:z?.multiple||[],T[47]=z?.multiple,T[48]=E,T[49]=W,T[50]=_):_=T[50];let es=E??Y;return T[51]!==_||T[52]!==es?(C=(0,o.jsx)(nx,{selectionVariant:"multiple",items:_,onSelect:es}),T[51]=_,T[52]=es,T[53]=C):C=T[53],T[54]!==j||T[55]!==C?(N=(0,o.jsx)("div",{className:"CommitSelector-module__CommitSelectorContainer--_atPn",children:(0,o.jsxs)(w.l,{role:"listbox",selectionVariant:"single","aria-label":"Selection",children:[j,C]})}),T[54]=j,T[55]=C,T[56]=N):N=T[56],T[57]!==ei||T[58]!==X||T[59]!==en||T[60]!==V?(S=X&&"modal"!==V?(0,o.jsx)(ng.G9,{footerButtons:[{content:"Apply",onClick:en,action:"save"},{content:"Clear",onClick:ei,action:"cancel"}]}):null,T[57]=ei,T[58]=X,T[59]=en,T[60]=V,T[61]=S):S=T[61],T[62]!==N||T[63]!==S?(I=(0,o.jsxs)("div",{className:"CommitSelector-module__CommitSelectorWrapper--Wp_n9",children:[N,S]}),T[62]=N,T[63]=S,T[64]=I):I=T[64],T[65]!==B||T[66]!==q||T[67]!==en||T[68]!==p||T[69]!==y||T[70]!==I||T[71]!==$||T[72]!==V?(k=(0,o.jsx)(ng.KA,{open:q,anchorRef:U,headingId:"select-label",onClose:p,variant:V,focusZoneSettings:g,title:$,dialogProps:B,selectSave:en,selectCancel:y,children:I}),T[65]=B,T[66]=q,T[67]=en,T[68]=p,T[69]=y,T[70]=I,T[71]=$,T[72]=V,T[73]=k):k=T[73],T[74]!==f||T[75]!==k?(L=(0,o.jsxs)(o.Fragment,{children:[f,k]}),T[74]=f,T[75]=k,T[76]=L):L=T[76],L});function nx(e){let t,n=(0,c.c)(5),{items:i,onSelect:a,selectionVariant:s,showGroupHeading:r}=e,l=void 0===r||r;return n[0]!==i||n[1]!==a||n[2]!==s||n[3]!==l?(t=(0,o.jsx)(ng.LR,{selectionVariant:s,items:i,showGroupHeading:l,onSelect:a}),n[0]=i,n[1]=a,n[2]=s,n[3]=l,n[4]=t):t=n[4],t}try{ny.displayName||(ny.displayName="CommitSelector")}catch{}try{nx.displayName||(nx.displayName="CommitSelectorBody")}catch{}function nv(e,t){return"single"===t.selectionVariant?{...e,single:[...e.single,t]}:"multiple"===t.selectionVariant?{...e,multiple:[...e.multiple,t]}:e}function nb(e){return e.selected}function nj(e){return e.selected}function nw(e){return e.selected}function n_(e){return e.selected}function nC(e){return"BUTTON"!==e.tagName}var nN=n(62935),nS=n(70119);function nI(e,t,n,i){let a,s;return"added"===i?(a=Math.min(e,t),s=Math.max(e,n)):e===t?(a=t+1,s=n):(a=t,s=e-1),{newStartIndex:a,newEndIndex:s}}let nk=(0,v.memo)((0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f,p,g,y,x,b,j,_,C,N=(0,c.c)(52),{baseRefOid:S,commitOids:I,commits:k,endOid:L,onClose:T,onRangeUpdated:D,startOid:E}=e;N[0]!==I||N[1]!==L||N[2]!==E?(t=()=>{if(!E||!L)return;let e=E?I.indexOf(E)+1:-1,t=L?I.indexOf(L):-1;if(!(e<0)&&!(t<0))return{start:e,end:t}},N[0]=I,N[1]=L,N[2]=E,N[3]=t):t=N[3];let[R,A]=(0,v.useState)(t);N[4]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{A(void 0)},N[4]=n):n=N[4];let O=n;N[5]!==I||N[6]!==R?(i=(e,t)=>{let n,i=I.indexOf(e);if(R){if(R.start!==R.end||"removed"!==t){let{newStartIndex:e,newEndIndex:a}=nI(i,R.start,R.end,t);n={start:e,end:a}}}else n="added"===t?{start:i,end:i}:void 0;A(n)},N[5]=I,N[6]=R,N[7]=i):i=N[7];let P=i;N[8]!==S||N[9]!==I||N[10]!==L||N[11]!==T||N[12]!==D||N[13]!==R||N[14]!==E?(a=()=>{let e,t;(R&&(R.start>0||R.end<I.length-1)&&(e=R.start>0?I[R.start-1]:S,t=I[R.end]),e===E&&t===L)?T():e&&t?R&&R.start===R.end?D({type:"single",oid:t}):D({type:"range",fromPRBase:e===S,baseOid:e,endOid:t}):D({type:"unfiltered"})},N[8]=S,N[9]=I,N[10]=L,N[11]=T,N[12]=D,N[13]=R,N[14]=E,N[15]=a):a=N[15];let F=a;if(N[16]!==I||N[17]!==k||N[18]!==F||N[19]!==P||N[20]!==T||N[21]!==R){let e=R?I.slice(R.start,R.end+1):[];r=nS.X,g=!0,y=!0,x="Picking a range will select commits in between.",b="multiple",l="Pick one or more commits",d="modal",u="large",m=T,h=O,f=F,s=w.l,p=k.map(t=>{let n=e.includes(t.oid);return(0,o.jsxs)(w.l.Item,{selected:n,onSelect:()=>P(t.oid,n?"removed":"added"),children:[t.messageHeadline,(0,o.jsxs)(w.l.Description,{variant:"block",children:[t.shortOid," \xb7 ",t.actorLogin," \xb7 ",(0,o.jsx)(nN.A,{datetime:t.createdAt})]})]},t.oid)}),N[16]=I,N[17]=k,N[18]=F,N[19]=P,N[20]=T,N[21]=R,N[22]=s,N[23]=r,N[24]=l,N[25]=d,N[26]=u,N[27]=m,N[28]=h,N[29]=f,N[30]=p,N[31]=g,N[32]=y,N[33]=x,N[34]=b}else s=N[22],r=N[23],l=N[24],d=N[25],u=N[26],m=N[27],h=N[28],f=N[29],p=N[30],g=N[31],y=N[32],x=N[33],b=N[34];return N[35]!==s||N[36]!==p?(j=(0,o.jsx)(s,{children:p}),N[35]=s,N[36]=p,N[37]=j):j=N[37],N[38]===Symbol.for("react.memo_cache_sentinel")?(_=(0,o.jsx)(nS.X.Footer,{}),N[38]=_):_=N[38],N[39]!==r||N[40]!==l||N[41]!==d||N[42]!==u||N[43]!==m||N[44]!==h||N[45]!==f||N[46]!==j||N[47]!==g||N[48]!==y||N[49]!==x||N[50]!==b?(C=(0,o.jsxs)(r,{defaultOpen:g,open:y,description:x,selectionVariant:b,title:l,variant:d,width:u,onCancel:m,onClearSelection:h,onSubmit:f,children:[j,_]}),N[39]=r,N[40]=l,N[41]=d,N[42]=u,N[43]=m,N[44]=h,N[45]=f,N[46]=j,N[47]=g,N[48]=y,N[49]=x,N[50]=b,N[51]=C):C=N[51],C}:function({baseRefOid:e,commitOids:t,commits:n,endOid:i,onClose:a,onRangeUpdated:s,startOid:r}){let[l,d]=(0,v.useState)(()=>{if(!r||!i)return;let e=r?t.indexOf(r)+1:-1,n=i?t.indexOf(i):-1;if(!(e<0)&&!(n<0))return{start:e,end:n}}),c=l?t.slice(l.start,l.end+1):[];return(0,o.jsxs)(nS.X,{defaultOpen:!0,open:!0,description:"Picking a range will select commits in between.",selectionVariant:"multiple",title:"Pick one or more commits",variant:"modal",width:"large",onCancel:a,onClearSelection:()=>{d(void 0)},onSubmit:()=>{let n,o;(l&&(l.start>0||l.end<t.length-1)&&(n=l.start>0?t[l.start-1]:e,o=t[l.end]),n===r&&o===i)?a():n&&o?l&&l.start===l.end?s({type:"single",oid:o}):s({type:"range",fromPRBase:n===e,baseOid:n,endOid:o}):s({type:"unfiltered"})},children:[(0,o.jsx)(w.l,{children:n.map(e=>{let n=c.includes(e.oid);return(0,o.jsxs)(w.l.Item,{selected:n,onSelect:()=>((e,n)=>{let i,a=t.indexOf(e);if(l){if(l.start!==l.end||"removed"!==n){let{newStartIndex:e,newEndIndex:t}=nI(a,l.start,l.end,n);i={start:e,end:t}}}else i="added"===n?{start:a,end:a}:void 0;d(i)})(e.oid,n?"removed":"added"),children:[e.messageHeadline,(0,o.jsxs)(w.l.Description,{variant:"block",children:[e.shortOid," \xb7 ",e.actorLogin," \xb7 ",(0,o.jsx)(nN.A,{datetime:e.createdAt})]})]},e.oid)})}),(0,o.jsx)(nS.X.Footer,{})]})});try{nk.displayName||(nk.displayName="CommitsSelector")}catch{}let nL="All commits";function nT({endOid:e,startOid:t,firstCommitInRange:n}){return n&&e&&n===e?`Commit ${e.slice(0,7)}`:t&&e?`${t.slice(0,7)}..${e.slice(0,7)}`:nL}function nD({commitOids:e,endOid:t,firstCommitInRange:n}){if(n&&t&&n===t)return`Commit ${t.slice(0,7)}...`;if(n&&t){let i=e.indexOf(n),a=e.indexOf(t);if(i>-1&&a>-1)return`${a-i+1} commits...`}return"Specific commit\u2026"}let nE={default:{variant:"default",leadingVisual:q.VersionsIcon},condensed:{variant:"invisible",leadingVisual:void 0}},nR=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f,p,g,y,x,b,j=(0,c.c)(56),{onRangeUpdated:_,commits:C,lastReviewOid:N,variant:S}=e,k=void 0===S?"default":S,{baseOid:L,headOid:T}=(0,I.E4)(),{fullDiff:D}=(0,I.L3)(),{baseOid:E}=D,R=(0,I.ww)();j[0]!==C?(t=C.map(nA),j[0]=C,j[1]=t):t=j[1];let A=t,O=A[A.length-1],P=!!N&&L===N&&T===O,[F,M]=(0,v.useState)(!1),[$,B]=(0,v.useState)(!1);e:{if(!L){n=void 0;break e}if(L===E){n=A[0];break e}let e=A.findIndex(e=>e===L);if(e<0){n=void 0;break e}n=A[e+1]}let U=n;j[2]!==T||j[3]!==U||j[4]!==L?(i=nT({endOid:T,startOid:L,firstCommitInRange:U}),j[2]=T,j[3]=U,j[4]=L,j[5]=i):i=j[5];let G=i;j[6]!==A||j[7]!==T||j[8]!==U?(a=nD({endOid:T,firstCommitInRange:U,commitOids:A}),j[6]=A,j[7]=T,j[8]=U,j[9]=a):a=j[9];let H=a,{sendPullRequestAnalyticsEvent:K}=(0,V.q)();j[10]!==K?(s=()=>{K("commits_menu.select_commit","COMMITS_MENU_ITEM"),M(!1),B(!0)},j[10]=K,j[11]=s):s=j[11];let W=s,z=(ey.cg?.innerWidth??1e3)<543;j[12]!==_?(r=()=>{_({type:"unfiltered"})},j[12]=_,j[13]=r):r=j[13];let Z=r;j[14]!==_?(l=e=>{B(!1),_(e)},j[14]=_,j[15]=l):l=j[15];let J=l;j[16]!==K?(d=e=>{M(e),e&&K("commits_menu.open","COMMITS_MENU")},j[16]=K,j[17]=d):d=j[17];let Y=d,X=z?void 0:nE[k].leadingVisual,ee=nE[k];j[18]!==G||j[19]!==X||j[20]!==ee.variant?(u=(0,o.jsx)(eq.W.Anchor,{children:(0,o.jsx)(Q.Q,{alignContent:"start",className:"flex-shrink-0",leadingVisual:X,size:"small",variant:ee.variant,trailingAction:q.TriangleDownIcon,children:G})}),j[18]=G,j[19]=X,j[20]=ee.variant,j[21]=u):u=j[21];let et=!R;j[22]!==Z||j[23]!==et?(m=(0,o.jsx)(w.l.Item,{selected:et,onSelect:Z,children:nL}),j[22]=Z,j[23]=et,j[24]=m):m=j[24],j[25]!==E||j[26]!==P||j[27]!==J||j[28]!==O||j[29]!==N?(h=N&&O&&N!==O&&(0,o.jsx)(w.l.Item,{selected:P,onSelect:()=>J({type:"range",fromPRBase:N===E,baseOid:N,endOid:O}),children:"Changes since your last review"}),j[25]=E,j[26]=P,j[27]=J,j[28]=O,j[29]=N,j[30]=h):h=j[30],j[31]===Symbol.for("react.memo_cache_sentinel")?(f=(0,o.jsx)(w.l.Divider,{}),j[31]=f):f=j[31];let en=R&&!P;return j[32]!==H||j[33]!==W||j[34]!==en?(p=(0,o.jsx)(w.l.Item,{selected:en,onSelect:W,children:H}),j[32]=H,j[33]=W,j[34]=en,j[35]=p):p=j[35],j[36]!==m||j[37]!==h||j[38]!==p?(g=(0,o.jsx)(eq.W.Overlay,{side:"outside-bottom",width:"small",children:(0,o.jsxs)(w.l,{selectionVariant:"single",children:[m,h,f,p]})}),j[36]=m,j[37]=h,j[38]=p,j[39]=g):g=j[39],j[40]!==Y||j[41]!==F||j[42]!==u||j[43]!==g?(y=(0,o.jsxs)(eq.W,{open:F,onOpenChange:Y,children:[u,g]}),j[40]=Y,j[41]=F,j[42]=u,j[43]=g,j[44]=y):y=j[44],j[45]!==E||j[46]!==A||j[47]!==C||j[48]!==T||j[49]!==J||j[50]!==$||j[51]!==L?(x=$&&(0,o.jsx)(nk,{baseRefOid:E||"",commitOids:A,commits:C,endOid:T,startOid:L,onClose:()=>B(!1),onRangeUpdated:J}),j[45]=E,j[46]=A,j[47]=C,j[48]=T,j[49]=J,j[50]=$,j[51]=L,j[52]=x):x=j[52],j[53]!==y||j[54]!==x?(b=(0,o.jsxs)(o.Fragment,{children:[y,x]}),j[53]=y,j[54]=x,j[55]=b):b=j[55],b}:function({onRangeUpdated:e,commits:t,lastReviewOid:n,variant:i="default"}){let{baseOid:a,headOid:s}=(0,I.E4)(),{fullDiff:{baseOid:r}}=(0,I.L3)(),l=(0,I.ww)(),d=(0,v.useMemo)(()=>t.map(e=>e.oid),[t]),c=d[d.length-1],u=!!n&&a===n&&s===c,[m,h]=(0,v.useState)(!1),[f,p]=(0,v.useState)(!1),g=(0,v.useMemo)(()=>{if(!a)return;if(a===r)return d[0];let e=d.findIndex(e=>e===a);if(!(e<0))return d[e+1]},[r,d,a]),y=nT({endOid:s,startOid:a,firstCommitInRange:g}),x=nD({endOid:s,firstCommitInRange:g,commitOids:d}),{sendPullRequestAnalyticsEvent:b}=(0,V.q)(),j=(ey.cg?.innerWidth??1e3)<543,_=t=>{p(!1),e(t)};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(eq.W,{open:m,onOpenChange:e=>{h(e),e&&b("commits_menu.open","COMMITS_MENU")},children:[(0,o.jsx)(eq.W.Anchor,{children:(0,o.jsx)(Q.Q,{alignContent:"start",className:"flex-shrink-0",leadingVisual:j?void 0:nE[i].leadingVisual,size:"small",variant:nE[i].variant,trailingAction:q.TriangleDownIcon,children:y})}),(0,o.jsx)(eq.W.Overlay,{side:"outside-bottom",width:"small",children:(0,o.jsxs)(w.l,{selectionVariant:"single",children:[(0,o.jsx)(w.l.Item,{selected:!l,onSelect:()=>{e({type:"unfiltered"})},children:nL}),n&&c&&n!==c&&(0,o.jsx)(w.l.Item,{selected:u,onSelect:()=>_({type:"range",fromPRBase:n===r,baseOid:n,endOid:c}),children:"Changes since your last review"}),(0,o.jsx)(w.l.Divider,{}),(0,o.jsx)(w.l.Item,{selected:l&&!u,onSelect:()=>{b("commits_menu.select_commit","COMMITS_MENU_ITEM"),h(!1),p(!0)},children:x})]})})]}),f&&(0,o.jsx)(nk,{baseRefOid:r||"",commitOids:d,commits:t,endOid:s,startOid:a,onClose:()=>p(!1),onRangeUpdated:_})]})};function nA(e){return e.oid}try{nR.displayName||(nR.displayName="CommitsDropdown")}catch{}var nO=n(68534);let nP=(0,d.Z6)()?function(e){let t,n=(0,c.c)(4);if((0,no.u)("new_pr_files_commit_selector")){let t;return n[0]!==e?(t=(0,o.jsx)(nM,{...e}),n[0]=e,n[1]=t):t=n[1],t}return n[2]!==e?(t=(0,o.jsx)(nF,{...e}),n[2]=e,n[3]=t):t=n[3],t}:function(e){return(0,no.u)("new_pr_files_commit_selector")?(0,o.jsx)(nM,{...e}):(0,o.jsx)(nF,{...e})},nF=(0,d.Z6)()?function(e){let t,n,i=(0,c.c)(10),{ownerLogin:a,repositoryName:s,pullRequestNumber:r,commits:l,lastReviewOid:d,variant:u}=e,m=(0,no.u)("combined_pr_changes_route");i[0]!==m||i[1]!==a||i[2]!==r||i[3]!==s?(t=e=>{let t;if(m)if("unfiltered"===e.type)t=(0,eA.tvs)({owner:a,repo:s,number:r});else if("range"===e.type){let n=e.fromPRBase?"BASE":e.baseOid;t=(0,eA.zLJ)({owner:a,repo:s,number:r,base:n,head:e.endOid})}else t=(0,eA.zLJ)({owner:a,repo:s,number:r,head:e.oid});else if("unfiltered"===e.type)t=(0,eA.jrm)({owner:a,repo:s,number:r});else if("range"===e.type){let n=e.fromPRBase?void 0:e.baseOid;t=(0,eA.nSV)({owner:a,repo:s,number:r,base:n,head:e.endOid})}else t=(0,eA.yIb)({owner:a,repo:s,number:r,commit:e.oid});window.location.href=t},i[0]=m,i[1]=a,i[2]=r,i[3]=s,i[4]=t):t=i[4];let h=t;return i[5]!==l||i[6]!==d||i[7]!==h||i[8]!==u?(n=(0,o.jsx)(nR,{commits:l,lastReviewOid:d,onRangeUpdated:h,variant:u}),i[5]=l,i[6]=d,i[7]=h,i[8]=u,i[9]=n):n=i[9],n}:function({ownerLogin:e,repositoryName:t,pullRequestNumber:n,commits:i,lastReviewOid:a,variant:s}){let r=(0,no.u)("combined_pr_changes_route");return(0,o.jsx)(nR,{commits:i,lastReviewOid:a,onRangeUpdated:i=>{let a;if(r)if("unfiltered"===i.type)a=(0,eA.tvs)({owner:e,repo:t,number:n});else if("range"===i.type){let s=i.fromPRBase?"BASE":i.baseOid;a=(0,eA.zLJ)({owner:e,repo:t,number:n,base:s,head:i.endOid})}else a=(0,eA.zLJ)({owner:e,repo:t,number:n,head:i.oid});else if("unfiltered"===i.type)a=(0,eA.jrm)({owner:e,repo:t,number:n});else if("range"===i.type){let s=i.fromPRBase?void 0:i.baseOid;a=(0,eA.nSV)({owner:e,repo:t,number:n,base:s,head:i.endOid})}else a=(0,eA.yIb)({owner:e,repo:t,number:n,commit:i.oid});window.location.href=a},variant:s})},nM=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,p,g,y,x,b,j,w=(0,c.c)(71),{ownerLogin:_,repositoryName:C,pullRequestNumber:N,commits:S,lastReviewOid:k,variant:L}=e,{baseOid:T,headOid:D}=(0,I.E4)(),E=(0,I.ww)(),{fullDiff:R}=(0,I.L3)(),{baseOid:A}=R,O=(0,no.u)("combined_pr_changes_route");w[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,eS.G7)("verbose_commit_selector_announcements"),w[0]=t):t=w[0];let P=t,F=(0,v.useRef)(null);w[1]!==S?(n=S.map(n$),w[1]=S,w[2]=n):n=w[2];let M=n;e:{if(!T){i=void 0;break e}if(T===A){i=M[0];break e}let e=M.findIndex(e=>e===T);if(e<0){i=void 0;break e}i=M[e+1]}let $=i;w[3]!==D||w[4]!==$||w[5]!==T?(a=nT({endOid:D,startOid:T,firstCommitInRange:$}),w[3]=D,w[4]=$,w[5]=T,w[6]=a):a=w[6];let B=a;t:{let e,t;if(!T||!D){s=void 0;break t}let n=T?M.indexOf(T)+1:-1;w[7]!==M||w[8]!==D?(e=D?M.indexOf(D):-1,w[7]=M,w[8]=D,w[9]=e):e=w[9];let i=e;if(n<0||i<0){s=void 0;break t}w[10]!==i||w[11]!==n?(t={start:n,end:i},w[10]=i,w[11]=n,w[12]=t):t=w[12],s=t}let V=s;w[13]!==V?(r=()=>V,w[13]=V,w[14]=r):r=w[14];let[U,G]=(0,v.useState)(r);n:{let e;if(!U){let e;w[15]===Symbol.for("react.memo_cache_sentinel")?(e=new Set,w[15]=e):e=w[15],l=e;break n}w[16]!==M||w[17]!==U.end||w[18]!==U.start?(e=new Set(M.slice(U.start,U.end+1)),w[16]=M,w[17]=U.end,w[18]=U.start,w[19]=e):e=w[19],l=e}let H=l;if(w[20]!==M||w[21]!==S||w[22]!==D||w[23]!==E||w[24]!==k||w[25]!==H||w[26]!==T){let e,t,n;d=[];let i=`${S.length} commit${1!==S.length?"s":""}`,a=!E;w[28]!==a||w[29]!==i?(e={id:"all-commits",label:"All commits",description:i,descriptionVariant:"block",selectionVariant:"single",selected:a},w[28]=a,w[29]=i,w[30]=e):e=w[30],d.push(e);let s=S[S.length-1]?.oid,r=!1,l=!1;if(k)if(s)if(k===s)t="No new commits since last review",r=!0;else{let e=M.indexOf(k),n=e>=0?M.length-e-1:S.length;t=`${n} commit${1!==n?"s":""}`,l=T===k&&D===s}else t="No commits available",r=!0;else t="No previous review found",r=!0;for(let[e,i]of(w[31]!==l||w[32]!==t||w[33]!==r?(n={id:"changes-since-review",label:"Changes since your last review",description:t,descriptionVariant:"block",selectionVariant:"single",selected:l,disabled:r},w[31]=l,w[32]=t,w[33]=r,w[34]=n):n=w[34],d.push(n),S.entries()))d.push({id:i.oid,label:i.messageHeadline,description:`${i.actorLogin} committed ${(0,np.V)(new Date(i.createdAt))}`,descriptionVariant:"block",selectionVariant:"multiple",selected:H.has(i.oid),groupId:1,groupTitle:0===e?"Select a range of commits":void 0,trailingVisual:i.shortOid});w[20]=M,w[21]=S,w[22]=D,w[23]=E,w[24]=k,w[25]=H,w[26]=T,w[27]=d}else d=w[27];let K=d;w[35]!==O||w[36]!==_||w[37]!==N||w[38]!==C?(u=e=>{let t;if(O)if("unfiltered"===e.type)t=(0,eA.tvs)({owner:_,repo:C,number:N});else if("range"===e.type){let n=e.fromPRBase?"BASE":e.baseOid;t=(0,eA.zLJ)({owner:_,repo:C,number:N,base:n,head:e.endOid})}else t=(0,eA.zLJ)({owner:_,repo:C,number:N,head:e.oid});else if("unfiltered"===e.type)t=(0,eA.jrm)({owner:_,repo:C,number:N});else if("range"===e.type){let n=e.fromPRBase?void 0:e.baseOid;t=(0,eA.nSV)({owner:_,repo:C,number:N,base:n,head:e.endOid})}else t=(0,eA.yIb)({owner:_,repo:C,number:N,commit:e.oid});window.location.href=t},w[35]=O,w[36]=_,w[37]=N,w[38]=C,w[39]=u):u=w[39];let W=u;w[40]!==A||w[41]!==S||w[42]!==k||w[43]!==W?(m=e=>{if("all-commits"===e.id)W({type:"unfiltered"});else if("changes-since-review"===e.id&&k){let e=S[S.length-1]?.oid;e&&W({type:"range",fromPRBase:k===A,baseOid:k,endOid:e})}},w[40]=A,w[41]=S,w[42]=k,w[43]=W,w[44]=m):m=w[44];let z=m;w[45]!==M||w[46]!==H||w[47]!==U?(h=e=>{let t,n=M.indexOf(e.id),i=H.has(e.id)?"removed":"added";if(U){if(U.start!==U.end||"removed"!==i){let{newStartIndex:e,newEndIndex:a}=function(e,t,n,i){let a,s;return"added"===i?(a=Math.min(e,t),s=Math.max(e,n)):e===t?(a=t+1,s=n):(a=t,s=e-1),{newStartIndex:a,newEndIndex:s}}(n,U.start,U.end,i);t={start:e,end:a}}}else t="added"===i?{start:n,end:n}:void 0;if(t){if(void 0!==t.start&&t.start===t.end){let e=t.start+1,n=M[t.start];if(n){let t=(0,nO.F)(n),i=P?`Commit ${t} selected`:`Commit ${e} selected`;(0,to.i)(i)}}else if(void 0!==t.start&&void 0!==t.end){let e=t.start+1,n=t.end+1,i=M[t.start],a=M[t.end];if(i&&a){let t=(0,nO.F)(i),s=(0,nO.F)(a),r=P?`Commits ${t} to ${s} selected`:`Commits ${e} to ${n} selected`;(0,to.i)(r)}}}else(0,to.i)("No commits selected");G(t)},w[45]=M,w[46]=H,w[47]=U,w[48]=h):h=w[48];let Q=h;w[49]!==A||w[50]!==M||w[51]!==V?.end||w[52]!==V?.start||w[53]!==W||w[54]!==U?(p=()=>{let e,t;U&&(U.start!==V?.start||U.end!==V?.end)&&((U.start>0||U.end<M.length-1||1===M.length)&&(e=U.start>0?M[U.start-1]:A,t=M[U.end]),e&&t?U.start===U.end?W({type:"single",oid:t}):W({type:"range",fromPRBase:e===A,baseOid:e,endOid:t}):W({type:"unfiltered"}))},w[49]=A,w[50]=M,w[51]=V?.end,w[52]=V?.start,w[53]=W,w[54]=U,w[55]=p):p=w[55],V?.start,V?.end;let Z=p;w[56]!==V?(g=()=>{G(V)},w[56]=V,w[57]=g):g=w[57];let J=g;w[58]===Symbol.for("react.memo_cache_sentinel")?(y=(0,o.jsx)(f.ak,{commands:{"pull-request-files-changed:open-commits-list":()=>{F.current?.open()}}}),w[58]=y):y=w[58];let Y="condensed"===L?void 0:q.VersionsIcon,X="condensed"===L?"invisible":"default";return w[59]!==Y||w[60]!==X?(x={id:"changes-selector-button",size:"small",leadingVisual:Y,variant:X,trailingAction:q.TriangleDownIcon},w[59]=Y,w[60]=X,w[61]=x):x=w[61],w[62]===Symbol.for("react.memo_cache_sentinel")?(b={height:"large"},w[62]=b):b=w[62],w[63]!==B||w[64]!==K||w[65]!==Z||w[66]!==J||w[67]!==Q||w[68]!==z||w[69]!==x?(j=(0,o.jsxs)(o.Fragment,{children:[y,(0,o.jsx)(ny,{buttonProps:x,anchorLabel:B,ref:F,dialogProps:b,items:K,onSingleSelect:z,onMultiSelect:Q,onApply:Z,onCancel:J,variant:"modal",title:"Select commits to view"})]}),w[63]=B,w[64]=K,w[65]=Z,w[66]=J,w[67]=Q,w[68]=z,w[69]=x,w[70]=j):j=w[70],j}:function({ownerLogin:e,repositoryName:t,pullRequestNumber:n,commits:i,lastReviewOid:a,variant:s}){let{baseOid:r,headOid:l}=(0,I.E4)(),d=(0,I.ww)(),{fullDiff:{baseOid:c}}=(0,I.L3)(),u=(0,no.u)("combined_pr_changes_route"),m=(0,eS.G7)("verbose_commit_selector_announcements"),h=(0,v.useRef)(null),p=(0,v.useMemo)(()=>i.map(e=>e.oid),[i]),g=(0,v.useMemo)(()=>{if(!r)return;if(r===c)return p[0];let e=p.findIndex(e=>e===r);if(!(e<0))return p[e+1]},[c,p,r]),y=nT({endOid:l,startOid:r,firstCommitInRange:g}),x=(0,v.useMemo)(()=>{if(!r||!l)return;let e=r?p.indexOf(r)+1:-1,t=l?p.indexOf(l):-1;if(!(e<0)&&!(t<0))return{start:e,end:t}},[r,l,p]),[b,j]=(0,v.useState)(()=>x),w=(0,v.useMemo)(()=>b?new Set(p.slice(b.start,b.end+1)):new Set,[b,p]),_=(0,v.useMemo)(()=>{let e,t=[];t.push({id:"all-commits",label:"All commits",description:`${i.length} commit${1!==i.length?"s":""}`,descriptionVariant:"block",selectionVariant:"single",selected:!d});let n=i[i.length-1]?.oid,s=!1,o=!1;if(a)if(n)if(a===n)e="No new commits since last review",s=!0;else{let t=p.indexOf(a),s=t>=0?p.length-t-1:i.length;e=`${s} commit${1!==s?"s":""}`,o=r===a&&l===n}else e="No commits available",s=!0;else e="No previous review found",s=!0;for(let[n,a]of(t.push({id:"changes-since-review",label:"Changes since your last review",description:e,descriptionVariant:"block",selectionVariant:"single",selected:o,disabled:s}),i.entries()))t.push({id:a.oid,label:a.messageHeadline,description:`${a.actorLogin} committed ${(0,np.V)(new Date(a.createdAt))}`,descriptionVariant:"block",selectionVariant:"multiple",selected:w.has(a.oid),groupId:1,groupTitle:0===n?"Select a range of commits":void 0,trailingVisual:a.shortOid});return t},[i,d,a,r,l,w,p]),C=(0,v.useCallback)(i=>{let a;if(u)if("unfiltered"===i.type)a=(0,eA.tvs)({owner:e,repo:t,number:n});else if("range"===i.type){let s=i.fromPRBase?"BASE":i.baseOid;a=(0,eA.zLJ)({owner:e,repo:t,number:n,base:s,head:i.endOid})}else a=(0,eA.zLJ)({owner:e,repo:t,number:n,head:i.oid});else if("unfiltered"===i.type)a=(0,eA.jrm)({owner:e,repo:t,number:n});else if("range"===i.type){let s=i.fromPRBase?void 0:i.baseOid;a=(0,eA.nSV)({owner:e,repo:t,number:n,base:s,head:i.endOid})}else a=(0,eA.yIb)({owner:e,repo:t,number:n,commit:i.oid});window.location.href=a},[e,t,n,u]),N=(0,v.useCallback)((e,t,n,i)=>{let a,s;return"added"===i?(a=Math.min(e,t),s=Math.max(e,n)):e===t?(a=t+1,s=n):(a=t,s=e-1),{newStartIndex:a,newEndIndex:s}},[]),S=(0,v.useCallback)(e=>{let t,n=p.indexOf(e.id),i=w.has(e.id)?"removed":"added";if(b){if(b.start!==b.end||"removed"!==i){let{newStartIndex:e,newEndIndex:a}=N(n,b.start,b.end,i);t={start:e,end:a}}}else t="added"===i?{start:n,end:n}:void 0;if(t){if(void 0!==t.start&&t.start===t.end){let e=t.start+1,n=p[t.start];if(n){let t=(0,nO.F)(n),i=m?`Commit ${t} selected`:`Commit ${e} selected`;(0,to.i)(i)}}else if(void 0!==t.start&&void 0!==t.end){let e=t.start+1,n=t.end+1,i=p[t.start],a=p[t.end];if(i&&a){let t=(0,nO.F)(i),s=(0,nO.F)(a),r=m?`Commits ${t} to ${s} selected`:`Commits ${e} to ${n} selected`;(0,to.i)(r)}}}else(0,to.i)("No commits selected");j(t)},[p,w,b,N,j,m]),k=(0,v.useCallback)(()=>{let e,t;b&&(b.start!==x?.start||b.end!==x?.end)&&((b.start>0||b.end<p.length-1||1===p.length)&&(e=b.start>0?p[b.start-1]:c,t=p[b.end]),e&&t?b.start===b.end?C({type:"single",oid:t}):C({type:"range",fromPRBase:e===c,baseOid:e,endOid:t}):C({type:"unfiltered"}))},[b,x?.start,x?.end,p,c,C]),L=(0,v.useCallback)(()=>{j(x)},[j,x]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(f.ak,{commands:{"pull-request-files-changed:open-commits-list":()=>{h.current?.open()}}}),(0,o.jsx)(ny,{buttonProps:{id:"changes-selector-button",size:"small",leadingVisual:"condensed"===s?void 0:q.VersionsIcon,variant:"condensed"===s?"invisible":"default",trailingAction:q.TriangleDownIcon},anchorLabel:y,ref:h,dialogProps:{height:"large"},items:_,onSingleSelect:e=>{if("all-commits"===e.id)C({type:"unfiltered"});else if("changes-since-review"===e.id&&a){let e=i[i.length-1]?.oid;e&&C({type:"range",fromPRBase:a===c,baseOid:a,endOid:e})}},onMultiSelect:S,onApply:k,onCancel:L,variant:"modal",title:"Select commits to view"})]})};function n$(e){return e.oid}try{nP.displayName||(nP.displayName="ChangesSelector")}catch{}try{nF.displayName||(nF.displayName="OldChangesSelector")}catch{}try{nM.displayName||(nM.displayName="NewChangesSelector")}catch{}var nB=n(33644),nV=n(2694),nU=n(81070),nq=n(33195);let nG="PullRequestFilesToolbar-module__is-stuck--pCXhL",nH="PullRequestFilesToolbar-module__show-when-stuck--ONyyF",nK="PullRequestFilesToolbar-module__hide-when-stuck-large--jRjpF",nW="PullRequestFilesToolbar-module__pr-title-details--NZamC",nz="PullRequestFilesToolbar-module__pr-sticky-title--Fu24T",nQ="PullRequestFilesToolbar-module__file-controls--XN2fA",nZ="PullRequestFilesToolbar-module__file-controls-navigation--Ti_xo",nJ="PullRequestFilesToolbar-module__file-controls-divider--oWuSw",nY="PullRequestFilesToolbar-module__toolbar--bXrnB",nX="PullRequestFilesToolbar-module__simple-toolbar--q_1hU";var n0=n(21968),n1=n(34261),n2=n(89155);let n3=(0,d.Z6)()?function(){let e,t,n,i=(0,c.c)(7),a=(0,I.Kp)(),{updateWhitespace:s}=(0,I.yo)();return i[0]!==a?(e=async e=>{let{hideWhitespace:t}=e,n=`${a}/page_data/${X.uT.updateWhitespacePreference}`,i=await (0,en.q$)(n,{method:"POST",body:{w:+!!t}}),s=await (0,en.hp)(i);return(0,en.R)(i,s),s},i[0]=a,i[1]=e):e=i[1],i[2]!==s?(t=e=>{s(e.ignoreWhitespace)},i[2]=s,i[3]=t):t=i[3],i[4]!==e||i[5]!==t?(n={mutationFn:e,onSuccess:t},i[4]=e,i[5]=t,i[6]=n):n=i[6],(0,et.n)(n)}:function(){let e=(0,I.Kp)(),{updateWhitespace:t}=(0,I.yo)();return(0,et.n)({mutationFn:async({hideWhitespace:t})=>{let n=`${e}/page_data/${X.uT.updateWhitespacePreference}`,i=await (0,en.q$)(n,{method:"POST",body:{w:+!!t}}),a=await (0,en.hp)(i);return(0,en.R)(i,a),a},onSuccess:e=>{t(e.ignoreWhitespace)}})};var n4=n(73783),n5=n(81355),n6=n(61583);let n7=(0,d.Z6)()?function(){let e,t,n,i,a=(0,c.c)(14),s=(0,I.mU)(),r=(0,I.$W)(s),{selectedPathDigest:l}=(0,n5.U)();a[0]!==r||a[1]!==l?(e=l?r.findIndex(e=>e.pathDigest===l):0,a[0]=r,a[1]=l,a[2]=e):e=a[2];let o=e,d=n8;a[3]!==o||a[4]!==r?(t=()=>{if(r.length>0){let e;e=o<=0?r.length-1:o-1;let t=r[e];t&&d(t.pathDigest)}},a[3]=o,a[4]=r,a[5]=t):t=a[5];let u=t;a[6]!==o||a[7]!==r?(n=()=>{if(r.length>0){let e;e=o>=r.length-1||o<0?0:o+1;let t=r[e];t&&d(t.pathDigest)}},a[6]=o,a[7]=r,a[8]=n):n=a[8];let m=n,h=o>=0?o:void 0;return a[9]!==m||a[10]!==u||a[11]!==l||a[12]!==h?(i={navigateToPrevious:u,navigateToNext:m,currentPathDigest:l,currentIndex:h},a[9]=m,a[10]=u,a[11]=l,a[12]=h,a[13]=i):i=a[13],i}:function(){let e=(0,I.mU)(),t=(0,I.$W)(e),{selectedPathDigest:n}=(0,n5.U)(),i=(0,v.useMemo)(()=>n?t.findIndex(e=>e.pathDigest===n):0,[t,n]),a=(0,v.useCallback)(e=>{(0,n6.pk)(`diff-${e}`),(0,N.kd)(window.location.href)},[]);return{navigateToPrevious:(0,v.useCallback)(()=>{if(t.length>0){let e;e=i<=0?t.length-1:i-1;let n=t[e];n&&a(n.pathDigest)}},[i,t,a]),navigateToNext:(0,v.useCallback)(()=>{if(t.length>0){let e;e=i>=t.length-1||i<0?0:i+1;let n=t[e];n&&a(n.pathDigest)}},[i,t,a]),currentPathDigest:n,currentIndex:i>=0?i:void 0}};function n8(e){(0,n6.pk)(`diff-${e}`),(0,N.kd)(window.location.href)}var n9=n(19415);let ie="SingleFileModeOnboardingPopover-module__PopoverContainer--wtwv5",it="SingleFileModeOnboardingPopover-module__PopoverContent--zQnno",ii="SingleFileModeOnboardingPopover-module__Heading--BRcrc";function ia(e){return(e??[]).filter(e=>!e.dismissed)}let is=(0,d.Z6)()?function(e,t){let n,i=(0,c.c)(5),a=ia(t);if(i[0]!==a||i[1]!==e){let t;i[3]!==e?(t=t=>t.name===e,i[3]=e,i[4]=t):t=i[4],n=a.filter(t),i[0]=a,i[1]=e,i[2]=n}else n=i[2];return 0===n.length}:function(e,t){return 0===ia(t).filter(t=>t.name===e).length},ir=(0,d.Z6)()?function(e,t){let n,i,a=(0,c.c)(5),s=is(e,t);a[0]!==s||a[1]!==e?(n=()=>{(0,e5.M3)()&&!s&&(0,ed.DI)((0,eA.VB1)({noticeName:e}),{method:"POST"})},a[0]=s,a[1]=e,a[2]=n):n=a[2];let r=n;return a[3]!==r?(i={dismissNotice:r},a[3]=r,a[4]=i):i=a[4],i}:function(e,t){let n=is(e,t);return{dismissNotice:(0,v.useCallback)(()=>{(0,e5.M3)()&&!n&&(0,ed.DI)((0,eA.VB1)({noticeName:e}),{method:"POST"})},[n,e])}},il="single_file_mode",io=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u=(0,c.c)(12),{userNotices:m}=e,h=is(il,m),f=(0,I.j5)(),[p,g]=(0,v.useState)(!0),{dismissNotice:y}=ir(il,m);u[0]!==y?(t=()=>{y(),g(!1)},u[0]=y,u[1]=t):t=u[1];let b=t;return!f||h?null:(u[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,x.$)("d-flex flex-column gap-2",it),i=(0,o.jsx)(E.A,{as:"h3",variant:"small",className:ii,children:"You're in single-file mode"}),a=(0,o.jsx)("p",{children:"Due to the large number of changes in this pull request, only one file is being shown at a time."}),u[2]=n,u[3]=i,u[4]=a):(n=u[2],i=u[3],a=u[4]),u[5]===Symbol.for("react.memo_cache_sentinel")?(s=(0,o.jsx)("strong",{children:"Previous"}),u[5]=s):s=u[5],u[6]===Symbol.for("react.memo_cache_sentinel")?(r=(0,o.jsxs)("p",{children:["Use the ",s," and ",(0,o.jsx)("strong",{children:"Next"})," buttons to move between files."]}),u[6]=r):r=u[6],u[7]!==b?(l=(0,o.jsxs)(n9.A.Content,{className:n,children:[i,a,r,(0,o.jsx)("div",{className:"d-flex flex-items-center",children:(0,o.jsx)(Q.Q,{onClick:b,children:"OK, got it"})})]}),u[7]=b,u[8]=l):l=u[8],u[9]!==p||u[10]!==l?(d=(0,o.jsx)(n9.A,{className:ie,open:p,children:l}),u[9]=p,u[10]=l,u[11]=d):d=u[11],d)}:function({userNotices:e}){let t=is(il,e),n=(0,I.j5)(),[i,a]=(0,v.useState)(!0),{dismissNotice:s}=ir(il,e);return!n||t?null:(0,o.jsx)(n9.A,{className:ie,open:i,children:(0,o.jsxs)(n9.A.Content,{className:(0,x.$)("d-flex flex-column gap-2",it),children:[(0,o.jsx)(E.A,{as:"h3",variant:"small",className:ii,children:"You're in single-file mode"}),(0,o.jsx)("p",{children:"Due to the large number of changes in this pull request, only one file is being shown at a time."}),(0,o.jsxs)("p",{children:["Use the ",(0,o.jsx)("strong",{children:"Previous"})," and ",(0,o.jsx)("strong",{children:"Next"})," buttons to move between files."]}),(0,o.jsx)("div",{className:"d-flex flex-items-center",children:(0,o.jsx)(Q.Q,{onClick:()=>{s(),a(!1)},children:"OK, got it"})})]})})};try{io.displayName||(io.displayName="SingleFileModeOnboardingPopover")}catch{}var id=n(44569);let ic=(0,d.Z6)()?function(e){let t,n,i,a,s,r=(0,c.c)(12),{userNotices:l}=e,d=(0,id.zw)(),{navigateToPrevious:u,navigateToNext:m}=n7();return r[0]!==u?(t=(0,o.jsx)(G.K,{icon:q.ChevronUpIcon,"aria-label":d?"Previous file (K)":"Previous file",size:"small",onClick:u,"data-hotkey":"k"}),r[0]=u,r[1]=t):t=r[1],r[2]!==m?(n=(0,o.jsx)(G.K,{icon:q.ChevronDownIcon,"aria-label":d?"Next file (J)":"Next file",size:"small",onClick:m,"data-hotkey":"j"}),r[2]=m,r[3]=n):n=r[3],r[4]!==t||r[5]!==n?(i=(0,o.jsxs)(n4.A,{children:[t,n]}),r[4]=t,r[5]=n,r[6]=i):i=r[6],r[7]!==l?(a=(0,o.jsx)(io,{userNotices:l}),r[7]=l,r[8]=a):a=r[8],r[9]!==i||r[10]!==a?(s=(0,o.jsxs)("div",{className:"position-relative",children:[i,a]}),r[9]=i,r[10]=a,r[11]=s):s=r[11],s}:function({userNotices:e}){let t=(0,id.zw)(),{navigateToPrevious:n,navigateToNext:i}=n7();return(0,o.jsxs)("div",{className:"position-relative",children:[(0,o.jsxs)(n4.A,{children:[(0,o.jsx)(G.K,{icon:q.ChevronUpIcon,"aria-label":t?"Previous file (K)":"Previous file",size:"small",onClick:n,"data-hotkey":"k"}),(0,o.jsx)(G.K,{icon:q.ChevronDownIcon,"aria-label":t?"Next file (J)":"Next file",size:"small",onClick:i,"data-hotkey":"j"})]}),(0,o.jsx)(io,{userNotices:e})]})};try{ic.displayName||(ic.displayName="ReviewNavigationButtonGroup")}catch{}let iu=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f,p,g,y,x,b,j,_,C,N=(0,c.c)(50),{pageLimits:S,pullRequest:k,hideWhitespace:L,onUpdateWhitespace:T,additionalPreferences:D}=e,[E,R]=(0,v.useState)(!1),[A,O]=(0,v.useState)(!1),[P,F]=(0,v.useState)(!1),[M,$]=(0,v.useState)(!1),B=(0,v.useRef)(null),U=(0,I.wI)(),H=(0,I.Qb)(),{sendPullRequestAnalyticsEvent:K}=(0,V.q)();N[0]!==U?(t=U?Object.values(U):[],N[0]=U,N[1]=t):t=N[1];let W=t,z=W.length;N[2]!==K?(n=()=>{K("comments_side_panel.open","COMMENTS_SIDE_PANEL_BUTTON"),eV(),R(!0),F(!1)},N[2]=K,N[3]=n):n=N[3];let Q=n;N[4]!==K?(i=()=>{K("alerts_side_panel.open","ALERTS_SIDE_PANEL_BUTTON"),eV(),O(!0),F(!1)},N[4]=K,N[5]=i):i=N[5];let Z=i;return N[6]===Symbol.for("react.memo_cache_sentinel")?(a=(0,o.jsx)(eq.W.Anchor,{children:(0,o.jsx)(G.K,{ref:B,icon:q.KebabHorizontalIcon,variant:"default",size:"small","aria-label":"More options"})}),N[6]=a):a=N[6],N[7]===Symbol.for("react.memo_cache_sentinel")?(s=(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)(q.CommentDiscussionIcon,{})}),N[7]=s):s=N[7],N[8]!==H?(r=H>0&&(0,o.jsx)(w.l.TrailingVisual,{children:H}),N[8]=H,N[9]=r):r=N[9],N[10]!==Q||N[11]!==r?(l=(0,o.jsxs)(w.l.Item,{onSelect:Q,children:[s,"Comments",r]}),N[10]=Q,N[11]=r,N[12]=l):l=N[12],N[13]!==Z||N[14]!==z?(d=z>0&&(0,o.jsxs)(w.l.Item,{onSelect:Z,children:[(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)(q.AlertIcon,{})}),"Alerts",(0,o.jsx)(w.l.TrailingVisual,{children:z})]}),N[13]=Z,N[14]=z,N[15]=d):d=N[15],N[16]!==l||N[17]!==d?(u=(0,o.jsxs)(w.l.Group,{children:[l,d]}),N[16]=l,N[17]=d,N[18]=u):u=N[18],N[19]===Symbol.for("react.memo_cache_sentinel")?(m=(0,o.jsx)(w.l.Divider,{}),N[19]=m):m=N[19],N[20]===Symbol.for("react.memo_cache_sentinel")?(h=(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)(q.GearIcon,{})}),N[20]=h):h=N[20],N[21]===Symbol.for("react.memo_cache_sentinel")?(f=(0,o.jsx)(eq.W.Anchor,{children:(0,o.jsxs)(w.l.Item,{children:[h,"Settings",(0,o.jsx)(w.l.TrailingVisual,{children:(0,o.jsx)(q.ChevronRightIcon,{})})]})}),N[21]=f):f=N[21],N[22]!==D||N[23]!==L||N[24]!==T?(p=(0,o.jsx)(eq.W.Overlay,{side:"outside-bottom",align:"end",children:(0,o.jsx)(w.l,{children:(0,o.jsx)(ns.Q,{reloadOnWhitespaceChange:!0,onUpdateWhitespace:T,defaultHideWhitespace:L,additionalPreferences:D})})}),N[22]=D,N[23]=L,N[24]=T,N[25]=p):p=N[25],N[26]!==M||N[27]!==p?(g=(0,o.jsx)(w.l.Group,{children:(0,o.jsxs)(eq.W,{open:M,onOpenChange:$,children:[f,p]})}),N[26]=M,N[27]=p,N[28]=g):g=N[28],N[29]!==g||N[30]!==u?(y=(0,o.jsx)(eq.W.Overlay,{align:"end",children:(0,o.jsxs)(w.l,{children:[u,m,g]})}),N[29]=g,N[30]=u,N[31]=y):y=N[31],N[32]!==P||N[33]!==y?(x=(0,o.jsxs)(eq.W,{open:P,onOpenChange:F,children:[a,y]}),N[32]=P,N[33]=y,N[34]=x):x=N[34],N[35]===Symbol.for("react.memo_cache_sentinel")?(b=()=>R(!1),N[35]=b):b=N[35],N[36]!==E||N[37]!==S||N[38]!==k.id||N[39]!==k.pathName?(j=(0,o.jsx)(th,{isOpen:E,pageLimits:S,pathName:k.pathName,pullRequestId:k.id,toggleSidesheetRef:B,onClose:b}),N[36]=E,N[37]=S,N[38]=k.id,N[39]=k.pathName,N[40]=j):j=N[40],N[41]!==A||N[42]!==W||N[43]!==S||N[44]!==z?(_=z>0&&(0,o.jsx)(tj,{annotations:W,isOpen:A,pageLimits:S,returnFocusRef:B,onClose:()=>O(!1)}),N[41]=A,N[42]=W,N[43]=S,N[44]=z,N[45]=_):_=N[45],N[46]!==x||N[47]!==j||N[48]!==_?(C=(0,o.jsxs)(o.Fragment,{children:[x,j,_]}),N[46]=x,N[47]=j,N[48]=_,N[49]=C):C=N[49],C}:function({pageLimits:e,pullRequest:t,hideWhitespace:n,onUpdateWhitespace:i,additionalPreferences:a}){let[s,r]=(0,v.useState)(!1),[l,d]=(0,v.useState)(!1),[c,u]=(0,v.useState)(!1),[m,h]=(0,v.useState)(!1),f=(0,v.useRef)(null),p=(0,I.wI)(),g=(0,I.Qb)(),{sendPullRequestAnalyticsEvent:y}=(0,V.q)(),x=p?Object.values(p):[],b=x.length,j=(0,v.useCallback)(()=>{y("comments_side_panel.open","COMMENTS_SIDE_PANEL_BUTTON"),eV(),r(!0),u(!1)},[y]),_=(0,v.useCallback)(()=>{y("alerts_side_panel.open","ALERTS_SIDE_PANEL_BUTTON"),eV(),d(!0),u(!1)},[y]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(eq.W,{open:c,onOpenChange:u,children:[(0,o.jsx)(eq.W.Anchor,{children:(0,o.jsx)(G.K,{ref:f,icon:q.KebabHorizontalIcon,variant:"default",size:"small","aria-label":"More options"})}),(0,o.jsx)(eq.W.Overlay,{align:"end",children:(0,o.jsxs)(w.l,{children:[(0,o.jsxs)(w.l.Group,{children:[(0,o.jsxs)(w.l.Item,{onSelect:j,children:[(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)(q.CommentDiscussionIcon,{})}),"Comments",g>0&&(0,o.jsx)(w.l.TrailingVisual,{children:g})]}),b>0&&(0,o.jsxs)(w.l.Item,{onSelect:_,children:[(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)(q.AlertIcon,{})}),"Alerts",(0,o.jsx)(w.l.TrailingVisual,{children:b})]})]}),(0,o.jsx)(w.l.Divider,{}),(0,o.jsx)(w.l.Group,{children:(0,o.jsxs)(eq.W,{open:m,onOpenChange:h,children:[(0,o.jsx)(eq.W.Anchor,{children:(0,o.jsxs)(w.l.Item,{children:[(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)(q.GearIcon,{})}),"Settings",(0,o.jsx)(w.l.TrailingVisual,{children:(0,o.jsx)(q.ChevronRightIcon,{})})]})}),(0,o.jsx)(eq.W.Overlay,{side:"outside-bottom",align:"end",children:(0,o.jsx)(w.l,{children:(0,o.jsx)(ns.Q,{reloadOnWhitespaceChange:!0,onUpdateWhitespace:i,defaultHideWhitespace:n,additionalPreferences:a})})})]})})]})})]}),(0,o.jsx)(th,{isOpen:s,pageLimits:e,pathName:t.pathName,pullRequestId:t.id,toggleSidesheetRef:f,onClose:()=>r(!1)}),b>0&&(0,o.jsx)(tj,{annotations:x,isOpen:l,pageLimits:e,returnFocusRef:f,onClose:()=>d(!1)})]})};try{iu.displayName||(iu.displayName="ToolbarMoreMenu")}catch{}let im=(0,d.Z6)()?function(e){let t,n,i,a,s=(0,c.c)(9),{changeGroupsPreferenceAvailable:r,showChangeGroups:l,onShowChangeGroupsChange:d}=e,{sendPullRequestAnalyticsEvent:u}=(0,V.q)();if(!r)return;s[0]!==d||s[1]!==u||s[2]!==l?(t=()=>{let e=!l;u(e?"change_group_preference.show":"change_group_preference.hide","CHANGE_GROUP_PREFERENCE_TOGGLE"),d(e)},s[0]=d,s[1]=u,s[2]=l,s[3]=t):t=s[3];let m=t;return s[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,o.jsx)(w.l.Divider,{}),s[4]=n):n=s[4],s[5]===Symbol.for("react.memo_cache_sentinel")?(i=(0,o.jsx)(w.l.Description,{variant:"block",children:"Organize changes into groups with Copilot"}),s[5]=i):i=s[5],s[6]!==m||s[7]!==l?(a=(0,o.jsxs)(o.Fragment,{children:[n,(0,o.jsx)(w.l.Group,{"aria-label":"Change Groups",selectionVariant:"single",children:(0,o.jsxs)(w.l.Item,{selected:l,onSelect:m,children:["Show changes by group",i]})})]}),s[6]=m,s[7]=l,s[8]=a):a=s[8],a}:function({changeGroupsPreferenceAvailable:e,showChangeGroups:t,onShowChangeGroupsChange:n}){let{sendPullRequestAnalyticsEvent:i}=(0,V.q)();if(e)return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(w.l.Divider,{}),(0,o.jsx)(w.l.Group,{"aria-label":"Change Groups",selectionVariant:"single",children:(0,o.jsxs)(w.l.Item,{selected:t,onSelect:()=>{let e=!t;i(e?"change_group_preference.show":"change_group_preference.hide","CHANGE_GROUP_PREFERENCE_TOGGLE"),n(e)},children:["Show changes by group",(0,o.jsx)(w.l.Description,{variant:"block",children:"Organize changes into groups with Copilot"})]})})]})};try{im.displayName||(im.displayName="ChangeGroupsPreferences")}catch{}var ih=n(3585);function ip(e){let t=new Map;if(!e)return t;for(let[n,i]of Object.entries(e))for(let e of Object.values(i))for(let i of e?.threads??[])for(let e of i.commentsData?.comments??[])void 0!==e.databaseId&&null!==e.databaseId&&t.set(e.databaseId,{comment:e,path:n});return t}function ig(e,t){if(!e||0===t.length)return[];let n=ip(e),i=[];for(let e of t){let t=n.get(e.commentDatabaseId);t&&i.push({commentDatabaseId:e.commentDatabaseId,suggestionIndex:e.suggestionIndex,path:t.path,bodyHTML:t.comment.bodyHTML})}return i}var iy=n(3252);function ix(e,t){if(!e||0===t.length)return[];let n=ip(e),i=[];for(let e of t){let t=n.get(e.commentDatabaseId);if(!t)continue;let{comment:a,path:s}=t,r=(0,iy.T)(a.body);r&&!(e.suggestionIndex>=r.length)&&i.push({threadId:String(e.commentDatabaseId),path:s,suggestion:r})}return i}var iv=n(88008);let ib=(0,d.Z6)()?function(e,t){let n,i,a,s=(0,c.c)(11),r=(0,ee.e)(X.uT.submitSuggestedChanges),l=(0,I.WK)(),o=(0,I.qL)(),{clearSuggestionBatch:d}=(0,I.xJ)();return s[0]!==r||s[1]!==o||s[2]!==l?(n=async e=>{let{currentOid:t,message:n}=e,i=ix(o,l.activeBatch);if(0===i.length)throw Error("No valid suggestions found in batch");let a=await (0,ed.Sr)(r,{method:"POST",headers:{Accept:"application/json"},body:{changes:i,currentOid:t,message:n}}),s=await (0,en.hp)(a);return(0,en.R)(a,s),s},s[0]=r,s[1]=o,s[2]=l,s[3]=n):n=s[3],s[4]!==d||s[5]!==t||s[6]!==e?(i=()=>{d(),(0,iv.hW)(e,t),ey.cg?.location.reload()},s[4]=d,s[5]=t,s[6]=e,s[7]=i):i=s[7],s[8]!==n||s[9]!==i?(a={mutationFn:n,onSuccess:i},s[8]=n,s[9]=i,s[10]=a):a=s[10],(0,et.n)(a)}:function(e,t){let n=(0,ee.e)(X.uT.submitSuggestedChanges),i=(0,I.WK)(),a=(0,I.qL)(),{clearSuggestionBatch:s}=(0,I.xJ)();return(0,et.n)({mutationFn:async({currentOid:e,message:t})=>{let s=ix(a,i.activeBatch);if(0===s.length)throw Error("No valid suggestions found in batch");let r=await (0,ed.Sr)(n,{method:"POST",headers:{Accept:"application/json"},body:{changes:s,currentOid:e,message:t}}),l=await (0,en.hp)(r);return(0,en.R)(r,l),l},onSuccess:()=>{s(),(0,iv.hW)(e,t),ey.cg?.location.reload()}})},ij=(0,d.Z6)()?function(){let e,t,n,i=(0,c.c)(8),a=(0,I.Kp)(),{updateChangeGroupPreference:s}=(0,I.wL)(),{updateDiffFilter:r}=(0,I.or)();return i[0]!==a?(e=async e=>{let{showChangeGroups:t}=e,n=`${a}/page_data/${X.uT.updateShowChangeGroupsPreference}`,i=await (0,en.q$)(n,{method:"POST",headers:{"Content-Type":"application/json"},body:{show_change_groups:t?"true":"false"}}),s=await (0,en.hp)(i);return(0,en.R)(i,s),s},i[0]=a,i[1]=e):e=i[1],i[2]!==s||i[3]!==r?(t=e=>{let{showChangeGroups:t}=e;s(t),t||r({activeChangeGroupId:void 0})},i[2]=s,i[3]=r,i[4]=t):t=i[4],i[5]!==e||i[6]!==t?(n={mutationFn:e,onMutate:t},i[5]=e,i[6]=t,i[7]=n):n=i[7],(0,et.n)(n)}:function(){let e=(0,I.Kp)(),{updateChangeGroupPreference:t}=(0,I.wL)(),{updateDiffFilter:n}=(0,I.or)();return(0,et.n)({mutationFn:async({showChangeGroups:t})=>{let n=`${e}/page_data/${X.uT.updateShowChangeGroupsPreference}`,i=await (0,en.q$)(n,{method:"POST",headers:{"Content-Type":"application/json"},body:{show_change_groups:t?"true":"false"}}),a=await (0,en.hp)(i);return(0,en.R)(i,a),a},onMutate:({showChangeGroups:e})=>{t(e),e||n({activeChangeGroupId:void 0})}})};var iw=n(39837);let i_=(0,d.Z6)()?function(e){let t,n,i,a,s,r=(0,c.c)(13),{bodyHtml:l,isLoading:d,onClose:u}=e,m=(0,v.useRef)(null),h=(0,v.useRef)(null);r[0]!==l?(t=l.includes("No description provided"),r[0]=l,r[1]=t):t=r[1];let f=t;return r[2]===Symbol.for("react.memo_cache_sentinel")?(n={narrow:"fullscreen",regular:"right",wide:"right"},r[2]=n):n=r[2],r[3]!==u?(i=e=>{let{dialogLabelId:t}=e;return(0,o.jsx)(g.l.Header,{className:"p-3",children:(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-between flex-items-center width-full",children:[(0,o.jsx)(g.l.Title,{id:t,children:"Overview"}),(0,o.jsx)(G.K,{ref:m,"aria-label":"Close overview panel",icon:q.XIcon,variant:"invisible",onClick:u})]})})},r[3]=u,r[4]=i):i=r[4],r[5]!==l||r[6]!==f||r[7]!==d?(a=(0,o.jsx)("div",{className:"p-4",children:d?(0,o.jsx)("div",{className:"d-flex flex-justify-center",children:(0,o.jsx)(R.A,{})}):(0,o.jsx)("div",{className:f?"d-flex flex-justify-start":"d-flex flex-justify-center",children:(0,o.jsx)(iw.A,{verifiedHTML:l})})}),r[5]=l,r[6]=f,r[7]=d,r[8]=a):a=r[8],r[9]!==u||r[10]!==i||r[11]!==a?(s=(0,o.jsx)(g.l,{initialFocusRef:m,position:n,returnFocusRef:h,onClose:u,renderHeader:i,children:a}),r[9]=u,r[10]=i,r[11]=a,r[12]=s):s=r[12],s}:function({bodyHtml:e,isLoading:t,onClose:n}){let i=(0,v.useRef)(null),a=(0,v.useRef)(null),s=e.includes("No description provided");return(0,o.jsx)(g.l,{initialFocusRef:i,position:{narrow:"fullscreen",regular:"right",wide:"right"},returnFocusRef:a,onClose:n,renderHeader:({dialogLabelId:e})=>(0,o.jsx)(g.l.Header,{className:"p-3",children:(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-between flex-items-center width-full",children:[(0,o.jsx)(g.l.Title,{id:e,children:"Overview"}),(0,o.jsx)(G.K,{ref:i,"aria-label":"Close overview panel",icon:q.XIcon,variant:"invisible",onClick:n})]})}),children:(0,o.jsx)("div",{className:"p-4",children:t?(0,o.jsx)("div",{className:"d-flex flex-justify-center",children:(0,o.jsx)(R.A,{})}):(0,o.jsx)("div",{className:s?"d-flex flex-justify-start":"d-flex flex-justify-center",children:(0,o.jsx)(iw.A,{verifiedHTML:e})})})})};try{i_.displayName||(i_.displayName="OverviewSidePanel")}catch{}let iC=(0,d.Z6)()?function(){let e,t=(0,c.c)(2),n=(0,ee.e)(X.uT.description);return t[0]!==n?(e={queryKey:[X.uT.description,n],queryFn:async()=>{let e=await (0,ed.QJ)(n);if(!e.ok)throw Error(`HTTP ${e.status}`);return await e.json()},staleTime:1/0},t[0]=n,t[1]=e):e=t[1],(0,eo.I)(e)}:function(){let e=(0,ee.e)(X.uT.description);return(0,eo.I)({queryKey:[X.uT.description,e],queryFn:async()=>{let t=await (0,ed.QJ)(e);if(!t.ok)throw Error(`HTTP ${t.status}`);return await t.json()},staleTime:1/0})},iN=(0,d.Z6)()?function(e){let t,n=(0,c.c)(1),{refetch:i}=iC();n[0]===Symbol.for("react.memo_cache_sentinel")?(t={body_updated:!0},n[0]=t):t=n[0],(0,nr.og)(e,i,t)}:function(e){let{refetch:t}=iC();(0,nr.og)(e,t,{body_updated:!0})},iS=(0,d.Z6)()?function(e){let t,n,i,a,s=(0,c.c)(10),{aliveChannel:r}=e,[l,d]=(0,v.useState)(!1),u=(0,v.useRef)(null),{sendPullRequestAnalyticsEvent:m}=(0,V.q)(),{data:h,isLoading:f}=iC();iN(r);let p=h?.bodyHtml||'<p class="text-italic">No description provided.</p>';return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)(G.K,{inactive:!0,"aria-label":"The overview side panel cannot currently be opened.",icon:q.InfoIcon,size:"small",variant:"invisible"}),s[0]=t):t=s[0],s[1]!==m?(n=(0,o.jsx)(G.K,{ref:u,"aria-label":"Open overview side panel",icon:q.InfoIcon,size:"small",onClick:()=>{m("overview_side_panel.open","OVERVIEW_SIDE_PANEL_BUTTON"),eV(),d(!0)}}),s[1]=m,s[2]=n):n=s[2],s[3]!==p||s[4]!==f||s[5]!==l?(i=l&&(0,o.jsx)(i_,{bodyHtml:p,isLoading:f,onClose:()=>d(!1)}),s[3]=p,s[4]=f,s[5]=l,s[6]=i):i=s[6],s[7]!==n||s[8]!==i?(a=(0,o.jsx)("div",{className:"d-flex flex-items-center",children:(0,o.jsxs)(D.t,{fallback:t,children:[n,i]})}),s[7]=n,s[8]=i,s[9]=a):a=s[9],a}:function({aliveChannel:e}){let[t,n]=(0,v.useState)(!1),i=(0,v.useRef)(null),{sendPullRequestAnalyticsEvent:a}=(0,V.q)(),{data:s,isLoading:r}=iC();iN(e);let l=s?.bodyHtml||'<p class="text-italic">No description provided.</p>';return(0,o.jsx)("div",{className:"d-flex flex-items-center",children:(0,o.jsxs)(D.t,{fallback:(0,o.jsx)(G.K,{inactive:!0,"aria-label":"The overview side panel cannot currently be opened.",icon:q.InfoIcon,size:"small",variant:"invisible"}),children:[(0,o.jsx)(G.K,{ref:i,"aria-label":"Open overview side panel",icon:q.InfoIcon,size:"small",onClick:()=>{a("overview_side_panel.open","OVERVIEW_SIDE_PANEL_BUTTON"),eV(),n(!0)}}),t&&(0,o.jsx)(i_,{bodyHtml:l,isLoading:r,onClose:()=>n(!1)})]})})};try{iS.displayName||(iS.displayName="OpenOverviewSidePanelButton")}catch{}let iI=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f=(0,c.c)(24);f[0]!==e?({aliveChannel:t,repository:s,pullRequest:i,bannersData:n,urls:r,user:l,userNotices:d,...a}=e,f[0]=e,f[1]=t,f[2]=n,f[3]=i,f[4]=a,f[5]=s,f[6]=r,f[7]=l,f[8]=d):(t=f[1],n=f[2],i=f[3],a=f[4],s=f[5],r=f[6],l=f[7],d=f[8]);let{data:p}=(0,n1.W)(),{pullRequest:g}=p;f[9]!==t||f[10]!==n||f[11]!==i||f[12]!==s||f[13]!==r||f[14]!==l?(u={aliveChannel:t,repository:s,pullRequest:i,bannersData:n,urls:r,user:l},f[9]=t,f[10]=n,f[11]=i,f[12]=s,f[13]=r,f[14]=l,f[15]=u):u=f[15],(0,n1.W)(u),(0,n2.F)(t),f[16]!==i||f[17]!==g?(m={...i,...g},f[16]=i,f[17]=g,f[18]=m):m=f[18];let y=m;return f[19]!==a||f[20]!==s||f[21]!==y||f[22]!==d?(h=(0,o.jsx)(ik,{repository:s,pullRequest:y,userNotices:d,...a}),f[19]=a,f[20]=s,f[21]=y,f[22]=d,f[23]=h):h=f[23],h}:function({aliveChannel:e,repository:t,pullRequest:n,bannersData:i,urls:a,user:s,userNotices:r,...l}){let{data:{pullRequest:d}}=(0,n1.W)();(0,n1.W)({aliveChannel:e,repository:t,pullRequest:n,bannersData:i,urls:a,user:s}),(0,n2.F)(e);let c={...n,...d};return(0,o.jsx)(ik,{repository:t,pullRequest:c,userNotices:r,...l})},ik=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f,p,g,y,b,j,w,C,N,S,k,L,T,D,E,R,A,P,F,M,$,B,V,U,q,G,H,K,W,z,Z,J=(0,c.c)(149),{changeGroupsPreferenceAvailable:Y,commits:X,currentUserLogin:ee,fileFilter:et,isFileTreeExpanded:en,lastReviewOid:ei,pageLimits:ea,pullRequest:es,repository:er,shouldShowViewedFilesCount:el,totalFilesCount:eo,treeToggleElement:ed,userNotices:ec}=e,eu=(0,no.u)("batch_suggested_changes"),em=(0,no.u)("pull_request_overview_panel"),{mutate:eh}=n3(),{clearSuggestionBatch:ef,removeSuggestionFromBatch:ep}=(0,I.xJ)(),{mutate:eg}=ib(es.pathName,es.comparison.headOid),{mutate:ey}=ij(),ex=(0,I.WA)(),ev=es.pathName,{hideWhitespace:eb,fullDiff:ej}=(0,I.L3)(),[ew,e_]=(0,v.useState)(!1),eC=el||!en,[eN,eS]=(0,v.useState)(!1),eI=(0,I.j5)(),ek=(0,I.RH)(),eL=(0,I.WK)(),eT=(0,I.qL)(),[eD,eE]=(0,v.useState)(!1),eR=(0,I.Kp)(),eA=(0,I.L3)(),eO=ig(eT,eL.activeBatch),eP=eO.length;J[0]!==eh?(t=e=>{eh({hideWhitespace:e})},J[0]=eh,J[1]=t):t=J[1];let eF=t;J[2]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{e[0]&&e_(!e[0].isIntersecting)},J[2]=n):n=J[2];let[eM,e$]=(0,nV.B)(n);J[3]!==eA.fullDiff.headOid||J[4]!==eR||J[5]!==ep||J[6]!==eL.activeBatch?(i=e=>{ep(e),(0,iv.CE)(eR,eA.fullDiff.headOid,eL.activeBatch.filter(t=>t.commentDatabaseId!==e.commentDatabaseId||t.suggestionIndex!==e.suggestionIndex))},J[3]=eA.fullDiff.headOid,J[4]=eR,J[5]=ep,J[6]=eL.activeBatch,J[7]=i):i=J[7];let eV=i;J[8]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{eE(!0)},J[8]=a):a=J[8];let eU=a;J[9]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{eE(!1)},J[9]=s):s=J[9];let eq=s;J[10]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{eS(!0)},J[10]=r):r=J[10];let eG=r;J[11]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{eS(!1)},J[11]=l):l=J[11];let eH=l;J[12]!==ef||J[13]!==eA.fullDiff.headOid||J[14]!==eq||J[15]!==eR?(d=()=>{ef(),(0,iv.hW)(eR,eA.fullDiff.headOid),eq(),eS(!1)},J[12]=ef,J[13]=eA.fullDiff.headOid,J[14]=eq,J[15]=eR,J[16]=d):d=J[16];let eK=d;J[17]!==eg||J[18]!==ej.headOid||J[19]!==eq?(u=(e,t,n)=>{eg({message:e,currentOid:ej.headOid},{onSuccess:()=>{eq(),n()},onError:e=>{t(e)}})},J[17]=eg,J[18]=ej.headOid,J[19]=eq,J[20]=u):u=J[20];let eW=u;J[21]!==ey?(m=e=>{ey({showChangeGroups:e})},J[21]=ey,J[22]=m):m=J[22];let ez=m,eQ=eO.map(iL);J[23]===Symbol.for("react.memo_cache_sentinel")?(h={visibility:"hidden",height:"1px"},J[23]=h):h=J[23],J[24]!==eM||J[25]!==e$?(f=(0,o.jsx)(nU.X,{sx:h,onObserve:eM,onUnobserve:e$}),J[24]=eM,J[25]=e$,J[26]=f):f=J[26];let eZ=ew&&nG;J[27]!==eZ?(p=(0,x.$)(nB.A.stickyHeader,nY,eZ),J[27]=eZ,J[28]=p):p=J[28],J[29]===Symbol.for("react.memo_cache_sentinel")?(g=(0,o.jsx)("h2",{className:"sr-only",children:"Pull Request Toolbar"}),J[29]=g):g=J[29],J[30]!==ed?(y=(0,o.jsx)("div",{children:ed}),J[30]=ed,J[31]=y):y=J[31],J[32]!==es.state?(b=(0,o.jsx)("div",{className:nH,children:(0,o.jsx)(nq.u,{state:es.state})}),J[32]=es.state,J[33]=b):b=J[33],J[34]!==X||J[35]!==ei||J[36]!==es.number||J[37]!==er.name||J[38]!==er.ownerLogin?(j=(0,o.jsx)("div",{className:nK,children:(0,o.jsx)(nP,{commits:X,lastReviewOid:ei,ownerLogin:er.ownerLogin,pullRequestNumber:es.number,repositoryName:er.name})}),J[34]=X,J[35]=ei,J[36]=es.number,J[37]=er.name,J[38]=er.ownerLogin,J[39]=j):j=J[39],J[40]===Symbol.for("react.memo_cache_sentinel")?(w=(0,x.$)(nH,"min-width-0"),C=(0,x.$)("d-flex mb-n1",nW),J[40]=w,J[41]=C):(w=J[40],C=J[41]);let eJ=es.title;J[42]===Symbol.for("react.memo_cache_sentinel")?(N=(0,x.$)("f5 text-bold overflow-hidden no-wrap",nz),J[42]=N):N=J[42],J[43]!==es.title?(S=(0,o.jsx)("a",{href:"#top",className:"d-flex overflow-hidden fgColor-default",children:(0,o.jsx)("bdi",{className:N,children:es.title})}),J[43]=es.title,J[44]=S):S=J[44],J[45]!==es.title||J[46]!==S?(k=(0,o.jsx)(O.m,{type:"label",direction:"s",text:eJ,children:S}),J[45]=es.title,J[46]=S,J[47]=k):k=J[47],J[48]!==es.number?(L=(0,o.jsxs)("span",{className:"f5 text-normal pl-2 fgColor-muted d-inline",children:["#",es.number]}),J[48]=es.number,J[49]=L):L=J[49],J[50]!==k||J[51]!==L?(T=(0,o.jsxs)("div",{className:C,children:[k,L]}),J[50]=k,J[51]=L,J[52]=T):T=J[52],J[53]!==X||J[54]!==ei||J[55]!==es.number||J[56]!==er.name||J[57]!==er.ownerLogin?(D=(0,o.jsx)(nP,{commits:X,lastReviewOid:ei,ownerLogin:er.ownerLogin,pullRequestNumber:es.number,repositoryName:er.name,variant:"condensed"}),J[53]=X,J[54]=ei,J[55]=es.number,J[56]=er.name,J[57]=er.ownerLogin,J[58]=D):D=J[58],J[59]===Symbol.for("react.memo_cache_sentinel")?(E=(0,x.$)("d-none d-lg-flex flex-items-center min-width-0",nW),J[59]=E):E=J[59],J[60]===Symbol.for("react.memo_cache_sentinel")?(R=(0,o.jsx)("div",{className:"border-left mx-1 pr-1 d-block",style:{width:"1px",height:"16px"}}),J[60]=R):R=J[60],J[61]!==es.author||J[62]!==es.baseBranch||J[63]!==es.commitsCount||J[64]!==es.headBranch||J[65]!==es.headRepositoryName||J[66]!==es.headRepositoryOwnerLogin||J[67]!==es.id||J[68]!==es.isInAdvisoryRepo||J[69]!==es.mergedBy||J[70]!==es.mergedByName||J[71]!==es.number||J[72]!==es.state||J[73]!==er.id||J[74]!==er.name||J[75]!==er.ownerLogin?(A=(0,o.jsxs)("div",{className:E,children:[R,(0,o.jsx)(n0.O,{author:es.author,baseBranch:es.baseBranch,baseRepositoryOwnerLogin:er.ownerLogin,baseRepositoryName:er.name,commitsCount:es.commitsCount,headBranch:es.headBranch,headRepositoryOwnerLogin:es.headRepositoryOwnerLogin,headRepositoryName:es.headRepositoryName,isInAdvisoryRepo:es.isInAdvisoryRepo,mergedBy:es.mergedBy,mergedByName:es.mergedByName,state:es.state,pullRequestId:es.id,pullRequestNumber:es.number,repositoryId:er.id})]}),J[61]=es.author,J[62]=es.baseBranch,J[63]=es.commitsCount,J[64]=es.headBranch,J[65]=es.headRepositoryName,J[66]=es.headRepositoryOwnerLogin,J[67]=es.id,J[68]=es.isInAdvisoryRepo,J[69]=es.mergedBy,J[70]=es.mergedByName,J[71]=es.number,J[72]=es.state,J[73]=er.id,J[74]=er.name,J[75]=er.ownerLogin,J[76]=A):A=J[76],J[77]!==D||J[78]!==A?(P=(0,o.jsxs)("div",{className:"f6 text-normal d-flex flex-items-center ml-n2",children:[D,A]}),J[77]=D,J[78]=A,J[79]=P):P=J[79],J[80]!==T||J[81]!==P?(F=(0,o.jsxs)(tS.B,{direction:"vertical",gap:"none",className:w,children:[T,P]}),J[80]=T,J[81]=P,J[82]=F):F=J[82],J[83]!==y||J[84]!==b||J[85]!==j||J[86]!==F?(M=(0,o.jsxs)(tS.B,{direction:"horizontal",gap:"condensed",align:"center",className:"min-width-0",children:[y,b,j,F]}),J[83]=y,J[84]=b,J[85]=j,J[86]=F,J[87]=M):M=J[87],J[88]!==ev||J[89]!==es.aliveChannel?($=(0,o.jsx)(nu,{aliveChannel:es.aliveChannel,pathName:ev}),J[88]=ev,J[89]=es.aliveChannel,J[90]=$):$=J[90],J[91]!==el||J[92]!==eo?(B=el&&(0,o.jsx)(eB,{totalFilesCount:eo}),J[91]=el,J[92]=eo,J[93]=B):B=J[93];let eY=!en&&et;return J[94]!==eI||J[95]!==eo||J[96]!==ec?(V=eI&&eo>1&&(0,o.jsx)("div",{className:nZ,children:(0,o.jsx)(ic,{userNotices:ec})}),J[94]=eI,J[95]=eo,J[96]=ec,J[97]=V):V=J[97],J[98]!==B||J[99]!==eY||J[100]!==V?(U=(0,o.jsxs)("div",{className:nQ,children:[B,eY,V]}),J[98]=B,J[99]=eY,J[100]=V,J[101]=U):U=J[101],J[102]!==eC?(q=eC&&(0,o.jsx)("div",{className:nJ,"data-testid":"file-controls-divider"}),J[102]=eC,J[103]=q):q=J[103],J[104]!==eu||J[105]!==Y||J[106]!==ee||J[107]!==eU||J[108]!==eG||J[109]!==eb||J[110]!==en||J[111]!==ek||J[112]!==ez||J[113]!==eF||J[114]!==em||J[115]!==ea||J[116]!==es||J[117]!==er||J[118]!==ex||J[119]!==eP||J[120]!==ec?(G=ek&&eu?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Q.Q,{variant:"danger",size:"small",onClick:eG,children:"Discard batch"}),(0,o.jsxs)(Q.Q,{variant:"primary",size:"small",onClick:eU,children:["Commit suggestions ",(0,o.jsx)(_.A,{className:"ml-1 color-fg-inherit",children:eP})]})]}):(0,o.jsxs)(o.Fragment,{children:[em&&(0,o.jsx)(iS,{aliveChannel:es.aliveChannel}),(0,o.jsx)("div",{className:"d-none d-sm-flex",children:(0,o.jsx)(tp,{pageLimits:ea,pullRequest:es,isFileTreeExpanded:en})}),(0,o.jsx)(t_,{className:"d-none d-sm-flex",pageLimits:ea,isFileTreeExpanded:en}),ee&&(0,o.jsx)(nt,{currentUserLogin:ee,pullRequest:es,repository:er}),(0,o.jsx)("div",{className:"d-none d-sm-flex",children:(0,o.jsx)(ns.G,{invisible:!1,reloadOnWhitespaceChange:!0,onUpdateWhitespace:eF,defaultHideWhitespace:eb,small:!0,userNotices:ec,additionalPreferences:(0,o.jsx)(im,{changeGroupsPreferenceAvailable:Y,showChangeGroups:ex,onShowChangeGroupsChange:ez})})}),(0,o.jsx)("div",{className:"d-flex d-sm-none",children:(0,o.jsx)(iu,{pageLimits:ea,pullRequest:es,hideWhitespace:eb,onUpdateWhitespace:eF,additionalPreferences:(0,o.jsx)(im,{changeGroupsPreferenceAvailable:Y,showChangeGroups:ex,onShowChangeGroupsChange:ez})})})]}),J[104]=eu,J[105]=Y,J[106]=ee,J[107]=eU,J[108]=eG,J[109]=eb,J[110]=en,J[111]=ek,J[112]=ez,J[113]=eF,J[114]=em,J[115]=ea,J[116]=es,J[117]=er,J[118]=ex,J[119]=eP,J[120]=ec,J[121]=G):G=J[121],J[122]!==$||J[123]!==U||J[124]!==q||J[125]!==G?(H=(0,o.jsxs)(tS.B,{direction:"horizontal",align:"center",children:[$,U,q,G]}),J[122]=$,J[123]=U,J[124]=q,J[125]=G,J[126]=H):H=J[126],J[127]!==p||J[128]!==M||J[129]!==H?(K=(0,o.jsxs)(tS.B,{as:"section",direction:"horizontal",justify:"space-between",gap:"condensed",align:"center",className:p,children:[g,M,H]}),J[127]=p,J[128]=M,J[129]=H,J[130]=K):K=J[130],J[131]!==eW||J[132]!==eq||J[133]!==eK||J[134]!==eV||J[135]!==eD||J[136]!==eL.activeBatch.length||J[137]!==eQ?(W=eD&&eQ.length>0&&(0,o.jsx)(ih.$,{authorLogins:[],batchSize:eL.activeBatch.length,onClose:eq,onCommit:eW,defaultCommitMessage:"Apply suggestions from code review",suggestions:eQ,onRemoveSuggestion:eV,onDiscardBatch:eK}),J[131]=eW,J[132]=eq,J[133]=eK,J[134]=eV,J[135]=eD,J[136]=eL.activeBatch.length,J[137]=eQ,J[138]=W):W=J[138],J[139]!==eK||J[140]!==eH||J[141]!==eN||J[142]!==eP?(z=(0,o.jsx)(nf.G,{isOpen:eN,onConfirm:eK,onCancel:eH,suggestionsCount:eP}),J[139]=eK,J[140]=eH,J[141]=eN,J[142]=eP,J[143]=z):z=J[143],J[144]!==f||J[145]!==K||J[146]!==W||J[147]!==z?(Z=(0,o.jsxs)(o.Fragment,{children:[f,K,W,z]}),J[144]=f,J[145]=K,J[146]=W,J[147]=z,J[148]=Z):Z=J[148],Z}:function({changeGroupsPreferenceAvailable:e,commits:t,currentUserLogin:n,fileFilter:i,isFileTreeExpanded:a,lastReviewOid:s,pageLimits:r,pullRequest:l,repository:d,shouldShowViewedFilesCount:c,totalFilesCount:u,treeToggleElement:m,userNotices:h}){let f=(0,no.u)("batch_suggested_changes"),p=(0,no.u)("pull_request_overview_panel"),{mutate:g}=n3(),{clearSuggestionBatch:y,removeSuggestionFromBatch:b}=(0,I.xJ)(),{mutate:j}=ib(l.pathName,l.comparison.headOid),{mutate:w}=ij(),C=(0,I.WA)(),N=l.pathName,{hideWhitespace:S,fullDiff:k}=(0,I.L3)(),[L,T]=(0,v.useState)(!1),D=c||!a,[E,R]=(0,v.useState)(!1),A=(0,I.j5)(),P=(0,I.RH)(),F=(0,I.WK)(),M=(0,I.qL)(),[$,B]=(0,v.useState)(!1),V=(0,I.Kp)(),U=(0,I.L3)(),q=ig(M,F.activeBatch),G=q.length,H=e=>{g({hideWhitespace:e})},[K,W]=(0,nV.B)(e=>{e[0]&&T(!e[0].isIntersecting)}),z=(0,v.useCallback)(e=>{b(e),(0,iv.CE)(V,U.fullDiff.headOid,F.activeBatch.filter(t=>t.commentDatabaseId!==e.commentDatabaseId||t.suggestionIndex!==e.suggestionIndex))},[b,F,V,U]),Z=(0,v.useCallback)(()=>{B(!0)},[]),J=(0,v.useCallback)(()=>{B(!1)},[]),Y=(0,v.useCallback)(()=>{R(!0)},[]),X=(0,v.useCallback)(()=>{R(!1)},[]),ee=(0,v.useCallback)(()=>{y(),(0,iv.hW)(V,U.fullDiff.headOid),J(),R(!1)},[y,V,U,J]),et=(0,v.useCallback)((e,t,n)=>{j({message:e,currentOid:k.headOid},{onSuccess:()=>{J(),n()},onError:e=>{t(e)}})},[k,j,J]),en=e=>{w({showChangeGroups:e})},ei=q.map(e=>({commentDatabaseId:e.commentDatabaseId,suggestionIndex:e.suggestionIndex,path:e.path,bodyHTML:e.bodyHTML}));return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(nU.X,{sx:{visibility:"hidden",height:"1px"},onObserve:K,onUnobserve:W}),(0,o.jsxs)(tS.B,{as:"section",direction:"horizontal",justify:"space-between",gap:"condensed",align:"center",className:(0,x.$)(nB.A.stickyHeader,nY,L&&nG),children:[(0,o.jsx)("h2",{className:"sr-only",children:"Pull Request Toolbar"}),(0,o.jsxs)(tS.B,{direction:"horizontal",gap:"condensed",align:"center",className:"min-width-0",children:[(0,o.jsx)("div",{children:m}),(0,o.jsx)("div",{className:nH,children:(0,o.jsx)(nq.u,{state:l.state})}),(0,o.jsx)("div",{className:nK,children:(0,o.jsx)(nP,{commits:t,lastReviewOid:s,ownerLogin:d.ownerLogin,pullRequestNumber:l.number,repositoryName:d.name})}),(0,o.jsxs)(tS.B,{direction:"vertical",gap:"none",className:(0,x.$)(nH,"min-width-0"),children:[(0,o.jsxs)("div",{className:(0,x.$)("d-flex mb-n1",nW),children:[(0,o.jsx)(O.m,{type:"label",direction:"s",text:l.title,children:(0,o.jsx)("a",{href:"#top",className:"d-flex overflow-hidden fgColor-default",children:(0,o.jsx)("bdi",{className:(0,x.$)("f5 text-bold overflow-hidden no-wrap",nz),children:l.title})})}),(0,o.jsxs)("span",{className:"f5 text-normal pl-2 fgColor-muted d-inline",children:["#",l.number]})]}),(0,o.jsxs)("div",{className:"f6 text-normal d-flex flex-items-center ml-n2",children:[(0,o.jsx)(nP,{commits:t,lastReviewOid:s,ownerLogin:d.ownerLogin,pullRequestNumber:l.number,repositoryName:d.name,variant:"condensed"}),(0,o.jsxs)("div",{className:(0,x.$)("d-none d-lg-flex flex-items-center min-width-0",nW),children:[(0,o.jsx)("div",{className:"border-left mx-1 pr-1 d-block",style:{width:"1px",height:"16px"}}),(0,o.jsx)(n0.O,{author:l.author,baseBranch:l.baseBranch,baseRepositoryOwnerLogin:d.ownerLogin,baseRepositoryName:d.name,commitsCount:l.commitsCount,headBranch:l.headBranch,headRepositoryOwnerLogin:l.headRepositoryOwnerLogin,headRepositoryName:l.headRepositoryName,isInAdvisoryRepo:l.isInAdvisoryRepo,mergedBy:l.mergedBy,mergedByName:l.mergedByName,state:l.state,pullRequestId:l.id,pullRequestNumber:l.number,repositoryId:d.id})]})]})]})]}),(0,o.jsxs)(tS.B,{direction:"horizontal",align:"center",children:[(0,o.jsx)(nu,{aliveChannel:l.aliveChannel,pathName:N}),(0,o.jsxs)("div",{className:nQ,children:[c&&(0,o.jsx)(eB,{totalFilesCount:u}),!a&&i,A&&u>1&&(0,o.jsx)("div",{className:nZ,children:(0,o.jsx)(ic,{userNotices:h})})]}),D&&(0,o.jsx)("div",{className:nJ,"data-testid":"file-controls-divider"}),P&&f?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Q.Q,{variant:"danger",size:"small",onClick:Y,children:"Discard batch"}),(0,o.jsxs)(Q.Q,{variant:"primary",size:"small",onClick:Z,children:["Commit suggestions ",(0,o.jsx)(_.A,{className:"ml-1 color-fg-inherit",children:G})]})]}):(0,o.jsxs)(o.Fragment,{children:[p&&(0,o.jsx)(iS,{aliveChannel:l.aliveChannel}),(0,o.jsx)("div",{className:"d-none d-sm-flex",children:(0,o.jsx)(tp,{pageLimits:r,pullRequest:l,isFileTreeExpanded:a})}),(0,o.jsx)(t_,{className:"d-none d-sm-flex",pageLimits:r,isFileTreeExpanded:a}),n&&(0,o.jsx)(nt,{currentUserLogin:n,pullRequest:l,repository:d}),(0,o.jsx)("div",{className:"d-none d-sm-flex",children:(0,o.jsx)(ns.G,{invisible:!1,reloadOnWhitespaceChange:!0,onUpdateWhitespace:H,defaultHideWhitespace:S,small:!0,userNotices:h,additionalPreferences:(0,o.jsx)(im,{changeGroupsPreferenceAvailable:e,showChangeGroups:C,onShowChangeGroupsChange:en})})}),(0,o.jsx)("div",{className:"d-flex d-sm-none",children:(0,o.jsx)(iu,{pageLimits:r,pullRequest:l,hideWhitespace:S,onUpdateWhitespace:H,additionalPreferences:(0,o.jsx)(im,{changeGroupsPreferenceAvailable:e,showChangeGroups:C,onShowChangeGroupsChange:en})})})]})]})]}),$&&ei.length>0&&(0,o.jsx)(ih.$,{authorLogins:[],batchSize:F.activeBatch.length,onClose:J,onCommit:et,defaultCommitMessage:"Apply suggestions from code review",suggestions:ei,onRemoveSuggestion:z,onDiscardBatch:ee}),(0,o.jsx)(nf.G,{isOpen:E,onConfirm:ee,onCancel:X,suggestionsCount:G})]})};function iL(e){return{commentDatabaseId:e.commentDatabaseId,suggestionIndex:e.suggestionIndex,path:e.path,bodyHTML:e.bodyHTML}}try{iI.displayName||(iI.displayName="LivePullRequestFilesToolbar")}catch{}try{ik.displayName||(ik.displayName="PullRequestFilesToolbar")}catch{}function iT(e,t){(0,v.useMemo)(()=>{if(e&&t){for(let n of t)if(n.markersMap)for(let t in n.markersMap){let i=n.markersMap[t];if(i?.threads)for(let n of i.threads){let i=function(e,t){if("FILE"===e)return;let n=e[0];if(!iE(n))throw Error(`Invalid diff side character: ${n}`);let i=Number(e.slice(1)),a=-1,s="R";if(t.start){a=parseInt(t.start.slice(1));let e=t.start[0];iE(e)&&(s=e)}else a=i,s=n;return{endLine:i,endDiffSide:iD[n],startLine:a,startDiffSide:iD[s],isOutdated:!!t.outdatedReason}}(t,n),a=e.threads[Number(n.id)];if(a&&i){let{isOutdated:e,...t}=i;a.positioning=i,a.subject=t}}}}},[t,e])}let iD={L:"LEFT",R:"RIGHT"};function iE(e){return"L"===e||"R"===e}let iR="DiffComparisonViewer-module__Container--nndHZ",iA="DiffComparisonViewer-module__HiddenPane--pMKU7",iO="DiffComparisonViewer-module__PaneContain--PQMad",iP="DiffComparisonViewer-module__PaneOverflowVisible--fmHF4",iF="DiffComparisonViewer-module__RegularTreeToggle--_Zt7h",iM="DiffComparisonViewer-module__MobileTreeToggle--lAOrS",i$="DiffComparisonViewer-module__Pane--FbQgQ",iB="DiffComparisonViewer-module__WideExpanded--a6hBe",iV="DiffComparisonViewer-module__WideCollapsed--nAjUj",iU="DiffComparisonViewer-module__CompactHidden--NQ1CL",iq="DiffComparisonViewer-module__CompactOverlay--ZnZLv",iG="DiffComparisonViewer-module__CompactInline--jndVg",iH="DiffComparisonViewer-module__Content--Cv2ab",iK="DiffComparisonViewer-module__SkeletonWrapper--eZhhq",iW="DiffComparisonViewer-module__SkeletonIconWrapper--e2YmQ";var iz=n(68226),iQ=n(24798),iZ=n(50129);function iJ({basePath:e,selectedRange:t}){return[X.uT.baseComparisonInfo,e,`baseOid:${t.baseOid}`,`headOid:${t.headOid}`]}let iY=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l=(0,c.c)(17),{basePath:o,headSha:d,baseSha:u,shouldFetch:m}=e;if(l[0]!==o||l[1]!==u||l[2]!==d){let e=new URLSearchParams;u===d?e.append("range",d??""):u&&d?e.append("range",`${u}..${d}`):d&&e.append("range",d),t=o,n=X.uT.baseComparisonInfo,i=e.toString(),l[0]=o,l[1]=u,l[2]=d,l[3]=t,l[4]=n,l[5]=i}else t=l[3],n=l[4],i=l[5];let h=`${t}/page_data/${n}?${i}`,f=u??"base-sha-not-provided";l[6]!==o||l[7]!==d||l[8]!==f?(a=iJ({basePath:o,selectedRange:{baseOid:f,headOid:d}}),l[6]=o,l[7]=d,l[8]=f,l[9]=a):a=l[9];let p=a;return l[10]!==h||l[11]!==d?(s=async()=>{if(!d)return;let e=await (0,ed.QJ)(h);if(!e.ok)throw Error(`HTTP ${e.status}`);return await e.json()??void 0},l[10]=h,l[11]=d,l[12]=s):s=l[12],l[13]!==p||l[14]!==m||l[15]!==s?(r={queryKey:p,queryFn:s,staleTime:1/0,enabled:m},l[13]=p,l[14]=m,l[15]=s,l[16]=r):r=l[16],(0,eo.I)(r)}:function({basePath:e,headSha:t,baseSha:n,shouldFetch:i}){let a=new URLSearchParams;n===t?a.append("range",t??""):n&&t?a.append("range",`${n}..${t}`):t&&a.append("range",t);let s=`${e}/page_data/${X.uT.baseComparisonInfo}?${a.toString()}`,r=iJ({basePath:e,selectedRange:{baseOid:n??"base-sha-not-provided",headOid:t}});return(0,eo.I)({queryKey:r,queryFn:async()=>{if(!t)return;let e=await (0,ed.QJ)(s);if(!e.ok)throw Error(`HTTP ${e.status}`);return await e.json()??void 0},staleTime:1/0,enabled:i})},iX=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f,p,g,y,b=(0,c.c)(37),{fileFilter:j,isFileTreeExpanded:w,shouldShowViewedFilesCount:_,totalFilesCount:C,treeToggleElement:N,userNotices:S}=e;b[0]===Symbol.for("react.memo_cache_sentinel")?(t=["line-spacing"],b[0]=t):t=b[0];let k=t,[L,T]=(0,v.useState)(!1),D=(0,I.j5)(),E=_||!w;b[1]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{e[0]&&T(!e[0].isIntersecting)},b[1]=n):n=b[1];let[R,A]=(0,nV.B)(n);b[2]===Symbol.for("react.memo_cache_sentinel")?(i={visibility:"hidden",height:"1px"},b[2]=i):i=b[2],b[3]!==R||b[4]!==A?(a=(0,o.jsx)(nU.X,{sx:i,onObserve:R,onUnobserve:A}),b[3]=R,b[4]=A,b[5]=a):a=b[5];let O=L&&nG;b[6]!==O?(s=(0,x.$)(nB.A.stickyHeader,nX,O),b[6]=O,b[7]=s):s=b[7],b[8]===Symbol.for("react.memo_cache_sentinel")?(r=(0,o.jsx)("h2",{className:"sr-only",children:"Diff Comparison Toolbar"}),b[8]=r):r=b[8],b[9]!==N?(l=(0,o.jsx)(tS.B,{direction:"horizontal",gap:"condensed",align:"center",className:"min-width-0",children:(0,o.jsx)("div",{children:N})}),b[9]=N,b[10]=l):l=b[10],b[11]!==_||b[12]!==C?(d=_&&(0,o.jsx)(eB,{totalFilesCount:C}),b[11]=_,b[12]=C,b[13]=d):d=b[13];let P=!w&&j;return b[14]!==D||b[15]!==C||b[16]!==S?(u=D&&C>1&&(0,o.jsx)("div",{className:nZ,children:(0,o.jsx)(ic,{userNotices:S})}),b[14]=D,b[15]=C,b[16]=S,b[17]=u):u=b[17],b[18]!==P||b[19]!==u||b[20]!==d?(m=(0,o.jsxs)("div",{className:nQ,children:[d,P,u]}),b[18]=P,b[19]=u,b[20]=d,b[21]=m):m=b[21],b[22]!==E?(h=E&&(0,o.jsx)("div",{className:nJ,"data-testid":"file-controls-divider"}),b[22]=E,b[23]=h):h=b[23],b[24]!==S?(f=(0,o.jsx)(ns.G,{invisible:!1,small:!0,enabledDiffViewSettings:k,userNotices:S}),b[24]=S,b[25]=f):f=b[25],b[26]!==m||b[27]!==h||b[28]!==f?(p=(0,o.jsxs)(tS.B,{direction:"horizontal",align:"center",children:[m,h,f]}),b[26]=m,b[27]=h,b[28]=f,b[29]=p):p=b[29],b[30]!==p||b[31]!==s||b[32]!==l?(g=(0,o.jsxs)(tS.B,{as:"section",direction:"horizontal",justify:"space-between",gap:"condensed",align:"center",className:s,children:[r,l,p]}),b[30]=p,b[31]=s,b[32]=l,b[33]=g):g=b[33],b[34]!==g||b[35]!==a?(y=(0,o.jsxs)(o.Fragment,{children:[a,g]}),b[34]=g,b[35]=a,b[36]=y):y=b[36],y}:function({fileFilter:e,isFileTreeExpanded:t,shouldShowViewedFilesCount:n,totalFilesCount:i,treeToggleElement:a,userNotices:s}){let[r,l]=(0,v.useState)(!1),d=(0,I.j5)(),c=n||!t,[u,m]=(0,nV.B)(e=>{e[0]&&l(!e[0].isIntersecting)});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(nU.X,{sx:{visibility:"hidden",height:"1px"},onObserve:u,onUnobserve:m}),(0,o.jsxs)(tS.B,{as:"section",direction:"horizontal",justify:"space-between",gap:"condensed",align:"center",className:(0,x.$)(nB.A.stickyHeader,nX,r&&nG),children:[(0,o.jsx)("h2",{className:"sr-only",children:"Diff Comparison Toolbar"}),(0,o.jsx)(tS.B,{direction:"horizontal",gap:"condensed",align:"center",className:"min-width-0",children:(0,o.jsx)("div",{children:a})}),(0,o.jsxs)(tS.B,{direction:"horizontal",align:"center",children:[(0,o.jsxs)("div",{className:nQ,children:[n&&(0,o.jsx)(eB,{totalFilesCount:i}),!t&&e,d&&i>1&&(0,o.jsx)("div",{className:nZ,children:(0,o.jsx)(ic,{userNotices:s})})]}),c&&(0,o.jsx)("div",{className:nJ,"data-testid":"file-controls-divider"}),(0,o.jsx)(ns.G,{invisible:!1,small:!0,enabledDiffViewSettings:["line-spacing"],userNotices:s})]})]})]})};try{iX.displayName||(iX.displayName="BasicDiffComparisonViewToolbar")}catch{}var i0=n(8624),i1=n(94195),i2=n(54571),i3=n(71833);let i4="diff-comparison-viewer-container",i5=(0,d.Z6)()?function(e,t,n,i){let a,s,r,l,d,u,m,h,f,p,g,y,x,b=(0,c.c)(40);b[0]===Symbol.for("react.memo_cache_sentinel")?(a=[],b[0]=a):a=b[0];let[j]=(0,i2.I)(i8,!0,a),w=(0,v.useRef)(null),_=(0,v.useRef)(null),C=t?"expanded":"collapsed";b[1]!==C?(s={wideMode:C,compactMode:"none"},b[1]=C,b[2]=s):s=b[2];let[N,S]=(0,v.useState)(s);b[3]!==i?(r=()=>{S(i7),(0,i3.B)(!0,i),requestAnimationFrame(()=>w.current?.focus())},b[3]=i,b[4]=r):r=b[4];let I=r;b[5]!==i?(l=()=>{S({wideMode:"collapsed",compactMode:"none"}),(0,i3.B)(!1,i),requestAnimationFrame(()=>w.current?.focus())},b[5]=i,b[6]=l):l=b[6];let k=l;b[7]!==n?(d=()=>{let e="overlay";if(n){let t=window.innerWidth;(0,i1.nn)(t)>i1.Gy.large&&(e="inline")}S(t=>({...t,compactMode:e})),requestAnimationFrame(()=>_.current?.focus())},b[7]=n,b[8]=d):d=b[8];let L=d;b[9]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{S(i6),requestAnimationFrame(()=>_.current?.focus())},b[9]=u):u=b[9];let T=u;b[10]!==L||b[11]!==I||b[12]!==N.compactMode||b[13]!==N.wideMode?(m=()=>{let e=!1,t=document.getElementById(i4);if(t){let n=t.getBoundingClientRect().width;e=0===n&&ey.cg?ey.cg.innerWidth>=1012:n>=1012}else ey.cg&&(e=ey.cg.innerWidth>=1012);e?"collapsed"===N.wideMode&&I():"none"===N.compactMode&&L()},b[10]=L,b[11]=I,b[12]=N.compactMode,b[13]=N.wideMode,b[14]=m):m=b[14];let D=m,E="expanded"===N.wideMode,R="expanded"===N.wideMode?"Collapse file tree":"Expand file tree";b[15]!==k||b[16]!==I||b[17]!==N.wideMode?(h=()=>{"expanded"===N.wideMode?k():I()},b[15]=k,b[16]=I,b[17]=N.wideMode,b[18]=h):h=b[18],b[19]!==e||b[20]!==h||b[21]!==E||b[22]!==R?(f=(0,o.jsx)(i0.L,{expanded:E,alignment:"left",ariaLabel:R,tooltipDirection:"se",testid:"file-tree-button",ariaControls:e,ref:w,className:iF,onToggleExpanded:h,size:"small"}),b[19]=e,b[20]=h,b[21]=E,b[22]=R,b[23]=f):f=b[23];let A=f,O="none"!==N.compactMode,P="none"!==N.compactMode?"Collapse file tree":"Expand file tree";b[24]!==L||b[25]!==N.compactMode?(p=()=>{"none"!==N.compactMode?T():L()},b[24]=L,b[25]=N.compactMode,b[26]=p):p=b[26],b[27]!==e||b[28]!==O||b[29]!==P||b[30]!==p?(g=(0,o.jsx)(i0.L,{expanded:O,alignment:"left",ariaLabel:P,tooltipDirection:"se",testid:"file-tree-button",ariaControls:e,ref:_,className:iM,onToggleExpanded:p,size:"small"}),b[27]=e,b[28]=O,b[29]=P,b[30]=p,b[31]=g):g=b[31];let F=g;b[32]!==F||b[33]!==A?(y=(0,o.jsxs)(o.Fragment,{children:[F,A]}),b[32]=F,b[33]=A,b[34]=y):y=b[34];let M=y,$=j&&!t;return b[35]!==D||b[36]!==$||b[37]!==M||b[38]!==N?(x={splitPagePaneHidden:$,treeViewState:N,collapseMobileTree:T,expandTree:D,treeToggleElement:M},b[35]=D,b[36]=$,b[37]=M,b[38]=N,b[39]=x):x=b[39],x}:function(e,t,n,i){let[a]=(0,i2.I)(()=>!1,!0,[]),s=(0,v.useRef)(null),r=(0,v.useRef)(null),[l,d]=(0,v.useState)({wideMode:t?"expanded":"collapsed",compactMode:"none"}),c=(0,v.useCallback)(()=>{d(e=>({...e,wideMode:"expanded"})),(0,i3.B)(!0,i),requestAnimationFrame(()=>s.current?.focus())},[i]),u=(0,v.useCallback)(()=>{d({wideMode:"collapsed",compactMode:"none"}),(0,i3.B)(!1,i),requestAnimationFrame(()=>s.current?.focus())},[i]),m=(0,v.useCallback)(()=>{let e="overlay";if(n){let t=window.innerWidth;(0,i1.nn)(t)>i1.Gy.large&&(e="inline")}d(t=>({...t,compactMode:e})),requestAnimationFrame(()=>r.current?.focus())},[n]),h=(0,v.useCallback)(()=>{d(e=>({...e,compactMode:"none"})),requestAnimationFrame(()=>r.current?.focus())},[]),f=(0,v.useCallback)(()=>{let e=!1,t=document.getElementById(i4);if(t){let n=t.getBoundingClientRect().width;e=0===n&&ey.cg?ey.cg.innerWidth>=1012:n>=1012}else ey.cg&&(e=ey.cg.innerWidth>=1012);e?"collapsed"===l.wideMode&&c():"none"===l.compactMode&&m()},[l.wideMode,l.compactMode,c,m]),p=(0,v.useMemo)(()=>(0,o.jsx)(i0.L,{expanded:"expanded"===l.wideMode,alignment:"left",ariaLabel:"expanded"===l.wideMode?"Collapse file tree":"Expand file tree",tooltipDirection:"se",testid:"file-tree-button",ariaControls:e,ref:s,className:iF,onToggleExpanded:()=>{"expanded"===l.wideMode?u():c()},size:"small"}),[l.wideMode,e,u,c]),g=(0,v.useMemo)(()=>(0,o.jsx)(i0.L,{expanded:"none"!==l.compactMode,alignment:"left",ariaLabel:"none"!==l.compactMode?"Collapse file tree":"Expand file tree",tooltipDirection:"se",testid:"file-tree-button",ariaControls:e,ref:r,className:iM,onToggleExpanded:()=>{"none"!==l.compactMode?h():m()},size:"small"}),[l.compactMode,e,h,m]);return{splitPagePaneHidden:a&&!t,treeViewState:l,collapseMobileTree:h,expandTree:f,treeToggleElement:(0,v.useMemo)(()=>(0,o.jsxs)(o.Fragment,{children:[g,p]}),[g,p])}};function i6(e){return{...e,compactMode:"none"}}function i7(e){return{...e,wideMode:"expanded"}}function i8(){return!1}let i9=(0,d.Z6)()?function(){let e,t,n,i=(0,c.c)(7),a=(0,ee.e)(X.uT.generateChangeGroups),{updateChangeGroupGeneration:s}=(0,I.wL)();return i[0]!==a?(e=async()=>{let e=await (0,en.q$)(a,{method:"POST"}),t=await (0,en.hp)(e);return(0,en.R)(e,t),t},i[0]=a,i[1]=e):e=i[1],i[2]!==s?(t=e=>{s(e)},i[2]=s,i[3]=t):t=i[3],i[4]!==e||i[5]!==t?(n={mutationFn:e,onSuccess:t},i[4]=e,i[5]=t,i[6]=n):n=i[6],(0,et.n)(n)}:function(){let e=(0,ee.e)(X.uT.generateChangeGroups),{updateChangeGroupGeneration:t}=(0,I.wL)();return(0,et.n)({mutationFn:async()=>{let t=await (0,en.q$)(e,{method:"POST"}),n=await (0,en.hp)(t);return(0,en.R)(t,n),n},onSuccess:e=>{t(e)}})},ae=(0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(11),{changeGroupsEnabled:s}=e,r=(0,I.gt)(),l=(0,I.iY)(),o=!!(l&&l.length>0),d=(0,no.u)("generate_groups_on_files_view"),{mutate:u}=i9(),m=(0,I.Fl)();a[0]!==m?(t=m&&(eu(m.state)||!ec(m.state)),a[0]=m,a[1]=t):t=a[1];let h=t,f=(0,I.ww)(),p=(0,v.useRef)(!1);a[2]!==r||a[3]!==s||a[4]!==u||a[5]!==o||a[6]!==f||a[7]!==h||a[8]!==d?(n=()=>{p.current||!d||!s||!r||o||f||h||(u(),p.current=!0)},i=[r,d,u,o,h,f,s],a[2]=r,a[3]=s,a[4]=u,a[5]=o,a[6]=f,a[7]=h,a[8]=d,a[9]=n,a[10]=i):(n=a[9],i=a[10]),(0,v.useEffect)(n,i)}:function({changeGroupsEnabled:e}){let t=(0,I.gt)(),n=(0,I.iY)(),i=!!(n&&n.length>0),a=(0,no.u)("generate_groups_on_files_view"),{mutate:s}=i9(),r=(0,I.Fl)(),l=r&&(eu(r.state)||!ec(r.state)),o=(0,I.ww)(),d=(0,v.useRef)(!1);(0,v.useEffect)(()=>{d.current||!a||!e||!t||i||o||l||(s(),d.current=!0)},[t,a,s,i,l,o,e])};var at=n(59523),an=n(82590),ai=n(66358);let aa=(0,d.Z6)()?function(e){let t,n,i,a,s=(0,c.c)(17),{pullRequestBasePath:r,className:l,diffPath:d,viewerLogin:u}=e,m=(0,v.useId)();s[0]!==r||s[1]!==d?(t={basePath:r,diffPath:d},s[0]=r,s[1]=d,s[2]=t):t=s[2];let h=(0,S.o5)(t);if(!h)return null;let{isOwnedByViewer:f,owners:p,ruleLineNumber:g,ruleUrl:y}=h.data;if(!(f||p.length>0))return null;s[3]!==f||s[4]!==p||s[5]!==g||s[6]!==u?(n=as(f,p,g,u),s[3]=f,s[4]=p,s[5]=g,s[6]=u,s[7]=n):n=s[7];let x=n;return s[8]!==l||s[9]!==f||s[10]!==y||s[11]!==m?(i=y?(0,o.jsx)(A.A,{"aria-labelledby":m,href:y,className:l,muted:!f,children:(0,o.jsx)(q.ShieldLockIcon,{})}):(0,o.jsx)(q.ShieldLockIcon,{className:l}),s[8]=l,s[9]=f,s[10]=y,s[11]=m,s[12]=i):i=s[12],s[13]!==i||s[14]!==x||s[15]!==m?(a=(0,o.jsx)(O.m,{id:m,"aria-label":x,text:x,children:i}),s[13]=i,s[14]=x,s[15]=m,s[16]=a):a=s[16],a}:function({pullRequestBasePath:e,className:t,diffPath:n,viewerLogin:i}){let a=(0,v.useId)(),s=(0,S.o5)({basePath:e,diffPath:n});if(!s)return null;let{isOwnedByViewer:r,owners:l,ruleLineNumber:d,ruleUrl:c}=s.data;if(!(r||l.length>0))return null;let u=as(r,l,d,i);return(0,o.jsx)(O.m,{id:a,"aria-label":u,text:u,children:c?(0,o.jsx)(A.A,{"aria-labelledby":a,href:c,className:t,muted:!r,children:(0,o.jsx)(q.ShieldLockIcon,{})}):(0,o.jsx)(q.ShieldLockIcon,{className:t})})};function as(e,t,n,i){let a="Owned by ",s=t;return e&&(a+="you",i&&(s=t.filter(e=>e!==`@${i}`)),s.length>0&&(a+=" along with ")),a+=s.join(", "),n&&(a+=` (from CODEOWNERS line ${n})`),a}try{aa.displayName||(aa.displayName="CodeownersBadge")}catch{}var ar=n(78252),al=n(31675);let ao="BlobActionsMenu-module__hiddenIcon--EJrTU",ad=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f,p,g=(0,c.c)(46),{oid:y,path:x,repo:v,branchName:b,isViewable:j,isDeleteable:_,isEditable:C,shouldShowEditOptions:N,copilotDiffChatProps:S,returnToPullRequestPath:I,onCommentOnFile:k,onCopyPath:L,onExpandLines:T,areLinesExpanded:D,richDiffToggle:E,codeownersText:R,codeownersUrl:A}=e,O=void 0===_||_,P=void 0===C||C,F=void 0===N||N;g[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)(eq.W.Anchor,{children:(0,o.jsx)(G.K,{icon:q.KebabHorizontalIcon,"aria-label":"More options",variant:"invisible",size:"small"})}),g[0]=t):t=g[0],g[1]!==E?(n=E?.richDiff?.canToggleRichDiff&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(w.l.Item,{className:al.A["hide-on-medium-up"],onSelect:E.onToggle,children:[(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)("span",{className:E.isRichDiff?ao:void 0,children:(0,o.jsx)(q.CheckIcon,{})})}),"Source diff"]}),(0,o.jsxs)(w.l.Item,{className:al.A["hide-on-medium-up"],onSelect:E.onToggle,children:[(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)("span",{className:E.isRichDiff?void 0:ao,children:(0,o.jsx)(q.CheckIcon,{})})}),"Rich diff"]}),(0,o.jsx)(w.l.Divider,{className:al.A["hide-on-medium-up"]})]}),g[1]=E,g[2]=n):n=g[2],g[3]!==S?(i=S&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ar.$,{...S}),(0,o.jsx)(w.l.Divider,{})]}),g[3]=S,g[4]=i):i=g[4],g[5]!==k?(a=k&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(w.l.Item,{className:al.A["hide-on-desktop"],onSelect:k,children:[(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)(q.CommentIcon,{})}),"Comment on this file"]}),(0,o.jsx)(w.l.Divider,{className:al.A["hide-on-desktop"]})]}),g[5]=k,g[6]=a):a=g[6],g[7]!==L?(s=L&&(0,o.jsxs)(w.l.Item,{className:al.A["hide-on-desktop"],onSelect:L,children:[(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)(q.CopyIcon,{})}),"Copy file name"]}),g[7]=L,g[8]=s):s=g[8],g[9]!==D||g[10]!==T?(r=T&&(0,o.jsxs)(w.l.Item,{className:al.A["hide-on-desktop"],onSelect:T,children:[(0,o.jsx)(w.l.LeadingVisual,{children:D?(0,o.jsx)(q.FoldIcon,{}):(0,o.jsx)(q.UnfoldIcon,{})}),(0,o.jsx)("span",{children:D?"Collapse non-diff lines":"Expand all lines"})]}),g[9]=D,g[10]=T,g[11]=r):r=g[11],g[12]!==L||g[13]!==T?(l=(L||T)&&(0,o.jsx)(w.l.Divider,{className:al.A["hide-on-desktop"]}),g[12]=L,g[13]=T,g[14]=l):l=g[14],g[15]!==y||g[16]!==x||g[17]!==v.name||g[18]!==v.ownerLogin?(d=(0,eA.nD_)({repo:v.name,owner:v.ownerLogin,filePath:x,commitish:y}),g[15]=y,g[16]=x,g[17]=v.name,g[18]=v.ownerLogin,g[19]=d):d=g[19];let M=void 0===j||j?void 0:"Action unavailable";return g[20]===Symbol.for("react.memo_cache_sentinel")?(u=(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)(q.EyeIcon,{})}),g[20]=u):u=g[20],g[21]!==d||g[22]!==M?(m=(0,o.jsxs)(w.l.LinkItem,{href:d,inactiveText:M,children:[u,"View file"]}),g[21]=d,g[22]=M,g[23]=m):m=g[23],g[24]!==b||g[25]!==O||g[26]!==P||g[27]!==x||g[28]!==v.name||g[29]!==v.ownerLogin||g[30]!==I||g[31]!==F?(h=b&&F&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(w.l.LinkItem,{href:(0,eA.Nyd)({repo:v.name,owner:v.ownerLogin,filePath:x,commitish:b,returnToPrPath:I}),inactiveText:P?void 0:"Action unavailable",children:[(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)(q.PencilIcon,{})}),"Edit file"]}),(0,o.jsxs)(w.l.LinkItem,{variant:"danger",href:(0,eA.Y65)({repo:v.name,owner:v.ownerLogin,filePath:x,commitish:b}),inactiveText:O?void 0:"Action unavailable",children:[(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)(q.TrashIcon,{})}),"Delete file"]})]}),g[24]=b,g[25]=O,g[26]=P,g[27]=x,g[28]=v.name,g[29]=v.ownerLogin,g[30]=I,g[31]=F,g[32]=h):h=g[32],g[33]!==R||g[34]!==A?(f=R&&A&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(w.l.Divider,{className:al.A["hide-on-desktop"]}),(0,o.jsxs)(w.l.LinkItem,{className:al.A["hide-on-desktop"],href:A,children:[(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)(q.ShieldLockIcon,{})}),R]})]}),g[33]=R,g[34]=A,g[35]=f):f=g[35],g[36]!==r||g[37]!==l||g[38]!==m||g[39]!==h||g[40]!==f||g[41]!==n||g[42]!==i||g[43]!==a||g[44]!==s?(p=(0,o.jsxs)(eq.W,{children:[t,(0,o.jsx)(eq.W.Overlay,{children:(0,o.jsxs)(w.l,{children:[n,i,a,s,r,l,m,h,f]})})]}),g[36]=r,g[37]=l,g[38]=m,g[39]=h,g[40]=f,g[41]=n,g[42]=i,g[43]=a,g[44]=s,g[45]=p):p=g[45],p}:function({oid:e,path:t,repo:n,branchName:i,isViewable:a=!0,isDeleteable:s=!0,isEditable:r=!0,shouldShowEditOptions:l=!0,copilotDiffChatProps:d,returnToPullRequestPath:c,onCommentOnFile:u,onCopyPath:m,onExpandLines:h,areLinesExpanded:f,richDiffToggle:p,codeownersText:g,codeownersUrl:y}){return(0,o.jsxs)(eq.W,{children:[(0,o.jsx)(eq.W.Anchor,{children:(0,o.jsx)(G.K,{icon:q.KebabHorizontalIcon,"aria-label":"More options",variant:"invisible",size:"small"})}),(0,o.jsx)(eq.W.Overlay,{children:(0,o.jsxs)(w.l,{children:[p?.richDiff?.canToggleRichDiff&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(w.l.Item,{className:al.A["hide-on-medium-up"],onSelect:p.onToggle,children:[(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)("span",{className:p.isRichDiff?ao:void 0,children:(0,o.jsx)(q.CheckIcon,{})})}),"Source diff"]}),(0,o.jsxs)(w.l.Item,{className:al.A["hide-on-medium-up"],onSelect:p.onToggle,children:[(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)("span",{className:p.isRichDiff?void 0:ao,children:(0,o.jsx)(q.CheckIcon,{})})}),"Rich diff"]}),(0,o.jsx)(w.l.Divider,{className:al.A["hide-on-medium-up"]})]}),d&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ar.$,{...d}),(0,o.jsx)(w.l.Divider,{})]}),u&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(w.l.Item,{className:al.A["hide-on-desktop"],onSelect:u,children:[(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)(q.CommentIcon,{})}),"Comment on this file"]}),(0,o.jsx)(w.l.Divider,{className:al.A["hide-on-desktop"]})]}),m&&(0,o.jsxs)(w.l.Item,{className:al.A["hide-on-desktop"],onSelect:m,children:[(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)(q.CopyIcon,{})}),"Copy file name"]}),h&&(0,o.jsxs)(w.l.Item,{className:al.A["hide-on-desktop"],onSelect:h,children:[(0,o.jsx)(w.l.LeadingVisual,{children:f?(0,o.jsx)(q.FoldIcon,{}):(0,o.jsx)(q.UnfoldIcon,{})}),(0,o.jsx)("span",{children:f?"Collapse non-diff lines":"Expand all lines"})]}),(m||h)&&(0,o.jsx)(w.l.Divider,{className:al.A["hide-on-desktop"]}),(0,o.jsxs)(w.l.LinkItem,{href:(0,eA.nD_)({repo:n.name,owner:n.ownerLogin,filePath:t,commitish:e}),inactiveText:a?void 0:"Action unavailable",children:[(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)(q.EyeIcon,{})}),"View file"]}),i&&l&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(w.l.LinkItem,{href:(0,eA.Nyd)({repo:n.name,owner:n.ownerLogin,filePath:t,commitish:i,returnToPrPath:c}),inactiveText:r?void 0:"Action unavailable",children:[(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)(q.PencilIcon,{})}),"Edit file"]}),(0,o.jsxs)(w.l.LinkItem,{variant:"danger",href:(0,eA.Y65)({repo:n.name,owner:n.ownerLogin,filePath:t,commitish:i}),inactiveText:s?void 0:"Action unavailable",children:[(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)(q.TrashIcon,{})}),"Delete file"]})]}),g&&y&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(w.l.Divider,{className:al.A["hide-on-desktop"]}),(0,o.jsxs)(w.l.LinkItem,{className:al.A["hide-on-desktop"],href:y,children:[(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)(q.ShieldLockIcon,{})}),g]})]})]})})]})};try{ad.displayName||(ad.displayName="BlobActionsMenu")}catch{}let ac="MarkAsViewedButton-module__viewed--czELS",au="MarkAsViewedButton-module__iconOnly--tQ1ah",am=(0,d.Z6)()?function(e,t){let n,i,a,s,r=(0,c.c)(10),{onSuccess:l,onError:o}=t,d=`${e}/file_review`;return r[0]!==d?(n=async e=>{let{viewedStatus:t,path:n}=e,i=await (0,ed.Sr)(`${d}`,{method:t?"POST":"DELETE",headers:{Accept:"application/json"},body:{path:n,viewed:t?"viewed":void 0,_method:t?void 0:"delete"}}),a=await i.json();if(i.ok)return a;throw Error(a.error||"Unknown error occurred",{cause:i.status})},r[0]=d,r[1]=n):n=r[1],r[2]!==l?(i=()=>{l()},r[2]=l,r[3]=i):i=r[3],r[4]!==o?(a=e=>{o(e)},r[4]=o,r[5]=a):a=r[5],r[6]!==n||r[7]!==i||r[8]!==a?(s={mutationFn:n,onSuccess:i,onError:a},r[6]=n,r[7]=i,r[8]=a,r[9]=s):s=r[9],(0,et.n)(s)}:function(e,{onSuccess:t,onError:n}){let i=`${e}/file_review`;return(0,et.n)({mutationFn:async({viewedStatus:e,path:t})=>{let n=await (0,ed.Sr)(`${i}`,{method:e?"POST":"DELETE",headers:{Accept:"application/json"},body:{path:t,viewed:e?"viewed":void 0,_method:e?void 0:"delete"}}),a=await n.json();if(n.ok)return a;throw Error(a.error||"Unknown error occurred",{cause:n.status})},onSuccess:()=>{t()},onError:e=>{n(e)}})},ah=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d=(0,c.c)(27),{basePath:u,inactive:m,inactiveTooltip:h,path:f,setIsCollapsed:p}=e,g=void 0!==m&&m,y=(0,I.Mv)(f);d[0]===Symbol.for("react.memo_cache_sentinel")?(t={onSuccess:ap,onError:af},d[0]=t):t=d[0];let{mutate:v}=am(u,t),{setDiffViewed:b}=(0,I.Ud)(),j=(0,I.j5)(),{navigateToNext:w}=n7();d[1]!==g||d[2]!==j||d[3]!==y||d[4]!==w||d[5]!==f||d[6]!==b||d[7]!==p||d[8]!==v?(n=()=>{g||(v({viewedStatus:!y,path:f}),b(f,!y),j?w():p(!y))},d[1]=g,d[2]=j,d[3]=y,d[4]=w,d[5]=f,d[6]=b,d[7]=p,d[8]=v,d[9]=n):n=d[9];let _=n;d[10]!==y?(i=y?(0,o.jsx)(q.CheckboxFillIcon,{className:"color-fg-accent"}):(0,o.jsx)("svg",{"aria-hidden":"true",fill:"none",height:"16",role:"img",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{clipRule:"evenodd",d:"M2.5 2.75C2.5 2.61193 2.61193 2.5 2.75 2.5H13.25C13.3881 2.5 13.5 2.61193 13.5 2.75V13.25C13.5 13.3881 13.3881 13.5 13.25 13.5H2.75C2.61193 13.5 2.5 13.3881 2.5 13.25V2.75ZM2.75 1C1.7835 1 1 1.7835 1 2.75V13.25C1 14.2165 1.7835 15 2.75 15H13.25C14.2165 15 15 14.2165 15 13.25V2.75C15 1.7835 14.2165 1 13.25 1H2.75Z",fill:"currentColor",fillRule:"evenodd"})}),d[10]=y,d[11]=i):i=d[11];let C=i,N=y?"Viewed":"Not Viewed";d[12]!==C?(a=()=>C,d[12]=C,d[13]=a):a=d[13];let S=y&&ac;d[14]!==S?(s=(0,x.$)(S,au),d[14]=S,d[15]=s):s=d[15],d[16]===Symbol.for("react.memo_cache_sentinel")?(r=(0,o.jsx)("span",{className:al.A["hide-on-mobile"],children:"Viewed"}),d[16]=r):r=d[16],d[17]!==_||d[18]!==g||d[19]!==y||d[20]!==N||d[21]!==a||d[22]!==s?(l=(0,o.jsx)(Q.Q,{"aria-pressed":y,"aria-label":N,inactive:g,size:"small",variant:"default",leadingVisual:a,className:s,onClick:_,children:r}),d[17]=_,d[18]=g,d[19]=y,d[20]=N,d[21]=a,d[22]=s,d[23]=l):l=d[23];let k=l;if(!g||!h)return k;{let e;return d[24]!==k||d[25]!==h?(e=(0,o.jsx)(O.m,{text:h,children:k}),d[24]=k,d[25]=h,d[26]=e):e=d[26],e}}:function({basePath:e,inactive:t=!1,inactiveTooltip:n,path:i,setIsCollapsed:a}){let s=(0,I.Mv)(i),{mutate:r}=am(e,{onSuccess:()=>{},onError:()=>{}}),{setDiffViewed:l}=(0,I.Ud)(),d=(0,I.j5)(),{navigateToNext:c}=n7(),u=(0,v.useCallback)(()=>{t||(r({viewedStatus:!s,path:i}),l(i,!s),d?c():a(!s))},[r,t,s,i,l,d,c,a]),m=(0,v.useMemo)(()=>s?(0,o.jsx)(q.CheckboxFillIcon,{className:"color-fg-accent"}):(0,o.jsx)("svg",{"aria-hidden":"true",fill:"none",height:"16",role:"img",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{clipRule:"evenodd",d:"M2.5 2.75C2.5 2.61193 2.61193 2.5 2.75 2.5H13.25C13.3881 2.5 13.5 2.61193 13.5 2.75V13.25C13.5 13.3881 13.3881 13.5 13.25 13.5H2.75C2.61193 13.5 2.5 13.3881 2.5 13.25V2.75ZM2.75 1C1.7835 1 1 1.7835 1 2.75V13.25C1 14.2165 1.7835 15 2.75 15H13.25C14.2165 15 15 14.2165 15 13.25V2.75C15 1.7835 14.2165 1 13.25 1H2.75Z",fill:"currentColor",fillRule:"evenodd"})}),[s]),h=(0,o.jsx)(Q.Q,{"aria-pressed":s,"aria-label":s?"Viewed":"Not Viewed",inactive:t,size:"small",variant:"default",leadingVisual:()=>m,className:(0,x.$)(s&&ac,au),onClick:u,children:(0,o.jsx)("span",{className:al.A["hide-on-mobile"],children:"Viewed"})});return t&&n?(0,o.jsx)(O.m,{text:n,children:h}):h};function af(){}function ap(){}try{ah.displayName||(ah.displayName="MarkAsViewedButton")}catch{}var ag=n(79634);function ay({basePath:e,effectiveRange:t,path:n}){return[X.uT.richDiff,e,`baseOid:${t.baseOid}`,`headOid:${t.headOid}`,`path:${n}`]}let ax=(0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(11),{basePath:s,path:r}=e,l=(0,I.L3)();a[0]!==s||a[1]!==l||a[2]!==r?(t=ay({basePath:s,path:r,...l}),a[0]=s,a[1]=l,a[2]=r,a[3]=t):t=a[3];let o=t;a[4]!==s||a[5]!==l||a[6]!==r?(n={path:r,basePath:s,...l,signal:void 0},a[4]=s,a[5]=l,a[6]=r,a[7]=n):n=a[7];let d=n;return a[8]!==d||a[9]!==o?(i={fetcher:av,key:o,args:d},a[8]=d,a[9]=o,a[10]=i):i=a[10],i}:function({basePath:e,path:t}){let n=(0,I.L3)();return{fetcher:av,key:ay({basePath:e,path:t,...n}),args:{path:t,basePath:e,...n,signal:void 0}}};async function av({basePath:e,fullDiff:t,effectiveRange:n,path:i,signal:a}){let s=new URLSearchParams;s.append("path",i),n.baseOid===t.baseOid?s.append("range",n.headOid):s.append("range",`${n.baseOid}..${n.headOid}`);let r=`${e}/page_data/${X.uT.richDiff}?${s.toString()}`;try{let e=await (0,ed.Sr)(r,{signal:a});if(a?.aborted)return;let t=await (0,en.hp)(e);return(0,en.R)(e,t),t??void 0}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw e}}var ab=n(15697);function aj(e,t){if(e.type!==t.type)return!1;let n="CONTEXT"===e.type||"ADDITION"===e.type,i="DELETION"===e.type;return n&&e.right===t.line||i&&e.left===t.line}function aw({basePath:e,diffManuallyExpanded:t,headBranchName:n,headRepoName:i,headRepoOwner:a,diffLines:s,path:r,isSelected:l=!1,reviewed:d,...c}){let u=(0,I.JA)(),{fetchContextLines:m}=(0,I.QV)(),h=(0,I.L3)(),f=h.hideWhitespace?"1":"0",p=ax({basePath:e,path:r}),g=(0,v.useRef)(null),y=(0,v.useRef)(null),{helpUrl:b}=(0,ag.X)(),j=(0,I.kN)(r),{updateAllFilesCollapsedStatus:w,updateFileCollapsedStatus:_}=(0,I.JR)(),C=(0,I.GR)(),[k,L]=(0,v.useState)(!1),[T,D]=(0,v.useState)(c.richDiff?.defaultToRichDiff??!1),E=(0,I.Fm)(r),R=(0,I.ne)(r),A=(0,S.dG)({basePath:e}),O=(0,S.hG)({diffPath:r,codeownersData:A?.data}),P=(0,v.useMemo)(()=>R?R[te.zW]?.threads??[]:[],[R]),F=(0,v.useMemo)(()=>u?function(e,t,n){let i=[],a=t.hunkPositions[n];if(!a)return i;let s=0,r=a[0];if(!r)return i;let l=!1;for(let t of e)if(l){if(i.push(t),aj(t,r.endLine)&&(l=!1,!(r=a[++s])))break}else aj(t,r.startLine)&&(l=!0,i.push(r.headerLine),i.push(t));return i}(s,u,r):s,[u,r,s]),M=(0,v.useCallback)(()=>{_(r,!1)},[r,_]),$=(0,v.useCallback)(()=>{C()&&j&&M()},[j,M,C]),B=(0,v.useCallback)(()=>{(0,N.K3)(),$()},[$]),V=(0,v.useCallback)(()=>{(0,n6.o9)()===c.pathDigest&&j&&M()},[c.pathDigest,M,j]),U=(0,v.useCallback)(()=>{$(),V()},[$,V]);(0,v.useEffect)(()=>{U()},[]),(0,v.useEffect)(()=>(ey.cg?.addEventListener("hashchange",U),()=>{ey.cg?.removeEventListener("hashchange",U)}),[U]);let H=(0,v.useCallback)((e,t,n)=>{if(n&&n.altKey)w(e);else{if(_(t,e),!e)return;ey.cg?.requestAnimationFrame(()=>{let e=g.current?.getBoundingClientRect();!e||e.top<62&&ey.cg?.scrollTo({top:e.top+ey.cg.scrollY-62})})}},[w,_]),K=(0,v.useRef)((0,ab.B)({diffSummary:E})),[W,z]=(0,v.useState)(!1),Q=(0,v.useCallback)(async e=>{B(),K.current.push(e),m({contextLineRanges:K.current,path:r,w:f})},[B,m,r,f]),Z=(0,v.useCallback)(async()=>{await m({contextLineRanges:[],path:r})},[m,r]),J=(0,v.useMemo)(()=>{if(c.isBinary||c.isSubmodule||c.isTooBig||(0,at.dK)({linesChanged:c.linesChanged,newTreeEntry:c.newTreeEntry,oldTreeEntry:c.oldTreeEntry,status:c.status,truncatedReason:c.truncatedReason}))return!1;if(W)return!0;if(0===F.length)return!1;if((F[1]?.blobLineNumber||0)>1)return!0;let e=F.length,t=F[e-1]?.blobLineNumber||0,n=c.newTreeEntry?.lineCount||0;return!!(t<n)||!!(e-1<n)},[c.isBinary,c.isSubmodule,c.isTooBig,c.linesChanged,c.newTreeEntry,c.oldTreeEntry,c.status,c.truncatedReason,F,W]),Y=(0,v.useCallback)(async()=>{let e,t;K.current=[],W||K.current.push({start:1,end:Math.max(c.oldTreeEntry?.lineCount??0,c.newTreeEntry?.lineCount??0)});let n=document.activeElement;await m({contextLineRanges:K.current,path:r,w:f}),z(!W),n&&(e=null,t=null,n&&(n.hasAttribute("data-grid-cell-id")&&(e=n.getAttribute("data-grid-cell-id")),n.hasAttribute("data-file-path")&&(t=n.getAttribute("data-file-path"))),setTimeout(()=>{if(e){let t=document.querySelector(`[data-grid-cell-id="${e}"]`);if(t)return void t.focus()}if(t){let e=document.querySelector(`button[data-file-path="${t}"]`);e&&e.focus()}},0))},[W,c.oldTreeEntry?.lineCount,c.newTreeEntry?.lineCount,m,r,f]),X=(0,v.useCallback)(()=>D(!T),[T]),ee=(0,v.useMemo)(()=>c.richDiff?.canToggleRichDiff?{richDiff:c.richDiff,isRichDiff:T,onToggle:X}:void 0,[c.richDiff,T,X]),et=(0,v.useMemo)(()=>O&&(O.isOwnedByViewer||O.owners.length>0)?as(O.isOwnedByViewer,O.owners,void 0,c.currentUser.login):void 0,[O,c.currentUser.login]),en=(0,v.useMemo)(()=>O?.ruleUrl,[O]),ei=(0,v.useMemo)(()=>c.currentUser.canComment?()=>L(!0):void 0,[c.currentUser.canComment]),ea=(0,v.useCallback)(()=>navigator.clipboard?.writeText(r),[r]),es=(0,v.useMemo)(()=>J?Y:void 0,[J,Y]),er=(0,v.useMemo)(()=>({richDiff:c.richDiff,showRichDiff:T,onToggleRichDiff:D,queryConfig:p}),[c.richDiff,T,p]),el=(0,v.useMemo)(()=>{let e=new Set([]);return u&&e.add(ai.YR.diffStats).add(ai.YR.expandLines),h.fullDiff.headOid!==h.effectiveRange.headOid&&e.add(ai.YR.markAsViewed),e},[u,h.effectiveRange.headOid,h.fullDiff.headOid]),{disabledFeatures:eo,disabledReasons:ed}=(0,v.useMemo)(()=>{let e=new Set([]),t=new Map;return u&&(e.add(ai.YR.markAsViewed),t.set(ai.YR.markAsViewed,"This file can only be marked as viewed on the \u201CAll files\u201D page")),{disabledFeatures:e,disabledReasons:t}},[u]);return(0,o.jsx)(an.oO,{loadDiff:Z,...c,addFileCommentButtonRef:y,basePath:e,diffManuallyExpanded:t,fileComments:P,hiddenFeatures:el,isAddingFileComment:k,isSelected:l,leftSideContent:(0,o.jsx)(v.Suspense,{children:(0,o.jsx)(aa,{className:(0,x.$)("px-1 flex-items-center flex-order-2 flex-sm-order-1",al.A["hide-on-mobile"]),diffPath:r,pullRequestBasePath:e,viewerLogin:c.currentUser.login})}),rightSideContent:(0,o.jsxs)("div",{className:"d-flex flex-items-center gap-2",children:[!el.has(ai.YR.markAsViewed)&&(0,o.jsx)(ah,{path:r,basePath:e,inactive:eo.has(ai.YR.markAsViewed)||!!u,inactiveTooltip:ed.get(ai.YR.markAsViewed),setIsCollapsed:e=>H(e,r)}),c.currentUser.canComment&&(0,o.jsx)(G.K,{ref:y,icon:q.CommentIcon,"aria-label":"Comment on this file","aria-expanded":k,variant:"invisible",size:"small",onClick:()=>L(!0),className:al.A["hide-on-mobile"]}),(0,o.jsx)(ad,{oid:"REMOVED"===c.status&&c.oldCommitOid?c.oldCommitOid:c.newCommitOid||"",path:r,repo:{name:i||c.repository.name,ownerLogin:a||c.repository.ownerLogin},isViewable:!c.isSubmodule,isDeleteable:!c.isSubmodule,isEditable:!c.isSubmodule,shouldShowEditOptions:c.currentUser.shouldDisplayEditOptions,branchName:n,returnToPullRequestPath:e,onCommentOnFile:ei,onCopyPath:ea,onExpandLines:es,areLinesExpanded:W,richDiffToggle:ee,codeownersText:et,codeownersUrl:en})]}),canExpandOrCollapseLines:J,expandAllContextLines:Y,hasExpandedAllRanges:W,addInjectedContextLines:Q,onToggleCollapse:(e,t)=>H(t,r,e),path:r,ref:g,setIsAddingFileComment:L,collapsed:j,helpUrl:b,linesAdded:E?.linesAdded||c.linesAdded||0,linesChanged:E?.linesChanged||c.linesChanged||0,linesDeleted:E?.linesDeleted||c.linesDeleted||0,diffLines:F,richDiffState:er})}try{aw.displayName||(aw.displayName="PullRequestDiff")}catch{}let a_=(0,v.memo)((0,d.Z6)()?function(e){let t,n=(0,c.c)(9),{linesAdded:i,linesChanged:a,linesDeleted:s,newTreeEntry:r,oldTreeEntry:l,path:d,pathDigest:u,status:m}=e;return n[0]!==i||n[1]!==a||n[2]!==s||n[3]!==r||n[4]!==l||n[5]!==d||n[6]!==u||n[7]!==m?(t=(0,o.jsx)(an.Ao,{linesAdded:i,linesChanged:a,linesDeleted:s,newTreeEntry:r,oldTreeEntry:l,path:d,pathDigest:u,status:m}),n[0]=i,n[1]=a,n[2]=s,n[3]=r,n[4]=l,n[5]=d,n[6]=u,n[7]=m,n[8]=t):t=n[8],t}:function({linesAdded:e,linesChanged:t,linesDeleted:n,newTreeEntry:i,oldTreeEntry:a,path:s,pathDigest:r,status:l}){return(0,o.jsx)(an.Ao,{linesAdded:e,linesChanged:t,linesDeleted:n,newTreeEntry:i,oldTreeEntry:a,path:s,pathDigest:r,status:l})});try{a_.displayName||(a_.displayName="PullRequestDiffEntryErrorFallback")}catch{}var aC=n(81945),aN=n(29731),aS=n(8431);let aI=(0,v.memo)((0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u=(0,c.c)(15),{ariaLabel:h,testId:f,id:p,approximateLineCount:g}=e,{data:y}=(0,m.ID)(),x=(y?.lineSpacing==="compact"?20:25)*(void 0===g?5:g);return u[0]!==f?(t=(0,aN.G)(f),u[0]=f,u[1]=t):t=u[1],u[2]!==x?(n={minHeight:x},u[2]=x,u[3]=n):n=u[3],u[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,o.jsx)(aC.O,{height:"sm",variant:"rounded",width:"random"}),a=(0,o.jsx)(aC.O,{height:"sm",variant:"rounded",width:"random"}),s=(0,o.jsx)(aC.O,{height:"sm",variant:"rounded",width:"random"}),r=(0,o.jsx)(aC.O,{height:"sm",variant:"rounded",width:"random"}),u[4]=i,u[5]=a,u[6]=s,u[7]=r):(i=u[4],a=u[5],s=u[6],r=u[7]),u[8]!==n?(l=(0,o.jsx)("div",{className:"border borderColor-muted",children:(0,o.jsxs)("div",{className:"d-flex flex-column gap-2 p-3",style:n,children:[i,a,s,r]})}),u[8]=n,u[9]=l):l=u[9],u[10]!==h||u[11]!==p||u[12]!==t||u[13]!==l?(d=(0,o.jsx)("div",{className:aS.A.diffTargetable,role:"region","aria-label":h,...t,id:p,children:l}),u[10]=h,u[11]=p,u[12]=t,u[13]=l,u[14]=d):d=u[14],d}:function({ariaLabel:e,testId:t,id:n,approximateLineCount:i=5}){let{data:a}=(0,m.ID)(),s=a?.lineSpacing==="compact"?20:25;return(0,o.jsx)("div",{className:aS.A.diffTargetable,role:"region","aria-label":e,...(0,aN.G)(t),id:n,children:(0,o.jsx)("div",{className:"border borderColor-muted",children:(0,o.jsxs)("div",{className:"d-flex flex-column gap-2 p-3",style:{minHeight:s*i},children:[(0,o.jsx)(aC.O,{height:"sm",variant:"rounded",width:"random"}),(0,o.jsx)(aC.O,{height:"sm",variant:"rounded",width:"random"}),(0,o.jsx)(aC.O,{height:"sm",variant:"rounded",width:"random"}),(0,o.jsx)(aC.O,{height:"sm",variant:"rounded",width:"random"})]})})})});try{aI.displayName||(aI.displayName="DiffEntryLoadingSkeleton")}catch{}var ak=n(90047),aL=n(19976),aT=n(73189),aD=n(21132);let aE=(0,d.Z6)()?function(){let e,t=(0,c.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)("div",{className:"color-bg-default position-relative border rounded-2 color-border-default mt-2 d-flex flex-column",children:(0,o.jsx)(td.E,{border:!1,spacious:!0,children:(0,o.jsx)(td.E.Heading,{children:"No files matched your search"})})}),t[0]=e):e=t[0],e}:function(){return(0,o.jsx)("div",{className:"color-bg-default position-relative border rounded-2 color-border-default mt-2 d-flex flex-column",children:(0,o.jsx)(td.E,{border:!1,spacious:!0,children:(0,o.jsx)(td.E.Heading,{children:"No files matched your search"})})})};try{aE.displayName||(aE.displayName="FilesChangedFilterBlankSlate")}catch{}let aR=(0,v.memo)((0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d=(0,c.c)(70),{diffEntryPathDigest:u,basePath:m,currentUser:h,diffManuallyExpanded:f,filteredDiffSummaries:p,headBranchName:g,headRepoName:y,headRepoOwner:b,isSelectingLineOrRange:j,pullRequestGlobalRelayId:w,repository:_,onScrollToAndFocusEntry:C}=e,N=(0,I.m9)()||u,S=(0,I.mY)();if(d[0]!==N||d[1]!==S){let e;d[3]!==N?(e=e=>e.pathDigest===N,d[3]=N,d[4]=e):e=d[4],t=S.find(e),d[0]=N,d[1]=S,d[2]=t}else t=d[2];let k=t,L=(0,I.Fm)(k?.path||""),T=k?.path||"",E=(0,I.jT)(T),R=(0,I.j5)(),A=(0,v.useRef)(!1);d[5]!==C||d[6]!==k?.loadingStatus||d[7]!==N?(n=()=>{A.current||k?.loadingStatus===aD.s.Loaded&&(C(N,{focusPathName:!0}),A.current=!0)},d[5]=C,d[6]=k?.loadingStatus,d[7]=N,d[8]=n):n=d[8];let O=k?.loadingStatus;if(d[9]!==j||d[10]!==C||d[11]!==N||d[12]!==O?(i=[j,C,O,N],d[9]=j,d[10]=C,d[11]=N,d[12]=O,d[13]=i):i=d[13],(0,v.useEffect)(n,i),!p.some(e=>e.path===T)){let e;return d[14]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(aE,{}),d[14]=e):e=d[14],e}if(k&&k.loadingStatus!==aD.s.Loaded){let e,t,n,i,a=`Loading ${T}`,s=`eager-load-${T}`,r=`diff-${T}`;d[15]!==a||d[16]!==s||d[17]!==r?(e=(0,o.jsx)(aI,{ariaLabel:a,testId:s,approximateLineCount:5,id:r}),d[15]=a,d[16]=s,d[17]=r,d[18]=e):e=d[18];let l=e,c=`diff-${T}`;d[19]===Symbol.for("react.memo_cache_sentinel")?(t=(0,x.$)(aS.A.diffTargetable,aS.A.diff),d[19]=t):t=d[19];let u=`${N}_${T}`,m=`#diff-${N}`,h=L?.linesAdded??0,f=L?.linesChanged??0,p=L?.linesDeleted??0;return d[20]!==T||d[21]!==R||d[22]!==m||d[23]!==h||d[24]!==f||d[25]!==p?(n=(0,o.jsx)("div",{className:aS.A.diffHeaderWrapper,children:(0,o.jsx)(ak.B,{areLinesExpanded:!1,canExpandOrCollapseLines:!1,fileLinkHref:m,canToggleRichDiff:!1,linesAdded:h,linesChanged:f,linesDeleted:p,newPath:T,patchStatus:"",path:T,onToggleExpandAllLines:aT.l,onToggleFileCollapsed:aT.l,onToggleDiffDisplay:aT.l,isInSingleFileMode:R})}),d[20]=T,d[21]=R,d[22]=m,d[23]=h,d[24]=f,d[25]=p,d[26]=n):n=d[26],d[27]!==l||d[28]!==c||d[29]!==u||d[30]!==n?(i=(0,o.jsxs)("div",{role:"region",id:c,className:t,"data-targeted":!1,"data-hpc":!0,children:[n,l]},u),d[27]=l,d[28]=c,d[29]=u,d[30]=n,d[31]=i):i=d[31],i}if(!E){let e;return d[32]!==T||d[33]!==u?(e=(0,o.jsx)(a_,{linesAdded:0,linesChanged:0,linesDeleted:0,path:T,pathDigest:u,newTreeEntry:void 0,oldTreeEntry:void 0,status:"MODIFIED"}),d[32]=T,d[33]=u,d[34]=e):e=d[34],e}d[35]!==E?(a=(0,o.jsx)(a_,{...E}),d[35]=E,d[36]=a):a=d[36];let P=E.reviewed??!1;return d[37]!==m||d[38]!==E.diffLines||d[39]!==E.diffSize||d[40]!==E.helpUrl||d[41]!==E.isBinary||d[42]!==E.isTooBig||d[43]!==E.linesAdded||d[44]!==E.linesChanged||d[45]!==E.linesDeleted||d[46]!==E.newCommitOid||d[47]!==E.newTreeEntry||d[48]!==E.objectId||d[49]!==E.oldCommitOid||d[50]!==E.oldTreeEntry||d[51]!==E.path||d[52]!==E.pathDigest||d[53]!==E.richDiff||d[54]!==E.status||d[55]!==E.submodule||d[56]!==E.truncatedReason||d[57]!==h||d[58]!==f||d[59]!==g||d[60]!==y||d[61]!==b||d[62]!==w||d[63]!==_||d[64]!==P?(s=(0,o.jsx)(aw,{basePath:m,changeType:E.status,currentUser:h,diffLines:E.diffLines,diffManuallyExpanded:f,diffSize:E.diffSize,headBranchName:g,headRepoName:y,headRepoOwner:b,helpUrl:E.helpUrl,isBinary:E.isBinary,isSelected:!1,isTooBig:E.isTooBig,linesAdded:E.linesAdded,linesChanged:E.linesChanged,linesDeleted:E.linesDeleted,newCommitOid:E.newCommitOid,newTreeEntry:E.newTreeEntry,objectId:E.objectId,oldCommitOid:E.oldCommitOid,oldTreeEntry:E.oldTreeEntry,path:E.path,pathDigest:E.pathDigest,pullRequestGlobalRelayId:w,repository:_,reviewed:P,richDiff:E.richDiff,status:E.status,submodule:E.submodule,truncatedReason:E.truncatedReason}),d[37]=m,d[38]=E.diffLines,d[39]=E.diffSize,d[40]=E.helpUrl,d[41]=E.isBinary,d[42]=E.isTooBig,d[43]=E.linesAdded,d[44]=E.linesChanged,d[45]=E.linesDeleted,d[46]=E.newCommitOid,d[47]=E.newTreeEntry,d[48]=E.objectId,d[49]=E.oldCommitOid,d[50]=E.oldTreeEntry,d[51]=E.path,d[52]=E.pathDigest,d[53]=E.richDiff,d[54]=E.status,d[55]=E.submodule,d[56]=E.truncatedReason,d[57]=h,d[58]=f,d[59]=g,d[60]=y,d[61]=b,d[62]=w,d[63]=_,d[64]=P,d[65]=s):s=d[65],d[66]===Symbol.for("react.memo_cache_sentinel")?(r=(0,o.jsx)(aL.nq,{}),d[66]=r):r=d[66],d[67]!==a||d[68]!==s?(l=(0,o.jsxs)(D.t,{fallback:a,children:[s,r]}),d[67]=a,d[68]=s,d[69]=l):l=d[69],l}:function({diffEntryPathDigest:e,basePath:t,currentUser:n,diffManuallyExpanded:i,filteredDiffSummaries:a,headBranchName:s,headRepoName:r,headRepoOwner:l,isSelectingLineOrRange:d,pullRequestGlobalRelayId:c,repository:u,onScrollToAndFocusEntry:m}){let h=(0,I.m9)()||e,f=(0,I.mY)().find(e=>e.pathDigest===h),p=(0,I.Fm)(f?.path||""),g=f?.path||"",y=(0,I.jT)(g),b=(0,I.j5)(),j=(0,v.useRef)(!1);if((0,v.useEffect)(()=>{j.current||f?.loadingStatus===aD.s.Loaded&&(m(h,{focusPathName:!0}),j.current=!0)},[d,m,f?.loadingStatus,h]),!a.some(e=>e.path===g))return(0,o.jsx)(aE,{});if(f&&f.loadingStatus!==aD.s.Loaded){let e=(0,o.jsx)(aI,{ariaLabel:`Loading ${g}`,testId:`eager-load-${g}`,approximateLineCount:5,id:`diff-${g}`});return(0,o.jsxs)("div",{role:"region",id:`diff-${g}`,className:(0,x.$)(aS.A.diffTargetable,aS.A.diff),"data-targeted":!1,"data-hpc":!0,children:[(0,o.jsx)("div",{className:aS.A.diffHeaderWrapper,children:(0,o.jsx)(ak.B,{areLinesExpanded:!1,canExpandOrCollapseLines:!1,fileLinkHref:`#diff-${h}`,canToggleRichDiff:!1,linesAdded:p?.linesAdded??0,linesChanged:p?.linesChanged??0,linesDeleted:p?.linesDeleted??0,newPath:g,patchStatus:"",path:g,onToggleExpandAllLines:aT.l,onToggleFileCollapsed:aT.l,onToggleDiffDisplay:aT.l,isInSingleFileMode:b})}),e]},`${h}_${g}`)}return y?(0,o.jsxs)(D.t,{fallback:(0,o.jsx)(a_,{...y}),children:[(0,o.jsx)(aw,{basePath:t,changeType:y.status,currentUser:n,diffLines:y.diffLines,diffManuallyExpanded:i,diffSize:y.diffSize,headBranchName:s,headRepoName:r,headRepoOwner:l,helpUrl:y.helpUrl,isBinary:y.isBinary,isSelected:!1,isTooBig:y.isTooBig,linesAdded:y.linesAdded,linesChanged:y.linesChanged,linesDeleted:y.linesDeleted,newCommitOid:y.newCommitOid,newTreeEntry:y.newTreeEntry,objectId:y.objectId,oldCommitOid:y.oldCommitOid,oldTreeEntry:y.oldTreeEntry,path:y.path,pathDigest:y.pathDigest,pullRequestGlobalRelayId:c,repository:u,reviewed:y.reviewed??!1,richDiff:y.richDiff,status:y.status,submodule:y.submodule,truncatedReason:y.truncatedReason}),(0,o.jsx)(aL.nq,{})]}):(0,o.jsx)(a_,{linesAdded:0,linesChanged:0,linesDeleted:0,path:g,pathDigest:e,newTreeEntry:void 0,oldTreeEntry:void 0,status:"MODIFIED"})});try{aR.displayName||(aR.displayName="SingleFileModePullRequestDiffEntry")}catch{}let aA=(0,d.Z6)()?function(){let e,t=(0,c.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)("div",{className:"color-bg-default position-relative border rounded-2 color-border-default mt-2 d-flex flex-column",children:(0,o.jsxs)(td.E,{border:!1,spacious:!0,children:[(0,o.jsx)(td.E.Heading,{children:"No changes to show"}),(0,o.jsx)(td.E.Description,{children:"This commit does not include any file changes"})]})}),t[0]=e):e=t[0],e}:function(){return(0,o.jsx)("div",{className:"color-bg-default position-relative border rounded-2 color-border-default mt-2 d-flex flex-column",children:(0,o.jsxs)(td.E,{border:!1,spacious:!0,children:[(0,o.jsx)(td.E.Heading,{children:"No changes to show"}),(0,o.jsx)(td.E.Description,{children:"This commit does not include any file changes"})]})})};try{aA.displayName||(aA.displayName="EmptyPullRequestBlankSlate")}catch{}let aO=(0,d.Z6)()?function(){let e,t,n,i,a,s,r=(0,c.c)(14),l=(0,v.useRef)(!0),{selectedFullDiffHash:o}=(0,n5.U)();r[0]!==o?(e=(0,n6.jU)(o)??void 0,r[0]=o,r[1]=e):e=r[1];let d=e;r[2]!==o?(t=(0,n6.yI)(o),r[2]=o,r[3]=t):t=r[3];let u=t;r[4]===Symbol.for("react.memo_cache_sentinel")?(n=new Map,r[4]=n):n=r[4];let m=(0,v.useRef)(n);r[5]===Symbol.for("react.memo_cache_sentinel")?(i=()=>m.current,r[5]=i):i=r[5];let h=i;r[6]!==u||r[7]!==o?(a=(e,t)=>{let{focusPathName:n}=void 0===t?{}:t,i=h().get(e);if(!i)return;let a=i,s=i.querySelector("button");if(n&&(s=i.querySelector("a")),u){let e=o.split("-")[0],t=i.querySelector(`[data-line-anchor=diff-${e}]`);t&&(s=a=t)}else l.current||(a=null);if(a){let e=ey.cg?.scrollY??0,t=a.getBoundingClientRect().top+e-57-60;ey.cg?.scrollTo({top:t,left:0})}s&&s.focus(),l.current=!1},r[6]=u,r[7]=o,r[8]=a):a=r[8];let f=a;return r[9]!==u||r[10]!==f||r[11]!==o||r[12]!==d?(s={onScrollToAndFocusEntry:f,selectedFullDiffHash:o,selectedPathDigest:d,isSelectingLineOrRange:u,getTargetableEntriesMap:h},r[9]=u,r[10]=f,r[11]=o,r[12]=d,r[13]=s):s=r[13],s}:function(){let e=(0,v.useRef)(!0),{selectedFullDiffHash:t}=(0,n5.U)(),n=(0,n6.jU)(t)??void 0,i=(0,n6.yI)(t),a=(0,v.useRef)(new Map),s=(0,v.useCallback)(()=>a.current,[]);return{onScrollToAndFocusEntry:(0,v.useCallback)((n,{focusPathName:a}={})=>{let r=s().get(n);if(!r)return;let l=r,o=r.querySelector("button");if(a&&(o=r.querySelector("a")),i){let e=t.split("-")[0],n=r.querySelector(`[data-line-anchor=diff-${e}]`);n&&(o=l=n)}else e.current||(l=null);if(l){let e=ey.cg?.scrollY??0,t=l.getBoundingClientRect().top+e-57-60;ey.cg?.scrollTo({top:t,left:0})}o&&o.focus(),e.current=!1},[s,i,t]),selectedFullDiffHash:t,selectedPathDigest:n,isSelectingLineOrRange:i,getTargetableEntriesMap:s}},aP=(0,v.memo)(function({basePath:e,currentUser:t,filteredDiffSummaries:n,headBranchName:i,headRepoName:a,headRepoOwner:s,pullRequestGlobalRelayId:r,repository:l}){let d=(0,I.HZ)(),c=(0,v.useMemo)(()=>Object.values(d??{}).filter(e=>null!==e),[d])[0],u=(0,I.m9)(),{onScrollToAndFocusEntry:m,getTargetableEntriesMap:h,isSelectingLineOrRange:f}=aO(),p=(0,I.qg)(),g=(0,I.uh)()[0],y=(0,I.zK)(),x=(0,I.mF)(),{navigateToSelectedComment:b,navigateToSelectedAnnotation:j,handleHashUpdate:w}=(0,I.Lh)(),{setSelectedHash:_}=(0,n5.U)(),C=(0,v.useRef)(!0),S=(0,I.mY)().find(e=>e.pathDigest===u),{loadMore:k}=(0,I.pV)(),L=(0,v.useCallback)(()=>{y?b(y):x&&!isNaN(Number(x))?j(Number(x)):u&&S?k(S):!u&&g?.pathDigest&&(_(g.pathDigest),(0,N.Zu)(`diff-${g.pathDigest}`))},[g?.pathDigest,k,j,b,x,y,u,S,_]);if((0,v.useEffect)(()=>{C.current&&(L(),C.current=!1)},[]),(0,v.useEffect)(()=>{let e=()=>{w()};return w(),window.addEventListener("hashchange",e),()=>{window.removeEventListener("hashchange",e)}},[w]),0===p)return(0,o.jsx)(aA,{});if(0===n.length)return(0,o.jsx)(aE,{});let T=u||c?.pathDigest||g?.pathDigest;return T?(0,o.jsx)("div",{ref:e=>{let t=h();e?t.set(T,e):t.delete(T)},children:(0,o.jsx)(aR,{diffEntryPathDigest:T,basePath:e,currentUser:t,diffManuallyExpanded:!1,filteredDiffSummaries:n,headBranchName:i,headRepoName:a,headRepoOwner:s,pullRequestGlobalRelayId:r,repository:l,onScrollToAndFocusEntry:m,isSelectingLineOrRange:f})}):null});try{aP.displayName||(aP.displayName="SingleFileModeDiffEntryNavigator")}catch{}let aF=(0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(4),{lines:s}=e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(t={padding:"var(--base-size-6) var(--base-size-8)",borderColor:"var(--borderColor-muted)"},a[0]=t):t=a[0],a[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,o.jsx)("div",{className:"border-bottom bgColor-muted rounded-top-2",style:t,children:(0,o.jsx)("div",{className:"d-flex flex-items-center",style:{height:"var(--control-small-size)"},children:(0,o.jsx)(aC.O,{height:"sm",variant:"rounded",width:"random"})})}),a[1]=n):n=a[1],a[2]!==s?(i=(0,o.jsxs)("div",{className:"border borderColor-muted rounded",children:[n,(0,o.jsx)("div",{className:"d-flex flex-column gap-2 p-3",children:Array.from({length:s||5}).map(aM)})]}),a[2]=s,a[3]=i):i=a[3],i}:function({lines:e}){return(0,o.jsxs)("div",{className:"border borderColor-muted rounded",children:[(0,o.jsx)("div",{className:"border-bottom bgColor-muted rounded-top-2",style:{padding:"var(--base-size-6) var(--base-size-8)",borderColor:"var(--borderColor-muted)"},children:(0,o.jsx)("div",{className:"d-flex flex-items-center",style:{height:"var(--control-small-size)"},children:(0,o.jsx)(aC.O,{height:"sm",variant:"rounded",width:"random"})})}),(0,o.jsx)("div",{className:"d-flex flex-column gap-2 p-3",children:Array.from({length:e||5}).map((e,t)=>(0,o.jsx)(aC.O,{height:"sm",variant:"rounded",width:"random"},`loading-skeleton-${t}`))})]})};function aM(e,t){return(0,o.jsx)(aC.O,{height:"sm",variant:"rounded",width:"random"},`loading-skeleton-${t}`)}try{aF.displayName||(aF.displayName="EntireDiffLoadingSkeleton")}catch{}let a$=(0,v.memo)((0,d.Z6)()?function(e){let t,n,i,a,s=(0,c.c)(15),{progressiveDiffEntry:r,approximateLineCount:l}=e,d=void 0===l?5:l,{loadMore:u}=(0,I.pV)(),m=(0,no.u)("pulls-files-skip-prefer-any-solo-entry"),[h,f]=(0,v.useState)(!1);s[0]!==h||s[1]!==u||s[2]!==r||s[3]!==m?(t=e=>{e[0]?.isIntersecting&&!h&&(f(!0),u(r,{preferAnySoloEntry:!m}))},s[0]=h,s[1]=u,s[2]=r,s[3]=m,s[4]=t):t=s[4],s[5]===Symbol.for("react.memo_cache_sentinel")?(n={rootMargin:"-72px"},s[5]=n):n=s[5];let[p,g]=(0,nV.B)(t,n),y=`Loading ${r.path}`,x=`lazy-load-${r.path}`,b=`diff-${r.pathDigest}`;return s[6]!==d||s[7]!==y||s[8]!==x||s[9]!==b?(i=(0,o.jsx)(aI,{ariaLabel:y,testId:x,id:b,approximateLineCount:d}),s[6]=d,s[7]=y,s[8]=x,s[9]=b,s[10]=i):i=s[10],s[11]!==p||s[12]!==i||s[13]!==g?(a=(0,o.jsx)(nU.X,{onObserve:p,onUnobserve:g,children:i}),s[11]=p,s[12]=i,s[13]=g,s[14]=a):a=s[14],a}:function({progressiveDiffEntry:e,approximateLineCount:t=5}){let{loadMore:n}=(0,I.pV)(),i=(0,no.u)("pulls-files-skip-prefer-any-solo-entry"),[a,s]=(0,v.useState)(!1),[r,l]=(0,nV.B)(t=>{t[0]?.isIntersecting&&!a&&(s(!0),n(e,{preferAnySoloEntry:!i}))},{rootMargin:"-72px"});return(0,o.jsx)(nU.X,{onObserve:r,onUnobserve:l,children:(0,o.jsx)(aI,{ariaLabel:`Loading ${e.path}`,testId:`lazy-load-${e.path}`,id:`diff-${e.pathDigest}`,approximateLineCount:t})})});try{a$.displayName||(a$.displayName="LazyDiffEntryLoadingSkeleton")}catch{}let aB=(0,v.memo)((0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(10),{progressiveDiffEntry:s,approximateLineCount:r}=e,l=void 0===r?5:r,{loadMore:d}=(0,I.pV)(),u=(0,no.u)("pulls-files-skip-prefer-any-solo-entry");a[0]!==d||a[1]!==s||a[2]!==u?(t=()=>{d(s,{preferAnySoloEntry:!u})},n=[d,s,u],a[0]=d,a[1]=s,a[2]=u,a[3]=t,a[4]=n):(t=a[3],n=a[4]),(0,v.useEffect)(t,n);let m=`Loading ${s.path}`,h=`eager-load-${s.path}`,f=`diff-${s.pathDigest}`;return a[5]!==l||a[6]!==m||a[7]!==h||a[8]!==f?(i=(0,o.jsx)(aI,{ariaLabel:m,testId:h,id:f,approximateLineCount:l}),a[5]=l,a[6]=m,a[7]=h,a[8]=f,a[9]=i):i=a[9],i}:function({progressiveDiffEntry:e,approximateLineCount:t=5}){let{loadMore:n}=(0,I.pV)(),i=(0,no.u)("pulls-files-skip-prefer-any-solo-entry");return(0,v.useEffect)(()=>{n(e,{preferAnySoloEntry:!i})},[n,e,i]),(0,o.jsx)(aI,{ariaLabel:`Loading ${e.path}`,testId:`eager-load-${e.path}`,id:`diff-${e.pathDigest}`,approximateLineCount:t})});try{aB.displayName||(aB.displayName="EagerDiffEntryLoadingSkeleton")}catch{}let aV=(0,v.memo)((0,d.Z6)()?function(e){let t,n=(0,c.c)(5),{progressiveDiffEntry:i,approximateLineCount:a}=e,s=void 0===a?5:a,r=`Loading ${i.path}`,l=`hidden-load-${i.path}`,d=`diff-${i.pathDigest}`;return n[0]!==s||n[1]!==r||n[2]!==l||n[3]!==d?(t=(0,o.jsx)(aI,{ariaLabel:r,testId:l,id:d,approximateLineCount:s}),n[0]=s,n[1]=r,n[2]=l,n[3]=d,n[4]=t):t=n[4],t}:function({progressiveDiffEntry:e,approximateLineCount:t=5}){return(0,o.jsx)(aI,{ariaLabel:`Loading ${e.path}`,testId:`hidden-load-${e.path}`,id:`diff-${e.pathDigest}`,approximateLineCount:t})});try{aV.displayName||(aV.displayName="HiddenDiffEntryLoadingSkeleton")}catch{}let aU=(0,v.memo)(aG,(e,t)=>e.basePath===t.basePath&&e.progressiveDiffEntry.pathDigest===t.progressiveDiffEntry.pathDigest&&e.progressiveDiffEntry.renderMode===t.progressiveDiffEntry.renderMode&&e.isSelected===t.isSelected&&e.currentUser.splitPreference===t.currentUser.splitPreference&&e.currentUser.commentsPreference===t.currentUser.commentsPreference&&e.currentUser.lineSpacing===t.currentUser.lineSpacing),aq=(0,d.Z6)();function aG(e){return aq?function(e){let t,n,i,a,s,r=(0,c.c)(70),{basePath:l,currentUser:d,diffManuallyExpanded:u,headBranchName:m,headRepoName:h,headRepoOwner:f,isSelected:p,isSelectingLineOrRange:g,onScrollToAndFocusEntry:y,progressiveDiffEntry:b,pullRequestGlobalRelayId:j,repository:w,testRenderFn:_}=e,C=void 0!==g&&g,N=(0,I.jT)(b.path),S=(0,I.Fm)(b.path),k=(0,I.j5)();_&&_();let L=(0,v.useRef)(!1);if(r[0]!==p||r[1]!==C||r[2]!==y||r[3]!==b.pathDigest||r[4]!==b.renderMode?(t=()=>{if(!L.current){if(!L.current&&void 0===p){let e=ey.fV.hash??"",t=(0,n6.pd)(e)??"";(t=t.replace("diff-","").replace("#",""))!==b.pathDigest&&(L.current=!0)}if(p&&"HIDE"!==b.renderMode&&(!C||"RENDER"===b.renderMode)){let e=ey.cg?.document.activeElement;if(e?.closest("#diff-file-tree-filter"))return;L.current=!0,y(b.pathDigest)}}},n=[p,C,y,b.pathDigest,b.renderMode],r[0]=p,r[1]=C,r[2]=y,r[3]=b.pathDigest,r[4]=b.renderMode,r[5]=t,r[6]=n):(t=r[5],n=r[6]),(0,v.useEffect)(t,n),"HIDE"===b.renderMode||"LAZY_AUTO_LOAD"===b.renderMode||"EAGER_AUTO_LOAD"===b.renderMode){let e,t,n,i;r[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(o.Fragment,{}),r[7]=e):e=r[7];let a=e,s=S?.linesChanged??5;if((S?.changeType==="REMOVED"||S?.changeType==="DELETED")&&(s=5),"HIDE"===b.renderMode){let e;r[8]!==s||r[9]!==b?(e=(0,o.jsx)(aV,{progressiveDiffEntry:b,approximateLineCount:s}),r[8]=s,r[9]=b,r[10]=e):e=r[10],a=e}else if("LAZY_AUTO_LOAD"===b.renderMode){let e;r[11]!==s||r[12]!==b?(e=(0,o.jsx)(a$,{progressiveDiffEntry:b,approximateLineCount:s}),r[11]=s,r[12]=b,r[13]=e):e=r[13],a=e}else if("EAGER_AUTO_LOAD"===b.renderMode){let e;r[14]!==s||r[15]!==b?(e=(0,o.jsx)(aB,{progressiveDiffEntry:b,approximateLineCount:s}),r[14]=s,r[15]=b,r[16]=e):e=r[16],a=e}let l=`diff-${b.pathDigest}`;r[17]===Symbol.for("react.memo_cache_sentinel")?(t=(0,x.$)(aS.A.diffTargetable,aS.A.diff),r[17]=t):t=r[17];let d=p??!1,c=`${b.pathDigest}_${b.path}`,u=`#diff-${b.pathDigest}`,m=S?.linesAdded??0,h=S?.linesChanged??0,f=S?.linesDeleted??0;return r[18]!==k||r[19]!==b.path||r[20]!==m||r[21]!==h||r[22]!==f||r[23]!==u?(n=(0,o.jsx)("div",{className:aS.A.diffHeaderWrapper,children:(0,o.jsx)(ak.B,{areLinesExpanded:!1,canExpandOrCollapseLines:!1,fileLinkHref:u,canToggleRichDiff:!1,linesAdded:m,linesChanged:h,linesDeleted:f,newPath:b.path,patchStatus:"",path:b.path,onToggleExpandAllLines:aT.l,onToggleFileCollapsed:aT.l,onToggleDiffDisplay:aT.l,isInSingleFileMode:k})}),r[18]=k,r[19]=b.path,r[20]=m,r[21]=h,r[22]=f,r[23]=u,r[24]=n):n=r[24],r[25]!==a||r[26]!==n||r[27]!==l||r[28]!==d||r[29]!==c?(i=(0,o.jsxs)("div",{role:"region",id:l,className:t,"data-targeted":d,children:[n,a]},c),r[25]=a,r[26]=n,r[27]=l,r[28]=d,r[29]=c,r[30]=i):i=r[30],i}if(!N){let e;return r[31]!==b.path||r[32]!==b.pathDigest?(e=(0,o.jsx)(a_,{linesAdded:0,linesChanged:0,linesDeleted:0,path:b.path,pathDigest:b.pathDigest,newTreeEntry:void 0,oldTreeEntry:void 0,status:"MODIFIED"}),r[31]=b.path,r[32]=b.pathDigest,r[33]=e):e=r[33],e}r[34]!==N?(i=(0,o.jsx)(a_,{...N}),r[34]=N,r[35]=i):i=r[35];let T=p??!1,E=N.reviewed??!1;return r[36]!==l||r[37]!==d||r[38]!==N.diffLines||r[39]!==N.diffSize||r[40]!==N.helpUrl||r[41]!==N.isBinary||r[42]!==N.isSubmodule||r[43]!==N.isTooBig||r[44]!==N.linesAdded||r[45]!==N.linesChanged||r[46]!==N.linesDeleted||r[47]!==N.newCommitOid||r[48]!==N.newTreeEntry||r[49]!==N.objectId||r[50]!==N.oldCommitOid||r[51]!==N.oldTreeEntry||r[52]!==N.path||r[53]!==N.pathDigest||r[54]!==N.richDiff||r[55]!==N.status||r[56]!==N.submodule||r[57]!==N.truncatedReason||r[58]!==u||r[59]!==m||r[60]!==h||r[61]!==f||r[62]!==j||r[63]!==w||r[64]!==T||r[65]!==E?(a=(0,o.jsx)(aw,{basePath:l,changeType:N.status,currentUser:d,diffLines:N.diffLines,diffManuallyExpanded:u,diffSize:N.diffSize,headBranchName:m,headRepoName:h,headRepoOwner:f,helpUrl:N.helpUrl,isBinary:N.isBinary,isSelected:T,isSubmodule:N.isSubmodule,isTooBig:N.isTooBig,linesAdded:N.linesAdded,linesChanged:N.linesChanged,linesDeleted:N.linesDeleted,newCommitOid:N.newCommitOid,newTreeEntry:N.newTreeEntry,objectId:N.objectId,oldCommitOid:N.oldCommitOid,oldTreeEntry:N.oldTreeEntry,path:N.path,pathDigest:N.pathDigest,pullRequestGlobalRelayId:j,repository:w,reviewed:E,richDiff:N.richDiff,status:N.status,submodule:N.submodule,truncatedReason:N.truncatedReason}),r[36]=l,r[37]=d,r[38]=N.diffLines,r[39]=N.diffSize,r[40]=N.helpUrl,r[41]=N.isBinary,r[42]=N.isSubmodule,r[43]=N.isTooBig,r[44]=N.linesAdded,r[45]=N.linesChanged,r[46]=N.linesDeleted,r[47]=N.newCommitOid,r[48]=N.newTreeEntry,r[49]=N.objectId,r[50]=N.oldCommitOid,r[51]=N.oldTreeEntry,r[52]=N.path,r[53]=N.pathDigest,r[54]=N.richDiff,r[55]=N.status,r[56]=N.submodule,r[57]=N.truncatedReason,r[58]=u,r[59]=m,r[60]=h,r[61]=f,r[62]=j,r[63]=w,r[64]=T,r[65]=E,r[66]=a):a=r[66],r[67]!==i||r[68]!==a?(s=(0,o.jsx)(D.t,{fallback:i,children:a}),r[67]=i,r[68]=a,r[69]=s):s=r[69],s}(e):function({basePath:e,currentUser:t,diffManuallyExpanded:n,headBranchName:i,headRepoName:a,headRepoOwner:s,isSelected:r,isSelectingLineOrRange:l=!1,onScrollToAndFocusEntry:d,progressiveDiffEntry:c,pullRequestGlobalRelayId:u,repository:m,testRenderFn:h}){let f=(0,I.jT)(c.path),p=(0,I.Fm)(c.path),g=(0,I.j5)();h&&h();let y=(0,v.useRef)(!1);if((0,v.useEffect)(()=>{if(!y.current){if(!y.current&&void 0===r){let e=ey.fV.hash??"",t=(0,n6.pd)(e)??"";(t=t.replace("diff-","").replace("#",""))!==c.pathDigest&&(y.current=!0)}if(r&&"HIDE"!==c.renderMode&&(!l||"RENDER"===c.renderMode)){let e=ey.cg?.document.activeElement;if(e?.closest("#diff-file-tree-filter"))return;y.current=!0,d(c.pathDigest)}}},[r,l,d,c.pathDigest,c.renderMode]),"HIDE"===c.renderMode||"LAZY_AUTO_LOAD"===c.renderMode||"EAGER_AUTO_LOAD"===c.renderMode){let e=(0,o.jsx)(o.Fragment,{}),t=p?.linesChanged??5;return(p?.changeType==="REMOVED"||p?.changeType==="DELETED")&&(t=5),"HIDE"===c.renderMode?e=(0,o.jsx)(aV,{progressiveDiffEntry:c,approximateLineCount:t}):"LAZY_AUTO_LOAD"===c.renderMode?e=(0,o.jsx)(a$,{progressiveDiffEntry:c,approximateLineCount:t}):"EAGER_AUTO_LOAD"===c.renderMode&&(e=(0,o.jsx)(aB,{progressiveDiffEntry:c,approximateLineCount:t})),(0,o.jsxs)("div",{role:"region",id:`diff-${c.pathDigest}`,className:(0,x.$)(aS.A.diffTargetable,aS.A.diff),"data-targeted":r??!1,children:[(0,o.jsx)("div",{className:aS.A.diffHeaderWrapper,children:(0,o.jsx)(ak.B,{areLinesExpanded:!1,canExpandOrCollapseLines:!1,fileLinkHref:`#diff-${c.pathDigest}`,canToggleRichDiff:!1,linesAdded:p?.linesAdded??0,linesChanged:p?.linesChanged??0,linesDeleted:p?.linesDeleted??0,newPath:c.path,patchStatus:"",path:c.path,onToggleExpandAllLines:aT.l,onToggleFileCollapsed:aT.l,onToggleDiffDisplay:aT.l,isInSingleFileMode:g})}),e]},`${c.pathDigest}_${c.path}`)}return f?(0,o.jsx)(D.t,{fallback:(0,o.jsx)(a_,{...f}),children:(0,o.jsx)(aw,{basePath:e,changeType:f.status,currentUser:t,diffLines:f.diffLines,diffManuallyExpanded:n,diffSize:f.diffSize,headBranchName:i,headRepoName:a,headRepoOwner:s,helpUrl:f.helpUrl,isBinary:f.isBinary,isSelected:r??!1,isSubmodule:f.isSubmodule,isTooBig:f.isTooBig,linesAdded:f.linesAdded,linesChanged:f.linesChanged,linesDeleted:f.linesDeleted,newCommitOid:f.newCommitOid,newTreeEntry:f.newTreeEntry,objectId:f.objectId,oldCommitOid:f.oldCommitOid,oldTreeEntry:f.oldTreeEntry,path:f.path,pathDigest:f.pathDigest,pullRequestGlobalRelayId:u,repository:m,reviewed:f.reviewed??!1,richDiff:f.richDiff,status:f.status,submodule:f.submodule,truncatedReason:f.truncatedReason})}):(0,o.jsx)(a_,{linesAdded:0,linesChanged:0,linesDeleted:0,path:c.path,pathDigest:c.pathDigest,newTreeEntry:void 0,oldTreeEntry:void 0,status:"MODIFIED"})}(e)}try{aU.displayName||(aU.displayName="ProgressivePullRequestDiffEntry")}catch{}try{aG.displayName||(aG.displayName="ProgressivePullRequestDiffEntryUnmemoized")}catch{}let aH="PullRequestDiffsAnimation-module__wrapper--j5QjR",aK="PullRequestDiffsAnimation-module__imageContainer--ISOgX",aW="PullRequestDiffsAnimation-module__image--MMHno",az="PullRequestDiffsAnimation-module__firstFrameImage--DV3ZK",aQ="PullRequestDiffsAnimation-module__animatedImage--yjDlC",aZ="PullRequestDiffsAnimation-module__reducedMotionImage--cBS3Y";var aJ=n(69895);let aY=n.p+"mona-hifive-first-frame-0d428028d4d7.png",aX=n.p+"mona-hifive-reduced-motion-3a22d8eb870c.png",a0=n.p+"mona-hifive-loop-once-8c78f1af57d0.gif",a1=(0,d.Z6)()?()=>{let e,t,n,i,a,s,r,l,d=(0,c.c)(12),u=(0,aJ.j)(),m=(0,v.useRef)(null),h=(0,v.useRef)(null);d[0]!==u?(e=e=>{e?(e=>{let t;if(u)return;let n=new IntersectionObserver((e,n)=>{for(let i of e)i.isIntersecting&&(t=setTimeout(()=>{i.target.style.display="none",m.current&&(m.current.style.opacity="1"),n.unobserve(i.target)},1e3))},{threshold:1});return h.current=n,n.observe(e),()=>{n.disconnect(),t&&clearTimeout(t)}})(e):h.current&&(h.current.disconnect(),h.current=null)},d[0]=u,d[1]=e):e=d[1];let f=e;return d[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)("img",{src:a0,alt:"GIF of two octocats high fiving each other",className:(0,x.$)(aW,aQ),ref:m}),d[2]=t):t=d[2],d[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,x.$)(aW,az),d[3]=n):n=d[3],d[4]!==f?(i=(0,o.jsx)("img",{src:aY,alt:"Two octocats",className:n,ref:f}),d[4]=f,d[5]=i):i=d[5],d[6]===Symbol.for("react.memo_cache_sentinel")?(a=(0,o.jsx)("img",{src:aX,alt:"Two octocats high fiving each other",className:(0,x.$)(aW,aZ)}),d[6]=a):a=d[6],d[7]!==i?(s=(0,o.jsxs)("div",{className:aK,children:[t,i,a]}),d[7]=i,d[8]=s):s=d[8],d[9]===Symbol.for("react.memo_cache_sentinel")?(r=(0,o.jsx)("span",{className:"fgColor-muted",children:"You made it to the end!"}),d[9]=r):r=d[9],d[10]!==s?(l=(0,o.jsxs)("div",{className:aH,children:[s,r]}),d[10]=s,d[11]=l):l=d[11],l}:()=>{let e=(0,aJ.j)(),t=(0,v.useRef)(null),n=(0,v.useRef)(null);return(0,o.jsxs)("div",{className:aH,children:[(0,o.jsxs)("div",{className:aK,children:[(0,o.jsx)("img",{src:a0,alt:"GIF of two octocats high fiving each other",className:(0,x.$)(aW,aQ),ref:t}),(0,o.jsx)("img",{src:aY,alt:"Two octocats",className:(0,x.$)(aW,az),ref:i=>{i?(i=>{let a;if(e)return;let s=new IntersectionObserver((e,n)=>{for(let i of e)i.isIntersecting&&(a=setTimeout(()=>{i.target.style.display="none",t.current&&(t.current.style.opacity="1"),n.unobserve(i.target)},1e3))},{threshold:1});return n.current=s,s.observe(i),()=>{s.disconnect(),a&&clearTimeout(a)}})(i):n.current&&(n.current.disconnect(),n.current=null)}}),(0,o.jsx)("img",{src:aX,alt:"Two octocats high fiving each other",className:(0,x.$)(aW,aZ)})]}),(0,o.jsx)("span",{className:"fgColor-muted",children:"You made it to the end!"})]})},a2=(0,v.memo)(a1);try{a1.displayName||(a1.displayName="PullRequestDiffsAnimationComponent")}catch{}try{a2.displayName||(a2.displayName="PullRequestDiffsAnimation")}catch{}let a3=(0,v.memo)(a5),a4=(0,d.Z6)();function a5(e){return a4?function(e){let t,n,i,a,s,r=(0,c.c)(40),{basePath:l,currentUser:d,filteredDiffSummaries:u,headBranchName:m,headRepoName:h,headRepoOwner:f,onSetFilterState:p,pullRequestGlobalRelayId:g,repository:y,showPullRequestGroups:x}=e,[b]=(0,v.useState)(!1),j=(0,v.useRef)(null),w=(0,I.$W)(u),_=(0,I.JA)(),{onScrollToAndFocusEntry:C,getTargetableEntriesMap:N,selectedPathDigest:S,isSelectingLineOrRange:k}=aO(),L=(0,I.qg)(),T=w.length>=15;if(0===L){let e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(aA,{}),r[0]=e):e=r[0],e}if(0===u.length){let e;return r[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(aE,{}),r[1]=e):e=r[1],e}if(r[2]!==_||r[3]!==p||r[4]!==x?(t=x&&_?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"f4 text-bold mb-0",children:[(0,o.jsx)("span",{className:"fgColor-accent",children:(0,o.jsx)(A.A,{href:"",onClick:e=>{e.preventDefault(),p({activeChangeGroupId:void 0})},children:"All files"})})," ",(0,o.jsx)("span",{className:"fgColor-muted text-normal",children:"/"})," ",_.name]}),_.description?.trim()?(0,o.jsx)("p",{children:_.description}):null]}):null,r[2]=_,r[3]=p,r[4]=x,r[5]=t):t=r[5],r[6]!==l||r[7]!==d||r[8]!==w||r[9]!==b||r[10]!==N||r[11]!==m||r[12]!==h||r[13]!==f||r[14]!==k||r[15]!==C||r[16]!==g||r[17]!==y||r[18]!==S){let e;r[20]!==l||r[21]!==d||r[22]!==b||r[23]!==N||r[24]!==m||r[25]!==h||r[26]!==f||r[27]!==k||r[28]!==C||r[29]!==g||r[30]!==y||r[31]!==S?(e=e=>(0,o.jsx)("div",{ref:t=>{let n=N();t?n.set(e.pathDigest,t):n.delete(e.pathDigest)},children:(0,o.jsx)(aU,{basePath:l,currentUser:d,diffManuallyExpanded:b,headBranchName:m,headRepoName:h,headRepoOwner:f,pullRequestGlobalRelayId:g,isSelected:void 0===S?void 0:e.pathDigest===S,isSelectingLineOrRange:k,onScrollToAndFocusEntry:C,progressiveDiffEntry:e,repository:y})},e.pathDigest),r[20]=l,r[21]=d,r[22]=b,r[23]=N,r[24]=m,r[25]=h,r[26]=f,r[27]=k,r[28]=C,r[29]=g,r[30]=y,r[31]=S,r[32]=e):e=r[32],n=w.map(e),r[6]=l,r[7]=d,r[8]=w,r[9]=b,r[10]=N,r[11]=m,r[12]=h,r[13]=f,r[14]=k,r[15]=C,r[16]=g,r[17]=y,r[18]=S,r[19]=n}else n=r[19];return r[33]!==T?(i=T&&(0,o.jsx)(a2,{}),r[33]=T,r[34]=i):i=r[34],r[35]===Symbol.for("react.memo_cache_sentinel")?(a=(0,o.jsx)(aL.nq,{}),r[35]=a):a=r[35],r[36]!==t||r[37]!==n||r[38]!==i?(s=(0,o.jsxs)("div",{ref:j,"data-hpc":!0,className:"d-flex flex-column gap-3",children:[t,n,i,a]}),r[36]=t,r[37]=n,r[38]=i,r[39]=s):s=r[39],s}(e):function({basePath:e,currentUser:t,filteredDiffSummaries:n,headBranchName:i,headRepoName:a,headRepoOwner:s,onSetFilterState:r,pullRequestGlobalRelayId:l,repository:d,showPullRequestGroups:c}){let[u,m]=(0,v.useState)(!1),h=(0,v.useRef)(null),f=(0,I.$W)(n),p=(0,I.JA)(),{onScrollToAndFocusEntry:g,getTargetableEntriesMap:y,selectedPathDigest:x,isSelectingLineOrRange:b}=aO(),j=(0,I.qg)(),w=f.length;return 0===j?(0,o.jsx)(aA,{}):0===n.length?(0,o.jsx)(aE,{}):(0,o.jsxs)("div",{ref:h,"data-hpc":!0,className:"d-flex flex-column gap-3",children:[c&&p?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"f4 text-bold mb-0",children:[(0,o.jsx)("span",{className:"fgColor-accent",children:(0,o.jsx)(A.A,{href:"",onClick:e=>{e.preventDefault(),r({activeChangeGroupId:void 0})},children:"All files"})})," ",(0,o.jsx)("span",{className:"fgColor-muted text-normal",children:"/"})," ",p.name]}),p.description?.trim()?(0,o.jsx)("p",{children:p.description}):null]}):null,f.map(n=>(0,o.jsx)("div",{ref:e=>{let t=y();e?t.set(n.pathDigest,e):t.delete(n.pathDigest)},children:(0,o.jsx)(aU,{basePath:e,currentUser:t,diffManuallyExpanded:u,headBranchName:i,headRepoName:a,headRepoOwner:s,pullRequestGlobalRelayId:l,isSelected:void 0===x?void 0:n.pathDigest===x,isSelectingLineOrRange:b,onScrollToAndFocusEntry:g,progressiveDiffEntry:n,repository:d})},n.pathDigest)),w>=15&&(0,o.jsx)(a2,{}),(0,o.jsx)(aL.nq,{})]})}(e)}try{a3.displayName||(a3.displayName="PullRequestDiffsList")}catch{}try{a5.displayName||(a5.displayName="PullRequestDiffsListUnmemoized")}catch{}var a6=n(51220),a7=n(56092);let a8="PullRequestVirtualizedDiffRow-module__virtualizedDiffRow--mhuB6",a9=(0,v.memo)((0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(48),{virtualRow:s,virtualizedDiffEntry:r,diffEntry:l,diffSummary:d,scrollMargin:u,measureElement:m,basePath:h,currentUser:f,headBranchName:p,headRepoName:g,headRepoOwner:y,pullRequestGlobalRelayId:x,repository:v,selectedPathDigest:b}=e;if(!r)return null;let j=`translateY(${s.start-u}px)`;a[0]!==j?(t={transform:j},a[0]=j,a[1]=t):t=a[1];let w=t;if("NotLoaded"===r.loadingStatus){let e,t,n=d?.linesChanged??5;(d?.changeType==="REMOVED"||d?.changeType==="DELETED")&&(n=5);let i=`Loading ${r.path}`,l=`lazy-load-${r.path}`,c=`diff-${r.pathDigest}`;return a[2]!==n||a[3]!==i||a[4]!==l||a[5]!==c?(e=(0,o.jsx)(aI,{ariaLabel:i,testId:l,id:c,approximateLineCount:n}),a[2]=n,a[3]=i,a[4]=l,a[5]=c,a[6]=e):e=a[6],a[7]!==m||a[8]!==e||a[9]!==s.index||a[10]!==w?(t=(0,o.jsx)("div",{style:w,className:a8,ref:m,"data-index":s.index,children:e}),a[7]=m,a[8]=e,a[9]=s.index,a[10]=w,a[11]=t):t=a[11],t}if(!l)return null;let _=-(s.start-u),C=void 0===b?void 0:l.pathDigest===b,N=l.reviewed??!1;return a[12]!==h||a[13]!==f||a[14]!==l.diffLines||a[15]!==l.diffSize||a[16]!==l.helpUrl||a[17]!==l.isBinary||a[18]!==l.isSubmodule||a[19]!==l.isTooBig||a[20]!==l.linesAdded||a[21]!==l.linesChanged||a[22]!==l.linesDeleted||a[23]!==l.newCommitOid||a[24]!==l.newTreeEntry||a[25]!==l.objectId||a[26]!==l.oldCommitOid||a[27]!==l.oldTreeEntry||a[28]!==l.path||a[29]!==l.pathDigest||a[30]!==l.richDiff||a[31]!==l.status||a[32]!==l.submodule||a[33]!==l.truncatedReason||a[34]!==p||a[35]!==g||a[36]!==y||a[37]!==x||a[38]!==v||a[39]!==_||a[40]!==C||a[41]!==N?(n=(0,o.jsx)(aw,{basePath:h,changeType:l.status,currentUser:f,diffLines:l.diffLines,diffManuallyExpanded:!1,diffSize:l.diffSize,headerStickyOffset:_,headBranchName:p,headRepoName:g,headRepoOwner:y,helpUrl:l.helpUrl,isBinary:l.isBinary,isSelected:C,isSubmodule:l.isSubmodule,isTooBig:l.isTooBig,linesAdded:l.linesAdded,linesChanged:l.linesChanged,linesDeleted:l.linesDeleted,newCommitOid:l.newCommitOid,newTreeEntry:l.newTreeEntry,objectId:l.objectId,oldCommitOid:l.oldCommitOid,oldTreeEntry:l.oldTreeEntry,path:l.path,pathDigest:l.pathDigest,pullRequestGlobalRelayId:x,repository:v,reviewed:N,richDiff:l.richDiff,status:l.status,submodule:l.submodule,truncatedReason:l.truncatedReason}),a[12]=h,a[13]=f,a[14]=l.diffLines,a[15]=l.diffSize,a[16]=l.helpUrl,a[17]=l.isBinary,a[18]=l.isSubmodule,a[19]=l.isTooBig,a[20]=l.linesAdded,a[21]=l.linesChanged,a[22]=l.linesDeleted,a[23]=l.newCommitOid,a[24]=l.newTreeEntry,a[25]=l.objectId,a[26]=l.oldCommitOid,a[27]=l.oldTreeEntry,a[28]=l.path,a[29]=l.pathDigest,a[30]=l.richDiff,a[31]=l.status,a[32]=l.submodule,a[33]=l.truncatedReason,a[34]=p,a[35]=g,a[36]=y,a[37]=x,a[38]=v,a[39]=_,a[40]=C,a[41]=N,a[42]=n):n=a[42],a[43]!==m||a[44]!==n||a[45]!==s.index||a[46]!==w?(i=(0,o.jsx)("div",{style:w,className:a8,ref:m,"data-index":s.index,children:n}),a[43]=m,a[44]=n,a[45]=s.index,a[46]=w,a[47]=i):i=a[47],i}:function({virtualRow:e,virtualizedDiffEntry:t,diffEntry:n,diffSummary:i,scrollMargin:a,measureElement:s,basePath:r,currentUser:l,headBranchName:d,headRepoName:c,headRepoOwner:u,pullRequestGlobalRelayId:m,repository:h,selectedPathDigest:f}){if(!t)return null;let p={transform:`translateY(${e.start-a}px)`};if("NotLoaded"===t.loadingStatus){let n=i?.linesChanged??5;return(i?.changeType==="REMOVED"||i?.changeType==="DELETED")&&(n=5),(0,o.jsx)("div",{style:p,className:a8,ref:s,"data-index":e.index,children:(0,o.jsx)(aI,{ariaLabel:`Loading ${t.path}`,testId:`lazy-load-${t.path}`,id:`diff-${t.pathDigest}`,approximateLineCount:n})})}return n?(0,o.jsx)("div",{style:p,className:a8,ref:s,"data-index":e.index,children:(0,o.jsx)(aw,{basePath:r,changeType:n.status,currentUser:l,diffLines:n.diffLines,diffManuallyExpanded:!1,diffSize:n.diffSize,headerStickyOffset:-(e.start-a),headBranchName:d,headRepoName:c,headRepoOwner:u,helpUrl:n.helpUrl,isBinary:n.isBinary,isSelected:void 0===f?void 0:n.pathDigest===f,isSubmodule:n.isSubmodule,isTooBig:n.isTooBig,linesAdded:n.linesAdded,linesChanged:n.linesChanged,linesDeleted:n.linesDeleted,newCommitOid:n.newCommitOid,newTreeEntry:n.newTreeEntry,objectId:n.objectId,oldCommitOid:n.oldCommitOid,oldTreeEntry:n.oldTreeEntry,path:n.path,pathDigest:n.pathDigest,pullRequestGlobalRelayId:m,repository:h,reviewed:n.reviewed??!1,richDiff:n.richDiff,status:n.status,submodule:n.submodule,truncatedReason:n.truncatedReason})}):null});try{a9.displayName||(a9.displayName="MemoizedVirtualizedDiffRow")}catch{}function se({basePath:e,currentUser:t,filteredDiffSummaries:n,headBranchName:i,headRepoName:a,headRepoOwner:s,onSetFilterState:r,pullRequestGlobalRelayId:l,repository:d,showPullRequestGroups:c}){let u=(0,v.useRef)(null),[m,h]=(0,v.useState)(0),f=(0,I.$W)(n),p=(0,I.JA)(),{selectedPathDigest:g}=aO(),y=(0,I.qg)(),x=(0,I.l0)(),{loadMore:b}=(0,I.pV)(),j=(0,I.HZ)(),w=f.length,_="compact"===t.lineSpacing?20:25,C=(0,v.useCallback)(e=>{let t=f[e];return t?_*(x[t.path]?.linesChanged??5)+75:0},[f,x,_]),N=(0,v.useCallback)(e=>f[e]?.pathDigest??e,[f]);(0,v.useEffect)(()=>{u.current&&h(u.current.offsetTop)},[]);let S=(0,a6.XW)({count:f.length,estimateSize:C,getItemKey:N,overscan:5,scrollMargin:m,gap:16}),k=S.getVirtualItems(),L=(0,v.useMemo)(()=>{for(let e of k){let t=f[e.index];if(t?.loadingStatus==="NotLoaded")return e.index}return -1},[k,f]);return((0,v.useEffect)(()=>{if(-1===L)return;let e=f[L];if(e)return(0,a7.H)(()=>b(e),{timeout:100})},[L,f,b]),0===y)?(0,o.jsx)(aA,{}):0===n.length?(0,o.jsx)(aE,{}):(0,o.jsxs)("div",{ref:u,"data-hpc":!0,className:"d-flex flex-column gap-3",children:[c&&p?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"f4 text-bold mb-0",children:[(0,o.jsx)("span",{className:"fgColor-accent",children:(0,o.jsx)(A.A,{href:"",onClick:e=>{e.preventDefault(),r({activeChangeGroupId:void 0})},children:"All files"})})," ",(0,o.jsx)("span",{className:"fgColor-muted text-normal",children:"/"})," ",p.name]}),p.description?.trim()?(0,o.jsx)("p",{children:p.description}):null]}):null,(0,o.jsx)("div",{style:{height:`${S.getTotalSize()}px`,width:"100%",position:"relative"},children:k.map(n=>(0,o.jsx)(a9,{virtualRow:n,virtualizedDiffEntry:f[n.index],diffEntry:j[f[n.index]?.path??""],diffSummary:x[f[n.index]?.path??""],scrollMargin:S.options.scrollMargin,measureElement:S.measureElement,basePath:e,currentUser:t,headBranchName:i,headRepoName:a,headRepoOwner:s,pullRequestGlobalRelayId:l,repository:d,selectedPathDigest:g},n.key))}),w>=15&&(0,o.jsx)(a2,{}),(0,o.jsx)(aL.nq,{})]})}try{se.displayName||(se.displayName="PullRequestVirtualizedDiffsList")}catch{}var st=n(48926),sn=n(43147),si=n(13071),sa=n(3536),ss=n(66108);let sr=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f,p,g,y,x,v,b,j,w,_,C,N,S=(0,c.c)(73),{commit:I,pullRequest:k,commits:L,repository:T}=e;S[0]!==L?(t=void 0===L?[]:L,S[0]=L,S[1]=t):t=S[1];let D=t,{helpUrl:E}=(0,ag.X)();e:{let e,t,i;if(0===D.length){let e;S[2]===Symbol.for("react.memo_cache_sentinel")?(e={prevCommitUrl:null,nextCommitUrl:null,canNavigate:!1},S[2]=e):e=S[2],n=e;break e}let a=I.oid,s=D.findIndex(e=>e.oid===a);if(-1===s){let e;S[3]===Symbol.for("react.memo_cache_sentinel")?(e={prevCommitUrl:null,nextCommitUrl:null,canNavigate:!1},S[3]=e):e=S[3],n=e;break e}let r=s>0?D[s-1]:null,l=s<D.length-1?D[s+1]:null,o=k?.number||0;if(S[4]!==l||S[5]!==r||S[6]!==T.name||S[7]!==T.ownerLogin||S[8]!==o){let n={owner:T.ownerLogin,repo:T.name,number:o};e=r?(0,eA.zLJ)({...n,head:r.oid}):null,t=l?(0,eA.zLJ)({...n,head:l.oid}):null,S[4]=l,S[5]=r,S[6]=T.name,S[7]=T.ownerLogin,S[8]=o,S[9]=e,S[10]=t}else e=S[9],t=S[10];let d=t;S[11]!==d||S[12]!==e?(i={prevCommitUrl:e,nextCommitUrl:d,canNavigate:!0},S[11]=d,S[12]=e,S[13]=i):i=S[13],n=i}let{prevCommitUrl:R,nextCommitUrl:O,canNavigate:P}=n,F=I.oid;S[14]!==F||S[15]!==T.name||S[16]!==T.ownerLogin?(i=(0,eA.$Qz)({owner:T.ownerLogin,repo:T.name,commitish:F}),S[14]=F,S[15]=T.name,S[16]=T.ownerLogin,S[17]=i):i=S[17];let M=(0,sa.I)(`${i}/deferred_commit_data`);return S[18]!==I.shortMessageMarkdown?(a=(0,o.jsx)(tt.JR,{html:I.shortMessageMarkdown,className:"ws-pre-wrap f5 wb-break-word"}),S[18]=I.shortMessageMarkdown,S[19]=a):a=S[19],S[20]!==I.bodyMessageHtml?(s=I.bodyMessageHtml&&(0,o.jsx)(tt.JR,{html:I.bodyMessageHtml,className:"ws-pre-wrap f6 wb-break-word text-mono mt-2"}),S[20]=I.bodyMessageHtml,S[21]=s):s=S[21],S[22]!==a||S[23]!==s?(r=(0,o.jsxs)("div",{className:"flex-1",children:[a,s]}),S[22]=a,S[23]=s,S[24]=r):r=S[24],S[25]!==P||S[26]!==O||S[27]!==R?(l=P&&(0,o.jsx)("div",{className:"d-flex",children:(0,o.jsxs)(n4.A,{children:[(0,o.jsx)(Q.Q,{as:ss.N,"aria-label":R?"Previous commit":"No previous commit",to:R??"",inactive:!R,size:"small",leadingVisual:q.ChevronLeftIcon,children:"Prev"}),(0,o.jsx)(Q.Q,{as:ss.N,"aria-label":O?"Next commit":"No next commit",to:O??"",inactive:!O,size:"small",trailingVisual:q.ChevronRightIcon,children:"Next"})]})}),S[25]=P,S[26]=O,S[27]=R,S[28]=l):l=S[28],S[29]!==F||S[30]!==T?(d=(0,eA.IO9)({repo:T,action:"tree",commitish:F}),S[29]=F,S[30]=T,S[31]=d):d=S[31],S[32]!==d?(u=(0,o.jsx)(Q.Q,{as:A.A,href:d,leadingVisual:q.FileCodeIcon,size:"small",children:"Browse files"}),S[32]=d,S[33]=u):u=S[33],S[34]!==u||S[35]!==l?(m=(0,o.jsxs)("div",{className:"d-flex flex-items-center flex-self-start gap-2 ml-2",children:[l,u]}),S[34]=u,S[35]=l,S[36]=m):m=S[36],S[37]!==m||S[38]!==r?(h=(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-between border-bottom p-3 bgColor-inset flex-items-center",children:[r,m]}),S[37]=m,S[38]=r,S[39]=h):h=S[39],S[40]===Symbol.for("react.memo_cache_sentinel")?(f={fontColor:"fg.default"},S[40]=f):f=S[40],S[41]!==I.oid||S[42]!==M||S[43]!==E||S[44]!==T?(p=(0,o.jsx)(si.C,{deferredData:M,oid:I.oid,repo:T,helpUrl:E}),S[41]=I.oid,S[42]=M,S[43]=E,S[44]=T,S[45]=p):p=S[45],S[46]!==I||S[47]!==T||S[48]!==p?(g=(0,o.jsx)(st.j,{commit:I,repo:T,settings:f,textVariant:"muted",children:p}),S[46]=I,S[47]=T,S[48]=p,S[49]=g):g=S[49],S[50]===Symbol.for("react.memo_cache_sentinel")?(y=(0,o.jsx)("span",{className:"color-fg-muted",children:"commit"}),S[50]=y):y=S[50],S[51]!==F||S[52]!==T.name||S[53]!==T.ownerLogin?(x=(0,eA.$Qz)({owner:T.ownerLogin,repo:T.name,commitish:F}),S[51]=F,S[52]=T.name,S[53]=T.ownerLogin,S[54]=x):x=S[54],S[55]!==F?(v=(0,nO.F)(F),S[55]=F,S[56]=v):v=S[56],S[57]!==v?(b=(0,o.jsx)("code",{children:v}),S[57]=v,S[58]=b):b=S[58],S[59]!==x||S[60]!==b?(j=(0,o.jsx)(A.A,{href:x,className:"Link--primary",children:b}),S[59]=x,S[60]=b,S[61]=j):j=S[61],S[62]!==F?(w=(0,o.jsx)(sn.w,{sha:F,direction:"sw"}),S[62]=F,S[63]=w):w=S[63],S[64]!==j||S[65]!==w?(_=(0,o.jsxs)("div",{className:"d-flex flex-items-center gap-2 text-mono",children:[y,j,w]}),S[64]=j,S[65]=w,S[66]=_):_=S[66],S[67]!==g||S[68]!==_?(C=(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-between px-3 py-2 f5",children:[g,_]}),S[67]=g,S[68]=_,S[69]=C):C=S[69],S[70]!==h||S[71]!==C?(N=(0,o.jsxs)("div",{className:"d-flex flex-column border rounded-2 overflow-hidden mb-3",children:[h,C]}),S[70]=h,S[71]=C,S[72]=N):N=S[72],N}:function({commit:e,pullRequest:t,commits:n=[],repository:i}){let{helpUrl:a}=(0,ag.X)(),{prevCommitUrl:s,nextCommitUrl:r,canNavigate:l}=(0,v.useMemo)(()=>{if(0===n.length)return{prevCommitUrl:null,nextCommitUrl:null,canNavigate:!1};let a=e.oid,s=n.findIndex(e=>e.oid===a);if(-1===s)return{prevCommitUrl:null,nextCommitUrl:null,canNavigate:!1};let r=s>0?n[s-1]:null,l=s<n.length-1?n[s+1]:null,o={owner:i.ownerLogin,repo:i.name,number:t?.number||0};return{prevCommitUrl:r?(0,eA.zLJ)({...o,head:r.oid}):null,nextCommitUrl:l?(0,eA.zLJ)({...o,head:l.oid}):null,canNavigate:!0}},[n,e,t,i]),d=e.oid,c=(0,sa.I)(`${(0,eA.$Qz)({owner:i.ownerLogin,repo:i.name,commitish:d})}/deferred_commit_data`);return(0,o.jsxs)("div",{className:"d-flex flex-column border rounded-2 overflow-hidden mb-3",children:[(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-between border-bottom p-3 bgColor-inset flex-items-center",children:[(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsx)(tt.JR,{html:e.shortMessageMarkdown,className:"ws-pre-wrap f5 wb-break-word"}),e.bodyMessageHtml&&(0,o.jsx)(tt.JR,{html:e.bodyMessageHtml,className:"ws-pre-wrap f6 wb-break-word text-mono mt-2"})]}),(0,o.jsxs)("div",{className:"d-flex flex-items-center flex-self-start gap-2 ml-2",children:[l&&(0,o.jsx)("div",{className:"d-flex",children:(0,o.jsxs)(n4.A,{children:[(0,o.jsx)(Q.Q,{as:ss.N,"aria-label":s?"Previous commit":"No previous commit",to:s??"",inactive:!s,size:"small",leadingVisual:q.ChevronLeftIcon,children:"Prev"}),(0,o.jsx)(Q.Q,{as:ss.N,"aria-label":r?"Next commit":"No next commit",to:r??"",inactive:!r,size:"small",trailingVisual:q.ChevronRightIcon,children:"Next"})]})}),(0,o.jsx)(Q.Q,{as:A.A,href:(0,eA.IO9)({repo:i,action:"tree",commitish:d}),leadingVisual:q.FileCodeIcon,size:"small",children:"Browse files"})]})]}),(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-between px-3 py-2 f5",children:[(0,o.jsx)(st.j,{commit:e,repo:i,settings:{fontColor:"fg.default"},textVariant:"muted",children:(0,o.jsx)(si.C,{deferredData:c,oid:e.oid,repo:i,helpUrl:a})}),(0,o.jsxs)("div",{className:"d-flex flex-items-center gap-2 text-mono",children:[(0,o.jsx)("span",{className:"color-fg-muted",children:"commit"}),(0,o.jsx)(A.A,{href:(0,eA.$Qz)({owner:i.ownerLogin,repo:i.name,commitish:d}),className:"Link--primary",children:(0,o.jsx)("code",{children:(0,nO.F)(d)})}),(0,o.jsx)(sn.w,{sha:d,direction:"sw"})]})]})]})};try{sr.displayName||(sr.displayName="PullRequestCommitHeader")}catch{}let sl=(0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(20),{basePath:s,baseSha:r,forceUnifiedView:l,headSha:d,initialData:u,treeCollapsedByDefault:m,treeEnableInlineCompactMode:h,userCanComment:f,useChangeGroups:p,useInlineComments:g,useEditOptions:y,useFileTree:x,useAdvancedToolbar:v,useBasicToolbar:b}=e,j=p??!1,w=g??!1,_=y??!1,C=x??!1,N=v??!1,S=b??!1,I=f??!0,k=l??!1,L=m??!1,T=h??!1;a[0]!==j||a[1]!==T||a[2]!==w||a[3]!==_||a[4]!==C||a[5]!==N||a[6]!==S||a[7]!==I||a[8]!==k||a[9]!==L?(t={useChangeGroups:j,useInlineComments:w,useEditOptions:_,useFileTree:C,useAdvancedToolbar:N,useBasicToolbar:S,userCanComment:I,forceUnifiedView:k,treeCollapsedByDefault:L,treeEnableInlineCompactMode:T},a[0]=j,a[1]=T,a[2]=w,a[3]=_,a[4]=C,a[5]=N,a[6]=S,a[7]=I,a[8]=k,a[9]=L,a[10]=t):t=a[10];let D=t,E=u?u.pullRequest.comparison.headOid:d,R=u?u.pullRequest.comparison.baseOid:r;if(!E)throw Error("DiffComparisonViewer: headSha is required if initialData is not provided");let A=!u;a[11]!==s||a[12]!==R||a[13]!==E||a[14]!==A?(n={basePath:s,headSha:E,baseSha:R,shouldFetch:A},a[11]=s,a[12]=R,a[13]=E,a[14]=A,a[15]=n):n=a[15];let{data:O,isLoading:P}=iY(n),F=u??O;return a[16]!==D||a[17]!==F||a[18]!==P?(i=(0,o.jsx)(o.Fragment,{children:F&&!P?(0,o.jsx)(iZ.Kg,{basePageDataUrl:F.pullRequest.pathName,children:(0,o.jsx)(iz.v,{initData:F,children:(0,o.jsx)(so,{...F,configOpts:D})})}):(0,o.jsxs)("div",{className:"width-full",children:[(0,o.jsx)("div",{className:iK,children:(0,o.jsx)("div",{className:iW,children:(0,o.jsx)(aC.O,{width:"lg",height:"lg",variant:"rounded"})})}),(0,o.jsxs)("div",{className:"d-flex flex-column gap-3 p-3",children:[(0,o.jsx)(aF,{lines:4}),(0,o.jsx)(aF,{lines:8}),(0,o.jsx)(aF,{lines:5})]})]})}),a[16]=D,a[17]=F,a[18]=P,a[19]=i):i=a[19],i}:function({basePath:e,baseSha:t,forceUnifiedView:n,headSha:i,initialData:a,treeCollapsedByDefault:s,treeEnableInlineCompactMode:r,userCanComment:l,useChangeGroups:d,useInlineComments:c,useEditOptions:u,useFileTree:m,useAdvancedToolbar:h,useBasicToolbar:f}){let p=(0,v.useMemo)(()=>({useChangeGroups:d??!1,useInlineComments:c??!1,useEditOptions:u??!1,useFileTree:m??!1,useAdvancedToolbar:h??!1,useBasicToolbar:f??!1,userCanComment:l??!0,forceUnifiedView:n??!1,treeCollapsedByDefault:s??!1,treeEnableInlineCompactMode:r??!1}),[d,c,u,m,h,f,l,n,s,r]),g=a?a.pullRequest.comparison.headOid:i,y=a?a.pullRequest.comparison.baseOid:t;if(!g)throw Error("DiffComparisonViewer: headSha is required if initialData is not provided");let{data:x,isLoading:b}=iY({basePath:e,headSha:g,baseSha:y,shouldFetch:!a}),j=a??x;return(0,o.jsx)(o.Fragment,{children:j&&!b?(0,o.jsx)(iZ.Kg,{basePageDataUrl:j.pullRequest.pathName,children:(0,o.jsx)(iz.v,{initData:j,children:(0,o.jsx)(so,{...j,configOpts:p})})}):(0,o.jsxs)("div",{className:"width-full",children:[(0,o.jsx)("div",{className:iK,children:(0,o.jsx)("div",{className:iW,children:(0,o.jsx)(aC.O,{width:"lg",height:"lg",variant:"rounded"})})}),(0,o.jsxs)("div",{className:"d-flex flex-column gap-3 p-3",children:[(0,o.jsx)(aF,{lines:4}),(0,o.jsx)(aF,{lines:8}),(0,o.jsx)(aF,{lines:5})]})]})})},so=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,b,j,w,_,C,N,L,T,D,E,R,A,O,P,F,M,$,B=(0,c.c)(120),{codeowners:V,commit:U,commits:q,configOpts:G,diffSummaries:H,fileFilter:K,pullRequest:W,repository:z,markers:Q,pageLimits:Z,urls:J,user:Y,isSingleFileMode:X}=e;iT(Q,H),(0,p.L)(!0);let ee=su(Y),et=(0,no.u)("pull_request_files_virtualization");B[0]===Symbol.for("react.memo_cache_sentinel")?(t={onSuccess:sc,onError:sd},B[0]=t):t=B[0];let{mutate:en}=(0,u.U)(t),{data:ei}=(0,m.ID)(ee);B[1]!==ei?.commentsPreference||B[2]!==en?(n=()=>{en({commentsPreference:ei?.commentsPreference===h.sI.Visible?h.sI.Collapsed:h.sI.Visible})},B[1]=ei?.commentsPreference,B[2]=en,B[3]=n):n=B[3],ei?.commentsPreference;let ea=n;ei?.commentsPreference,ei?.lineSpacing,ei?.splitPreference;let es=Y.currentUserAvatarUrl||"",er=Y.currentUserLogin||"",el=G.forceUnifiedView?"unified":ei?.splitPreference??"unified",eo=G.useInlineComments??!1,ed=G.useEditOptions??!1,ec=ei?.lineSpacing??"relaxed",eu=G.userCanComment&&Y.canComment,em=ei?.commentsPreference??"visible";B[4]!==em||B[5]!==es||B[6]!==er||B[7]!==el||B[8]!==eo||B[9]!==ed||B[10]!==ec||B[11]!==eu||B[12]!==Y.canApplySuggestion||B[13]!==Y.hasCopilotAccess||B[14]!==Y.tabSize?(i={avatarURL:es,login:er,tabSize:Y.tabSize,splitPreference:el,shouldDisplayComments:eo,shouldDisplayEditOptions:ed,lineSpacing:ec,canComment:eu,canApplySuggestion:Y.canApplySuggestion,commentsPreference:em,hasCopilotAccess:Y.hasCopilotAccess},B[4]=em,B[5]=es,B[6]=er,B[7]=el,B[8]=eo,B[9]=ed,B[10]=ec,B[11]=eu,B[12]=Y.canApplySuggestion,B[13]=Y.hasCopilotAccess,B[14]=Y.tabSize,B[15]=i):i=B[15];let eh=i,{updateCommentsPreference:ef}=(0,I.CQ)();B[16]!==ei?.commentsPreference||B[17]!==ef?(a=()=>{ef(ei?.commentsPreference??h.sI.Visible)},B[16]=ei?.commentsPreference,B[17]=ef,B[18]=a):a=B[18];let ep=ei?.commentsPreference;B[19]!==ep||B[20]!==ef?(s=[ep,ef],B[19]=ep,B[20]=ef,B[21]=s):s=B[21],(0,v.useEffect)(a,s);let{splitPagePaneHidden:eg,treeViewState:ey,treeToggleElement:ex,collapseMobileTree:ev,expandTree:eb}=i5(eI,Y.isFileTreeExpanded&&!G.treeCollapsedByDefault,G.treeEnableInlineCompactMode,eh);B[22]!==V||B[23]!==W.pathName?(r={basePath:W.pathName},V&&(r.initialData=V),B[22]=V,B[23]=W.pathName,B[24]=r):r=B[24];let{data:ej}=(0,S.dG)(r),{setCodeowners:ew}=(0,I.wh)();B[25]!==ej||B[26]!==ew?(l=()=>{ew(ej)},d=[ej,ew],B[25]=ej,B[26]=ew,B[27]=l,B[28]=d):(l=B[27],d=B[28]),(0,v.useEffect)(l,d);let e_=(0,I.qg)(),eN=(0,I.I8)(),{updateDiffFilter:eS}=(0,I.or)();B[29]!==K.initialState||B[30]!==eS?(b=()=>{eS({...K.initialState,unselectedFileExtensions:new Set(K.initialState.unselectedFileExtensions)})},j=[eS,K.initialState],B[29]=K.initialState,B[30]=eS,B[31]=b,B[32]=j):(b=B[31],j=B[32]),(0,v.useEffect)(b,j);let eL=(0,I.mU)();B[33]!==eS?(w=e=>{eS(e,!0)},B[33]=eS,B[34]=w):w=B[34];let eT=w;B[35]!==ev||B[36]!==ey.compactMode?(_=()=>{"none"!==ey.compactMode&&ev()},B[35]=ev,B[36]=ey.compactMode,B[37]=_):_=B[37];let eD=_,eE=(0,v.useRef)(null),eR="expanded"!==ey.wideMode?"small":"medium";B[38]!==eh.login||B[39]!==eN||B[40]!==K.menuOptions||B[41]!==eT||B[42]!==W.pathName||B[43]!==eR?(C=(0,o.jsx)(k,{ref:eE,basePath:W.pathName,fileFilterMenuOptions:K.menuOptions,fileFilterState:eN,setFileFilterState:eT,viewerLogin:eh.login,filterSize:eR}),B[38]=eh.login,B[39]=eN,B[40]=K.menuOptions,B[41]=eT,B[42]=W.pathName,B[43]=eR,B[44]=C):C=B[44];let eA=C,eP=(0,I.gt)(),eF=H.length>0,eM=G.useChangeGroups&&eP&&eF;B[45]!==eM?(N={changeGroupsEnabled:eM},B[45]=eM,B[46]=N):N=B[46],ae(N);let{aliveChannel:e$,bannersData:eB}=(0,iQ.o)();B[47]!==eb?(L=()=>{eb(),window.requestAnimationFrame(()=>{eE.current?.focus()})},B[47]=eb,B[48]=L):L=B[48];let eV=L;B[49]!==eV||B[50]!==ea?(T=(0,o.jsx)(f.ak,{commands:{"pull-request-files-changed:collapse-expand-comments":ea,"pull-request-files-changed:focus-file-tree-filter":eV}}),B[49]=eV,B[50]=ea,B[51]=T):T=B[51],B[52]!==eA||B[53]!==e$||B[54]!==eM||B[55]!==eB||B[56]!==ev||B[57]!==q||B[58]!==G.useAdvancedToolbar||B[59]!==G.useBasicToolbar||B[60]!==e_||B[61]!==eL||B[62]!==eD||B[63]!==eT||B[64]!==Z||B[65]!==W||B[66]!==z||B[67]!==ex||B[68]!==ey.compactMode||B[69]!==ey.wideMode||B[70]!==J||B[71]!==Y?(D=G.useAdvancedToolbar||G.useBasicToolbar?(0,o.jsxs)(o.Fragment,{children:[G.useAdvancedToolbar&&(0,o.jsx)(iI,{changeGroupsPreferenceAvailable:eM,commits:q,currentUserLogin:Y.currentUserLogin,fileFilter:eA,isFileTreeExpanded:"expanded"===ey.wideMode,lastReviewOid:Y.lastReviewOid,pageLimits:Z,pullRequest:W,repository:z,shouldShowViewedFilesCount:Y.shouldShowViewedFilesCount,totalFilesCount:e_,treeToggleElement:ex,bannersData:eB,urls:J,user:Y,aliveChannel:e$}),G.useBasicToolbar&&(0,o.jsx)(iX,{fileFilter:eA,isFileTreeExpanded:"expanded"===ey.wideMode,shouldShowViewedFilesCount:Y.shouldShowViewedFilesCount,totalFilesCount:e_,treeToggleElement:ex,userNotices:Y.userNotices}),"overlay"===ey.compactMode&&(0,o.jsx)(g.l,{onClose:()=>ev(),position:{narrow:"fullscreen",regular:"left",wide:"left"},title:"Files",className:"p-0",children:(0,o.jsx)(ek,{allowPullRequestGroups:eM,fileFilter:eA,filteredDiffs:eL,onFileSelected:eD,onSetFilterState:eT})})]}):null,B[52]=eA,B[53]=e$,B[54]=eM,B[55]=eB,B[56]=ev,B[57]=q,B[58]=G.useAdvancedToolbar,B[59]=G.useBasicToolbar,B[60]=e_,B[61]=eL,B[62]=eD,B[63]=eT,B[64]=Z,B[65]=W,B[66]=z,B[67]=ex,B[68]=ey.compactMode,B[69]=ey.wideMode,B[70]=J,B[71]=Y,B[72]=D):D=B[72],B[73]!==eA||B[74]!==eM||B[75]!==G.useBasicToolbar||B[76]!==G.useFileTree||B[77]!==eL||B[78]!==eD||B[79]!==eT||B[80]!==eg||B[81]!==ey.compactMode||B[82]!==ey.wideMode?(E=G.useFileTree?(0,o.jsx)(y.O7.Pane,{position:"start",sticky:!0,offsetHeader:G.useBasicToolbar?"50px":"60px","aria-label":"File tree",padding:"none",className:(0,x.$)(i$,eg&&iA,"expanded"===ey.wideMode&&iB,"collapsed"===ey.wideMode&&iV,"none"===ey.compactMode&&iU,"overlay"===ey.compactMode&&iq,"inline"===ey.compactMode&&iG,iP),divider:{regular:"inline"===ey.compactMode?"none":"line",narrow:"none"},widthStorageKey:"diff-tree-pane-width",resizable:"inline"!==ey.compactMode,children:(0,o.jsx)(ek,{allowPullRequestGroups:eM,className:(0,x.$)(eC,iO),fileFilter:eA,filteredDiffs:eL,onFileSelected:eD,onSetFilterState:eT})}):null,B[73]=eA,B[74]=eM,B[75]=G.useBasicToolbar,B[76]=G.useFileTree,B[77]=eL,B[78]=eD,B[79]=eT,B[80]=eg,B[81]=ey.compactMode,B[82]=ey.wideMode,B[83]=E):E=B[83];let eU="inline"===ey.compactMode;B[84]!==eU?(R={narrow:!1,regular:eU},B[84]=eU,B[85]=R):R=B[85];let eq="expanded"===ey.wideMode&&iB;return B[86]!==eq?(A=(0,x.$)(iH,eq),B[86]=eq,B[87]=A):A=B[87],B[88]!==U||B[89]!==q||B[90]!==W||B[91]!==z?(O=U&&(0,o.jsx)(sr,{commit:U,pullRequest:W,commits:q,repository:z}),B[88]=U,B[89]=q,B[90]=W,B[91]=z,B[92]=O):O=B[92],B[93]!==Z||B[94]!==z||B[95]!==J?(P=(0,o.jsx)(eO,{pageLimits:Z,repository:z,urls:J}),B[93]=Z,B[94]=z,B[95]=J,B[96]=P):P=B[96],B[97]!==eh||B[98]!==eL||B[99]!==eT||B[100]!==et||B[101]!==X||B[102]!==W.globalRelayId||B[103]!==W.headBranch||B[104]!==W.headRepositoryName||B[105]!==W.headRepositoryOwnerLogin||B[106]!==W.pathName||B[107]!==z?(F=et?(0,o.jsx)(se,{basePath:W.pathName,currentUser:eh,headBranchName:W.headBranch,headRepoName:W.headRepositoryName,headRepoOwner:W.headRepositoryOwnerLogin,onSetFilterState:eT,pullRequestGlobalRelayId:W.globalRelayId,filteredDiffSummaries:eL,repository:z,showPullRequestGroups:!0}):(0,o.jsx)(o.Fragment,{children:X?(0,o.jsx)(aP,{basePath:W.pathName,currentUser:eh,filteredDiffSummaries:eL,headBranchName:W.headBranch,headRepoName:W.headRepositoryName,headRepoOwner:W.headRepositoryOwnerLogin,pullRequestGlobalRelayId:W.globalRelayId,repository:z}):(0,o.jsx)(a3,{basePath:W.pathName,currentUser:eh,headBranchName:W.headBranch,headRepoName:W.headRepositoryName,headRepoOwner:W.headRepositoryOwnerLogin,onSetFilterState:eT,pullRequestGlobalRelayId:W.globalRelayId,filteredDiffSummaries:eL,repository:z,showPullRequestGroups:!0})}),B[97]=eh,B[98]=eL,B[99]=eT,B[100]=et,B[101]=X,B[102]=W.globalRelayId,B[103]=W.headBranch,B[104]=W.headRepositoryName,B[105]=W.headRepositoryOwnerLogin,B[106]=W.pathName,B[107]=z,B[108]=F):F=B[108],B[109]!==R||B[110]!==A||B[111]!==O||B[112]!==P||B[113]!==F?(M=(0,o.jsxs)(y.O7.Content,{as:"div",width:"full",hidden:R,padding:"none",className:A,children:[O,P,F]}),B[109]=R,B[110]=A,B[111]=O,B[112]=P,B[113]=F,B[114]=M):M=B[114],B[115]!==T||B[116]!==D||B[117]!==E||B[118]!==M?($=(0,o.jsxs)(o.Fragment,{children:[T,D,E,M]}),B[115]=T,B[116]=D,B[117]=E,B[118]=M,B[119]=$):$=B[119],$}:function({codeowners:e,commit:t,commits:n,configOpts:i,diffSummaries:a,fileFilter:s,pullRequest:r,repository:l,markers:d,pageLimits:c,urls:b,user:j,isSingleFileMode:w}){iT(d,a),(0,p.L)(!0);let _=su(j),C=(0,no.u)("pull_request_files_virtualization"),{mutate:N}=(0,u.U)({onSuccess:()=>{},onError:()=>{}}),{data:L}=(0,m.ID)(_),T=(0,v.useCallback)(()=>{N({commentsPreference:L?.commentsPreference===h.sI.Visible?h.sI.Collapsed:h.sI.Visible})},[L?.commentsPreference,N]),D=(0,v.useMemo)(()=>({avatarURL:j.currentUserAvatarUrl||"",login:j.currentUserLogin||"",tabSize:j.tabSize,splitPreference:i.forceUnifiedView?"unified":L?.splitPreference??"unified",shouldDisplayComments:i.useInlineComments??!1,shouldDisplayEditOptions:i.useEditOptions??!1,lineSpacing:L?.lineSpacing??"relaxed",canComment:i.userCanComment&&j.canComment,canApplySuggestion:j.canApplySuggestion,commentsPreference:L?.commentsPreference??"visible",hasCopilotAccess:j.hasCopilotAccess}),[i.forceUnifiedView,i.useEditOptions,i.useInlineComments,i.userCanComment,L?.commentsPreference,L?.lineSpacing,L?.splitPreference,j.canApplySuggestion,j.canComment,j.currentUserAvatarUrl,j.currentUserLogin,j.hasCopilotAccess,j.tabSize]),{updateCommentsPreference:E}=(0,I.CQ)();(0,v.useEffect)(()=>{E(L?.commentsPreference??h.sI.Visible)},[L?.commentsPreference,E]);let{splitPagePaneHidden:R,treeViewState:A,treeToggleElement:O,collapseMobileTree:P,expandTree:F}=i5(eI,j.isFileTreeExpanded&&!i.treeCollapsedByDefault,i.treeEnableInlineCompactMode,D),M={basePath:r.pathName};e&&(M.initialData=e);let{data:$}=(0,S.dG)(M),{setCodeowners:B}=(0,I.wh)();(0,v.useEffect)(()=>{B($)},[$,B]);let V=(0,I.qg)(),U=(0,I.I8)(),{updateDiffFilter:q}=(0,I.or)();(0,v.useEffect)(()=>{q({...s.initialState,unselectedFileExtensions:new Set(s.initialState.unselectedFileExtensions)})},[q,s.initialState]);let G=(0,I.mU)(),H=(0,v.useCallback)(e=>{q(e,!0)},[q]),K=(0,v.useCallback)(()=>{"none"!==A.compactMode&&P()},[P,A.compactMode]),W=(0,v.useRef)(null),z=(0,v.useMemo)(()=>(0,o.jsx)(k,{ref:W,basePath:r.pathName,fileFilterMenuOptions:s.menuOptions,fileFilterState:U,setFileFilterState:H,viewerLogin:D.login,filterSize:"expanded"!==A.wideMode?"small":"medium"}),[r.pathName,s.menuOptions,U,H,D.login,A.wideMode]),Q=(0,I.gt)(),Z=a.length>0,J=i.useChangeGroups&&Q&&Z;ae({changeGroupsEnabled:J});let{aliveChannel:Y,bannersData:X}=(0,iQ.o)(),ee=(0,v.useCallback)(()=>{F(),window.requestAnimationFrame(()=>{W.current?.focus()})},[F]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(f.ak,{commands:{"pull-request-files-changed:collapse-expand-comments":T,"pull-request-files-changed:focus-file-tree-filter":ee}}),i.useAdvancedToolbar||i.useBasicToolbar?(0,o.jsxs)(o.Fragment,{children:[i.useAdvancedToolbar&&(0,o.jsx)(iI,{changeGroupsPreferenceAvailable:J,commits:n,currentUserLogin:j.currentUserLogin,fileFilter:z,isFileTreeExpanded:"expanded"===A.wideMode,lastReviewOid:j.lastReviewOid,pageLimits:c,pullRequest:r,repository:l,shouldShowViewedFilesCount:j.shouldShowViewedFilesCount,totalFilesCount:V,treeToggleElement:O,bannersData:X,urls:b,user:j,aliveChannel:Y}),i.useBasicToolbar&&(0,o.jsx)(iX,{fileFilter:z,isFileTreeExpanded:"expanded"===A.wideMode,shouldShowViewedFilesCount:j.shouldShowViewedFilesCount,totalFilesCount:V,treeToggleElement:O,userNotices:j.userNotices}),"overlay"===A.compactMode&&(0,o.jsx)(g.l,{onClose:()=>P(),position:{narrow:"fullscreen",regular:"left",wide:"left"},title:"Files",className:"p-0",children:(0,o.jsx)(ek,{allowPullRequestGroups:J,fileFilter:z,filteredDiffs:G,onFileSelected:K,onSetFilterState:H})})]}):null,i.useFileTree?(0,o.jsx)(y.O7.Pane,{position:"start",sticky:!0,offsetHeader:i.useBasicToolbar?"50px":"60px","aria-label":"File tree",padding:"none",className:(0,x.$)(i$,R&&iA,"expanded"===A.wideMode&&iB,"collapsed"===A.wideMode&&iV,"none"===A.compactMode&&iU,"overlay"===A.compactMode&&iq,"inline"===A.compactMode&&iG,iP),divider:{regular:"inline"===A.compactMode?"none":"line",narrow:"none"},widthStorageKey:"diff-tree-pane-width",resizable:"inline"!==A.compactMode,children:(0,o.jsx)(ek,{allowPullRequestGroups:J,className:(0,x.$)(eC,iO),fileFilter:z,filteredDiffs:G,onFileSelected:K,onSetFilterState:H})}):null,(0,o.jsxs)(y.O7.Content,{as:"div",width:"full",hidden:{narrow:!1,regular:"inline"===A.compactMode},padding:"none",className:(0,x.$)(iH,"expanded"===A.wideMode&&iB),children:[t&&(0,o.jsx)(sr,{commit:t,pullRequest:r,commits:n,repository:l}),(0,o.jsx)(eO,{pageLimits:c,repository:l,urls:b}),C?(0,o.jsx)(se,{basePath:r.pathName,currentUser:D,headBranchName:r.headBranch,headRepoName:r.headRepositoryName,headRepoOwner:r.headRepositoryOwnerLogin,onSetFilterState:H,pullRequestGlobalRelayId:r.globalRelayId,filteredDiffSummaries:G,repository:l,showPullRequestGroups:!0}):(0,o.jsx)(o.Fragment,{children:w?(0,o.jsx)(aP,{basePath:r.pathName,currentUser:D,filteredDiffSummaries:G,headBranchName:r.headBranch,headRepoName:r.headRepositoryName,headRepoOwner:r.headRepositoryOwnerLogin,pullRequestGlobalRelayId:r.globalRelayId,repository:l}):(0,o.jsx)(a3,{basePath:r.pathName,currentUser:D,headBranchName:r.headBranch,headRepoName:r.headRepositoryName,headRepoOwner:r.headRepositoryOwnerLogin,onSetFilterState:H,pullRequestGlobalRelayId:r.globalRelayId,filteredDiffSummaries:G,repository:l,showPullRequestGroups:!0})})]})]})};function sd(){}function sc(){}let su=(0,d.Z6)()?function(e){let t,n=(0,c.c)(5),i=(0,m.C0)(e.viewSettings.splitPreference),a=(0,m.Qn)(e.viewSettings.hideWhitespace);return n[0]!==e.viewSettings.commentsPreference||n[1]!==e.viewSettings.lineSpacing||n[2]!==i||n[3]!==a?(t={hideWhitespace:a,splitPreference:i,lineSpacing:e.viewSettings.lineSpacing,commentsPreference:e.viewSettings.commentsPreference},n[0]=e.viewSettings.commentsPreference,n[1]=e.viewSettings.lineSpacing,n[2]=i,n[3]=a,n[4]=t):t=n[4],t}:function(e){let t=(0,m.C0)(e.viewSettings.splitPreference),n=(0,m.Qn)(e.viewSettings.hideWhitespace);return(0,v.useMemo)(()=>({hideWhitespace:n,splitPreference:t,lineSpacing:e.viewSettings.lineSpacing,commentsPreference:e.viewSettings.commentsPreference}),[e.viewSettings.commentsPreference,e.viewSettings.lineSpacing,t,n])},sm=(0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(7);return a[0]!==e.className?(t=(0,x.$)(iR,e.className),a[0]=e.className,a[1]=t):t=a[1],a[2]!==e.children?(n=(0,o.jsx)(y.O7,{children:e.children}),a[2]=e.children,a[3]=n):n=a[3],a[4]!==t||a[5]!==n?(i=(0,o.jsx)("div",{id:i4,className:t,children:n}),a[4]=t,a[5]=n,a[6]=i):i=a[6],i}:function(e){return(0,o.jsx)("div",{id:i4,className:(0,x.$)(iR,e.className),children:(0,o.jsx)(y.O7,{children:e.children})})},sh=Object.assign({},{Container:sm,Header:y.O7.Header,Viewer:sl});try{(s=Some).displayName||(s.displayName="Some")}catch{}try{(r=Some).displayName||(r.displayName="Some")}catch{}try{sl.displayName||(sl.displayName="BaseDiffComparisonViewer")}catch{}try{so.displayName||(so.displayName="InternalDiffComparisonViewer")}catch{}try{(l=FilterFilterComponent).displayName||(l.displayName="FilterFilterComponent")}catch{}try{sm.displayName||(sm.displayName="Container")}catch{}try{sh.displayName||(sh.displayName="DiffComparisonViewer")}catch{}},3038:(e,t,n)=>{n.d(t,{Av:()=>S,Ji:()=>f,Ls:()=>C,Mk:()=>x,Po:()=>m,S4:()=>j,Yf:()=>I,a1:()=>_,a2:()=>o,dT:()=>N,dv:()=>p,j2:()=>b,oH:()=>d,qK:()=>h,qX:()=>c,u6:()=>u,x_:()=>g});var i=n(13083),a=n(61583),s=n(66358),r=n(36729),l=n(51391);function o(e,t,n){return"left"===n?!m(e)&&e.left===t:!m(e)&&(0,i.XU)(e.type)===n&&e.right===t}function d(e,t){return"LEFT"===t?`L${e}`:`R${e}`}function c(e,t,n){let i=`-${m(t)||"number"!=typeof t.left?"empty":t.left}`,a=n?`-${m(n)||"number"!=typeof n.right?"empty":n.right}`:"";return`${e}${i}${a}`}function u(e,t){return`${e}-${t}`}function m(e){return!!e&&e===r.Vv}function h(e){return!!e&&e!==r.Vv}function f(e){return"CONTEXT"===e.type}function p(e,t){return t===s.w$.Empty||t===s.w$.Hunk?[e,void 0]:y(e,s.JF[t])}function g(e,t){let n;switch(t){case s.w$.Addition:n=s.JF[s.w$.Addition];break;case s.w$.Deletion:n=s.JF[s.w$.Deletion];break;case s.w$.Context:case s.w$.InjectedContext:n=s.JF[s.w$.Context]}return y(e,n)}function y(e,t){if(!t||!e.startsWith(t))return[e,void 0];let n=e[0];return[e.substring(1),n]}function x(e){let t=[],n=[],i=()=>{for(;t.length<n.length;)t.push(r.Vv);for(;n.length<t.length;)n.push(r.Vv)};for(let a of e)switch(a.type){case"ADDITION":n.push(a);break;case"DELETION":t.push(a);break;case"CONTEXT":case"INJECTED_CONTEXT":case"HUNK":i(),t.push(a),n.push(a)}return i(),{leftLines:t,rightLines:n}}function v(e){return["HUNK","CONTEXT","INJECTED_CONTEXT","DELETION"].includes(e.type)}function b({line:e,range:t,fileAnchor:n}){let i,{origin:s,pathname:r}=window.location;if(e){let s=v(e)?e.left:e.right;i=t&&s&&t.startLineNumber<=s&&t.endLineNumber>=s?(0,a.j$)(t):function(e,t){let n=v(e),i=n?e.left:e.right,s=n?"left":"right";if(null!==i)return(0,a.j$)({diffAnchor:t,endLineNumber:i,endOrientation:s,startLineNumber:i,startOrientation:s})}(e,n)}else t&&(i=(0,a.j$)(t));if(i)return`${s}${r}#${i}`}function j({hasThreads:e}){return e?"80px":"24px"}let w=["ADDITION","DELETION","CONTEXT"],_=(e,t)=>{if(m(e)||!e)return!1;let n=t.leftLines.concat(t.rightLines),i=n.filter(e=>!m(e)).map(e=>(0,l.bo)(e)),a=(0,l.bo)(e);return n.length>0&&i.includes(a)?n.every(e=>!!m(e)||w.includes(e.type)):!!m(e)||w.includes(e.type)},C=e=>e?e.filter(e=>!m(e)).map(e=>{var t;let[n]=g((t=e.html,new DOMParser().parseFromString(t,"text/html").documentElement.textContent||""),e.type);return n}).join(`
`):"";function N(e){return!!(e.text.length<1&&("CONTEXT"===e.type||"INJECTED_CONTEXT"===e.type)||("DELETION"===e.type||"ADDITION"===e.type)&&1===e.text.length&&["+","-"].includes(e.text.charAt(0)))}let S=(e,t,n,i)=>{let a;if(e)return e;if(!m(t)){let e=(n?t.left:t.right)??0,s=n?"left":"right";a={startOrientation:s,endOrientation:s,startLineNumber:e,endLineNumber:e,diffAnchor:i}}return a};function I(e,t=!1,n=!1){let i;switch(e){case"ADDITION":i=t?"var(--diffBlob-additionNum-bgColor, var(--diffBlob-addition-bgColor-num))":"var(--diffBlob-additionLine-bgColor, var(--diffBlob-addition-bgColor-line))";break;case"DELETION":i=t?"var(--diffBlob-deletionNum-bgColor, var(--diffBlob-deletion-bgColor-num))":"var(--diffBlob-deletionLine-bgColor, var(--diffBlob-deletion-bgColor-line))";break;case"HUNK":i=t?"var(--diffBlob-hunkNum-bgColor-rest, var(--diffBlob-hunk-bgColor-num))":"var(--diffBlob-hunkLine-bgColor, var(--bgColor-accent-muted))";break;case"EMPTY":i=t?"var(--diffBlob-emptyNum-bgColor, var(--diffBlob-hunk-bgColor-num))":"var(--diffBlob-emptyLine-bgColor, var(--bgColor-accent-muted))";break;default:i="var(--bgColor-default)"}return n?"":i}},3252:(e,t,n)=>{function i(e){return[...e.querySelectorAll(".js-blob-code-addition")].map(e=>e.textContent).filter(e=>null!==e)}function a(e){if(!e||e.length>1e5)return null;let t=e.split(/\r?\n/),n=!1,i="",a=[];for(let e=0;e<t.length;e++){let s=t[e];if(void 0!==s)if(n){if(s.match(/^ {0,3}(`{3,}|~{3,})[ \t]*$/))return a;let e=s;if(i.length>0){let t=RegExp(`^ {0,${i.length}}`);e=s.replace(t,"")}a.push(e)}else{let e=s.match(/^( {0,3})(`{3,}|~{3,})suggestion[ \t]*$/);if(e){n=!0,i=e[1]||"";continue}}}return null}n.d(t,{T:()=>a,y:()=>i})},5533:(e,t,n)=>{function i(e){return!!e?.startedAt&&!e?.completedAt}function a(e){return!!e&&Object.values(e.nodes).some(i)}n.d(t,{f:()=>i,y:()=>a})},6551:(e,t,n)=>{n.d(t,{S:()=>a});var i=n(96540);function a(e){let t=(0,i.useRef)(void 0);return(0,i.useEffect)(()=>{t.current=e},[e]),t.current}},7026:(e,t,n)=>{n.d(t,{M:()=>a});var i=n(96540);function a(e,t,n){let a=(0,i.useRef)(n);return(0,i.useMemo)(()=>{let n=t(e);return null!=n&&(a.current=n),a.current},[e,t])}},7812:(e,t,n)=>{n.d(t,{Bx:()=>g,LU:()=>d,PO:()=>x,SI:()=>f,SX:()=>b,by:()=>m,g:()=>h,oR:()=>v,oy:()=>o,wN:()=>p,wt:()=>u,yA:()=>y});var i=n(1631),a=n(25641),s=n(51213),r=n(35247),l=n(72994);function o(e){return e.split("#")[0]}function d(e,t){let n=o(e),i=t.get(n)??[],a=i.indexOf(e);return i.length>1&&-1!==a?a+1:null}function c(e,t){return`file:${e.name}#${t}`}function u(e,t,n){switch(e.type){case"thread-scoped-file":return d(c(e,t),n)??void 0;case"draft-issue":case"draft-update-issue":return d(v({ref:e,messageIndex:t}).id,n)??void 0}}function m(e,t,n){return{type:"file",id:`file:${(0,a.Vb)(e)}#0`,reference:e,messageId:t??s.Wp,name:e.path,language:e.languageName??"",value:"",isStreaming:!0,isUserEdited:!1,timestamp:n?new Date(n):new Date}}function h(e,t,n){let i=e=>({type:"file",id:`file:empty:${e}#${Date.now()}`,messageId:t??s.Wp,name:e,language:"",value:"",isStreaming:!1,isUserEdited:!1,timestamp:n?new Date(n):new Date}),r=e.baseFile?m(e.baseFile):i(e.headFile?.path||""),l=e.headFile?m(e.headFile):i(e.baseFile?.path||""),o=e.headFile||e.baseFile,d=o?.path||"";return{type:"file-diff",id:`file-diff:${(0,a.Vb)(e)}#0`,baseFile:r,headFile:l,name:d,language:(e.headFile?l:r).language,isStreaming:!0,isUserEdited:!1,timestamp:n?new Date(n):new Date,messageId:t??s.Wp,reference:e}}function f(e,t){return{type:"issue",id:`issue:${e.number}`,messageId:t??s.Wp,name:e.title??"",number:e.number,owner:e.repository.owner,repo:e.repository.name,href:e.url}}function p(e,t){let{repoOwner:n,repoName:i,id:a}=e;return{type:"job-result",id:`job-result:${n}-${i}-${a}`,messageId:t??s.Wp,name:`Job #${a} in ${n}/${i}`,jobId:Number(a),workflowId:e.workflow?.id,repoOwner:n,repoName:i}}function g(e,t=s.Wp){return{type:"plugin-content",id:`plugin-content:${e.type}:${(0,a.Vb)(e)}`,name:(0,a.z$)(e),icon:(0,i.a_)(e),messageId:t,reference:e}}function y(e){return{type:e.type,tag:e.tag,parentTag:e.parentTag,repository:e.repository,number:e.number,title:e.name,state:e.state,url:e.href,blockedByTags:e.blockedByTags??[],isBlockingTags:e.isBlockingTags??[]}}function x(e){switch(e.type){case"file":return{type:"thread-scoped-file",name:e.name,language:e.language,text:e.value};case"new-issue":case"update-issue":return{type:"update-issue"===e.type?"draft-update-issue":"draft-issue",tag:e.tag,parentTag:e.parentTag,title:e.name,description:e.body,bodyVersion:e.bodyVersion,repository:e.repository,template:e.template,assignees:e.assignees,labels:e.labels,issueType:e.issueType,projects:(0,l.t)(e.projects),rawProjectsInput:e.rawProjectsInput,milestone:e.milestone,templateFormValuesById:e.defaultValuesById,issueNumber:e.issueNumber,blockedByTags:e.blockedByTags,isBlockingTags:e.isBlockingTags};default:return null}}function v({ref:e,messageIndex:t,messageId:n,timestamp:i}){switch(e.type){case"thread-scoped-file":return function(e,t,n=s.Wp,i){return{type:"file",id:c(e,t),reference:e,messageId:n,name:e.name,language:e.language,value:e.text,timestamp:i?new Date(i):new Date,isStreaming:!1,isUserEdited:n===s.Wp}}(e,t,n,i);case"draft-issue":case"draft-update-issue":return function({ref:e,messageId:t=s.Wp,messageIndex:n}){let i=e.issueNumber&&r.W.draftUpdateIssue?"update-issue":"new-issue";return{type:i,id:`${i}:${e.tag}#${n}`,tag:e.tag,parentTag:e.parentTag,repository:e.repository,name:e.title,body:e.description,bodyVersion:e.bodyVersion,assignees:e.assignees,labels:e.labels,issueType:e.issueType,projects:(0,l.c)(e.projects),rawProjectsInput:e.rawProjectsInput,milestone:e.milestone,isUserEdited:t===s.Wp,messageId:t,isStreaming:!1,template:e.template,defaultValuesById:e.templateFormValuesById??{},issueNumber:e.issueNumber,blockedByTags:e.blockedByTags??[],isBlockingTags:e.isBlockingTags??[]}}({ref:e,messageIndex:t,messageId:n});default:return null}}function b(e,t,n){let i=o(e.id),a=n.get(i),s=a?.findIndex(t=>t===e.id)??-1,r=a?.[s-1];return r&&t.get(r)}},8108:(e,t,n)=>{n.d(t,{_g:()=>p,bB:()=>u,e9:()=>h,xJ:()=>y});var i=n(21728),a=n(97665),s=n(94747),r=n(99519),l=n(93161),o=n(5533),d=n(48057);function c(e){let t,n,l,o,c=(0,i.c)(13),u=(0,a.jE)(),m=(0,r.EY)();return c[0]!==u||c[1]!==m||c[2]!==e?(t=async t=>{let{loopID:n,version:i,nodeID:a}=t,s=(0,d.wu)(n,i),r=u.getQueryData(s);if(!r)throw Error("No current execution");let l=e(r.nodes[a],t);return await m.updateNodeExecution(n,i,r.id,a,l)},c[0]=u,c[1]=m,c[2]=e,c[3]=t):t=c[3],c[4]!==u||c[5]!==e?(n=async t=>{let{loopID:n,version:i,nodeID:a}=t,s=(0,d.wu)(n,i),r=u.getQueryData(s);if(r){let n=e(r.nodes[a],t),i={...r,nodes:{...r.nodes,[a]:n}};u.setQueryData(s,i)}await u.cancelQueries({queryKey:s},{revert:!1})},c[4]=u,c[5]=e,c[6]=n):n=c[6],c[7]!==u?(l=(e,t)=>{if(!e.success)return;let{loopID:n,version:i,nodeID:a}=t,s=(0,d.wu)(n,i);u.setQueryData(s,t=>{if(!t)return t;let n=t.nodes[a],i=e.data;return n?.completedAt!==void 0&&n.completedAt>0&&!i.completedAt?t:{...t,nodes:{...t.nodes,[a]:i}}})},c[7]=u,c[8]=l):l=c[8],c[9]!==t||c[10]!==n||c[11]!==l?(o={mutationFn:t,onMutate:n,onSuccess:l},c[9]=t,c[10]=n,c[11]=l,c[12]=o):o=c[12],(0,s.n)(o)}function u(){return c(m)}function m(e,t){let{value:n}=t;return{...e??l.D,value:n,completedAt:Date.now()}}function h(){return c(f)}function f(e,t){let{error:n}=t;return{...e??l.D,error:n,value:null,completedAt:Date.now()}}function p(){return c(g)}function g(e){return{...e??l.D,startedAt:Date.now(),completedAt:void 0}}function y(){var e;let t,n,l,o,c,u;return e=x,o=(0,i.c)(10),c=(0,a.jE)(),u=(0,r.EY)(),o[0]!==c||o[1]!==u||o[2]!==e?(t=async t=>{let{loopID:n,version:i}=t,a=(0,d.wu)(n,i),s=c.getQueryData(a);if(!s)throw Error("No current execution");let r=e(s,t);return await u.updateExecution(n,i,s.id,r)},o[0]=c,o[1]=u,o[2]=e,o[3]=t):t=o[3],o[4]!==c||o[5]!==e?(n=async t=>{let{loopID:n,version:i}=t,a=(0,d.wu)(n,i),s=c.getQueryData(a);if(s){let n=e(s,t);c.setQueryData(a,n)}await c.cancelQueries({queryKey:a},{revert:!1})},o[4]=c,o[5]=e,o[6]=n):n=o[6],o[7]!==t||o[8]!==n?(l={mutationFn:t,onMutate:n},o[7]=t,o[8]=n,o[9]=l):l=o[9],(0,s.n)(l)}function x(e){return{...e,nodes:Object.fromEntries(Object.entries(e.nodes).map(v))}}function v(e){let[t,n]=e;return[t,(0,o.f)(n)?{...n,completedAt:Date.now()}:n]}},8431:(e,t,n)=>{n.d(t,{A:()=>i});let i={diff:"Diff-module__diff--Sofy4",diffTargetable:"Diff-module__diffTargetable--kW3Cm",diffHeaderWrapper:"Diff-module__diffHeaderWrapper--eH6zk",diffAddFileThread:"Diff-module__diffAddFileThread--f81Tx",diffFooter:"Diff-module__diffFooter--kHHJz"}},11128:(e,t,n)=>{n.d(t,{n:()=>o});var i=n(74848),a=n(21728),s=n(38621),r=n(21373),l=n(22053);function o(e){let t,n,o,c,u,m,h,f=(0,a.c)(17),{additionalActions:p,errors:g,onFixErrorClick:y,title:x}=e,{isReadonly:v}=(0,l.a)();return f[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(s.AlertIcon,{className:"ErrorDisplay-module__errorIcon--SP3WM",size:"medium"}),f[0]=t):t=f[0],f[1]!==x?(n=(0,i.jsx)("h2",{className:"ErrorDisplay-module__errorTitle--P8tnN",children:x}),f[1]=x,f[2]=n):n=f[2],f[3]!==g?(o=g.map(d),f[3]=g,f[4]=o):o=f[4],f[5]!==n||f[6]!==o?(c=(0,i.jsxs)("div",{className:"ErrorDisplay-module__errorNotice--Ey4vJ",children:[n,o]}),f[5]=n,f[6]=o,f[7]=c):c=f[7],f[8]!==v||f[9]!==y?(u=!v&&y&&(0,i.jsx)(r.Q,{leadingVisual:s.BeakerIcon,onClick:y,children:"Try to fix it"}),f[8]=v,f[9]=y,f[10]=u):u=f[10],f[11]!==p||f[12]!==u?(m=(0,i.jsxs)("div",{className:"ErrorDisplay-module__errorActions--NW0lt",children:[p,u]}),f[11]=p,f[12]=u,f[13]=m):m=f[13],f[14]!==c||f[15]!==m?(h=(0,i.jsxs)("div",{className:"ErrorDisplay-module__errorContainer--r2xoZ",children:[t,c,m]}),f[14]=c,f[15]=m,f[16]=h):h=f[16],h}function d(e){return(0,i.jsx)("p",{className:"ErrorDisplay-module__errorText--c4NUQ",children:e},e)}try{o.displayName||(o.displayName="ErrorDisplay")}catch{}},11607:(e,t,n)=>{n.d(t,{$:()=>d});var i=n(74848),a=n(21728),s=n(34164),r=n(96540),l=n(61526);let o={button:"Button-module__button--hMmd1",small:"Button-module__small--xYPhJ",medium:"Button-module__medium--d64dr",condensed:"Button-module__condensed--WrsZL",iconOnly:"Button-module__iconOnly--NkD70",default:"Button-module__default--fN_4Y",disabled:"Button-module__disabled--tNL94",invisible:"Button-module__invisible--lYAq6",icon:"Button-module__icon--Qd_AY",text:"Button-module__text--VDmpz"},d=(0,r.forwardRef)((e,t)=>{let n,r,d,c,u,m,h,f,p,g,y,x,v,b,j,w,_,C=(0,a.c)(65);C[0]!==e?({size:m,variant:h,condensed:f,iconOnly:p,icon:c,className:r,children:n,disabled:d,...u}=e,C[0]=e,C[1]=n,C[2]=r,C[3]=d,C[4]=c,C[5]=u,C[6]=m,C[7]=h,C[8]=f,C[9]=p):(n=C[1],r=C[2],d=C[3],c=C[4],u=C[5],m=C[6],h=C[7],f=C[8],p=C[9]);let N=void 0===h?"default":h,S=void 0!==f&&f,I=void 0!==p&&p,k=o[void 0===m?"small":m],L=o[N],T=S&&o.condensed,D=I&&o.iconOnly,E=d&&o.disabled;C[10]!==r||C[11]!==k||C[12]!==L||C[13]!==T||C[14]!==D||C[15]!==E?(g=(0,s.$)(o.button,k,L,T,D,E,r),C[10]=r,C[11]=k,C[12]=L,C[13]=T,C[14]=D,C[15]=E,C[16]=g):g=C[16];let R=g;C[17]!==c?(y=null!=c?(0,i.jsx)("span",{className:o.icon,children:c}):null,C[17]=c,C[18]=y):y=C[18],C[19]!==n||C[20]!==I?(x=!I&&n?(0,i.jsx)("span",{className:o.text,children:n}):null,C[19]=n,C[20]=I,C[21]=x):x=C[21],C[22]!==y||C[23]!==x?(v=(0,i.jsxs)(i.Fragment,{children:[y,x]}),C[22]=y,C[23]=x,C[24]=v):v=C[24];let A=v;if("to"in u){let e,n,a,s;return C[25]!==u?({to:a,onClick:e,...n}=u,C[25]=u,C[26]=e,C[27]=n,C[28]=a):(e=C[26],n=C[27],a=C[28]),C[29]!==R||C[30]!==A||C[31]!==d||C[32]!==e||C[33]!==n||C[34]!==t||C[35]!==a?(s=(0,i.jsx)(l.N_,{ref:t,to:a,className:R,"aria-disabled":d,onClick:e,...n,children:A}),C[29]=R,C[30]=A,C[31]=d,C[32]=e,C[33]=n,C[34]=t,C[35]=a,C[36]=s):s=C[36],s}if("href"in u){let e,n,a,s,r,l;return C[37]!==u?({href:e,target:r,rel:a,onClick:n,...s}=u,C[37]=u,C[38]=e,C[39]=n,C[40]=a,C[41]=s,C[42]=r):(e=C[38],n=C[39],a=C[40],s=C[41],r=C[42]),C[43]!==R||C[44]!==A||C[45]!==d||C[46]!==e||C[47]!==n||C[48]!==a||C[49]!==s||C[50]!==t||C[51]!==r?(l=(0,i.jsx)("a",{ref:t,href:e,target:r,rel:a,className:R,"aria-disabled":d,onClick:n,...s,children:A}),C[43]=R,C[44]=A,C[45]=d,C[46]=e,C[47]=n,C[48]=a,C[49]=s,C[50]=t,C[51]=r,C[52]=l):l=C[52],l}C[53]!==u?({onClick:b,type:w,...j}=u,C[53]=u,C[54]=b,C[55]=j,C[56]=w):(b=C[54],j=C[55],w=C[56]);let O=void 0===w?"button":w;return C[57]!==R||C[58]!==A||C[59]!==d||C[60]!==b||C[61]!==j||C[62]!==t||C[63]!==O?(_=(0,i.jsx)("button",{ref:t,type:O,onClick:b,disabled:d,className:R,...j,children:A}),C[57]=R,C[58]=A,C[59]=d,C[60]=b,C[61]=j,C[62]=t,C[63]=O,C[64]=_):_=C[64],_});d.displayName="Button"},12357:(e,t,n)=>{n.d(t,{U:()=>C});var i=n(74848),a=n(21728),s=n(4817),r=n(85094),l=n(98755),o=n(96540),d=n(57826),c=n(34164),u=n(53419);function m(e){let t,n,s,r,m,h,f,p,g,y=(0,a.c)(18),{children:x,code:v}=e,b=(0,o.useId)(),{chatMode:j,wrapCodeLines:w}=(0,o.useContext)(d.F);y[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.$)("CodeBlocks-module__container--GV7vX","CodeBlocks-module__immersive--pP6K5"),y[0]=t):t=y[0],y[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,c.$)("CodeBlocks-module__copyContainer--PlsVH"),s=(0,c.$)("CodeBlocks-module__copyContent--_B0qO"),y[1]=n,y[2]=s):(n=y[1],s=y[2]),y[3]!==j?(r=()=>{(0,u.BI)("dotcom_chat.activate",{target:"CODE_BLOCK_COPY",mode:j})},y[3]=j,y[4]=r):r=y[4],y[5]!==v||y[6]!==r?(m=(0,i.jsx)("div",{className:n,children:(0,i.jsx)("div",{className:s,children:(0,i.jsx)(l.T,{textToCopy:v,ariaLabel:"Copy code",className:"CodeBlocks-module__copyButton--xrG5L",size:"small",onCopy:r})})}),y[5]=v,y[6]=r,y[7]=m):m=y[7],y[8]===Symbol.for("react.memo_cache_sentinel")?(h=(0,c.$)("CodeBlocks-module__codeContainer--wOuWu"),y[8]=h):h=y[8];let _=w&&"CodeBlocks-module__codeWrap--YQDq8";return y[9]!==_?(f=(0,c.$)(_),y[9]=_,y[10]=f):f=y[10],y[11]!==x||y[12]!==f?(p=(0,i.jsx)("div",{className:h,children:(0,i.jsx)("pre",{className:"CodeBlocks-module__code--wvK8k",tabIndex:0,children:(0,i.jsx)("code",{className:f,children:x})})}),y[11]=x,y[12]=f,y[13]=p):p=y[13],y[14]!==b||y[15]!==m||y[16]!==p?(g=(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("figure",{className:t,"aria-labelledby":b,children:[m,p]})}),y[14]=b,y[15]=m,y[16]=p,y[17]=g):g=y[17],g}try{m.displayName||(m.displayName="CodeBlocksForLoop")}catch{}var h=n(47970);let f="data-codeblock-for-loop-props",p=(0,r.F)(f),g={code:(e,t)=>{let n=(0,r.k)(e,f);return n?(0,i.jsx)(m,{...n,children:e.children}):t}};var y=n(90122),x=n(76219),v=n(69726);let b="data-mermaid-props",j=(0,r.F)(b);function w(e){let t,n,s,r,l,o,d,u,m=(0,a.c)(18),{code:h,identity:f,viewscreenHost:p}=e,g=`${p}/markdown/mermaid`,y=encodeURIComponent(h);m[0]!==y?(t=btoa(y),m[0]=y,m[1]=t):t=m[1];let x=t;m[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,c.$)("js-render-needs-enrichment","render-needs-enrichment","Mermaid-module__diagramContainer--YUzME"),m[2]=n):n=m[2];let b=`${g}?data=${x}`;return m[3]!==h?(s=JSON.stringify({data:h}),m[3]=h,m[4]=s):s=m[4],m[5]!==h?(r=(0,i.jsx)("div",{className:"Mermaid-module__hiddenSourceCode--dlgHV",children:(0,i.jsx)("pre",{lang:"mermaid",children:h})}),m[5]=h,m[6]=r):r=m[6],m[7]!==h||m[8]!==s||m[9]!==r?(l=(0,i.jsx)("div",{className:"js-render-enrichment-target","data-json":s,"data-plain":h,children:r}),m[7]=h,m[8]=s,m[9]=r,m[10]=l):l=m[10],m[11]===Symbol.for("react.memo_cache_sentinel")?(o=(0,c.$)("js-render-enrichment-loader","Mermaid-module__loaderContainer--pyhaT"),m[11]=o):o=m[11],m[12]===Symbol.for("react.memo_cache_sentinel")?(d=(0,i.jsx)("span",{className:o,role:"presentation",children:(0,i.jsx)(v.A,{})}),m[12]=d):d=m[12],m[13]!==p||m[14]!==f||m[15]!==b||m[16]!==l?(u=(0,i.jsxs)("section",{className:n,"data-identity":f,"data-host":p,"data-src":b,"data-type":"mermaid","aria-label":"Mermaid diagram rendered output container",children:[l,d]}),m[13]=p,m[14]=f,m[15]=b,m[16]=l,m[17]=u):u=m[17],u}let _={code:(e,t)=>{if(!e.className?.includes("language-mermaid"))return t;let n=(0,r.k)(e,b);return n?(0,i.jsx)(w,{code:n.code,identity:n.identity,viewscreenHost:n.viewscreenHost}):t}};try{w.displayName||(w.displayName="MermaidRenderer")}catch{}function C(e){let t,n,r,l,o,d,u=(0,a.c)(15),{className:m,isRunning:f,nodeValue:v,renderAsJson:b}=e,w=void 0!==b&&b,{previewUrl:C}=(0,x.U)();if(u[0]===Symbol.for("react.memo_cache_sentinel")?(t={transformMarkdown:e=>(0,h.YR)(e,"code",e=>{e.data={...e.data,hName:"code",hProperties:{[p]:JSON.stringify({language:e.lang??"",code:e.value,startOffset:e.position?.start.offset??-1,endOffset:e.position?.end.offset??-1})}}}),transformHtml:e=>(0,h.YR)(e,"element",(e,t,n)=>{let i=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&i?.type==="element"&&"code"===i.tagName&&p in i.properties&&n.children.splice(t,1,i)}),reactComponents:g},u[0]=t):t=u[0],u[1]!==C){var N;n=[t],C&&n.push((N={viewscreenHost:C},{transformMarkdown:e=>(0,h.YR)(e,"code",e=>{"mermaid"===e.lang&&(e.data={...e.data,hName:"code",hProperties:{className:["language-mermaid"],[j]:JSON.stringify({code:e.value,identity:`mermaid-${Math.random().toString(36).slice(2,11)}`,viewscreenHost:N.viewscreenHost})}})}),transformHtml:e=>(0,h.YR)(e,"element",(e,t,n)=>{let i=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&i?.type==="element"&&"code"===i.tagName&&j in i.properties&&n.children.splice(t,1,i)}),reactComponents:_})),u[1]=C,u[2]=n}else n=u[2];let S=n;u[3]!==v?(r=(0,y.DO)(v),u[3]=v,u[4]=r):r=u[4];let I=r;return u[5]!==m?(l=(0,c.$)("OutputDisplay-module__outputValue--I7SuT",m),u[5]=m,u[6]=l):l=u[6],u[7]!==S||u[8]!==f||u[9]!==w||u[10]!==I?(o=w?(0,i.jsx)("pre",{className:"OutputDisplay-module__jsonOutput--NA93D",children:I}):(0,i.jsx)(s.To,{extensions:S,className:"OutputDisplay-module__markdownOutput--c47bk",isStreaming:f,markdown:I}),u[7]=S,u[8]=f,u[9]=w,u[10]=I,u[11]=o):o=u[11],u[12]!==l||u[13]!==o?(d=(0,i.jsx)("div",{className:l,children:o}),u[12]=l,u[13]=o,u[14]=d):d=u[14],d}try{C.displayName||(C.displayName="OutputDisplay")}catch{}},12465:(e,t,n)=>{n.d(t,{P:()=>u,W:()=>m});var i=n(21728),a=n(94747),s=n(97665),r=n(46747),l=n(99519),o=n(99993),d=n(33026);function c(e){let t,n,s=(0,i.c)(5),r=(0,l.EY)();return s[0]!==r?(t=async e=>{let{loopID:t,updateFn:n}=e;return await r.updateLoop(t,n)},s[0]=r,s[1]=t):t=s[1],s[2]!==e||s[3]!==t?(n={mutationFn:t,...e},s[2]=e,s[3]=t,s[4]=n):n=s[4],(0,a.n)(n)}function u(){let e,t=(0,i.c)(2),n=(0,s.jE)();return t[0]!==n?(e={onMutate:async e=>{let{loopID:t,updateFn:i}=e;await n.cancelQueries({queryKey:(0,o.c_)(t,d.kj)});let a=n.getQueryData((0,o.c_)(t,d.kj)),s=a?.version?n.getQueryData((0,o.c_)(t,a.version)):null;if(a){let e=i(a);n.setQueryData((0,o.c_)(t,d.kj),e),e.version&&n.setQueryData((0,o.c_)(t,e.version),e)}return{previousDraftLoop:a,previousVersionedLoop:s,loopID:t}},onError:(e,t,i)=>{i?.previousDraftLoop&&(n.setQueryData((0,o.c_)(i.loopID,d.kj),i.previousDraftLoop),i.previousVersionedLoop&&i.previousDraftLoop.version&&n.setQueryData((0,o.c_)(i.loopID,i.previousDraftLoop.version),i.previousVersionedLoop))}},t[0]=n,t[1]=e):e=t[1],c(e)}function m(){let e,t,n=(0,i.c)(6),a=(0,s.jE)(),l=c(),u=(0,r.d)(l.mutate,500);n[0]!==u||n[1]!==a?(e=async(e,t)=>{let{loopID:n,updateFn:i}=e;await a.cancelQueries({queryKey:(0,o.c_)(n,d.kj)});let s=i(a.getQueryData((0,o.c_)(n,d.kj))??null);return a.setQueryData((0,o.c_)(n,d.kj),s),u({loopID:n,updateFn:i}),t?.onSuccess?.(),s},n[0]=u,n[1]=a,n[2]=e):e=n[2];let m=e;return n[3]!==m||n[4]!==l?(t={...l,mutate:m},n[3]=m,n[4]=l,n[5]=t):t=n[5],t}},13647:(e,t,n)=>{n.d(t,{Ch:()=>a,PW:()=>o,V2:()=>l,Ve:()=>r,Xg:()=>d,a1:()=>s});var i=n(69599);function a(){return(0,i.G7)("copilot_pipes_code_nodes")}function s(){return(0,i.G7)("copilot_pipes_react_nodes")}function r(){return(0,i.G7)("copilot_pipes_github_graphql_nodes")}function l(){return(0,i.G7)("copilot_pipes_pipeline_nodes")}function o(){return(0,i.G7)("copilot_loops_post_staff_ship_features")}function d(){return(0,i.G7)("loops_service_graphql_execution")}},13974:(e,t,n)=>{n.d(t,{p:()=>s});var i=n(21728),a=n(96540);function s(e){let t,n,s=(0,i.c)(4),[r,l]=(0,a.useState)(!1),o=(0,a.useRef)(e);return s[0]!==r||s[1]!==e?(t=()=>{e&&(o.current=!0),e||!o.current||r||l(!0)},n=[e,r],s[0]=r,s[1]=e,s[2]=t,s[3]=n):(t=s[2],n=s[3]),(0,a.useEffect)(t,n),r}},14303:(e,t,n)=>{n.d(t,{r:()=>y});var i=n(74848),a=n(21728),s=n(5524),r=n(94236),l=n(59394),o=n(96540),d=n(38621),c=n(295),u=n(53419),m=n(25641),h=n(61526),f=n(25407),p=n(64917),g=n(35247);function y(e){let t,n,y,v,b,j,w,_,C,N,S,I,k,L,T,D,E,R,A,O,P=(0,a.c)(66),{onDelete:F,onCopyLoop:M,onDuplicate:$,onShare:B,onEdit:V,onCopyOutput:U,onRename:q,loopId:G,hasOutput:H,returnFocusRef:K}=e,W=void 0!==H&&H,[z,Q]=(0,o.useState)(null),{mutate:Z}=(0,c.h)(),{ownerLogin:J,owned:Y,loopURL:X}=(0,p.I)(x);P[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{Q("delete")},P[0]=t):t=P[0];let ee=t;P[1]!==K?(n=()=>{Q(null),setTimeout(()=>K?.current?.focus())},P[1]=K,P[2]=n):n=P[2];let et=n;P[3]!==Z||P[4]!==G||P[5]!==F?(y=async()=>{G&&(Q(null),Z(G,{onSuccess:F}))},P[3]=Z,P[4]=G,P[5]=F,P[6]=y):y=P[6];let en=y;P[7]!==G||P[8]!==$?(v=()=>{G&&$&&((0,u.BI)("dotcom_chat.activate",{target:"LOOP_DUPLICATE",mode:"loops"}),$(G))},P[7]=G,P[8]=$,P[9]=v):v=P[9];let ei=v;P[10]!==B?(b=()=>{B?.()},P[10]=B,P[11]=b):b=P[11];let ea=b;P[12]!==V?(j=()=>{(0,u.BI)("dotcom_chat.activate",{target:"OUTPUTS_VIEW_EDIT_LOOP",mode:"loops"}),V?.()},P[12]=V,P[13]=j):j=P[13];let es=j;P[14]!==U?(w=()=>{U&&U()},P[14]=U,P[15]=w):w=P[15];let er=w;return G?(P[16]!==er||P[17]!==W||P[18]!==U?(_=U&&(0,i.jsxs)(s.l.Item,{onSelect:er,disabled:!W,children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(d.CopyIcon,{})}),"Copy output"]}),P[16]=er,P[17]=W,P[18]=U,P[19]=_):_=P[19],P[20]!==es||P[21]!==G||P[22]!==V?(C=V&&(0,i.jsxs)(s.l.LinkItem,{as:h.N_,to:`${m.Jz}/l/${G}`,onSelect:es,children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(d.PencilIcon,{})}),"Edit loop"]}),P[20]=es,P[21]=G,P[22]=V,P[23]=C):C=P[23],P[24]!==M||P[25]!==U||P[26]!==$||P[27]!==V||P[28]!==B?(N=(U||V)&&($||B||M)&&(0,i.jsx)(s.l.Divider,{}),P[24]=M,P[25]=U,P[26]=$,P[27]=V,P[28]=B,P[29]=N):N=P[29],P[30]!==ei||P[31]!==$?(S=$&&(0,i.jsxs)(s.l.Item,{onSelect:ei,children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(d.DuplicateIcon,{})}),"Duplicate"]}),P[30]=ei,P[31]=$,P[32]=S):S=P[32],P[33]!==q?(I=q&&(0,i.jsxs)(s.l.Item,{onSelect:q,children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(d.PencilIcon,{})}),"Rename"]}),P[33]=q,P[34]=I):I=P[34],P[35]!==ea||P[36]!==B?(k=B&&(0,i.jsxs)(s.l.Item,{onSelect:ea,children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(d.LinkIcon,{})}),"Copy link"]}),P[35]=ea,P[36]=B,P[37]=k):k=P[37],P[38]!==M?(L=M&&(0,i.jsxs)(s.l.Item,{onSelect:M,children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(d.CopyIcon,{})}),"Copy JSON"]}),P[38]=M,P[39]=L):L=P[39],P[40]!==M||P[41]!==$||P[42]!==B?(T=($||B||M)&&(0,i.jsx)(s.l.Divider,{}),P[40]=M,P[41]=$,P[42]=B,P[43]=T):T=P[43],P[44]===Symbol.for("react.memo_cache_sentinel")?(D=(0,i.jsxs)(s.l.Item,{variant:"danger",onSelect:ee,children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(d.TrashIcon,{})}),"Delete"]}),P[44]=D):D=P[44],P[45]!==X||P[46]!==Y||P[47]!==J?(E=g.W.loopsAbusePrevention&&J&&!Y&&X&&(0,i.jsxs)(s.l.LinkItem,{variant:"danger",href:(0,f.YPg)({report:`${J} (User)`,contentURL:X}),children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(d.AlertIcon,{})}),"Report"]}),P[45]=X,P[46]=Y,P[47]=J,P[48]=E):E=P[48],P[49]!==C||P[50]!==N||P[51]!==S||P[52]!==I||P[53]!==k||P[54]!==L||P[55]!==T||P[56]!==E||P[57]!==_?(R=(0,i.jsx)(r.W.Overlay,{align:"end",children:(0,i.jsxs)(s.l,{children:[_,C,N,S,I,k,L,T,D,E]})}),P[49]=C,P[50]=N,P[51]=S,P[52]=I,P[53]=k,P[54]=L,P[55]=T,P[56]=E,P[57]=_,P[58]=R):R=P[58],P[59]!==et||P[60]!==en||P[61]!==z?(A="delete"===z&&(0,i.jsx)(l.K,{title:"Delete loop",onClose:e=>{"confirm"===e?en():et()},confirmButtonContent:"Delete",confirmButtonType:"danger",children:"Are you sure you want to delete this loop? This action cannot be undone."}),P[59]=et,P[60]=en,P[61]=z,P[62]=A):A=P[62],P[63]!==R||P[64]!==A?(O=(0,i.jsxs)(i.Fragment,{children:[R,A]}),P[63]=R,P[64]=A,P[65]=O):O=P[65],O):null}function x(e){return{owned:e?.owned,ownerLogin:e?.ownerLogin,loopURL:window.location.origin+window.location.pathname}}try{y.displayName||(y.displayName="LoopsActionMenuOverlay")}catch{}},14808:(e,t,n)=>{n.d(t,{LR:()=>o,KA:()=>T,G9:()=>p,XA:()=>C});var i=n(74848),a=n(21728),s=n(5524),r=n(96540);let l=(0,r.forwardRef)((e,t)=>{let n,r,l,o,d,c,u,m,h,f,p,g,y,x,v=(0,a.c)(28);if(v[0]!==t||v[1]!==e){l=Symbol.for("react.early_return_sentinel");e:{let{selected:a,...y}=e;if(y.renderItem){l=y.renderItem({selected:a,...y});break e}let{label:x,id:v,description:b,descriptionVariant:j,onSelect:w,renderDescription:_,className:C,trailingVisual:N,disabled:S}=y;g=N,n=s.l.Item,r=v,o="option",d=()=>{w({label:x,id:v,selected:a,description:b,descriptionVariant:j})},c=a,u=t,m=C,h=S,f=x,p=(b||_)&&(0,i.jsx)(s.l.Description,{variant:j,children:_?_():b})}v[0]=t,v[1]=e,v[2]=n,v[3]=r,v[4]=l,v[5]=o,v[6]=d,v[7]=c,v[8]=u,v[9]=m,v[10]=h,v[11]=f,v[12]=p,v[13]=g}else n=v[2],r=v[3],l=v[4],o=v[5],d=v[6],c=v[7],u=v[8],m=v[9],h=v[10],f=v[11],p=v[12],g=v[13];return l!==Symbol.for("react.early_return_sentinel")?l:(v[14]!==g?(y=g?(0,i.jsx)(s.l.TrailingVisual,{children:g}):null,v[14]=g,v[15]=y):y=v[15],v[16]!==n||v[17]!==r||v[18]!==y||v[19]!==o||v[20]!==d||v[21]!==c||v[22]!==u||v[23]!==m||v[24]!==h||v[25]!==f||v[26]!==p?(x=(0,i.jsxs)(n,{role:o,onSelect:d,selected:c,ref:u,className:m,disabled:h,children:[f,p,y]},r),v[16]=n,v[17]=r,v[18]=y,v[19]=o,v[20]=d,v[21]=c,v[22]=u,v[23]=m,v[24]=h,v[25]=f,v[26]=p,v[27]=x):x=v[27],x)});l.displayName="SelectItem";let o=(0,r.forwardRef)((e,t)=>{let n,l,o,f=(0,a.c)(18),{selectionVariant:p,items:g,onSelect:y,controlled:x,showGroupHeading:v}=e;f[0]!==g?(n=()=>g.filter(c),f[0]=g,f[1]=n):n=f[1];let[b,j]=(0,r.useState)(n);f[2]!==g?(l=g.find(u),f[2]=g,f[3]=l):l=f[3];let w=l;if(f[4]!==x||f[5]!==w||f[6]!==g||f[7]!==y||f[8]!==t||f[9]!==b||f[10]!==p||f[11]!==v){let e,n=w?g.reduce(m,{}):null,a=g.filter(h),l=n&&Object.entries(n);f[13]!==x||f[14]!==y||f[15]!==b||f[16]!==p?(e=e=>{let{id:t}=e;if(y&&y(e),x)if(b.find(e=>e.id===t)){let e=b.filter(e=>e.id!==t);j(e),x(e)}else{let t="multiple"===p?[...b,e]:[e];j(t),x(t)}},f[13]=x,f[14]=y,f[15]=b,f[16]=p,f[17]=e):e=f[17];let c=e;o=(0,i.jsx)(i.Fragment,{children:n?(0,i.jsxs)(i.Fragment,{children:[l?l.map((e,n)=>{let[a,o]=e;return(0,i.jsxs)(r.Fragment,{children:[(0,i.jsxs)(s.l.Group,{"aria-label":o[0]?.groupTitle||`Group ${a}`,selectionVariant:p,children:[v?(0,i.jsx)(s.l.GroupHeading,{variant:"filled",children:o[0]?.groupTitle||`Group ${a}`}):null,o.map((e,a)=>(0,i.jsx)(d,{selectedItems:b,onSelectToggle:c,controlled:x,ref:0===a&&0===n?t:void 0,...e},e.id))]},a),l.length>1&&n!==l.length-1?(0,i.jsx)(s.l.Divider,{}):null]},a)}):null,a.map(e=>(0,i.jsx)(d,{selectedItems:b,onSelectToggle:c,controlled:x,...e},e.id))]}):(0,i.jsx)(i.Fragment,{children:g.map((e,n)=>(0,i.jsx)(d,{selectedItems:b,onSelectToggle:c,controlled:x,ref:0===n?t:null,...e},e.id))})}),f[4]=x,f[5]=w,f[6]=g,f[7]=y,f[8]=t,f[9]=b,f[10]=p,f[11]=v,f[12]=o}else o=f[12];return o}),d=r.forwardRef((e,t)=>{let n,s,r,o,d,c,u,m,h,f,p,g,y=(0,a.c)(35);y[0]!==e?({id:r,label:o,description:s,selectedItems:h,onSelectToggle:c,onSelect:d,controlled:n,selected:m,...u}=e,y[0]=e,y[1]=n,y[2]=s,y[3]=r,y[4]=o,y[5]=d,y[6]=c,y[7]=u,y[8]=m,y[9]=h):(n=y[1],s=y[2],r=y[3],o=y[4],d=y[5],c=y[6],u=y[7],m=y[8],h=y[9]),y[10]!==s||y[11]!==r||y[12]!==o||y[13]!==c||y[14]!==u.descriptionVariant||y[15]!==m?(f=()=>{c({label:o,id:r,selected:m,description:s,descriptionVariant:u.descriptionVariant})},y[10]=s,y[11]=r,y[12]=o,y[13]=c,y[14]=u.descriptionVariant,y[15]=m,y[16]=f):f=y[16];let x=f;y[17]!==n||y[18]!==r||y[19]!==m||y[20]!==h?(p=n?h.some(e=>e.id===r):!!m,y[17]=n,y[18]=r,y[19]=m,y[20]=h,y[21]=p):p=y[21];let v=d||x;return y[22]!==s||y[23]!==r||y[24]!==o||y[25]!==u.className||y[26]!==u.descriptionVariant||y[27]!==u.disabled||y[28]!==u.renderDescription||y[29]!==u.renderItem||y[30]!==u.trailingVisual||y[31]!==t||y[32]!==p||y[33]!==v?(g=(0,i.jsx)(l,{label:o,id:r,description:s,descriptionVariant:u.descriptionVariant,selected:p,onSelect:v,className:u.className,renderItem:u.renderItem,ref:t,trailingVisual:u.trailingVisual,disabled:u.disabled,renderDescription:u.renderDescription}),y[22]=s,y[23]=r,y[24]=o,y[25]=u.className,y[26]=u.descriptionVariant,y[27]=u.disabled,y[28]=u.renderDescription,y[29]=u.renderItem,y[30]=u.trailingVisual,y[31]=t,y[32]=p,y[33]=v,y[34]=g):g=y[34],g});function c(e){return e.selected}function u(e){return void 0!==e.groupId}function m(e,t){return void 0!==t.groupId&&(e[t.groupId]=e[t.groupId]||[],e[t.groupId]&&e[t.groupId].push(t)),e}function h(e){return void 0===e.groupId}o.displayName="SelectBody",d.displayName="SelectBodyItem";var f=n(21373);function p(e){let t,n,s,r,l,o,d,c,u,m=(0,a.c)(23),{footerButtons:h,onSave:p,onCancel:x}=e;m[0]!==h?(t=h?.reduce(y,{save:void 0,cancel:void 0,supplementary:[]}),r="SimpleSelect-module__Footer--BWYvt",n="SimpleSelect-module__FooterContent--CCfD8",s=h?t?.supplementary.map(g):null,m[0]=h,m[1]=t,m[2]=n,m[3]=s,m[4]=r):(t=m[1],n=m[2],s=m[3],r=m[4]),m[5]!==n||m[6]!==s?(l=(0,i.jsx)("div",{className:n,children:s}),m[5]=n,m[6]=s,m[7]=l):l=m[7];let v=t?.cancel,b=t?.cancel?.content||"Cancel";m[8]!==x||m[9]!==v||m[10]!==b?(o=(0,i.jsx)(f.Q,{onClick:x,...v,children:b}),m[8]=x,m[9]=v,m[10]=b,m[11]=o):o=m[11];let j=t?.save,w=t?.save?.content||"Save";return m[12]!==p||m[13]!==j||m[14]!==w?(d=(0,i.jsx)(f.Q,{variant:"primary",onClick:p,...j,children:w}),m[12]=p,m[13]=j,m[14]=w,m[15]=d):d=m[15],m[16]!==d||m[17]!==o?(c=(0,i.jsxs)("div",{className:"SimpleSelect-module__FooterActions--ILN1s",children:[o,d]}),m[16]=d,m[17]=o,m[18]=c):c=m[18],m[19]!==c||m[20]!==r||m[21]!==l?(u=(0,i.jsxs)("div",{className:r,children:[l,c]}),m[19]=c,m[20]=r,m[21]=l,m[22]=u):u=m[22],u}function g(e){let{variant:t,content:n,...a}=e;return(0,i.jsx)(f.Q,{variant:t||"default",...a,children:n},n)}function y(e,t){let{action:n,...i}=t;return"save"===n||"cancel"===n?e[n]=i:e.supplementary.push(i),e}try{p.displayName||(p.displayName="SelectFooter")}catch{}var x=n(38621),v=n(81960),b=n(26108);let j=e=>{let t,n,s,r=(0,a.c)(8),{id:l,title:o,onClose:d}=e,c=void 0===o?"Select an item":o;return r[0]!==l||r[1]!==c?(t=(0,i.jsx)(v.A,{id:l,as:"h1",className:"SimpleSelect-module__Title--dSeJ4",children:c}),r[0]=l,r[1]=c,r[2]=t):t=r[2],r[3]!==d?(n=(0,i.jsx)(b.K,{icon:x.XIcon,"aria-label":"Close",variant:"invisible",onClick:d}),r[3]=d,r[4]=n):n=r[4],r[5]!==t||r[6]!==n?(s=(0,i.jsxs)("div",{className:"SimpleSelect-module__Header--DPfBs",children:[t,n]}),r[5]=t,r[6]=n,r[7]=s):s=r[7],s};try{j.displayName||(j.displayName="SelectHeader")}catch{}var w=n(31604),_=n(15220);function C(e){let t,n,l,d,c,u,m,h,g,y,v,b,w,_,C,D,E=(0,a.c)(76),{variant:R,items:A,label:O,title:P,selectionVariant:F,onSelect:M,renderText:$,onSave:B,onCancel:V,selectable:U,buttonProps:q,outsideClick:G,onEscape:H,focusTarget:K,dialogProps:W,footerButtons:z}=e,Q=void 0===R?"overlay":R,Z=void 0===P?"Select an item":P,J=void 0===G?"save":G,Y=void 0===H?"save":H,X=void 0===K?"first-target":K,[ee,et]=(0,r.useState)(!1),[en,ei]=(0,r.useState)();E[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],E[0]=t):t=E[0];let[ea,es]=(0,r.useState)(t),er=(0,r.useRef)(null),el=(0,r.useId)(),eo=U?ea:A.filter(L),ed=(0,r.useRef)(null);en||(ei(A),es(A.filter(k))),E[1]!==A||E[2]!==V||E[3]!==B||E[4]!==ea||E[5]!==U||E[6]!==en?(n=(e,t)=>{if("save"===e&&(B||U)){let e=U?t||ea:A.filter(I),n=A.map(t=>e.find(e=>e.id===t.id)?{...t,selected:!0}:{...t,selected:!1});ei(n),B&&B(n)}else"cancel"===e&&V?V(en||A):"cancel"===e&&U&&es(en?.filter(S)||[]);et(!1)},E[1]=A,E[2]=V,E[3]=B,E[4]=ea,E[5]=U,E[6]=en,E[7]=n):n=E[7];let ec=n;E[8]!==ec?(l=()=>ec("save"),E[8]=ec,E[9]=l):l=E[9];let eu=l;E[10]!==ec?(d=()=>ec("cancel"),E[10]=ec,E[11]=d):d=E[11];let em=d;E[12]!==ec||E[13]!==ea||E[14]!==U||E[15]!==F?(c=e=>{es(e),ea&&U?.(e),"single"===F&&ec("save",e)},E[12]=ec,E[13]=ea,E[14]=U,E[15]=F,E[16]=c):c=E[16];let eh=c;E[17]!==ec||E[18]!==Y||E[19]!==J||E[20]!==ea?(u=e=>{"click-outside"===e||"anchor-click"===e||"close-button"===e?ec(J):"escape"===e&&ec(Y,ea)},E[17]=ec,E[18]=Y,E[19]=J,E[20]=ea,E[21]=u):u=E[21];let ef=u,ep=f.Q,eg="overlay"===Q?x.TriangleDownIcon:null;E[22]!==ee?(m=()=>et(!ee),E[22]=ee,E[23]=m):m=E[23];let ey=$?$():`${O}${!eo.length?"":`: ${eo.map(N).join(", ")}`}`;E[24]!==ep||E[25]!==q||E[26]!==ee||E[27]!==eg||E[28]!==m||E[29]!==ey?(h=(0,i.jsx)(ep,{trailingAction:eg,ref:ed,variant:"default",onClick:m,"aria-haspopup":"dialog","aria-expanded":ee,...q,children:ey}),E[24]=ep,E[25]=q,E[26]=ee,E[27]=eg,E[28]=m,E[29]=ey,E[30]=h):h=E[30],E[31]!==el||E[32]!==em||E[33]!==Z||E[34]!==Q?(g="overlay"===Q?(0,i.jsx)(j,{id:el,title:Z,onClose:em}):null,E[31]=el,E[32]=em,E[33]=Z,E[34]=Q,E[35]=g):g=E[35];let ex=U&&en?en:A;E[36]!==B||E[37]!==M||E[38]!==U||E[39]!==F?(y="single"!==F||B||U?M:e=>{M?.(e),et(!1)},E[36]=B,E[37]=M,E[38]=U,E[39]=F,E[40]=y):y=E[40];let ev=U?eh:void 0,eb="first-item"===X?er:null;return E[41]!==F||E[42]!==ex||E[43]!==y||E[44]!==ev||E[45]!==eb?(v=(0,i.jsx)(o,{selectionVariant:F,items:ex,onSelect:y,controlled:ev,ref:eb}),E[41]=F,E[42]=ex,E[43]=y,E[44]=ev,E[45]=eb,E[46]=v):v=E[46],E[47]!==F||E[48]!==v?(b=(0,i.jsx)("div",{className:"SimpleSelect-module__SelectBodyWrapper--Dre5i",children:(0,i.jsx)(s.l,{role:"listbox",selectionVariant:F,"aria-label":"Selection",children:v})}),E[47]=F,E[48]=v,E[49]=b):b=E[49],E[50]!==z||E[51]!==B||E[52]!==em||E[53]!==eu||E[54]!==Q?(w=B&&"modal"!==Q?(0,i.jsx)(p,{onSave:eu,onCancel:em,footerButtons:z}):null,E[50]=z,E[51]=B,E[52]=em,E[53]=eu,E[54]=Q,E[55]=w):w=E[55],E[56]!==g||E[57]!==b||E[58]!==w||E[59]!==Q?(_=(0,i.jsxs)("div",{"data-container":Q,className:"SimpleSelect-module__Wrapper--cFdti",children:[g,b,w]}),E[56]=g,E[57]=b,E[58]=w,E[59]=Q,E[60]=_):_=E[60],E[61]!==W||E[62]!==X||E[63]!==z||E[64]!==el||E[65]!==ef||E[66]!==ee||E[67]!==em||E[68]!==eu||E[69]!==_||E[70]!==Z||E[71]!==Q?(C=(0,i.jsx)(T,{headingId:el,open:ee,anchorRef:ed,onClose:ef,variant:Q,dialogProps:W,title:Z,selectSave:eu,selectCancel:em,footerButtons:z,focusTarget:X,firstItem:er,children:_}),E[61]=W,E[62]=X,E[63]=z,E[64]=el,E[65]=ef,E[66]=ee,E[67]=em,E[68]=eu,E[69]=_,E[70]=Z,E[71]=Q,E[72]=C):C=E[72],E[73]!==h||E[74]!==C?(D=(0,i.jsxs)(i.Fragment,{children:[h,C]}),E[73]=h,E[74]=C,E[75]=D):D=E[75],D}function N(e){return e.label}function S(e){return e.selected}function I(e){return e.selected}function k(e){return e.selected}function L(e){return e.selected}function T(e){let t,n=(0,a.c)(15),{open:s,anchorRef:r,headingId:l,focusTarget:o,firstItem:d,onClose:c,children:u,variant:m,dialogProps:h,title:f,selectSave:g,selectCancel:y,footerButtons:x,focusZoneSettings:v}=e;return n[0]!==r||n[1]!==u||n[2]!==h||n[3]!==d||n[4]!==o||n[5]!==v||n[6]!==x||n[7]!==l||n[8]!==c||n[9]!==s||n[10]!==y||n[11]!==g||n[12]!==f||n[13]!==m?(t=(0,i.jsx)(i.Fragment,{children:"overlay"===m?(0,i.jsx)(w.T,{open:s,anchorRef:r,renderAnchor:null,overlayProps:{role:"dialog","aria-labelledby":l,maxHeight:"large",maxWidth:"medium"},focusZoneSettings:v||{disabled:!0},focusTrapSettings:{initialFocusRef:"first-item"===o?d:void 0},onClose:c,children:u}):(0,i.jsx)(i.Fragment,{children:s?(0,i.jsx)(_.l,{renderBody:()=>(0,i.jsx)(_.l.Body,{className:"SimpleSelect-module__DialogBody--NoZic",children:u}),width:"large",onClose:c,title:f,renderFooter:()=>(0,i.jsx)(p,{onSave:g,onCancel:y,footerButtons:x}),position:{narrow:"fullscreen",regular:"center"},...h}):null})}),n[0]=r,n[1]=u,n[2]=h,n[3]=d,n[4]=o,n[5]=v,n[6]=x,n[7]=l,n[8]=c,n[9]=s,n[10]=y,n[11]=g,n[12]=f,n[13]=m,n[14]=t):t=n[14],t}try{C.displayName||(C.displayName="SimpleSelect")}catch{}try{T.displayName||(T.displayName="SelectContainer")}catch{}},15697:(e,t,n)=>{function i({paths:e,diffSummaries:t}){let n={};for(let i of e){let e=t[i];if(e&&e.markersMap){let t=[];for(let n in e.markersMap){let i=e.markersMap[n]?.ctx;i&&t.push(i)}n[i]=t}}return n}function a({diffSummary:e}){let t=[];if(e&&e.markersMap)for(let n in e.markersMap){let i=e.markersMap[n]?.ctx;i&&t.push({start:i[0],end:i[1]})}return t}n.d(t,{B:()=>a,i:()=>i})},17005:(e,t,n)=>{n.d(t,{l:()=>u});var i=n(74848),a=n(21728),s=n(77274),r=n(96379),l=n(96540),o=n(35247),d=n(54508);let c=[{name:"Hate it",value:"VERY_NEGATIVE",icon:s.YS,color:"veryDissatisfied"},{name:"Not great",value:"NEGATIVE",icon:s.Mm,color:"dissatisfied"},{name:"It\u2019s ok",value:"POSITIVE",icon:s.Cf,color:"satisfied"},{name:"Love it",value:"VERY_POSITIVE",icon:s.mN,color:"verySatisfied"}],u=(0,l.forwardRef)(function(e,t){let n,u,m,h,f=(0,a.c)(7),{mode:p,returnFocusRef:g}=e,y=(0,l.useRef)(null),x=(0,l.useRef)(null),v=(0,l.useRef)(void 0);f[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>({openDialog:e=>{v.current=e,o.W.copilotChatInterviewSurvey?y.current?.openDialog():x.current?.openDialog(e)}}),f[0]=n):n=f[0],(0,l.useImperativeHandle)(t,n),f[1]!==p?(u=async(e,t)=>{let n=[];if(null==e&&n.push("Please select a rating."),t.length>2e3&&n.push("Please keep your feedback within 2000 characters or less."),n.length>0)return n;let i={rating:e,content:t,hostname:window.location.hostname,path:window.location.pathname,mode:p};try{(await (0,r.lS)("/github-copilot/feedback",{method:"POST",body:i})).ok||n.push("An error occurred while submitting your feedback.")}catch{n.push("An error occurred while submitting your feedback.")}return n},f[1]=p,f[2]=u):u=f[2];let b=u;return f[3]===Symbol.for("react.memo_cache_sentinel")?(m=(0,i.jsx)(d.E,{ref:y,onClose:e=>{"no-thanks"===e&&x.current?.openDialog(v.current)}}),f[3]=m):m=f[3],f[4]!==b||f[5]!==g?(h=(0,i.jsxs)(i.Fragment,{children:[m,(0,i.jsx)(s.NE,{ref:x,options:c,onSubmit:b,returnFocusRef:g})]}),f[4]=b,f[5]=g,f[6]=h):h=f[6],h});u.displayName="ConversationFeedbackDialog"},18373:(e,t,n)=>{n.d(t,{U:()=>v});var i=n(74848),a=n(21728),s=n(96540),r=n(43883),l=n(21373),o=n(57478),d=n(72511),c=n(15837),u=n(86877),m=n(4175),h=n(46251),f=n(33989),p=n(15220),g=n(38621),y=n(55127),x=n.n(y);function v(e){let t,n,f,y,v,j,w,_,C,N,S,I,k,L,T,D,E,R,A,O,P=(0,a.c)(60),{setOpen:F,count:M,dismissalOptions:$,error:B,isPending:V,delegatedAlertDismissalEnabled:U,codeSecurity:q,onSubmit:G}=e,[H,K]=(0,s.useState)(""),[W,z]=(0,s.useState)(""),[Q,Z]=(0,s.useState)(!1);P[0]!==U||P[1]!==W?(t=!U||!!W.trim(),P[0]=U,P[1]=W,P[2]=t):t=P[2];let J=t,Y=!!H&&J;P[3]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{K(e??"")},P[3]=n):n=P[3];let X=n,ee=q?"alert":"finding";if(P[4]!==M||P[5]!==ee){let e,t,n,i,a,s,r;e=x()(ee,M),t=M>1,n=`Dismiss ${e}`,i=`Select a reason to dismiss ${x()("this",M)} ${e}.`,a=`Request to dismiss ${e}`,s=t?`These ${e} need approval before they can be dismissed. Requests are sent to all approvers.`:`This ${e} needs approval before it can be dismissed. Requests are sent to all approvers.`,r=t?`These ${e} are not valid`:`This ${e} is not valid`,f={title:n,subtitle:i,submitButtonLabel:"Dismiss",delegatedAlertDismissal:{title:a,subtitle:s,submitButtonLabel:"Submit request"},reasons:{falsePositiveDescription:r,usedInTestsDescription:t?`These ${e} are not in production code`:`This ${e} is not in production code`,wontFixDescription:t?`These ${e} are not relevant`:`This ${e} is not relevant`}},P[4]=M,P[5]=ee,P[6]=f}else f=P[6];let{title:et,subtitle:en,submitButtonLabel:ei,delegatedAlertDismissal:ea,reasons:es}=f;P[7]!==es.falsePositiveDescription?(y={value:"FALSE_POSITIVE",label:"False positive",description:es.falsePositiveDescription},P[7]=es.falsePositiveDescription,P[8]=y):y=P[8],P[9]!==es.usedInTestsDescription?(v={value:"USED_IN_TESTS",label:"Used in tests",description:es.usedInTestsDescription},P[9]=es.usedInTestsDescription,P[10]=v):v=P[10],P[11]!==es.wontFixDescription?(j={value:"WONT_FIX",label:"Won't fix",description:es.wontFixDescription},P[11]=es.wontFixDescription,P[12]=j):j=P[12],P[13]!==y||P[14]!==v||P[15]!==j?(w=[y,v,j],P[13]=y,P[14]=v,P[15]=j,P[16]=w):w=P[16];let er=w,el=$?.length?$:er;P[17]!==W||P[18]!==Y||P[19]!==G||P[20]!==H?(_=async()=>{Y?(Z(!1),G({resolution:H,dismissalComment:W})):Z(!0)},P[17]=W,P[18]=Y,P[19]=G,P[20]=H,P[21]=_):_=P[21];let eo=_;P[22]!==F?(C=()=>F(!1),P[22]=F,P[23]=C):C=P[23];let ed=U?ea.title:et,ec=U?ea.subtitle:en;return P[24]!==M||P[25]!==ea||P[26]!==U||P[27]!==V||P[28]!==Y||P[29]!==eo||P[30]!==F||P[31]!==ei?(N=()=>(0,i.jsxs)(p.l.Footer,{children:[(0,i.jsx)(l.Q,{onClick:()=>F(!1),children:"Cancel"}),(0,i.jsxs)(l.Q,{variant:"primary",onClick:eo,disabled:!Y||V,leadingVisual:V?g.SyncIcon:null,children:[(0,i.jsx)("span",{children:U?ea.submitButtonLabel:ei}),M>1&&(0,i.jsx)(o.A,{scheme:"primary",className:"ml-2",children:(0,r.ai)(M)})]})]}),P[24]=M,P[25]=ea,P[26]=U,P[27]=V,P[28]=Y,P[29]=eo,P[30]=F,P[31]=ei,P[32]=N):N=P[32],P[33]!==B?(S=B&&(0,i.jsx)(d.A,{variant:"danger",children:B.message}),P[33]=B,P[34]=S):S=P[34],P[35]===Symbol.for("react.memo_cache_sentinel")?(I=(0,i.jsx)(c.A.Label,{visuallyHidden:!0,children:"Dismissal reason"}),P[35]=I):I=P[35],P[36]!==el?(k=el.map(b),P[36]=el,P[37]=k):k=P[37],P[38]!==V||P[39]!==k?(L=(0,i.jsxs)(c.A,{name:"resolution",onChange:X,disabled:V,children:[I,k]}),P[38]=V,P[39]=k,P[40]=L):L=P[40],P[41]!==U?(T=(0,i.jsx)(u.A.Label,{required:U,children:"Comment"}),P[41]=U,P[42]=T):T=P[42],P[43]===Symbol.for("react.memo_cache_sentinel")?(D=(0,i.jsx)(m.Ay,{placeholder:"Add a comment",rows:5,maxLength:280,name:"dismissal_comment",onChange:e=>z(e.target.value),className:"BaseSharedDismissalDialog-module__dismissalCommentTextarea--xxBPO"}),P[43]=D):D=P[43],P[44]!==Q?(E=Q&&(0,i.jsx)(u.A.Validation,{variant:"error",children:"This field is required"}),P[44]=Q,P[45]=E):E=P[45],P[46]!==V||P[47]!==T||P[48]!==E?(R=(0,i.jsx)("div",{children:(0,i.jsxs)(u.A,{disabled:V,children:[T,D,E]})}),P[46]=V,P[47]=T,P[48]=E,P[49]=R):R=P[49],P[50]!==S||P[51]!==L||P[52]!==R?(A=(0,i.jsxs)(h.B,{gap:"normal",children:[S,L,R]}),P[50]=S,P[51]=L,P[52]=R,P[53]=A):A=P[53],P[54]!==ed||P[55]!==ec||P[56]!==N||P[57]!==A||P[58]!==C?(O=(0,i.jsx)(p.l,{width:"large",height:"auto",onClose:C,title:ed,subtitle:ec,renderFooter:N,children:A}),P[54]=ed,P[55]=ec,P[56]=N,P[57]=A,P[58]=C,P[59]=O):O=P[59],O}function b(e){return(0,i.jsxs)(u.A,{children:[(0,i.jsx)(f.A,{value:e.value}),(0,i.jsx)(u.A.Label,{children:e.label}),(0,i.jsx)(u.A.Caption,{children:e.description})]},e.value)}try{v.displayName||(v.displayName="BaseSharedDismissalDialog")}catch{}},18878:(e,t,n)=>{n.d(t,{p:()=>G,V:()=>q});var i=n(74848),a=n(21728),s=n(53419),r=n(79634),l=n(97286),o=n(38621),d=n(5524),c=n(59394),u=n(86877),m=n(99511),h=n(15220),f=n(96540),p=n(62421),g=n(25641),y=n(35247),x=n(2635),v=n(33592),b=n(40260),j=n(71315),w=n(21373),_=n(69726),C=n(98552),N=n(46251),S=n(20139);let I="ConversationSharingDialog-module__success--zCOcd",k="ConversationSharingDialog-module__successIcon--z1nhd",L="ConversationSharingDialog-module__quickFadeUp--_qvsX",T=e=>{let t,n,r,l,d,c,p,g,T,D,E,R,A,O,P,F,M,$,B,V,U,q,G,H,K,W,z,Q,Z,J=(0,a.c)(94),{closeDialog:Y,threadId:X,returnFocusRef:ee,showThirdPartyMcpWarning:et}=e,en=void 0!==et&&et,ei=(0,x.Pk)(),ea=(0,v.b)(),[es,er]=(0,f.useState)(!1),[el,eo]=(0,f.useState)(!1),[ed,ec]=(0,f.useState)(!1),[eu,em]=(0,f.useState)(!1),{selectedThreadID:eh,ssoOrganizations:ef,apiUrl:ep,threads:eg}=ei;J[0]!==eh||J[1]!==X||J[2]!==eg?(t=eg.get(X||eh),J[0]=eh,J[1]=X,J[2]=eg,J[3]=t):t=J[3];let ey=t;J[4]!==ey?.sharedID?(n=()=>ey?.sharedID||"",J[4]=ey?.sharedID,J[5]=n):n=J[5];let[ex,ev]=(0,f.useState)(n);J[6]!==ey?(r=()=>ey?.sharedMessageID?ey.sharedMessageID:"",J[6]=ey,J[7]=r):r=J[7];let[eb,ej]=(0,f.useState)(r),ew=j.fV.origin,e_=`${ew}/copilot/share/${ex}`;J[8]!==es?(l=()=>{if(es){let e=setTimeout(()=>er(!1),1500);return()=>clearTimeout(e)}},d=[es],J[8]=es,J[9]=l,J[10]=d):(l=J[9],d=J[10]),(0,f.useEffect)(l,d),J[11]!==ed?(c=()=>{if(ed){let e=setTimeout(()=>ec(!1),1500);return()=>clearTimeout(e)}},p=[ed],J[11]=ed,J[12]=c,J[13]=p):(c=J[12],p=J[13]),(0,f.useEffect)(c,p),J[14]!==e_?(g=async()=>{try{await (0,b.D)(e_),er(!0),(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_COPY_SHARED_CONVERSATION_LINK",mode:"immersive"})}catch{}},J[14]=e_,J[15]=g):g=J[15];let eC=g;J[16]!==ey?.sharedID||J[17]!==eh||J[18]!==X?(T=()=>{(X||eh)&&ev(ey?.sharedID||"")},J[16]=ey?.sharedID,J[17]=eh,J[18]=X,J[19]=T):T=J[19];let eN=ey?.sharedID;J[20]!==eh||J[21]!==eN||J[22]!==X?(D=[eN,eh,X],J[20]=eh,J[21]=eN,J[22]=X,J[23]=D):D=J[23],(0,f.useEffect)(T,D),J[24]!==ep||J[25]!==ea||J[26]!==eh||J[27]!==ef||J[28]!==X?(E=async()=>{eo(!0);let e=X||eh,t=new S.k(ep,ef),n=await t.shareThread(e,y.W.copilotShareActiveSubthread&&e===eh?ea.FindLastMessageID():"");if(n.ok){eo(!1);let{sharedAt:t,sharedID:i,sharedMessageID:a}=n.payload;ev(i),ec(!0),ej(a),ea.dispatch({type:"SHARED_THREAD_UPDATED",thread:{id:e,sharedID:i,sharedAt:t,sharedMessageID:a}}),(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_CREATE_SHARED_CONVERSATION",mode:"immersive",originalThreadId:e,sharedThreadId:i})}else eo(!1)},J[24]=ep,J[25]=ea,J[26]=eh,J[27]=ef,J[28]=X,J[29]=E):E=J[29];let eS=E;J[30]!==ep||J[31]!==ea||J[32]!==eh||J[33]!==ex||J[34]!==eu||J[35]!==ef||J[36]!==X?(R=async()=>{if(!eu)return void em(!0);em(!1),eo(!0);let e=X||eh,t=new S.k(ep,ef),n=await t.unshareThread(e);if(n.ok){eo(!1),ej("");let{sharedID:t,sharedAt:i,sharedMessageID:a}=n.payload;ea.dispatch({type:"SHARED_THREAD_UPDATED",thread:{id:e,sharedID:t,sharedAt:i,sharedMessageID:a}}),(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_UNSHARE_CONVERSATION",mode:"immersive",originalThreadId:e,sharedThreadId:ex})}else eo(!1)},J[30]=ep,J[31]=ea,J[32]=eh,J[33]=ex,J[34]=eu,J[35]=ef,J[36]=X,J[37]=R):R=J[37];let eI=R;J[38]!==eS||J[39]!==el||J[40]!==ex?(A=()=>{if(!ex)return(0,i.jsx)(w.Q,{variant:"primary",disabled:el,onClick:eS,children:"Share"})},J[38]=eS,J[39]=el,J[40]=ex,J[41]=A):A=J[41];let ek=A;J[42]!==eC||J[43]!==ex?(O=()=>{if(ex)return(0,i.jsx)(w.Q,{variant:"primary",autoFocus:!0,onClick:eC,children:"Copy link"})},J[42]=eC,J[43]=ex,J[44]=O):O=J[44];let eL=O;J[45]!==eI||J[46]!==el||J[47]!==ex?(P=()=>{if(ex)return(0,i.jsx)(w.Q,{variant:"danger",disabled:el,onClick:eI,children:"Unshare"})},J[45]=eI,J[46]=el,J[47]=ex,J[48]=P):P=J[48];let eT=P;J[49]!==ex||J[50]!==eu?(F=()=>{if(ex&&eu)return(0,i.jsx)(w.Q,{variant:"default",onClick:()=>em(!1),className:"ConversationSharingDialog-module__cancelButton--CL34L",children:"Cancel"})},J[49]=ex,J[50]=eu,J[51]=F):F=J[51];let eD=F;J[52]!==es||J[53]!==el||J[54]!==ex||J[55]!==eu||J[56]!==ed?(M=()=>el?(0,i.jsxs)("div",{className:L,children:[(0,i.jsx)(_.A,{size:"small",className:"ConversationSharingDialog-module__spinner--KpY5f"}),ex?"Unsharing chat...":"Sharing chat..."]}):eu?(0,i.jsx)("div",{className:L,children:(0,i.jsx)(C.A,{size:"medium",className:"ConversationSharingDialog-module__warningText--t4nnB",children:"Confirm unsharing this chat?"})}):es?(0,i.jsxs)("div",{className:L,children:[(0,i.jsx)(o.CheckIcon,{className:k}),(0,i.jsx)(C.A,{size:"medium",className:I,children:"Copied to clipboard"})]}):ed?(0,i.jsxs)("div",{className:L,children:[(0,i.jsx)(o.CheckIcon,{className:k}),(0,i.jsx)(C.A,{size:"medium",className:I,children:"Chat shared"})]}):ex?(0,i.jsxs)("div",{children:[(0,i.jsx)(o.UnlockIcon,{className:"ConversationSharingDialog-module__lockIcon--yCWzZ"}),(0,i.jsx)(C.A,{size:"medium",className:"ConversationSharingDialog-module__mutedText--r3ZSy",children:"Visible to anyone with the link"})]}):(0,i.jsx)("div",{}),J[52]=es,J[53]=el,J[54]=ex,J[55]=eu,J[56]=ed,J[57]=M):M=J[57];let eE=M,eR=ex?"Chat shared":"Share chat";return J[58]!==eb||J[59]!==ex||J[60]!==en?($=(0,i.jsx)(N.B,{direction:"horizontal",padding:"none",align:"center",justify:"start",gap:"condensed",children:eb?(0,i.jsx)("span",{children:(0,i.jsx)("span",{className:"ConversationSharingDialog-module__snapshotText--XNu1W",children:"This shared chat is a snapshot, accessible to anyone with the link. It will not update with new messages."})}):ex?(0,i.jsx)("span",{children:`This chat and future messages are visible to anyone with the link. If private repository content
                is included, repository access is required to view.${en?" Third-party MCP tool calling is disabled while this thread is shared.":""}`}):(0,i.jsx)("span",{children:`When shared, this chat and future messages will be visible to anyone with the link. If private repository content is included, repository access is required to view.${en?" Third-party MCP tool calling will be disabled if the thread is shared.":""}`})}),J[58]=eb,J[59]=ex,J[60]=en,J[61]=$):$=J[61],J[62]!==e_||J[63]!==ex?(B=ex&&(0,i.jsx)("div",{className:"ConversationSharingDialog-module__innerContainer--OaIjU",children:(0,i.jsx)("div",{className:"ConversationSharingDialog-module__sharedLinkContainer--jDnVn",children:(0,i.jsxs)(u.A,{id:"share-link",className:"ConversationSharingDialog-module__textInputContainer--jHhX6",children:[(0,i.jsx)(u.A.Label,{children:"Share link"}),(0,i.jsx)(m.A,{size:"large",readOnly:!0,value:ex&&e_,className:"ConversationSharingDialog-module__textInput--DymUf"})]})})}),J[62]=e_,J[63]=ex,J[64]=B):B=J[64],J[65]!==$||J[66]!==B?(V=(0,i.jsxs)(N.B,{direction:"vertical",gap:"condensed",children:[$,B]}),J[65]=$,J[66]=B,J[67]=V):V=J[67],J[68]!==eE?(U=(0,i.jsx)("div",{role:"status",children:eE()}),J[68]=eE,J[69]=U):U=J[69],J[70]!==ek?(q=ek(),J[70]=ek,J[71]=q):q=J[71],J[72]!==eD?(G=eD(),J[72]=eD,J[73]=G):G=J[73],J[74]!==eT?(H=eT(),J[74]=eT,J[75]=H):H=J[75],J[76]!==eL?(K=eL(),J[76]=eL,J[77]=K):K=J[77],J[78]!==q||J[79]!==G||J[80]!==H||J[81]!==K?(W=(0,i.jsxs)(N.B,{direction:"horizontal",gap:"condensed",align:"center",justify:"end",children:[q,G,H,K]}),J[78]=q,J[79]=G,J[80]=H,J[81]=K,J[82]=W):W=J[82],J[83]!==U||J[84]!==W?(z=(0,i.jsxs)(N.B,{direction:"horizontal",gap:"condensed",align:"center",justify:"space-between",className:"ConversationSharingDialog-module__buttonStack--gWe8E",children:[U,W]}),J[83]=U,J[84]=W,J[85]=z):z=J[85],J[86]!==V||J[87]!==z?(Q=(0,i.jsxs)("div",{className:"ConversationSharingDialog-module__container--wNKq6",children:[V,z]}),J[86]=V,J[87]=z,J[88]=Q):Q=J[88],J[89]!==Y||J[90]!==ee||J[91]!==eR||J[92]!==Q?(Z=(0,i.jsx)(h.l,{title:eR,onClose:Y,width:"large",returnFocusRef:ee,children:Q}),J[89]=Y,J[90]=ee,J[91]=eR,J[92]=Q,J[93]=Z):Z=J[93],Z};try{T.displayName||(T.displayName="ConversationSharingDialog")}catch{}var D=n(94236),E=n(1747),R=n(71941),A=n(41941);let O={json:{name:"JSON",mimeType:"application/json",exportHandler:function(e,t,n,i,a){let s,r,l=new Blob([(s=e.map(F),r=Object.fromEntries(t),JSON.stringify({currentUserLogin:n,threadUrl:P(i),threadName:a,messages:s,files:r},null,2))],{type:O.json.mimeType});return{url:URL.createObjectURL(l),exportName:`${$(a)}.json`}}},md:{name:"Markdown",mimeType:"text/markdown",exportHandler:M}};function P(e){return`${window.location.origin}/copilot/c/${e}`}function F(e){return{id:e.id,parentMessageID:e.parentMessageID,intent:e.intent,role:e.role,model:e.model,content:e.content,createdAt:e.createdAt,threadID:e.threadID,references:e.references,skillExecutions:e.skillExecutions}}async function M(e,t,n,i,a){let s=[new File([function(e,t,n,i){let a=e.filter(e=>"root"!==e.id),s=new Map;for(let e of a){let t=e.parentMessageID;if(t){s.has(t)||s.set(t,{childMessageCount:0});let e=s.get(t);e.childMessageCount+=1}}let r=`# Copilot Chat Conversation Export: ${i}

**User:** @${t}
**Thread URL:** ${P(n)}`,l=a.map(e=>{let n="user"===e.role?`## @${t}`:"## Copilot",i=e.content||"",a=`${n}

${i}
`;if(e.parentMessageID){let t=s.get(e.parentMessageID);t&&t.childMessageCount>1&&(a+=`
*System: User retried message*
`)}return a}).join(`
`);return`${r}

${l}`}(e,n,i,a)],`${$(a)}.md`)];if(t.size>0){for(let[,e]of t)for(let t of e)"value"in t&&"string"==typeof t.value&&s.push(new File([t.value],`v${t.version}_${t.name}`));let e=await (0,R._6)(s).blob();return{url:URL.createObjectURL(e),exportName:`${$(a)}.zip`}}{let e=new Blob(s,{type:O.md.mimeType});return{url:URL.createObjectURL(e),exportName:`${$(a)}.md`}}}function $(e){return(0,A.A)(`${new Date().toDateString()} ${e}`)}function B(e){(0,s.BI)("dotcom_chat.activate",{target:e,mode:"immersive"})}function V(e){let t,n,s,r,l=(0,a.c)(18),{fileType:o,threadName:c,threadId:u,currentUserLogin:m,messages:h}=e,f=(0,v.b)(),{items:p,versionedItems:g}=(0,E.xx)();l[0]!==p||l[1]!==g?(t=function(e,t){let n=new Map;for(let[,i]of t){let t=i.map(t=>e.get(t)).filter(e=>void 0!==e).map((e,t)=>({version:t+1,...e}));t.length>0&&t[0]?.type==="file"&&t[0]?.name&&n.set(t[0].name,t)}return n}(p,g),l[0]=p,l[1]=g,l[2]=t):t=l[2];let y=t,x=O[o].name;l[3]!==x?(n=x.toUpperCase(),l[3]=x,l[4]=n):n=l[4];let b=`CONVERSATION_CONTEXT_MENU_EXPORT_${n}`;l[5]!==m||l[6]!==o||l[7]!==y||l[8]!==f||l[9]!==h||l[10]!==b||l[11]!==u||l[12]!==c?(s=async()=>{try{let{url:e,exportName:t}=await O[o].exportHandler(h,y,m,u,c),n=document.createElement("a");n.href=e,n.download=t,n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n),B(`${b}_SUCCEEDED`),setTimeout(()=>URL.revokeObjectURL(e),0)}catch{B(`${b}_DOWNLOAD_FAILED`),f.addAmbientError("There was an error exporting the conversation. Please try again.")}},l[5]=m,l[6]=o,l[7]=y,l[8]=f,l[9]=h,l[10]=b,l[11]=u,l[12]=c,l[13]=s):s=l[13];let j=s,w=`Export conversation as ${x}`;return l[14]!==x||l[15]!==j||l[16]!==w?(r=(0,i.jsx)(d.l.Item,{"aria-label":w,onSelect:j,children:x}),l[14]=x,l[15]=j,l[16]=w,l[17]=r):r=l[17],r}try{V.displayName||(V.displayName="ExportActionItem")}catch{}function U(e){let t,n,s=(0,a.c)(6),{threadName:r,threadId:l,currentUserLogin:c,messages:u,selectedThreadID:m}=e,h=m===l;return y.W.exportChat&&h?(s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(D.W.Anchor,{children:(0,i.jsxs)(d.l.Item,{children:[(0,i.jsx)(d.l.LeadingVisual,{children:(0,i.jsx)(o.DownloadIcon,{})}),"Export"]})}),s[0]=t):t=s[0],s[1]!==c||s[2]!==u||s[3]!==l||s[4]!==r?(n=(0,i.jsxs)(D.W,{children:[t,(0,i.jsx)(D.W.Overlay,{children:(0,i.jsxs)(d.l,{children:[(0,i.jsx)(V,{threadName:r,fileType:"json",threadId:l,currentUserLogin:c,messages:u}),(0,i.jsx)(V,{threadName:r,fileType:"md",threadId:l,currentUserLogin:c,messages:u})]})})]}),s[1]=c,s[2]=u,s[3]=l,s[4]=r,s[5]=n):n=s[5],n):null}try{U.displayName||(U.displayName="ExportActionList")}catch{}function q(e){let t,n,l,c,u,m,h,f,p,y,v,b=(0,a.c)(32),{onOpenDialog:j,showShare:w,hideShareOnDesktop:_,isShared:C,threadName:N,threadId:S}=e,I=void 0===w||w,k=void 0!==_&&_,L=void 0!==C&&C,{canShareThread:T}=(0,r.X)(),{isWaitingOnCopilot:D,messages:E,currentUserLogin:R,selectedThreadID:A}=(0,x.Pk)();b[0]!==E?(t=(0,g.Q7)(E),b[0]=E,b[1]=t):t=b[1];let O=t;b[2]!==E?(n=(0,g.UM)(E),b[2]=E,b[3]=n):n=b[3];let P=n,F=O.length>0||D||P;return b[4]!==j?(l=()=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_RENAME",mode:"immersive"}),j("rename")},b[4]=j,b[5]=l):l=b[5],b[6]===Symbol.for("react.memo_cache_sentinel")?(c=(0,i.jsx)(d.l.LeadingVisual,{children:(0,i.jsx)(o.PencilIcon,{})}),b[6]=c):c=b[6],b[7]!==l?(u=(0,i.jsxs)(d.l.Item,{onSelect:l,children:[c,"Rename"]}),b[7]=l,b[8]=u):u=b[8],b[9]!==T||b[10]!==k||b[11]!==L||b[12]!==j||b[13]!==F||b[14]!==I?(m=I&&T&&(0,i.jsxs)(d.l.Item,{className:k?"ConversationActions-module__hideOnDesktop--J5K5t":void 0,disabled:F,onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_SHARE",mode:"immersive"}),j("share")},children:[(0,i.jsx)(d.l.LeadingVisual,{children:L?(0,i.jsx)(o.UnlockIcon,{}):(0,i.jsx)(o.LockIcon,{})}),"Share"]}),b[9]=T,b[10]=k,b[11]=L,b[12]=j,b[13]=F,b[14]=I,b[15]=m):m=b[15],b[16]!==R||b[17]!==E||b[18]!==A||b[19]!==S||b[20]!==N?(h=(0,i.jsx)(U,{threadName:N,threadId:S,currentUserLogin:R,messages:E,selectedThreadID:A}),b[16]=R,b[17]=E,b[18]=A,b[19]=S,b[20]=N,b[21]=h):h=b[21],b[22]!==j?(f=()=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_DELETE",mode:"immersive"}),j("delete")},b[22]=j,b[23]=f):f=b[23],b[24]===Symbol.for("react.memo_cache_sentinel")?(p=(0,i.jsx)(d.l.LeadingVisual,{children:(0,i.jsx)(o.TrashIcon,{})}),b[24]=p):p=b[24],b[25]!==f?(y=(0,i.jsxs)(d.l.Item,{variant:"danger",onSelect:f,children:[p,"Delete"]}),b[25]=f,b[26]=y):y=b[26],b[27]!==h||b[28]!==y||b[29]!==u||b[30]!==m?(v=(0,i.jsxs)(i.Fragment,{children:[u,m,h,y]}),b[27]=h,b[28]=y,b[29]=u,b[30]=m,b[31]=v):v=b[31],v}function G(e){let t,n,r,o,d,c,u,m,h=(0,a.c)(35),{visibleDialog:f,onClose:g,threadName:b,threadId:j,selectedThreadId:w,onStartLoading:_,onFinishLoading:C,returnFocusRef:N}=e,{threads:S}=(0,x.Pk)(),I=(0,v.b)(),k=(0,p.G)();h[0]===Symbol.for("react.memo_cache_sentinel")?(t=["copilot-chat-mcps"],h[0]=t):t=h[0],h[1]!==I?(n={queryKey:t,queryFn:async()=>I.service.fetchMCPServers(),placeholderData:H},h[1]=I,h[2]=n):n=h[2];let{data:L}=(0,l.I)(n);h[3]!==L?(r=L||[],h[3]=L,h[4]=r):r=h[4];let D=r,E=y.W.copilotThirdPartyMcp&&D.length>0;h[5]!==g?(o=()=>{(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_SHARE_DIALOG_CLOSE",mode:"immersive"}),g()},h[5]=g,h[6]=o):o=h[6];let R=o;h[7]!==I||h[8]!==k||h[9]!==g||h[10]!==C||h[11]!==_||h[12]!==w||h[13]!==j||h[14]!==S?(d=async()=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_LIST_ACTION_DELETE",mode:"immersive"}),_();let e=S.get(j);e&&(j===w&&await k({clearTopic:!0,includeThreads:!1}),await I.deleteThread(e)),C(),g()},h[7]=I,h[8]=k,h[9]=g,h[10]=C,h[11]=_,h[12]=w,h[13]=j,h[14]=S,h[15]=d):d=h[15];let A=d;h[16]!==I||h[17]!==g||h[18]!==C||h[19]!==_||h[20]!==j||h[21]!==S?(c=async e=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_LIST_ACTION_RENAME",mode:"immersive"}),_();let t=S.get(j);t&&await I.renameThread(t,e),C(),g()},h[16]=I,h[17]=g,h[18]=C,h[19]=_,h[20]=j,h[21]=S,h[22]=c):c=h[22];let O=c;return h[23]!==R||h[24]!==A||h[25]!==g||h[26]!==N||h[27]!==E||h[28]!==O||h[29]!==j||h[30]!==b||h[31]!==f?(u="delete"===f?(0,i.jsx)(K,{onCancel:g,onConfirm:A,returnFocusRef:N}):"rename"===f?(0,i.jsx)(W,{onCancel:g,currentName:b,onSubmit:O,returnFocusRef:N}):"share"===f?(0,i.jsx)(T,{closeDialog:R,threadId:j,returnFocusRef:N,showThirdPartyMcpWarning:E}):null,h[23]=R,h[24]=A,h[25]=g,h[26]=N,h[27]=E,h[28]=O,h[29]=j,h[30]=b,h[31]=f,h[32]=u):u=h[32],h[33]!==u?(m=(0,i.jsx)(i.Fragment,{children:u}),h[33]=u,h[34]=m):m=h[34],m}function H(e){return e}let K=e=>{let t,n=(0,a.c)(4),{onConfirm:r,onCancel:l,returnFocusRef:o}=e;return n[0]!==l||n[1]!==r||n[2]!==o?(t=(0,i.jsx)(c.K,{title:"Delete chat",onClose:e=>{if("confirm"===e){(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_DELETE_CONFIRM",mode:"immersive"});let e=o.current?.closest("nav,aside,section");r(),window.setTimeout(()=>{e instanceof HTMLElement&&e.focus()},0)}else(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_DELETE_CANCEL",mode:"immersive"}),l(),window.setTimeout(()=>o.current?.focus(),0)},confirmButtonContent:"Delete",confirmButtonType:"danger",children:"Are you sure you want to delete this chat? This action cannot be undone."}),n[0]=l,n[1]=r,n[2]=o,n[3]=t):t=n[3],t},W=e=>{let t,n,r,l,o,d,c,p,g,y,x,v,b=(0,a.c)(34),{currentName:j,onCancel:w,onSubmit:_,returnFocusRef:C}=e,[N,S]=(0,f.useState)(void 0),I=(0,f.useRef)(null),k=(0,f.useId)(),L=(0,f.useId)();b[0]!==_?(t=e=>{e.preventDefault();let t=I.current?.value?.trim()??"";t?t.length>100?(S("max_length"),I.current?.focus()):(S(void 0),_(t)):(S("required"),I.current?.focus())},b[0]=_,b[1]=t):t=b[1];let T=t;b[2]!==w?(n=()=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_RENAME_CANCEL",mode:"immersive"}),w()},b[2]=w,b[3]=n):n=b[3];let D=n;b[4]!==L?(r=(0,i.jsx)("span",{id:L,children:"Rename chat"}),b[4]=L,b[5]=r):r=b[5],b[6]!==D?(l={content:"Cancel",onClick:D},b[6]=D,b[7]=l):l=b[7],b[8]!==k?(o={content:"Update",buttonType:"primary",type:"submit",form:k,onClick:z},b[8]=k,b[9]=o):o=b[9],b[10]!==l||b[11]!==o?(d=[l,o],b[10]=l,b[11]=o,b[12]=d):d=b[12],b[13]===Symbol.for("react.memo_cache_sentinel")?(c=(0,i.jsx)(u.A.Label,{visuallyHidden:!0,children:"Rename chat"}),b[13]=c):c=b[13];let E=N?"error-message":void 0,R=N?"true":void 0;return b[14]!==j||b[15]!==L||b[16]!==E||b[17]!==R?(p=(0,i.jsx)(m.A,{"aria-labelledby":L,"aria-describedby":E,"aria-invalid":R,ref:I,defaultValue:j,block:!0}),b[14]=j,b[15]=L,b[16]=E,b[17]=R,b[18]=p):p=b[18],b[19]!==N?(g=N&&(0,i.jsx)(u.A.Validation,{id:"error-message",variant:"error",children:"required"===N?"Enter a name":"Name cannot exceed 100 characters"}),b[19]=N,b[20]=g):g=b[20],b[21]!==p||b[22]!==g?(y=(0,i.jsxs)(u.A,{required:!0,children:[c,p,g]}),b[21]=p,b[22]=g,b[23]=y):y=b[23],b[24]!==k||b[25]!==T||b[26]!==y?(x=(0,i.jsx)("form",{id:k,onSubmit:T,children:y}),b[24]=k,b[25]=T,b[26]=y,b[27]=x):x=b[27],b[28]!==D||b[29]!==C||b[30]!==x||b[31]!==r||b[32]!==d?(v=(0,i.jsx)(h.l,{title:r,onClose:D,width:"small",footerButtons:d,initialFocusRef:I,returnFocusRef:C,children:x}),b[28]=D,b[29]=C,b[30]=x,b[31]=r,b[32]=d,b[33]=v):v=b[33],v};try{q.displayName||(q.displayName="ConversationActions")}catch{}try{G.displayName||(G.displayName="ConversationActionDialogs")}catch{}try{K.displayName||(K.displayName="DeleteDialog")}catch{}try{W.displayName||(W.displayName="RenameDialog")}catch{}function z(){return(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_RENAME_CONFIRM",mode:"immersive"})}},19336:(e,t,n)=>{n.d(t,{G:()=>h});var i=n(74848),a=n(21728),s=n(34031),r=n(11128),l=n(12357),o=n(90177),d=n(53419),c=n(38621),u=n(81945);let m=[];function h(e){let t,n=(0,a.c)(10),{outputNodeExists:h,isRunning:f,isLoading:p,nodeValue:g,nodeError:y,validationErrors:x,additionalActions:v,onRun:b,onStop:j}=e,w=void 0!==p&&p,_=void 0===x?m:x;return n[0]!==v||n[1]!==w||n[2]!==f||n[3]!==y||n[4]!==g||n[5]!==b||n[6]!==j||n[7]!==h||n[8]!==_?(t=(0,i.jsx)(i.Fragment,{children:h?w?(0,i.jsxs)("div",{className:"ExecutionView-module__loadingState--bX4_m",children:[(0,i.jsx)(u.O,{variant:"rounded",height:"sm",width:"random"}),(0,i.jsx)(u.O,{variant:"rounded",height:"sm",width:"random"}),(0,i.jsx)(u.O,{variant:"rounded",height:"sm",width:"random"})]}):f&&!g?(0,i.jsx)(s.M,{isRunning:f,messages:{running:"Running the loop...",waiting:"Waiting..."}}):_.length>0?(0,i.jsx)(r.n,{errors:_,title:"Oops, this loop is configured incorrectly",additionalActions:v}):y?(0,i.jsx)(r.n,{errors:[y],title:"Oops, there was an error running this loop",additionalActions:v}):g?(0,i.jsx)(l.U,{isRunning:f,nodeValue:g}):(0,i.jsxs)("div",{className:"ExecutionView-module__emptyState--gD9en",children:[(0,i.jsxs)("div",{className:"ExecutionView-module__emptyStateText--awSRT",children:[(0,i.jsx)("h3",{className:"ExecutionView-module__emptyStateTitle--F8TRM",children:"No output yet"}),(0,i.jsx)("span",{children:"Run this loop to generate output"})]}),(0,i.jsx)(o.c,{onClick:()=>{b(),(0,d.BI)("node_action.select",{target:"PANEL_NODE_EMPTY_STATE_RUN",mode:"loops"})},onStop:()=>{j(),(0,d.BI)("node_action.select",{target:"PANEL_NODE_EMPTY_STATE_STOP",mode:"loops"})},isLoading:f,value:g,variant:"default",leadingVisual:(0,i.jsx)(c.SyncIcon,{})})]}):(0,i.jsx)("p",{children:"No output nodes found in this loop."})}),n[0]=v,n[1]=w,n[2]=f,n[3]=y,n[4]=g,n[5]=b,n[6]=j,n[7]=h,n[8]=_,n[9]=t):t=n[9],t}try{h.displayName||(h.displayName="ExecutionView")}catch{}},19769:(e,t,n)=>{n.d(t,{N:()=>nP});var i,a,s=n(21728),r=n(57944),l=n(50467),o=n(74848),d=n(2803),c=n(11680),u=n(38621);function m(e){let t,n,i,a=(0,s.c)(12),{headSha:r,basePath:l,isSessionRunning:m,isSessionReadonly:h,agentDisplayName:f}=e,p=void 0===f?"Agent":f;a[0]!==p||a[1]!==h||a[2]!==m?(t=m&&(0,o.jsx)(c.l,{variant:"info",title:`${p} is working`,description:h?`${p} code review in progress.`:`${p} is still working. Changes will automatically appear once they have been committed to the branch.`,hideTitle:!0,icon:(0,o.jsx)(u.InfoIcon,{}),className:"PullRequestFilesChangedPreview-module__banner--KQCNJ"}),a[0]=p,a[1]=h,a[2]=m,a[3]=t):t=a[3];let g=!h;return a[4]!==l||a[5]!==r||a[6]!==h||a[7]!==g?(n=(0,o.jsx)(d.b.Container,{children:(0,o.jsx)(d.b.Viewer,{headSha:r,basePath:l,forceUnifiedView:!0,treeEnableInlineCompactMode:!0,useFileTree:!0,useBasicToolbar:!0,useInlineComments:h,userCanComment:g},l)}),a[4]=l,a[5]=r,a[6]=h,a[7]=g,a[8]=n):n=a[8],a[9]!==t||a[10]!==n?(i=(0,o.jsxs)("div",{className:"PullRequestFilesChangedPreview-module__container--mKeOB",children:[t,n]}),a[9]=t,a[10]=n,a[11]=i):i=a[11],i}try{m.displayName||(m.displayName="PullRequestFilesChangedPreview")}catch{}function h(e){let t,n=(0,s.c)(6),{reference:i}=e,{headSha:a,basePath:r,isSessionRunning:l,isSessionReadonly:d,agentDisplayName:c}=i;return n[0]!==c||n[1]!==r||n[2]!==a||n[3]!==d||n[4]!==l?(t=(0,o.jsx)(m,{headSha:a,basePath:r,isSessionRunning:l,isSessionReadonly:d,agentDisplayName:c}),n[0]=c,n[1]=r,n[2]=a,n[3]=d,n[4]=l,n[5]=t):t=n[5],t}try{h.displayName||(h.displayName="PullRequestFilesChangedPluginPreview")}catch{}var f=n(70840),p=n(39837),g=n(35247),y=n(77430),x=n(62935),v=n(84268),b=n(72579),j=n(16051),w=n(81960),_=n(98755),C=n(99896),N=n(10422),S=n(96540),I=n(25407),k=n(96379);let L="PullRequestOverviewPreview-module__sessionStatusWrapper--TEpIE",T="PullRequestOverviewPreview-module__separator--EAqT5",D="PullRequestOverviewPreview-module__summaryHeader--KeZPa",E="PullRequestOverviewPreview-module__summaryMetadata--R418e",R="PullRequestOverviewPreview-module__modelDisplay--HH7SO",A="PullRequestOverviewPreview-module__modelIcon--NuGXS";function O(e){let t,n,i,a,r,l,d,c,u=(0,s.c)(22),{headSha:m,repositoryNwo:h,commitAliveChannel:f}=e;u[0]!==h?(t=h?.split("/")??[],u[0]=h,u[1]=t):t=u[1];let[p,g]=t,y=void 0===p?"":p,x=void 0===g?"":g;u[2]!==x||u[3]!==y?(n={ownerLogin:y,name:x},u[2]=x,u[3]=y,u[4]=n):n=u[4];let[v,b]=function(e,t){let n,i,a=(0,s.c)(6),[r,l]=(0,S.useState)();a[0]!==e||a[1]!==t?(n=async()=>{if(!e||!t)return void l(void 0);let n=(0,I.vki)(t,e),i=await (0,k.lS)(n);i.ok&&l(await i.json())},a[0]=e,a[1]=t,a[2]=n):n=a[2];let o=n;return a[3]!==r||a[4]!==o?(i=[r,o],a[3]=r,a[4]=o,a[5]=i):i=a[5],i}(m,n);u[5]!==f?(i={stateChannel:f,deployedChannel:null,reviewStateChannel:null,workflowsChannel:null,mergeQueueChannel:null,headRefChannel:null,baseRefChannel:null,gitMergeStateChannel:null,pullRequestChannel:null},u[5]=f,u[6]=i):i=u[6];let j=i;if(u[7]!==j||u[8]!==b?(a={channels:j,refetchQuery:b},u[7]=j,u[8]=b,u[9]=a):a=u[9],(0,N.cY)(a),u[10]!==b||u[11]!==m||u[12]!==h?(r=()=>{m&&h&&b()},l=[m,h,b],u[10]=b,u[11]=m,u[12]=h,u[13]=r,u[14]=l):(r=u[13],l=u[14]),(0,S.useEffect)(r,l),!m||!h||!v||0===v.checkRuns.length)return null;u[15]!==v?(d=()=>{if(!v?.checkRuns)return"";let e=v.checkRuns.length,t=v.checkRuns.filter(P).length;return`${t}/${e}`},u[15]=v,u[16]=d):d=u[16];let w=d,_=function(e){switch(e){case"SUCCEEDED":return"success";case"FAILED":case"UNSUCCESSFUL":return"failure";default:return"pending"}}(v?.checksHeaderState||""),L=w();return u[17]!==v||u[18]!==b||u[19]!==_||u[20]!==L?(c=(0,o.jsx)("span",{className:"PullRequestOverviewPreview-module__checksButton--yqdFS",children:(0,o.jsx)(C.B6,{statusRollup:_,combinedStatus:v,onWillOpenPopup:b,size:"small",variant:"default",descriptionText:L})}),u[17]=v,u[18]=b,u[19]=_,u[20]=L,u[21]=c):c=u[21],c}function P(e){return"success"===e.state}try{O.displayName||(O.displayName="ChecksStatusButton")}catch{}var F=n(88984),M=n(55127),$=n.n(M),B=n(69599);function V(e){let t,n,i,a,r,l,d,c,m,h,C,N,S,I,k,P,M,V,U,q,G,H=(0,s.c)(64),{title:K,number:W,body:z,bodyHTML:Q,repositoryNwo:Z,baseRef:J,headRef:Y,headSha:X,sessionState:ee,sessionUpdatedAt:et,sessionCount:en,premiumRequestCount:ei,selectedModel:ea,isSingleSessionView:es,commitAliveChannel:er,isCopilotCodingAgent:el}=e;H[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,B.G7)("mission_control_use_body_html"),H[0]=t):t=H[0];let eo=t;H[1]!==ee?(n=()=>{if(!ee)return null;switch(ee){case"completed":return(0,o.jsx)(u.CheckCircleFillIcon,{className:"PullRequestOverviewPreview-module__iconCompleted--XBgZD",size:16});case"failed":case"timed_out":return(0,o.jsx)(u.XCircleFillIcon,{className:"PullRequestOverviewPreview-module__iconFailed--bZUms",size:16});case"in_progress":return(0,o.jsx)(F.w,{});default:return null}},H[1]=ee,H[2]=n):n=H[2];let ed=n;H[3]!==ee||H[4]!==et?(i=()=>(0,o.jsxs)("span",{className:L,children:["completed"===ee&&(0,o.jsx)("span",{children:"Completed"}),"failed"===ee&&(0,o.jsx)("span",{children:"Failed"}),"timed_out"===ee&&(0,o.jsx)("span",{children:"Timed out"}),"in_progress"===ee&&(0,o.jsx)("span",{children:"Started"}),et&&(0,o.jsx)(x.A,{date:new Date(et),tense:"past"})]}),H[3]=ee,H[4]=et,H[5]=i):i=H[5];let ec=i;H[6]!==J||H[7]!==Y||H[8]!==Z?(a=()=>(0,o.jsxs)(o.Fragment,{children:[Z&&(0,o.jsx)(v.A,{href:`/${Z}`,className:"PullRequestOverviewPreview-module__repositoryName--O0p8d",children:Z}),J&&Y&&(0,o.jsxs)("span",{className:"PullRequestOverviewPreview-module__branchWrapper--IIzXz",children:[(0,o.jsxs)("span",{className:"PullRequestOverviewPreview-module__branchComparison--QaaJZ",children:[(0,o.jsx)(b.A,{href:`/${Z}/tree/${J}`,children:J}),(0,o.jsx)(u.ArrowLeftIcon,{}),(0,o.jsx)(b.A,{href:`/${Z}/tree/${Y}`,children:Y})]}),(0,o.jsx)("span",{className:"PullRequestOverviewPreview-module__copyButtonWrapper--LAwSf",children:(0,o.jsx)(_.T,{ariaLabel:"Copy head branch name to clipboard",size:"small",textToCopy:Y})})]})]}),H[6]=J,H[7]=Y,H[8]=Z,H[9]=a):a=H[9];let eu=a;H[10]!==K?(r=(0,o.jsx)("span",{children:K}),H[10]=K,H[11]=r):r=H[11];let em=`/${Z}/pull/${W}`;H[12]!==W||H[13]!==em?(l=(0,o.jsxs)(v.A,{className:"PullRequestOverviewPreview-module__pullNumber--LvQ2Y",href:em,children:["#",W]}),H[12]=W,H[13]=em,H[14]=l):l=H[14],H[15]!==r||H[16]!==l?(d=(0,o.jsx)(j.z.TitleArea,{children:(0,o.jsx)(j.z.Title,{className:"PullRequestOverviewPreview-module__titleContainer--lTxTc",as:"h1",children:(0,o.jsxs)("span",{children:[r," ",l]})})}),H[15]=r,H[16]=l,H[17]=d):d=H[17],H[18]!==ed?(c=ed(),H[18]=ed,H[19]=c):c=H[19],H[20]!==ec?(m=ec(),H[20]=ec,H[21]=m):m=H[21],H[22]!==m||H[23]!==c?(h=(0,o.jsxs)("span",{className:L,children:[c,m]}),H[22]=m,H[23]=c,H[24]=h):h=H[24],H[25]!==Z||H[26]!==et?(C=et&&Z&&(0,o.jsx)("span",{className:T,children:" \xb7 "}),H[25]=Z,H[26]=et,H[27]=C):C=H[27],H[28]!==eu?(N=eu(),H[28]=eu,H[29]=N):N=H[29];let eh=X||"",ef=Z||"";H[30]!==er||H[31]!==eh||H[32]!==ef?(S=(0,o.jsx)(O,{headSha:eh,repositoryNwo:ef,commitAliveChannel:er}),H[30]=er,H[31]=eh,H[32]=ef,H[33]=S):S=H[33],H[34]!==h||H[35]!==C||H[36]!==N||H[37]!==S?(I=(0,o.jsx)(j.z.Description,{children:(0,o.jsxs)("div",{className:"PullRequestOverviewPreview-module__sessionStatus--Wu0ff",children:[h,C,N,S]})}),H[34]=h,H[35]=C,H[36]=N,H[37]=S,H[38]=I):I=H[38],H[39]!==I||H[40]!==d?(k=(0,o.jsxs)(j.z,{children:[d,I]}),H[39]=I,H[40]=d,H[41]=k):k=H[41];let ep=g.W.codingAgentModelSelection?!es&&ei>0&&void 0!==en&&en>0?D:"PullRequestOverviewPreview-module__summaryHeaderModelOnly--KXbJj":D;return H[42]===Symbol.for("react.memo_cache_sentinel")?(P=(0,o.jsx)(w.A,{as:"h2",className:"PullRequestOverviewPreview-module__summaryHeading--xI39Z",children:"Summary"}),H[42]=P):P=H[42],H[43]!==el||H[44]!==es||H[45]!==ei||H[46]!==ea||H[47]!==en||H[48]!==et?(M=g.W.codingAgentModelSelection&&el?!es&&ei>0&&void 0!==en&&en>0?(0,o.jsxs)("div",{className:E,children:[ea&&(0,o.jsxs)("span",{className:R,children:[ea.logoURL?(0,o.jsx)(y.r,{alt:`${ea.vendor} logo`,square:!0,size:18,src:ea.logoURL,className:A}):(0,o.jsx)(u.CopilotIcon,{className:A}),(0,o.jsx)("span",{children:ea.displayName})]}),(0,o.jsxs)("span",{children:[ea&&(0,o.jsx)("span",{className:T,children:" \xb7 "}),en," ",$()("session",en)]}),ei&&(0,o.jsxs)("span",{children:[(0,o.jsx)("span",{className:T,children:" \xb7 "}),ei," premium ",$()("request",ei)]}),et&&(0,o.jsxs)("span",{children:[(0,o.jsx)("span",{className:T,children:" \xb7 "}),"Last updated ",(0,o.jsx)(x.A,{date:new Date(et),tense:"past"})]})]}):(0,o.jsx)("div",{className:E,children:ea&&(0,o.jsxs)("span",{className:R,children:[ea.logoURL?(0,o.jsx)(y.r,{alt:`${ea.vendor} logo`,square:!0,size:18,src:ea.logoURL,className:A}):(0,o.jsx)(u.CopilotIcon,{className:A}),(0,o.jsx)("span",{children:ea.displayName})]})}):(0,o.jsx)("div",{className:E,children:!es&&ei>0&&void 0!==en&&en>0&&(0,o.jsxs)(o.Fragment,{children:[en," ",$()("session",en),ei&&(0,o.jsxs)("span",{children:[" ","\xb7 ",ei," premium ",$()("request",ei)]}),et&&(0,o.jsxs)("span",{children:[" ","\xb7 Last updated ",(0,o.jsx)(x.A,{date:new Date(et),tense:"past"})]})]})}),H[43]=el,H[44]=es,H[45]=ei,H[46]=ea,H[47]=en,H[48]=et,H[49]=M):M=H[49],H[50]!==ep||H[51]!==M?(V=(0,o.jsxs)("div",{className:ep,children:[P,M]}),H[50]=ep,H[51]=M,H[52]=V):V=H[52],H[53]!==z||H[54]!==Q||H[55]!==W||H[56]!==Z?(U=(0,o.jsx)("div",{className:"PullRequestOverviewPreview-module__summaryContent--YREy7",children:eo&&Q?(0,o.jsx)("div",{className:"PullRequestOverviewPreview-module__markdownBody--BLhsD",children:(0,o.jsx)(p.A,{verifiedHTML:Q})}):z?(0,o.jsx)(f.G,{content:{value:z,name:`pull-request-${W}-${Z}.md`},hideHeadingAnchors:!0,fallbackToRaw:!0,useLoadingSkeletonWithOptions:[{size:"bodyMedium",lines:3},{size:"titleLarge",lines:1},{size:"bodyMedium",lines:8}]}):(0,o.jsx)("p",{className:"PullRequestOverviewPreview-module__emptyDescription--X5Q_t",children:"No description provided."})}),H[53]=z,H[54]=Q,H[55]=W,H[56]=Z,H[57]=U):U=H[57],H[58]!==V||H[59]!==U?(q=(0,o.jsxs)("div",{className:"PullRequestOverviewPreview-module__summaryBox--S2PyJ",children:[V,U]}),H[58]=V,H[59]=U,H[60]=q):q=H[60],H[61]!==k||H[62]!==q?(G=(0,o.jsxs)("div",{className:"PullRequestOverviewPreview-module__container--BrFOa",children:[k,q]}),H[61]=k,H[62]=q,H[63]=G):G=H[63],G}try{V.displayName||(V.displayName="PullRequestOverviewPreview")}catch{}function U(e){let t,n=(0,s.c)(2),{reference:i}=e;return"pr-overview"!==i.type?null:(n[0]!==i?(t=(0,o.jsx)(V,{...i}),n[0]=i,n[1]=t):t=n[1],t)}try{U.displayName||(U.displayName="PullRequestOverviewPluginPreview")}catch{}var q=n(76143),G=n(33592),H=n(1747),K=n(21502),W=n(42312),z=n(27912),Q=n(61526),Z=n(76977),J=n(86101),Y=n(78223),X=n(46251),ee=n(53419),et=n(26108);function en(e){let t,n=(0,s.c)(4),{isContentPreviewOpen:i,openPreviewPane:a}=e,r=(0,W.U)();return n[0]!==r||n[1]!==i||n[2]!==a?(t=!i&&(0,o.jsx)(et.K,{icon:u.SidebarExpandIcon,"aria-label":"Open workbench",size:"small",onClick:()=>{a(),(0,ee.BI)("dotcom_chat.activate",{target:"OPEN_PREVIEW_PANE_BUTTON",mode:"immersive",context:"agent_sessions"})},ref:r}),n[0]=r,n[1]=i,n[2]=a,n[3]=t):t=n[3],t}try{en.displayName||(en.displayName="PreviewPaneButton")}catch{}var ei=n(22456),ea=n(10510),es=n(32870),er=n(94236),el=n(5524),eo=n(99223),ed=n(13107),ec=n(2635);function eu(e){let t,n,i,a,r,l,d,c,m,h,f,p,g,y,x,v,b,j,w,_,C,N,S,I,k,L=(0,s.c)(57),{pull:T}=e;L[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,B.G7)("open_agent_session_in_vscode_insiders"),L[0]=t):t=L[0];let D=t;L[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,B.G7)("open_agent_session_in_vscode_stable"),L[1]=n):n=L[1];let E=n;L[2]!==T.global_relay_id||L[3]!==T.head_ref_name||L[4]!==T.repository_nwo?(i=(0,ei.UU)(T.repository_nwo,T.global_relay_id,T.head_ref_name),L[2]=T.global_relay_id,L[3]=T.head_ref_name,L[4]=T.repository_nwo,L[5]=i):i=L[5];let R=i;L[6]!==T.global_relay_id||L[7]!==T.head_ref_name||L[8]!==T.repository_nwo?(a=(0,ei.PZ)(T.repository_nwo,T.global_relay_id,T.head_ref_name),L[6]=T.global_relay_id,L[7]=T.head_ref_name,L[8]=T.repository_nwo,L[9]=a):a=L[9];let A=a;L[10]!==T.number||L[11]!==T.repository_nwo?(r=(0,ei.NI)(T.repository_nwo,T.number),L[10]=T.number,L[11]=T.repository_nwo,L[12]=r):r=L[12];let O=r;L[13]!==T.head_ref_name||L[14]!==T.repository_id?(l=(0,ei.U6)(T.repository_id,T.head_ref_name),L[13]=T.head_ref_name,L[14]=T.repository_id,L[15]=l):l=L[15];let P=l,{openFeedback:F,FeedbackDialog:M}=(0,es.f)(),$=(0,ec.A3)("optedInToUserFeedback");L[16]!==F?(d=()=>F(),L[16]=F,L[17]=d):d=L[17];let V=d;L[18]!==T.url?(c=()=>{window.open(T.url,"_blank")},L[18]=T.url,L[19]=c):c=L[19];let U=c;L[20]===Symbol.for("react.memo_cache_sentinel")?(m=(0,eo.k)(),L[20]=m):m=L[20];let q=m;L[21]!==T.head_ref_name||L[22]!==T.repository_id?(h=(0,ed.QS)(T.repository_id,T.head_ref_name),L[21]=T.head_ref_name,L[22]=T.repository_id,L[23]=h):h=L[23];let G=!!h&&!q;return L[24]===Symbol.for("react.memo_cache_sentinel")?(f=(0,o.jsx)(er.W.Anchor,{children:(0,o.jsx)(et.K,{icon:u.KebabHorizontalIcon,variant:"invisible","aria-label":"More options",size:"small"})}),L[24]=f):f=L[24],L[25]===Symbol.for("react.memo_cache_sentinel")?(p=(0,o.jsx)(el.l.LeadingVisual,{children:(0,o.jsx)(u.GitPullRequestIcon,{})}),L[25]=p):p=L[25],L[26]!==U?(g=(0,o.jsxs)(el.l.Item,{onSelect:U,children:[p,"View pull request"]}),L[26]=U,L[27]=g):g=L[27],L[28]!==V||L[29]!==$?(y=$&&(0,o.jsxs)(el.l.Item,{onSelect:V,children:[(0,o.jsx)(el.l.LeadingVisual,{children:(0,o.jsx)(u.CommentIcon,{})}),"Give feedback"]}),L[28]=V,L[29]=$,L[30]=y):y=L[30],L[31]===Symbol.for("react.memo_cache_sentinel")?(x=(0,o.jsx)(el.l.Divider,{}),L[31]=x):x=L[31],L[32]===Symbol.for("react.memo_cache_sentinel")?(v=(0,o.jsx)(el.l.GroupHeading,{children:"Open in"}),L[32]=v):v=L[32],L[33]!==R?(b=E&&(0,o.jsxs)(el.l.Item,{onSelect:R,children:[(0,o.jsx)(el.l.LeadingVisual,{children:(0,o.jsx)(u.VscodeIcon,{})}),"Open in VS Code"]}),L[33]=R,L[34]=b):b=L[34],L[35]!==A?(j=D&&(0,o.jsxs)(el.l.Item,{onSelect:A,children:[(0,o.jsx)(el.l.LeadingVisual,{children:(0,o.jsx)(u.VscodeIcon,{})}),"Open in VS Code Insiders"]}),L[35]=A,L[36]=j):j=L[36],L[37]===Symbol.for("react.memo_cache_sentinel")?(w=(0,o.jsx)(el.l.LeadingVisual,{children:(0,o.jsx)(u.DesktopDownloadIcon,{})}),L[37]=w):w=L[37],L[38]!==O?(_=(0,o.jsxs)(el.l.Item,{onSelect:O,children:[w,"Checkout with GitHub Desktop"]}),L[38]=O,L[39]=_):_=L[39],L[40]!==P||L[41]!==G?(C=G&&(0,o.jsxs)(el.l.Item,{onSelect:P,children:[(0,o.jsx)(el.l.LeadingVisual,{children:(0,o.jsx)(u.TerminalIcon,{})}),"Open in Codespaces"]}),L[40]=P,L[41]=G,L[42]=C):C=L[42],L[43]!==b||L[44]!==j||L[45]!==_||L[46]!==C?(N=(0,o.jsxs)(el.l.Group,{children:[v,b,j,_,C]}),L[43]=b,L[44]=j,L[45]=_,L[46]=C,L[47]=N):N=L[47],L[48]!==g||L[49]!==y||L[50]!==N?(S=(0,o.jsxs)(er.W,{children:[f,(0,o.jsx)(er.W.Overlay,{align:"end",children:(0,o.jsxs)(el.l,{children:[g,y,x,N]})})]}),L[48]=g,L[49]=y,L[50]=N,L[51]=S):S=L[51],L[52]!==M?(I=(0,o.jsx)(M,{}),L[52]=M,L[53]=I):I=L[53],L[54]!==S||L[55]!==I?(k=(0,o.jsxs)(o.Fragment,{children:[S,I]}),L[54]=S,L[55]=I,L[56]=k):k=L[56],k}try{eu.displayName||(eu.displayName="TaskHeaderMobileMenu")}catch{}var em=n(50129),eh=n(79684);function ef(e){let t,n,i=(0,s.c)(4),{pull:a}=e;i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)(eh.B.Item,{href:"/copilot/agents",children:"Agents"}),i[0]=t):t=i[0];let r=!a,l=a?.title;return i[1]!==r||i[2]!==l?(n=(0,o.jsxs)(eh.B,{children:[t,(0,o.jsx)(eh.B.Item,{loading:r,children:l})]}),i[1]=r,i[2]=l,i[3]=n):n=i[3],n}try{ef.displayName||(ef.displayName="TaskBreadcrumbs")}catch{}var ep=n(34164);function eg(e){let t,n,i,a,r,l,d,c=(0,s.c)(19),{pull:u,session:m,isContentPreviewOpen:h,openPreviewPane:f}=e,p=`/${u?.repository_nwo}/pull/${u?.number}`,g=(0,ec.A3)("optedInToUserFeedback");return c[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,ep.$)("TaskHeader-module__container--mszgP"),c[0]=t):t=c[0],c[1]!==u?(n=(0,o.jsx)("div",{className:"TaskHeader-module__leftControls--gPjSp",children:(0,o.jsx)(ef,{pull:u})}),c[1]=u,c[2]=n):n=c[2],c[3]!==g||c[4]!==u||c[5]!==m?(i=u&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"TaskHeader-module__desktopButtons--bONYA",children:[g&&(0,o.jsx)(es.O,{sessionId:m?.id}),(0,o.jsx)(ei.FS,{pull:u,session:m}),(0,o.jsx)(ea.G,{pullUrl:u.url,taskId:u.global_relay_id})]}),(0,o.jsx)("div",{className:"TaskHeader-module__mobileMenu--CAeut",children:(0,o.jsx)(eu,{pull:u})})]}),c[3]=g,c[4]=u,c[5]=m,c[6]=i):i=c[6],c[7]!==h||c[8]!==f?(a=(0,o.jsx)(en,{isContentPreviewOpen:h,openPreviewPane:f}),c[7]=h,c[8]=f,c[9]=a):a=c[9],c[10]!==i||c[11]!==a?(r=(0,o.jsx)("div",{className:"TaskHeader-module__rightControls--ujKcE",children:(0,o.jsxs)(X.B,{direction:"horizontal",align:"center",gap:"condensed",children:[i,a]})}),c[10]=i,c[11]=a,c[12]=r):r=c[12],c[13]!==n||c[14]!==r?(l=(0,o.jsxs)("div",{className:t,children:[n,r]}),c[13]=n,c[14]=r,c[15]=l):l=c[15],c[16]!==p||c[17]!==l?(d=(0,o.jsx)(em.Kg,{basePageDataUrl:p,children:l}),c[16]=p,c[17]=l,c[18]=d):d=c[18],d}try{eg.displayName||(eg.displayName="TaskHeader")}catch{}var ey=n(81453),ex=n(51213),ev=n(79196),eb=n(7812),ej=n(57478),ew=n(97189),e_=n(13038),eC=n(32051),eN=n(89466),eS=n(40235),eI=n(74022),ek=n(86476),eL=n(34001),eT=n(67154),eD=n(58529),eE=n(72259),eR=n(47723);function eA(){let e,t=(0,s.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(ew.Fn,{children:(0,o.jsx)(H.BH,{children:(0,o.jsx)(eO,{})})}),t[0]=e):e=t[0],e}function eO(){var e;let t,n,i,a,r,l,d,c,m,h,f,p,y,x,v,b,j,w,_,C,N,I,k,L,T,D,E,R,A,O,P,F,M,$,B,V=(0,s.c)(107),{data:U}=(0,eN.J)();V[0]!==U?(t=void 0===U?{}:U,V[0]=U,V[1]=t):t=V[1];let{pull:X,sessions:ee,sessionsPollingInterval:et,currentUser:en}=t,ei=X?.id??0,ea=et??0;V[2]!==ee||V[3]!==ei||V[4]!==ea?(n={pullId:ei,initialData:ee,sessionsPollingInterval:ea},V[2]=ee,V[3]=ei,V[4]=ea,V[5]=n):n=V[5];let{data:es}=(0,eL.t)(n),er=(0,H.tZ)(),{openPreviewPane:el,closePreviewPane:eo,openItem:ed,closeItem:ec,updateItem:eu,allOpenItems:em}=(0,H.xx)(),[eh]=(0,Q.ok)(),ef=em?.length??0,{isNarrowViewport:ep}=(0,K.B)(),ew=!!es?.length;V[6]!==eh?(i=eh.get("session_id"),V[6]=eh,V[7]=i):i=V[7];let eT=!!i;V[8]!==es?(a=es?.toSorted(eB)[0],V[8]=es,V[9]=a):a=V[9];let eA=a,eO=es?.length??0;V[10]!==es?(r=es?.reduce(e$,0)||0,V[10]=es,V[11]=r):r=V[11];let eV=r,eU=!!(en&&en?.id===es?.[0]?.user_id);V[12]!==es?(l=es?.some(eM)??!1,V[12]=es,V[13]=l):l=V[13];let eq=l;V[14]!==es?(d=es?.every(eF)??!1,V[14]=es,V[15]=d):d=V[15];let eG=d,eH=(0,G.b)(),{models:eK}=(0,eE.h)(),eW=g.W.codingAgentModelSelection?eK:void 0,ez=(0,W.U)();V[16]!==es?(c=es?.find(eP),V[16]=es,V[17]=c):c=V[17];let eQ=c??es?.[0],{data:eZ}=(0,J.B)(eQ?.agent_id??null),eJ=eZ?.display_name,eY=eZ?.slug;V[18]!==eY?(m=(0,Y.sS)(eY),V[18]=eY,V[19]=m):m=V[19];let eX=m,e0=X?.id||0,e1=!!X?.id;V[20]!==X||V[21]!==e0||V[22]!==e1?(h={pullRequestId:e0,includeBody:!1,initialData:X,enabled:e1},V[20]=X,V[21]=e0,V[22]=e1,V[23]=h):h=V[23];let{data:e2,refetchBody:e3,refetchPullRequest:e4}=(0,ek.Y)(h);e=e2?.aliveChannel,(F=(0,s.c)(7))[0]!==e4?(A=(0,eI.A)(e4,2e3,{leading:!1,trailing:!0}),F[0]=e4,F[1]=A):A=F[1],M=A,F[2]!==e3?(O=(0,eI.A)(e3,2e3,{leading:!1,trailing:!0}),F[2]=e3,F[3]=O):O=F[3],$=O,F[4]!==$||F[5]!==M?(P=e=>{(e.event_updates?.git_updated||e.event_updates?.title_updated)&&M(),e.event_updates?.body_updated&&$()},F[4]=$,F[5]=M,F[6]=P):P=F[6],B=P,(0,eS.x)(e,B),V[24]===Symbol.for("react.memo_cache_sentinel")?(f=new Set,V[24]=f):f=V[24];let e5=(0,S.useRef)(f),e6=(0,S.useRef)(void 0),e7=(0,S.useRef)(void 0);V[25]!==ef?(p=()=>{0===ef&&e5.current.clear()},y=[ef],V[25]=ef,V[26]=p,V[27]=y):(p=V[26],y=V[27]),(0,S.useEffect)(p,y),V[28]!==eJ||V[29]!==em||V[30]!==eW||V[31]!==ec||V[32]!==eU||V[33]!==eG||V[34]!==e2||V[35]!==eT||V[36]!==eq||V[37]!==eX||V[38]!==ep||V[39]!==eA?.last_updated_at||V[40]!==eA?.model||V[41]!==eA?.state||V[42]!==ed||V[43]!==el||V[44]!==eV||V[45]!==X||V[46]!==eO||V[47]!==eu?(x=()=>{if(!e2)return;void 0!==e2.id&&void 0!==e6.current&&e6.current!==e2.id&&(e5.current.clear(),e7.current=void 0),e6.current=e2?.id;let e=e2.changed_files??0,t=e2.head_sha,n=eO>0&&e>0,i=eA?.model,a=i&&eW?eW.find(e=>e.id===(i.startsWith(eR.an)?i.slice(eR.an.length):i)):void 0,s={...(0,eb.Bx)({body:e2?.body??"",bodyHTML:e2?.body_html,title:e2.title,number:e2.number,type:"pr-overview",repositoryNwo:e2.repository_nwo,baseRef:e2.base_ref_name,headRef:e2.head_ref_name,headSha:t,sessionState:eA?.state,sessionUpdatedAt:eA?.last_updated_at,sessionCount:eO,premiumRequestCount:eV,selectedModel:a,isSingleSessionView:!eU,commitAliveChannel:e2.commit_alive_channel,isCopilotCodingAgent:eX},ex.Wp),disableCloseButton:!0,icon:u.NoteIcon},r=X&&n?{...(0,eb.Bx)({type:"pr-files-changed",headSha:t,basePath:`/${e2.repository_nwo}/pull/${e2.number}`,isSessionRunning:eq,isSessionReadonly:eG,agentDisplayName:eJ},ex.Wp),disableCloseButton:!0,trailingComponent:(0,o.jsx)(ej.A,{children:e}),icon:u.FileIcon}:null;for(let e of(eu(s),r&&eu(r),em))e.includes("pr-files-changed:")&&!n&&ec(e);let l=em.includes(s.id),d=r&&em.includes(r.id),c=!e5.current.has(s.id)&&!l,m=r&&!e5.current.has(r.id)&&!d;c&&(ed(s.id,!eT),ep||el()),m&&(ed(r.id,eT),eT&&!ep&&el()),e5.current.add(s.id),r&&e5.current.add(r.id)},V[28]=eJ,V[29]=em,V[30]=eW,V[31]=ec,V[32]=eU,V[33]=eG,V[34]=e2,V[35]=eT,V[36]=eq,V[37]=eX,V[38]=ep,V[39]=eA?.last_updated_at,V[40]=eA?.model,V[41]=eA?.state,V[42]=ed,V[43]=el,V[44]=eV,V[45]=X,V[46]=eO,V[47]=eu,V[48]=x):x=V[48];let e8=eA?.state,e9=eA?.last_updated_at,te=eA?.model;V[49]!==eJ||V[50]!==em||V[51]!==eW||V[52]!==ec||V[53]!==eo||V[54]!==eU||V[55]!==eG||V[56]!==e2||V[57]!==eT||V[58]!==eq||V[59]!==eX||V[60]!==ep||V[61]!==ed||V[62]!==ef||V[63]!==el||V[64]!==eV||V[65]!==X||V[66]!==eO||V[67]!==e8||V[68]!==e9||V[69]!==te||V[70]!==eu?(v=[e2,eu,ed,ec,el,eo,eT,X,ef,e8,e9,te,eO,eV,em,ep,eU,eq,eG,eW,eJ,eX],V[49]=eJ,V[50]=em,V[51]=eW,V[52]=ec,V[53]=eo,V[54]=eU,V[55]=eG,V[56]=e2,V[57]=eT,V[58]=eq,V[59]=eX,V[60]=ep,V[61]=ed,V[62]=ef,V[63]=el,V[64]=eV,V[65]=X,V[66]=eO,V[67]=e8,V[68]=e9,V[69]=te,V[70]=eu,V[71]=v):v=V[71],(0,S.useEffect)(x,v),V[72]!==eo||V[73]!==el?(b=e=>{e?el():eo()},V[72]=eo,V[73]=el,V[74]=b):b=V[74];let tt=b;V[75]!==e2?.title?(j=()=>{let e=e2?.title;e?(0,q.D)(`${e} \xb7 Task \xb7 GitHub Copilot`):(0,q.D)("Task \xb7 GitHub Copilot")},V[75]=e2?.title,V[76]=j):j=V[76];let tn=e2?.title;return V[77]!==tn?(w=[tn],V[77]=tn,V[78]=w):w=V[78],(0,S.useEffect)(j,w),V[79]!==eH?(_=()=>{eH.selectThread(null,{includeThreads:!1,clearTopic:!0})},C=[eH],V[79]=eH,V[80]=_,V[81]=C):(_=V[80],C=V[81]),(0,S.useEffect)(_,C),(0,Z._)(),V[82]!==er||V[83]!==tt?(N=[er,tt],V[82]=er,V[83]=tt,V[84]=N):N=V[84],V[85]!==e2||V[86]!==er||V[87]!==ew||V[88]!==eA||V[89]!==el?(I=ew&&(0,o.jsx)(z.P.Header,{children:(0,o.jsx)(eg,{pull:e2,session:eA,isContentPreviewOpen:er,openPreviewPane:el})}),V[85]=e2,V[86]=er,V[87]=ew,V[88]=eA,V[89]=el,V[90]=I):I=V[90],V[91]===Symbol.for("react.memo_cache_sentinel")?(k=(0,o.jsx)(z.P.Sidebar,{children:(0,o.jsx)(ey.U,{})}),V[91]=k):k=V[91],V[92]===Symbol.for("react.memo_cache_sentinel")?(L=(0,o.jsx)(z.P.ColumnLeft,{children:(0,o.jsx)(eD.pP,{})}),V[92]=L):L=V[92],V[93]!==ew||V[94]!==ez?(T=ew&&(0,o.jsx)(z.P.ColumnRight,{children:(0,o.jsx)(ev.U,{returnFocusRef:ez,disableActionsMenu:!0,disableResourcePanel:!0,className:"TaskView-module__contentPreview--NFDAQ"})}),V[93]=ew,V[94]=ez,V[95]=T):T=V[95],V[96]!==N||V[97]!==I||V[98]!==T?(D=(0,o.jsxs)(z.P,{mainColumn:"left","data-hpc":!0,secondaryColumnState:N,children:[I,k,L,T]}),V[96]=N,V[97]=I,V[98]=T,V[99]=D):D=V[99],V[100]!==e2||V[101]!==D?(E=(0,o.jsx)(eC.mE,{pull:e2,children:D}),V[100]=e2,V[101]=D,V[102]=E):E=V[102],V[103]!==en||V[104]!==eU||V[105]!==E?(R=(0,o.jsx)(e_.Q,{currentUser:en,currentUserIsSessionOwner:eU,children:E}),V[103]=en,V[104]=eU,V[105]=E,V[106]=R):R=V[106],R}function eP(e){return"in_progress"===e.state}function eF(e){return(0,eT.SS)(e)}function eM(e){return"in_progress"===e.state}function e$(e,t){return e+t.premium_requests}function eB(e,t){return new Date(t.created_at).getTime()-new Date(e.created_at).getTime()}try{eA.displayName||(eA.displayName="TaskViewWrapper")}catch{}try{eO.displayName||(eO.displayName="TaskView")}catch{}let eV=/\/copilot\/tasks\/pull\/([a-zA-Z0-9-_]+)/;let TasksPlugin=class TasksPlugin{get previewComponents(){return{"pr-overview":U,"pr-files-changed":h}}constructor(){(0,l._)(this,"id",eR.v),(0,l._)(this,"displayName",eR.Ns),(0,l._)(this,"skipSyncRouteToThread",!0),(0,l._)(this,"components",[{id:eR.kF,Component:eA,routes:[eV]}])}};var eU=n(65411),eq=n(60209),eG=n(85094),eH=n(47970),eK=n(21373),eW=n(46665),ez=n(46857);function eQ(e){let t,n,i,a,r,l,d,c,m,h=(0,s.c)(26),{loop:f,headerButton:p,isStreaming:g}=e,[y,x]=(0,S.useState)(!0);if(!f)return null;h[0]!==y?(t=()=>x(!y),h[0]=y,h[1]=t):t=h[1];let v=t,b=g&&"LoopBlock-module__streaming--kzTU_";h[2]!==b?(n=(0,ep.$)("LoopBlock-module__container--F3X80",b),h[2]=b,h[3]=n):n=h[3];let j=!y&&"LoopBlock-module__headerCollapsed--Yoo66";return h[4]!==j?(i=(0,ep.$)("LoopBlock-module__header--Bmyfz",j),h[4]=j,h[5]=i):i=h[5],h[6]!==y?(a=y?(0,o.jsx)(u.ChevronDownIcon,{size:16}):(0,o.jsx)(u.ChevronRightIcon,{size:16}),h[6]=y,h[7]=a):a=h[7],h[8]!==f.title?(r=(0,o.jsx)("span",{className:"LoopBlock-module__buttonText--pH2DI",children:f.title}),h[8]=f.title,h[9]=r):r=h[9],h[10]!==a||h[11]!==r||h[12]!==v?(l=(0,o.jsx)(eK.Q,{variant:"invisible",onClick:v,className:"LoopBlock-module__expandButton--kYkwN",leadingVisual:a,children:r}),h[10]=a,h[11]=r,h[12]=v,h[13]=l):l=h[13],h[14]!==p||h[15]!==i||h[16]!==l?(d=(0,o.jsxs)("div",{className:i,children:[l,p]}),h[14]=p,h[15]=i,h[16]=l,h[17]=d):d=h[17],h[18]!==y||h[19]!==g||h[20]!==f.nodes?(c=y&&(0,o.jsx)("div",{className:"LoopBlock-module__content--SQW7_",children:f.nodes.map((e,t)=>{let n=g&&t===f.nodes.length-1;return(0,o.jsxs)("div",{className:"LoopBlock-module__node--GZLd9",children:[(0,o.jsx)("div",{className:"LoopBlock-module__iconContainer--QF1t5",children:(0,o.jsx)(u.CheckCircleFillIcon,{size:16,className:"LoopBlock-module__checkIcon--_Toxw"})}),n&&!e.title?null:(0,o.jsx)("span",{className:"LoopBlock-module__nodeTitle--upYDV",children:e.title})]},e.id)})}),h[18]=y,h[19]=g,h[20]=f.nodes,h[21]=c):c=h[21],h[22]!==c||h[23]!==n||h[24]!==d?(m=(0,o.jsxs)("div",{className:n,children:[d,c]}),h[22]=c,h[23]=n,h[24]=d,h[25]=m):m=h[25],m}try{eQ.displayName||(eQ.displayName="LoopBlockContent")}catch{}var eZ=n(91348),eJ=n(12465),eY=n(37510),eX=n(99993);function e0(e){let t,n,i,a,r=(0,s.c)(15),{isStreaming:l}=e,d=function(){let{message:e}=(0,eW.V)(),t=(0,ez.O)(e);return t?.pipeline??null}(),{mutate:c}=(0,eJ.P)(),{data:u}=(0,eX._N)();r[0]!==u||r[1]!==d||r[2]!==c?(t=()=>{if(!u||!d)return;let e=(0,eZ.kX)({...d,id:u.id},[]);c({loopID:u.id,updateFn:()=>e})},r[0]=u,r[1]=d,r[2]=c,r[3]=t):t=r[3];let m=t;r[4]!==l||r[5]!==u||r[6]!==d?(n=u&&!l&&!(0,eY.S)(u,d),r[4]=l,r[5]=u,r[6]=d,r[7]=n):n=r[7];let h=n;r[8]!==m||r[9]!==h?(i=h?(0,o.jsx)(eK.Q,{variant:"invisible",onClick:m,children:"Restore"}):null,r[8]=m,r[9]=h,r[10]=i):i=r[10];let f=i;return r[11]!==l||r[12]!==d||r[13]!==f?(a=(0,o.jsx)(eQ,{loop:d,headerButton:f,isStreaming:l}),r[11]=l,r[12]=d,r[13]=f,r[14]=a):a=r[14],a}try{e0.displayName||(e0.displayName="LoopBlock")}catch{}let e1="data-loop-block",e2=(0,eG.F)(e1),e3={div:(e,t)=>{let n=(0,eG.k)(e,e1);return n?(0,o.jsx)(e0,{...n}):t}};function e4(){return{transformMarkdown:e=>(0,eH.YR)(e,"code",e=>{"loop"===e.lang&&(e.data={hName:"div",hProperties:{[e2]:JSON.stringify({isStreaming:e.isStreaming??!1})},hChildren:[]})}),transformHtml:e=>(0,eH.YR)(e,"element",(e,t,n)=>{let i=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&i?.type==="element"&&e2 in i.properties&&n.children.splice(t,1,i)}),reactComponents:e3}}var e5=n(54908),e6=n(35750),e7=n(18150),e8=n(85242),e9=n(88243),te=n(16213),tt=n(25641),tn=n(46062),ti=new WeakMap,ta=new WeakMap,ts=new WeakMap,tr=new WeakSet,tl=new WeakMap;let ChatCompletionsClient=class ChatCompletionsClient{async *getChatCompletion(e,t,n){let i=(0,tn.wv)(),a=t??i.id,s=await (0,e6._)(this,ti).getAuthToken(),r=await (0,tt.p)({basePath:(0,e6._)(this,ta),body:{messages:e,model:a,stream:!0},path:"/chat/completions",method:"POST",streamingResponse:!0,authToken:s,integrationId:(0,e6._)(this,tl).integrationID,realIp:(0,e6._)(this,ts),signal:n});if(!r.ok){let e=await r.response?.text()??"Unknown error",t=e;try{let n=JSON.parse(e);t=n.error?.message||r.error}catch(e){}throw(0,ee.BI)("dotcom_chat.error",{type:"execution",nodeType:"prompt",mode:"pipes",errorMessage:t}),Error(`Failed to get chat completion: ${t}`)}!n?.aborted&&r.body&&(yield*(0,e9._)(this,tr,to).call(this,r.body,n))}constructor(e,t,n=""){(0,te._)(this,tr),(0,e7._)(this,tl,{get:td,set:void 0}),(0,e7._)(this,ti,{writable:!0,value:void 0}),(0,e7._)(this,ta,{writable:!0,value:void 0}),(0,e7._)(this,ts,{writable:!0,value:void 0}),(0,e8._)(this,ta,e),(0,e8._)(this,ti,t),(0,e8._)(this,ts,n)}};async function*to(e,t){let n=new TextDecoder("utf-8"),i=e.getReader(),a="";try{for(;;){if(t?.aborted)return;let{done:e,value:s}=await i.read();if(e)break;for(a+=n.decode(s);;){if(a.startsWith("data: [DONE]"))return;let e=a.indexOf(`

`);if(-1===e)break;let t=a.slice(0,e).replace(/^data:\s+/,"");if(""===t){a=a.slice(e+2);continue}try{let e=JSON.parse(t),n=e.choices?.[0]?.delta?.content??"",i=e.model,a=e.usage?{prompt_tokens:e.usage.prompt_tokens,completion_tokens:e.usage.completion_tokens,total_tokens:e.usage.total_tokens,model:i}:void 0;(n||a)&&(yield{content:n,usage:a})}catch{}a=a.slice(e+2)}}}finally{i.releaseLock()}}function td(){return{integrationID:"copilot-chat"}}var tc=n(21046);let tu=["SAML"],tm={FORBIDDEN:["SAML error"]};function th(e,t){var n;if("errors"in(e="errors"in(n=e)?{...n,errors:n.errors.filter(e=>!tu.includes(e.type)&&!tm[e.type]?.includes(e.message))}:n)&&e.errors.length){let t=e.errors.map(e=>`${e.message}${e.path?` (path: ${e.path})`:""}`).join(", ");throw(0,ee.BI)("dotcom_chat.error",{type:"execution",nodeType:"graphql",mode:"pipes",errorMessage:t}),Error(t)}if(!("data"in e)){let n=`Expected data property in response: ${JSON.stringify(e)}. requestId: ${t}`;throw(0,tc.vV)(n),(0,ee.BI)("dotcom_chat.error",{type:"execution",nodeType:"graphql",mode:"pipes",errorMessage:n}),Error("Failed to fetch data.")}return!0}var tf=n(13647),tp=new WeakMap,tg=new WeakMap,ty=new WeakMap;let GraphQLClient=class GraphQLClient{async getGraphQLResponse(e,t,n){if((0,tf.Xg)()){let n=await (0,e6._)(this,ty).executeGraphQL(e,t.loopId,t.version,t.executionId,t.nodeId);if(!n.success)throw Error(`GraphQL execution failed: ${n.error}`);if(th(n.data))return n.data}let i={"X-Copilot-Api-Token":(await (0,e6._)(this,tg).getAuthToken()).value},a={query:e};a.loopId=t.loopId,a.version=t.version,a.executionId=t.executionId,a.nodeId=t.nodeId;let s=await (0,k.Sr)((0,e6._)(this,tp),{method:"POST",body:a,headers:i,signal:n?.signal});if(s.ok){let e=await s.json();if(th(e,s.headers.get("X-Github-Request-Id")||""))return e}else throw Error("Failed to get GraphQL response.")}constructor(e,t,n){(0,e7._)(this,tp,{writable:!0,value:void 0}),(0,e7._)(this,tg,{writable:!0,value:void 0}),(0,e7._)(this,ty,{writable:!0,value:void 0}),(0,e8._)(this,tp,e),(0,e8._)(this,tg,t),(0,e8._)(this,ty,n)}};var tx=n(26956),tv=n(30388);let tb="LoopsView-module__sectionHeader--EgQsl",tj="LoopsView-module__sectionTitle--UPWoU";var tw=n(70346),t_=n(80770),tC=n(21229),tN=n(58615),tS=n(49912),tI=n(17005),tk=n(15220),tL=n(72511),tT=n(86877),tD=n(4175),tE=n(76746),tR=n(99519),tA=n(76219);function tO({isOpen:e,onClose:t}){let[n,i]=(0,S.useState)(""),[a,s]=(0,S.useState)(!1),[r,l]=(0,S.useState)(null),d=(0,tR.EY)(),c=(0,Q.Zp)(),{availableModels:u}=(0,tA.U)(),m=(0,S.useMemo)(()=>{if(!n.trim())return{isValid:!1,errors:[]};try{let e=JSON.parse(n),t=(0,tE.v)(e,{availableModels:u});if(t.length>0)return{isValid:!1,errors:t.map(e=>e.error)};return{isValid:!0,errors:[],loop:e}}catch(e){return{isValid:!1,errors:[`Invalid JSON: ${e instanceof Error?e.message:"Syntax error"}`]}}},[n,u]),h=async()=>{if(m.isValid&&m.loop&&!a){s(!0),l(null),(0,ee.BI)("dotcom_chat.activate",{target:"CREATE_LOOP_FROM_JSON",mode:"loops"});try{let e={...m.loop,id:crypto.randomUUID(),updatedAt:Date.now(),owned:!0,visibility:"private"};await d.createLoop(e),c(`${tt.Jz}/l/${e.id}`),t()}catch(e){l(e instanceof Error?e.message:"Failed to create loop. Please try again.")}finally{s(!1)}}};return e?(0,o.jsx)(tk.l,{title:"Create loop from JSON",onClose:t,width:"large",height:"large",renderBody:()=>(0,o.jsxs)("div",{className:"CreateLoopFromJsonDialog-module__container--yEYu1",children:[r&&(0,o.jsx)(tL.A,{variant:"danger",children:r}),(0,o.jsx)("div",{className:"CreateLoopFromJsonDialog-module__header--UNUms",children:(0,o.jsx)("p",{className:"CreateLoopFromJsonDialog-module__description--vfsKH",children:"Paste a valid loop JSON object to create a new loop."})}),(0,o.jsxs)(tT.A,{className:"CreateLoopFromJsonDialog-module__formControl--vBsuV",children:[(0,o.jsx)(tT.A.Label,{visuallyHidden:!0,children:"Loop JSON"}),(0,o.jsx)(tD.Ay,{className:"CreateLoopFromJsonDialog-module__textarea--OHmSD",value:n,onChange:e=>i(e.target.value),placeholder:"Paste your loop JSON here...",resize:"none",spellCheck:!1,autoComplete:"off"}),m.errors.length>0?(0,o.jsx)(tT.A.Validation,{variant:"error",children:(0,o.jsx)("div",{children:m.errors[0]})}):m.isValid&&m.loop?(0,o.jsx)(tT.A.Validation,{variant:"success",children:"Valid loop detected!"}):(0,o.jsx)("span",{className:"CreateLoopFromJsonDialog-module__spacer--JbIGC"})]})]}),renderFooter:()=>(0,o.jsxs)(tk.l.Footer,{children:[(0,o.jsx)(eK.Q,{onClick:t,children:"Cancel"}),(0,o.jsx)(eK.Q,{onClick:h,variant:"primary",inactive:!m.isValid||a,loading:a,children:"Create loop"})]})}):null}try{tO.displayName||(tO.displayName="CreateLoopFromJsonDialog")}catch{}function tP(e){let t,n,i,a,r,l,d,c,m,h,f,p,g,y,x,v,b=(0,s.c)(28),{showExamples:j,onShowExamples:w}=e,_=void 0===j||j,C=(0,S.useRef)(null),N=(0,S.useRef)(null),[I,k]=(0,S.useState)(!1),L=(0,ec.A3)("optedInToUserFeedback");b[0]!==L?(t=L?(0,o.jsx)(eK.Q,{variant:"link",onClick:()=>{C.current?.openDialog(),(0,ee.BI)("dotcom_chat.activate",{target:"USER_MENU_GIVE_FEEDBACK",mode:"immersive"})},children:"Give feedback"}):null,b[0]=L,b[1]=t):t=b[1];let T=t;return b[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,o.jsx)(et.K,{icon:u.BookIcon,as:"a",href:"https://docs.github.com/copilot","aria-label":"Copilot Loops documentation",target:"_blank",rel:"noopener noreferrer",variant:"invisible",onClick:t$}),b[2]=n):n=b[2],b[3]===Symbol.for("react.memo_cache_sentinel")?(i=(0,o.jsx)(er.W.Anchor,{children:(0,o.jsx)(et.K,{icon:u.KebabHorizontalIcon,"aria-label":"Menu",variant:"invisible",onClick:tM})}),b[3]=i):i=b[3],b[4]!==w||b[5]!==_?(a=!_&&w&&(0,o.jsxs)(el.l.Item,{onSelect:()=>{w(),(0,ee.BI)("dotcom_chat.activate",{target:"LOOPS_SHOW_EXAMPLES",mode:"loops"})},children:[(0,o.jsx)(el.l.LeadingVisual,{children:(0,o.jsx)(u.LightBulbIcon,{})}),"Show examples"]}),b[4]=w,b[5]=_,b[6]=a):a=b[6],b[7]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{k(!0),(0,ee.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_CREATE_FROM_JSON",mode:"loops"})},b[7]=r):r=b[7],b[8]===Symbol.for("react.memo_cache_sentinel")?(l=(0,o.jsxs)(el.l.Item,{onSelect:r,children:["Create from JSON",(0,o.jsx)(el.l.LeadingVisual,{children:(0,o.jsx)(u.UploadIcon,{})})]}),b[8]=l):l=b[8],b[9]!==a?(d=(0,o.jsxs)(el.l.Group,{children:[a,l]}),b[9]=a,b[10]=d):d=b[10],b[11]===Symbol.for("react.memo_cache_sentinel")?(c=(0,o.jsx)(el.l.Divider,{}),b[11]=c):c=b[11],b[12]!==L?(m=L&&(0,o.jsxs)(el.l.Item,{onSelect:()=>{C.current?.openDialog(),(0,ee.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_GIVE_FEEDBACK",mode:"immersive"})},children:["Give feedback",(0,o.jsx)(el.l.LeadingVisual,{children:(0,o.jsx)(u.CommentIcon,{})})]}),b[12]=L,b[13]=m):m=b[13],b[14]===Symbol.for("react.memo_cache_sentinel")?(h=(0,o.jsxs)(el.l.LinkItem,{href:"/settings/copilot",onClick:tF,children:[(0,o.jsx)(el.l.LeadingVisual,{children:(0,o.jsx)(u.GearIcon,{})}),"Settings"]}),b[14]=h):h=b[14],b[15]!==m?(f=(0,o.jsxs)(el.l.Group,{children:[m,h]}),b[15]=m,b[16]=f):f=b[16],b[17]!==f||b[18]!==d?(p=(0,o.jsxs)(er.W,{anchorRef:N,children:[i,(0,o.jsx)(er.W.Overlay,{width:"small",children:(0,o.jsxs)(el.l,{children:[d,c,f]})})]}),b[17]=f,b[18]=d,b[19]=p):p=b[19],b[20]===Symbol.for("react.memo_cache_sentinel")?(g=(0,o.jsx)(tI.l,{ref:C,mode:"immersive",returnFocusRef:N}),b[20]=g):g=b[20],b[21]===Symbol.for("react.memo_cache_sentinel")?(y=()=>k(!1),b[21]=y):y=b[21],b[22]!==I?(x=(0,o.jsx)(tO,{isOpen:I,onClose:y}),b[22]=I,b[23]=x):x=b[23],b[24]!==T||b[25]!==p||b[26]!==x?(v=(0,o.jsx)("div",{className:"LoopsViewHeader-module__header--miwmH",children:(0,o.jsxs)("div",{className:"LoopsViewHeader-module__rightControls--tpwkz",children:[T,n,p,g,x]})}),b[24]=T,b[25]=p,b[26]=x,b[27]=v):v=b[27],v}function tF(){return(0,ee.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_SETTINGS",mode:"loops"})}function tM(){return(0,ee.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU",mode:"loops"})}function t$(){return(0,ee.BI)("dotcom_chat.activate",{target:"LOOPS_HELP_BUTTON_CLICKED",mode:"loops"})}try{tP.displayName||(tP.displayName="LoopsViewHeader")}catch{}let tB={altText:"GitHub battle royale report",assetPath:"/images/modules/loops/BattleRoyal.png",loop:{title:"GitHub battle royale",description:"Compare two GitHub users based on their pull request contributions and metrics",nodes:[{id:"1",type:"text",title:"Start Date",description:"The date 30 days ago from today",content:"@today-30d",metadata:{inputType:"date"}},{id:"2",type:"text",title:"First Username",description:"GitHub username for the first contestant",content:"jonrohan",metadata:{inputType:"text"}},{id:"3",type:"text",title:"Second Username",description:"GitHub username for the second contestant",content:"colebemis",metadata:{inputType:"text"}},{id:"4",type:"text",title:"Repository",description:"The repository to analyze (in owner/name format)",content:"primer/react",metadata:{inputType:"text"}},{id:"5",type:"github-graphql",title:"First User PRs",description:"Fetch PRs for the first user",content:`query {
  search(query: "repo:{{4}} author:{{2}} is:pr created:>={{1}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          merged
          closed
          createdAt
          mergedAt
          additions
          deletions
          commits {
            totalCount
          }
          repository {
            nameWithOwner
          }
        }
      }
    }
  }
}`},{id:"6",type:"github-graphql",title:"Second User PRs",description:"Fetch PRs for the second user",content:`query {
  search(query: "repo:{{4}} author:{{3}} is:pr created:>={{1}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          merged
          closed
          createdAt
          mergedAt
          additions
          deletions
          commits {
            totalCount
          }
          repository {
            nameWithOwner
          }
        }
      }
    }
  }
}`},{id:"7",type:"prompt",title:"Battle Analysis",description:"Compare the two users and determine a winner",content:`You're a GitHub Battle Royale announcer. Compare the following metrics between these two contestants based on their pull request data:

# Battle Royal \u{1F934}\u{1F5E1}\u{FE0F}\u{1F478}

1. Total PRs created
2. PR merge rate
3. Lines of code changed (additions + deletions)
4. Average commits per PR
5. PR velocity (PRs per month)

User 1 ({{2}}) data: {{5}}
User 2 ({{3}}) data: {{6}}

Analyze each metric and assign points (1-10) for each category. Then declare an overall winner with a dramatic announcement. Format your response as an exciting battle commentary.`}]},icon:u.FlameIcon},tV={altText:"GitHub repo feature announcement magazine",assetPath:"/images/modules/loops/NewsFlash.png",loop:{title:"Multi-Repo GitHub feature announcement magazine",description:"Creates a tabloid-style frontpage focusing on new features and enhancements across multiple GitHub repositories",nodes:[{id:"repo1",type:"text",title:"Repository 1",description:"First repository to analyze (format: owner/repo)",content:"facebook/react",metadata:{inputType:"text"}},{id:"repo2",type:"text",title:"Repository 2",description:"Second repository to analyze (format: owner/repo)",content:"microsoft/vscode",metadata:{inputType:"text"}},{id:"repo3",type:"text",title:"Repository 3",description:"Third repository to analyze (format: owner/repo)",content:"primer/react",metadata:{inputType:"text"}},{id:"days",type:"text",title:"Days Limit",description:"Number of days to look back for data",content:"@today-30d",metadata:{inputType:"date"}},{id:"3",type:"github-graphql",title:"Feature PRs - Repository 1",description:"Fetch recent feature/enhancement pull requests from the first repository",content:`query {
  search(query: "repo:{{repo1}} is:pr created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          author {
            login
          }
          createdAt
          additions
          deletions
          changedFiles
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          reviews(first: 3) {
            nodes {
              author {
                login
              }
            }
          }
        }
      }
    }
  }
}`},{id:"4",type:"github-graphql",title:"Feature PRs - Repository 2",description:"Fetch recent feature/enhancement pull requests from the second repository",content:`query {
  search(query: "repo:{{repo2}} is:pr created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          author {
            login
          }
          createdAt
          additions
          deletions
          changedFiles
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          reviews(first: 3) {
            nodes {
              author {
                login
              }
            }
          }
        }
      }
    }
  }
}`},{id:"5",type:"github-graphql",title:"Feature PRs - Repository 3",description:"Fetch recent feature/enhancement pull requests from the third repository",content:`query {
  search(query: "repo:{{repo3}} is:pr created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          author {
            login
          }
          createdAt
          additions
          deletions
          changedFiles
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          reviews(first: 3) {
            nodes {
              author {
                login
              }
            }
          }
        }
      }
    }
  }
}`},{id:"6",type:"github-graphql",title:"Feature Requests - Repository 1",description:"Fetch recent feature request issues from the first repository",content:`query {
  search(query: "repo:{{repo1}} is:issue label:\\"Type: Feature Request\\" created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on Issue {
          title
          url
          author {
            login
          }
          createdAt
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          comments {
            totalCount
          }
        }
      }
    }
  }
}`},{id:"7",type:"github-graphql",title:"Feature Requests - Repository 2",description:"Fetch recent feature request issues from the second repository",content:`query {
  search(query: "repo:{{repo2}} is:issue label:enhancement,feature-request created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on Issue {
          title
          url
          author {
            login
          }
          createdAt
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          comments {
            totalCount
          }
        }
      }
    }
  }
}`},{id:"8",type:"github-graphql",title:"Feature Requests - Repository 3",description:"Fetch recent feature request issues from the third repository",content:`query {
  search(query: "repo:{{repo3}} is:issue label:enhancement,feature-request created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on Issue {
          title
          url
          author {
            login
          }
          createdAt
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          comments {
            totalCount
          }
        }
      }
    }
  }
}`},{id:"9",type:"text",title:"Magazine Style",description:"Define the style of the feature announcement magazine",content:`\u{2728}\u{1F4AB} \u{1F31F} OPEN SOURCE NEWS FLASH \u{1F31F} \u{1F4AB} \u{2728}
\u{1F680} BREAKING UPDATES \u{1F680} EXCLUSIVE FEATURES \u{1F3AF} HOT RELEASES \u{1F525}

Your #1 source for hot new features in your favorite open source projects! \u{1F308}`,metadata:{inputType:"text"}},{id:"10",type:"prompt",title:"Feature Magazine Content",description:"Generate tabloid-style headlines focusing on new features",content:`You are a tech magazine writer specializing in new feature announcements. Create an exciting frontpage covering the latest features and enhancements from these repositories: {{repo1}}, {{repo2}}, and {{repo3}}.

Use this data for each repository:
Repository 1:
- PRs: {{3}}
- Issues: {{6}}

Repository 2:
- PRs: {{4}}
- Issues: {{7}}

Repository 3:
- PRs: {{5}}
- Issues: {{8}}

Start with this header:
{{9}}

For each repository:
1. Create a section with an appropriate emoji
2. Include 2-3 exciting headlines about new features or requests
3. Focus on user impact and benefits
4. Include the original URLs as 'READ MORE' links
5. Mention scope of changes for PRs (additions + deletions)

End with a 'FEATURE FORECAST' section comparing the most exciting upcoming features across repositories.

Format everything in markdown and use emojis liberally.`}]},icon:u.RepoIcon},tU=[tB,{altText:"First responder activity report",assetPath:"/images/modules/loops/FirstResponder.png",loop:{title:"First responder activity report",description:"Generates a summary of a first responder's activity including new issues, PR reviews, and issue involvement from the past week",nodes:[{id:"1",type:"text",title:"First Responder Username",description:"GitHub username of the first responder",content:"",metadata:{inputType:"text"}},{id:"2",type:"text",title:"Start Date",description:"Start date for the report (1 week ago)",content:"@today-1w",metadata:{inputType:"date"}},{id:"repo",type:"text",title:"Repository",description:"The full repository name (e.g. owner/repo)",content:"primer/react",metadata:{inputType:"text"}},{id:"3",type:"github-graphql",title:"Created Issues",description:"Issues created by the user in the past week",content:`query {
  search(query: "repo:{{repo}} author:{{1}} is:issue created:>{{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on Issue {
          title
          url
          createdAt
          state
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
        }
      }
    }
  }
}`},{id:"4",type:"github-graphql",title:"PR Reviews",description:"PR reviews submitted by the user in the past week",content:`query {
  search(query: "repo:{{repo}} is:pr reviewed-by:{{1}} updated:>{{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          reviews(first: 5, author: "{{1}}") {
            edges {
              node {
                state
                submittedAt
              }
            }
          }
        }
      }
    }
  }
}`},{id:"involved_issues",type:"github-graphql",title:"Involved Issues",description:"Issues where the user was involved (commented or assigned) in the past week",content:`query {
  search(query: "repo:{{repo}} involves:{{1}} is:issue updated:>{{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on Issue {
          title
          url
          updatedAt
          state
          comments(last: 5) {
            nodes {
              author {
                login
              }
              createdAt
            }
          }
          assignees(first: 5) {
            nodes {
              login
            }
          }
        }
      }
    }
  }
}`},{id:"5",type:"prompt",title:"Activity Summary",description:"Summary report of the first responder's activity",content:`Generate a comprehensive summary report of the first responder's ({{1}}) activity in the {{repo}} repository over the past week. Include their issue creation, PR review activities, and issue involvement.

Issues Created:
{{3}}

PR Reviews:
{{4}}

Issue Involvement:
{{involved_issues}}

Please format the report with these sections:
1. Overview (total numbers)
2. Issue Activity
   - Created Issues
   - Issue Involvement (comments, assignments)
3. PR Review Activity (highlight significant reviews)
4. Key Observations

Keep the tone professional and focus on what the next first responder needs to know about as they come in for the next shift.`}]},icon:u.NoteIcon},tV];var tq=n(43134);let tG=(0,S.lazy)(async()=>({default:(await Promise.all([n.e(8206),n.e(68988),n.e(55316),n.e(8316),n.e(34031),n.e(49898)]).then(n.bind(n,88027))).Loop}));try{tG.displayName||(tG.displayName="LazyLoop")}catch{}var tH=n(39768);function tK(e){let t,n,i,a,r=(0,s.c)(10),{value:l,onChange:d}=e;r[0]!==d?(t=e=>{d(0===e?"list":"output")},r[0]=d,r[1]=t):t=r[1];let c=t,m="list"===l;r[2]!==m?(n=(0,o.jsx)(tH.I.IconButton,{"aria-label":"List view",selected:m,icon:u.ThreeBarsIcon}),r[2]=m,r[3]=n):n=r[3];let h="output"===l;return r[4]!==h?(i=(0,o.jsx)(tH.I.IconButton,{"aria-label":"Output view",selected:h,icon:u.RowsIcon}),r[4]=h,r[5]=i):i=r[5],r[6]!==c||r[7]!==n||r[8]!==i?(a=(0,o.jsxs)(tH.I,{"aria-label":"Loops overview view mode",onChange:c,children:[n,i]}),r[6]=c,r[7]=n,r[8]=i,r[9]=a):a=r[9],a}try{tK.displayName||(tK.displayName="ListModeToggle")}catch{}var tW=n(90177),tz=n(14303);function tQ(e){let t,n,i,a=(0,s.c)(14),{onDelete:r,onCopyLoop:l,onDuplicate:d,onShare:c,onEdit:m,onCopyOutput:h,loopId:f,variant:p,hasOutput:g}=e,y=void 0===p?"invisible":p,x=(0,S.useRef)(null);return f?(a[0]!==y?(t=(0,o.jsx)(er.W.Anchor,{children:(0,o.jsx)(et.K,{icon:u.KebabHorizontalIcon,"aria-label":"Manage loop",variant:y})}),a[0]=y,a[1]=t):t=a[1],a[2]!==g||a[3]!==f||a[4]!==l||a[5]!==h||a[6]!==r||a[7]!==d||a[8]!==m||a[9]!==c?(n=(0,o.jsx)(tz.r,{onDelete:r,onCopyLoop:l,onDuplicate:d,onShare:c,onEdit:m,onCopyOutput:h,hasOutput:g,loopId:f,returnFocusRef:x}),a[2]=g,a[3]=f,a[4]=l,a[5]=h,a[6]=r,a[7]=d,a[8]=m,a[9]=c,a[10]=n):n=a[10],a[11]!==t||a[12]!==n?(i=(0,o.jsxs)(er.W,{anchorRef:x,children:[t,n]}),a[11]=t,a[12]=n,a[13]=i):i=a[13],i):null}try{tQ.displayName||(tQ.displayName="LoopsContextMenu")}catch{}var tZ=n(97665),tJ=n(93364),tY=n(48057),tX=n(33026),t0=n(36296),t1=n(90122),t2=n(5533),t3=n(19336),t4=n(11607);function t5(e){let t,n,i,a,r,l,d,c,u,m,h,f,p,g=(0,s.c)(44),{loop:y}=e,{runLoop:x,stopLoop:v,isPreparing:b}=function(){let e=(0,tR.EY)(),t=(0,tZ.jE)(),[n,i]=(0,S.useState)(!1),{createProgressHandler:a}=(0,t0.h)();return{runLoop:async n=>{i(!0);try{let s=await e.createExecution(n.id,n.version||tX.qD);if(!s.success)throw Error(`Failed to create execution: ${s.error}`);let r=s.data,l=n.version||tX.qD,o=a(n.id,l),d=(0,tY.wu)(n.id,l);t.setQueryData(d,r),i(!1),await e.runPipeline(n,r.id,o,(e,n,i)=>{let a=(0,tY.wu)(e,n),s=t.getQueryData(a);return Promise.resolve(s?(0,tJ.$j)(s):(0,tJ.YD)("execution not found"))})}catch(e){throw i(!1),(0,tc.vV)("Error running loop:",e),e}},stopLoop:n=>{let i=(0,tY.wu)(n.id,n.version||tX.qD),a=t.getQueryData(i);a&&e.stopPipeline(a.id,()=>{t.invalidateQueries({queryKey:i})})},isPreparing:n}}();g[0]!==y?(t=(0,eZ.FT)(y),g[0]=y,g[1]=t):t=g[1];let j=t[0],{data:w,isLoading:_}=(0,tY.rR)(y.id,y.version??"latest"),C=j?w?.nodes[j.id]:void 0,N=C?.value??null,I=C?.error||null;g[2]!==w?(n=(0,t2.y)(w),g[2]=w,g[3]=n):n=g[3];let k=n,L=b||k;g[4]!==N?(i=(0,t1.DO)(N),g[4]=N,g[5]=i):i=g[5];let T=i;g[6]!==y||g[7]!==x?(a=async()=>{await x(y),(0,ee.BI)("dotcom_chat.activate",{target:"OUTPUTS_VIEW_LOOP_RUN",mode:"loops"})},g[6]=y,g[7]=x,g[8]=a):a=g[8];let D=a;g[9]!==y||g[10]!==v?(r=()=>{v(y),(0,ee.BI)("dotcom_chat.activate",{target:"OUTPUTS_VIEW_LOOP_STOP",mode:"loops"})},g[9]=y,g[10]=v,g[11]=r):r=g[11];let E=r;g[12]!==N||g[13]!==T?(l=async()=>{if(N)try{await navigator.clipboard.writeText(T),(0,ee.BI)("dotcom_chat.activate",{target:"OUTPUTS_VIEW_COPY_OUTPUT",mode:"loops"})}catch{}},g[12]=N,g[13]=T,g[14]=l):l=g[14];let R=l,A=`${tt.Jz}/l/${y.id}`;g[15]!==y.title||g[16]!==A?(d=(0,o.jsx)("h3",{className:"LoopOutput-module__title--pNloU",children:(0,o.jsx)(t4.$,{variant:"invisible",condensed:!0,to:A,onClick:t6,children:y.title})}),g[15]=y.title,g[16]=A,g[17]=d):d=g[17],g[18]!==D||g[19]!==E||g[20]!==L||g[21]!==N?(c=(0,o.jsx)(tW.c,{isLoading:L,onClick:D,onStop:E,value:N,variant:"invisible",iconOnly:!0}),g[18]=D,g[19]=E,g[20]=L,g[21]=N,g[22]=c):c=g[22];let O=!!N;g[23]!==R||g[24]!==y.id||g[25]!==O?(u=(0,o.jsx)(tQ,{loopId:y.id,onEdit:t6,onCopyOutput:R,hasOutput:O}),g[23]=R,g[24]=y.id,g[25]=O,g[26]=u):u=g[26],g[27]!==u||g[28]!==c?(m=(0,o.jsxs)("div",{className:"LoopOutput-module__actions--S7bni",children:[c,u]}),g[27]=u,g[28]=c,g[29]=m):m=g[29],g[30]!==m||g[31]!==d?(h=(0,o.jsxs)("div",{className:"LoopOutput-module__header--fcRKQ",children:[d,m]}),g[30]=m,g[31]=d,g[32]=h):h=g[32];let P=!!j;return g[33]!==D||g[34]!==E||g[35]!==_||g[36]!==L||g[37]!==I||g[38]!==N||g[39]!==P?(f=(0,o.jsx)("div",{className:"LoopOutput-module__body--fhlUk",children:(0,o.jsx)(t3.G,{outputNodeExists:P,isRunning:L,isLoading:_,nodeValue:N,nodeError:I,onRun:D,onStop:E})}),g[33]=D,g[34]=E,g[35]=_,g[36]=L,g[37]=I,g[38]=N,g[39]=P,g[40]=f):f=g[40],g[41]!==h||g[42]!==f?(p=(0,o.jsxs)("div",{className:"LoopOutput-module__panel--MrOXo",children:[h,f]}),g[41]=h,g[42]=f,g[43]=p):p=g[43],p}function t6(){(0,ee.BI)("dotcom_chat.activate",{target:"OUTPUTS_VIEW_EDIT_LOOP",mode:"loops"})}try{t5.displayName||(t5.displayName="LoopOutput")}catch{}var t7=n(12683);let t8=[{step:"STEP 1",title:"Describe what you want to create",description:"Describe what you want to create and watch your first loop take shape. Refine and iterate whenever you need.",imageLight:n.p+"onboarding-exp-1-a95dcfae9b1b.png",imageDark:n.p+"onboarding-exp-1-dark-a48429702429.png",color:"bgColor-accent-muted borderColor-accent-muted"},{step:"STEP 2",title:"Connect nodes to build your workflow",description:"Every loop is made of connected nodes, each designed for a specific task. Adjust their inputs, fine-tune their settings, and watch data flow seamlessly from one node to the next, like a clear, powerful and predictable visual pipeline.",imageLight:n.p+"onboarding-exp-2-0c9e0ccab87e.png",imageDark:n.p+"onboarding-exp-2-dark-615b3cf6a6ff.png",color:"bgColor-muted borderColor-muted"},{step:"STEP 3",title:"Run and review results",description:"Run your loop to see results instantly. Outputs are rendered in rich markdown, making it easy to review, validate, and keep improving your workflow.",imageLight:n.p+"onboarding-exp-3-69315c1e30db.png",imageDark:n.p+"onboarding-exp-3-dark-ab6c51a7a2e1.png",color:"bgColor-open-muted borderColor-open-muted"},{step:"STEP 4",title:"Share with your team",description:"Once your loop is ready, share it with your team. Organize, reuse, and grow your collection of loops into a powerhouse of workflows everyone can build on.",imageLight:n.p+"onboarding-exp-4-5437e43d7f31.png",imageDark:n.p+"onboarding-exp-4-dark-3a94358b2cb1.png",color:"bgColor-done-muted borderColor-done-muted"}];function t9(){let e,t,n=(0,s.c)(4),{resolvedColorScheme:i}=(0,t7.DP)(),a="dark"===i;return n[0]!==a?(e=t8.map(e=>(0,o.jsxs)("div",{className:(0,ep.$)("OnboardingCards-module__card--iLbfG","color-shadow-small"),children:[(0,o.jsxs)("div",{className:"OnboardingCards-module__cardContent--Azqb_",children:[(0,o.jsx)("h4",{className:"OnboardingCards-module__cardTitle--Jy7D9",children:e.step}),(0,o.jsx)("p",{className:"OnboardingCards-module__cardDescription--ychAP",children:e.description})]}),(0,o.jsx)("div",{className:(0,ep.$)("OnboardingCards-module__cardImageContainer--OMfWC",e.color),children:(0,o.jsx)("img",{src:a?e.imageDark:e.imageLight,alt:e.title,className:"OnboardingCards-module__cardImage--otEbQ"})})]},e.step)),n[0]=a,n[1]=e):e=n[1],n[2]!==e?(t=(0,o.jsx)("div",{className:"OnboardingCards-module__container--Vo1v5",children:e}),n[2]=e,n[3]=t):t=n[3],t}try{t9.displayName||(t9.displayName="OnboardingCards")}catch{}var ne=n(79064),nt=n(79184),nn=n(96002),ni=n(4559);let na=(0,n(23125).A)(ni.C,1e3);function ns(e){let t,n,i,a,r,l,d,c=(0,s.c)(21),{chatState:u,plugin:m}=e;if(!m||!(0,tS.j)(m))throw Error("LoopsView can only be used with a LoopsPlugin");let[h,f]=(0,tN.M)("loopsShowExamples",!0),p=(0,tn.GF)(u.availableModels);return c[0]!==f?(t=()=>f(!0),c[0]=f,c[1]=t):t=c[1],c[2]!==h||c[3]!==t?(n=(0,o.jsx)(z.P.Header,{children:(0,o.jsx)(tP,{showExamples:h,onShowExamples:t})}),c[2]=h,c[3]=t,c[4]=n):n=c[4],c[5]===Symbol.for("react.memo_cache_sentinel")?(i=(0,o.jsx)(z.P.Sidebar,{children:(0,o.jsx)(ey.U,{})}),c[5]=i):i=c[5],c[6]!==u||c[7]!==f||c[8]!==h?(a=(0,o.jsx)(z.P.ColumnLeft,{children:(0,o.jsx)(nl,{chatState:u,showExamples:h,setShowExamples:f})}),c[6]=u,c[7]=f,c[8]=h,c[9]=a):a=c[9],c[10]!==n||c[11]!==a?(r=(0,o.jsxs)(z.P,{"data-testid":"loops-layout",children:[n,i,a]}),c[10]=n,c[11]=a,c[12]=r):r=c[12],c[13]!==u.availableModels||c[14]!==p||c[15]!==m.previewUrl||c[16]!==r?(l=(0,o.jsx)(tA.Q,{previewUrl:m.previewUrl,availableModels:u.availableModels,defaultModel:p,sendChatMessage:nr,children:r}),c[13]=u.availableModels,c[14]=p,c[15]=m.previewUrl,c[16]=r,c[17]=l):l=c[17],c[18]!==m.service||c[19]!==l?(d=(0,o.jsx)(tR.qT,{value:m.service,children:l}),c[18]=m.service,c[19]=l,c[20]=d):d=c[20],d}function nr(){}function nl(e){let t,n,i,a,r,l,d,c,m,h,f,p,g,y,x,v,b,j,w,_,C,N,I,k=(0,s.c)(59),{chatState:L,showExamples:T,setShowExamples:D}=e,{data:E,isLoading:R}=(0,t_.C)(),A=(0,G.b)(),O=(0,Q.Zp)(),P=(0,tR.EY)(),F=(0,tn.GF)(L.availableModels),[M,$]=(0,tN.M)("loopsOverviewViewMode","output"),[B,V]=(0,S.useState)(""),{chatQuotaExceeded:U,isLicensedLimited:q}=(0,nt.xR)(),H=q&&U,K=(0,S.useRef)(null);if(k[0]!==E||k[1]!==B){e:{if(!E){t=E;break e}let e=E.filter(nh);if(!B.trim()){t=e;break e}let n=B.toLowerCase().trim();t=e.filter(e=>e.title.toLowerCase().includes(n)||e.description&&e.description.toLowerCase().includes(n))}k[0]=E,k[1]=B,k[2]=t}else t=k[2];let W=t;k[3]===Symbol.for("react.memo_cache_sentinel")?(n=[],k[3]=n):n=k[3],(0,S.useEffect)(nm,n),k[4]!==A?(i=()=>{A.selectThread(null,{includeThreads:!1,clearTopic:!0})},a=[A],k[4]=A,k[5]=i,k[6]=a):(i=k[5],a=k[6]),(0,S.useEffect)(i,a),k[7]!==F||k[8]!==P||k[9]!==A||k[10]!==O?(r=async e=>{let t=e.trim();if(""===t)return;(0,ee.BI)("dotcom_chat.activate",{target:"OVERVIEW_INITIAL_CREATE",mode:"loops"});let n=crypto.randomUUID(),i={scopeId:eq.S$},a=await A.createThread(i);await P.createLoop(n),(0,tq.aq)(n,a.id);let s={content:t,model:F,references:[],thread:a,mode:eq.lh};A.sendChatMessage(s),O(`${tt.Jz}/l/${n}`)},k[7]=F,k[8]=P,k[9]=A,k[10]=O,k[11]=r):r=k[11];let z=r,Z=(0,S.useRef)(z);k[12]!==z?(l=()=>{Z.current=z},d=[z],k[12]=z,k[13]=l,k[14]=d):(l=k[13],d=k[14]),(0,S.useEffect)(l,d),k[15]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{let e=ne.Jt.getLoopEntrypointMessage();e&&(ne.Jt.setLoopEntrypointMessage(null),Z.current(e.message))},m=[],k[15]=c,k[16]=m):(c=k[15],m=k[16]),(0,S.useEffect)(c,m),k[17]===Symbol.for("react.memo_cache_sentinel")?(h=()=>(K.current&&na(K.current,{assertive:!0}),nu),k[17]=h):h=k[17],k[18]!==W||k[19]!==R||k[20]!==B?(f=[B,W,R],k[18]=W,k[19]=R,k[20]=B,k[21]=f):f=k[21],(0,S.useEffect)(h,f),k[22]!==P||k[23]!==O?(p=async e=>{await P.createLoop(e),O(`${tt.Jz}/l/${e.id}`)},k[22]=P,k[23]=O,k[24]=p):p=k[24];let J=p;k[25]!==$?(g=e=>{$(e)},k[25]=$,k[26]=g):g=k[26];let Y=g;k[27]===Symbol.for("react.memo_cache_sentinel")?(y=e=>{V(e),(0,ee.BI)("dotcom_chat.activate",{target:"LOOPS_SEARCH",mode:"loops"})},k[27]=y):y=k[27];let X=y;return k[28]===Symbol.for("react.memo_cache_sentinel")?(x=(0,o.jsxs)(tx.Zf.Header,{children:[(0,o.jsx)(tx.Zf.Title,{children:"Loops"}),(0,o.jsx)(tx.Zf.Description,{children:"Automate repetitive tasks by simply describing them using natural language. Automate once. Loop forever."})]}),k[28]=x):x=k[28],k[29]===Symbol.for("react.memo_cache_sentinel")?(v=[{name:ex.II.Loops,icon:u.LoopIcon,submitLabel:"Automate",placeholder:"What would you like to automate?"}],k[29]=v):v=k[29],k[30]!==z||k[31]!==H?(b=(0,o.jsx)(tw.V,{modes:v,size:"large",disabled:H,onSubmit:z}),k[30]=z,k[31]=H,k[32]=b):b=k[32],k[33]!==H?(j=H&&(0,o.jsx)(nn.u,{}),k[33]=H,k[34]=j):j=k[34],k[35]!==b||k[36]!==j?(w=(0,o.jsxs)("div",{className:"LoopsView-module__header--ZnQDC",children:[x,(0,o.jsxs)("div",{className:"LoopsView-module__input--HBzte",children:[b,j]})]}),k[35]=b,k[36]=j,k[37]=w):w=k[37],k[38]!==J||k[39]!==R||k[40]!==D||k[41]!==T?(_=!R&&T&&(0,o.jsxs)(tx.Zf.Section,{children:[(0,o.jsxs)("div",{className:tb,children:[(0,o.jsx)("h2",{className:tj,children:"Examples"}),(0,o.jsx)(et.K,{icon:u.XIcon,"aria-label":"Dismiss examples",variant:"invisible",size:"small",onClick:()=>{D(!1),(0,ee.BI)("dotcom_chat.activate",{target:"LOOPS_DISMISS_EXAMPLES",mode:"loops"})}})]}),(0,o.jsx)("div",{className:"LoopsView-module__examplesContainer--cshxA",children:tU.map(e=>{let{loop:t,icon:n}=e;return(0,o.jsxs)("button",{className:(0,ep.$)("LoopsView-module__exampleCard--faZyi","color-shadow-small"),onClick:()=>{(0,ee.BI)("dotcom_chat.activate",{target:"OVERVIEW_EXAMPLE_LOOP_SELECT",mode:"loops"}),J({...t,id:crypto.randomUUID(),updatedAt:Date.now(),owned:!0,visibility:"private"})},children:[(0,o.jsx)("div",{className:"LoopsView-module__exampleCardIconContainer--zgd0g",children:n?(0,o.jsx)(n,{className:"LoopsView-module__exampleCardIcon--umFeZ",size:16}):null}),(0,o.jsx)("div",{className:"LoopsView-module__exampleCardContent--jxm8o",children:(0,o.jsx)("h3",{className:"LoopsView-module__exampleCardTitle--wpbww",children:t.title})})]},t.title)})})]}),k[38]=J,k[39]=R,k[40]=D,k[41]=T,k[42]=_):_=k[42],k[43]!==W||k[44]!==Y||k[45]!==R||k[46]!==E||k[47]!==B||k[48]!==T||k[49]!==M?(C=R||E&&E.length>0?(0,o.jsxs)(tx.Zf.Section,{children:[T&&(0,o.jsx)("div",{className:tb,children:(0,o.jsx)("h2",{className:tj,children:"Loops"})}),(0,o.jsxs)("div",{className:"LoopsView-module__searchContainer--ypqMb",children:[(0,o.jsx)(tC.D,{onSearch:X,placeholder:"Search loops...","aria-label":"Search loops",debounceDelay:300}),(0,o.jsx)(tK,{value:M,onChange:Y}),(0,o.jsx)("h2",{className:"sr-only",children:"My loops"})]}),B&&W&&0===W.length?(0,o.jsxs)("div",{className:"LoopsView-module__noResultsMessage--OkrMA",ref:K,children:["No loops found matching \u201C",B,"\u201D"]}):"list"===M?(0,o.jsx)(tv.qJ,{children:(0,o.jsx)(tv.qJ.List,{loading:R,children:W?.map(nd)})}):(0,o.jsx)("div",{className:"LoopsOutputList-module__list--DoC1u",children:(W||[]).map(no)})]}):null,k[43]=W,k[44]=Y,k[45]=R,k[46]=E,k[47]=B,k[48]=T,k[49]=M,k[50]=C):C=k[50],k[51]!==R||k[52]!==E?(N=!R&&(!E||0===E.length)&&(0,o.jsxs)(tx.Zf.Section,{children:[(0,o.jsx)("div",{className:tb,children:(0,o.jsx)("h2",{className:tj,children:"Getting started"})}),(0,o.jsx)(t9,{})]}),k[51]=R,k[52]=E,k[53]=N):N=k[53],k[54]!==w||k[55]!==_||k[56]!==C||k[57]!==N?(I=(0,o.jsxs)(tx.Zf.Container,{width:"small",children:[w,_,C,N]}),k[54]=w,k[55]=_,k[56]=C,k[57]=N,k[58]=I):I=k[58],I}function no(e){return(0,o.jsx)(t5,{loop:e},e.id)}function nd(e){return(0,o.jsxs)(tv.qJ.Item,{href:`${tt.Jz}/l/${e.id}`,onClick:nc,children:[(0,o.jsx)(tv.qJ.Item.Title,{children:e.title}),(0,o.jsx)(tv.qJ.Item.Description,{children:e.description}),(0,o.jsx)(tv.qJ.Item.Actions,{children:(0,o.jsx)(tQ,{loopId:e.id})})]},e.id)}function nc(){return(0,ee.BI)("dotcom_chat.activate",{target:"OVERVIEW_USER_LOOP_SELECT",mode:"loops"})}function nu(){na.cancel()}function nm(){(0,q.D)("Loops \xb7 GitHub Copilot"),Promise.all([n.e(8206),n.e(68988),n.e(55316),n.e(8316),n.e(34031),n.e(49898)]).then(n.bind(n,88027))}function nh(e){return""!==e.title||0!==e.nodes.length}try{ns.displayName||(ns.displayName="LoopsView")}catch{}try{nl.displayName||(nl.displayName="LoopsViewInner")}catch{}var nf=n(49851),np=new WeakMap,ng=new WeakMap,ny=new WeakSet;let LoopsClient=class LoopsClient{listLoops(){return(0,e9._)(this,ny,nx).call(this,{operation:"list-loops"})}listLoopVersions(e){return(0,e9._)(this,ny,nx).call(this,{operation:"list-loop-versions",loopID:e})}createLoop(e){return(0,e9._)(this,ny,nx).call(this,{operation:"create-loop",loop:e})}updateLoop(e,t,n){return(0,e9._)(this,ny,nx).call(this,{operation:"update-loop",loopID:e,version:t,loop:n})}getLoop(e,t){return(0,e9._)(this,ny,nx).call(this,{operation:"get-loop",loopID:e,versionConstraint:t})}deleteLoop(e){return(0,e9._)(this,ny,nx).call(this,{operation:"delete-loop",loopID:e})}createExecution(e,t,n,i,a){return(0,e9._)(this,ny,nx).call(this,{operation:"create-execution",loopID:e,version:t,executionInit:{inputValues:i,nodes:n},shareID:a})}getExecution(e,t,n){return(0,e9._)(this,ny,nx).call(this,{operation:"get-execution",loopID:e,version:t,executionID:n})}updateNodeExecution(e,t,n,i,a,s){return(0,e9._)(this,ny,nx).call(this,{operation:"update-node-execution",loopID:e,version:t,executionID:n,nodeID:i,nodeExecution:a,shareID:s})}shareLoop(e){return(0,e9._)(this,ny,nx).call(this,{operation:"share-loop",loopID:e})}unshareLoop(e){return(0,e9._)(this,ny,nx).call(this,{operation:"unshare-loop",loopID:e})}executeGraphQL(e,t,n,i,a){return(0,e9._)(this,ny,nx).call(this,{operation:"execute-graphql",query:e,loopID:t,version:n,executionID:i,nodeID:a})}constructor(e,t){(0,te._)(this,ny),(0,e7._)(this,np,{writable:!0,value:void 0}),(0,e7._)(this,ng,{writable:!0,value:void 0}),(0,e8._)(this,np,e),(0,e8._)(this,ng,t)}};async function nx(e){if(!(0,e6._)(this,np)||""===(0,e6._)(this,np).trim())return(0,tc.vV)("Loops client URL is not configured"),(0,tJ.YD)("Loops client URL is not configured",void 0);let t={"Content-Type":"application/json"};if("get-execution"===e.operation&&(0,e6._)(this,ng)){let e=await (0,e6._)(this,ng).getAuthToken();t["X-Copilot-Api-Token"]=e.value}let n=await (0,k.DI)((0,e6._)(this,np),{method:"POST",body:JSON.stringify(e),headers:t});if(!n.ok){let e=await n.text();try{return(0,tJ.YD)(JSON.parse(e),n)}catch(e){return(0,tJ.YD)(e,n)}}let i=204===n.status?void 0:await n.json();return(0,tJ.$j)(i)}var nv=n(70119),nb=n(97286),nj=n(42518);function nw(e){let t,n,i=(0,s.c)(3),{onSelect:a}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)(el.l.LeadingVisual,{children:(0,o.jsx)(nf.LP,{})}),i[0]=t):t=i[0],i[1]!==a?(n=(0,o.jsxs)(el.l.Item,{onSelect:a,children:[t,"Loops\u2026"]}),i[1]=a,i[2]=n):n=i[2],n}function n_(e){var t;let n,i,a,r,l,d,c,u,m,h,f,p,g,y,x,v,b,j,w,_=(0,s.c)(48),{onSubmit:C,onDismiss:N,client:I}=e,k=(0,G.b)(),{data:L,isError:T,isLoading:D}=(t=I,(a=(0,s.c)(3))[0]===Symbol.for("react.memo_cache_sentinel")?(n=["loop-execution-references"],a[0]=n):n=a[0],a[1]!==t?(i={queryKey:n,queryFn:()=>nS(t)},a[1]=t,a[2]=i):i=a[2],(0,nb.I)(i)),[E,R]=(0,S.useState)("");_[0]!==k||_[1]!==C||_[2]!==L?(r=e=>{if(!L)return;let t=L.find(t=>t.executionID===e);t&&k.addReference(t,"loop-executions-select-panel"),C()},_[0]=k,_[1]=C,_[2]=L,_[3]=r):r=_[3];let A=r;if(_[4]!==E||_[5]!==T||_[6]!==D||_[7]!==N||_[8]!==A||_[9]!==C||_[10]!==L){let e,t,n=L?L.map(nC).filter(e=>e.text.toLowerCase().includes(E.toLowerCase())):[];d=nv.X,g=!0,y="modal",x="large",v="instant",b="Select Loop output",c=N,u=C,_[24]===Symbol.for("react.memo_cache_sentinel")?(e=e=>R(e.currentTarget.value),_[24]=e):e=_[24],_[25]!==D?(m=(0,o.jsx)(nv.X.Header,{children:(0,o.jsx)(nv.X.SearchInput,{loading:D,onChange:e,placeholder:"Search loops","aria-label":"Search loops"})}),_[25]=D,_[26]=m):m=_[26],l=el.l,_[27]!==T||_[28]!==D?(h=!D&&T&&(0,o.jsx)(nv.X.Message,{variant:"error",size:"inline",children:"An error occurred"}),_[27]=T,_[28]=D,_[29]=h):h=_[29],f=!D&&0===n.length&&(0,o.jsx)(nv.X.Message,{variant:"empty",title:"No loop output found",children:"Try creating and running a loop to see output here"}),_[30]!==A?(t=e=>(0,o.jsxs)(el.l.Item,{onSelect:()=>A(e.key),children:[e.text,(0,o.jsx)(el.l.Description,{variant:"block",className:"LoopExecutionAttachmentMenuItem-module__itemDescription--yZ8xi",children:e.description})]},e.key),_[30]=A,_[31]=t):t=_[31],p=n.map(t),_[4]=E,_[5]=T,_[6]=D,_[7]=N,_[8]=A,_[9]=C,_[10]=L,_[11]=l,_[12]=d,_[13]=c,_[14]=u,_[15]=m,_[16]=h,_[17]=f,_[18]=p,_[19]=g,_[20]=y,_[21]=x,_[22]=v,_[23]=b}else l=_[11],d=_[12],c=_[13],u=_[14],m=_[15],h=_[16],f=_[17],p=_[18],g=_[19],y=_[20],x=_[21],v=_[22],b=_[23];return _[32]!==l||_[33]!==h||_[34]!==f||_[35]!==p?(j=(0,o.jsxs)(l,{children:[h,f,p]}),_[32]=l,_[33]=h,_[34]=f,_[35]=p,_[36]=j):j=_[36],_[37]!==d||_[38]!==c||_[39]!==u||_[40]!==m||_[41]!==j||_[42]!==g||_[43]!==y||_[44]!==x||_[45]!==v||_[46]!==b?(w=(0,o.jsxs)(d,{open:g,variant:y,width:x,selectionVariant:v,title:b,onCancel:c,onSubmit:u,children:[m,j]}),_[37]=d,_[38]=c,_[39]=u,_[40]=m,_[41]=j,_[42]=g,_[43]=y,_[44]=x,_[45]=v,_[46]=b,_[47]=w):w=_[47],w}function nC(e){var t;return{text:e.loopTitle,key:e.executionID,description:"string"==typeof(t=e.output[0]?.value)?t:JSON.stringify(t)}}let nN=[404,403];async function nS(e){let t=await e.listLoops();if(!t.success)throw Error(t.error);return(await Promise.all(t.data.map(async t=>{if(!t.version)return null;let n=await e.getExecution(t.id,t.version,"latest");if(!n.success){if(nN.includes(n.httpStatus))return null;throw Error(n.error)}return n.data}))).filter(e=>!!e).map(e=>{let n=t.data.find(t=>t.id===e?.loopID);return n?(0,nj.C)(n,e):null}).filter(e=>!!e)}try{nw.displayName||(nw.displayName="LoopExecutionAttachmentMenuItem")}catch{}try{(i=LoopExecutionsSelectPanel).displayName||(i.displayName="LoopExecutionsSelectPanel")}catch{}try{n_.displayName||(n_.displayName="LoopExecutionsSelectPanelInner")}catch{}var nI=n(12357),nk=n(73077),nL=n(96459);try{(a=LoopExecutionPreview).displayName||(a.displayName="LoopExecutionPreview")}catch{}var nT=new WeakMap,nD=new WeakMap,nE=new WeakMap;let IFrameCodeExecutor=class IFrameCodeExecutor{async execute(e,t,n){return e?new Promise(i=>{let a=document.createElement("iframe");a.src=`${(0,e6._)(this,nT)}/code-node-execution.html`,a.setAttribute("sandbox",(0,e6._)(this,nE));let s=!1,r=e=>{s||(s=!0,o&&window.removeEventListener("message",o),n?.removeEventListener("abort",l),document.body.contains(a)&&document.body.removeChild(a),i(e))},l=()=>{a.contentWindow?.postMessage({type:"cancel",nodeId:t},(0,e6._)(this,nT)),r({success:!1,error:"Aborted"})};n?.addEventListener("abort",l);let o=e=>{let n=new URL((0,e6._)(this,nT),window.location.origin).origin;e.origin!==n||t&&e.data?.nodeId!==t||(clearTimeout(d),e.data?.type==="result"?r({success:!0,result:e.data.result}):e.data?.type==="error"&&r({success:!1,error:e.data.result}))},d=setTimeout(()=>{a.contentWindow?.postMessage({type:"cancel",nodeId:t},(0,e6._)(this,nT)),r({success:!1,error:"Timeout: No response"})},(0,e6._)(this,nD));window.addEventListener("message",o),a.onerror=()=>{clearTimeout(d),r({success:!1,error:"Error: Failed to load execution environment"})},document.body.appendChild(a),a.onload=()=>{try{a.contentWindow?.postMessage({type:"execute",code:e,nodeId:t},(0,e6._)(this,nT))}catch(e){clearTimeout(d),r({success:!1,error:`Error: Failed to execute code - ${e instanceof Error?e.message:"Unknown error"}`})}}}):{success:!0,result:""}}constructor(e,t=15e3,n="allow-scripts allow-same-origin"){(0,e7._)(this,nT,{writable:!0,value:void 0}),(0,e7._)(this,nD,{writable:!0,value:void 0}),(0,e7._)(this,nE,{writable:!0,value:void 0}),(0,e8._)(this,nT,e),(0,e8._)(this,nD,t),(0,e8._)(this,nE,n)}};let LoopsPlugin=class LoopsPlugin{get attachmentMenuContribution(){if(g.W.loopExecutionReferences){var e;return{attachmentType:"loop-execution",MenuItemComponent:nw,PanelComponent:(e=this.client,function(t){return(0,o.jsx)(n_,{...t,client:e})})}}}get previewComponents(){if(g.W.loopExecutionReferences){var e;return{"loop-execution":(e=this.previewUrl,function({reference:t}){let n=(0,nL.Z)(),i=(0,G.b)();if("loop-execution"!==t.type)return null;let a=(0,tt.JP)(t),s=async e=>{e.preventDefault(),await i.selectThread(null),n(a)};return(0,o.jsx)(tA.Q,{previewUrl:e,availableModels:[],defaultModel:(0,tn.wv)(),sendChatMessage:()=>{},children:(0,o.jsxs)("div",{className:"LoopExecutionPreview-module__previewContainer--RqSzv",children:[(0,o.jsx)("div",{className:"LoopExecutionPreview-module__buttonContainer--i4KdB",children:(0,o.jsx)(nk.z,{href:a,leadingVisual:u.PencilIcon,onClick:s,children:"Edit this loop"})}),(0,o.jsx)("div",{className:"LoopExecutionPreview-module__contentContainer--k2ZO7",children:(0,o.jsx)(nI.U,{isRunning:!1,nodeValue:t.output[0]?.value})})]})})})}}}async overrideCreateMessageOptions(e){return{...e,mode:eq.lh}}constructor(e,t,n,i,a,s,r){(0,l._)(this,"id",eq.S$),(0,l._)(this,"displayName",eq.Os),(0,l._)(this,"service",void 0),(0,l._)(this,"client",void 0),(0,l._)(this,"previewUrl",void 0),(0,l._)(this,"markdownExtensions",[e4]),(0,l._)(this,"skipSyncRouteToThread",!0),(0,l._)(this,"components",[{id:"loops-list",Component:ns,routes:[eq.qe]},{id:"loop-detail",Component:tG,routes:[eq.bW]}]),(0,l._)(this,"navigationItems",[{id:eq.S$,displayName:"Loops",href:eq.QK,icon:nf.LP}]);const o=new eU.JR(a);this.client=new LoopsClient(n,o),this.service=new e5.J(this.client,new GraphQLClient(t,o,this.client),new ChatCompletionsClient(e,o,r),new IFrameCodeExecutor(i)),this.previewUrl=s}};var nR=n(91747),nA=n(26607),nO=n(51625);let SparkPlugin=class SparkPlugin{constructor(e=!1){(0,l._)(this,"id",nO.eu),(0,l._)(this,"displayName",nO._x),(0,l._)(this,"sparkEnabled",void 0),(0,l._)(this,"navigationItems",[{id:nO.eu,displayName:"Spark",href:nO.cP,icon:u.SparkleIcon,label:(0,S.createElement)(nA.A,{variant:"success"},"Preview"),external:!0}]),(0,l._)(this,"slashCommand",{key:"spark",name:"Spark",description:"Transform ideas into full-stack intelligent apps",icon:u.SparkleIcon,enabled:()=>this.sparkEnabled,disabledAction:e=>{e(nO.cP)},execute:(e,t,n)=>(ne.Jt.setSparkEntrypointMessage(e),n(nO.cP),!0),suggestions:["Make a web app to upload and analyze log files, showing error frequencies and trends.","Create an app to track team PTO and on-call schedules and visualize available team capacity by week.","Create a dashboard that visualizes uploaded CSV data as interactive charts and summary stats."],mode:{name:ex.II.Spark,icon:u.SparkleIcon,supportsAutocompletion:!0}}),this.sparkEnabled=e}};function nP(e){let t,n,i,a=(0,s.c)(32),{payload:l,handleUserSubmitRef:o}=e;a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,B.G7)("copilot_chat_agents_empty_state"),a[0]=t):t=a[0];let d=t;a[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,B.G7)("copilot_spark_empty_state"),a[1]=n):n=a[1];let c=n,u=(0,nR.u)("copilot_swe_agent_progress_commands"),m=(0,nR.u)("copilot_agent_task_list_v2");if(a[2]!==o||a[3]!==m||a[4]!==u||a[5]!==l.agentsEnabled||a[6]!==l.apiURL||a[7]!==l.dashboardModulesEnabled||a[8]!==l.graphqlApiUrl||a[9]!==l.loopsClientUrl||a[10]!==l.loopsEnabled||a[11]!==l.loopsExecutionUrl||a[12]!==l.previewUrl||a[13]!==l.realIp||a[14]!==l.sparkEnabled||a[15]!==l.ssoOrganizations){if(i=[],g.W.loopsPlugin&&(l.loopsEnabled??!0)){let e,t=l.apiURL??"",n=l.graphqlApiUrl??"",s=l.loopsClientUrl??"",r=l.loopsExecutionUrl??"";a[17]!==l.previewUrl||a[18]!==l.realIp||a[19]!==l.ssoOrganizations||a[20]!==t||a[21]!==n||a[22]!==s||a[23]!==r?(e=new LoopsPlugin(t,n,s,r,l.ssoOrganizations?.map(nF)??[],l.previewUrl??"",l.realIp??""),a[17]=l.previewUrl,a[18]=l.realIp,a[19]=l.ssoOrganizations,a[20]=t,a[21]=n,a[22]=s,a[23]=r,a[24]=e):e=a[24],i.push(e)}if(l.sparkEnabled||c){let e;a[25]!==l.sparkEnabled?(e=new SparkPlugin(l.sparkEnabled),a[25]=l.sparkEnabled,a[26]=e):e=a[26],i.push(e)}if(l.agentsEnabled||d){let e,t=void 0!==l.dashboardModulesEnabled?l.dashboardModulesEnabled:m&&u,n=l.agentsEnabled??!1;a[27]!==o||a[28]!==t||a[29]!==n?(e=new r.c(t,o,n),a[27]=o,a[28]=t,a[29]=n,a[30]=e):e=a[30],i.push(e)}if(u){let e;a[31]===Symbol.for("react.memo_cache_sentinel")?(e=new TasksPlugin,a[31]=e):e=a[31],i.push(e)}a[2]=o,a[3]=m,a[4]=u,a[5]=l.agentsEnabled,a[6]=l.apiURL,a[7]=l.dashboardModulesEnabled,a[8]=l.graphqlApiUrl,a[9]=l.loopsClientUrl,a[10]=l.loopsEnabled,a[11]=l.loopsExecutionUrl,a[12]=l.previewUrl,a[13]=l.realIp,a[14]=l.sparkEnabled,a[15]=l.ssoOrganizations,a[16]=i}else i=a[16];return i}function nF(e){return e.id}},21046:(e,t,n)=>{function i(){}function a(){}n.d(t,{FF:()=>i,vV:()=>a})},21132:(e,t,n)=>{n.d(t,{s:()=>i});let i={Loaded:"Loaded",Loading:"Loading",NotLoaded:"NotLoaded"}},21229:(e,t,n)=>{n.d(t,{D:()=>u});var i=n(74848),a=n(21728),s=n(46747),r=n(38621),l=n(86877),o=n(26108),d=n(99511),c=n(96540);function u(e){let t,n,u,m,h,f,p=(0,a.c)(20),{onSearch:g,placeholder:y,"aria-label":x,disabled:v,debounceDelay:b}=e,j=void 0===y?"Search...":y,w=void 0===x?"Search":x,_=void 0!==v&&v,[C,N]=(0,c.useState)(""),S=(0,s.d)(g,void 0===b?200:b);p[0]!==S||p[1]!==g?(t=e=>{let t=e.currentTarget.value;N(t),""===t.trim()?g(""):S(t)},p[0]=S,p[1]=g,p[2]=t):t=p[2];let I=t;p[3]!==g?(n=()=>{N(""),g("")},p[3]=g,p[4]=n):n=p[4];let k=n;return p[5]!==w?(u=(0,i.jsx)(l.A.Label,{visuallyHidden:!0,children:w}),p[5]=w,p[6]=u):u=p[6],p[7]!==k||p[8]!==_||p[9]!==C?(m=""!==C?(0,i.jsx)(o.K,{icon:r.XCircleFillIcon,onClick:k,"aria-label":"Clear search",variant:"invisible",size:"small",disabled:_}):void 0,p[7]=k,p[8]=_,p[9]=C,p[10]=m):m=p[10],p[11]!==I||p[12]!==j||p[13]!==C||p[14]!==m?(h=(0,i.jsx)(d.A,{className:"SearchInput-module__searchInput--PKKMu",placeholder:j,value:C,onChange:I,leadingVisual:r.SearchIcon,trailingAction:m}),p[11]=I,p[12]=j,p[13]=C,p[14]=m,p[15]=h):h=p[15],p[16]!==_||p[17]!==u||p[18]!==h?(f=(0,i.jsx)("div",{className:"SearchInput-module__searchContainer--r7MLn",children:(0,i.jsxs)(l.A,{className:"SearchInput-module__searchInputWrapper--fhRw6",disabled:_,children:[u,h]})}),p[16]=_,p[17]=u,p[18]=h,p[19]=f):f=p[19],f}try{u.displayName||(u.displayName="SearchInput")}catch{}},21502:(e,t,n)=>{n.d(t,{B:()=>r});var i=n(21728),a=n(27912),s=n(96540);function r(e){let t,n=(0,i.c)(2),r=function(e){let t,n,a,r=(0,i.c)(5);r[0]!==e?(t=()=>"undefined"!=typeof window&&window.matchMedia(e).matches,r[0]=e,r[1]=t):t=r[1];let[l,o]=(0,s.useState)(t);return r[2]!==e?(n=()=>{let t=window.matchMedia(e),n=e=>{o(e.matches)};return o(t.matches),t.addEventListener("change",n),()=>{t.removeEventListener("change",n)}},a=[e],r[2]=e,r[3]=n,r[4]=a):(n=r[3],a=r[4]),(0,s.useEffect)(n,a),l}(void 0===e?a.X:e);return n[0]!==r?(t={isNarrowViewport:r},n[0]=r,n[1]=t):t=n[1],t}},21968:(e,t,n)=>{n.d(t,{O:()=>P});var i=n(74848),a=n(68273),s=n(21728),r=n(96540),l=n(98755),o=n(25407),d=n(26052),c=n(69726),u=n(84268),m=n(56149),h=n(21373),f=n(62935),p=n(72579),g=n(29e3),y=n(66990),x=n(79634),v=n(79431),b=n(11196),j=n(97665),w=n(33578),_=n(30923),C=n(20622),N=n(53885),S=n(96379),I=n(94747);let k=(0,a.Z6)()?function(){let e,t=(0,s.c)(2),n=(0,N.e)(C.uT.changeBase);return t[0]!==n?(e={mutationFn:e=>{let{newBaseBranch:t}=e,i=btoa(t);return(0,S.Sr)(n,{method:"PATCH",body:{new_base_binary:i}})},onSuccess:L},t[0]=n,t[1]=e):e=t[1],(0,I.n)(e)}:function(){let e=(0,N.e)(C.uT.changeBase);return(0,I.n)({mutationFn:({newBaseBranch:t})=>{let n=btoa(t);return(0,S.Sr)(e,{method:"PATCH",body:{new_base_binary:n}})},onSuccess:async e=>{let t=await e.json();if(t.error)throw Error(t.error);let n=await (await (0,_.Ee)(t.orchestration.url,{headers:{accept:"application/json"}})).json();if(n.orchestration.error_message)throw Error(n.orchestration.error_message)}})};async function L(e){let t=await e.json();if(t.error)throw Error(t.error);let n=await (await (0,_.Ee)(t.orchestration.url,{headers:{accept:"application/json"}})).json();if(n.orchestration.error_message)throw Error(n.orchestration.error_message)}let T="PullRequestHeaderSummary-module__truncateBranch--bdsQu";var D=n(34261),E=n(95807),R=n(99223),A=n(69599),O=n(37212);function P({author:e,baseBranch:t,baseRepositoryDefaultBranch:n="",baseRepositoryName:a="",baseRepositoryOwnerLogin:s="",canChangeBase:p=!1,commitsCount:b,headBranch:_,headRepositoryOwnerLogin:C="",headRepositoryName:N="",isInAdvisoryRepo:S,isEditing:I=!1,mergedBy:L,mergedByName:T,mergedTime:P,pullRequestId:M,pullRequestNumber:$,repositoryId:B,setIsEditing:V,state:U}){var q,G,H;let K,W=(0,j.jE)(),{refListCacheKey:z}=(0,x.X)(),[Q,Z]=(0,r.useState)(!1),[J,Y]=(0,r.useState)(!1),[X,ee]=(0,r.useState)(""),[et,en]=(0,r.useState)(""),ei=(0,A.G7)("render_user_display_name"),ea=(0,D.f)(),es=(0,O.NP)(),{mutate:er}=k(),el=e=>{Y(!1),ee(e)},eo=J?()=>(0,i.jsx)(c.A,{size:"small"}):null,ed=C&&C!==s?`${s}:${t}`:t,ec=function(e,t,n,i,a){if(!t)return"unknown repository";let s=!!t&&t!==e,r=a&&!!n;switch(!0){case s&&r:return`${t}/${n}:${i}`;case s:return`${t}:${i}`;case r:return`${n}:${i}`;default:return i}}(s,C,N,_,S),eu=U===w.Q.Merged?L?{login:L,displayName:T}:null:e,em=(q=U,G=b,H=eu?.login,K=`${G} ${G>1?"commits":"commit"}`,q!==w.Q.Merged?`wants to merge ${K} into`:H?`merged ${K} into`:`${K} merged into`);return(0,i.jsxs)("span",{className:"fgColor-muted d-flex flex-items-center overflow-hidden PullRequestHeaderSummary-module__summaryContainer--iNR1T",children:[eu?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.A,{inline:!0,className:"fgColor-muted text-bold","data-hovercard-url":(0,o.dCN)({owner:eu.login}),href:`/${eu.login}`,children:ei?(0,i.jsx)(d.v,{login:eu.login,profileName:eu.displayName,isAgent:!1}):eu.login})," "]}):null,em,p&&I?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(y.PI,{cacheKey:z,canCreate:!1,closeOnSelect:!0,currentCommitish:t,defaultBranch:n,hideShowAll:!0,owner:s,repo:a,types:["branch"],onSelectItem:e=>{Z(!0),en(e)}}),(0,i.jsx)(m.ZL,{children:(0,i.jsxs)(g.A,{"aria-labelledby":"confirm-change-base-branch",isOpen:Q,onDismiss:()=>{Z(!1),en(""),ee("")},children:[(0,i.jsx)(g.A.Header,{id:"confirm-change-base-branch",children:"Are you sure you want to change the base?"}),(0,i.jsxs)("div",{className:"p-3",children:[(0,i.jsx)("span",{children:"Some commits from the old base branch may be removed from the timeline, and old review comments may become outdated."}),X&&(0,i.jsx)(v.v,{className:"mt-2",variant:"critical",children:X}),(0,i.jsx)("span",{className:"sr-only","aria-live":"polite",children:J?"Base branch update in progress.":""}),(0,i.jsx)(h.Q,{alignContent:"center","aria-disabled":J?"true":void 0,block:!0,className:"mt-3",disabled:J,leadingVisual:eo,onClick:()=>{Y(!0),er({newBaseBranch:et},{onError:e=>el(e.message),onSuccess:async()=>{try{await Promise.all([W.refetchQueries({queryKey:ea},{throwOnError:!0}),W.refetchQueries({queryKey:es},{throwOnError:!0})]),Y(!1),V?.(!1),Z(!1)}catch{el("Unable to refetch commits. Please refresh the page.")}}})},variant:"primary",children:J?null:"Change base"})]})]})})]}):(0,i.jsx)(F,{branch:t,branchText:ed,repositoryName:a,repositoryOwner:s}),(0,i.jsx)("span",{children:"from "}),(0,i.jsxs)("div",{className:"d-flex flex-items-center overflow-hidden",children:[(0,i.jsx)(F,{branch:_,branchText:ec,repositoryName:N,repositoryOwner:C}),(0,i.jsx)(l.T,{ariaLabel:"Copy head branch name to clipboard",size:"small",textToCopy:C?ec:_})]}),U===w.Q.Merged&&(0,i.jsx)(f.A,{datetime:P}),U===w.Q.Open&&!(0,R.k)()&&(0,i.jsx)(E.i,{processingIndicatorUrl:(0,o.CZ9)({owner:s,repo:a,number:$}),repositoryId:B,pullRequestId:M})]})}let F=(0,a.Z6)()?function(e){let t=(0,s.c)(12),{branchText:n,repositoryOwner:a,repositoryName:r,branch:l}=e;if(r&&a){let e,s,d;t[0]!==l||t[1]!==r||t[2]!==a?(e=(0,o.WJ9)({owner:a,repo:r,branch:l}),t[0]=l,t[1]=r,t[2]=a,t[3]=e):e=t[3];let c=e,u=`${a}/${r}:${l}`;return t[4]!==n||t[5]!==c?(s=(0,i.jsx)(p.A,{href:c,className:T,children:n}),t[4]=n,t[5]=c,t[6]=s):s=t[6],t[7]!==u||t[8]!==s?(d=(0,i.jsx)(b.m,{text:u,children:s}),t[7]=u,t[8]=s,t[9]=d):d=t[9],d}{let e;return t[10]!==n?(e=(0,i.jsx)(p.A,{as:"span",className:T,title:"This repository has been deleted",children:n}),t[10]=n,t[11]=e):e=t[11],e}}:function({branchText:e,repositoryOwner:t,repositoryName:n,branch:a}){if(!n||!t)return(0,i.jsx)(p.A,{as:"span",className:T,title:"This repository has been deleted",children:e});{let s=(0,o.WJ9)({owner:t,repo:n,branch:a});return(0,i.jsx)(b.m,{text:`${t}/${n}:${a}`,children:(0,i.jsx)(p.A,{href:s,className:T,children:e})})}};try{P.displayName||(P.displayName="PullRequestHeaderSummary")}catch{}try{F.displayName||(F.displayName="PullRequestBranchName")}catch{}},22053:(e,t,n)=>{n.d(t,{a:()=>l});var i=n(21728),a=n(50050),s=n(33026),r=n(64917);function l(){let e,t=(0,i.c)(4),n=(0,a.Ud)(d),l=(0,r.I)(o),c=n!==s.kj&&n!==s.qD;if(void 0===l){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={isReadonly:!1,isLoading:!0},t[0]=e):e=t[0],e}if(!1===l){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e={isReadonly:!0,isLoading:!1,reason:"shared"},t[1]=e):e=t[1],e}if(c){let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e={isReadonly:!0,isLoading:!1,reason:"previousVersion"},t[2]=e):e=t[2],e}return t[3]===Symbol.for("react.memo_cache_sentinel")?(e={isReadonly:!1,isLoading:!1},t[3]=e):e=t[3],e}function o(e){return e?.owned}function d(e){return e.version}},22116:(e,t,n)=>{n.d(t,{x:()=>c});var i=n(74848),a=n(21728),s=n(53419),r=n(38621),l=n(84268),o=n(76720),d=n(96540);function c(e){let t,n,c,u,m,h,f=(0,a.c)(8),{regionName:p}=e;return f[0]!==p?(t=()=>{let e=`ERROR_FALLBACK_${p.toUpperCase().replace(/\s+/g,"_")}`;(0,s.BI)("dotcom_chat.activate",{target:e,mode:"immersive",message:`${p} error fallback`})},n=[p],f[0]=p,f[1]=t,f[2]=n):(t=f[1],n=f[2]),(0,d.useEffect)(t,n),f[3]===Symbol.for("react.memo_cache_sentinel")?(c=(0,i.jsx)(o.E.Visual,{children:(0,i.jsx)(r.AlertIcon,{size:"medium"})}),u=(0,i.jsx)(o.E.Heading,{children:"Something went wrong"}),f[3]=c,f[4]=u):(c=f[3],u=f[4]),f[5]===Symbol.for("react.memo_cache_sentinel")?(m=(0,i.jsx)(l.A,{href:"https://support.github.com/",inline:!0,children:"contact support"}),f[5]=m):m=f[5],f[6]!==p?(h=(0,i.jsx)("div",{className:"ErrorFallback-module__errorFallbackContainer--uGjJA",children:(0,i.jsxs)(o.E,{children:[c,u,(0,i.jsxs)(o.E.Description,{children:[p," is temporarily unavailable due to an unknown error. Try reloading the page or, if the error persists,"," ",m,"."]})]})}),f[6]=p,f[7]=h):h=f[7],h}try{c.displayName||(c.displayName="ErrorFallback")}catch{}},24798:(e,t,n)=>{n.d(t,{o:()=>r});var i=n(68273),a=n(21728),s=n(76648);let r=(0,i.Z6)()?function(){let e,t=(0,a.c)(7),n=(0,s.B)()??{};if(n&&"header"in n)return n.header;let{aliveChannel:i,pullRequest:r,bannersData:l,repository:o,urls:d,user:c}=n;return t[0]!==i||t[1]!==l||t[2]!==r||t[3]!==o||t[4]!==d||t[5]!==c?(e={aliveChannel:i,pullRequest:r,bannersData:l,repository:o,urls:d,user:c},t[0]=i,t[1]=l,t[2]=r,t[3]=o,t[4]=d,t[5]=c,t[6]=e):e=t[6],e}:function(){let e=(0,s.B)()??{};if(e&&"header"in e)return e.header;let{aliveChannel:t,pullRequest:n,bannersData:i,repository:a,urls:r,user:l}=e;return{aliveChannel:t,pullRequest:n,bannersData:i,repository:a,urls:r,user:l}}},25506:(e,t,n)=>{n.d(t,{a:()=>s});var i=n(21728),a=n(23967);function s(e){let t,n,s=(0,i.c)(7),{language:r,value:l}=e;s[0]!==r||s[1]!==l?(t=function({language:e,value:t}){var n,i;let s,r=(n=t,/^\t/m.test(n)?"tab":"space");return{indentUnit:function(e,t){if("space"!==t)return 4;{var n;let t=e.match(/^( +)[^*]/im);return void 0!==(n=t?.[1]?.length)&&n>=1&&n<=12?n:2}}(t,r),indentWithTabs:"tab"===r,lineWrapping:(i=e,s=(0,a.vL)(i),s?.wrap??!1)}}({language:r,value:l}),s[0]=r,s[1]=l,s[2]=t):t=s[2];let o=t;return s[3]!==o.indentUnit||s[4]!==o.indentWithTabs||s[5]!==o.lineWrapping?(n={indentUnit:o.indentUnit,indentWithTabs:o.indentWithTabs,lineWrapping:o.lineWrapping},s[3]=o.indentUnit,s[4]=o.indentWithTabs,s[5]=o.lineWrapping,s[6]=n):n=s[6],n}},26956:(e,t,n)=>{n.d(t,{Zf:()=>w});var i=n(74848),a=n(21728),s=n(82156),r=n(34164),l=n(96540);let o="ContentView-module__sectionGrid--unHY4";function d(e){let t,n,s,o,d,u,m=(0,a.c)(15),{children:h,width:f,noHeader:p}=e;if(m[0]!==h){for(let e of(t=[],n=[],l.Children.toArray(h)))l.isValidElement(e)&&e.type===c?t.push(e):n.push(e);m[0]=h,m[1]=t,m[2]=n}else t=m[1],n=m[2];m[3]!==p?(s=(0,r.$)("ContentView-module__contentContainer--q5UcY",{"ContentView-module__noHeader--EociJ":p}),m[3]=p,m[4]=s):s=m[4];let g="small"===f,y="medium"===f;return m[5]!==g||m[6]!==y?(o=(0,r.$)("ContentView-module__content--kzPet",{"ContentView-module__small--r1fwP":g,"ContentView-module__medium--TcCTp":y}),m[5]=g,m[6]=y,m[7]=o):o=m[7],m[8]!==t||m[9]!==n||m[10]!==o?(d=(0,i.jsxs)("div",{className:o,children:[t,n]}),m[8]=t,m[9]=n,m[10]=o,m[11]=d):d=m[11],m[12]!==s||m[13]!==d?(u=(0,i.jsx)("div",{className:"ContentView-module__scrollContainer--_BylN",children:(0,i.jsx)("div",{className:s,children:d})}),m[12]=s,m[13]=d,m[14]=u):u=m[14],u}function c(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("div",{className:"ContentView-module__banner--rgHMe",children:s}),n[0]=s,n[1]=t):t=n[1],t}function u(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("div",{className:"ContentView-module__serviceHeader--DEEHs",children:s}),n[0]=s,n[1]=t):t=n[1],t}function m(e){let t,n,s=(0,a.c)(5),{children:l,className:o}=e;return s[0]!==o?(t=(0,r.$)("ContentView-module__section--avH_l",o),s[0]=o,s[1]=t):t=s[1],s[2]!==l||s[3]!==t?(n=(0,i.jsx)("section",{className:t,children:l}),s[2]=l,s[3]=t,s[4]=n):n=s[4],n}function h(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("h1",{className:"ContentView-module__serviceTitle--PbOYe",children:s}),n[0]=s,n[1]=t):t=n[1],t}function f(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("p",{className:"ContentView-module__serviceDescription--ZNDZz",children:s}),n[0]=s,n[1]=t):t=n[1],t}function p(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("div",{className:"ContentView-module__serviceActions--IucKo",children:s}),n[0]=s,n[1]=t):t=n[1],t}function g(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("h2",{className:"ContentView-module__sectionTitle--MkQwz",children:s}),n[0]=s,n[1]=t):t=n[1],t}function y(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("div",{className:"ContentView-module__sectionGridEmpty--oxnzj",children:s}),n[0]=s,n[1]=t):t=n[1],t}function x(e){let t,n,s,r=(0,a.c)(8),{children:d,loading:c}=e;if(void 0!==c&&c){let e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{className:o,"data-testid":"service-view-skeleton",children:[void 0,void 0,void 0].map(j)}),r[0]=e):e=r[0],e}if(r[1]!==d){let e=l.Children.toArray(d);t=e.find(b),n=e.filter(v),r[1]=d,r[2]=t,r[3]=n}else t=r[2],n=r[3];let u=n;if(0===u.length&&t){let e;return r[4]!==t?(e=(0,i.jsx)(i.Fragment,{children:t}),r[4]=t,r[5]=e):e=r[5],e}return r[6]!==u?(s=(0,i.jsx)("div",{className:o,children:u}),r[6]=u,r[7]=s):s=r[7],s}function v(e){return!(l.isValidElement(e)&&e.type===y)}function b(e){return l.isValidElement(e)&&e.type===y}function j(e,t){return(0,i.jsx)(s.f,{className:"ContentView-module__skeletonCard--e4yHy"},t)}x.Empty=y,m.Title=g,m.Grid=x;let w={Title:h,Description:f,Actions:p,Container:d,Banner:c,Header:u,Section:m};w.displayName="ContentView",d.displayName="ContentView.Container",c.displayName="ContentView.Banner",u.displayName="ContentView.Header",m.displayName="ContentView.Section",h.displayName="ContentView.Title",f.displayName="ContentView.Description",p.displayName="ContentView.Actions",g.displayName="ContentView.Section.Title",x.displayName="ContentView.Section.Grid",y.displayName="ContentView.Section.Grid.Empty"},27011:(e,t,n)=>{n.d(t,{JA:()=>H,YL:()=>K,qL:()=>eo,wI:()=>G,gt:()=>X,xW:()=>z,wL:()=>J,a_:()=>Z,TV:()=>Q,iY:()=>W,wh:()=>em,kN:()=>ef,JR:()=>eh,L3:()=>b,yo:()=>j,HZ:()=>eg,$W:()=>ex,jT:()=>ep,QV:()=>ey,or:()=>ej,I8:()=>eb,l0:()=>L,Ud:()=>D,uh:()=>E,Fm:()=>R,qg:()=>T,mU:()=>A,GR:()=>$,SM:()=>ei,ww:()=>_,it:()=>eu,q6:()=>ew,j5:()=>w,RH:()=>ek,Fl:()=>Y,Lh:()=>F,ne:()=>et,an:()=>el,rP:()=>es,_N:()=>ed,ys:()=>ec,pV:()=>ev,mY:()=>O,Yp:()=>S,Kp:()=>I,r$:()=>N,GK:()=>k,zK:()=>M,mF:()=>B,m9:()=>P,E4:()=>C,CQ:()=>e_,WA:()=>ee,WK:()=>eS,xJ:()=>eI,Nk:()=>eL,_W:()=>ea,Qb:()=>er,BI:()=>en,Mv:()=>eC,gi:()=>eN});var i=n(68273),a=n(21728),s=n(96540),r=n(70466),l=n(59914),o=n(68226),d=n(82603),c=n(71317),u=n(35311);let m="UNABLE_TO_GENERATE",h="NOT_GENERATED_YET";var f=n(69599),p=n(18799);let g={baseOid:void 0,headOid:void 0},y=[],x=[],v={threads:y,annotations:x,commentsPreference:p.sI.Visible},b=(0,i.Z6)()?()=>(0,o.n)(eT):()=>(0,o.n)(e=>e.comparisonInfo),j=(0,i.Z6)()?()=>(0,o.n)(eD):()=>(0,o.n)(e=>e.comparisonInfoActions),w=(0,i.Z6)()?()=>(0,o.n)(eE):()=>(0,o.n)(e=>e.isSingleFileMode),_=(0,i.Z6)()?()=>(0,o.n)(eR):()=>(0,o.n)(e=>"FULL"!==e.comparisonInfo.comparisonView),C=(0,i.Z6)()?()=>(0,o.n)(eA):()=>(0,o.n)(e=>e.comparisonInfo.selectedRange||g),N=(0,i.Z6)()?()=>(0,o.n)(eO):()=>(0,o.n)(e=>e.pullRequest.id),S=(0,i.Z6)()?()=>(0,o.n)(eP):()=>(0,o.n)(e=>e.pullRequest),I=(0,i.Z6)()?()=>(0,o.n)(eF):()=>(0,o.n)(e=>e.pullRequest.basePath);(0,i.Z6)()||(()=>(0,o.n)(e=>e.pullRequestActions));let k=(0,i.Z6)()?()=>(0,o.n)(eM):()=>(0,o.n)(e=>e.repository),L=(0,i.Z6)()?()=>(0,o.n)(e$):()=>(0,o.n)(e=>e.diffSummaries),T=(0,i.Z6)()?()=>(0,o.n)(eB):()=>(0,o.n)(e=>Object.values(e.diffSummaries).length??0),D=(0,i.Z6)()?()=>(0,o.n)(eV):()=>(0,o.n)(e=>e.diffSummariesActions);(0,i.Z6)()||(()=>(0,o.n)((0,l.k)(e=>Object.values(e.diffSummaries).map(e=>e.path))));let E=(0,i.Z6)()?()=>{let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=q([eU],eq,r.x),t[0]=e):e=t[0],(0,o.n)(e)}:()=>(0,o.n)(q([e=>e.diffSummaries],e=>Object.values(e),r.x)),R=(0,i.Z6)()?e=>{let t,n=(0,a.c)(2);return n[0]!==e?(t=t=>t.diffSummaries[e],n[0]=e,n[1]=t):t=n[1],(0,o.n)(t)}:e=>(0,o.n)(t=>t.diffSummaries[e]);(0,i.Z6)(),()=>V().hiddenFiles;let A=((0,i.Z6)(),()=>V().filteredDiffSummaries),O=(0,i.Z6)()?()=>(0,o.n)(eG):()=>(0,o.n)(e=>e.entries),P=(0,i.Z6)()?()=>(0,o.n)(eH):()=>(0,o.n)(e=>e.selectedPathDigest);(0,i.Z6)()||(()=>(0,o.n)(e=>e.progressiveDiffsActions.updateSelectedPathDigest));let F=(0,i.Z6)()?()=>(0,o.n)(eK):()=>(0,o.n)(e=>e.markerAndDiffNavigationActions),M=(0,i.Z6)()?()=>(0,o.n)(eW):()=>(0,o.n)(e=>e.markerAndDiffNavigation.commentId);(0,i.Z6)()||(()=>(0,o.n)(e=>e.markerAndDiffNavigation.getCommentId));let $=(0,i.Z6)()?()=>(0,o.n)(ez):()=>(0,o.n)(e=>e.markerAndDiffNavigation.getMarkerId),B=(0,i.Z6)()?()=>(0,o.n)(eQ):()=>(0,o.n)(e=>e.markerAndDiffNavigation.markerId),V=(0,i.Z6)()?()=>{let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=q([eZ,eJ,eY,eX,e0],e1,r.x),t[0]=e):e=t[0],(0,o.n)(e)}:()=>(0,o.n)(q([e=>e.diffSummaries,e=>e.codeowners,e=>e.diffFilter.state,e=>e.diffFilter.filtersInteractedWith,e=>e.changeGroupGeneration.changeGroups],(e,t,n,i,a)=>{let s=new Map,r=[],l=a.find(e=>e.id===n.activeChangeGroupId),o=l?.hunkPositions?new Set(Object.keys(l.hunkPositions)):void 0;for(let i of Object.values(e)){let e=(0,d.hG)({diffPath:i.path,codeownersData:t}).isOwnedByViewer;U(i,n,e,o)?(r.push(i),s.set(i.path,!1)):s.set(i.path,!0)}if(i){let e=r.length,t=`${e} file${1===e?"":"s"} remain${1===e?"s":""}`;(0,c.k)(t,150)}return{hiddenFiles:s,filteredDiffSummaries:r}},r.x));function U(e,t,n,i){return(!i||!!i.has(e.path))&&e.path.toLowerCase().includes(t.filterText.toLowerCase())&&!t.unselectedFileExtensions.has((0,u.QC)(e.path))&&(t.showDeletedFiles||"REMOVED"!==e.changeType&&"DELETED"!==e.changeType)&&(!t.showOnlyManifestFiles||!!e.isManifestFile)&&(!t.showOnlyOwnedFiles||n)&&(t.showViewedFiles||!e.markedAsViewed)&&(t.showVendoredFiles||!e.isVendored)}function q(e,t,n){let i,a;return s=>{let r=e.map(e=>e(s));if(i&&n(r,i))return a;let l=t(...r);return i=r,a=l,l}}let G=(0,i.Z6)()?()=>(0,o.n)((0,l.k)(e4)):()=>(0,o.n)((0,l.k)(e=>Object.values(e.markers||{}).flatMap(e=>Object.values(e).flatMap(e=>e?.annotations??x)))),H=(0,i.Z6)()?()=>(0,o.n)(e5):()=>(0,o.n)(e=>{let t=e.diffFilter.state.activeChangeGroupId;if(t)return e.changeGroupGeneration.changeGroups.find(e=>e.id===t)}),K=(0,i.Z6)()?()=>(0,o.n)(e6):()=>(0,o.n)(e=>e.diffFilter.state.activeChangeGroupId),W=(0,i.Z6)()?()=>(0,o.n)(e7):()=>(0,o.n)(e=>e.changeGroupGeneration.changeGroups),z=(0,i.Z6)()?()=>(0,o.n)(e8):()=>(0,o.n)(e=>e.changeGroupGeneration),Q=(0,i.Z6)()?()=>(0,o.n)(e9):()=>(0,o.n)(e=>e.changeGroupGeneration.unavailableReason?e.changeGroupGeneration.unavailableReason:e.changeGroupGeneration.changeGroups.length<1&&!e.changeGroupGeneration.latestChangeGroupOrchestration?(0,f.G7)("hide_groups_list_for_few_groups")?h:m:null),Z=(0,i.Z6)()?()=>(0,o.n)(te):()=>(0,o.n)(e=>e.changeGroupGeneration.changeGroupGenerationChannel),J=(0,i.Z6)()?()=>(0,o.n)(tt):()=>(0,o.n)(e=>e.changeGroupGenerationActions),Y=(0,i.Z6)()?()=>(0,o.n)(tn):()=>(0,o.n)(e=>e.changeGroupGeneration.latestChangeGroupOrchestration),X=(0,i.Z6)()?()=>(0,o.n)(ti):()=>(0,o.n)(e=>e.changeGroupGeneration.canAccessChangeGroups),ee=(0,i.Z6)()?()=>(0,o.n)(ta):()=>(0,o.n)(e=>e.showChangeGroupPreference),et=(0,i.Z6)()?e=>{let t,n=(0,a.c)(2);return n[0]!==e?(t=t=>t.markers?.[e],n[0]=e,n[1]=t):t=n[1],(0,o.n)((0,l.k)(t))}:e=>(0,o.n)((0,l.k)(t=>t.markers?.[e])),en=(0,i.Z6)()?e=>{let t,n=(0,a.c)(2);return n[0]!==e?(t=t=>{let n=Object.values(t.markers||{}).flatMap(tr),i=[];if(!e)return n;for(let t of e)if(n){for(let e of n)if(Number(e.id)===t){i.push(e);break}}return i},n[0]=e,n[1]=t):t=n[1],(0,o.n)((0,l.k)(t))}:e=>(0,o.n)((0,l.k)(t=>{let n=Object.values(t.markers||{}).flatMap(e=>Object.values(e).flatMap(e=>e?.threads??y)),i=[];if(!e)return n;for(let t of e)if(n){for(let e of n)if(Number(e.id)===t){i.push(e);break}}return i})),ei=(0,i.Z6)()?()=>(0,o.n)(tl):()=>(0,o.n)(e=>e.getThread),ea=(0,i.Z6)()?(e,t,n)=>{let i,s=(0,a.c)(4);return s[0]!==t||s[1]!==n||s[2]!==e?(i=i=>i.markers?.[t]?.[n]?.threads.find(t=>t.id===e),s[0]=t,s[1]=n,s[2]=e,s[3]=i):i=s[3],(0,o.n)(i)}:(e,t,n)=>(0,o.n)(i=>i.markers?.[t]?.[n]?.threads.find(t=>t.id===e)),es=(0,i.Z6)()?(e,t)=>{let n,i=(0,a.c)(3);return i[0]!==e||i[1]!==t?(n=q([n=>n.markers?.[e]?.[t],to],td,r.x),i[0]=e,i[1]=t,i[2]=n):n=i[2],(0,o.n)(n)}:(e,t)=>(0,o.n)(q([n=>n.markers?.[e]?.[t],e=>e.commentsPreference],(e,t)=>{let n=e?.threads??y,i=e?.annotations??x;return n.length||i.length?{threads:n,annotations:i,commentsPreference:t}:v},r.x)),er=(0,i.Z6)()?e=>{let t,n=(0,a.c)(2);return n[0]!==e?(t=t=>{let n=Object.values(t.markers||{}).flatMap(tu).filter(t=>t&&(!e||e.includes(parseInt(t.id))));return n?n.filter(tm).reduce(th,0):0},n[0]=e,n[1]=t):t=n[1],(0,o.n)(t)}:e=>(0,o.n)(t=>{let n=Object.values(t.markers||{}).flatMap(e=>Object.values(e).flatMap(e=>e?.threads??y)).filter(t=>t&&(!e||e.includes(parseInt(t.id))));return n?n.filter(e=>!e.isResolved&&!e.positioning?.isOutdated).reduce((e,t)=>e+(t.commentsData?.comments?.length??0),0):0}),el=(0,i.Z6)()?()=>(0,o.n)(tf):()=>(0,o.n)(e=>e.markersActions),eo=(0,i.Z6)()?()=>(0,o.n)(tp):()=>(0,o.n)(e=>e.markers),ed=(0,i.Z6)()?()=>(0,o.n)(tg):()=>(0,o.n)(e=>e.pendingReviewActions),ec=(0,i.Z6)()?()=>(0,o.n)(ty):()=>(0,o.n)(e=>e.pendingReview),eu=(0,i.Z6)()?()=>(0,o.n)(tx):()=>(0,o.n)(e=>(e.pendingReview?.pendingReviewIDs?.length??0)>0),em=(0,i.Z6)()?()=>(0,o.n)(tv):()=>(0,o.n)(e=>e.codeownersActions),eh=(0,i.Z6)()?()=>(0,o.n)(tb):()=>(0,o.n)(e=>e.filesCollapsedStatusActions),ef=(0,i.Z6)()?e=>{let t,n=(0,a.c)(2);return n[0]!==e?(t=t=>t.collapsedFilesMap?.[e]??!1,n[0]=e,n[1]=t):t=n[1],(0,o.n)(t)}:e=>(0,o.n)(t=>t.collapsedFilesMap?.[e]??!1),ep=(0,i.Z6)()?e=>{let t,n=(0,a.c)(2);return n[0]!==e?(t=t=>t.diffEntries?.[e]??null,n[0]=e,n[1]=t):t=n[1],(0,o.n)(t)}:e=>(0,o.n)(t=>t.diffEntries?.[e]??null),eg=(0,i.Z6)()?()=>(0,o.n)(tj):()=>(0,o.n)(e=>e.diffEntries);(0,i.Z6)()||(()=>(0,o.n)(e=>Object.keys(e.diffEntries).length));let ey=(0,i.Z6)()?()=>(0,o.n)(tw):()=>(0,o.n)(e=>e.diffEntriesActions),ex=(0,i.Z6)()?e=>{let t,n,i=(0,a.c)(4);i[0]!==e?(t=new Set(e.map(t_)),i[0]=e,i[1]=t):t=i[1];let s=t;return i[2]!==s?(n=e=>e.entries.filter(e=>s.has(e.path)),i[2]=s,i[3]=n):n=i[3],(0,o.n)((0,l.k)(n))}:e=>{let t=(0,s.useMemo)(()=>new Set(e.map(e=>e.path)),[e]);return(0,o.n)((0,l.k)(e=>e.entries.filter(e=>t.has(e.path))))},ev=(0,i.Z6)()?()=>(0,o.n)(tC):()=>(0,o.n)(e=>e.progressiveDiffsActions),eb=(0,i.Z6)()?()=>(0,o.n)(tN):()=>(0,o.n)(e=>e.diffFilter.state),ej=(0,i.Z6)()?()=>(0,o.n)(tS):()=>(0,o.n)(e=>e.diffFilterActions),ew=(0,i.Z6)()?()=>(0,o.n)(tI):()=>(0,o.n)(e=>{let t=e.diffFilter.state;return t.filterText.length>0||t.unselectedFileExtensions.size>0||!0===t.showOnlyOwnedFiles||!1===t.showDeletedFiles||!0===t.showOnlyManifestFiles||!1===t.showVendoredFiles||!1===t.showViewedFiles}),e_=(0,i.Z6)()?()=>(0,o.n)(tk):()=>(0,o.n)(e=>e.settingsActions),eC=(0,i.Z6)()?e=>{let t,n=(0,a.c)(2);return n[0]!==e?(t=t=>t.summariesViewedStatus?.[e]??!1,n[0]=e,n[1]=t):t=n[1],(0,o.n)(t)}:e=>(0,o.n)(t=>t.summariesViewedStatus?.[e]??!1),eN=(0,i.Z6)()?()=>(0,o.n)(tL):()=>(0,o.n)(e=>e.summariesViewedCount),eS=(0,i.Z6)()?()=>(0,o.n)(tT):()=>(0,o.n)(e=>e.suggestionBatch),eI=(0,i.Z6)()?()=>(0,o.n)(tD):()=>(0,o.n)(e=>e.suggestionBatchActions),ek=(0,i.Z6)()?()=>(0,o.n)(tE):()=>(0,o.n)(e=>e.suggestionBatch.isSuggestionBatchPending),eL=(0,i.Z6)()?e=>{let t,n=(0,a.c)(2);return n[0]!==e?(t=t=>t.suggestionBatch.activeBatch.some(t=>t.commentDatabaseId===e.commentDatabaseId&&t.suggestionIndex===e.suggestionIndex),n[0]=e,n[1]=t):t=n[1],(0,o.n)(t)}:e=>(0,o.n)(t=>t.suggestionBatch.activeBatch.some(t=>t.commentDatabaseId===e.commentDatabaseId&&t.suggestionIndex===e.suggestionIndex));function eT(e){return e.comparisonInfo}function eD(e){return e.comparisonInfoActions}function eE(e){return e.isSingleFileMode}function eR(e){return"FULL"!==e.comparisonInfo.comparisonView}function eA(e){return e.comparisonInfo.selectedRange||g}function eO(e){return e.pullRequest.id}function eP(e){return e.pullRequest}function eF(e){return e.pullRequest.basePath}function eM(e){return e.repository}function e$(e){return e.diffSummaries}function eB(e){return Object.values(e.diffSummaries).length??0}function eV(e){return e.diffSummariesActions}function eU(e){return e.diffSummaries}function eq(e){return Object.values(e)}function eG(e){return e.entries}function eH(e){return e.selectedPathDigest}function eK(e){return e.markerAndDiffNavigationActions}function eW(e){return e.markerAndDiffNavigation.commentId}function ez(e){return e.markerAndDiffNavigation.getMarkerId}function eQ(e){return e.markerAndDiffNavigation.markerId}function eZ(e){return e.diffSummaries}function eJ(e){return e.codeowners}function eY(e){return e.diffFilter.state}function eX(e){return e.diffFilter.filtersInteractedWith}function e0(e){return e.changeGroupGeneration.changeGroups}function e1(e,t,n,i,a){let s=new Map,r=[],l=a.find(e=>e.id===n.activeChangeGroupId),o=l?.hunkPositions?new Set(Object.keys(l.hunkPositions)):void 0;for(let i of Object.values(e)){let e=(0,d.hG)({diffPath:i.path,codeownersData:t}).isOwnedByViewer;U(i,n,e,o)?(r.push(i),s.set(i.path,!1)):s.set(i.path,!0)}if(i){let e=r.length,t=`${e} file${1===e?"":"s"} remain${1===e?"s":""}`;(0,c.k)(t,150)}return{hiddenFiles:s,filteredDiffSummaries:r}}function e2(e){return e?.annotations??x}function e3(e){return Object.values(e).flatMap(e2)}function e4(e){return Object.values(e.markers||{}).flatMap(e3)}function e5(e){let t=e.diffFilter.state.activeChangeGroupId;if(t)return e.changeGroupGeneration.changeGroups.find(e=>e.id===t)}function e6(e){return e.diffFilter.state.activeChangeGroupId}function e7(e){return e.changeGroupGeneration.changeGroups}function e8(e){return e.changeGroupGeneration}function e9(e){return e.changeGroupGeneration.unavailableReason?e.changeGroupGeneration.unavailableReason:e.changeGroupGeneration.changeGroups.length<1&&!e.changeGroupGeneration.latestChangeGroupOrchestration?(0,f.G7)("hide_groups_list_for_few_groups")?h:m:null}function te(e){return e.changeGroupGeneration.changeGroupGenerationChannel}function tt(e){return e.changeGroupGenerationActions}function tn(e){return e.changeGroupGeneration.latestChangeGroupOrchestration}function ti(e){return e.changeGroupGeneration.canAccessChangeGroups}function ta(e){return e.showChangeGroupPreference}function ts(e){return e?.threads??y}function tr(e){return Object.values(e).flatMap(ts)}function tl(e){return e.getThread}function to(e){return e.commentsPreference}function td(e,t){let n=e?.threads??y,i=e?.annotations??x;return n.length||i.length?{threads:n,annotations:i,commentsPreference:t}:v}function tc(e){return e?.threads??y}function tu(e){return Object.values(e).flatMap(tc)}function tm(e){return!e.isResolved&&!e.positioning?.isOutdated}function th(e,t){return e+(t.commentsData?.comments?.length??0)}function tf(e){return e.markersActions}function tp(e){return e.markers}function tg(e){return e.pendingReviewActions}function ty(e){return e.pendingReview}function tx(e){return(e.pendingReview?.pendingReviewIDs?.length??0)>0}function tv(e){return e.codeownersActions}function tb(e){return e.filesCollapsedStatusActions}function tj(e){return e.diffEntries}function tw(e){return e.diffEntriesActions}function t_(e){return e.path}function tC(e){return e.progressiveDiffsActions}function tN(e){return e.diffFilter.state}function tS(e){return e.diffFilterActions}function tI(e){let t=e.diffFilter.state;return t.filterText.length>0||t.unselectedFileExtensions.size>0||!0===t.showOnlyOwnedFiles||!1===t.showDeletedFiles||!0===t.showOnlyManifestFiles||!1===t.showVendoredFiles||!1===t.showViewedFiles}function tk(e){return e.settingsActions}function tL(e){return e.summariesViewedCount}function tT(e){return e.suggestionBatch}function tD(e){return e.suggestionBatchActions}function tE(e){return e.suggestionBatch.isSuggestionBatchPending}},28177:(e,t,n)=>{n.d(t,{n:()=>r});var i=n(74848),a=n(21728),s=n(38621);function r(e){let t,n=(0,a.c)(3);if("existing-issue"===e.type){if("open"===e.state){let e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(s.IssueOpenedIcon,{className:"fgColor-open"}),n[0]=e):e=n[0],e}if("closed"===e.state){let e;return n[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(s.IssueClosedIcon,{className:"fgColor-done"}),n[1]=e):e=n[1],e}}return n[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(s.IssueDraftIcon,{className:"fgColor-draft"}),n[2]=t):t=n[2],t}try{r.displayName||(r.displayName="IssueIcon")}catch{}},30388:(e,t,n)=>{n.d(t,{qJ:()=>N});var i=n(74848),a=n(21728),s=n(96540),r=n(34164),l=n(61526),o=n(40090);let d="ListBlock-module__list--YHbt4",c="ListBlock-module__item--xlbmd",u="ListBlock-module__itemContent--cacSg",m="ListBlock-module__itemClickable--AFcjc";function h(e){let t,n,s=(0,a.c)(5),{children:l,className:o}=e;return s[0]!==o?(t=(0,r.$)("ListBlock-module__container--QbgMo",o),s[0]=o,s[1]=t):t=s[1],s[2]!==l||s[3]!==t?(n=(0,i.jsx)("div",{className:t,children:l}),s[2]=l,s[3]=t,s[4]=n):n=s[4],n}function f(e){let t,n,s=(0,a.c)(5),{children:l,className:o}=e;return s[0]!==o?(t=(0,r.$)("ListBlock-module__header--meKIf",o),s[0]=o,s[1]=t):t=s[1],s[2]!==l||s[3]!==t?(n=(0,i.jsx)("div",{className:t,children:l}),s[2]=l,s[3]=t,s[4]=n):n=s[4],n}function p(e){let t,n,s,r,l=(0,a.c)(11);if(l[0]!==e?({children:t,loading:s,...n}=e,l[0]=e,l[1]=t,l[2]=n,l[3]=s):(t=l[1],n=l[2],s=l[3]),void 0!==s&&s){let e,t;return l[4]===Symbol.for("react.memo_cache_sentinel")?(e=[void 0,void 0,void 0,void 0,void 0].map(g),l[4]=e):e=l[4],l[5]!==n||l[6]!==e?(t=(0,i.jsx)("ul",{className:d,"data-testid":"list-block-skeleton",...n,children:e}),l[5]=n,l[6]=e,l[7]=t):t=l[7],t}return l[8]!==t||l[9]!==n?(r=(0,i.jsx)("ul",{className:d,...n,children:t}),l[8]=t,l[9]=n,l[10]=r):r=l[10],r}function g(e,t){return(0,i.jsx)(v,{},t)}function y(e){let t,n,o,d=(0,a.c)(47),h=null,f=null,p=null,g=null,y=null;if(d[0]!==e.children){for(let t of s.Children.toArray(e.children))s.isValidElement(t)&&(t.type===b?h=t:t.type===j?f=t:t.type===w?p=t:t.type===_?g=t:t.type===x&&(y=t));d[0]=e.children,d[1]=h,d[2]=f,d[3]=p,d[4]=g,d[5]=y}else h=d[1],f=d[2],p=d[3],g=d[4],y=d[5];d[6]!==p||d[7]!==h||d[8]!==g||d[9]!==f?(t=(0,i.jsxs)(i.Fragment,{children:[h,f,p,g]}),d[6]=p,d[7]=h,d[8]=g,d[9]=f,d[10]=t):t=d[10];let v=t;if("href"in e){let t,n,a,s,o,h;if(d[11]!==e?({href:t,isExternalLink:a,...n}=e,d[11]=e,d[12]=t,d[13]=n,d[14]=a):(t=d[12],n=d[13],a=d[14]),void 0!==a&&a){let e,a,s;return d[15]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.$)(u,m),d[15]=e):e=d[15],d[16]!==v||d[17]!==t||d[18]!==n?(a=(0,i.jsx)("a",{href:t,className:e,target:"_self",rel:"noopener noreferrer",...n,children:v}),d[16]=v,d[17]=t,d[18]=n,d[19]=a):a=d[19],d[20]!==y||d[21]!==a?(s=(0,i.jsxs)("li",{className:c,children:[a,y]}),d[20]=y,d[21]=a,d[22]=s):s=d[22],s}return d[23]===Symbol.for("react.memo_cache_sentinel")?(s=(0,r.$)(u,m),d[23]=s):s=d[23],d[24]!==v||d[25]!==t||d[26]!==n?(o=(0,i.jsx)(l.N_,{...n,to:t,className:s,children:v}),d[24]=v,d[25]=t,d[26]=n,d[27]=o):o=d[27],d[28]!==y||d[29]!==o?(h=(0,i.jsxs)("li",{className:c,children:[o,y]}),d[28]=y,d[29]=o,d[30]=h):h=d[30],h}if("onClick"in e){let t,n,a,s,l;return d[31]!==e?({onClick:t,...n}=e,d[31]=e,d[32]=t,d[33]=n):(t=d[32],n=d[33]),d[34]===Symbol.for("react.memo_cache_sentinel")?(a=(0,r.$)(u,m),d[34]=a):a=d[34],d[35]!==v||d[36]!==t||d[37]!==n?(s=(0,i.jsx)("button",{...n,className:a,onClick:t,children:v}),d[35]=v,d[36]=t,d[37]=n,d[38]=s):s=d[38],d[39]!==y||d[40]!==s?(l=(0,i.jsxs)("li",{className:c,children:[s,y]}),d[39]=y,d[40]=s,d[41]=l):l=d[41],l}return d[42]!==v?(n=(0,i.jsx)("div",{className:u,children:v}),d[42]=v,d[43]=n):n=d[43],d[44]!==y||d[45]!==n?(o=(0,i.jsxs)("li",{className:c,children:[n,y]}),d[44]=y,d[45]=n,d[46]=o):o=d[46],o}function x(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("div",{className:"ListBlock-module__actions--LfUWo",children:s}),n[0]=s,n[1]=t):t=n[1],t}function v(){let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("li",{className:c,children:(0,i.jsx)("div",{className:"ListBlock-module__skeletonItem--ZfJMT",children:(0,i.jsx)(o.r,{lines:2})})}),t[0]=e):e=t[0],e}function b(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("div",{className:"ListBlock-module__leadingVisual--tOjGr",children:s}),n[0]=s,n[1]=t):t=n[1],t}function j(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("h3",{className:"ListBlock-module__title--MZAST",children:s}),n[0]=s,n[1]=t):t=n[1],t}function w(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("div",{className:"ListBlock-module__description--dTYnl",children:s}),n[0]=s,n[1]=t):t=n[1],t}function _(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("div",{className:"ListBlock-module__metadata--gtl9k",children:s}),n[0]=s,n[1]=t):t=n[1],t}function C(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("li",{className:"ListBlock-module__emptyState--MymTD",children:s}),n[0]=s,n[1]=t):t=n[1],t}y.LeadingVisual=b,y.Title=j,y.Description=w,y.SecondaryDescription=_,y.Metadata=_,y.Actions=x,y.Skeleton=v;let N=h;N.Header=f,N.List=p,N.Item=y,N.EmptyState=C,N.displayName="ListBlock",f.displayName="ListBlock.Header",p.displayName="ListBlock.List",y.displayName="ListBlock.Item",b.displayName="ListBlock.Item.LeadingVisual",j.displayName="ListBlock.Item.Title",w.displayName="ListBlock.Item.Description",_.displayName="ListBlock.Item.Metadata",x.displayName="ListBlock.Item.Actions",v.displayName="ListBlock.Item.Skeleton",C.displayName="ListBlock.EmptyState";try{h.displayName||(h.displayName="ListBlock")}catch{}},31629:(e,t,n)=>{function i(e){return"github-graphql"===e.type}function a(e){return"loop"===e.type}function s(e){return"text"===e.type}n.d(t,{Tm:()=>i,ir:()=>s,jq:()=>a})},31675:(e,t,n)=>{n.d(t,{A:()=>i});let i={"hide-on-mobile":"responsive-module__hide-on-mobile--lWlU1","hide-on-desktop":"responsive-module__hide-on-desktop--op38F","hide-on-small":"responsive-module__hide-on-small--oDr47","hide-on-medium-up":"responsive-module__hide-on-medium-up--imsgz"}},33026:(e,t,n)=>{n.d(t,{U8:()=>s,kj:()=>i,qD:()=>a});let i="draft",a="latest",s=i},33195:(e,t,n)=>{n.d(t,{u:()=>u});var i=n(74848),a=n(68273),s=n(21728),r=n(46589),l=n(96540),o=n(34164);let d="PullRequestStateLabel-module__unlisted--pcrfP";var c=n(33578);let u=(0,a.Z6)()?function(e){let t,n,a=(0,s.c)(7),{className:l,state:u}=e,h=c.a[u];if(u===c.Q.Unlisted){let e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsxs)("span",{className:d,children:[(0,i.jsx)(m,{})," Unlisted"]}),a[0]=e):e=a[0],e}a[1]!==l?(t=(0,o.$)("flex-self-start",l),a[1]=l,a[2]=t):t=a[2];let f=h.status;return a[3]!==h.description||a[4]!==t||a[5]!==f?(n=(0,i.jsx)(r.A,{className:t,status:f,children:h.description}),a[3]=h.description,a[4]=t,a[5]=f,a[6]=n):n=a[6],n}:function({className:e,state:t}){let n=(0,l.useMemo)(()=>c.a[t],[t]);return t===c.Q.Unlisted?(0,i.jsxs)("span",{className:d,children:[(0,i.jsx)(m,{})," Unlisted"]}):(0,i.jsx)(r.A,{className:(0,o.$)("flex-self-start",e),status:n.status,children:n.description})},m=(0,a.Z6)()?function(){let e,t=(0,s.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",fill:"currentColor",children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.5 3.25C2.5 2.83579 2.83579 2.5 3.25 2.5C3.66421 2.5 4 2.83579 4 3.25C4 3.66421 3.66421 4 3.25 4C2.83579 4 2.5 3.66421 2.5 3.25ZM3.25 1C2.00736 1 1 2.00736 1 3.25C1 4.22966 1.62611 5.06309 2.5 5.37197V10.628C1.62611 10.9369 1 11.7703 1 12.75C1 13.9926 2.00736 15 3.25 15C4.49264 15 5.5 13.9926 5.5 12.75C5.5 11.7703 4.87389 10.9369 4 10.628V5.37197C4.87389 5.06309 5.5 4.22966 5.5 3.25C5.5 2.00736 4.49264 1 3.25 1ZM3.25 12C2.83579 12 2.5 12.3358 2.5 12.75C2.5 13.1642 2.83579 13.5 3.25 13.5C3.66421 13.5 4 13.1642 4 12.75C4 12.3358 3.66421 12 3.25 12Z"}),(0,i.jsx)("path",{d:"M14 7.5C14 8.19036 13.3844 8.75 12.625 8.75C11.8656 8.75 11.25 8.19036 11.25 7.5C11.25 6.80964 11.8656 6.25 12.625 6.25C13.3844 6.25 14 6.80964 14 7.5Z"}),(0,i.jsx)("path",{d:"M14 2.75C14 3.44036 13.3844 4 12.625 4C11.8656 4 11.25 3.44036 11.25 2.75C11.25 2.05964 11.8656 1.5 12.625 1.5C13.3844 1.5 14 2.05964 14 2.75Z"}),(0,i.jsx)("path",{d:"M10.2197 10.7197C10.5126 10.4268 10.9874 10.4268 11.2803 10.7197L14.2803 13.7197C14.5732 14.0126 14.5732 14.4874 14.2803 14.7803C13.9874 15.0732 13.5126 15.0732 13.2197 14.7803L10.2197 11.7803C9.92683 11.4874 9.92683 11.0126 10.2197 10.7197Z"})]}),t[0]=e):e=t[0],e}:function(){return(0,i.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",fill:"currentColor",children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.5 3.25C2.5 2.83579 2.83579 2.5 3.25 2.5C3.66421 2.5 4 2.83579 4 3.25C4 3.66421 3.66421 4 3.25 4C2.83579 4 2.5 3.66421 2.5 3.25ZM3.25 1C2.00736 1 1 2.00736 1 3.25C1 4.22966 1.62611 5.06309 2.5 5.37197V10.628C1.62611 10.9369 1 11.7703 1 12.75C1 13.9926 2.00736 15 3.25 15C4.49264 15 5.5 13.9926 5.5 12.75C5.5 11.7703 4.87389 10.9369 4 10.628V5.37197C4.87389 5.06309 5.5 4.22966 5.5 3.25C5.5 2.00736 4.49264 1 3.25 1ZM3.25 12C2.83579 12 2.5 12.3358 2.5 12.75C2.5 13.1642 2.83579 13.5 3.25 13.5C3.66421 13.5 4 13.1642 4 12.75C4 12.3358 3.66421 12 3.25 12Z"}),(0,i.jsx)("path",{d:"M14 7.5C14 8.19036 13.3844 8.75 12.625 8.75C11.8656 8.75 11.25 8.19036 11.25 7.5C11.25 6.80964 11.8656 6.25 12.625 6.25C13.3844 6.25 14 6.80964 14 7.5Z"}),(0,i.jsx)("path",{d:"M14 2.75C14 3.44036 13.3844 4 12.625 4C11.8656 4 11.25 3.44036 11.25 2.75C11.25 2.05964 11.8656 1.5 12.625 1.5C13.3844 1.5 14 2.05964 14 2.75Z"}),(0,i.jsx)("path",{d:"M10.2197 10.7197C10.5126 10.4268 10.9874 10.4268 11.2803 10.7197L14.2803 13.7197C14.5732 14.0126 14.5732 14.4874 14.2803 14.7803C13.9874 15.0732 13.5126 15.0732 13.2197 14.7803L10.2197 11.7803C9.92683 11.4874 9.92683 11.0126 10.2197 10.7197Z"})]})};try{u.displayName||(u.displayName="PullRequestStateLabel")}catch{}try{m.displayName||(m.displayName="GitPullRequestUnlistedSvg")}catch{}},33578:(e,t,n)=>{n.d(t,{Q:()=>i,a:()=>a});let i={Open:"OPEN",Closed:"CLOSED",Merged:"MERGED",Queued:"QUEUED",Draft:"DRAFT",Unlisted:"UNLISTED"},a={[i.Open]:{description:"Open",status:"pullOpened"},[i.Closed]:{description:"Closed",status:"pullClosed"},[i.Queued]:{description:"Queued",status:"pullQueued"},[i.Merged]:{description:"Merged",status:"pullMerged"},[i.Draft]:{description:"Draft",status:"draft"},[i.Unlisted]:{description:"Unlisted",status:"unlisted"}}},33644:(e,t,n)=>{n.d(t,{A:()=>i});let i={stickyHeader:"use-sticky-header-module__stickyHeader--UQFpz"}},34031:(e,t,n)=>{n.d(t,{M:()=>r});var i=n(74848),a=n(21728),s=n(74807);function r(e){let t,n,r,l,o=(0,a.c)(8),{isRunning:d,messages:c}=e;o[0]===Symbol.for("react.memo_cache_sentinel")?(t={running:"Running...",waiting:"Waiting..."},o[0]=t):t=o[0];let u=t,m=c||u,h=d?m.running:m.waiting,f=d?"thinking":"static";return o[1]!==f?(n=(0,i.jsx)(s.N,{animationType:f,loopAnimation:!0}),o[1]=f,o[2]=n):n=o[2],o[3]!==h?(r=(0,i.jsx)("div",{className:"RunningDisplay-module__text--nICc0",children:h}),o[3]=h,o[4]=r):r=o[4],o[5]!==n||o[6]!==r?(l=(0,i.jsxs)("div",{className:"RunningDisplay-module__container--dUZ8X",children:[n,r]}),o[5]=n,o[6]=r,o[7]=l):l=o[7],l}try{r.displayName||(r.displayName="RunningDisplay")}catch{}},34261:(e,t,n)=>{n.d(t,{W:()=>u,f:()=>c});var i=n(68273),a=n(21728),s=n(65510),r=n(20622),l=n(53885),o=n(96379),d=n(50129);let c=(0,i.Z6)()?function(){let e,t=(0,a.c)(2),{basePageDataUrl:n}=(0,d.Yu)(),i=`basePageDataURL:${n}`;return t[0]!==i?(e=[r.uT.header,i],t[0]=i,t[1]=e):e=t[1],e}:function(){let{basePageDataUrl:e}=(0,d.Yu)();return[r.uT.header,`basePageDataURL:${e}`]},u=(0,i.Z6)()?function(e){let t,n,i=(0,a.c)(6),d=(0,l.e)(r.uT.header),u=c();return i[0]!==d?(t=async()=>{let e=await (0,o.QJ)(d);if(!e.ok)throw Error(`HTTP ${e.status}`);return await e.json()},i[0]=d,i[1]=t):t=i[1],i[2]!==e||i[3]!==u||i[4]!==t?(n={queryKey:u,queryFn:t,initialData:e,staleTime:1/0},i[2]=e,i[3]=u,i[4]=t,i[5]=n):n=i[5],(0,s.U)(n)}:function(e){let t=(0,l.e)(r.uT.header),n=c();return(0,s.U)({queryKey:n,queryFn:async()=>{let e=await (0,o.QJ)(t);if(!e.ok)throw Error(`HTTP ${e.status}`);return await e.json()},initialData:e,staleTime:1/0})}},35104:(e,t,n)=>{n.d(t,{W:()=>c,Y:()=>d});var i=n(21728),a=n(2635),s=n(33592),r=n(51213),l=n(72303),o=n(53419);function d(e){let t,n,d=(0,i.c)(6),c=(0,s.b)(),u=(0,a.Pk)();d[0]!==c||d[1]!==e||d[2]!==u?(t=async()=>{let t=e.name||e.tag;(0,o.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_DRAFT_ISSUE",mode:"immersive",threadId:(0,l.W)(u)?.id});let n={type:"text",name:`timeline-event: {"type": "planning-task-draft-issue", "markdownContent": "Drafting task '${t}' as an issue..."}`},i=e.repository?` in repository ${e.repository}`:"",a=`
Create a draft issue using the content of the ${e.tag} task${i}.
`;await c.sendChatMessage({thread:(0,l.W)(u),content:a,references:[n],topic:u.currentTopic,context:u.context,customInstructions:u.customInstructions,model:u.model,intent:r.wh.planningAgent})},d[0]=c,d[1]=e,d[2]=u,d[3]=t):t=d[3];let m=t;return d[4]!==m?(n={convertToDraftIssue:m},d[4]=m,d[5]=n):n=d[5],n}function c(e){let t,n,d=(0,i.c)(6),c=(0,s.b)(),u=(0,a.Pk)();d[0]!==c||d[1]!==u||d[2]!==e?(t=async()=>{(0,o.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_DRAFT_ALL_ISSUES",mode:"immersive",threadId:(0,l.W)(u)?.id});let t=`
Create draft issues for all tasks with the following tags: ${e.join(", ")}.
The tasks should be filed under a new parent issue. If the tasklist has a title, use that as the parent issue title.
`;await c.sendChatMessage({thread:(0,l.W)(u),content:t,references:[{type:"text",name:'timeline-event: {"type": "planning-task-draft-issue", "markdownContent": "Drafting all tasks as issues..."}'}],topic:u.currentTopic,context:u.context,customInstructions:u.customInstructions,model:u.model,intent:r.wh.planningAgent})},d[0]=c,d[1]=u,d[2]=e,d[3]=t):t=d[3];let m=t;return d[4]!==m?(n={convertAllToDraftIssues:m},d[4]=m,d[5]=n):n=d[5],n}},36296:(e,t,n)=>{n.d(t,{h:()=>o});var i=n(21728),a=n(8108),s=n(97665),r=n(93161),l=n(48057);function o(){let e,t=(0,i.c)(5),{mutateAsync:n}=(0,a.bB)(),{mutateAsync:o}=(0,a.e9)(),{mutateAsync:d}=(0,a._g)(),c=(0,s.jE)();return t[0]!==c||t[1]!==d||t[2]!==o||t[3]!==n?(e={createProgressHandler:(e,t)=>async i=>{switch(i.type){case"UPDATE_NODE_VALUE":await n({nodeID:i.nodeID,value:i.value,loopID:e,version:t});break;case"UPDATE_NODE_VALUE_PARTIAL":{let n=(0,l.wu)(e,t),a=c.getQueryData(n);if(a){let e={...a,nodes:{...a.nodes,[i.nodeID]:{...a.nodes[i.nodeID]??r.D,value:i.value}}};c.setQueryData(n,e)}break}case"UPDATE_NODE_ERROR":await o({nodeID:i.nodeID,error:i.error,loopID:e,version:t});break;case"SET_RUNNING":await d({nodeID:i.nodeID,loopID:e,version:t})}}},t[0]=c,t[1]=d,t[2]=o,t[3]=n,t[4]=e):e=t[4],e}},36472:(e,t,n)=>{n.d(t,{A:()=>s});var i=n(13083),a=n(3038);function s({selectedLineRange:e,leftLines:t,rightLines:n}){let s=!!n,{startOrientation:r,endOrientation:l}=e,o=m(r).findIndex(t=>(0,a.a2)(t,e.startLineNumber,e.startOrientation)),d=m(l).findIndex(t=>(0,a.a2)(t,e.endLineNumber,e.endOrientation)),c=o>=0&&d>=0;function u(e){if(!c||(0,a.Po)(e))return!1;let t=m((0,i.XU)(e.type)).indexOf(e);return t>=o&&t<=d}function m(e){var a;return s&&"left"!==("string"==typeof(a=e)?a:(0,i.XU)(a.type))?n:t}let h=m("left").filter(e=>u(e));return{selectedRightLines:m("right").filter(e=>u(e)),selectedLeftLines:h}}},36729:(e,t,n)=>{n.d(t,{Vv:()=>a,Wr:()=>s,zW:()=>i});let i="FILE",a="empty-diff-line",s={Line:"line",Multiline:"multiline",File:"file"}},36903:(e,t,n)=>{n.d(t,{K3:()=>a,L2:()=>r,as:()=>s});var i=n(21728);function a(e){let t,n,a,s,r=(0,i.c)(12);if(r[0]!==e.language||r[1]!==e.value){let i,s,l=new Blob([e.value]).size;r[5]===Symbol.for("react.memo_cache_sentinel")?(i=new Set(["markdown","html"]),r[5]=i):i=r[5];let o=i;r[6]!==e.value?(s=e.value.split(`
`),r[6]=e.value,r[7]=s):s=r[7],t=s.length,n=o.has(e.language),a=function(e){if(0===e)return"0 bytes";if(1===e)return"1 byte";let t=Math.floor(Math.log(e)/Math.log(1024));return`${Math.round(e/Math.pow(1024,t))} ${["bytes","KB","MB","GB","TB"][t]}`}(l),r[0]=e.language,r[1]=e.value,r[2]=t,r[3]=n,r[4]=a}else t=r[2],n=r[3],a=r[4];return r[8]!==t||r[9]!==n||r[10]!==a?(s={linesOfCode:t,isPreviewable:n,size:a},r[8]=t,r[9]=n,r[10]=a,r[11]=s):s=r[11],s}function s(e){try{let t=new URL(e,window.location.origin);if(t.origin!==window.location.origin)return null;let n=t.pathname.split("/").filter(Boolean);if(n.length<4)return null;let i=n[0],a=n[1];if(!i||!a)return null;let s=n.slice(4).join("/");return{repoOwner:i,repoName:a,filePath:s}}catch{return null}}function r(e,t,n){return`${e} / ${t} / ${n.split("/").join(" / ")}`}},37212:(e,t,n)=>{n.d(t,{Bz:()=>r,NP:()=>l});var i=n(68273),a=n(99279),s=n(86320);n(13360);let r=a.G.createQueryRouteConfig("pullRequestsCommitsRoute",{path:"/:owner/:repo/pull/:pr_number/commits",queries:[(0,s.Y)()]});function l(){return r.queries.mainQuery.makeQueryKey()}(0,i.Z6)()},37510:(e,t,n)=>{n.d(t,{S:()=>a});var i=n(46996);function a(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;let n={title:e.title,description:e.description,nodes:e.nodes},a={title:t.title,description:t.description,nodes:t.nodes};return(0,i.A)(n,a)}},37673:(e,t,n)=>{n.d(t,{K:()=>c});var i=n(74848),a=n(21728),s=n(88752),r=n(96540),l=n(62828),o=n(7812),d=n(1747);function c(e){let t,n,c,u,m,h=(0,a.c)(20),{className:f,messageId:p,messageIndex:g,messageTimestamp:y,references:x,size:v}=e;h[0]!==p||h[1]!==g||h[2]!==y?(t={messageId:p,messageIndex:g,messageTimestamp:y},h[0]=p,h[1]=g,h[2]=y,h[3]=t):t=h[3];let b=(0,l.I)(t),{updateItem:j,versionedItems:w}=(0,d.xx)();return h[4]!==p||h[5]!==g||h[6]!==y||h[7]!==x||h[8]!==j?(n=()=>{for(let e of x){let t=(0,o.oR)({ref:e,messageIndex:void 0!==g?g:1,messageId:p,timestamp:y});null!=t&&j(t)}},c=[p,g,y,x,j],h[4]=p,h[5]=g,h[6]=y,h[7]=x,h[8]=j,h[9]=n,h[10]=c):(n=h[9],c=h[10]),(0,r.useEffect)(n,c),h[11]!==g||h[12]!==w?(u=e=>(0,o.wt)(e,g,w),h[11]=g,h[12]=w,h[13]=u):u=h[13],h[14]!==f||h[15]!==b||h[16]!==x||h[17]!==v||h[18]!==u?(m=(0,i.jsx)(s.t2,{references:x,onClickReference:b,size:v,className:f,getReferenceVersion:u}),h[14]=f,h[15]=b,h[16]=x,h[17]=v,h[18]=u,h[19]=m):m=h[19],m}try{c.displayName||(c.displayName="ChatMessageReferences")}catch{}},38447:(e,t,n)=>{n.d(t,{p:()=>y,E:()=>g});var i=n(74848),a=n(21728),s=n(25641),r=n(35247),l=n(38621),o=n(96540),d=n(37673),c=n(7812),u=n(1747),m=n(80947);let h="TimelineEvents-module__icon--E6IJb",f="TimelineEvents-module__situationalTimelineEvent--WTQlM TimelineEvents-module__timelineEvent--FV3V3";function p(e){return"text"===e.type&&null!=e.name&&e.name.startsWith("timeline-event:")}function g(e,t){return e.references?.some(e=>p(e)&&(void 0===t||t?.some(t=>e.name.startsWith(`timeline-event: {"type": "${t}"`))))??!1}function y(e){let t,n,s,r=(0,a.c)(10),{message:l,messageIndex:o,isViewingSharedThread:d,isSharedMessage:c,isLatestMessage:u}=e;return r[0]!==l||r[1]!==o?(t=g(l)&&(0,i.jsx)(x,{message:l,messageIndex:o}),r[0]=l,r[1]=o,r[2]=t):t=r[2],r[3]!==u||r[4]!==c||r[5]!==d?(n=(0,i.jsx)(b,{isViewingSharedThread:d,isSharedMessage:c,isLatestMessage:u}),r[3]=u,r[4]=c,r[5]=d,r[6]=n):n=r[6],r[7]!==t||r[8]!==n?(s=(0,i.jsxs)(i.Fragment,{children:[t,n]}),r[7]=t,r[8]=n,r[9]=s):s=r[9],s}function x(e){let t,n,r,f,p,g,y,x=(0,a.c)(24),{message:b,messageIndex:j}=e,{updateItem:w}=(0,u.xx)();if(x[0]!==b.createdAt||x[1]!==b.id||x[2]!==b.references||x[3]!==j||x[4]!==w?(t=()=>{if(b.references)for(let e of b.references){let t=(0,c.oR)({ref:e,messageIndex:j,messageId:b.id,timestamp:b.createdAt});null!=t&&w(t)}},n=[b.references,b.id,j,b.createdAt,w],x[0]=b.createdAt,x[1]=b.id,x[2]=b.references,x[3]=j,x[4]=w,x[5]=t,x[6]=n):(t=x[5],n=x[6]),(0,o.useEffect)(t,n),x[7]!==b.references){r=Symbol.for("react.early_return_sentinel");e:{let e=b.references?.filter(v);if(!e){r=void 0;break e}for(let t of(f=[],e)){let e=JSON.parse(t.name.replace("timeline-event: ","")),n=t.icon||l.CheckIcon;f.push({type:e.type,markdownContent:e.markdownContent,icon:n})}}x[7]=b.references,x[8]=r,x[9]=f}else r=x[8],f=x[9];return r!==Symbol.for("react.early_return_sentinel")?r:(x[10]!==b.createdAt||x[11]!==b.id||x[12]!==b.references||x[13]!==j?(p=b.references&&b.references.length>0&&(0,i.jsx)(d.K,{className:"TimelineEvents-module__references--lv7xz ChatMessage-module__references--Pi5OH",messageId:b.id,messageTimestamp:b.createdAt,messageIndex:j,references:b.references,size:"medium"}),x[10]=b.createdAt,x[11]=b.id,x[12]=b.references,x[13]=j,x[14]=p):p=x[14],x[15]!==b.content||x[16]!==b.createdAt||x[17]!==b.id||x[18]!==j||x[19]!==f?(g=f.map(e=>{let{type:t,markdownContent:n,icon:a}=e;return(0,i.jsxs)("div",{className:"TimelineEvents-module__timelineEvent--FV3V3",children:[(0,i.jsx)(a,{className:h}),(0,i.jsx)(m.G,{autoOpenPreviewPane:!1,markdown:n,messageId:b.id,messageIndex:j,messageTimestamp:b.createdAt,accessibleHeader:(0,s.hV)("Timeline",b.content??"")})]},t)}),x[15]=b.content,x[16]=b.createdAt,x[17]=b.id,x[18]=j,x[19]=f,x[20]=g):g=x[20],x[21]!==p||x[22]!==g?(y=(0,i.jsxs)(i.Fragment,{children:[p,g]}),x[21]=p,x[22]=g,x[23]=y):y=x[23],y)}function v(e){return p(e)}function b(e){let t,n,s,o=(0,a.c)(9),{isSharedMessage:d,isViewingSharedThread:c,isLatestMessage:u}=e;return o[0]!==d||o[1]!==c?(t=d&&!c&&(0,i.jsxs)("div",{className:f,children:[(0,i.jsx)(l.LinkIcon,{className:h})," Messages up to this point are included in shared link"]}),o[0]=d,o[1]=c,o[2]=t):t=o[2],o[3]!==u||o[4]!==c?(n=u&&r.W.copilotDuplicateThread&&c&&(0,i.jsxs)("div",{className:f,children:[(0,i.jsx)(l.RepoForkedIcon,{className:h})," Messages beyond this point will start a new private chat"]}),o[3]=u,o[4]=c,o[5]=n):n=o[5],o[6]!==t||o[7]!==n?(s=(0,i.jsxs)(i.Fragment,{children:[t,n]}),o[6]=t,o[7]=n,o[8]=s):s=o[8],s}try{y.displayName||(y.displayName="TimelineEvents")}catch{}try{x.displayName||(x.displayName="UserMessageTimelineEvent")}catch{}try{b.displayName||(b.displayName="SituationalTimelineEvents")}catch{}},38598:(e,t,n)=>{n.d(t,{i:()=>a,t:()=>i});let i=400,a="/favicons/favicon-copilot.svg"},39029:(e,t,n)=>{n.d(t,{G:()=>c,og:()=>d});var i=n(68273),a=n(21728),s=n(40235),r=n(70170),l=n(70263),o=n(96540);let d=(0,i.Z6)()?function(e,t,n,i){c(e,t,n,i)}:function(e,t,n,i){c(e,t,n,i)},c=(0,i.Z6)()?function(e,t,n,i){let o,d,c,u=(0,a.c)(9),m=(0,l.A)();u[0]!==t||u[1]!==m?(o=()=>{m()&&t()},u[0]=t,u[1]=m,u[2]=o):o=u[2];let h=i??2e3;u[3]!==o||u[4]!==h?(d=(0,r.n)(o,h),u[3]=o,u[4]=h,u[5]=d):d=u[5];let f=d;u[6]!==f||u[7]!==n?(c=e=>{if(n&&e.event_updates)for(let[t,i]of Object.entries(n))!!e.event_updates[t]==!!i&&window.setTimeout(f,e.wait||0);else window.setTimeout(f,e.wait||0)},u[6]=f,u[7]=n,u[8]=c):c=u[8];let p=c;(0,s.x)(e,p)}:function(e,t,n,i){let a=(0,l.A)(),d=(0,o.useMemo)(()=>(0,r.n)(()=>{a()&&t()},i??2e3),[a,t,i]),c=(0,o.useCallback)(e=>{if(n&&e.event_updates)for(let[t,i]of Object.entries(n))!!e.event_updates[t]==!!i&&window.setTimeout(d,e.wait||0);else window.setTimeout(d,e.wait||0)},[d,n]);(0,s.x)(e,c)}},39087:(e,t,n)=>{n.d(t,{J:()=>r,j:()=>s});var i=n(38621),a=n(49851);let s={range:{name:"Range",description:"A numeric value within a specified range",icon:a.FD},text:{name:"Text",description:"Free form text input",icon:a.md},boolean:{name:"Boolean",description:"True or false value",icon:a.j6},select:{name:"Select",description:"Choose from a list of predefined options",icon:a.wB},date:{name:"Date",description:"Date or macro",icon:i.CalendarIcon}};function r(e,t){return(s[e.metadata.inputType]??s.text)[t]}},39344:(e,t,n)=>{n.d(t,{K:()=>S});var i=n(74848),a=n(21728),s=n(38621),r=n(57478),l=n(84268),o=n(51933),d=n(34164),c=n(96540);let u="IssueTree-module__tree--GQG9_",m="IssueTree-module__item--th4vZ",h="IssueTree-module__tokenContainer--mGoNS",f=c.createContext({hasTrailingVisuals:void 0}),p=c.createContext({level:0});function g(e){let t,n,s,l,o,d,m=(0,a.c)(17),{subIssueCount:h,subIssueHeaderText:p,hasTrailingVisuals:g,children:v}=e,b=void 0===p?"Sub-issues":p,j=void 0!==g&&g;if(m[0]!==v){let e=c.Children.toArray(v);n=e.find(x);let i=(t=e.filter(y)).length-1;if(i>=0&&c.isValidElement(t[i])){let e;m[3]===Symbol.for("react.memo_cache_sentinel")?(e={isLastBranch:!0},m[3]=e):e=m[3],t[i]=c.cloneElement(t[i],e)}m[0]=v,m[1]=t,m[2]=n}else t=m[1],n=m[2];m[4]!==j?(s={hasTrailingVisuals:j},m[4]=j,m[5]=s):s=m[5];let w=s,_=j||void 0;return m[6]!==t||m[7]!==h||m[8]!==b?(l=t.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"IssueTree-module__subHeader--BDblp",children:[b,(0,i.jsx)(r.A,{children:h})]}),(0,i.jsx)("ul",{role:"tree",className:u,children:t})]}),m[6]=t,m[7]=h,m[8]=b,m[9]=l):l=m[9],m[10]!==n||m[11]!==_||m[12]!==l?(o=(0,i.jsxs)("div",{className:"IssueTree-module__container--kYTT7","data-has-trailing-visual":_,children:[n,l]}),m[10]=n,m[11]=_,m[12]=l,m[13]=o):o=m[13],m[14]!==w||m[15]!==o?(d=(0,i.jsx)(f.Provider,{value:w,children:o}),m[14]=w,m[15]=o,m[16]=d):d=m[16],d}function y(e){return c.isValidElement(e)&&e.type===b}function x(e){return c.isValidElement(e)&&e.type===v}function v(e){let t,n,s,r=(0,a.c)(4);r[0]===Symbol.for("react.memo_cache_sentinel")?(t={level:0},r[0]=t):t=r[0];let l=t;return r[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,d.$)(m,"IssueTree-module__rootItem--hxb6j"),r[1]=n):n=r[1],r[2]!==e?(s=(0,i.jsx)(p.Provider,{value:l,children:(0,i.jsx)("div",{className:n,children:(0,i.jsx)(_,{...e})})}),r[2]=e,r[3]=s):s=r[3],s}function b(e){let t,n,s,r,l,o,d,h,f=(0,a.c)(19);f[0]!==e?({children:t,isLastBranch:n,...s}=e,f[0]=e,f[1]=t,f[2]=n,f[3]=s):(t=f[1],n=f[2],s=f[3]);let g=c.Children.toArray(t),y=g.filter(w),x=g.filter(j),{level:v}=c.useContext(p),b=v+1;f[4]!==b?(r={level:b},f[4]=b,f[5]=r):r=f[5];let C=r,N=n&&0===y.length,S=y.length-1;if(n&&S>=0&&c.isValidElement(y[S])){let e;f[6]===Symbol.for("react.memo_cache_sentinel")?(e={isLastBranch:!0},f[6]=e):e=f[6],y[S]=c.cloneElement(y[S],e)}let I=N||void 0;return f[7]!==x||f[8]!==s?(l=(0,i.jsx)(_,{...s,children:x}),f[7]=x,f[8]=s,f[9]=l):l=f[9],f[10]!==y?(o=y.length>0&&(0,i.jsx)("ul",{role:"group",className:u,children:y}),f[10]=y,f[11]=o):o=f[11],f[12]!==I||f[13]!==l||f[14]!==o?(d=(0,i.jsxs)("li",{role:"treeitem","aria-selected":"false",className:m,"data-is-last-rendered":I,children:[l,o]}),f[12]=I,f[13]=l,f[14]=o,f[15]=d):d=f[15],f[16]!==C||f[17]!==d?(h=(0,i.jsx)(p.Provider,{value:C,children:d}),f[16]=C,f[17]=d,f[18]=h):h=f[18],h}function j(e){return!(c.isValidElement(e)&&e.type===b)}function w(e){return c.isValidElement(e)&&e.type===b}function _(e){let t,n,s,r,o,d,u,m,h=(0,a.c)(29),{leadingVisual:g,title:y,description:x,trailingBadge:v,trailingVisual:b,href:j,onClick:w,blockedBy:_}=e,{level:N}=c.useContext(p),{hasTrailingVisuals:S}=c.useContext(f),I=null!=_&&_.length>0;h[0]!==N?(t={"--level":N},h[0]=N,h[1]=t):t=h[1];let k=!!w||void 0;h[2]!==N?(n=N>0&&(0,i.jsx)("div",{className:"IssueTree-module__spacer--Z4HHo"}),h[2]=N,h[3]=n):n=h[3],h[4]!==g?(s=(0,i.jsx)("div",{className:"IssueTree-module__leadingVisual--e_q3O",children:g}),h[4]=g,h[5]=s):s=h[5];let L=j?"a":w?"button":"span";return h[6]!==j||h[7]!==w||h[8]!==L||h[9]!==y?(r=(0,i.jsx)(l.A,{as:L,className:"IssueTree-module__title--v0mbM",href:j,onClick:w,children:y}),h[6]=j,h[7]=w,h[8]=L,h[9]=y,h[10]=r):r=h[10],h[11]!==r||h[12]!==v?(o=(0,i.jsxs)("div",{className:"IssueTree-module__content--Ko11D",children:[r,v]}),h[11]=r,h[12]=v,h[13]=o):o=h[13],h[14]!==_||h[15]!==x||h[16]!==I?(d=(null!=x||I)&&(0,i.jsxs)("div",{className:"IssueTree-module__description--b8yCi",children:[I&&(0,i.jsx)(C,{dependencyType:"Blocked by",blockedBy:_}),x]}),h[14]=_,h[15]=x,h[16]=I,h[17]=d):d=h[17],h[18]!==S||h[19]!==b?(u=S&&(0,i.jsx)("div",{className:"IssueTree-module__trailingVisual--SewMY",children:b}),h[18]=S,h[19]=b,h[20]=u):u=h[20],h[21]!==t||h[22]!==k||h[23]!==n||h[24]!==s||h[25]!==o||h[26]!==d||h[27]!==u?(m=(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"IssueTree-module__grid--hqjkj",style:t,"data-has-onclick":k,children:[n,s,o,d,u]})}),h[21]=t,h[22]=k,h[23]=n,h[24]=s,h[25]=o,h[26]=d,h[27]=u,h[28]=m):m=h[28],m}function C(e){let t,n,s=(0,a.c)(10),{dependencyType:r,blockedBy:d}=e;if(!d.length)return null;let c=d[0]?.href?"a":d[0]?.onClick?"button":"span",u=d[0]?.href,m=d[0]?.onClick,f=d[0]?.title,p=d[0]?.title;s[0]!==c||s[1]!==u||s[2]!==m||s[3]!==f||s[4]!==p?(t=(0,i.jsx)(l.A,{"data-testid":"blocked-by-link",className:"IssueTree-module__blockedBy--z0s4g",muted:!0,as:c,href:u,onClick:m,title:f,children:p}),s[0]=c,s[1]=u,s[2]=m,s[3]=f,s[4]=p,s[5]=t):t=s[5];let g=t;return s[6]!==d.length||s[7]!==g||s[8]!==r?(n=(0,i.jsx)(o.A,{size:"medium",className:"mr-2",leadingVisual:N,text:d.length>1?(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("span",{className:h,children:[r," ",d.length]})}):(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("span",{className:h,children:[r,": ",g]})})}),s[6]=d.length,s[7]=g,s[8]=r,s[9]=n):n=s[9],n}function N(){return(0,i.jsx)(s.BlockedIcon,{"data-testid":"blocked-by-icon",className:"fgColor-danger",size:14})}let S=Object.assign(g,{RootItem:v,Item:b});try{g.displayName||(g.displayName="Tree")}catch{}try{v.displayName||(v.displayName="TreeRootItem")}catch{}try{b.displayName||(b.displayName="TreeItem")}catch{}try{_.displayName||(_.displayName="TreeItemContent")}catch{}try{C.displayName||(C.displayName="IssueDependencies")}catch{}try{S.displayName||(S.displayName="IssueTree")}catch{}},39698:(e,t,n)=>{n.d(t,{i:()=>u});var i=n(68273),a=n(21728),s=n(48845),r=n(20622),l=n(97665),o=n(94747),d=n(69510),c=n(27011);let u=(0,i.Z6)()?function(e,t){let n,i,u,h=(0,a.c)(11),f=(0,c.Kp)(),p=`${f}/page_data/${r.uT.unresolveThread}`,g=(0,l.jE)(),{updateThread:y}=(0,c.an)();return h[0]!==p?(n=async e=>{let{threadId:t}=e,n=await (0,s.q$)(p,{method:"POST",body:{threadId:t}});(0,s.R)(n)},h[0]=p,h[1]=n):n=h[1],h[2]!==f||h[3]!==e||h[4]!==t||h[5]!==g||h[6]!==y?(i=(n,i)=>(y(Number(i.threadId),e,t,m),g.invalidateQueries({queryKey:(0,d.XG)(f)})),h[2]=f,h[3]=e,h[4]=t,h[5]=g,h[6]=y,h[7]=i):i=h[7],h[8]!==n||h[9]!==i?(u={mutationFn:n,onSuccess:i},h[8]=n,h[9]=i,h[10]=u):u=h[10],(0,o.n)(u)}:function(e,t){let n=(0,c.Kp)(),i=`${n}/page_data/${r.uT.unresolveThread}`,a=(0,l.jE)(),{updateThread:u}=(0,c.an)();return(0,o.n)({mutationFn:async({threadId:e})=>{let t=await (0,s.q$)(i,{method:"POST",body:{threadId:e}});(0,s.R)(t)},onSuccess:(i,s)=>(u(Number(s.threadId),e,t,e=>{if(e)return{...e,isResolved:!1,resolvedBy:void 0}}),a.invalidateQueries({queryKey:(0,d.XG)(n)}))})};function m(e){if(e)return{...e,isResolved:!1,resolvedBy:void 0}}},42312:(e,t,n)=>{n.d(t,{KL:()=>o,U:()=>m});var i=n(74848),a=n(21728),s=n(71315),r=n(96540);let l=(0,r.createContext)({registerNavigableRef:()=>{},unregisterNavigableRef:()=>{}});function o(e){let t,n,o,m,h,f,p,g=(0,a.c)(9),{children:y}=e;g[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],g[0]=t):t=g[0];let[x,v]=r.useState(t);g[1]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{v(t=>t.some(t=>t===e)?t:[...t,e])},g[1]=n):n=g[1];let b=n;g[2]===Symbol.for("react.memo_cache_sentinel")?(o=e=>{v(t=>t.filter(t=>t!==e))},g[2]=o):o=g[2];let j=o;g[3]!==x?(m=()=>{let e=e=>{if(e.ctrlKey&&"F6"===e.key){e.preventDefault();let t=x.filter(u).sort(c);if(0===t.length)return;let n=t.findIndex(d),i=(!e.shiftKey?t[n+1]??t[0]:t[n-1]??t[t.length-1])?.current;if(i){if(!["A","BUTTON","INPUT","SELECT","TEXTAREA"].includes(i.tagName)&&!i.hasAttribute("tabindex")){i.setAttribute("tabindex","-1");let e=()=>{i.removeAttribute("tabindex"),i.removeEventListener("blur",e)};i.addEventListener("blur",e,{once:!0})}i.focus()}}};return s.XC?.addEventListener("keydown",e),()=>{s.XC?.removeEventListener("keydown",e)}},h=[x],g[3]=x,g[4]=m,g[5]=h):(m=g[4],h=g[5]),(0,r.useEffect)(m,h),g[6]===Symbol.for("react.memo_cache_sentinel")?(f={registerNavigableRef:b,unregisterNavigableRef:j},g[6]=f):f=g[6];let w=f;return g[7]!==y?(p=(0,i.jsx)(l.Provider,{value:w,children:y}),g[7]=y,g[8]=p):p=g[8],p}function d(e){return e.current?.contains(s.XC?.activeElement||null)}function c(e,t){let n=e.current,i=t.current;return n===i?0:n.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_PRECEDING?1:-1}function u(e){return null!==e.current}function m(){let e,t,n=(0,a.c)(4),i=(0,r.useRef)(null),{registerNavigableRef:s,unregisterNavigableRef:o}=(0,r.useContext)(l);return n[0]!==s||n[1]!==o?(e=()=>(s(i),()=>{o(i)}),t=[s,o],n[0]=s,n[1]=o,n[2]=e,n[3]=t):(e=n[2],t=n[3]),(0,r.useEffect)(e,t),i}try{l.displayName||(l.displayName="NavigableRefContext")}catch{}try{o.displayName||(o.displayName="NavigableRefProvider")}catch{}},42518:(e,t,n)=>{n.d(t,{C:()=>a});var i=n(91348);function a(e,t){let n=(0,i.FT)(e).map(e=>({nodeID:e.id,type:e.type,title:e.title,value:t.nodes[e.id]?.value}));return{type:"loop-execution",loopID:e.id,loopTitle:e.title,createdAt:t.createdAt,version:t.loopVersion,executionID:t.id,output:n}}},43134:(e,t,n)=>{n.d(t,{_T:()=>d,aq:()=>o,qU:()=>l});var i=n(82075),a=n(21046);let s=(0,i.A)("localStorage"),r="copilot-loops-thread-";function l(e){try{let t=`${r}${e}`;return s.getItem(t)}catch(e){return(0,a.FF)("Failed to read loop thread ID from localStorage:",e),null}}function o(e,t){if(null!==t)try{let n=`${r}${e}`;s.setItem(n,t)}catch(e){(0,a.FF)("Failed to store loop thread ID in localStorage:",e)}}function d(e){try{let t=`${r}${e}`;s.removeItem(t)}catch(e){(0,a.FF)("Failed to remove loop thread ID from localStorage:",e)}}},43362:(e,t,n)=>{n.d(t,{Be:()=>s,Sl:()=>l,Wp:()=>a,YY:()=>d,jH:()=>o,wm:()=>r});var i=n(36729);function a(e){return e.reduce((e,t)=>(e[t.path]=t,e),{})}function s(e){return e.reduce((e,t)=>(e[t.path]=!!t.markedAsViewed,e),{})}function r(e){let t=e.comments.map(e=>parseInt(e.threadId));return{id:e.id,pendingReviewIDs:t,comments:e.comments}}function l(e){return e.reduce((e,t)=>(e[t.path]=t,e),{})}function o(e,t){if(!e)return;let n={};if(!t)return n;for(let a of t){if(!a.markersMap||0===Object.keys(a.markersMap).length)continue;let t=a.path,s={};for(let t in a.markersMap){let n=a.markersMap[t];if(!n?.threads&&!n?.annotations)continue;let r={threads:[],annotations:[]};if(n.annotations)for(let t of n.annotations){let n=e.annotations[Number(t.id)];n&&r.annotations.push(n)}if(n.threads)for(let i of n.threads){let n=function(e,t){if("FILE"===e)return;let n=e[0];if(!u(n))return;let i=Number(e.slice(1)),a=-1,s="R";if(t.start){a=parseInt(t.start.slice(1));let e=t.start[0];u(e)&&(s=e)}else a=i,s=n;return{endLine:i,endDiffSide:c[n],startLine:a,startDiffSide:c[s],isOutdated:!!t.outdatedReason}}(t,i),a=e.threads[Number(i.id)];a&&n&&(a={...a,positioning:n,subject:n}),a&&r.threads.push(a)}"FILE"===t?s[i.zW]=r:s[t]=r}n[t]=s}return n}function d(e){return{endLine:e.line,endDiffSide:e.side?.toLowerCase()==="right"?"RIGHT":"LEFT",startLine:e.startLine??e.line,startDiffSide:e.startSide?e.startSide?.toLowerCase()==="right"?"RIGHT":"LEFT":e.side?.toLowerCase()==="right"?"RIGHT":"LEFT",isOutdated:!1}}let c={L:"LEFT",R:"RIGHT"};function u(e){return"L"===e||"R"===e}},43883:(e,t,n)=>{n.d(t,{Gl:()=>s,TC:()=>d,ai:()=>r,eh:()=>o});var i=n(21067);let a={};function s(e,t){let n=t?.currency??"USD";return(a[n]||(a[n]=new Intl.NumberFormat((0,i.JK)(),{currency:n,style:"currency"}))).format(e)}function r(e,t){return new Intl.NumberFormat((0,i.JK)(),{maximumFractionDigits:t?.precision}).format(e)}let l=["k","m","b"];function o(e,t){let{suffix:n=!0,capping:i=1/0,precision:a=1}=t??{},s="",o=Math.min(i,e);if(n){let e=c(o);s=l[e-1]||"",o/=1e3**e}let d=r(o,{precision:a})+s;return e>i?`${d}+`:d}function d(e){if(e<=1e4)return 1;let t=c(e);return e/1e3**t>=10?0:1}function c(e){let t=Math.floor(Math.log(Math.max(Math.abs(e),1))/Math.log(1e3));return Math.min(l.length,t)}},44095:(e,t,n)=>{n.d(t,{_:()=>v,m:()=>b});var i=n(74848),a=n(21728),s=n(26100),r=n(2635),l=n(4817),o=n(53419),d=n(38621),c=n(69726),u=n(5524),m=n(96540),h=n(7812),f=n(1747),p=n(48881),g=n(13974),y=n(7026),x=n(20382);function v(e){let t,n,s,u,h,v,j,w,_,C,N=(0,a.c)(36),{yaml:S,isStreaming:I}=e,k=(0,g.p)(I),{selectedThreadID:L}=(0,r.Pk)(),{updateItem:T,openItem:D,openPreviewPane:E}=(0,f.xx)(),{messageId:R,messageIndex:A,messageTimestamp:O,setHasAutoOpenedPreviewPane:P}=(0,p.H)();N[0]!==L?(t=e=>((e,t)=>{try{var n=(0,x.Hh)(e);if("object"!=typeof n||null==n)return null;return"object"==typeof n&&null!==n&&"tag"in n&&"string"==typeof n.tag&&"name"in n&&"string"==typeof n.name&&"content"in n&&"string"==typeof n.content&&(!("repository"in n)||null==n.repository||"string"==typeof n.repository)&&1?n:null}catch{return(0,o.BI)("copilot.planning_spec",{type:"MALFORMED_YAML",mode:"immersive",threadId:t}),null}})(e,L),N[0]=L,N[1]=t):t=N[1];let F=t,M=(0,y.M)(S,F,null);e:{let e,t;if(!M){n=null;break e}let i=`planning-spec:${M.tag}#${A}`;N[2]!==O?(e=new Date(O),N[2]=O,N[3]=e):e=N[3],N[4]!==i||N[5]!==I||N[6]!==R||N[7]!==M.content||N[8]!==M.name||N[9]!==M.repository||N[10]!==M.tag||N[11]!==e?(t={name:M.name,tag:M.tag,repository:M.repository,content:M.content,messageId:R,id:i,type:"planning-spec",isUserEdited:!1,isStreaming:I,timestamp:e},N[4]=i,N[5]=I,N[6]=R,N[7]=M.content,N[8]=M.name,N[9]=M.repository,N[10]=M.tag,N[11]=e,N[12]=t):t=N[12],n=t}let $=n;N[13]!==D||N[14]!==E||N[15]!==P?(s=(e,t)=>{let{selectItem:n}=void 0===t?{}:t;D(e.id,n),E(),P(!0)},N[13]=D,N[14]=E,N[15]=P,N[16]=s):s=N[16];let B=s;N[17]!==I||N[18]!==k||N[19]!==B||N[20]!==$||N[21]!==T?(u=()=>{$&&(T($),(I||k)&&B($,{selectItem:!0}))},h=[I,k,B,$,T],N[17]=I,N[18]=k,N[19]=B,N[20]=$,N[21]=T,N[22]=u,N[23]=h):(u=N[22],h=N[23]),(0,m.useEffect)(u,h),N[24]!==B||N[25]!==$?(v=()=>{$&&B($)},N[24]=B,N[25]=$,N[26]=v):v=N[26];let V=v;N[27]!==L?(j=()=>(0,o.BI)("copilot.planning_spec",{type:"BLOCK_RENDERED",mode:"immersive",threadId:L}),w=[L],N[27]=L,N[28]=j,N[29]=w):(j=N[28],w=N[29]),(0,m.useEffect)(j,w),N[30]!==I?(_=()=>I?(0,i.jsx)(c.A,{size:"small",className:l.sX}):(0,i.jsx)(d.NoteIcon,{}),N[30]=I,N[31]=_):_=N[31];let U=_;return N[32]!==U||N[33]!==V||N[34]!==$?(C=(0,i.jsx)(b,{previewItem:$,onClick:V,getIcon:U}),N[32]=U,N[33]=V,N[34]=$,N[35]=C):C=N[35],C}function b(e){let t,n,r,l,o,c,m=(0,a.c)(16),{previewItem:p,onClick:g,getIcon:y}=e,{versionedItems:x}=(0,f.xx)();m[0]!==p||m[1]!==x?(t=p?(0,h.LU)(p.id,x):null,m[0]=p,m[1]=x,m[2]=t):t=m[2];let v=t;m[3]!==y?(n=y?.()||(0,i.jsx)(d.NoteIcon,{}),m[3]=y,m[4]=n):n=m[4],m[5]!==n?(r=(0,i.jsx)(u.l.LeadingVisual,{children:n}),m[5]=n,m[6]=r):r=m[6];let b=p?.name??"";return m[7]!==b?(l=(0,i.jsx)("div",{className:"PlanningSpecBlock-module__title--d0IjJ",children:b}),m[7]=b,m[8]=l):l=m[8],m[9]!==v?(o=null!==v&&(0,i.jsx)(u.l.TrailingVisual,{children:(0,i.jsx)(s.g,{version:v})}),m[9]=v,m[10]=o):o=m[10],m[11]!==g||m[12]!==r||m[13]!==l||m[14]!==o?(c=(0,i.jsx)("div",{className:"PlanningSpecBlock-module__container--UW6_s",children:(0,i.jsx)(u.l,{variant:"full",showDividers:!0,children:(0,i.jsxs)(u.l.Item,{onSelect:g,className:"PlanningSpecBlock-module__item--lxgT1",children:[r,l,o]})})}),m[11]=g,m[12]=r,m[13]=l,m[14]=o,m[15]=c):c=m[15],c}try{v.displayName||(v.displayName="PlanningSpecBlock")}catch{}try{b.displayName||(b.displayName="PlanningSpecBlockDisplay")}catch{}},45363:(e,t,n)=>{n.d(t,{C:()=>y});var i=n(35750),a=n(18150),s=n(61872),r=n(50467),l=n(38621);function o(e){return e.content}var d=n(90122),c=n(31629),u=n(39087),m=n(59370),h=n(53419),f=n(13647),p=n(49851);let PromptNodeHandler=class PromptNodeHandler{logTokenUsage(e,t,n){(0,h.BI)("loops.prompt_node.token_usage",{model:n,token_type:e,token_value:t})}async execute(e,t){let n,i=await (0,d.Vq)(e),a="",s=e.metadata?.model;for await(let e of t.chatClient.getChatCompletion(i,s,t.signal))a+=e.content,e.usage&&(n=e.usage),t.onPartialResult?.(a);return n&&(this.logTokenUsage("TOTAL_TOKEN",n.total_tokens,n.model),this.logTokenUsage("PROMPT_TOKEN",n.prompt_tokens,n.model),this.logTokenUsage("COMPLETION_TOKEN",n.completion_tokens,n.model)),{value:a}}validate(e,t){let n=[];return e.metadata?.model&&t?.availableModels&&t.availableModels.length>0&&(t.availableModels.some(t=>t.id===e.metadata?.model)||n.push({error:`Prompt node uses unavailable model: ${e.metadata.model}`,errorType:s.T.UnavailableModel,involvedNodes:[e.id]})),n}constructor(){(0,r._)(this,"type","prompt"),(0,r._)(this,"metadata",{contentFields:["content"],icon:()=>l.CopilotIcon,description:()=>"Use AI to process a node",label:()=>"Prompt",color:"purple",type:"prompt",outputLabel:"Markdown",isExecutable:!0,enabled:()=>!0})}};let GitHubGraphQLNodeHandler=class GitHubGraphQLNodeHandler{async execute(e,t){let n={nodeId:e.id,loopId:t.execution.loopID,version:t.execution.loopVersion,executionId:t.execution.id},i=await t.graphQLClient.getGraphQLResponse(e.content,n,{signal:t.signal});return i?{value:i.data??null}:{value:null}}validate(e,t){return[]}constructor(){(0,r._)(this,"type","github-graphql"),(0,r._)(this,"metadata",{type:"github-graphql",contentFields:["content"],icon:()=>l.MarkGithubIcon,description:()=>"Retrieve data from GitHub",label:()=>"GitHub GraphQL",color:"gray",enabled:f.Ve,outputLabel:"JSON",isExecutable:!0})}};let CodeNodeHandler=class CodeNodeHandler{async execute(e,t){let n=await t.codeExecutor.execute(e.content,e.id,t.signal);if(n.success)return{value:n.result??""};throw Error(n.error??"Code execution failed")}validate(e,t){return[]}constructor(){(0,r._)(this,"type","code"),(0,r._)(this,"metadata",{type:"code",color:"pink",contentFields:["content"],icon:()=>l.CodeIcon,description:()=>"Use classic code to process a node",label:()=>"Code",enabled:f.Ch,outputLabel:"Code output",isExecutable:!0,requiresCodeEvaluation:!0})}};let VisualizeNodeHandler=class VisualizeNodeHandler{async execute(e,t){return{value:o(e)}}validate(e,t){return[]}constructor(){(0,r._)(this,"type","visualize"),(0,r._)(this,"metadata",{type:"visualize",contentFields:["content"],icon:()=>l.GitBranchIcon,description:()=>"Use HTML and CSS to view output",label:()=>"Visualize",color:"olive",enabled:f.a1})}};let TextNodeHandler=class TextNodeHandler{async execute(e,t){let n=t.execution.inputValues?.[e.id],i=void 0!==n?n:o(e);if("date"===e.metadata.inputType&&"string"==typeof i&&(0,m.nS)(i)){let e=(0,m.Qf)(i);if(e)return{value:(0,m.O2)(e)}}return{value:i}}validate(e,t){let n=[],i=e.metadata;if("object"!=typeof i||!i)return n.push({error:"metadata is required for text nodes",errorType:s.T.MissingProperty,involvedNodes:[e.id]}),n;switch(i.inputType){case"boolean":["true","false"].includes(e.content)||n.push({error:'A boolean input must have a value of either "true" or "false"',errorType:s.T.InvalidBooleanValue,involvedNodes:[e.id]});break;case"range":"number"!=typeof i.min&&n.push({error:"A range input must have a min",errorType:s.T.InvalidRangeValue,involvedNodes:[e.id]}),"number"!=typeof i.max&&n.push({error:"A range input must have a max",errorType:s.T.InvalidRangeValue,involvedNodes:[e.id]});break;case"select":Array.isArray(i.options)&&0!==i.options.length?i.options.includes(e.content)||n.push({error:"A select node must have content equal to one of its options",errorType:s.T.InvalidSelectValue,involvedNodes:[e.id]}):n.push({error:"A select input must have options",errorType:s.T.InvalidSelectValue,involvedNodes:[e.id]});break;case"date":e.content?(0,m.Yj)(e.content)||n.push({error:"Date input must be a valid date (YYYY-MM-DD) or date macro (e.g., @today, @today+1d, @today-2w)",errorType:s.T.InvalidDateValue,involvedNodes:[e.id]}):n.push({error:"Date input needs a value",errorType:s.T.EmptyInputValue,involvedNodes:[e.id]});break;case"text":e.content||n.push({error:"Input needs a value",errorType:s.T.EmptyInputValue,involvedNodes:[e.id]})}return n}constructor(){(0,r._)(this,"type","text"),(0,r._)(this,"metadata",{type:"text",contentFields:["content"],icon:e=>{if(e&&(0,c.ir)(e)){if("boolean"===e.metadata.inputType)if("true"===e.content)return p.j6;else return p.hO;return(0,u.J)(e,"icon")}return l.TypographyIcon},description:e=>e&&(0,c.ir)(e)?(0,u.J)(e,"description"):"Input for nodes",label:e=>e&&(0,c.ir)(e)?(0,u.J)(e,"name"):"Input",color:"blue",enabled:()=>!0})}};let LoopNodeHandler=class LoopNodeHandler{async execute(e,t){return{value:o(e)}}validate(e,t){return[]}constructor(){(0,r._)(this,"type","loop"),(0,r._)(this,"metadata",{type:"loop",contentFields:["content"],icon:()=>l.GitPullRequestIcon,description:()=>"Use an existing pipeline as a node",label:()=>"Pipeline",color:"coral",enabled:f.V2,outputLabel:"Pipeline output",isExecutable:!0})}};var g=new WeakMap;let NodeHandlerRegistry=class NodeHandlerRegistry{registerHandler(e){(0,i._)(this,g).set(e.type,e)}async executeNode(e,t){let n=(0,i._)(this,g).get(e.type);if(!n)throw Error(`No handler registered for node type: ${e.type}`);return n.execute(e,t)}validateNode(e,t){let n=(0,i._)(this,g).get(e.type);return n?n.validate(e,t):[{error:`Unknown node type: ${e.type}`,errorType:s.T.MissingProperty,involvedNodes:[e.id]}]}getMetadata(e){let t=(0,i._)(this,g).get(e);return t?.metadata}getAllMetadata(){return Array.from((0,i._)(this,g).values()).map(e=>e.metadata)}getAllNodeTypes(){return Array.from((0,i._)(this,g).keys())}isExecutable(e){let t=this.getMetadata(e);return t?.isExecutable??!1}requiresCodeEvaluation(e){let t=this.getMetadata(e);return t?.requiresCodeEvaluation??!1}constructor(){(0,a._)(this,g,{writable:!0,value:new Map}),this.registerHandler(new PromptNodeHandler),this.registerHandler(new GitHubGraphQLNodeHandler),this.registerHandler(new CodeNodeHandler),this.registerHandler(new VisualizeNodeHandler),this.registerHandler(new TextNodeHandler),this.registerHandler(new LoopNodeHandler)}};let y=new NodeHandlerRegistry},46461:(e,t,n)=>{n.d(t,{G9:()=>r,Pq:()=>s,Pt:()=>function e(t,n,i=new Set){if(!i.has(t)){for(let a of(i.add(t),n(t),t.children))e(a,n,i);for(let a of t.blockedBy)e(a,n,i);for(let a of t.isBlocking)e(a,n,i)}},YR:()=>function e(t,n){for(let i of(n(t),t.children))e(i,n)},u0:()=>l});var i=n(21728),a=n(1747);async function s(e,t,n=new Set){if(!n.has(e)){for(let i of(n.add(e),await t(e),e.children))await s(i,t,n);for(let i of e.blockedBy)await s(i,t,n);for(let i of e.isBlocking)await s(i,t,n)}}function r(e,t,n,i,a){let s=e.reduce((e,n)=>(e.set(t(n),{item:n,parent:null,children:[],blockedBy:[],isBlocking:[]}),e),new Map);for(let r of e){let e=s.get(t(r)),l=n(r);if(null!=l){let t=s.get(l);t&&e&&(e.parent=t,t.children.push(e))}for(let t of i?.(r)??[]){let n=s.get(t);n&&e&&!n.blockedBy.includes(e)&&(e.blockedBy.includes(n)||e.blockedBy.push(n),n.isBlocking.includes(e)||n.isBlocking.push(e))}for(let t of a?.(r)??[]){let n=s.get(t);n&&e&&!n.isBlocking.includes(e)&&(e.isBlocking.includes(n)||e.isBlocking.push(n),n.blockedBy.includes(e)||n.blockedBy.push(e))}}return s}function l(){let e,t,n=(0,i.c)(6),{items:s,allOpenItems:l,versionedItems:f}=(0,a.xx)();n[0]!==l?(e=new Set(l),n[0]=l,n[1]=e):e=n[1];let p=e;return n[2]!==s||n[3]!==p||n[4]!==f?(t=r([...f.entries()].filter(h).map(e=>{let[,t]=e,n=t.find(e=>p.has(e));if(n)return s.get(n);let i=t.at(-1);return i?s.get(i):void 0}).filter(m),u,c,d,o),n[2]=s,n[3]=p,n[4]=f,n[5]=t):t=n[5],t}function o(e){return e.isBlockingTags}function d(e){return e.blockedByTags}function c(e){return e.parentTag}function u(e){return e.tag}function m(e){return!!e}function h(e){let[t]=e;return t.startsWith("new-issue:")||t.startsWith("existing-issue:")}},46857:(e,t,n)=>{n.d(t,{I:()=>r,O:()=>s});var i=n(91348),a=n(60209);function s(e){for(let n of e.references??[]){var t;if(n.type===a.km&&(t=n)&&"object"==typeof t&&"title"in t&&"nodes"in t){let t={description:n.description,id:n.id,title:n.title,owned:!0,nodes:n.nodes,updatedAt:new Date(e.createdAt).getTime(),visibility:"private"},a=(0,i.kX)(t,[]);return{messageId:e.id,pipeline:a}}}}function r(e,t=!1){for(let n of[...e].reverse()){if("assistant"!==n.role&&!t)continue;let e=s(n);if(e)return e}}},48057:(e,t,n)=>{n.d(t,{Qk:()=>y,rR:()=>v,vx:()=>p,wu:()=>f});var i=n(21728),a=n(97286),s=n(99519),r=n(5533),l=n(33026),o=n(50050),d=n(99993);let c=[400,401,403,404];function u(){let{data:e}=(0,d._N)(h,"latest"),t=(0,o.Ud)(m);return t===l.qD||t===l.kj?e:t}function m(e){return e.version}function h(e){return e?.version}function f(e,t){return["execution",e,t]}function p(){let e,t=(0,i.c)(3),{data:n}=(0,d._N)(g),a=u(),s=n??"",r=a??"";return t[0]!==s||t[1]!==r?(e=f(s,r),t[0]=s,t[1]=r,t[2]=e):e=t[2],e}function g(e){return e?.id}function y(e){let{data:t}=(0,d._N)(x);return v(t??"",u()??"",e)}function x(e){return e?.id}function v(e,t,n){let o,d,c,u,m=(0,i.c)(14),h=(0,s.EY)();m[0]!==e||m[1]!==t?(o=f(e,t),m[0]=e,m[1]=t,m[2]=o):o=m[2],m[3]!==e||m[4]!==h||m[5]!==t?(d=async()=>{if(!e||!t)return null;let n=await h.getExecution(e,t,l.qD);if(!n.success){let e=Error("Error fetching execution.");throw e.cause=n.httpStatus,e}let i=n.data;return h.isExecutionRunning(i.id)!==(0,r.y)(i)?null:i},m[3]=e,m[4]=h,m[5]=t,m[6]=d):d=m[6];let p=!!e&&!!t;return m[7]!==n?(c=n&&{select:n},m[7]=n,m[8]=c):c=m[8],m[9]!==o||m[10]!==d||m[11]!==p||m[12]!==c?(u={queryKey:o,queryFn:d,enabled:p,...c,staleTime:3e5,retry:b},m[9]=o,m[10]=d,m[11]=p,m[12]=c,m[13]=u):u=m[13],(0,a.I)(u)}function b(e,t){return!("number"==typeof t.cause&&c.includes(t.cause))&&e<3}},48881:(e,t,n)=>{n.d(t,{A:()=>a,H:()=>s});var i=n(96540);let a=(0,i.createContext)(null),s=()=>{let e=(0,i.useContext)(a);if(!e)throw Error("Missing required ContentPreviewBlockContext provider.");return e};try{a.displayName||(a.displayName="ContentPreviewBlockContext")}catch{}},49912:(e,t,n)=>{n.d(t,{j:()=>s});var i=n(54908),a=n(60209);function s(e){return e.id===a.S$&&"service"in e&&e.service instanceof i.J}},50050:(e,t,n)=>{n.d(t,{Mr:()=>g,NY:()=>x,Ud:()=>y});var i=n(74848),a=n(49835),s=n(96540),r=n(33535),l=n(88431),o=n(96868),d=n(21728),c=n(96459),u=n(53380);function m(e,t){switch(t.type){case"FOCUS_NODE":return{...e,focusedNodeId:t.nodeId};case"HOVER_NODE":return{...e,hoveredNodeId:t.nodeId};case"SET_VIEW":return{...e,view:t.view};case"SET_SIDE_PANEL_VIEW":return{...e,sidePanelView:t.view};case"SET_VERSION":return{...e,version:t.version};case"SET_STATE":return{...e,...t.state};case"SHOW_LINK_COPIED_BANNER":return{...e,showLinkCopiedBanner:!0};case"HIDE_LINK_COPIED_BANNER":return{...e,showLinkCopiedBanner:!1};case"SHOW_DUPLICATED_BANNER":return{...e,showDuplicatedBanner:!0};case"HIDE_DUPLICATED_BANNER":return{...e,showDuplicatedBanner:!1};default:return e}}var h=n(53627);let f=(0,s.createContext)(new a.Lj(o.qB)),p=(0,s.createContext)(()=>{});function g({children:e}){let[t,n]=function(){let e,t,n,i,a=(0,d.c)(9),[r]=(0,c.o)();a[0]!==r?(e=(0,u.hW)(r),a[0]=r,a[1]=e):e=a[1];let[l,o]=(0,s.useReducer)(m,e);return a[2]!==l?(t=()=>{let e=(0,u.Ts)(l);(0,h.MM)(e)},a[2]=l,a[3]=t):t=a[3],a[4]!==r||a[5]!==l?(n=[l,r],a[4]=r,a[5]=l,a[6]=n):n=a[6],(0,s.useEffect)(t,n),a[7]!==l?(i=[l,o],a[7]=l,a[8]=i):i=a[8],i}(),a=(0,r.AI)(t);(0,l.N)(()=>{a.value=t},[t,a]);let o=(0,s.useCallback)(e=>{n(e)},[n]);return(0,i.jsx)(f.Provider,{value:a,children:(0,i.jsx)(p.Provider,{value:o,children:e})})}function y(e){let t=(0,s.useContext)(f);if(!t)throw Error("useLoopsStateLens can only be used inside a PipesProvider");let n=(0,r.Sk)(t,e);return(0,r.HN)(n)}function x(){return(0,s.useContext)(p)}try{f.displayName||(f.displayName="LoopsStateContext")}catch{}try{p.displayName||(p.displayName="LoopsDispatchContext")}catch{}try{g.displayName||(g.displayName="LoopsStateProvider")}catch{}},50625:(e,t,n)=>{n.d(t,{L:()=>m});var i=n(68273),a=n(21728),s=n(82075),r=n(96540);let{getItem:l,removeItem:o,setItem:d}=(0,s.D)("localStorage"),c=(e,t)=>{let{diffSide:n,filePath:i,line:a,subjectId:s}=e;if(t)return`PullRequest:${s}-File:${i}`;if(void 0!==a&&void 0!==n)return`PullRequest:${s}-File:${i}-Line:${a}-DiffSide:${n}`;throw Error("Cannot build diff line comment cache key for a comment without a line number or diff side")};function u(e,t){let n=l(e),i=!!n?.text?.trim();return(0,r.useEffect)(()=>{i&&t?.(n)},[i]),{hasPersistedComment:i,removePersistedCommentFromStorage:()=>{o(e),i=!1,n=null}}}(0,i.GV)();let m=(0,i.GV)()?function(e){let t,n,i,s,r=(0,a.c)(16),{diffSide:l,filePath:o,handlePersistedCommentExists:m,line:h,subjectId:f,threadId:p,fileLevelComment:g}=e;e:{let e;if(p){t=p;break e}r[0]!==l||r[1]!==g||r[2]!==o||r[3]!==h||r[4]!==f||r[5]!==p?(e=p??c({diffSide:l,filePath:o,line:h,subjectId:f},g),r[0]=l,r[1]=g,r[2]=o,r[3]=h,r[4]=f,r[5]=p,r[6]=e):e=r[6],t=e}let y=t,{hasPersistedComment:x,removePersistedCommentFromStorage:v}=u(y,m);r[7]!==y?(n=e=>{let t={text:e.text};e.startLine&&e.startSide&&(t={...t,startLine:e.startLine,startSide:e.startSide}),d(y,t)},r[7]=y,r[8]=n):n=r[8];let b=n;r[9]!==f?(i=e=>{let t={shouldFocus:!0};e.text&&(t={...t,text:e.text}),e.startLine&&(t={...t,startLine:e.startLine,startSide:e.givenLineDiffSide,startLineKey:e.startLineKey,endLineKey:e.endLineKey}),d(c({diffSide:e.givenLineDiffSide,filePath:e.givenFilePath,line:e.givenLine,subjectId:f},e.shouldBeFileLevelComment),t)},r[9]=f,r[10]=i):i=r[10];let j=i;return r[11]!==x||r[12]!==j||r[13]!==b||r[14]!==v?(s={hasPersistedComment:x,persistCommentToStorage:b,persistCommentOnGivenLineToStorage:j,removePersistedCommentFromStorage:v},r[11]=x,r[12]=j,r[13]=b,r[14]=v,r[15]=s):s=r[15],s}:function({diffSide:e,filePath:t,handlePersistedCommentExists:n,line:i,subjectId:a,threadId:s,fileLevelComment:l}){let o=(0,r.useMemo)(()=>s||(s??c({diffSide:e,filePath:t,line:i,subjectId:a},l)),[e,t,i,a,s,l]),{hasPersistedComment:m,removePersistedCommentFromStorage:h}=u(o,n);return{hasPersistedComment:m,persistCommentToStorage:e=>{let t={text:e.text};e.startLine&&e.startSide&&(t={...t,startLine:e.startLine,startSide:e.startSide}),d(o,t)},persistCommentOnGivenLineToStorage:e=>{let t={shouldFocus:!0};e.text&&(t={...t,text:e.text}),e.startLine&&(t={...t,startLine:e.startLine,startSide:e.givenLineDiffSide,startLineKey:e.startLineKey,endLineKey:e.endLineKey}),d(c({diffSide:e.givenLineDiffSide,filePath:e.givenFilePath,line:e.givenLine,subjectId:a},e.shouldBeFileLevelComment),t)},removePersistedCommentFromStorage:h}}},51391:(e,t,n)=>{n.d(t,{Aj:()=>u,EV:()=>d,KV:()=>m,M6:()=>o,bo:()=>l,sB:()=>c});var i=n(36472),a=n(3038),s=n(61583),r=n(71315);function l(e){return`b:${e.blobLineNumber}-l:${e.left}-r:${e.right}`}function o({current:e,currentOrientation:t,previous:n,previousOrientation:i}){return!!n&&("left"===i&&"left"===t&&!!e.left&&!!n.left&&n.left>e.left||"right"===i&&"right"===t&&!!e.right&&!!n.right&&n.right>e.right||"right"===i&&"left"===t&&!!e.right&&!!n.right&&n.right>e.right||"left"===i&&"right"===t&&!!e.left&&!!n.left&&n.left>e.left||!1)}function d({diffAnchor:e,diffLines:t,isSplitView:n,lineRange:s}){let r,o=new Set([]);if(0===t.length)return{selectedLineKeys:o};if(!s)return{selectedLineKeys:new Set([])};let{startLineNumber:d,startOrientation:c,endLineNumber:u,endOrientation:m}=s,h=t;if(n){let e=(0,a.Mk)(t);h=e.leftLines,r=e.rightLines}let f={diffAnchor:e,endLineNumber:u??d,endOrientation:m??c,startLineNumber:d,startOrientation:c},p=(0,i.A)({selectedLineRange:f,leftLines:h,rightLines:r});for(let e=0;e<p.selectedLeftLines.length;e++){let t=p.selectedLeftLines[e];t&&!(0,a.Po)(t)&&o.add(l(t))}for(let e=0;e<p.selectedRightLines.length;e++){let t=p.selectedRightLines[e];t&&!(0,a.Po)(t)&&o.add(l(t))}return{selectedLineKeys:o,startOrientation:c,selectedLineRange:f}}function c(e){let t;for(t of e);return t}function u(e){return e.values().next().value}function m(e){let t=(0,s.EW)(r.fV.hash);if(!t||t[1]!==e)return;let n=t[2]?"L"===t[2]?"left":"right":void 0,i=t[3]?parseInt(t[3]):void 0,a=t[4]?"L"===t[4]?"left":"right":void 0,l=t[5]?parseInt(t[5]):void 0;if(n&&i)return{diffAnchor:e,endOrientation:a??n,endLineNumber:l??i,startOrientation:n,startLineNumber:i}}},51625:(e,t,n)=>{n.d(t,{_x:()=>a,cP:()=>s,eu:()=>i,pI:()=>r});let i="spark",a="Spark",s="/spark",r="Create web apps with React and TypeScript to prototype ideas, build tools, and more"},53380:(e,t,n)=>{n.d(t,{Ts:()=>s,_A:()=>a,hW:()=>r});var i=n(96868);function a(e){let t={},n=e.get("focusedNode");n&&(t.focusedNodeId=n);let a=e.get("view");a&&Object.values(i.Kh).includes(a)&&(t.view=a);let s=e.get("sidePanel");s&&Object.values(i.Fj).includes(s)&&(t.sidePanelView=s);let r=e.get("version");return r&&(t.version=r),t}function s(e){let t=new URLSearchParams;return e.focusedNodeId&&t.set("focusedNode",e.focusedNodeId),e.view!==i.qB.view&&t.set("view",e.view),e.sidePanelView!==i.qB.sidePanelView&&t.set("sidePanel",e.sidePanelView),e.version!==i.qB.version&&t.set("version",e.version),t}function r(e){return{...i.qB,...a(e)}}},54908:(e,t,n)=>{n.d(t,{J:()=>LoopsService});var i=n(35750),a=n(18150),s=n(85242),r=n(88243),l=n(16213),o=n(91348),d=n(45363),c=n(21046),u=n(90122),m=new WeakMap,h=new WeakMap,f=new WeakMap,p=new WeakMap;let NodeRunner=class NodeRunner{async run(e,t,n){let a={graphQLClient:(0,i._)(this,h),chatClient:(0,i._)(this,f),codeExecutor:(0,i._)(this,p),signal:t,onPartialResult:n,execution:e};return d.C.executeNode((0,i._)(this,m),a)}constructor(e,t,n,i){(0,a._)(this,m,{writable:!0,value:void 0}),(0,a._)(this,h,{writable:!0,value:void 0}),(0,a._)(this,f,{writable:!0,value:void 0}),(0,a._)(this,p,{writable:!0,value:void 0}),(0,s._)(this,m,e),(0,s._)(this,h,t),(0,s._)(this,f,n),(0,s._)(this,p,i)}};var g=n(33026),y=new WeakMap,x=new WeakMap,v=new WeakMap,b=new WeakMap,j=new WeakMap,w=new WeakMap,_=new WeakMap,C=new WeakMap,N=new WeakSet,S=new WeakSet,I=new WeakSet;let LoopRunner=class LoopRunner{async run(e,t){let n=(0,o.FT)((0,i._)(this,b));if(0===n.length)throw Error("No output node");await Promise.all(n.map(n=>(0,r._)(this,S,L).call(this,n,e,t)))}stop(e){(0,i._)(this,C).abort(),e((0,i._)(this,j))}constructor(e,t,n,i,r){(0,l._)(this,N),(0,l._)(this,S),(0,l._)(this,I),(0,a._)(this,y,{writable:!0,value:void 0}),(0,a._)(this,x,{writable:!0,value:void 0}),(0,a._)(this,v,{writable:!0,value:void 0}),(0,a._)(this,b,{writable:!0,value:void 0}),(0,a._)(this,j,{writable:!0,value:void 0}),(0,a._)(this,w,{writable:!0,value:void 0}),(0,a._)(this,_,{writable:!0,value:void 0}),(0,a._)(this,C,{writable:!0,value:void 0}),(0,s._)(this,y,n),(0,s._)(this,x,i),(0,s._)(this,v,r),(0,s._)(this,b,e),(0,s._)(this,j,t),(0,s._)(this,w,(0,o.f0)(e.nodes)),(0,s._)(this,_,new Map),(0,s._)(this,C,new AbortController)}};function k(){return(0,i._)(this,C).signal.aborted}async function L(e,t,n){let a=(0,i._)(this,_).get(e.id);if(a)return a;let s=(0,r._)(this,I,T).call(this,e,t,n);return(0,i._)(this,_).set(e.id,s),s}async function T(e,t,n){if((0,r._)(this,N,k).call(this))return null;let a=await n((0,i._)(this,b).id,(0,i._)(this,b).version||g.kj,(0,i._)(this,j));if(!a.success)throw Error("Unable to load execution");let s=a.data,l=s.nodes[e.id]?.value;if(l)return l;let o=[...new Set((0,i._)(this,w).edges.filter(t=>t.to===e.id).map(e=>e.from))].map(e=>(0,i._)(this,b).nodes.find(t=>t.id===e)).filter(e=>!!e),m=await Promise.all(o.map(async e=>[e.id,await (0,r._)(this,S,L).call(this,e,t,n)]));if(m.some(([e,t])=>null===t)||(0,r._)(this,N,k).call(this))return null;let h=Object.fromEntries(m);try{let n,a,l=(a=(n={...e}).content,"string"==typeof a&&(n.content=function(e,t,n=!1){let i=(0,u.ZP)();return e.replace(i,(e,i,a,s)=>{let r=t[i];if(void 0===r)return(0,c.vV)(`Node with ID "${i}" not found in node map`),e;let l=r;if(a){let e=function e(t){if(!t)return null;if("object"==typeof t)return t;if("string"==typeof t)try{return e(JSON.parse(t))}catch{}return null}(r);if(e){let t=function(e,t){if(!t||!e)return null;let n=t.split("."),i=e;for(let e of n){if(null==i||"object"!=typeof i||null===i)return null;i=i[e]}return i}(e,a);if(null!==t)l=t;else throw Error(`Path "${a}" on node with ID "${i}" does not have a value`)}else throw Error(`Cannot access path "${a}" on non-object node with ID "${i}"`)}return String(("string"!=typeof l||n?JSON.stringify(l):l)??e)})}(a,h,d.C.requiresCodeEvaluation(e.type))),n),o=new NodeRunner(l,(0,i._)(this,y),(0,i._)(this,x),(0,i._)(this,v));await t({type:"SET_RUNNING",nodeID:e.id});let m=async n=>{(0,r._)(this,N,k).call(this)||await t({type:"UPDATE_NODE_VALUE_PARTIAL",nodeID:e.id,value:n})},{value:f}=await o.run(s,(0,i._)(this,C).signal,m);return(0,r._)(this,N,k).call(this)||await t({type:"UPDATE_NODE_VALUE",nodeID:e.id,value:f}),f}catch(n){var f;return(0,r._)(this,N,k).call(this)||await t({type:"UPDATE_NODE_ERROR",nodeID:e.id,error:(f=n)instanceof Error?f.message:"string"==typeof f?f:"object"==typeof f?JSON.stringify(f):""}),null}}var D=n(43134),E=n(76746),R=n(53419),A=n(49835),O=new WeakMap,P=new WeakMap,F=new WeakMap,M=new WeakMap,$=new WeakMap,B=new WeakMap,V=new WeakSet;let LoopsService=class LoopsService{getLoop(e,t=g.kj){return(0,i._)(this,O).getLoop(e,t)}getAllLoops(){return(0,i._)(this,O).listLoops()}getLoopVersions(e){return(0,i._)(this,O).listLoopVersions(e)}createLoop(e){return(0,i._)(this,O).createLoop("string"==typeof e?{id:e}:e)}async updateLoop(e,t){let n=await (0,i._)(this,O).getLoop(e,g.kj);if(!n.success)return n;let a=t(n.data);return await (0,i._)(this,O).updateLoop(e,g.kj,a)}async deleteLoop(e){return(0,D._T)(e),(0,i._)(this,O).deleteLoop(e)}async saveLoop(e){let t="string"==typeof e?{id:e}:e;return await (0,i._)(this,O).updateLoop(t.id,g.qD,t)}async restoreLoopVersion(e){return await (0,i._)(this,O).updateLoop(e.id,g.qD,e)}async revertLoop(e){let t=await (0,i._)(this,O).getLoop(e,g.qD);return t.success?(0,i._)(this,O).updateLoop(e,"draft",t.data):t}getExecution(e,t,n){return(0,i._)(this,O).getExecution(e,t,n)}async createExecution(e,t,n){return(0,i._)(this,O).createExecution(e,t,n?.nodes,n?.inputValues)}updateNodeExecution(e,t,n,a,s){return(0,i._)(this,O).updateNodeExecution(e,t,n,a,s)}async updateExecution(e,t,n,a){let s=await (0,i._)(this,O).getExecution(e,t,n);if(!s.success)return s;let r=s.data;for(let[s,l]of Object.entries(a.nodes))r.nodes[s]&&r.nodes[s].value===l.value&&r.nodes[s].error===l.error||await (0,i._)(this,O).updateNodeExecution(e,t,n,s,l);return await (0,i._)(this,O).getExecution(e,t,n)}isExecutionRunning(e){return!!(0,i._)(this,$).get(e)}getRunningExecutions(){return(0,i._)(this,B)}async runPipeline(e,t,n,a){if((0,E.v)(e).length>0)return;let s=new LoopRunner(e,t,(0,i._)(this,P),(0,i._)(this,F),(0,i._)(this,M));(0,i._)(this,$).set(t,s),(0,i._)(this,B).add(t);try{await s.run(n,a),(0,R.BI)("dotcom_chat.loops_execution",{execution_id:t,loop_id:e.id,node_count:e.nodes.length,status:"success"})}catch(n){throw(0,R.BI)("dotcom_chat.loops_execution",{execution_id:t,loop_id:e.id,node_count:e.nodes.length,status:"error"}),n}finally{(0,i._)(this,$).delete(t),(0,i._)(this,B).delete(t)}}stopPipeline(e,t){let n=(0,i._)(this,$).get(e);n&&(n.stop(t),(0,i._)(this,$).delete(e),(0,i._)(this,B).delete(e),(0,R.BI)("dotcom_chat.loops_execution",{execution_id:e,status:"canceled"}))}async shareLoop(e){return await (0,i._)(this,O).shareLoop(e)}async unshareLoop(e){return await (0,i._)(this,O).unshareLoop(e)}constructor(e,t,n,i){(0,l._)(this,V),(0,a._)(this,O,{writable:!0,value:void 0}),(0,a._)(this,P,{writable:!0,value:void 0}),(0,a._)(this,F,{writable:!0,value:void 0}),(0,a._)(this,M,{writable:!0,value:void 0}),(0,a._)(this,$,{writable:!0,value:new Map}),(0,a._)(this,B,{writable:!0,value:new A.yy}),(0,r._)(this,V,U).call(this),(0,s._)(this,O,e),(0,s._)(this,P,t),(0,s._)(this,F,n),(0,s._)(this,M,i)}};function U(){indexedDB.deleteDatabase("copilot-pipes")}},55248:(e,t,n)=>{n.d(t,{j:()=>r,p:()=>s});var i=n(74848),a=n(21728);let s=e=>{let t,n,s=(0,a.c)(3);return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)("path",{d:"M7.25 1.7793C9.371 1.77943 11.1858 3.00816 12.0166 4.80762C14.2732 5.06028 15.9999 6.94976 16 9.2793C16 9.32465 15.9976 9.37003 15.9961 9.41504H15.9971C15.9971 9.82924 15.6613 10.165 15.2471 10.165C14.8356 10.1648 14.5011 9.83347 14.4971 9.42285H14.4961C14.4983 9.37538 14.5 9.32737 14.5 9.2793C14.4999 7.60324 13.176 6.27947 11.5 6.2793C11.1806 6.2793 10.8958 6.07714 10.791 5.77539C10.284 4.31438 8.90436 3.27944 7.25 3.2793C5.1596 3.2793 3.50012 4.93893 3.5 7.0293C3.5 7.11497 3.50931 7.23128 3.52051 7.33887C3.52582 7.38984 3.53023 7.43466 3.53418 7.46582L3.53906 7.50098L3.54004 7.50977L3.54102 7.51074C3.59503 7.88942 3.35481 8.24868 2.98438 8.34375C2.1243 8.5636 1.5001 9.32996 1.5 10.2793C1.5 11.4033 2.37598 12.2793 3.5 12.2793H3.5332V12.2783C3.53974 12.2783 3.54624 12.2791 3.55273 12.2793H3.55371C3.95838 12.2902 4.28314 12.621 4.2832 13.0283C4.2832 13.4356 3.95841 13.7655 3.55371 13.7764V13.7793H3.5C1.54755 13.7793 0 12.2317 0 10.2793C8.74811e-05 8.86873 0.808798 7.66476 2.00098 7.1084C2.00028 7.08195 2 7.05535 2 7.0293C2.00012 4.1105 4.33118 1.7793 7.25 1.7793ZM6.49707 7.98242C6.78987 7.68961 7.2647 7.68979 7.55762 7.98242L9.80762 10.2324C9.94825 10.373 10.0273 10.5638 10.0273 10.7627C10.0273 10.9616 9.94827 11.1523 9.80762 11.293L7.55762 13.543C7.26472 13.8358 6.78992 13.8358 6.49707 13.543C6.20444 13.2501 6.20435 12.7753 6.49707 12.4824L8.2168 10.7627L6.49707 9.04297C6.20447 8.75008 6.20433 8.27522 6.49707 7.98242ZM14.5273 12.2627C14.9415 12.2627 15.2773 12.5985 15.2773 13.0127C15.2773 13.4269 14.9415 13.7627 14.5273 13.7627H11.5273C11.1133 13.7625 10.7773 13.4268 10.7773 13.0127C10.7774 12.5987 11.1133 12.2629 11.5273 12.2627H14.5273Z",fill:"currentColor"}),s[0]=t):t=s[0],s[1]!==e?(n=(0,i.jsx)("svg",{"aria-hidden":"true",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:t}),s[1]=e,s[2]=n):n=s[2],n},r=e=>{let t,n,s=(0,a.c)(3);return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)("path",{d:"M14.4482 3.33337C18.7 3.33337 22.3305 5.81163 23.9131 9.41736C23.9174 9.4271 23.9218 9.43678 23.9258 9.44666L23.9287 9.45447C28.4413 9.79159 31.9629 13.4237 31.998 17.9789H31.9922C31.9894 18.5288 31.5438 18.974 30.9932 18.974C30.441 18.9739 29.9933 18.5261 29.9932 17.974H29.9971C29.9577 14.3305 27.0059 11.4291 23.2412 11.4291C22.8325 11.429 22.4654 11.1795 22.3135 10.8002L22.0752 10.2064C20.8076 7.33395 17.8991 5.33337 14.4482 5.33337C9.80134 5.33339 6.13785 8.95653 6.1377 13.476C6.1377 13.855 6.16656 14.2794 6.20605 14.4838C6.30638 15.004 5.98334 15.5117 5.46973 15.642C3.44486 16.1554 2 17.9258 2 20.0795C2.00003 22.6354 4.04211 24.6663 6.68945 24.6664H8.125C8.67643 24.6673 9.12289 25.1148 9.12305 25.6664C9.12305 26.2181 8.67653 26.6645 8.125 26.6654V26.6664H6.68945C2.97192 26.6663 3.31456e-05 23.774 0 20.0795C0 17.2864 1.70256 14.9426 4.14941 13.972C4.14121 13.7976 4.1377 13.6268 4.1377 13.476C4.13785 7.81789 8.73115 3.33339 14.4482 3.33337ZM13.9863 17.6185C14.3768 17.2282 15.0099 17.2284 15.4004 17.6185L19.0674 21.2855C19.2549 21.473 19.3603 21.7274 19.3604 21.9926C19.3604 22.2577 19.2548 22.5121 19.0674 22.6996L15.4004 26.3666C15.0099 26.7569 14.3768 26.757 13.9863 26.3666C13.5959 25.9761 13.596 25.3431 13.9863 24.9525L16.9463 21.9926L13.9863 19.0336C13.5958 18.643 13.5958 18.0091 13.9863 17.6185ZM28.6934 24.6595C29.2456 24.6595 29.6934 25.1073 29.6934 25.6595C29.6932 26.2117 29.2456 26.6595 28.6934 26.6595H22.0264C21.4744 26.6593 21.0265 26.2116 21.0264 25.6595C21.0264 25.1074 21.4743 24.6598 22.0264 24.6595H28.6934Z",fill:"currentColor"}),s[0]=t):t=s[0],s[1]!==e?(n=(0,i.jsx)("svg",{"aria-hidden":"true",width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:t}),s[1]=e,s[2]=n):n=s[2],n}},56092:(e,t,n)=>{n.d(t,{H:()=>l});var i=n(96540);let a="undefined"!=typeof globalThis&&void 0!==globalThis.window,s="undefined"!=typeof process&&!1,r={timeout:150,useIdleCallback:!0};function l(e,t={}){let{timeout:n,useIdleCallback:o}={...r,...t};if(!a||s)return void e();let d=()=>{"function"==typeof i.startTransition?(0,i.startTransition)(e):e()},c=globalThis;o&&"function"==typeof c.requestIdleCallback?c.requestIdleCallback(d,{timeout:n}):setTimeout(d,0)}},57944:(e,t,n)=>{n.d(t,{c:()=>AgentsPlugin,q:()=>eL});var i,a=n(50467),s=n(74848),r=n(21728),l=n(81453),o=n(33592),d=n(35247),c=n(82460),u=n(76143),m=n(69599),h=n(53419),f=n(26956),p=n(27912),g=n(79634),y=n(91747),x=n(46251),v=n(96540),b=n(97189),j=n(76977),w=n(47865),_=n(79064),C=n(47723);function N(e,t){try{let n=JSON.parse(e);if(void 0!==n.text){let e=n.selectedRepo?{...n.selectedRepo,private:"private"===n.selectedRepo.visibility}:null,i=n.selectedBranch||"",a=n.selectedAgent,s=n.model?.id;if(!s)try{s=localStorage.getItem(C.Pm)??void 0}catch{}t.current(n.text,e,i,a||"",void 0,s)}else t.current(e,null,"",{})}catch{t.current(e,null,"",{})}}var S=n(77164),I=n(60284),k=n(64894),L=n(67925),T=n(409),D=n(76720),E=n(38621),R=n(94011),A=n(77430),O=n(30459),P=n(11680),F=n(56149),M=n(94236),$=n(5524);let B="AgentsBlankslateBanner-module__banner--DpsVX";var V=n(25641);function U({enterprise:e,requestableOrgs:t,adminableOrgs:n}){let i=!!e?.isAdmin,a=!!e?.policyDisabled,r=t.length+n.length,l=t.find(e=>e.requestedAccess),o=n.length>0?n[0]:t[0],[d,c]=(0,v.useState)(void 0!==l?l:o),[u,m]=(0,v.useState)(d?.isAdmin||!1),[h,f]=(0,v.useState)(d?.requestedAccess||!1),[p,g]=(0,v.useState)(!1),[y,x]=(0,v.useState)(!1),[b,j]=(0,v.useState)(!1),[w,_]=(0,v.useState)(null),N=u&&!a||i,S=r>1&&!i&&!h,{sendClickAnalyticsEvent:I}=(0,O.S)(),k=(0,v.useCallback)(e=>{I({category:"member_feature_request",action:`action.copilot_coding_agent.${e}`,label:`ref_cta:${e};ref_loc:agents_blankslate;`})},[I]),L=(0,v.useCallback)(async()=>{if(d){j(!1),_(null);try{h?(await (0,R.Hy)(d.name),k("request_removed")):(await (0,R.Rp)(d.name),_(`Request sent to ${d.name}.`),k("request")),f(!h)}catch{j(!0),_(`An error occurred while ${h?"removing":"sending"} your feature request. Please try again later.`)}finally{g(!1)}}},[h,d,k]);(0,v.useEffect)(()=>{p&&L()},[L,p]),(0,v.useEffect)(()=>{y&&(async()=>{try{e&&i?(k("enterprise_enable"),window.location.href=(0,C.Wt)(e.name)):d&&(await (0,R.pf)(d.name),_(`Feature enabled for ${d.name}. It may take a few minutes for changes to take effect.`),k("org_enable"))}catch{j(!0),_("An error occurred while enabling the feature. Please try again later.")}})()},[y,i,k]);let T=1===r&&d&&!a?(0,s.jsxs)(s.Fragment,{children:["Access to Copilot coding agent has been disabled by ",(0,s.jsx)("span",{className:"text-bold",children:d.name}),"."]}):`Access to Copilot coding agent has been disabled by your ${a?"enterprise":"organizations"}.`;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(P.l,{variant:"warning",title:"Copilot coding agent access request",hideTitle:!0,className:B,"data-testid":"agents-access-request-banner",primaryAction:(0,s.jsx)(q,{canOpenMenu:S,canEnableFeature:N,accessRequested:h,isEnabling:y,isRequesting:p,setIsEnabling:x,setIsRequesting:g,setIsOrgAdmin:m,setCurrentOrg:c,adminableOrgs:n,requestableOrgs:t,setNotice:_}),children:(0,s.jsx)(P.l.Description,{children:T})}),w&&(0,s.jsx)("span",{className:`AgentsBlankslateBanner-module__notice--wwdWQ ${b?"AgentsBlankslateBanner-module__error--j2QU3":""}`,"data-testid":"access-request-notice",children:w})]})}function q({adminableOrgs:e,requestableOrgs:t,canOpenMenu:n,canEnableFeature:i,accessRequested:a,isEnabling:r,isRequesting:l,setCurrentOrg:o,setIsOrgAdmin:d,setIsEnabling:c,setIsRequesting:u,setNotice:m}){let[h,f]=(0,v.useState)(!1),p=(0,v.useRef)(null),g=(0,v.useRef)(null),y=(0,v.useId)(),x=`agents-access-banner-action-portal-${y}`;return(0,v.useEffect)(()=>{g.current&&(0,F.cw)(g.current,x)},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(P.l.PrimaryAction,{onClick:n?()=>{m(null),f(!h)}:()=>{i?c(!0):u(!0)},className:!i&&a?"AgentsBlankslateBanner-module__removeAccessButton--eEjZy":"",trailingAction:n?E.TriangleDownIcon:void 0,inactive:r,loading:l,ref:p,children:i?"Enable feature":a?"Remove request":"Request access"}),(0,s.jsx)("div",{ref:g,children:(0,s.jsx)(M.W,{open:h,onOpenChange:f,anchorRef:p,children:(0,s.jsx)(M.W.Overlay,{align:"end",portalContainerName:x,width:"small",children:(0,s.jsxs)($.l,{children:[e.length>0&&(0,s.jsxs)($.l.Group,{children:[(0,s.jsx)($.l.GroupHeading,{children:"Select organization to enable access"}),(0,s.jsx)(G,{orgs:e,setCurrentOrg:o,setIsOrgAdmin:d,setStatus:c})]}),t.length>0&&e.length>0&&(0,s.jsx)($.l.Divider,{}),t.length>0&&(0,s.jsxs)($.l.Group,{children:[(0,s.jsx)($.l.GroupHeading,{children:"Select organization to request access"}),(0,s.jsx)(G,{orgs:t,setCurrentOrg:o,setIsOrgAdmin:d,setStatus:u})]})]})})})})]})}function G({orgs:e,setCurrentOrg:t,setIsOrgAdmin:n,setStatus:i}){return e.map(e=>(0,s.jsxs)($.l.Item,{onSelect:()=>{t(e),n(e.isAdmin),i(!0)},children:[(0,s.jsx)($.l.LeadingVisual,{children:(0,s.jsx)(A.r,{src:e.avatarUrl,square:!0})}),e.name]},e.name))}function H(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(P.l,{variant:"warning",title:"Copilot coding agent access disabled",className:`${B} AgentsBlankslateBanner-module__basic--nJzrr`,hideTitle:!0,"data-testid":"agents-access-disabled-banner",children:(0,s.jsx)(P.l.Description,{children:"Access to Copilot coding agent has been disabled by your administrator."})}),t[0]=e):e=t[0],e}function K(){let e,t,n=(0,r.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(P.l.PrimaryAction,{as:"a",href:V.Zs,children:"Upgrade"}),n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)(P.l,{variant:"upsell",title:"Copilot coding agent access unavailable for plan",className:`${B} AgentsBlankslateBanner-module__upsell--XAdj_`,hideTitle:!0,primaryAction:e,"data-testid":"agents-upgrade-banner",children:(0,s.jsx)(P.l.Description,{children:"This feature is not available on your current plan."})}),n[1]=t):t=n[1],t}try{U.displayName||(U.displayName="AccessRequestBanner")}catch{}try{q.displayName||(q.displayName="RequestAccessAction")}catch{}try{G.displayName||(G.displayName="OrgActionList")}catch{}try{H.displayName||(H.displayName="AccessDisabledBanner")}catch{}try{K.displayName||(K.displayName="UpgradeBanner")}catch{}function W(e){let t,n,i,a,l,o,d,c,u,h,p=(0,r.c)(20),{hasCEorCBAccess:g,memberRequestEntities:y}=e;p[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.G7)("copilot_agents_blankslate_mem_requests"),p[0]=t):t=p[0];let x=t;p[1]!==y?.orgs?.requestable?(n=y?.orgs?.requestable||[],p[1]=y?.orgs?.requestable,p[2]=n):n=p[2];let v=n;p[3]!==y?.orgs?.adminable?(i=y?.orgs?.adminable||[],p[3]=y?.orgs?.adminable,p[4]=i):i=p[4];let b=i,j=v.length+b.length>0,w=x&&y&&(j||y.enterprise);return p[5]===Symbol.for("react.memo_cache_sentinel")?(a=(0,s.jsx)(D.E.Visual,{children:(0,s.jsx)(E.AgentIcon,{size:24})}),l=(0,s.jsx)(D.E.Heading,{children:"Delegate tasks to GitHub Copilot coding agent"}),o=(0,s.jsx)(D.E.Description,{children:"Let Copilot work independently in the background to complete tasks, and then monitor Copilot's progress."}),d=(0,s.jsx)(D.E.SecondaryAction,{href:"https://docs.github.com/en/copilot/how-tos/agents/copilot-coding-agent/enabling-copilot-coding-agent",children:"Learn more about Copilot coding agent"}),p[5]=a,p[6]=l,p[7]=o,p[8]=d):(a=p[5],l=p[6],o=p[7],d=p[8]),p[9]!==b||p[10]!==g||p[11]!==y||p[12]!==v||p[13]!==w?(c=!0===g&&(w?(0,s.jsx)(U,{enterprise:y.enterprise,requestableOrgs:v,adminableOrgs:b}):(0,s.jsx)(H,{})),p[9]=b,p[10]=g,p[11]=y,p[12]=v,p[13]=w,p[14]=c):c=p[14],p[15]!==g?(u=!1===g&&(0,s.jsx)(K,{}),p[15]=g,p[16]=u):u=p[16],p[17]!==c||p[18]!==u?(h=(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(f.Zf.Container,{width:"large",children:(0,s.jsxs)(D.E,{size:"medium",className:"AgentsBlankslate-module__blankslate--h3RJ8",children:[a,l,o,d,c,u]})})}),p[17]=c,p[18]=u,p[19]=h):h=p[19],h}try{W.displayName||(W.displayName="AgentsBlankslate")}catch{}var z=n(30388);let Q="TaskList-module__button--FzNZb",Z="TaskList-module__counter--suSM7";var J=n(62935);let Y="TaskListItem-module__description--GUKJ9";var X=n(67154),ee=n(82595);let et="PullRequestDiffSummaryText-module__prDiffSummary--EzG14";function en(e){let t,n,i,a,l,o,d,c=(0,r.c)(17),{prDiffSummary:u}=e;return u&&(0!==u.lines_added||0!==u.lines_deleted)?(c[0]!==u.lines_added?(t=u.lines_added.toLocaleString(),c[0]=u.lines_added,c[1]=t):t=c[1],c[2]!==t?(n=(0,s.jsxs)("span",{"aria-hidden":"true",className:`${et} PullRequestDiffSummaryText-module__added--I0cdZ`,children:["+",t]}),c[2]=t,c[3]=n):n=c[3],c[4]!==u.lines_deleted?(i=u.lines_deleted.toLocaleString(),c[4]=u.lines_deleted,c[5]=i):i=c[5],c[6]!==i?(a=(0,s.jsxs)("span",{"aria-hidden":"true",className:`${et} PullRequestDiffSummaryText-module__deleted--M94wu`,children:["-",i]}),c[6]=i,c[7]=a):a=c[7],c[8]!==u.lines_added||c[9]!==u.lines_deleted?(l=function({linesAdded:e,linesDeleted:t}){let n="Lines changed: ";return n+`${e} ${1===e?"addition":"additions"} & ${t} ${1===t?"deletion":"deletions"}`}({linesAdded:u.lines_added,linesDeleted:u.lines_deleted}),c[8]=u.lines_added,c[9]=u.lines_deleted,c[10]=l):l=c[10],c[11]!==l?(o=(0,s.jsx)("span",{className:"sr-only",children:l}),c[11]=l,c[12]=o):o=c[12],c[13]!==n||c[14]!==a||c[15]!==o?(d=(0,s.jsxs)(x.B,{direction:"horizontal",gap:"condensed",children:[n,a,o]}),c[13]=n,c[14]=a,c[15]=o,c[16]=d):d=c[16],d):null}try{en.displayName||(en.displayName="PullRequestDiffSummaryText")}catch{}var ei=n(44334),ea=n(62189),es=n(45244);let er=e=>{let t,n,i,a=(0,r.c)(7),{text:l}=e,[o,d]=(0,v.useState)(null),[c,u]=(0,v.useState)("none");a[0]!==o||a[1]!==l?(t=()=>{if(null===o)return void d(l);if(l!==o){u("exiting");let e=setTimeout(()=>{d(l),u("entering")},400);return()=>clearTimeout(e)}},n=[l,o],a[0]=o,a[1]=l,a[2]=t,a[3]=n):(t=a[2],n=a[3]),(0,v.useEffect)(t,n);let m=`TaskListItem-module__fadeText--giNoG ${"entering"===c?"TaskListItem-module__entering--aB9fl":"exiting"===c?"TaskListItem-module__exiting--m4Koz":null}`;return a[4]!==o||a[5]!==m?(i=(0,s.jsx)("span",{className:m,children:o}),a[4]=o,a[5]=m,a[6]=i):i=a[6],i};function el(e){let t,n,i,a,l,o,d,c,u,m,h,f=(0,r.c)(39),{state:p,revisionCount:g,startedAt:x,prState:b,prUrl:j,prTitle:w,prNwo:_,prNumber:C,prGlobalId:N,prInMergeQueue:S,prDiffSummary:I}=e,[k,L]=(0,v.useState)(null),[T,D]=(0,v.useState)(!1);f[0]!==S||f[1]!==b||f[2]!==p?(t="merged"===b?"Merged":"closed"===b?"Closed":S?"Queued to merge":p&&(0,X.wG)(p)||"",f[0]=S,f[1]=b,f[2]=p,f[3]=t):t=f[3];let E=t;f[4]!==S||f[5]!==b||f[6]!==p?(n=(0,ei.T)(b,S,p),f[4]=S,f[5]=b,f[6]=p,f[7]=n):n=f[7];let R=n;f[8]!==k||f[9]!==R?(i=()=>{if(!k)return void L(R);if(k.icon!==R.icon){D(!0);let e=setTimeout(()=>{L(R),D(!1)},300);return()=>clearTimeout(e)}},a=[R,k],f[8]=k,f[9]=R,f[10]=i,f[11]=a):(i=f[10],a=f[11]),(0,v.useEffect)(i,a);let A=g>0?`${g} revision${g>1?"s":""} \xb7 `:null,O=j,P=(0,y.u)("copilot_swe_agent_progress_commands");if(P){let e;f[12]!==N?(e=(0,ea.U)(N),f[12]=N,f[13]=e):e=f[13],O=e}let F=!P,M=`TaskListItem-module__iconTransition--h8TDX ${T?"TaskListItem-module__fadeOut--TTRa9":""}`;return f[14]!==R||f[15]!==M?(l=(0,s.jsx)(z.qJ.Item.LeadingVisual,{children:(0,s.jsx)(ee.I,{...R,className:M})}),f[14]=R,f[15]=M,f[16]=l):l=f[16],f[17]!==w?(o=(0,s.jsx)(z.qJ.Item.Title,{children:w}),f[17]=w,f[18]=o):o=f[18],f[19]!==I||f[20]!==p?(d=p&&"in_progress"!==p&&I&&(0,s.jsx)(z.qJ.Item.Actions,{children:(0,s.jsx)(en,{prDiffSummary:I})}),f[19]=I,f[20]=p,f[21]=d):d=f[21],f[22]!==x?(c=(0,s.jsx)(J.A,{format:"micro",datetime:x}),f[22]=x,f[23]=c):c=f[23],f[24]!==E?(u=(0,s.jsx)(er,{text:E}),f[24]=E,f[25]=u):u=f[25],f[26]!==C||f[27]!==_||f[28]!==A||f[29]!==c||f[30]!==u?(m=(0,s.jsx)(z.qJ.Item.Description,{children:(0,s.jsxs)("span",{className:Y,children:[_,"#",C," \xb7 started ",c," ago \xb7"," ",A,u]})}),f[26]=C,f[27]=_,f[28]=A,f[29]=c,f[30]=u,f[31]=m):m=f[31],f[32]!==m||f[33]!==F||f[34]!==l||f[35]!==o||f[36]!==d||f[37]!==O?(h=(0,s.jsxs)(z.qJ.Item,{href:O,isExternalLink:F,children:[l,o,d,m]}),f[32]=m,f[33]=F,f[34]=l,f[35]=o,f[36]=d,f[37]=O,f[38]=h):h=f[38],h}function eo(e){let t,n,i,a,l=(0,r.c)(7),{repositoryNwo:o}=e,d=`Creating task in ${o}`;return l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)(z.qJ.Item.LeadingVisual,{children:(0,s.jsx)(ee.I,{icon:E.DotFillIcon,color:"var(--fgColor-attention)"})}),l[0]=t):t=l[0],l[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,s.jsx)(z.qJ.Item.Title,{children:(0,s.jsx)(es.b,{className:"fgColor-muted",children:"Creating task"})}),l[1]=n):n=l[1],l[2]!==o?(i=(0,s.jsxs)(z.qJ.Item.Description,{children:[(0,s.jsx)("span",{className:Y,children:o})," \xb7 Initializing pull request\u2026"]}),l[2]=o,l[3]=i):i=l[3],l[4]!==d||l[5]!==i?(a=(0,s.jsxs)(z.qJ.Item,{"aria-label":d,children:[t,n,i]}),l[4]=d,l[5]=i,l[6]=a):a=l[6],a}try{er.displayName||(er.displayName="FadeText")}catch{}try{el.displayName||(el.displayName="TaskListItem")}catch{}try{(i=function(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(z.qJ.Item.Skeleton,{}),t[0]=e):e=t[0],e}).displayName||(i.displayName="LoadingTaskListItem")}catch{}try{eo.displayName||(eo.displayName="OptimisticTaskListItem")}catch{}function ed(e){let t,n=(0,r.c)(3),{tasks:i,isError:a}=e;return n[0]!==a||n[1]!==i?(t=(0,s.jsx)(z.qJ.List,{id:"tasks-list","aria-labelledby":"open-tab",children:a?(0,s.jsxs)(z.qJ.EmptyState,{children:[(0,s.jsx)(E.AlertIcon,{size:24}),(0,s.jsx)("p",{children:"Sorry, something went wrong"})]}):0===i.length?(0,s.jsx)(z.qJ.EmptyState,{children:(0,s.jsx)("p",{children:"No open tasks yet. Start a new task to see it here."})}):(0,s.jsx)(s.Fragment,{children:i.map(ec)})}),n[0]=a,n[1]=i,n[2]=t):t=n[2],t}function ec(e){return e.isOptimistic?(0,s.jsx)(eo,{title:`Creating: ${e.problemStatement??""}`,repositoryNwo:e.nwo??""},e.clientGeneratedId):e.pull&&(0,s.jsx)(el,{state:e.latest_session_state,startedAt:e.latest_session_updated_at,revisionCount:e.session_count-1,prState:e.pull.state,prUrl:e.pull.url,prTitle:e.pull.title,prNwo:e.pull.repository_nwo,prNumber:e.pull.number,prGlobalId:e.pull.global_relay_id,prInMergeQueue:e.pull.inMergeQueue??!1,prDiffSummary:e.pull.pr_diff_summary},e.pull.id)}try{ed.displayName||(ed.displayName="OpenTaskList")}catch{}function eu(e){let t,n,i=(0,r.c)(5),{tasks:a,isError:l}=e;return i[0]!==l||i[1]!==a?(t=l?(0,s.jsxs)(z.qJ.EmptyState,{children:[(0,s.jsx)(E.AlertIcon,{size:24}),(0,s.jsx)("p",{children:"Sorry, something went wrong"})]}):0===a.length?(0,s.jsx)(z.qJ.EmptyState,{children:(0,s.jsx)("p",{children:"No closed tasks yet."})}):a.map(em),i[0]=l,i[1]=a,i[2]=t):t=i[2],i[3]!==t?(n=(0,s.jsx)(z.qJ.List,{id:"tasks-list","aria-labelledby":"closed-tab",children:t}),i[3]=t,i[4]=n):n=i[4],n}function em(e){return(0,s.jsx)(el,{state:e.latest_session_state,startedAt:e.latest_session_updated_at,revisionCount:e.session_count-1,prState:e.pull.state,prUrl:e.pull.url,prTitle:e.pull.title,prNwo:e.pull.repository_nwo,prNumber:e.pull.number,prGlobalId:e.pull.global_relay_id,prInMergeQueue:e.pull.inMergeQueue??!1,prDiffSummary:e.pull.pr_diff_summary},e.pull.id)}try{eu.displayName||(eu.displayName="ClosedTaskList")}catch{}function eh(e){let t,n,i,a,l,o,d,c,u,m,h,f=(0,r.c)(31),{tasks:p,isError:g,activeTab:y,setActiveTab:x}=e;f[0]!==p?(t=p.filter(ep),f[0]=p,f[1]=t):t=f[1];let v=t;f[2]!==p?(n=p.filter(ef),f[2]=p,f[3]=n):n=f[3];let b=n;f[4]!==x?(i=()=>x("open"),f[4]=x,f[5]=i):i=f[5];let j="open"===y;f[6]!==v.length?(a=(0,s.jsx)("span",{className:Z,children:v.length}),f[6]=v.length,f[7]=a):a=f[7],f[8]!==i||f[9]!==j||f[10]!==a?(l=(0,s.jsxs)("button",{onClick:i,role:"tab","aria-selected":j,"aria-controls":"tasks-list",id:"open-tab",className:Q,children:["Open ",a]}),f[8]=i,f[9]=j,f[10]=a,f[11]=l):l=f[11],f[12]!==x?(o=()=>x("closed"),f[12]=x,f[13]=o):o=f[13];let w="closed"===y;return f[14]!==b.length?(d=(0,s.jsx)("span",{className:Z,children:b.length}),f[14]=b.length,f[15]=d):d=f[15],f[16]!==o||f[17]!==w||f[18]!==d?(c=(0,s.jsxs)("button",{onClick:o,role:"tab","aria-selected":w,"aria-controls":"tasks-list",id:"closed-tab",className:Q,children:["Closed ",d]}),f[16]=o,f[17]=w,f[18]=d,f[19]=c):c=f[19],f[20]!==c||f[21]!==l?(u=(0,s.jsx)(z.qJ.Header,{children:(0,s.jsxs)("div",{role:"tablist","aria-label":"Filter pull requests",className:"TaskList-module__filterButtons--DNyGe",children:[l,c]})}),f[20]=c,f[21]=l,f[22]=u):u=f[22],f[23]!==y||f[24]!==b||f[25]!==g||f[26]!==v?(m="open"===y?(0,s.jsx)(ed,{tasks:v,isError:g}):(0,s.jsx)(eu,{tasks:b,isError:g}),f[23]=y,f[24]=b,f[25]=g,f[26]=v,f[27]=m):m=f[27],f[28]!==u||f[29]!==m?(h=(0,s.jsxs)(z.qJ,{children:[u,m]}),f[28]=u,f[29]=m,f[30]=h):h=f[30],h}function ef(e){return!!(e.pull&&("merged"===e.pull.state||"closed"===e.pull.state))}function ep(e){return!e.pull||"merged"!==e.pull.state&&"closed"!==e.pull.state}try{eh.displayName||(eh.displayName="TaskList")}catch{}function eg(){let e,t,n,i=(0,r.c)(7),{agentsEnabled:a,hasCEorCBAccess:o,memberRequestEntities:d}=(0,g.X)();i[0]!==a?(e=(0,m.G7)("copilot_chat_agents_empty_state")&&!a,i[0]=a,i[1]=e):e=i[1];let c=e;return i[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)(p.P.Sidebar,{children:(0,s.jsx)(l.U,{})}),i[2]=t):t=i[2],i[3]!==o||i[4]!==d||i[5]!==c?(n=(0,s.jsx)(b.Fn,{children:(0,s.jsxs)(p.P,{"data-testid":"agents-layout",children:[t,(0,s.jsx)(p.P.ColumnLeft,{children:c?(0,s.jsx)(W,{hasCEorCBAccess:o,memberRequestEntities:d}):(0,s.jsx)(ey,{})})]})}),i[3]=o,i[4]=d,i[5]=c,i[6]=n):n=i[6],n}function ey(){let e,t,n,i,a,l,m,p,b,C,D,E,R,A,O,P,F,M,$,B,V,U,q,G=(0,r.c)(39),[H,K]=(0,v.useState)("open"),{sessionsPollingInterval:W,showCopilotCodingAgentPremiumRequestsBanner:z,tasks:Q,pullRequestsMap:Z}=(0,g.X)(),J=(0,y.u)("copilot_agent_task_list_v2"),Y=(0,v.useRef)(!1);G[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],G[0]=e):e=G[0];let[X,ee]=(0,v.useState)(e);(0,j._)(),G[1]!==Z||G[2]!==Q||G[3]!==W?(t={sessionsPollingInterval:W,initialTasks:Q,initialPullRequestsMap:Z},G[1]=Z,G[2]=Q,G[3]=W,G[4]=t):t=G[4];let{tasks:et,isError:en}=(0,S.si)(t);G[5]===Symbol.for("react.memo_cache_sentinel")?(n={onError:(e,t)=>{ee(n=>[...n,{...t,error:e,baseRef:t.baseRef,timestamp:new Date().toISOString()}])}},G[5]=n):n=G[5];let{createTask:ei}=(0,w.Z)(n),ea=(0,o.b)();G[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>((0,u.D)("Agents \xb7 GitHub Copilot"),(0,h.BI)("agent_sessions.task_view",{target:"AGENTS_VIEW_LOADED",defaultToTask:d.W.defaultToTaskInput,defaultToTaskControl:d.W.defaultToTaskControl}),()=>{Y.current||"/copilot"!==window.location.pathname||(0,h.BI)("dotcom_chat.activate",{target:"AGENTS_BOUNCE_TO_CHAT",mode:"immersive",defaultToTask:d.W.defaultToTaskInput,defaultToTaskControl:d.W.defaultToTaskControl})}),a=[],G[6]=i,G[7]=a):(i=G[6],a=G[7]),(0,v.useEffect)(i,a),G[8]!==ea?(l=()=>{ea.selectThread(null,{includeThreads:!1,clearTopic:!0})},m=[ea],G[8]=ea,G[9]=l,G[10]=m):(l=G[9],m=G[10]),(0,v.useEffect)(l,m),G[11]!==ei||G[12]!==ea?(p=async(e,t,n,i,a,s,r)=>{Y.current=!0;let l=e.trim();""!==l&&n&&""!==n.trim()&&(t?(K("open"),ei({nwo:t.nameWithOwner,problemStatement:l,baseRef:n,eventType:"agents_page",eventContent:l,selectedAgent:i,modelId:s,createPullRequest:r})):ea.sendChatMessage({content:l,thread:null,references:[]}))},G[11]=ei,G[12]=ea,G[13]=p):p=G[13];let es=p;U=(0,r.c)(5),q=(0,v.useRef)(es),U[0]!==es?(M=()=>{q.current=es},$=[es],U[0]=es,U[1]=M,U[2]=$):(M=U[1],$=U[2]),(0,v.useEffect)(M,$),U[3]===Symbol.for("react.memo_cache_sentinel")?(B=()=>{let e=_.Jt.getTaskEntrypointMessage();e&&(_.Jt.setTaskEntrypointMessage(null),N(e.message,q))},V=[],U[3]=B,U[4]=V):(B=U[3],V=U[4]),(0,v.useEffect)(B,V),G[14]!==ei||G[15]!==X?(b=e=>{let t=X[e];t&&(ee(t=>t.filter((t,n)=>n!==e)),ei({nwo:t.nwo,problemStatement:t.problemStatement,baseRef:t.baseRef,eventType:"agents_page"}))},G[14]=ei,G[15]=X,G[16]=b):b=G[16];let er=b,[el,eo]=(0,v.useState)(!1);return G[17]!==el||G[18]!==z?(C=z&&!el&&(0,s.jsx)(f.Zf.Banner,{children:(0,s.jsx)(k.C,{onBannerDismiss:()=>eo(!0)})}),G[17]=el,G[18]=z,G[19]=C):C=G[19],G[20]===Symbol.for("react.memo_cache_sentinel")?(D=(0,s.jsxs)(f.Zf.Header,{children:[(0,s.jsx)(f.Zf.Title,{children:"Agents"}),(0,s.jsx)(f.Zf.Description,{children:"Delegate tasks to GitHub Copilot coding agent to work on in the background, and then monitor Copilot's progress."})]}),G[20]=D):D=G[20],G[21]!==es?(E=(0,s.jsx)(I.Q,{handleUserSubmit:es,eventType:"agents_page"}),G[21]=es,G[22]=E):E=G[22],G[23]!==X||G[24]!==er?(R=X.length>0&&(0,s.jsx)(x.B,{direction:"vertical",className:"AgentsView-module__failedTaskCreationBanners--bUn1A",children:X.map((e,t)=>(0,s.jsx)(L.Q,{problemStatement:e?.problemStatement,handleRetry:()=>er(t),handleDismiss:()=>{ee(e=>e.filter((e,n)=>n!==t))}},`${e?.nwo}-${e?.problemStatement}-${e?.timestamp}`))}),G[23]=X,G[24]=er,G[25]=R):R=G[25],G[26]!==E||G[27]!==R?(A=(0,s.jsxs)(f.Zf.Section,{children:[E,R]}),G[26]=E,G[27]=R,G[28]=A):A=G[28],G[29]!==H||G[30]!==en||G[31]!==J||G[32]!==et?(O=(0,s.jsx)(f.Zf.Section,{children:J?(0,s.jsx)(c.f,{title:"Recent sessions",initialResultCount:25,showPillMenu:!0}):(0,s.jsx)(eh,{tasks:et,isError:en,activeTab:H,setActiveTab:K})}),G[29]=H,G[30]=en,G[31]=J,G[32]=et,G[33]=O):O=G[33],G[34]===Symbol.for("react.memo_cache_sentinel")?(P=(0,s.jsx)(T.C,{}),G[34]=P):P=G[34],G[35]!==A||G[36]!==O||G[37]!==C?(F=(0,s.jsxs)(f.Zf.Container,{noHeader:!0,width:"small",children:[C,D,A,O,P]}),G[35]=A,G[36]=O,G[37]=C,G[38]=F):F=G[38],F}try{eg.displayName||(eg.displayName="AgentsViewWrapper")}catch{}try{ey.displayName||(ey.displayName="AgentsView")}catch{}var ex=n(55248),ev=n(51213),eb=n(79184),ej=n(98866),ew=n(72259),e_=n(73678),eC=n(25811),eN=n(86101),eS=n(78223);function eI(e){let t,n,i=(0,r.c)(5),{selectedAgent:a}=e,{plan:l}=(0,eb.xR)(),[o,c]=(0,ej.N)(),{models:u}=(0,ew.h)(),[m]=(0,eC.s)(),h=a??m,{data:f}=(0,eN.B)(h.topLevelAgentId?Number(h.topLevelAgentId):null);return d.W.codingAgentModelSelection&&(d.W.codingAgentModelSelectionAllSkus||l===ev.UH.IndividualPro||l===ev.UH.IndividualProPlus)&&(0,eS.CF)(h,f?.slug)&&u&&0!==u.length?(i[0]!==c?(t=e=>{c(e)},i[0]=c,i[1]=t):t=i[1],i[2]!==o||i[3]!==t?(n=(0,s.jsx)(e_.Y,{onUpdateModel:t,selectedModelId:o}),i[2]=o,i[3]=t,i[4]=n):n=i[4],n):null}try{eI.displayName||(eI.displayName="SlashCommandModelPicker")}catch{}let ek=/\/copilot\/agents/,eL=`${V.Jz}/agents`;let AgentsPlugin=class AgentsPlugin{constructor(e=!1,t,n=!1){(0,a._)(this,"id",C.Dv),(0,a._)(this,"displayName",C.Ff),(0,a._)(this,"createTaskFromInput",void 0),(0,a._)(this,"handleUserSubmitRef",void 0),(0,a._)(this,"agentsEnabled",void 0),(0,a._)(this,"skipSyncRouteToThread",!0),(0,a._)(this,"components",[{id:"agents-view",Component:eg,routes:[ek]}]),(0,a._)(this,"slashCommand",{key:"task",name:"Task",description:"Give Copilot coding agent a background task",icon:E.AgentIcon,isNew:!0,order:1,enabled:()=>this.agentsEnabled,disabledAction:e=>{e(eL,{preventTurbo:!0})},execute:async(e,t,n)=>!(this.agentsEnabled&&t.selectedThreadID&&(0,m.G7)("copilot_immersive_task_within_chat_thread"))&&(this.agentsEnabled&&this.createTaskFromInput&&this.handleUserSubmitRef?N(e,this.handleUserSubmitRef):(_.Jt.setTaskEntrypointMessage(e),n(eL,{preventTurbo:!0})),!0),suggestions:["Identify and suggest improvements to slow or inefficient code","Find and refactor duplicated code","Suggest more descriptive variable and function names"],mode:{name:ev.II.Task,icon:E.AgentIcon,supportsAutocompletion:!0},customModelPicker:({selectedAgent:e})=>(0,s.jsx)(eI,{selectedAgent:e})}),(0,a._)(this,"navigationItems",[{id:C.Dv,displayName:"Agents",href:C.pr,icon:ex.p}]),this.createTaskFromInput=e,this.handleUserSubmitRef=t,this.agentsEnabled=n}}},59370:(e,t,n)=>{function i(e){return/^@today([+-]\d+[dwmy])?$/.test(e)}function a(e){if(e.startsWith("@"))return!1;let t=new Date(e);return!isNaN(t.getTime())&&(!e.match(/^\d{4}-\d{2}-\d{2}$/)||l(t)===e)}function s(e){return i(e)||a(e)}function r(e){return e.startsWith("@")&&!i(e)?null:i(e)?function(e){if(!i(e))return{date:null,error:`Invalid macro format: ${e}`};let t=new Date;if("@today"===e)return{date:t};let n=e.match(/^@today([+-])(\d+)([dwmy])$/);if(!n)return{date:null,error:`Invalid macro format: ${e}`};let[,a,s,r]=n;if(!a||!s||!r)return{date:null,error:`Invalid macro format: ${e}`};let l=parseInt(s,10),o="+"===a,d=new Date(t);switch(r){case"d":d.setDate(d.getDate()+(o?l:-l));break;case"w":d.setDate(d.getDate()+(o?7*l:-(7*l)));break;case"m":d.setMonth(d.getMonth()+(o?l:-l));break;case"y":d.setFullYear(d.getFullYear()+(o?l:-l));break;default:return{date:null,error:`Invalid unit: ${r}`}}return{date:d}}(e).date:a(e)?new Date(e):null}function l(e){let t=e.toISOString();return t.split("T")[0]??t.substring(0,10)}n.d(t,{O2:()=>l,Qf:()=>r,Yj:()=>s,nS:()=>i})},60209:(e,t,n)=>{n.d(t,{J1:()=>d,Os:()=>l,QK:()=>o,S$:()=>a,bW:()=>u,km:()=>r,lh:()=>s,qe:()=>c});var i=n(25641);let a="loops",s="loops",r="loop",l="Loops",o=`${i.Jz}/loops`,d=`${i.Jz}/l`,c=/\/copilot\/loops/,u=/\/copilot\/l\/([a-zA-Z0-9-]+)/},61219:(e,t,n)=>{n.d(t,{U:()=>ev});var i=n(74848),a=n(68273),s=n(21728),r=n(42118),l=n(26156),o=n(18559),d=n(81156),c=n(63352),u=n(73189),m=n(78809),h=n(73017),f=n(71315),p=n(43258),g=n(38621),y=n(72511),x=n(59394),v=n(34164),b=n(96540),j=n(25407),w=n(94747),_=n(27011),C=n(1932),N=n(96379);let S=(0,a.Z6)()?function(){let e,t=(0,s.c)(2),{updateThreads:n}=(0,_.an)();return t[0]!==n?(e={mutationFn:I,onSuccess:(e,t)=>{n((0,C.jM)(e=>{let n=e.flatMap(e=>e.commentsData?.comments.filter(e=>e.author?.login===t.userLogin));if(0!==n.length)for(let e of n)e&&(e.viewerCanBlockFromOrg=!1,e.viewerCanUnblockFromOrg=!0,e.isHidden=t.shouldHideComment||e.isHidden,e.minimizedReason=t.hiddenReason||null)}))}},t[0]=n,t[1]=e):e=t[1],(0,w.n)(e)}:function(){let{updateThreads:e}=(0,_.an)();return(0,w.n)({mutationFn:async({duration:e,hiddenReason:t,organizationLogin:n,notifyBlockedUser:i,shouldHideComment:a,userLogin:s})=>{let r=new FormData;r.append("duration",e),r.append("hide_comment",a.toString()),t&&r.append("hidden_reason",t),r.append("login",s),r.append("send_notification",i.toString()),await (0,N.DI)((0,j.ggd)({owner:n}),{method:"POST",body:r,redirect:"manual"})},onSuccess:(t,n)=>{e((0,C.jM)(e=>{let t=e.flatMap(e=>e.commentsData?.comments.filter(e=>e.author?.login===n.userLogin));if(0!==t.length)for(let e of t)e&&(e.viewerCanBlockFromOrg=!1,e.viewerCanUnblockFromOrg=!0,e.isHidden=n.shouldHideComment||e.isHidden,e.minimizedReason=n.hiddenReason||null)}))}})};async function I(e){let{duration:t,hiddenReason:n,organizationLogin:i,notifyBlockedUser:a,shouldHideComment:s,userLogin:r}=e,l=new FormData;l.append("duration",t),l.append("hide_comment",s.toString()),n&&l.append("hidden_reason",n),l.append("login",r),l.append("send_notification",a.toString()),await (0,N.DI)((0,j.ggd)({owner:i}),{method:"POST",body:l,redirect:"manual"})}var k=n(48845);let L=(0,a.Z6)()?function(e){let t,n,i,a=(0,s.c)(15),{filePath:r,lineMarkersKey:l,onSuccess:o}=e,d=(0,_.Kp)(),{deleteThreadComment:c}=(0,_.an)(),{onCommentThreadDeleted:u}=(0,_.Ud)(),m=(0,_.SM)(),{removePendingComment:h}=(0,_._N)();return a[0]!==d||a[1]!==r||a[2]!==m||a[3]!==l?(t=async e=>{let{commentId:t,threadId:n}=e,i=m(Number(n),r,l)?.commentsData?.comments?.find(e=>e.id===t);if(!i)return;let a=`${d}/page_data/review_comments/${i.databaseId}`,s=await (0,k.q$)(`${a}`,{method:"DELETE"});if(204===s.status||200===s.status)return;let o=await (0,k.hp)(s);(0,k.R)(s,o)},a[0]=d,a[1]=r,a[2]=m,a[3]=l,a[4]=t):t=a[4],a[5]!==c||a[6]!==r||a[7]!==l||a[8]!==u||a[9]!==o||a[10]!==h?(n=(e,t)=>{let{commentId:n,threadId:i}=t,a=c(Number(i),n,r,l);h(Number(i)),"thread_deleted"===a&&("thread_deleted"===a&&u({path:r,threadID:i}),o?.())},a[5]=c,a[6]=r,a[7]=l,a[8]=u,a[9]=o,a[10]=h,a[11]=n):n=a[11],a[12]!==t||a[13]!==n?(i={mutationFn:t,onSuccess:n},a[12]=t,a[13]=n,a[14]=i):i=a[14],(0,w.n)(i)}:function({filePath:e,lineMarkersKey:t,onSuccess:n}){let i=(0,_.Kp)(),{deleteThreadComment:a}=(0,_.an)(),{onCommentThreadDeleted:s}=(0,_.Ud)(),r=(0,_.SM)(),{removePendingComment:l}=(0,_._N)();return(0,w.n)({mutationFn:async({commentId:n,threadId:a})=>{let s=r(Number(a),e,t)?.commentsData?.comments?.find(e=>e.id===n);if(!s)return;let l=`${i}/page_data/review_comments/${s.databaseId}`,o=await (0,k.q$)(`${l}`,{method:"DELETE"});if(204===o.status||200===o.status)return;let d=await (0,k.hp)(o);(0,k.R)(o,d)},onSuccess:(i,{commentId:r,threadId:o})=>{let d=a(Number(o),r,e,t);l(Number(o)),"thread_deleted"===d&&("thread_deleted"===d&&s({path:e,threadID:o}),n?.())}})};var T=n(20622);let D=(0,a.Z6)()?function(e,t){let n,i,a,r=(0,s.c)(9),l=(0,_.Kp)(),o=`${l}/page_data/${T.uT.hideComment}`,{updateThreadComment:d}=(0,_.an)();return r[0]!==o?(n=async e=>{let{commentDatabaseId:t,reason:n}=e,i=await (0,k.q$)(o,{method:"POST",body:{classifier:n,commentId:t}}),a=await (0,k.hp)(i);return(0,k.R)(i,a),a},r[0]=o,r[1]=n):n=r[1],r[2]!==e||r[3]!==t||r[4]!==d?(i=n=>{d({threadID:n.threadId,filePath:e,lineMarkersKey:t,match:e=>e.databaseId===n.commentDatabaseId,transform:e=>{if(e)return{...e,isHidden:!0,minimizedReason:n.reason}}})},r[2]=e,r[3]=t,r[4]=d,r[5]=i):i=r[5],r[6]!==n||r[7]!==i?(a={mutationFn:n,onSuccess:i},r[6]=n,r[7]=i,r[8]=a):a=r[8],(0,w.n)(a)}:function(e,t){let n=(0,_.Kp)(),i=`${n}/page_data/${T.uT.hideComment}`,{updateThreadComment:a}=(0,_.an)();return(0,w.n)({mutationFn:async({commentDatabaseId:e,reason:t})=>{let n=await (0,k.q$)(i,{method:"POST",body:{classifier:t,commentId:e}}),a=await (0,k.hp)(n);return(0,k.R)(n,a),a},onSuccess:n=>{a({threadID:n.threadId,filePath:e,lineMarkersKey:t,match:e=>e.databaseId===n.commentDatabaseId,transform:e=>{if(e)return{...e,isHidden:!0,minimizedReason:n.reason}}})}})},E=(0,a.Z6)()?function(e,t){let n,i,a,r=(0,s.c)(9),l=(0,_.Kp)(),{updateThreadComment:o}=(0,_.an)();return r[0]!==l?(n=async e=>{let{commentDatabaseId:t,reaction:n,viewerHasReacted:i}=e,a=`${l}/page_data/${i?T.uT.removeCommentReaction:T.uT.addCommentReaction}`,s=await (0,k.q$)(a,{method:"POST",body:{reaction:n,commentId:t}}),r=await (0,k.hp)(s);return(0,k.R)(s,r),r},r[0]=l,r[1]=n):n=r[1],r[2]!==e||r[3]!==t||r[4]!==o?(i=(n,i)=>{o({threadID:parseInt(i.threadId),filePath:e,lineMarkersKey:t,match:e=>e.databaseId===i.commentDatabaseId,transform:e=>{if(e)return{...e,reactionGroups:n.reactionGroups}}})},r[2]=e,r[3]=t,r[4]=o,r[5]=i):i=r[5],r[6]!==n||r[7]!==i?(a={mutationFn:n,onSuccess:i},r[6]=n,r[7]=i,r[8]=a):a=r[8],(0,w.n)(a)}:function(e,t){let n=(0,_.Kp)(),{updateThreadComment:i}=(0,_.an)();return(0,w.n)({mutationFn:async({commentDatabaseId:e,reaction:t,viewerHasReacted:i})=>{let a=`${n}/page_data/${i?T.uT.removeCommentReaction:T.uT.addCommentReaction}`,s=await (0,k.q$)(a,{method:"POST",body:{reaction:t,commentId:e}}),r=await (0,k.hp)(s);return(0,k.R)(s,r),r},onSuccess:(n,a)=>{i({threadID:parseInt(a.threadId),filePath:e,lineMarkersKey:t,match:e=>e.databaseId===a.commentDatabaseId,transform:e=>{if(e)return{...e,reactionGroups:n.reactionGroups}}})}})},R=(0,a.Z6)()?function(){let e,t=(0,s.c)(2),{updateThreads:n}=(0,_.an)();return t[0]!==n?(e={mutationFn:A,onSuccess:(e,t)=>{n((0,C.jM)(e=>{let n=e.flatMap(e=>e.commentsData?.comments.filter(e=>e.author?.login===t.userLogin));if(0!==n.length)for(let e of n)e&&(e.viewerCanBlockFromOrg=!0,e.viewerCanUnblockFromOrg=!1)}))}},t[0]=n,t[1]=e):e=t[1],(0,w.n)(e)}:function(){let{updateThreads:e}=(0,_.an)();return(0,w.n)({mutationFn:async({organizationLogin:e,userLogin:t})=>{await (0,k.q$)(`${(0,j.ggd)({owner:e})}/${(0,j.QU3)(t)}`,{method:"DELETE",redirect:"manual"})},onSuccess:(t,n)=>{e((0,C.jM)(e=>{let t=e.flatMap(e=>e.commentsData?.comments.filter(e=>e.author?.login===n.userLogin));if(0!==t.length)for(let e of t)e&&(e.viewerCanBlockFromOrg=!0,e.viewerCanUnblockFromOrg=!1)}))}})};async function A(e){let{organizationLogin:t,userLogin:n}=e;await (0,k.q$)(`${(0,j.ggd)({owner:t})}/${(0,j.QU3)(n)}`,{method:"DELETE",redirect:"manual"})}let O=(0,a.Z6)()?function(e,t){let n,i,a,r=(0,s.c)(9),l=(0,_.Kp)(),o=`${l}/page_data/${T.uT.unhideComment}`,{updateThreadComment:d}=(0,_.an)();return r[0]!==o?(n=async e=>{let{commentDatabaseId:t}=e,n=await (0,k.q$)(o,{method:"POST",body:{commentId:t}}),i=await (0,k.hp)(n);return(0,k.R)(n,i),i},r[0]=o,r[1]=n):n=r[1],r[2]!==e||r[3]!==t||r[4]!==d?(i=n=>{d({threadID:n.threadId,filePath:e,lineMarkersKey:t,match:e=>e.databaseId===n.commentDatabaseId,transform:P})},r[2]=e,r[3]=t,r[4]=d,r[5]=i):i=r[5],r[6]!==n||r[7]!==i?(a={mutationFn:n,onSuccess:i},r[6]=n,r[7]=i,r[8]=a):a=r[8],(0,w.n)(a)}:function(e,t){let n=(0,_.Kp)(),i=`${n}/page_data/${T.uT.unhideComment}`,{updateThreadComment:a}=(0,_.an)();return(0,w.n)({mutationFn:async({commentDatabaseId:e})=>{let t=await (0,k.q$)(i,{method:"POST",body:{commentId:e}}),n=await (0,k.hp)(t);return(0,k.R)(t,n),n},onSuccess:n=>{a({threadID:n.threadId,filePath:e,lineMarkersKey:t,match:e=>e.databaseId===n.commentDatabaseId,transform:e=>{if(e)return{...e,isHidden:!1,minimizedReason:null}}})}})};function P(e){if(e)return{...e,isHidden:!1,minimizedReason:null}}let F=(0,a.Z6)()?function(e){let t,n,i,a=(0,s.c)(10),{filePath:r,lineMarkersKey:l,onSuccess:o}=e,d=(0,_.Kp)(),c=`${d}/page_data/${T.uT.updateReviewComment}`,{updateThreadComment:u}=(0,_.an)();return a[0]!==c?(t=async e=>{let{commentId:t,bodyVersion:n,body:i}=e,a=await (0,k.q$)(`${c}${n?`?body_version=${n}`:""}`,{method:"PUT",body:{body:i,commentId:t}}),s=await (0,k.hp)(a);return(0,k.R)(a,s),s},a[0]=c,a[1]=t):t=a[1],a[2]!==r||a[3]!==l||a[4]!==o||a[5]!==u?(n=e=>{u({threadID:e.threadId,filePath:r,lineMarkersKey:l,match:t=>t.databaseId===e.commentDatabaseId,transform:t=>{if(t)return{...t,body:e.body,bodyHTML:e.bodyHTML,bodyVersion:e.bodyVersion}}}),o?.()},a[2]=r,a[3]=l,a[4]=o,a[5]=u,a[6]=n):n=a[6],a[7]!==t||a[8]!==n?(i={mutationFn:t,onSuccess:n},a[7]=t,a[8]=n,a[9]=i):i=a[9],(0,w.n)(i)}:function({filePath:e,lineMarkersKey:t,onSuccess:n}){let i=(0,_.Kp)(),a=`${i}/page_data/${T.uT.updateReviewComment}`,{updateThreadComment:s}=(0,_.an)();return(0,w.n)({mutationFn:async({commentId:e,bodyVersion:t,body:n})=>{let i=await (0,k.q$)(`${a}${t?`?body_version=${t}`:""}`,{method:"PUT",body:{body:n,commentId:e}}),s=await (0,k.hp)(i);return(0,k.R)(i,s),s},onSuccess:i=>{s({threadID:i.threadId,filePath:e,lineMarkersKey:t,match:e=>e.databaseId===i.commentDatabaseId,transform:e=>{if(e)return{...e,body:i.body,bodyHTML:i.bodyHTML,bodyVersion:i.bodyVersion}}}),n?.()}})};var M=n(34784),$=n(8748),B=n(50625),V=n(93642),U=n(70109);let q="ReviewThreadComment-module__ReviewThreadContainer--mI1dg",G="ReviewThreadComment-module__anchorable--bXoU8",H="ReviewThreadComment-module__ReviewThreadWrapper--zXqpP",K="ReviewThreadComment-module__ReviewThreadBox--Ddyuz",W="ReviewThreadComment-module__ReviewThreadInnerContainer--xw85s",z="ReviewThreadComment-module__ReplyWrapper--yIUaX",Q="ReviewThreadComment-module__SafeHTMLBox--SVSQJ",Z="ReviewThreadComment-module__BodyHTMLContainer--O6lsx";var J=n(88431),Y=n(40961),X=n(80081),ee=n(3252);let et=(0,a.Z6)()?function(){let e,t=(0,s.c)(2),n=(0,_.Kp)(),i=`${n}/page_data/${T.uT.submitSuggestedChanges}`;return t[0]!==i?(e={mutationFn:async e=>{let{changes:t,currentOid:n,message:a}=e,s=await (0,k.q$)(i,{method:"POST",body:{changes:t,currentOid:n,message:a}}),r=await (0,k.hp)(s);return(0,k.R)(s,r),r},onSuccess:en},t[0]=i,t[1]=e):e=t[1],(0,w.n)(e)}:function(){let e=(0,_.Kp)(),t=`${e}/page_data/${T.uT.submitSuggestedChanges}`;return(0,w.n)({mutationFn:async({changes:e,currentOid:n,message:i})=>{let a=await (0,k.q$)(t,{method:"POST",body:{changes:e,currentOid:n,message:i}}),s=await (0,k.hp)(a);return(0,k.R)(a,s),s},onSuccess:()=>{f.cg?.location.reload()}})};function en(){f.cg?.location.reload()}var ei=n(91747),ea=n(2265),es=n(30459),er=n(26607),el=n(21373),eo=n(88008);let ed=(0,a.GV)()?function(e){let t,n,a,r,l,o=(0,s.c)(28),{onOpenDialog:d,suggestedChange:c}=e,{sendAnalyticsEvent:u}=(0,es.s)(),m=(0,b.useRef)(null),h=c.commentDatabaseId||0;o[0]!==c.suggestionIndex||o[1]!==h?(t={commentDatabaseId:h,suggestionIndex:c.suggestionIndex},o[0]=c.suggestionIndex,o[1]=h,o[2]=t):t=o[2];let f=(0,_.Nk)(t),p=(0,_.RH)(),g=(0,ei.u)("batch_suggested_changes"),{addSuggestionToBatch:y,removeSuggestionFromBatch:x}=(0,_.xJ)(),v=(0,_.WK)(),j=(0,_.Kp)(),w=(0,_.L3)();o[3]!==y||o[4]!==w||o[5]!==j||o[6]!==u||o[7]!==c.commentDatabaseId||o[8]!==c.suggestionIndex||o[9]!==v?(n=()=>{if(!c.commentDatabaseId)return;let e={commentDatabaseId:c.commentDatabaseId,suggestionIndex:c.suggestionIndex};y(e),(0,eo.CE)(j,w.fullDiff.headOid,[...v.activeBatch,e]),u("comments.add_suggested_change_to_batch","ADD_SUGGESTED_CHANGE_TO_BATCH_BUTTON")},o[3]=y,o[4]=w,o[5]=j,o[6]=u,o[7]=c.commentDatabaseId,o[8]=c.suggestionIndex,o[9]=v,o[10]=n):n=o[10];let C=n;o[11]!==w||o[12]!==j||o[13]!==x||o[14]!==u||o[15]!==c.commentDatabaseId||o[16]!==c.suggestionIndex||o[17]!==v?(a=()=>{if(!c.commentDatabaseId)return;let e={commentDatabaseId:c.commentDatabaseId,suggestionIndex:c.suggestionIndex};x(e),(0,eo.CE)(j,w.fullDiff.headOid,v.activeBatch.filter(t=>t.commentDatabaseId!==e.commentDatabaseId||t.suggestionIndex!==e.suggestionIndex)),u("comments.remove_suggested_change_from_batch","REMOVE_SUGGESTED_CHANGE_FROM_BATCH_BUTTON")},o[11]=w,o[12]=j,o[13]=x,o[14]=u,o[15]=c.commentDatabaseId,o[16]=c.suggestionIndex,o[17]=v,o[18]=a):a=o[18];let N=a;o[19]!==d?(r=()=>{d(m)},o[19]=d,o[20]=r):r=o[20];let S=r;return o[21]!==g||o[22]!==C||o[23]!==S||o[24]!==N||o[25]!==f||o[26]!==p?(l=(0,i.jsx)("div",{className:"d-flex flex-row flex-items-center",children:g&&f?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(er.A,{variant:"attention",children:"Pending in batch"}),(0,i.jsx)("div",{className:"ml-auto",children:(0,i.jsx)(el.Q,{variant:"danger",onClick:N,children:"Remove from batch"})})]}):(0,i.jsxs)("div",{className:"d-flex gap-2 ml-auto flex-wrap-reverse",children:[!p&&(0,i.jsx)(el.Q,{variant:"default",onClick:S,ref:m,children:"Apply suggestion"}),g&&(0,i.jsx)(el.Q,{variant:"primary",onClick:C,children:"Add suggestion to batch"})]})}),o[21]=g,o[22]=C,o[23]=S,o[24]=N,o[25]=f,o[26]=p,o[27]=l):l=o[27],l}:function({onOpenDialog:e,suggestedChange:t}){let{sendAnalyticsEvent:n}=(0,es.s)(),a=(0,b.useRef)(null),s=(0,_.Nk)({commentDatabaseId:t.commentDatabaseId||0,suggestionIndex:t.suggestionIndex}),r=(0,_.RH)(),l=(0,ei.u)("batch_suggested_changes"),{addSuggestionToBatch:o,removeSuggestionFromBatch:d}=(0,_.xJ)(),c=(0,_.WK)(),u=(0,_.Kp)(),m=(0,_.L3)(),h=(0,b.useCallback)(()=>{if(!t.commentDatabaseId)return;let e={commentDatabaseId:t.commentDatabaseId,suggestionIndex:t.suggestionIndex};o(e),(0,eo.CE)(u,m.fullDiff.headOid,[...c.activeBatch,e]),n("comments.add_suggested_change_to_batch","ADD_SUGGESTED_CHANGE_TO_BATCH_BUTTON")},[o,t.commentDatabaseId,t.suggestionIndex,c,u,m,n]),f=(0,b.useCallback)(()=>{if(!t.commentDatabaseId)return;let e={commentDatabaseId:t.commentDatabaseId,suggestionIndex:t.suggestionIndex};d(e),(0,eo.CE)(u,m.fullDiff.headOid,c.activeBatch.filter(t=>t.commentDatabaseId!==e.commentDatabaseId||t.suggestionIndex!==e.suggestionIndex)),n("comments.remove_suggested_change_from_batch","REMOVE_SUGGESTED_CHANGE_FROM_BATCH_BUTTON")},[d,t.commentDatabaseId,t.suggestionIndex,c,u,m,n]),p=(0,b.useCallback)(()=>{e(a)},[e]);return(0,i.jsx)("div",{className:"d-flex flex-row flex-items-center",children:l&&s?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(er.A,{variant:"attention",children:"Pending in batch"}),(0,i.jsx)("div",{className:"ml-auto",children:(0,i.jsx)(el.Q,{variant:"danger",onClick:f,children:"Remove from batch"})})]}):(0,i.jsxs)("div",{className:"d-flex gap-2 ml-auto flex-wrap-reverse",children:[!r&&(0,i.jsx)(el.Q,{variant:"default",onClick:p,ref:a,children:"Apply suggestion"}),l&&(0,i.jsx)(el.Q,{variant:"primary",onClick:h,children:"Add suggestion to batch"})]})})};try{ed.displayName||(ed.displayName="ApplyOrAddToBatch")}catch{}var ec=n(3585);let eu=(0,a.GV)()?function(e){let t,n,a=(0,s.c)(5),{reason:r,className:l}=e,o=void 0===l?"m-2":l;return a[0]!==r?(t=(0,i.jsx)("small",{className:"fgColor-muted",children:r}),a[0]=r,a[1]=t):t=a[1],a[2]!==o||a[3]!==t?(n=(0,i.jsx)("div",{className:o,children:t}),a[2]=o,a[3]=t,a[4]=n):n=a[4],n}:function({reason:e,className:t="m-2"}){return(0,i.jsx)("div",{className:t,children:(0,i.jsx)("small",{className:"fgColor-muted",children:e})})};try{eu.displayName||(eu.displayName="CodeSuggestionUnavailable")}catch{}let em=(0,a.GV)()?function(e){let t,n,a,r,l,o,d,c,u,m,h,f,p=(0,s.c)(38),{suggestedChange:g}=e,{setIsDialogOpen:y}=(0,ea.W)(),[x,v]=(0,b.useState)(!1),j=(0,b.useRef)(void 0),w=(0,ei.u)("batch_suggested_changes"),C=(0,_.WK)();p[0]!==w||p[1]!==g||p[2]!==C?(t=w&&void 0!==g.commentDatabaseId&&null!==g.commentDatabaseId&&C.activeBatch.some(e=>e.commentDatabaseId===g.commentDatabaseId&&e.suggestionIndex===g.suggestionIndex),p[0]=w,p[1]=g,p[2]=C,p[3]=t):t=p[3];let N=t;p[4]!==g?(n=(0,X.EJ)(g,[]),p[4]=g,p[5]=n):n=p[5];let{isValid:S,reason:I}=n;p[6]!==g?(a=[g],p[6]=g,p[7]=a):a=p[7];let k=a;p[8]!==k?(r=k.map(eh),p[8]=k,p[9]=r):r=p[9];let L=r;p[10]!==y?(l=e=>{v(e),y?.(e)},p[10]=y,p[11]=l):l=p[11];let T=l;p[12]!==T?(o=()=>{if(T(!1),j.current){let e=j.current.current;setTimeout(()=>e?.focus())}},p[12]=T,p[13]=o):o=p[13];let D=o;p[14]!==T?(d=e=>{T(!0),j.current=e},p[14]=T,p[15]=d):d=p[15];let E=d,{mutate:R}=et(),{fullDiff:A}=(0,_.L3)(),{headOid:O}=A;p[16]!==k||p[17]!==D||p[18]!==O||p[19]!==R?(c=(e,t,n)=>{R({changes:k,message:e,currentOid:O},{onSuccess:()=>{D(),n()},onError:e=>{t(e,"submitSuggestedChanges","Failed to submit suggested changes")}})},p[16]=k,p[17]=D,p[18]=O,p[19]=R,p[20]=c):c=p[20];let P=c;return p[21]!==E||p[22]!==g?(u=(0,i.jsx)(ed,{suggestedChange:g,onOpenDialog:E}),p[21]=E,p[22]=g,p[23]=u):u=p[23],p[24]!==N||p[25]!==S||p[26]!==I?(m=!N&&!S&&I&&(0,i.jsx)(eu,{reason:I,className:"m-0"}),p[24]=N,p[25]=S,p[26]=I,p[27]=m):m=p[27],p[28]!==L||p[29]!==k.length||p[30]!==D||p[31]!==P||p[32]!==x?(h=x&&(0,i.jsx)(ec.$,{authorLogins:L,batchSize:k.length,onClose:D,onCommit:P}),p[28]=L,p[29]=k.length,p[30]=D,p[31]=P,p[32]=x,p[33]=h):h=p[33],p[34]!==u||p[35]!==m||p[36]!==h?(f=(0,i.jsxs)("div",{className:"border-top p-2",children:[u,m,h]}),p[34]=u,p[35]=m,p[36]=h,p[37]=f):f=p[37],f}:function({suggestedChange:e}){let{setIsDialogOpen:t}=(0,ea.W)(),[n,a]=(0,b.useState)(!1),s=(0,b.useRef)(void 0),r=(0,ei.u)("batch_suggested_changes"),l=(0,_.WK)(),o=r&&void 0!==e.commentDatabaseId&&null!==e.commentDatabaseId&&l.activeBatch.some(t=>t.commentDatabaseId===e.commentDatabaseId&&t.suggestionIndex===e.suggestionIndex),{isValid:d,reason:c}=(0,X.EJ)(e,[]),u=(0,b.useMemo)(()=>[e],[e]),m=u.map(e=>e.authorLogin),h=(0,b.useCallback)(e=>{a(e),t?.(e)},[t]),f=(0,b.useCallback)(()=>{if(h(!1),s.current){let e=s.current.current;setTimeout(()=>e?.focus())}},[h]),p=(0,b.useCallback)(e=>{h(!0),s.current=e},[h,s]),{mutate:g}=et(),{fullDiff:{headOid:y}}=(0,_.L3)(),x=(0,b.useCallback)((e,t,n)=>{g({changes:u,message:e,currentOid:y},{onSuccess:()=>{f(),n()},onError:e=>{t(e,"submitSuggestedChanges","Failed to submit suggested changes")}})},[u,f,y,g]);return(0,i.jsxs)("div",{className:"border-top p-2",children:[(0,i.jsx)(ed,{suggestedChange:e,onOpenDialog:p}),!o&&!d&&c&&(0,i.jsx)(eu,{reason:c,className:"m-0"}),n&&(0,i.jsx)(ec.$,{authorLogins:m,batchSize:u.length,onClose:f,onCommit:x})]})};function eh(e){return e.authorLogin}try{em.displayName||(em.displayName="CodeSuggestionActions")}catch{}let ef=(0,a.GV)()?function(e,t,n,i,a){let r,l,o=(0,s.c)(19),[d,c]=(0,b.useState)();o[0]!==a.lineRange||o[1]!==t.author?.login||o[2]!==t.databaseId||o[3]!==t.id||o[4]!==t.subjectType||o[5]!==e||o[6]!==n||o[7]!==i?(r=()=>{if(!e.current||t.subjectType?.toUpperCase()!=="LINE")return;let s=[...e.current.getElementsByClassName("js-apply-changes")];if(s.length>0){let e=[];for(let r=0;r<s.length;r++){let l=s[r];if(!l)continue;let o=l.closest("div.js-suggested-changes-blob");if(!o||!a.lineRange)continue;let d=(0,ee.y)(o);e.push({authorLogin:t.author?.login??"ghost",commentId:t.id,commentDatabaseId:t.databaseId,path:n,ref:l,suggestion:d,lineRange:a.lineRange,threadId:i,suggestionIndex:r})}c(e)}},o[0]=a.lineRange,o[1]=t.author?.login,o[2]=t.databaseId,o[3]=t.id,o[4]=t.subjectType,o[5]=e,o[6]=n,o[7]=i,o[8]=r):r=o[8];let u=t.author?.login;return o[9]!==a.lineRange||o[10]!==t.bodyHTML||o[11]!==t.databaseId||o[12]!==t.id||o[13]!==t.subjectType||o[14]!==e||o[15]!==n||o[16]!==u||o[17]!==i?(l=[a.lineRange,u,t.bodyHTML,t.databaseId,t.id,t.subjectType,e,n,i],o[9]=a.lineRange,o[10]=t.bodyHTML,o[11]=t.databaseId,o[12]=t.id,o[13]=t.subjectType,o[14]=e,o[15]=n,o[16]=u,o[17]=i,o[18]=l):l=o[18],(0,J.N)(r,l),d}:function(e,t,n,i,a){let[s,r]=(0,b.useState)();return(0,J.N)(()=>{if(!e.current||t.subjectType?.toUpperCase()!=="LINE")return;let s=[...e.current.getElementsByClassName("js-apply-changes")];if(s.length>0){let e=[];for(let r=0;r<s.length;r++){let l=s[r];if(!l)continue;let o=l.closest("div.js-suggested-changes-blob");if(!o||!a.lineRange)continue;let d=(0,ee.y)(o);e.push({authorLogin:t.author?.login??"ghost",commentId:t.id,commentDatabaseId:t.databaseId,path:n,ref:l,suggestion:d,lineRange:a.lineRange,threadId:i,suggestionIndex:r})}r(e)}},[a.lineRange,t.author?.login,t.bodyHTML,t.databaseId,t.id,t.subjectType,e,n,i]),s},ep=(0,a.GV)()?function(e){let t,n,a=(0,s.c)(12),{applySuggestedChangesValidationData:r,comment:l,commentBodyRef:o,filePath:d,isOutdated:c,isThreadResolved:u,suggestedChangesConfig:m,databaseId:h,viewerCanApplySuggestion:f}=e,{state:p}=(0,_.Yp)(),g=(0,_.ww)(),y=ef(o,l,d,h,r);return a[0]!==r||a[1]!==l||a[2]!==g||a[3]!==c||a[4]!==u||a[5]!==p||a[6]!==y||a[7]!==m||a[8]!==f?(t=y?.length?y.map(e=>{let{isValid:t,reason:n}=(0,X.o_)({suggestedChange:e,hasCommitRange:g,isOutdated:c,isPending:"PENDING"===l.state.toUpperCase(),isResolved:u,pullRequestIsClosed:void 0===p||"CLOSED"===p||"MERGED"===p,pullRequestIsInMergeQueue:"QUEUED"===p,userCanApplySuggestion:!!f,applySuggestedChangesValidationData:r,suggestedChangesConfig:m});return!t&&n?(0,Y.createPortal)((0,i.jsx)(eu,{reason:n}),e.ref):(0,Y.createPortal)((0,i.jsx)(em,{suggestedChange:e}),e.ref)}):null,a[0]=r,a[1]=l,a[2]=g,a[3]=c,a[4]=u,a[5]=p,a[6]=y,a[7]=m,a[8]=f,a[9]=t):t=a[9],a[10]!==t?(n=(0,i.jsx)(i.Fragment,{children:t}),a[10]=t,a[11]=n):n=a[11],n}:function({applySuggestedChangesValidationData:e,comment:t,commentBodyRef:n,filePath:a,isOutdated:s,isThreadResolved:r,suggestedChangesConfig:l,databaseId:o,viewerCanApplySuggestion:d}){let{state:c}=(0,_.Yp)(),u=(0,_.ww)(),m=ef(n,t,a,o,e);return(0,i.jsx)(i.Fragment,{children:m?.length?m.map(n=>{let{isValid:a,reason:o}=(0,X.o_)({suggestedChange:n,hasCommitRange:u,isOutdated:s,isPending:"PENDING"===t.state.toUpperCase(),isResolved:r,pullRequestIsClosed:void 0===c||"CLOSED"===c||"MERGED"===c,pullRequestIsInMergeQueue:"QUEUED"===c,userCanApplySuggestion:!!d,applySuggestedChangesValidationData:e,suggestedChangesConfig:l});return!a&&o?(0,Y.createPortal)((0,i.jsx)(eu,{reason:o}),n.ref):(0,Y.createPortal)((0,i.jsx)(em,{suggestedChange:n}),n.ref)}):null})};try{ep.displayName||(ep.displayName="SuggestedChangeView")}catch{}var eg=n(30721),ey=n(83494),ex=n(20459);let ev=(0,a.GV)()?function(e){let t,n,a,j,w,_,C,N,I,k,T,A,P,J,Y,X,ee,et,en,ei,ea,es,er,el,eo,ed,ec,eu,em,eh,ef,ev,ej,ew,e_,eC,eN,eS,eI,ek,eL,eT,eD,eE,eR=(0,s.c)(176),{isAnchorable:eA,index:eO,isInlineComment:eP,isLastChild:eF,isOutdated:eM,isThreadResolved:e$,lineMarkersKey:eB,anchorPrefix:eV,comment:eU,disableDialogMode:eq,enableDialogMode:eG,filePath:eH,gridCellId:eK,hideActions:eW,isFirstComment:ez,isInDialogMode:eQ,onDeleteLineComment:eZ,onQuoteReply:eJ,subjectId:eY,threadCommentCount:eX,threadId:e0,threadPositionNumber:e1,suggestedChangesConfig:e2,applySuggestedChangesValidationData:e3,viewerData:e4,ghostUser:e5,originalDiffPathUri:e6,headingLevel:e7}=e,e8=void 0!==eA&&eA,e9=void 0===eO?0:eO,te=void 0!==ez&&ez,tt=void 0===eJ?u.l:eJ,tn=void 0===e5?d.t.ghostUser:e5,ti=void 0===e7?"h3":e7,{addToast:ta}=(0,p.Y6)(),[ts,tr]=(0,b.useState)(!1),[tl,to]=(0,b.useState)(eU.isHidden),[td,tc]=(0,b.useState)(!1),[tu,tm]=(0,b.useState)(eU.body),[th,tf]=(0,b.useState)(!1),[tp,tg]=(0,b.useState)(!1),[ty,tx]=(0,b.useState)(""),tv="FILE"===eU.subjectType;eR[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{let{text:t}=e;t&&tm(t)},eR[0]=t):t=eR[0],eR[1]!==eU.id||eR[2]!==eH||eR[3]!==eY||eR[4]!==tv?(n={subjectId:eY,filePath:eH,fileLevelComment:tv,threadId:eU.id,handlePersistedCommentExists:t},eR[1]=eU.id,eR[2]=eH,eR[3]=eY,eR[4]=tv,eR[5]=n):n=eR[5];let{persistCommentToStorage:tb,removePersistedCommentFromStorage:tj}=(0,B.L)(n),tw=(0,b.useRef)(null),t_=(0,b.useRef)(null),tC=(0,b.useRef)(null),[tN,tS]=(0,b.useState)("");eR[6]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{tw.current?.focus()},eR[6]=a):a=eR[6];let tI=a;eR[7]!==ts?(j=()=>{if(ts){let e=window.setTimeout(tI);return()=>{window.clearTimeout(e)}}},w=[ts],eR[7]=ts,eR[8]=j,eR[9]=w):(j=eR[8],w=eR[9]),(0,b.useEffect)(j,w),eR[10]!==eZ?(_=()=>{tc(!1),tg(!1),eZ?.()},eR[10]=eZ,eR[11]=_):_=eR[11],eR[12]!==eH||eR[13]!==eB||eR[14]!==_?(C={filePath:eH,lineMarkersKey:eB,onSuccess:_},eR[12]=eH,eR[13]=eB,eR[14]=_,eR[15]=C):C=eR[15];let{mutate:tk}=L(C);eR[16]!==eq?(N=async()=>{eq?.(),tc(!0)},eR[16]=eq,eR[17]=N):N=eR[17];let tL=N;eR[18]!==ta||eR[19]!==eU.id||eR[20]!==tk||eR[21]!==eG||eR[22]!==eH||eR[23]!==eK||eR[24]!==e0?(I=e=>{"confirm"===e?(tg(!0),tk({commentId:eU.id,threadId:e0,filePath:eH},{onError:()=>{tc(!1),ta({type:"error",message:"Failed to delete comment"}),tg(!1)}})):(eK&&eG?.(eK),tc(!1),tg(!1))},eR[18]=ta,eR[19]=eU.id,eR[20]=tk,eR[21]=eG,eR[22]=eH,eR[23]=eK,eR[24]=e0,eR[25]=I):I=eR[25];let tT=I,{mutate:tD}=D(eH,eB);eR[26]!==eU.databaseId||eR[27]!==tD?(k=e=>{if(!eU.databaseId)throw Error("Comment not found");tD({commentDatabaseId:eU.databaseId,reason:e},{onError:()=>{tf(!1),tS("Failed to hide comment")},onSuccess:()=>to(!0)})},eR[26]=eU.databaseId,eR[27]=tD,eR[28]=k):k=eR[28];let tE=k,{mutate:tR}=O(eH,eB);eR[29]!==eU.databaseId||eR[30]!==tR?(T=()=>{if(!eU.databaseId)throw Error("Comment not found");tR({commentDatabaseId:eU.databaseId},{onError:()=>{tf(!1),tS("Failed to unhide comment")},onSuccess:()=>to(!1)})},eR[29]=eU.databaseId,eR[30]=tR,eR[31]=T):T=eR[31];let tA=T,{mutate:tO}=S();eR[32]!==tO?(A=(e,t,n,i,a,s)=>tO({duration:e,shouldHideComment:t,hiddenReason:n,organizationLogin:i,notifyBlockedUser:a,userLogin:s},{onError:()=>tS("Failed to block user"),onSuccess:()=>{t&&to(!0)}}),eR[32]=tO,eR[33]=A):A=eR[33];let tP=A,{mutate:tF}=R();eR[34]!==tF?(P=(e,t)=>tF({organizationLogin:e,userLogin:t},{onError:()=>tS("Failed to unblock user")}),eR[34]=tF,eR[35]=P):P=eR[35];let tM=P,{mutate:t$}=E(eH,eB);eR[36]!==ta||eR[37]!==eU.databaseId||eR[38]!==t$||eR[39]!==e0?(J=(e,t)=>{if(!eU.databaseId)throw Error("Comment not found");setTimeout(()=>tC.current?.focus(),0),t$({commentDatabaseId:eU.databaseId,threadId:e0,reaction:e,viewerHasReacted:t},{onError:()=>{tf(!1),ta({type:"error",message:"Failed to react to comment"})}})},eR[36]=ta,eR[37]=eU.databaseId,eR[38]=t$,eR[39]=e0,eR[40]=J):J=eR[40];let tB=J;eR[41]===Symbol.for("react.memo_cache_sentinel")?(Y=()=>{tr(!0)},eR[41]=Y):Y=eR[41];let tV=Y;eR[42]!==eU.body||eR[43]!==tj?(X=()=>{tr(!1),tj(),tm(eU.body)},eR[42]=eU.body,eR[43]=tj,eR[44]=X):X=eR[44];let tU=X;eR[45]!==tb?(ee=e=>{tb({text:e}),tm(e),tx(void 0)},eR[45]=tb,eR[46]=ee):ee=eR[46];let tq=ee;eR[47]!==tj?(et=()=>{tr(!1),tf(!1),tj()},eR[47]=tj,eR[48]=et):et=eR[48],eR[49]!==eH||eR[50]!==eB||eR[51]!==et?(en={filePath:eH,lineMarkersKey:eB,onSuccess:et},eR[49]=eH,eR[50]=eB,eR[51]=et,eR[52]=en):en=eR[52];let{mutate:tG}=F(en);eR[53]!==ta||eR[54]!==tu||eR[55]!==eU.bodyVersion||eR[56]!==eU.databaseId||eR[57]!==e2?.sourceContentFromDiffLines||eR[58]!==tG?(ei=()=>{tf(!0);let e=(0,V.u)(tu,e2?.sourceContentFromDiffLines??"");if(!e.isValid){tx(e.errorMessage),tf(!1);return}tG({commentId:String(eU.databaseId),body:tu,bodyVersion:eU.bodyVersion},{onError:()=>{tf(!1),ta({type:"error",message:"Failed to update comment"})}})},eR[53]=ta,eR[54]=tu,eR[55]=eU.bodyVersion,eR[56]=eU.databaseId,eR[57]=e2?.sourceContentFromDiffLines,eR[58]=tG,eR[59]=ei):ei=eR[59],e2?.sourceContentFromDiffLines;let tH=ei;eR[60]!==eU.databaseId?(ea=eU.databaseId?.toString(),eR[60]=eU.databaseId,eR[61]=ea):ea=eR[61];let tK=ea,tW=tK?`${void 0===eV?"r":eV}${tK}`:void 0;eR[62]!==tW?(es=tW&&f.fV?new URL(`${f.fV.pathname}#${tW}`,f.fV.origin).toString():"",eR[62]=tW,eR[63]=es):es=eR[63];let tz=es,tQ=(0,b.useRef)(null);eR[64]!==tW||eR[65]!==tK||eR[66]!==e8?(er={isAnchorable:e8,commentId:tK,commentAnchor:tW,containerRef:tQ},eR[64]=tW,eR[65]=tK,eR[66]=e8,eR[67]=er):er=eR[67],(0,$.u)(er);let tZ=e9>0,tJ=e9>1,tY=ts?"editing":tl?"hidden":"visible";eR[68]!==ti?(el={as:ti},eR[68]=ti,eR[69]=el):el=eR[69];let tX=el,t0=eU.author?.avatarUrl??tn.avatarUrl,t1=eU.reference.text??`#${eU.reference.number}`;eR[70]!==eU||eR[71]!==tz||eR[72]!==t1?(eo={...eU,url:tz,referenceText:t1},eR[70]=eU,eR[71]=tz,eR[72]=t1,eR[73]=eo):eo=eR[73];let t2=eU.author?.login??tn.login,t3=eU.reference?.author?.login??"";eR[74]===Symbol.for("react.memo_cache_sentinel")?(ed={},eR[74]=ed):ed=eR[74];let t4="copilot"===eU.reviewVariantType?"copilot-pull-request-reviewer":void 0,t5="copilot"===eU.reviewVariantType?l.S.Bot:void 0;eR[75]!==eW||eR[76]!==tl||eR[77]!==eM||eR[78]!==tZ||eR[79]!==tP||eR[80]!==tL||eR[81]!==tE||eR[82]!==tt||eR[83]!==tM||eR[84]!==tA||eR[85]!==e6||eR[86]!==tX||eR[87]!==t0||eR[88]!==eo||eR[89]!==t2||eR[90]!==t3||eR[91]!==t4||eR[92]!==t5?(ec={headingProps:tX,avatarUrl:t0,comment:eo,commentRef:tQ,deleteComment:tL,editComment:tV,editHistoryComponent:void 0,hideComment:tE,onBlock:tP,onUnblock:tM,onMinimize:to,onSuccessfulBlock:eb,isMinimized:tl,commentAuthorLogin:t2,navigate:u.l,commentSubjectAuthorLogin:t3,onReplySelect:tt,unhideComment:tA,hideActions:eW,isReply:tZ,forceInlineAvatar:!0,containerStyle:ed,originalDiffPathUri:e6,isOutdated:eM,commentAuthorSlug:t4,commentAuthorType:t5},eR[75]=eW,eR[76]=tl,eR[77]=eM,eR[78]=tZ,eR[79]=tP,eR[80]=tL,eR[81]=tE,eR[82]=tt,eR[83]=tM,eR[84]=tA,eR[85]=e6,eR[86]=tX,eR[87]=t0,eR[88]=eo,eR[89]=t2,eR[90]=t3,eR[91]=t4,eR[92]=t5,eR[93]=ec):ec=eR[93];let t6=ec;eR[94]!==e9||eR[95]!==tZ||eR[96]!==e1?(eu=()=>tZ?void 0!==e1?`Reply ${e9} to Comment ${e1}`:`Reply ${e9}`:void 0!==e1?`Comment ${e1}`:"Comment",eR[94]=e9,eR[95]=tZ,eR[96]=e1,eR[97]=eu):eu=eR[97];let t7=eu;eR[98]!==eU.body||eR[99]!==ts||eR[100]!==tt?(em=()=>{if(ts)return;let e=f.cg?.getSelection(),t=e?.anchorNode?{anchorNode:e.anchorNode,range:e.getRangeAt(0)}:null;tt((0,ex.E)(tQ?.current,t,eU.body))},eR[98]=eU.body,eR[99]=ts,eR[100]=tt,eR[101]=em):em=eR[101];let t8=em;eR[102]===Symbol.for("react.memo_cache_sentinel")?(eh=(0,eg.E7)(),eR[102]=eh):eh=eR[102];let t9=eh;eR[103]!==t8?(ef={"pull-requests-diff-view:quote-reply":t8},eR[103]=t8,eR[104]=ef):ef=eR[104];let ne=e8?tW:void 0,nt=eP?eQ?0:-1:0,nn=eU.id;eR[105]!==t7||eR[106]!==eQ?(ev=eQ?{role:"document","aria-roledescription":"comment","aria-label":t7()}:{},eR[105]=t7,eR[106]=eQ,eR[107]=ev):ev=eR[107];let ni=e8&&G,na="hidden"===tY&&"pb-2";return eR[108]!==ni||eR[109]!==na?(ej=(0,v.$)(q,ni,na),eR[108]=ni,eR[109]=na,eR[110]=ej):ej=eR[110],eR[111]!==tJ||eR[112]!==tZ?(ew=tJ&&(0,i.jsx)("div",{className:H,"data-is-reply":tZ,children:(0,i.jsx)("div",{className:K})}),eR[111]=tJ,eR[112]=tZ,eR[113]=ew):ew=eR[113],eR[114]!==t6||eR[115]!==eW?(e_=eW?void 0:(0,i.jsx)(M.RelayEnvironmentProvider,{environment:t9,children:(0,i.jsx)(o.p,{...t6})}),eR[114]=t6,eR[115]=eW,eR[116]=e_):e_=eR[116],eR[117]!==eU.body||eR[118]!==t6||eR[119]!==eQ||eR[120]!==eM||eR[121]!==e_||eR[122]!==eX?(eC=(0,i.jsx)(l.v,{...t6,commentBody:eU.body,threadCommentCount:eX,isInDialogMode:eQ,actions:e_,isOutdated:eM}),eR[117]=eU.body,eR[118]=t6,eR[119]=eQ,eR[120]=eM,eR[121]=e_,eR[122]=eX,eR[123]=eC):eC=eR[123],eR[124]!==tJ||eR[125]!==eC?(eN=(0,i.jsx)("div",{className:W,"data-is-nested-reply":tJ,children:eC}),eR[124]=tJ,eR[125]=eC,eR[126]=eN):eN=eR[126],eR[127]!==tN?(eS=tN&&(0,i.jsxs)(y.A,{variant:"danger",className:"m-3",children:[(0,i.jsx)(g.StopIcon,{className:"mr-2"}),tN]}),eR[127]=tN,eR[128]=eS):eS=eR[128],eR[129]!==eF||eR[130]!==tZ?(eI=tZ&&(0,i.jsx)("div",{className:z,"data-is-last-child":eF}),eR[129]=eF,eR[130]=tZ,eR[131]=eI):eI=eR[131],eR[132]!==tu||eR[133]!==tY||eR[134]!==ty||eR[135]!==tZ||eR[136]!==th||eR[137]!==tU||eR[138]!==tq||eR[139]!==tH||eR[140]!==e2?(ek="editing"===tY&&(0,i.jsx)("div",{className:(0,v.$)("flex-1 min-width-0 pr-2 pt-1 pb-2",tZ?"pl-0":"pl-2"),children:(0,i.jsxs)(U.S,{ref:tw,label:"Update comment",value:tu,onChange:tq,onPrimaryAction:tH,suggestedChangesConfig:e2,markdownErrorMessage:ty,children:[(0,i.jsx)(r.xR,{variant:"default",onClick:tU,children:"Cancel"}),(0,i.jsx)(r.xR,{disabled:th||!tu.length,loading:th,variant:"primary",onClick:tH,children:"Update"})]})}),eR[132]=tu,eR[133]=tY,eR[134]=ty,eR[135]=tZ,eR[136]=th,eR[137]=tU,eR[138]=tq,eR[139]=tH,eR[140]=e2,eR[141]=ek):ek=eR[141],eR[142]!==e3||eR[143]!==eU||eR[144]!==tY||eR[145]!==td||eR[146]!==eH||eR[147]!==tT||eR[148]!==tp||eR[149]!==eM||eR[150]!==tZ||eR[151]!==e$||eR[152]!==tB||eR[153]!==e2||eR[154]!==e4?.viewerCanApplySuggestion?(eL="visible"===tY&&(0,i.jsxs)("div",{className:Z,"data-is-reply":tZ,children:[eU.bodyHTML&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.vb,{ref:t_,className:(0,v.$)("markdown-body",Q),"comment-testid":`Comment body html for comment ${eU.id}`,html:eU.bodyHTML}),"copilot"===eU.reviewVariantType&&(0,i.jsxs)("p",{className:"text-small color-fg-muted mt-2 mb-1",children:[(0,i.jsx)("a",{target:"_blank",rel:"noopener noreferrer",className:"Link--inTextBlock",href:"https://docs.github.com/en/copilot/responsible-use-of-github-copilot-features/responsible-use-of-github-copilot-code-review",children:"Copilot"})," ","uses AI. Check for mistakes."]}),(0,i.jsxs)("div",{className:"d-flex flex-direction-column gap-2",children:["copilot"===eU.reviewVariantType&&(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)(c.Z,{commentUrl:eU.url,commentId:eU.databaseId?.toString()??""})}),eU.reactionGroups&&(0,i.jsx)("div",{className:"d-flex flex-direction-column mt-2",children:(0,i.jsx)(m.P,{ref:tC,reactionGroups:eU.reactionGroups,onReact:tB,canReact:eU.viewerCanReact})})]}),e3&&(0,i.jsx)(ep,{comment:eU,commentBodyRef:t_,filePath:eH,isOutdated:eM,isThreadResolved:e$,databaseId:eU.databaseId,suggestedChangesConfig:e2,applySuggestedChangesValidationData:e3,viewerCanApplySuggestion:e4?.viewerCanApplySuggestion})]}),td&&(0,i.jsx)(x.K,{title:"Delete comment?",confirmButtonContent:"Delete",confirmButtonType:"danger",confirmButtonLoading:tp,onClose:tT,children:"Are you sure you want to delete this comment?"})]}),eR[142]=e3,eR[143]=eU,eR[144]=tY,eR[145]=td,eR[146]=eH,eR[147]=tT,eR[148]=tp,eR[149]=eM,eR[150]=tZ,eR[151]=e$,eR[152]=tB,eR[153]=e2,eR[154]=e4?.viewerCanApplySuggestion,eR[155]=eL):eL=eR[155],eR[156]!==tZ||eR[157]!==eI||eR[158]!==ek||eR[159]!==eL?(eT=(0,i.jsxs)("div",{className:H,"data-is-reply":tZ,children:[eI,ek,eL]}),eR[156]=tZ,eR[157]=eI,eR[158]=ek,eR[159]=eL,eR[160]=eT):eT=eR[160],eR[161]!==eU.id||eR[162]!==te||eR[163]!==ne||eR[164]!==nt||eR[165]!==ev||eR[166]!==ej||eR[167]!==ew||eR[168]!==eN||eR[169]!==eS||eR[170]!==eT||eR[171]!==e0?(eD=(0,i.jsxs)("div",{ref:tQ,id:ne,tabIndex:nt,"data-first-thread-comment":te,"data-marker-navigation-comment-thread-id":e0,"data-marker-navigation-comment-id":nn,...ev,className:ej,children:[ew,eN,eS,eT]}),eR[161]=eU.id,eR[162]=te,eR[163]=ne,eR[164]=nt,eR[165]=ev,eR[166]=ej,eR[167]=ew,eR[168]=eN,eR[169]=eS,eR[170]=eT,eR[171]=e0,eR[172]=eD):eD=eR[172],eR[173]!==ef||eR[174]!==eD?(eE=(0,i.jsx)(ey.tL,{commands:ef,children:eD}),eR[173]=ef,eR[174]=eD,eR[175]=eE):eE=eR[175],eE}:function({isAnchorable:e=!1,index:t=0,isInlineComment:n,isLastChild:a,isOutdated:s,isThreadResolved:j,lineMarkersKey:w,anchorPrefix:_="r",comment:C,disableDialogMode:N,enableDialogMode:I,filePath:k,gridCellId:T,hideActions:A,isFirstComment:P=!1,isInDialogMode:J,onDeleteLineComment:Y,onQuoteReply:X=u.l,subjectId:ee,threadCommentCount:et,threadId:en,threadPositionNumber:ei,suggestedChangesConfig:ea,applySuggestedChangesValidationData:es,viewerData:er,ghostUser:el=d.t.ghostUser,originalDiffPathUri:eo,headingLevel:ed="h3"}){let{addToast:ec}=(0,p.Y6)(),[eu,em]=(0,b.useState)(!1),[eh,ef]=(0,b.useState)(C.isHidden),[ev,eb]=(0,b.useState)(!1),[ej,ew]=(0,b.useState)(C.body),[e_,eC]=(0,b.useState)(!1),[eN,eS]=(0,b.useState)(!1),[eI,ek]=(0,b.useState)(""),{persistCommentToStorage:eL,removePersistedCommentFromStorage:eT}=(0,B.L)({subjectId:ee,filePath:k,fileLevelComment:"FILE"===C.subjectType,threadId:C.id,handlePersistedCommentExists:({text:e})=>{e&&ew(e)}}),eD=(0,b.useRef)(null),eE=(0,b.useRef)(null),eR=(0,b.useRef)(null),[eA,eO]=(0,b.useState)(""),eP=()=>{eD.current?.focus()};(0,b.useEffect)(()=>{if(eu){let e=window.setTimeout(eP);return()=>{window.clearTimeout(e)}}},[eu]);let{mutate:eF}=L({filePath:k,lineMarkersKey:w,onSuccess:()=>{eb(!1),eS(!1),Y?.()}}),eM=async()=>{N?.(),eb(!0)},{mutate:e$}=D(k,w),{mutate:eB}=O(k,w),{mutate:eV}=S(),{mutate:eU}=R(),{mutate:eq}=E(k,w),{mutate:eG}=F({filePath:k,lineMarkersKey:w,onSuccess:()=>{em(!1),eC(!1),eT()}}),eH=(0,b.useCallback)(()=>{eC(!0);let e=(0,V.u)(ej,ea?.sourceContentFromDiffLines??"");if(!e.isValid){ek(e.errorMessage),eC(!1);return}eG({commentId:String(C.databaseId),body:ej,bodyVersion:C.bodyVersion},{onError:()=>{eC(!1),ec({type:"error",message:"Failed to update comment"})}})},[ec,ej,C,ea?.sourceContentFromDiffLines,eG]),eK=C.databaseId?.toString(),eW=eK?`${_}${eK}`:void 0,ez=eW&&f.fV?new URL(`${f.fV.pathname}#${eW}`,f.fV.origin).toString():"",eQ=(0,b.useRef)(null);(0,$.u)({isAnchorable:e,commentId:eK,commentAnchor:eW,containerRef:eQ});let eZ=t>0,eJ=t>1,eY=eu?"editing":eh?"hidden":"visible",eX={headingProps:{as:ed},avatarUrl:C.author?.avatarUrl??el.avatarUrl,comment:{...C,url:ez,referenceText:C.reference.text??`#${C.reference.number}`},commentRef:eQ,deleteComment:eM,editComment:()=>{em(!0)},editHistoryComponent:void 0,hideComment:e=>{if(!C.databaseId)throw Error("Comment not found");e$({commentDatabaseId:C.databaseId,reason:e},{onError:()=>{eC(!1),eO("Failed to hide comment")},onSuccess:()=>ef(!0)})},onBlock:(e,t,n,i,a,s)=>eV({duration:e,shouldHideComment:t,hiddenReason:n,organizationLogin:i,notifyBlockedUser:a,userLogin:s},{onError:()=>eO("Failed to block user"),onSuccess:()=>{t&&ef(!0)}}),onUnblock:(e,t)=>eU({organizationLogin:e,userLogin:t},{onError:()=>eO("Failed to unblock user")}),onMinimize:ef,onSuccessfulBlock:()=>{setTimeout(()=>f.cg?.location.reload(),800)},isMinimized:eh,commentAuthorLogin:C.author?.login??el.login,navigate:u.l,commentSubjectAuthorLogin:C.reference?.author?.login??"",onReplySelect:X,unhideComment:()=>{if(!C.databaseId)throw Error("Comment not found");eB({commentDatabaseId:C.databaseId},{onError:()=>{eC(!1),eO("Failed to unhide comment")},onSuccess:()=>ef(!1)})},hideActions:A,isReply:eZ,forceInlineAvatar:!0,containerStyle:{},originalDiffPathUri:eo,isOutdated:s,commentAuthorSlug:"copilot"===C.reviewVariantType?"copilot-pull-request-reviewer":void 0,commentAuthorType:"copilot"===C.reviewVariantType?l.S.Bot:void 0},e0=(0,b.useMemo)(()=>(0,eg.E7)(),[]);return(0,i.jsx)(ey.tL,{commands:{"pull-requests-diff-view:quote-reply":()=>{if(eu)return;let e=f.cg?.getSelection(),t=e?.anchorNode?{anchorNode:e.anchorNode,range:e.getRangeAt(0)}:null;X((0,ex.E)(eQ?.current,t,C.body))}},children:(0,i.jsxs)("div",{ref:eQ,id:e?eW:void 0,tabIndex:n?J?0:-1:0,"data-first-thread-comment":P,"data-marker-navigation-comment-thread-id":en,"data-marker-navigation-comment-id":C.id,...J?{role:"document","aria-roledescription":"comment","aria-label":eZ?void 0!==ei?`Reply ${t} to Comment ${ei}`:`Reply ${t}`:void 0!==ei?`Comment ${ei}`:"Comment"}:{},className:(0,v.$)(q,e&&G,"hidden"===eY&&"pb-2"),children:[eJ&&(0,i.jsx)("div",{className:H,"data-is-reply":eZ,children:(0,i.jsx)("div",{className:K})}),(0,i.jsx)("div",{className:W,"data-is-nested-reply":eJ,children:(0,i.jsx)(l.v,{...eX,commentBody:C.body,threadCommentCount:et,isInDialogMode:J,actions:A?void 0:(0,i.jsx)(M.RelayEnvironmentProvider,{environment:e0,children:(0,i.jsx)(o.p,{...eX})}),isOutdated:s})}),eA&&(0,i.jsxs)(y.A,{variant:"danger",className:"m-3",children:[(0,i.jsx)(g.StopIcon,{className:"mr-2"}),eA]}),(0,i.jsxs)("div",{className:H,"data-is-reply":eZ,children:[eZ&&(0,i.jsx)("div",{className:z,"data-is-last-child":a}),"editing"===eY&&(0,i.jsx)("div",{className:(0,v.$)("flex-1 min-width-0 pr-2 pt-1 pb-2",eZ?"pl-0":"pl-2"),children:(0,i.jsxs)(U.S,{ref:eD,label:"Update comment",value:ej,onChange:e=>{eL({text:e}),ew(e),ek(void 0)},onPrimaryAction:eH,suggestedChangesConfig:ea,markdownErrorMessage:eI,children:[(0,i.jsx)(r.xR,{variant:"default",onClick:()=>{em(!1),eT(),ew(C.body)},children:"Cancel"}),(0,i.jsx)(r.xR,{disabled:e_||!ej.length,loading:e_,variant:"primary",onClick:eH,children:"Update"})]})}),"visible"===eY&&(0,i.jsxs)("div",{className:Z,"data-is-reply":eZ,children:[C.bodyHTML&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.vb,{ref:eE,className:(0,v.$)("markdown-body",Q),"comment-testid":`Comment body html for comment ${C.id}`,html:C.bodyHTML}),"copilot"===C.reviewVariantType&&(0,i.jsxs)("p",{className:"text-small color-fg-muted mt-2 mb-1",children:[(0,i.jsx)("a",{target:"_blank",rel:"noopener noreferrer",className:"Link--inTextBlock",href:"https://docs.github.com/en/copilot/responsible-use-of-github-copilot-features/responsible-use-of-github-copilot-code-review",children:"Copilot"})," ","uses AI. Check for mistakes."]}),(0,i.jsxs)("div",{className:"d-flex flex-direction-column gap-2",children:["copilot"===C.reviewVariantType&&(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)(c.Z,{commentUrl:C.url,commentId:C.databaseId?.toString()??""})}),C.reactionGroups&&(0,i.jsx)("div",{className:"d-flex flex-direction-column mt-2",children:(0,i.jsx)(m.P,{ref:eR,reactionGroups:C.reactionGroups,onReact:(e,t)=>{if(!C.databaseId)throw Error("Comment not found");setTimeout(()=>eR.current?.focus(),0),eq({commentDatabaseId:C.databaseId,threadId:en,reaction:e,viewerHasReacted:t},{onError:()=>{eC(!1),ec({type:"error",message:"Failed to react to comment"})}})},canReact:C.viewerCanReact})})]}),es&&(0,i.jsx)(ep,{comment:C,commentBodyRef:eE,filePath:k,isOutdated:s,isThreadResolved:j,databaseId:C.databaseId,suggestedChangesConfig:ea,applySuggestedChangesValidationData:es,viewerCanApplySuggestion:er?.viewerCanApplySuggestion})]}),ev&&(0,i.jsx)(x.K,{title:"Delete comment?",confirmButtonContent:"Delete",confirmButtonType:"danger",confirmButtonLoading:eN,onClose:e=>{"confirm"===e?(eS(!0),eF({commentId:C.id,threadId:en,filePath:k},{onError:()=>{eb(!1),ec({type:"error",message:"Failed to delete comment"}),eS(!1)}})):(T&&I?.(T),eb(!1),eS(!1))},children:"Are you sure you want to delete this comment?"})]})]})]})})};function eb(){setTimeout(ej,800)}function ej(){return f.cg?.location.reload()}try{ev.displayName||(ev.displayName="ReviewThreadComment")}catch{}},61282:(e,t,n)=>{n.d(t,{V:()=>h});var i=n(74848),a=n(21728),s=n(96540),r=n(38621),l=n(26108),o=n(21373),d=n(69726),c=n(15220),u=n(54571);let m=(0,s.lazy)(()=>Promise.all([n.e(3088),n.e(43934),n.e(82216),n.e(6488),n.e(42892),n.e(99418),n.e(30587),n.e(72471),n.e(55229),n.e(4712),n.e(3086),n.e(82081),n.e(51220),n.e(28546),n.e(26744),n.e(40489),n.e(18312),n.e(347),n.e(89332),n.e(47833),n.e(25407),n.e(83494),n.e(83463),n.e(87670),n.e(40771),n.e(66990),n.e(29665),n.e(4817),n.e(37294),n.e(30721),n.e(2635),n.e(99808),n.e(52302),n.e(81171),n.e(67071),n.e(84597),n.e(10422),n.e(12362),n.e(67988)]).then(n.bind(n,68747)).then(e=>({default:e.NewAgentTaskButtonContent})));function h(e){let t,n,d,h,g,y,x=(0,a.c)(26),{isIconButton:v,icon:b,label:j,onOpen:w,onClose:_,setContentOpen:C,open:N,currentRepo:S,currentReference:I,hideRepoSelector:k,eventType:L,size:T,tooltipDirection:D,variant:E}=e,R=void 0===b?r.AgentIcon:b,A=void 0===j?"New agent session":j,[O,P]=(0,s.useState)(!!N);x[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],x[0]=t):t=x[0];let[F]=(0,u.I)(f,!0,t),M=(0,s.useRef)(null);x[1]!==w?(n=()=>{P(!0),w?.()},x[1]=w,x[2]=n):n=x[2];let $=n;x[3]!==_||x[4]!==C?(d=()=>{P(!1),_?.(),C?.(!1)},x[3]=_,x[4]=C,x[5]=d):d=x[5];let B=d,V=S?`${A} in ${S.ownerLogin}/${S.name}`:A;return x[6]!==$||x[7]!==R||x[8]!==v||x[9]!==A||x[10]!==T||x[11]!==D||x[12]!==E?(h=v?(0,i.jsx)(l.K,{ref:M,icon:R,"aria-label":A,size:T,tooltipDirection:D,variant:E,onClick:$}):(0,i.jsx)(o.Q,{ref:M,onClick:$,leadingVisual:R,size:T,children:A}),x[6]=$,x[7]=R,x[8]=v,x[9]=A,x[10]=T,x[11]=D,x[12]=E,x[13]=h):h=x[13],x[14]!==I||x[15]!==S||x[16]!==V||x[17]!==L||x[18]!==B||x[19]!==k||x[20]!==O||x[21]!==F?(g=O&&!F&&(0,i.jsx)(c.l,{title:V,onClose:B,returnFocusRef:M,position:{narrow:"fullscreen"},children:(0,i.jsx)(c.l.Body,{className:"p-0",children:(0,i.jsx)(s.Suspense,{fallback:(0,i.jsx)(p,{}),children:(0,i.jsx)(m,{currentRepo:S,currentReference:I,hideRepoSelector:k,setOpen:B,eventType:L})})})}),x[14]=I,x[15]=S,x[16]=V,x[17]=L,x[18]=B,x[19]=k,x[20]=O,x[21]=F,x[22]=g):g=x[22],x[23]!==h||x[24]!==g?(y=(0,i.jsxs)(i.Fragment,{children:[h,g]}),x[23]=h,x[24]=g,x[25]=y):y=x[25],y}function f(){return!1}function p(){let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{className:"d-flex flex-column flex-items-center p-6",children:(0,i.jsx)(d.A,{srText:"Loading\u2026"})}),t[0]=e):e=t[0],e}try{m.displayName||(m.displayName="LazyNewAgentTaskButtonContent")}catch{}try{h.displayName||(h.displayName="NewAgentTaskButton")}catch{}try{p.displayName||(p.displayName="FallbackContent")}catch{}},61872:(e,t,n)=>{n.d(t,{T:()=>i});let i={MissingProperty:"MissingProperty",CycleDetected:"CycleDetected",NonexistentNode:"NonexistentNode",DisconnectedNode:"DisconnectedNode",InvalidBooleanValue:"InvalidBooleanValue",InvalidRangeValue:"InvalidRangeValue",InvalidSelectValue:"InvalidSelectValue",InvalidFileType:"InvalidFileType",EmptyInputValue:"EmptyInputValue",InvalidDateValue:"InvalidDateValue",UnavailableModel:"UnavailableModel"}},62421:(e,t,n)=>{n.d(t,{G:()=>l});var i=n(21728),a=n(96459),s=n(25641),r=n(33592);function l(){let e,t=(0,i.c)(3),n=(0,r.b)(),l=(0,a.Z)();return t[0]!==n||t[1]!==l?(e=async e=>{window.location.pathname!==s.Jz&&(l(s.Jz),await n.selectThread(null,e))},t[0]=n,t[1]=l,t[2]=e):e=t[2],e}},62828:(e,t,n)=>{n.d(t,{I:()=>o});var i=n(21728),a=n(47789),s=n(35247),r=n(7812),l=n(1747);function o(e){let t,n=(0,i.c)(8),{messageId:o,messageIndex:d,messageTimestamp:c}=e,{openPreviewPane:u,openItem:m,updateItem:h}=(0,l.xx)(),f=(0,a.qw)();return n[0]!==o||n[1]!==d||n[2]!==c||n[3]!==m||n[4]!==u||n[5]!==f||n[6]!==h?(t=(e,t)=>{let n=null;switch(e.type){case"file":n=(0,r.by)(e,o,c);break;case"file-diff":n=(0,r.g)(e,o,c);break;case"thread-scoped-file":n=(0,r.oR)({ref:e,messageIndex:d,messageId:o,timestamp:c});break;case"draft-issue":case"draft-update-issue":n=(0,r.oR)({ref:e,messageIndex:d,messageId:o});break;case"issue":n=(0,r.SI)(e,o);break;case"job":s.W.immersiveJobResultPreview&&(n=(0,r.wN)(e,o));break;default:for(let t of f)if(t.previewComponents?.[e.type]){n=(0,r.Bx)(e,o);break}}n&&(t?.preventDefault(),h(n),m(n.id),u())},n[0]=o,n[1]=d,n[2]=c,n[3]=m,n[4]=u,n[5]=f,n[6]=h,n[7]=t):t=n[7],t}},64894:(e,t,n)=>{n.d(t,{C:()=>o});var i=n(74848),a=n(21728),s=n(11680),r=n(96379),l=n(96540);function o(e){let t,n,o,d=(0,a.c)(4),{onBannerDismiss:c,enabled:u}=e,[m,h]=(0,l.useState)(!1);return!(void 0===u||u)||m?null:(d[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"text-bold",children:"Copilot coding agent now uses fewer premium requests!"})," From now on, each session uses just one premium request."]}),n=(0,i.jsx)(s.l.PrimaryAction,{as:"a",href:"https://docs.github.com/copilot/concepts/copilot-billing/understanding-and-managing-requests-in-copilot",children:"Learn more"}),d[0]=t,d[1]=n):(t=d[0],n=d[1]),d[2]!==c?(o=(0,i.jsx)(s.l,{variant:"upsell",title:"Copilot premium requests announcement",hideTitle:!0,description:t,primaryAction:n,onDismiss:async()=>{h(!0),c&&c(),await (0,r.DI)("/settings/dismiss-notice/copilot_coding_agent_premium_requests_banner",{method:"POST"})}}),d[2]=c,d[3]=o):o=d[3],o)}try{o.displayName||(o.displayName="PremiumRequestsBanner")}catch{}},64917:(e,t,n)=>{n.d(t,{I:()=>s});var i=n(21728),a=n(99993);function s(e,t){let n=(0,i.c)(2),{data:s}=(0,a._N)(e,t);if(void 0===s){let t;return n[0]!==e?(t=e(void 0),n[0]=e,n[1]=t):t=n[1],t}return s}},65529:(e,t,n)=>{n.d(t,{as:()=>h,fp:()=>m,vQ:()=>u});var i=n(47865),a=n(76977),s=n(77164),r=n(2635),l=n(53419),o=n(96540);let d="copilot-chat-spec-task";function c(e,t){if(e&&t)return`${d}::${e}::${t}`}function u(e){let{selectedThreadID:t}=(0,r.Pk)(),n=c((0,r.Pk)().selectedThreadID,e.tag),[a,s]=(0,o.useState)(null);(0,o.useEffect)(()=>{s(null)},[e.id]);let u=(0,o.useCallback)(e=>{let n;e instanceof i.c||(e=Error("An unexpected error occurred. Please try again.",{cause:e})),s(e),e&&"status"in e&&"number"==typeof e.status&&(n=e.status),(0,l.BI)("copilot.spec_mode.pr_creation.failure",{http_status:n,error_message:e.message,mode:"immersive",threadId:t})},[t]),{createTask:m,isCreating:h}=(0,i.Z)({onError:u}),f=e.name,p=(0,o.useMemo)(()=>((e.name?`${e.name}

${e.description}`:e.description)||e.tag).trim(),[e.name,e.description,e.tag]);return{start:(0,o.useCallback)(i=>{if(h)return;s(null),(0,l.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_START",mode:"immersive",threadId:t});let a=i?.nameWithOwner??e.repository;if(!a)return void u(Error("Repository is required to start a task"));let r=a.split("/");2===r.length&&r[0]&&r[1]?n?m({nwo:a,baseRef:i?.branch,selectedAgent:i?.subAgent?{typeName:"customSubAgent",subAgentSlug:i.subAgent}:void 0,problemStatement:p,title:f,eventType:d},n):u(Error("Unable to generate task ID - thread or task tag missing")):u(Error('Invalid repository format. Expected "owner/repo"'))},[m,n,u,h,p,e.repository,t,f]),isStarting:h,error:a}}function m(e){let t=(0,r.Pk)(),n=e.map(e=>c(t.selectedThreadID,e.tag));(0,a._)();let{tasks:i,isLoading:l}=(0,s.si)({});return(0,o.useMemo)(()=>n.map(e=>!e||l||0===i.length?{isLoading:!!e&&l,pullRequest:void 0}:function(e){if(0===e.length)return{isLoading:!1,pullRequest:void 0};let t={isLoading:!1,pullRequest:void 0};for(let n of e){if(n.isLoading)return{isLoading:!0,pullRequest:void 0};if(n.pullRequest?.state==="closed")continue;let e=n.pullRequest?.created_at,i=t.pullRequest?.created_at;e&&(!i||new Date(e).getTime()>new Date(i).getTime())&&(t=n)}return t}(i.filter(t=>t.event_identifiers?.includes(e)).map(e=>({isLoading:!!e?.isOptimistic,pullRequest:e.pull})))),[n,i,l])}function h(e){return m(e?[e]:[])[0]??{isLoading:!1,pullRequest:void 0}}},68226:(e,t,n)=>{n.d(t,{v:()=>P,n:()=>O});var i=n(74848),a=n(68273),s=n(96540),r=n(71323),l=n(97283),o=n(87134),d=n(1932),c=n(21132),u=n(15697);function m({diffSummaries:e,diffSummariesArray:t,loadedPathDigests:n,loadingPathDigests:i,selectedPathDigest:a}){let s=!0,r=t??Object.values(e),l=r.findIndex(e=>e.pathDigest===a);return r.map(({path:e,pathDigest:t},a)=>{let r,o;switch(!0){case n.has(t):r=c.s.Loaded;break;case i.has(t):r=c.s.Loading;break;default:r=c.s.NotLoaded}let d=!1;return r===c.s.Loaded?(o="RENDER",d=!1):(a===l?(o="EAGER_AUTO_LOAD",d=!0):(o=a<l?"LAZY_AUTO_LOAD":a===l+1?"EAGER_AUTO_LOAD":s?"EAGER_AUTO_LOAD":"HIDE",d=!1),s&&"LAZY_AUTO_LOAD"!==o&&(s=!1)),{path:e,pathDigest:t,loadingStatus:r,renderMode:o,loadSolo:d}})}function h({progressiveDiffEntries:e,startingAt:t,preferAnySoloEntry:n}){if(n){let t=e.find(e=>e.loadSolo&&e.loadingStatus===c.s.NotLoaded);if(t)return[t]}let i=e.findIndex(e=>e.pathDigest===t.pathDigest);if(-1===i)return[];let a=e[i];if(a&&a.loadSolo&&a.loadingStatus===c.s.NotLoaded)return[a];let s=[];for(let t=i;t<e.length;t++){let n=e[t];if(!n||(n.loadingStatus===c.s.NotLoaded&&s.push(n),s.length>=4))break}return s}var f=n(56092);let p=({initialDiffSummaries:e,initialLoadedPathDigests:t,selectedPathDigest:n})=>(i,a)=>{let s=new Set,r=e=>{for(let t of e)s.delete(t)},l=()=>{let e=new Set,t=new Set;for(let n of a().entries)n.loadingStatus===c.s.Loaded?e.add(n.pathDigest):n.loadingStatus===c.s.Loading&&t.add(n.pathDigest);return{loaded:e,loading:t}},o=e,d=Object.values(e),p=m({diffSummaries:e,diffSummariesArray:d,loadedPathDigests:t,loadingPathDigests:new Set,selectedPathDigest:n}),g=({loadedPathDigests:e,loadingPathDigests:t},n,s)=>{let r=Array.from(e),l=Array.from(t);(0,f.H)(()=>i(e=>{let t,n=m({diffSummaries:e.diffSummaries,diffSummariesArray:(t=e.diffSummaries??a().diffSummaries)?o===t?d:(o=t,d=Object.values(t)):[],loadedPathDigests:new Set(r),loadingPathDigests:new Set(l),selectedPathDigest:e.selectedPathDigest});return{...e,entries:n}},void 0,n),s)};return{entries:p,selectedPathDigest:n,internalProgressiveDiffsActions:{loadSelectedEntries:async e=>{let t;if(0===e.length)return;let n=e.filter(e=>!s.has(e.pathDigest));if(0===n.length)return;let i=n.map(e=>e.path),o=n.map(e=>e.pathDigest);for(let e of o)s.add(e);let{loaded:d,loading:c}=l();g({loadedPathDigests:d,loadingPathDigests:new Set([...c,...s])},"loadSelectedEntries#preFetch");let{loadDiffEntries:m}=a().diffEntriesActions,h=(0,u.i)({paths:new Set(i),diffSummaries:a().diffSummaries});try{t=await m({paths:i,contextRanges:h})}catch(e){throw r(o),e}let f=t??[],p=new Set(f.map(e=>e.pathDigest));r(o);let{loaded:y,loading:x}=l(),v=new Set(y);for(let e of p)v.add(e);let b=new Set(x);for(let e of p)b.delete(e);for(let e of s)b.add(e);g({loadedPathDigests:v,loadingPathDigests:b},0===f.length?"loadSelectedEntries#postFetch#noAPIData":"loadSelectedEntries#postFetch")}},progressiveDiffsActions:{loadMore:async(e,{preferAnySoloEntry:t}={})=>{let n=h({progressiveDiffEntries:a().entries,startingAt:e,preferAnySoloEntry:t});return a().internalProgressiveDiffsActions.loadSelectedEntries(n)},updateSelectedPathDigest:e=>{i(t=>({...t,selectedPathDigest:e}));let t=a().entries.find(t=>t.pathDigest===e);if(t)return a().internalProgressiveDiffsActions.loadSelectedEntries([t])}}}};var g=n(70170);let y=({prxFilesLiteThrottle:e,prxFilesMediumThrottle:t,initialDiffSummaries:n,initialLoadedPathDigests:i,selectedPathDigest:a})=>(s,r)=>{let l;return l=t?100:50*!!e,{entries:m({diffSummaries:n,loadedPathDigests:i,loadingPathDigests:new Set,selectedPathDigest:a}),selectedPathDigest:a,internalProgressiveDiffsActions:{loadSelectedEntries:(0,g.n)(async e=>{if(0===e.length)return;let t=e.map(e=>e.path),n=e.map(e=>e.pathDigest),i=r().entries.filter(e=>e.loadingStatus===c.s.Loaded).map(e=>e.pathDigest),a=r().entries.filter(e=>e.loadingStatus===c.s.Loading).map(e=>e.pathDigest);s(e=>({entries:m({diffSummaries:e.diffSummaries,loadedPathDigests:new Set(i),loadingPathDigests:new Set([...a,...n]),selectedPathDigest:e.selectedPathDigest})}),void 0,"loadSelectedEntries#preFetch");let{loadDiffEntries:l}=r().diffEntriesActions,o=(0,u.i)({paths:new Set(t),diffSummaries:r().diffSummaries}),d=await l({paths:t,contextRanges:o});if(!d||0===d.length){let e=[...r().entries.filter(e=>e.loadingStatus===c.s.Loaded).map(e=>e.pathDigest)],t=r().entries.filter(e=>e.loadingStatus===c.s.Loading).map(e=>e.pathDigest);return s({entries:m({diffSummaries:r().diffSummaries,loadedPathDigests:new Set(e),loadingPathDigests:new Set(t),selectedPathDigest:r().selectedPathDigest})},void 0,"loadSelectedEntries#postFetch#noAPIData")}let h=d.map(e=>e.pathDigest),f=[...r().entries.filter(e=>e.loadingStatus===c.s.Loaded).map(e=>e.pathDigest),...h],p=r().entries.filter(e=>e.loadingStatus===c.s.Loading).filter(e=>!h.includes(e.pathDigest)).map(e=>e.pathDigest);s(e=>({...e,entries:m({diffSummaries:r().diffSummaries,loadedPathDigests:new Set(f),loadingPathDigests:new Set(p),selectedPathDigest:r().selectedPathDigest})}),void 0,"loadSelectedEntries#postFetch")},l)},progressiveDiffsActions:{loadMore:async(e,{preferAnySoloEntry:t}={})=>{let n=h({progressiveDiffEntries:r().entries,startingAt:e,preferAnySoloEntry:t});return r().internalProgressiveDiffsActions.loadSelectedEntries(n)},updateSelectedPathDigest:e=>{s(t=>({...t,selectedPathDigest:e}));let t=r().entries.find(t=>t.pathDigest===e);if(t)return r().internalProgressiveDiffsActions.loadSelectedEntries([t])}}}};var x=n(91747),v=n(61583),b=n(79472),j=n(43362),w=n(48845),_=n(20622),C=n(96379),N=n(16235),S=n(69599);function I({basePath:e,effectiveRange:t,hideWhitespace:n}){return[_.uT.diffEntries,e,`baseOid:${t.baseOid}`,`headOid:${t.headOid}`,`hideWhitespace:${n}`]}async function k(e){let t=(0,N.S)(),n=I(e),i=await T(e);return i&&i.length>0&&t.setQueryData(n,(0,d.jM)(e=>{if(!e)return i;for(let t of i)e.find(e=>e.pathDigest===t.pathDigest)||e.push(t)})),i}async function L(e){let t,n=(0,N.S)(),i=I(e),a=n.getQueryData(i);if(a?.length){let n=new Set(a.map(e=>e.path));if(0===(t=e.paths.filter(e=>!n.has(e))).length)return a}else t=e.paths;let s=await T({...e,paths:t});return s&&s.length>0&&n.setQueryData(i,(0,d.jM)(e=>{if(!e)return s;for(let t of s)e.find(e=>e.pathDigest===t.pathDigest)||e.push(t)})),(n.getQueryData(i)||[]).filter(t=>e.paths.includes(t.path))}async function T({basePath:e,fullDiff:t,effectiveRange:n,paths:i,contextRanges:a,signal:s,hideWhitespace:r,isComparisonOutdated:l}){let o=new URLSearchParams,d=i.map(e=>encodeURIComponent(e));if(o.append("paths",d.join(",")),a){let e=i.map(e=>(a[e]??[]).map(([e,t])=>`${e}-${t}`).join(",")).join(":");o.append("ctx",e)}o.append("w",r?"1":"0"),n.baseOid===t.baseOid?o.append("range",n.headOid):o.append("range",`${n.baseOid}..${n.headOid}`),l&&o.append("outdated","1");let c=`${e}/page_data/${_.uT.diffEntries}?${o.toString()}`;try{let e=await (0,C.Sr)(c,{signal:s});if(s?.aborted)return;let t=await (0,w.hp)(e);return(0,w.R)(e,t),t??void 0}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw e}}function D(e,t,n,i){return[_.uT.diffContextLines,e,t,n,i]}async function E({contextLineRanges:e,basePath:t,path:n,w:i="0",fullDiff:a,effectiveRange:s}){let r=new URLSearchParams;for(let t of(r.append("path",n),e))r.append("context_line_ranges[]",JSON.stringify(t));r.append("w",i),s.baseOid===a.baseOid?r.append("range",s.headOid):r.append("range",`${s.baseOid}..${s.headOid}`);let l=`${t}/page_data/${_.uT.diffContextLines}?${r.toString()}`,o=await (0,C.QJ)(l);if(o.ok)return await o.json()??void 0}var R=n(88008);let A=(0,s.createContext)(null),O=(0,a.Z6)()?function(e){let t=(0,s.useContext)(A);if(!t)throw Error("Missing PullRequestStoreProvider in the tree");return(0,r.P)(t,e)}:function(e){let t=(0,s.useContext)(A);if(!t)throw Error("Missing PullRequestStoreProvider in the tree");return(0,r.P)(t,e)},P=({initData:e,children:t})=>{var n,a,r,l,o,d;let c,u,m=(0,s.useRef)(null),h=(0,x.u)("prx_files_lite_throttle"),f=(0,x.u)("prx_files_medium_throttle"),p=(0,S.G7)("pr_react_loading_optimizations"),g=(0,b.Qn)(e.user.viewSettings.hideWhitespace),y=e.user.viewSettings.commentsPreference,w=(0,j.Wp)(e.diffSummaries),_=(0,j.Be)(e.diffSummaries),C=(0,j.wm)(e.viewerPendingReview),k=(0,j.Sl)(e.diffContents),L=(0,j.jH)(e.markers,e.diffSummaries),T=(0,R.Ol)(e.pullRequest.pathName,e.pullRequest.comparison.headOid);return m.current||(n=e.comparison.selectedRange?.baseOid,a=e.comparison.selectedRange?.headOid,r=e.pullRequest.pathName,l=e.diffContents,o=e.pullRequest.comparison,d=g,c=(0,N.S)(),u=I({basePath:r,effectiveRange:{baseOid:n??o.baseOid,headOid:a??o.headOid},hideWhitespace:d}),c.setQueryData(u,l),m.current=F({baseOid:e.pullRequest.comparison.baseOid,headOid:e.pullRequest.comparison.headOid,selectedCommitRange:e.comparison.selectedRange,comparisonView:e.comparison.viewing,changeGroupGeneration:e.changeGroupGeneration,hideWhitespace:g,isSingleFileMode:e.isSingleFileMode,collapsedFilesMap:_,initialSummariesViewedStatus:_,initialSummariesViewedCount:e.user.viewedFilesCount,diffEntries:k,commentsPreference:y,initialDiffSummaries:w,initialLoadedPathDigests:new Set(e.diffContents.map(e=>e.pathDigest)),markers:L,basePath:e.pullRequest.pathName,pendingReview:C,prxFilesLiteThrottle:h,prxFilesMediumThrottle:f,prReactLoadingOptimizations:p,pullRequest:e.pullRequest,baseRepository:e.repository,selectedPathDigest:(0,v.jU)((0,v.o9)()),initialActiveBatch:T.length>0?T:void 0,showChangeGroupPreference:e.user.viewSettings.showChangeGroups})),(0,i.jsx)(A.Provider,{value:m.current,children:t})},F=e=>{let t=e.prReactLoadingOptimizations?p:y;return(0,l.y)()((0,o.lt)((...n)=>({...(({changeGroupGeneration:{canAccessChangeGroups:e,changeGroups:t,changeGroupFeedbackOptions:n,latestChangeGroupOrchestration:i,changeGroupGenerationChannel:a,unavailableReason:s},showChangeGroupPreference:r})=>l=>({changeGroupGeneration:{canAccessChangeGroups:e,changeGroups:t,changeGroupFeedbackOptions:n,latestChangeGroupOrchestration:i,changeGroupGenerationChannel:a,unavailableReason:s},showChangeGroupPreference:r,changeGroupGenerationActions:{updateChangeGroupGeneration:e=>l(t=>({changeGroupGeneration:{...t.changeGroupGeneration,...e},showChangeGroupPreference:t.showChangeGroupPreference}),void 0,"updateChangeGroupGeneration"),updateChangeGroupPreference:e=>l(t=>({changeGroupGeneration:t.changeGroupGeneration,showChangeGroupPreference:e}),void 0,"updateChangeGroupPreference")}}))(e)(...n),...((e,t)=>({codeowners:void 0,codeownersActions:{setCodeowners:t=>{e({codeowners:t},void 0,"updateCodeowners")}}}))(...n),...(({baseOid:e,headOid:t,selectedCommitRange:n,comparisonView:i,hideWhitespace:a})=>s=>({comparisonInfo:{fullDiff:{baseOid:e,headOid:t},selectedRange:n,effectiveRange:n??{baseOid:e,headOid:t},hideWhitespace:a,comparisonView:i},isComparisonOutdated:!1,comparisonInfoActions:{updateWhitespace:e=>s(t=>({comparisonInfo:{...t.comparisonInfo,hideWhitespace:e}}),void 0,"comparisonInfo#updateWhitespace"),markComparisonOutdated:()=>s(()=>({isComparisonOutdated:!0}),void 0,"comparisonInfo#markComparisonOutdated")}}))(e)(...n),...((e,t)=>({diffFilter:{state:{activeChangeGroupId:void 0,filterText:"",fileExtensions:{},unselectedFileExtensions:new Set,showDeletedFiles:!0,showOnlyManifestFiles:!1,showOnlyOwnedFiles:!1,showVendoredFiles:!0,showViewedFiles:!0},filtersInteractedWith:!1},diffFilterActions:{updateDiffFilter:(n,i)=>{e({diffFilter:{...t().diffFilter,state:{...t().diffFilter.state,...n},filtersInteractedWith:t().diffFilter.filtersInteractedWith||!!i}},void 0,"updateFilters")},clearAllFilters:()=>{e({diffFilter:{...t().diffFilter,state:{...t().diffFilter.state,filterText:"",unselectedFileExtensions:new Set,showOnlyOwnedFiles:!1,showDeletedFiles:!0,showOnlyManifestFiles:!1,showVendoredFiles:!0,showViewedFiles:!0},filtersInteractedWith:!0}},void 0,"clearAllFilters")}}}))(...n),...(({initialDiffSummaries:e,initialSummariesViewedStatus:t,initialSummariesViewedCount:n})=>(i,a)=>({diffSummaries:e,summariesViewedCount:n,summariesViewedStatus:t,codeowners:void 0,getPathDigestFromThreadID:e=>{for(let t of Object.values(a().diffSummaries))if(t.markersMap){for(let[n,i]of Object.entries(t.markersMap))if(i.threads.some(t=>Number(t.id)===Number(e)))return t.pathDigest}},getPathDigestFromAnnotationID:e=>{for(let t of Object.values(a().diffSummaries))if(t.markersMap){for(let[n,i]of Object.entries(t.markersMap))if(i.annotations.some(t=>t.id===e))return t.pathDigest}},diffSummariesActions:{setDiffSummaries:e=>{i({diffSummaries:e},void 0,"updateDiffSummaries")},setDiffViewed:(e,t)=>{i(n=>n.diffSummaries?{summariesViewedStatus:(0,d.jM)(n.summariesViewedStatus,n=>{n[e]=t}),summariesViewedCount:n.summariesViewedCount+(t?1:-1),diffSummaries:(0,d.jM)(n.diffSummaries,n=>{n[e]&&(n[e].markedAsViewed=t)})}:n)},onCommentThreadAdded:({path:e,diffLineKey:t,startPosition:n,threadID:a})=>{i((0,d.jM)(i=>{if(!i.diffSummaries)return;let s=i.diffSummaries[e];if(!s)return;let r=s.markersMap??{};r[t]||(r[t]={threads:[],annotations:[]}),r[t].threads.push({id:parseInt(a),start:n}),s.totalCommentsCount=(s.totalCommentsCount||0)+1}),void 0,"commentAddedForDiffSummary")},onCommentThreadDeleted:({path:e,threadID:t})=>{i((0,d.jM)(n=>{if(!n.diffSummaries)return;let i=n.diffSummaries[e];if(i&&i?.totalCommentsCount&&i?.markersMap)for(let[e,n]of Object.entries(i.markersMap))n.threads=n.threads.filter(e=>e.id!==parseInt(t)),0===n.threads.length&&0===n.annotations.length&&delete i.markersMap[e]}),void 0,"commentDeletedForDiffSummary")}}}))(e)(...n),...(({markers:e})=>(t,n)=>({markers:e,getThread:(e,t,i)=>{let a=n().markers;if(a)return a[t]?.[i]?.threads?.find(t=>Number(t.id)===e)},getThreadFromCommentID:e=>{let t=n().markers;if(!t)return;let i=Object.values(t).flatMap(e=>Object.values(e).flatMap(e=>e?.threads??[]));if(i){for(let t of Object.values(i))if(t?.commentsData?.comments.some(t=>t.databaseId===e))return t}},getAnnotationFromID:e=>{let t=n().markers;if(!t)return;let i=Object.values(t).flatMap(e=>Object.values(e).flatMap(e=>e?.annotations??[]));if(i){for(let t of Object.values(i))if(t.databaseId===e)return t}},markersActions:{updateThread:(e,i,a,s)=>{let r=n().markers;if(!r)return;let l=s(r[i]?.[a]?.threads?.find(t=>Number(t.id)===e));l&&t({markers:(0,d.jM)(r,t=>{let n=t[i]?.[a]?.threads?.findIndex(t=>Number(t.id)===e);if(void 0===n||-1===n)t[i]||(t[i]={}),t[i][a]||(t[i][a]={threads:[],annotations:[]}),t[i][a].threads.push(l);else if(t[i]&&t[i][a]&&-1!==n){let e=l.positioning??t[i][a].threads[n]?.positioning,s=l.subject??t[i][a].threads[n]?.subject,r={...l,positioning:e,subject:s};t[i][a].threads[n]=r}})},void 0,"updateThread")},updateThreads:e=>{let i=n().markers;i&&t({markers:(0,d.jM)(i,t=>{for(let n of Object.keys(i)){let i=t[n];if(i)for(let t of Object.keys(i)){let n=i[t];if(!n)continue;let a=n.threads;a&&(n.threads=e(a))}}})})},deleteThreadComment:(e,i,a,s)=>{let r="not_found",l=n().markers;return l&&t({markers:(0,d.jM)(l,t=>{let n=t[a]?.[s]?.threads?.find(t=>Number(t.id)===e);if(!n){r="not_found";return}let l=n.commentsData,o=l?.comments.filter(e=>e.id!==i)??[];if(!l||l.comments.length===o.length){r="not_found";return}if(0===o.length){r="thread_deleted";let n=t[a]?.[s]?.threads;if(n){let t=n.findIndex(t=>Number(t.id)===e);-1!==t&&n.splice(t,1)}}else r="comment_deleted",l&&(l.comments=o)})},void 0,"deleteThreadComment"),r},updateThreadComment:({threadID:e,filePath:i,lineMarkersKey:a,match:s,transform:r})=>{let l=n().markers;l&&t({markers:(0,d.jM)(l,t=>{let n,l=t[i]?.[a]?.threads?.find(t=>Number(t.id)===e);if(!l)return;let o=l.commentsData,d=o?.comments.findIndex(s);"number"==typeof d&&-1!==d&&(n=o?.comments[d]);let c=r(n);c&&(-1===d||"number"!=typeof d?o?.comments.push(c):o&&o.comments&&(o.comments[d]=c))})},void 0,"updateThreadComment")}}}))(e)(...n),...t(e)(...n),...(({collapsedFilesMap:e})=>(t,n)=>({collapsedFilesMap:e,filesCollapsedStatusActions:{updateFileCollapsedStatus:(e,i)=>{let a=n().collapsedFilesMap;a&&t({collapsedFilesMap:(0,d.jM)(a,t=>{t[e]=i})},void 0,"updateFileCollapsedStatus")},updateAllFilesCollapsedStatus:e=>{let i=n().collapsedFilesMap;i&&t({collapsedFilesMap:(0,d.jM)(i,t=>{for(let n of Object.keys(t))t[n]=e})},void 0,"deleteThreadComment")}}}))(e)(...n),...(({pendingReview:e})=>(t,n)=>({pendingReview:e,pendingReviewActions:{addPendingComment:e=>{let i=n().pendingReview;i&&t({pendingReview:(0,d.jM)(i,t=>{t.pendingReviewIDs||(t.pendingReviewIDs=[]),t.pendingReviewIDs.push(e)})},void 0,"addPendingComment")},removePendingComment:e=>{let i=n().pendingReview;i&&t({pendingReview:(0,d.jM)(i,t=>{let n=t.pendingReviewIDs?.filter(t=>t!==e);t.pendingReviewIDs=n})},void 0,"removePendingComment")},clearPendingReview:()=>{let e=n().pendingReview;e&&t({pendingReview:(0,d.jM)(e,e=>{e.id=void 0,e.pendingReviewIDs=[],e.comments=[]})},void 0,"clearPendingReview")}}}))(e)(...n),...(({basePath:e,diffEntries:t,baseOid:n,headOid:i,selectedCommitRange:a})=>(s,r)=>{let l=a??{baseOid:n,headOid:i},o=(0,N.S)();for(let[n,i]of Object.entries(t)){let t=D(e,i.path,l.baseOid,l.headOid);o.setQueryData(t,()=>i.diffLines)}return{diffEntries:t,diffEntriesActions:{updateDiffEntries:t=>{let n=r().diffEntries??{},i={};for(let n of t){let t=D(e,n.path,r().comparisonInfo.effectiveRange.baseOid,r().comparisonInfo.effectiveRange.headOid);o.setQueryData(t,n.diffLines),i[n.path]=n}s({diffEntries:(0,d.jM)(n,e=>{for(let t of Object.keys(i))i[t]&&(e[t]=i[t])})},void 0,"updateDiffEntriesInMap")},loadDiffEntries:async t=>{var n;let i=await (n={basePath:e,...t,...r().comparisonInfo,isComparisonOutdated:r().isComparisonOutdated},(0,S.G7)("pr_sfv_new_diff_fetch")?L(n):k(n));return i&&0!==i.length?(r().diffEntriesActions.updateDiffEntries(i),i):[]},fetchContextLines:async({path:t,contextLineRanges:n,w:i="0"})=>{let a=D(e,t,r().comparisonInfo.effectiveRange.baseOid,r().comparisonInfo.effectiveRange.headOid),l=r().diffEntries[t];l&&await o.fetchQuery({queryKey:a,queryFn:async()=>{let d=await E({contextLineRanges:n,basePath:e,path:t,w:i,...r().comparisonInfo}),c=l.diffLines,u=o.setQueryData(a,e=>c=function(e,t){let n=new Map;for(let t of e){let e=`${t.left}-${t.right}`;n.set(e,t)}return t.map(e=>{let t=`${e.left}-${e.right}`,i=n.get(t);return i?{...e,position:i.position,displayNoNewLineWarning:i.displayNoNewLineWarning}:{...e,position:null,threadsData:void 0}})}(e??l.diffLines,d?.diffEntryLines??[]));return s(e=>({...e,diffEntries:{...e.diffEntries,[t]:{...l,diffLines:c}}}),void 0,"addContextLinesToDiffEntry"),u}})}}}})(e)(...n),...(({markers:e})=>(t,n)=>{let i,a,s=(0,v.Gl)(),r=(0,v.e3)();if(e){if(s){let t=Object.values(e||{}).flatMap(e=>Object.values(e).flatMap(e=>e?.threads??[]));if(t){let e=Number(s);for(let n of Object.values(t)){let t=n?.commentsData?.comments;if(n&&t)for(let s of t)Number(s.databaseId)===e&&(i=n.id,a=e)}}}else if(r){let t=Object.values(e).flatMap(e=>Object.values(e).flatMap(e=>e?.annotations??[]));if(t){let e=Number(r);for(let n of Object.values(t))Number(n.databaseId)===e&&(i=n.id)}}}return{markerAndDiffNavigation:{markerId:i,commentId:a,getCommentId:()=>n().markerAndDiffNavigation.commentId,getMarkerId:()=>n().markerAndDiffNavigation.markerId},markerAndDiffNavigationActions:{navigateToSelectedComment:e=>{let i=n().getThreadFromCommentID(e);if(i){let a=n().getPathDigestFromThreadID(i.id);n().progressiveDiffsActions.updateSelectedPathDigest(a),t(t=>({markerAndDiffNavigation:{...t.markerAndDiffNavigation,commentId:e,markerId:i?.id}}))}},navigateToSelectedAnnotation:e=>{let i=n().getAnnotationFromID(e);if(i){let a=n().getPathDigestFromAnnotationID(e);n().progressiveDiffsActions.updateSelectedPathDigest(a),t(e=>({markerAndDiffNavigation:{...e.markerAndDiffNavigation,commentId:void 0,markerId:i.id}}))}},handleHashUpdate:()=>{let e=(0,v.Gl)(),t=(0,v.e3)(),i=(0,v.jU)(window.location.hash),a=n(),s=a.markerAndDiffNavigation.commentId,r=a.markerAndDiffNavigation.markerId,l=a.selectedPathDigest;if(e&&e!==s)a.markerAndDiffNavigationActions.navigateToSelectedComment(e);else if(t){let e=a.getAnnotationFromID(t),n=e?.id;n&&n!==r&&a.markerAndDiffNavigationActions.navigateToSelectedAnnotation(t)}else i&&i!==l?a.progressiveDiffsActions.updateSelectedPathDigest(i):e||t||i||!l||a.progressiveDiffsActions.updateSelectedPathDigest(void 0)}}}})(e)(...n),...(({isSingleFileMode:e,commentsPreference:t})=>n=>({isSingleFileMode:e,commentsPreference:t,settingsActions:{updateCommentsPreference:e=>{n(()=>({commentsPreference:e}))}}}))(e)(...n),...(({pullRequest:e})=>(t,n)=>({pullRequest:{state:e.state,basePath:e.pathName,id:e.id,number:e.number},pullRequestActions:{updatePullRequestState:e=>{t({pullRequest:{...n().pullRequest,state:e}},void 0,"pullRequest#updatePullRequestState")}}}))(e)(...n),...(({baseRepository:e})=>()=>({repository:{baseRepository:{id:e.id,ownerLogin:e.ownerLogin,name:e.name}}}))(e)(...n),...(t=>({suggestionBatch:{activeBatch:e.initialActiveBatch??[],isSuggestionBatchPending:(e.initialActiveBatch?.length??0)>0},suggestionBatchActions:{addSuggestionToBatch:e=>t(t=>{if(t.suggestionBatch.activeBatch.some(t=>t.commentDatabaseId===e.commentDatabaseId&&t.suggestionIndex===e.suggestionIndex))return t;let n=[...t.suggestionBatch.activeBatch,e];return{suggestionBatch:{...t.suggestionBatch,activeBatch:n,isSuggestionBatchPending:n.length>0}}}),removeSuggestionFromBatch:e=>t(t=>{let n=t.suggestionBatch.activeBatch.filter(t=>t.commentDatabaseId!==e.commentDatabaseId||t.suggestionIndex!==e.suggestionIndex);return{suggestionBatch:{...t.suggestionBatch,activeBatch:n,isSuggestionBatchPending:n.length>0}}}),clearSuggestionBatch:()=>t(e=>({suggestionBatch:{...e.suggestionBatch,activeBatch:[],isSuggestionBatchPending:!1}})),loadActiveBatchFromStorage:e=>t(t=>({suggestionBatch:{...t.suggestionBatch,activeBatch:e,isSuggestionBatchPending:e.length>0}}))}}))(...n)}),{name:"pull-request-store"}))};try{A.displayName||(A.displayName="PullRequestStoreContext")}catch{}try{P.displayName||(P.displayName="PullRequestStoreProvider")}catch{}},68874:(e,t,n)=>{n.d(t,{o:()=>u,V:()=>c});var i=n(74848),a=n(69497),s=n(12683);let r=[{unit:"month",ms:2592e6},{unit:"day",ms:864e5},{unit:"hour",ms:36e5},{unit:"minute",ms:6e4},{unit:"second",ms:1e3}],l=new Intl.DateTimeFormat(void 0,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:void 0,timeZoneName:"short"}),o=new Intl.DateTimeFormat(void 0,{year:"numeric",month:"short",day:"numeric"}),d=new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric"});function c(e,t=!0){let n="",i=new Date,a=i.getTime()-e.getTime(),s=r.find(e=>e.ms<a);if(s&&"month"!==s.unit){let e=Math.floor(a/s.ms);n="day"===s.unit&&1===e?"yesterday":`${e} ${s.unit}${e>1?"s":""} ago`}else{let a=e.getFullYear()===i.getFullYear()?d:o;n=`${t?"on ":""}${a.format(e)}`}return n}function u({timestamp:e,usePreposition:t=!0,linkUrl:n,sx:r}){let o=c(e,t),d=l.format(e);return n?(0,i.jsx)(s.N_,{sx:{...r},href:n,target:"_blank",className:"Ago-module__AgoTimestampLink--cfwj_",children:(0,i.jsx)(a.A,{inline:!0,title:d,children:(0,i.jsx)("span",{title:d,className:"Ago-module__timestampText--rtBsS",children:o})})}):(0,i.jsx)(a.A,{inline:!0,title:d,children:(0,i.jsx)(s.EY,{title:d,sx:r,children:o})})}try{u.displayName||(u.displayName="Ago")}catch{}},69510:(e,t,n)=>{n.d(t,{XG:()=>c,_l:()=>m});var i=n(68273),a=n(21728),s=n(65510),r=n(20622),l=n(96379);function o(e){return null!==e&&"object"==typeof e&&"previewInfo"in e}function d(e){return{thread:{id:e.threadId,isResolved:e.isResolved,isOutdated:e.isOutdated,line:e.line,subjectType:e.subjectType,subject:e.subject,commentsData:e.commentsData},previewInfo:{threadId:e.threadId,commentId:e.commentId,path:e.path,threadPreviewComments:e.threadPreviewComments,originalDiffPathUri:e.originalDiffPathUri,firstComment:e.firstComment,subject:e.subject}}}function c(e){return[r.uT.threadPreviews,e]}function u(e){let t=`${e}/page_data/${r.uT.threadPreviews}`;return{queryKey:c(e),queryFn:async()=>{let e=await (0,l.QJ)(t);if(!e.ok)throw Error(`HTTP ${e.status}`);let n=await e.json();return n.length>0&&!o(n[0])?n.map(d):n}}}let m=(0,i.Z6)()?function(e){let t,n,i,r=(0,a.c)(8),{pathName:l,initialData:c}=e;r[0]!==l?(t=u(l),r[0]=l,r[1]=t):t=r[1];let{queryFn:m,queryKey:h}=t;r[2]!==c?(n=c&&c.length>0&&!o(c[0])?c.map(d):c,r[2]=c,r[3]=n):n=r[3];let f=n;return r[4]!==m||r[5]!==h||r[6]!==f?(i={queryKey:h,queryFn:m,initialData:f,staleTime:1/0},r[4]=m,r[5]=h,r[6]=f,r[7]=i):i=r[7],(0,s.U)(i)}:function({pathName:e,initialData:t}){let{queryFn:n,queryKey:i}=u(e),a=t&&t.length>0&&!o(t[0])?t.map(d):t;return(0,s.U)({queryKey:i,queryFn:n,initialData:a,staleTime:1/0})}},70109:(e,t,n)=>{n.d(t,{S:()=>d});var i=n(74848),a=n(68273),s=n(21728),r=n(42118),l=n(96540),o=n(27011);let d=(0,l.forwardRef)((0,a.GV)()?(e,t)=>{let n,a,l,d,c,u,m,h=(0,s.c)(21);h[0]!==e?({children:n,...a}=e,h[0]=e,h[1]=n,h[2]=a):(n=h[1],a=h[2]);let f=(0,o.Yp)(),{baseRepository:p}=(0,o.GK)(),g=(0,o.L3)();h[3]!==f.id?(l={id:f.id},h[3]=f.id,h[4]=l):l=h[4];let y=`${p.ownerLogin}/${p.name}`;h[5]!==p.id||h[6]!==y?(d={databaseId:p.id,nwo:y,slashCommandsEnabled:!1},h[5]=p.id,h[6]=y,h[7]=d):d=h[7],h[8]!==g.effectiveRange.baseOid||h[9]!==g.effectiveRange.headOid?(c={startCommitOid:g.effectiveRange.baseOid,endCommitOid:g.effectiveRange.headOid},h[8]=g.effectiveRange.baseOid,h[9]=g.effectiveRange.headOid,h[10]=c):c=h[10],h[11]!==f.number||h[12]!==l||h[13]!==d||h[14]!==c?(u={type:"pull_request",id:l,pullRequestNumber:f.number,repository:d,comparison:c},h[11]=f.number,h[12]=l,h[13]=d,h[14]=c,h[15]=u):u=h[15];let x=u;return h[16]!==n||h[17]!==t||h[18]!==a||h[19]!==x?(m=(0,i.jsx)(r.hF,{...a,ref:t,placeholder:"Leave a comment",actions:n,subject:x,showLabel:!1}),h[16]=n,h[17]=t,h[18]=a,h[19]=x,h[20]=m):m=h[20],m}:({children:e,...t},n)=>{let a=(0,o.Yp)(),{baseRepository:s}=(0,o.GK)(),l=(0,o.L3)(),d={type:"pull_request",id:{id:a.id},pullRequestNumber:a.number,repository:{databaseId:s.id,nwo:`${s.ownerLogin}/${s.name}`,slashCommandsEnabled:!1},comparison:{startCommitOid:l.effectiveRange.baseOid,endCommitOid:l.effectiveRange.headOid}};return(0,i.jsx)(r.hF,{...t,ref:n,placeholder:"Leave a comment",actions:e,subject:d,showLabel:!1})});d.displayName="ConversationCommentBox"},70840:(e,t,n)=>{n.d(t,{G:()=>x});var i=n(74848),a=n(21728),s=n(34522),r=n(73189),l=n(97286),o=n(24880),d=n(73017),c=n(96379),u=n(38621),m=n(69726),h=n(40090),f=n(34164),p=n(74022),g=n(96540),y=n(25506);function x({content:e,className:t,fallbackToRaw:n=!1,hideHeadingAnchors:s=!1,useLoadingSkeletonWithOptions:r}){let y=function(e,t,n){let i,s,r,l=(0,a.c)(8),[o,d]=(0,g.useState)(e),[c,u]=(0,g.useState)(t);2e3!==l[0]?(i=(0,p.A)(d,2e3),l[0]=2e3,l[1]=i):i=l[1];let m=i;return l[2]!==c||l[3]!==t||l[4]!==m||l[5]!==e?(s=()=>{t!==c?(m.cancel(),d(e),u(t)):m(e)},r=[m,e,t,c],l[2]=c,l[3]=t,l[4]=m,l[5]=e,l[6]=s,l[7]=r):(s=l[6],r=l[7]),(0,g.useEffect)(s,r),o}(e.value,e.name,2e3),{status:x,data:b}=(0,l.I)({queryKey:["copilot-immersive","MarkdownPreview",y,e.name],queryFn:async()=>{let t=await (0,c.lS)("/copilot/immersive/markdown",{method:"POST",body:{content:y,filename:e.name}});if(!t.ok)throw Error(`Failed to load rendered markdown (${t.status} on ${t.url})`);return await t.json()},placeholderData:o.rX,staleTime:1/0});return(0,i.jsx)("div",{className:(0,f.$)("readme html-blob blob","MarkdownPreview-module__markdownPreview--KrJBX",s&&"MarkdownPreview-module__hideHeadingAnchors--wU3US",t),children:"pending"===x?r?(0,i.jsx)("div",{"aria-label":"Loading Markdown preview\u2026",role:"status","aria-live":"polite",children:r.map((e,t)=>(0,i.jsx)("div",{className:"mb-3",children:(0,i.jsx)(h.r,{size:e.size,lines:e.lines})},t))}):(0,i.jsx)("div",{className:"MarkdownPreview-module__spinner--rHtSt",children:(0,i.jsx)(m.A,{srText:"Loading Markdown preview\u2026"})}):"error"===x?n?(0,i.jsx)(v,{content:e}):(0,i.jsxs)("div",{className:"MarkdownPreview-module__error--Kjmwv",children:[(0,i.jsx)("span",{className:"MarkdownPreview-module__errorIcon--msbkW",children:(0,i.jsx)(u.StopIcon,{size:24})}),(0,i.jsx)("h2",{className:"MarkdownPreview-module__errorHeader--yOGh9",children:"Markdown rendering failed"}),(0,i.jsx)("p",{children:"Refresh the page or check the markdown code"})]}):(0,i.jsx)(d.$6,{className:"markdown-body",html:b.html})})}function v(e){let t,n,l,o,d=(0,a.c)(13),{content:c}=e,u=(0,g.useId)();d[0]!==c.value?(t={value:c.value,language:"markdown"},d[0]=c.value,d[1]=t):t=d[1];let m=(0,y.a)(t);return d[2]!==c.name||d[3]!==u?(n=(0,i.jsxs)("span",{id:u,className:"sr-only",children:[c.name," raw markdown contents"]}),d[2]=c.name,d[3]=u,d[4]=n):n=d[4],d[5]!==m||d[6]!==c.name||d[7]!==c.value||d[8]!==u?(l=(0,i.jsx)(s.default,{ariaLabelledBy:u,fileName:c.name,isReadOnly:!0,spacing:m,value:c.value,onChange:r.l,hideHelp:!0}),d[5]=m,d[6]=c.name,d[7]=c.value,d[8]=u,d[9]=l):l=d[9],d[10]!==n||d[11]!==l?(o=(0,i.jsxs)(i.Fragment,{children:[n,l]}),d[10]=n,d[11]=l,d[12]=o):o=d[12],o}try{x.displayName||(x.displayName="MarkdownPreview")}catch{}try{v.displayName||(v.displayName="RawMarkdownPreview")}catch{}},71317:(e,t,n)=>{n.d(t,{k:()=>a});var i=n(71315);function a(e,t=0){if(void 0===i.XC)return;let n=i.XC.getElementById("screenReaderAnnouncementDiv")??void 0;if(n||(n=function(){if(void 0===i.XC)return;let e=i.XC.createElement("div");return e.classList.add("sr-only","mt-n1"),e.id="screenReaderAnnouncementDiv",e.setAttribute("role","alert"),e.setAttribute("data-testid","screenReaderAnnouncement"),e.setAttribute("aria-live","assertive"),i.XC.body.appendChild(e),e}()),!n)return;let s=n.textContent===e?`${e}\u00A0`:e;setTimeout(()=>{n&&(n.textContent=s)},t)}},72994:(e,t,n)=>{n.d(t,{c:()=>s,t:()=>a});var i=n(35247);function a(e){return e&&0!==e.length?i.W.draftIssueProjectsWithID?e.filter(e=>!!e.title||!!e.id):e.filter(e=>!!e.title).map(e=>e.title):[]}function s(e){return e&&0!==e.length?e.filter(e=>"string"==typeof e?""!==e.trim():!!e.title||!!e.id).map(e=>"string"==typeof e?{title:e}:e):[]}},73262:(e,t,n)=>{n.d(t,{K:()=>c});var i=n(74848),a=n(21728),s=n(96540),r=n(21373),l=n(34164),o=n(48505),d=n(18373);function c(e){let t,n,c,u,m,h,f,p,g,y,x=(0,a.c)(21),{automatedComment:v,isButtonDisabled:b,dismissError:j,onDismiss:w,onReopen:_,className:C}=e,[N,S]=(0,s.useState)(!1),{isDismissable:I,isReopenable:k,resourceName:L,toggleButtonLabel:T}=(h=(0,a.c)(6),p=!(f=v.isDismissed),g="alert",v.source===o.vk.CodeQuality&&(g="finding"),y=f?`Reopen ${g}`:`Dismiss ${g}`,h[0]!==p||h[1]!==f||h[2]!==f||h[3]!==g||h[4]!==y?(m={isDismissed:f,isDismissable:p,isReopenable:f,resourceName:g,toggleButtonLabel:y},h[0]=p,h[1]=f,h[2]=f,h[3]=g,h[4]=y,h[5]=m):m=h[5],m),D=b||!v.viewerCanDismiss,E=b||!v.viewerCanReopen;return x[0]!==v||x[1]!==N||x[2]!==j||x[3]!==w?(t=N&&(0,i.jsx)(d.U,{setOpen:S,count:1,error:j,dismissalOptions:v.dismissalOptions,onSubmit:e=>{let{resolution:t,dismissalComment:n}=e;return w({reason:t,resolutionNote:n},{onSuccess:()=>S(!1)})},delegatedAlertDismissalEnabled:!1,codeSecurity:v.source===o.vk.CodeScanning}),x[0]=v,x[1]=N,x[2]=j,x[3]=w,x[4]=t):t=x[4],x[5]!==C||x[6]!==D||x[7]!==I||x[8]!==L||x[9]!==T?(n=I&&(0,i.jsxs)("div",{className:(0,l.$)("d-flex flex-items-center flex-wrap",C),children:[(0,i.jsx)(r.Q,{"aria-label":T,className:"mr-2",onClick:()=>S(!0),disabled:D,children:T}),(0,i.jsxs)("span",{className:"fgColor-muted f6",children:["Dismissing the ",L," will mark this conversation as resolved."]})]}),x[5]=C,x[6]=D,x[7]=I,x[8]=L,x[9]=T,x[10]=n):n=x[10],x[11]!==C||x[12]!==E||x[13]!==k||x[14]!==_||x[15]!==T?(c=k&&(0,i.jsx)("div",{className:(0,l.$)("d-flex flex-items-center flex-wrap",C),children:(0,i.jsx)(r.Q,{"aria-label":T,onClick:_,disabled:E,children:T})}),x[11]=C,x[12]=E,x[13]=k,x[14]=_,x[15]=T,x[16]=c):c=x[16],x[17]!==t||x[18]!==n||x[19]!==c?(u=(0,i.jsxs)(i.Fragment,{children:[t,n,c]}),x[17]=t,x[18]=n,x[19]=c,x[20]=u):u=x[20],u}try{c.displayName||(c.displayName="BaseAutomatedReviewCommentActions")}catch{}},76219:(e,t,n)=>{n.d(t,{Q:()=>l,U:()=>o});var i=n(74848),a=n(21728),s=n(96540);let r=(0,s.createContext)(null);function l(e){let t,n,s=(0,a.c)(8),{availableModels:l,defaultModel:o,previewUrl:d,sendChatMessage:c,children:u}=e;s[0]!==l||s[1]!==o||s[2]!==d||s[3]!==c?(t={availableModels:l,defaultModel:o,previewUrl:d,sendChatMessage:c},s[0]=l,s[1]=o,s[2]=d,s[3]=c,s[4]=t):t=s[4];let m=t;return s[5]!==u||s[6]!==m?(n=(0,i.jsx)(r.Provider,{value:m,children:u}),s[5]=u,s[6]=m,s[7]=n):n=s[7],n}function o(){let e=(0,s.useContext)(r);if(!e)throw Error("useAppContext must be used within an AppContextProvider");return e}try{r.displayName||(r.displayName="AppContext")}catch{}try{l.displayName||(l.displayName="AppContextProvider")}catch{}},76746:(e,t,n)=>{n.d(t,{v:()=>r});var i=n(61872);n(39087);var a=n(91348),s=n(45363);function r(e,t){if(!Array.isArray(e.nodes))return[{error:"Loop has no nodes",errorType:i.T.MissingProperty,involvedNodes:[]}];let n=function(e,t){let n=[];for(let a of("string"!=typeof e.title&&n.push({error:"Loop is missing a title",errorType:i.T.MissingProperty,involvedNodes:[]}),0===e.nodes.length&&n.push({error:"Loop has no nodes",errorType:i.T.MissingProperty,involvedNodes:[]}),e.nodes))n=n.concat(function(e,t){let n=[];return("string"!=typeof e.title||0===e.title.length)&&n.push({error:"Node is missing a title",errorType:i.T.MissingProperty,involvedNodes:[e.id]}),n.concat(s.C.validateNode(e,t))}(a,t));return n}(e,t),r=(0,a.f0)(e.nodes);for(let t of r.edges){let a=e.nodes.find(e=>e.id===t.from),s=e.nodes.find(e=>e.id===t.to);a&&s||n.push({error:`Node ${t.to} references a nonexistent node {{${t.from}}}`,errorType:i.T.NonexistentNode,involvedNodes:[t.to]})}let l=function(e){let t=new Set,n=new Set,i=[],a=s=>{if(n.has(s)){let e=i.indexOf(s);return i.slice(e)}if(t.has(s))return null;for(let r of(t.add(s),n.add(s),i.push(s),e.edges))if(r.from===s){let e=a(r.to);if(e)return e}return n.delete(s),i.pop(),null};for(let n of e.nodes.values())if(!t.has(n.id)){let e=a(n.id);if(e)return e}return null}(r);if(l&&l.length>0){let e=[...l,l[0]];n.push({error:`Loop contains a cycle: ${e.join(" \u2192 ")}`,errorType:i.T.CycleDetected,involvedNodes:l})}let o=function(e){let t=[...e.nodes.values()];if(0===t.length)return[];let n=[],i=new Set,a=(t,n)=>{for(let s of(i.add(t),n.add(t),e.edges))s.from!==t||i.has(s.to)||a(s.to,n),s.to!==t||i.has(s.from)||a(s.from,n)};for(let e of t)if(!i.has(e.id)){let t=new Set;a(e.id,t),n.push(t)}if(n.length<=1)return[];let s=n.reduce((e,t)=>t.size>e.size?t:e,new Set),r=[];for(let e of t)s.has(e.id)||r.push(e.id);return r}(r);return o.length>0&&n.push({error:`Loop contains unreachable nodes: ${o.join(", ")}`,errorType:i.T.DisconnectedNode,involvedNodes:o}),n}},77999:(e,t,n)=>{n.d(t,{m:()=>d});var i=n(74848),a=n(34164),s=n(37367),r=n(34743),l=n(71988),o=n(96540);let d=(0,o.forwardRef)(({text:e,position:t,children:n,relationship:d="description",offset:c=8,...u},m)=>{let[h,f]=(0,o.useState)(!1),p=(0,o.useRef)(null),{refs:g,floatingStyles:y,context:x,isPositioned:v}=(0,s.we)({open:h,onOpenChange:f,placement:t,middleware:[(0,r.cY)(c),...t?[]:[(0,r.RK)()]],whileElementsMounted:l.ll}),b=(0,s.Mk)(x,{move:!1,delay:{open:100,close:0}}),j=(0,s.iQ)(x),w=(0,s.s9)(x),_=(0,s.It)(x,{role:"tooltip",enabled:"description"===d}),{getReferenceProps:C,getFloatingProps:N}=(0,s.bv)([b,j,w,_]),S=C();"label"===d?u["aria-label"]=e:"description"===d&&(u["aria-describedby"]=x.floatingId);let I=(0,s.SV)([g.setReference,m]),k=(0,o.cloneElement)(n,{...S,...u,onTouchEnd:e=>{n.props.onTouchEnd&&n.props.onTouchEnd(e),setTimeout(()=>f(!1),10)},onMouseEnter:e=>{n.props.onMouseEnter&&n.props.onMouseEnter(e),p.current&&(clearTimeout(p.current),p.current=null)},ref:I});return(0,i.jsxs)(i.Fragment,{children:[k,h&&(0,i.jsx)(s.XF,{children:(0,i.jsx)("div",{ref:g.setFloating,id:x.floatingId,style:{...y,visibility:v?"visible":"hidden"},className:(0,a.$)("Tooltip-module__tooltip--hAat9"),...N(),children:e})})]})});d.displayName="Tooltip"},78456:(e,t,n)=>{n.d(t,{Io:()=>i});let i=[{id:"dummy-1",dummy:!0,owned:!0,title:"Edit writing",description:"Update writing to make it more engaging",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1a",title:"Your writing",description:"The writing you want to edit",type:"text",metadata:{inputType:"text"},content:`There is huge potential in building complex, repeatable pipelines that take advantage of LLM capabilities. A way for anyone to create and share tools. A few examples:

- Scientists sharing workflows for turning conference notes into a queryable artifact
- Scientists creating a pipeline for polishing a draft to adhere to proposal writing requirements
- Developers building a \u{201C}check for security flaws\u{201D} pipeline, accessible via API / vscode extension
- Library maintainers creating a \u{201C}make a new codebase with Next.js" or \u{201C}add Tailwind to your codebase\u{201D} pipeline
- Artists building a pipeline to generate images of a certain style. Or process a sketch into a branded image.
- Generating a customized analysis of all of a lawyer\u{2019}s cases
- Summarize medical research on a topic, using only the most trustable sources

I wager there\u{2019}s a huge market in building and discovering pipelines, and a good implementation will look a bit like ChatGPT with people of many stripes building and using them.

GitHub is the right place for this kind of ecosystem for a few reasons:

- It ties into the spirit of Open Source
- It already has a huge audience to help with the cold start problem
- It mirror\u{2019}s GitHub\u{2019}s mission to make \u{201C}code\u{201D} accessible to a larger audience and the platform valuable to more than just developers. The future will look like people of any occupation \u{201C}writing code\u{201D} (really, just building things with logic)`},{id:"2a",title:"Edit guide",description:"The guide on how to edit writing",type:"text",metadata:{inputType:"text"},content:`# Academish Voice

pvh / Aug 2022

Our publications follow what we call \u{201C}*academish*\u{201D} voice. We follow a largely academic style in our writing but avoid certain academic tendencies.

## Academic Style

- **Make no claims without support.** If you have made an unsupported claim consider its centrality to your argument. If \u{201C}many developers agree\u{201D}, we should be able to link to a source or describe how we know that. If you can\u{2019}t defend it, you should get rid of it.
- **Avoid absolutist language.** It\u{2019}s not \u{201C}the main problem\u{201D}, it\u{2019}s \u{201C}a problem\u{201D}. (Unless, of course, you can defend the claim.)
- **Be precise and specific with your descriptions.** Instead of saying something \u{201C}feels great\u{201D}, describe how it feels. Don\u{2019}t say something \u{201C}is a problem\u{201D} unless you describe what the problem is or to whom. If you\u{2019}re tempted to say something vague because you\u{2019}re not sure, either do enough research until you\u{2019}re sure, or don\u{2019}t say it.
- **Avoid hyperbole.** Use adjectives to add precision, not to persuade. Claiming \u{201C}immense benefits\u{201D} is only appropriate if you have developed a commercially viable fusion power plant. Delete words that are only for emphasis, and keep only those that add substance (e.g. quantify).
- **Structure your writing for incremental reading.** Don\u{2019}t bury the lede. A reader should be able to understand the goals and conclusions of an essay by reading the first couple of paragraphs. Individual sections should briefly reiterate any important material and/or link back to where it is introduced. This may feel repetitive at times but aids readers who take several sessions to read a piece or who jump straight to the sections that interest them.
- **Give credit to others.** Cite earlier work. Link to sources for terms and ideas. Give thanks to contributors, reviewers, and advisors.
- **Be humble and transparent about shortcomings and problems.** We want readers to build on our work, not buy our product.

## Ink & Switch Style

- **Assume the reader is an interested generalist.** Explain jargon. Academic writing is dense with domain terminology because it assumes readers are \u{201C}up to date on the field.\u{201D}  Ink & Switch Essays make use of marginalia in what we call \u{201C}asides\u{201D} to define uncommon terminology. Concretely, you don\u{2019}t need to gloss \u{201C}HTML\u{201D}, but you should probably gloss \u{201C}CRDT\u{201D}.
- **Carefully consider section headings.** Headings should legibly communicate the shape of the essay and serve as a roadmap for a reader to skip to the part of an essay that\u{2019}s most interesting to them. Similarly, avoid including unrelated material in a section with a particular title. If a user already knows \u{201C}How CRDTs Work\u{201D} then they shouldn\u{2019}t miss (much) important information about the project by skipping reading that section.
- **Embrace interactive demonstrations, animations, illustration, and videos.** Sometimes an illustration or demo can offer more clarity on a topic than text alone. As long as the content is self-contained and doesn\u{2019}t rely on external sources, it should be legible for many years to come and viewable offline.
- **It\u{2019}s okay to share hunches and beliefs as long as they\u{2019}re appropriately labeled.** Don\u{2019}t be shy about drawing conclusions, just be clear about the degree of confidence you have and where it comes from.
- **Ensure content looks good in PDF / printed form.** Obviously you lose the elements above, but the PDF version of a paper shouldn\u{2019}t have giant \u{25B6}\u{FE0F} icons obscuring an image. Interactive figures should display a meaningful static view.
- **Use \u{201C}asides\u{201D} for supportive content and marginalia.** Asides can expand on references to other work, link out to related projects, or just share interesting context or historical tidbits.
- **Deploy persuasive or emotional writing appropriately.** You can be enthusiastic in describing your goals but be modest in how you describe your solutions.
- **Keep it classy.** We don\u{2019}t dismiss other people\u{2019}s work or insult their products. Everything around you was made by someone working really hard on it. If we have found a better way, we should show gratitude to those who helped us realize the path forward and humility about our contributions.
- **Sweat the details.** Make sure your colors are carefully chosen. Images should be clear and at the right bit rate. Choose your words carefully. Interactions should be delightful.

The result of these elements should be an essay that is confident, accurate, and readable to almost anyone with a background in technology. Our essays are often long (probably too long) but should consistently reward patient reading and serve as a reference to their readers for many years to come.

---

## About this page

This document aims to articulate the stylistic elements and voice of Ink & Switch Essays.

### **September 1, 2022**

@Martin Kleppmann added some details on academic style.

### **August 17, 2022**

@Todd Matthews made some formatting edits for continuity and scanability.

### **August 16, 2022**

@Peter van Hardenberg created this document. Began with @Adam Wiggins\u{2019} "Essay Playbook" and added notes about Academish Voice, which aim to capture the stylistic elements he looks for when I reading essay drafts. Many of these elements came from @Martin Kleppmann  and @Adam Wiggins reviews of my past writing, so credit to them. This is probably quite useful for everyone working on an essay right now, but is probably not comprehensive. If I've missed anything or anything here is controversial or unclear please feel free to inquire.`},{id:"3a",title:"Edited writing",description:"Writing with suggested changes",type:"prompt",content:"You're a helpful writing tutor here to suggest changes to the writing. Use this guide: {{2a}}. Respond with a full, edited version of {{1a}}. You're a helpful writing tutor here to suggest changes to the writing. Use this guide: {{2a}}. Respond with a full, edited version of {{1a}}. You're a helpful writing tutor here to suggest changes to the writing. Use this guide: {{2a}}. Respond with a full, edited version of {{1a}}."}]},{id:"dummy-2",dummy:!0,title:"Document this function",owned:!0,description:"Document this function so it's easy to understand",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1b",title:"Function to document",description:"The function to document",content:`export function createNodePrompt(node: Node, nodeMap: Record<string, Node>): string {
  let content = node.content;
  const regex = /{{([\\w-]+)}}/g;
  let match;

  while ((match = regex.exec(content)) !== null) {
    const id = match[1];
    const referencedNode = nodeMap[id];
    if (referencedNode) {
      const replacementContent = createNodePrompt(referencedNode, nodeMap);
      content = content.replace(match[0], replacementContent);
    }
  }

  return content;
}`,type:"code"},{id:"2b",title:"Documentation guide",description:"The documentation for the function",content:`Minimum Viable Documentation
A small set of fresh and accurate docs is better than a large assembly of \u{201C}documentation\u{201D} in various states of disrepair.

Write short and useful documents. Cut out everything unnecessary, including out-of-date, incorrect, or redundant information. Also make a habit of continually massaging and improving every doc to suit your changing needs. Docs work best when they are alive but frequently trimmed, like a bonsai tree.

See also these Agile Documentation best practices.

Update Docs with Code
Change your documentation in the same CL as the code change. This keeps your docs fresh, and is also a good place to explain to your reviewer what you\u{2019}re doing.

A good reviewer can at least insist that docstrings, header files, README.md files, and any other docs get updated alongside the CL.

Delete Dead Documentation
Dead docs are bad. They misinform, they slow down, they incite despair in engineers and laziness in team leads. They set a precedent for leaving behind messes in a code base. If your home is clean, most guests will be clean without being asked.

Just like any big cleaning project, it\u{2019}s easy to be overwhelmed. If your docs are in bad shape:

Take it slow, doc health is a gradual accumulation.
First delete what you\u{2019}re certain is wrong, ignore what\u{2019}s unclear.
Get your whole team involved. Devote time to quickly scan every doc and make a simple decision: Keep or delete?
Default to delete or leave behind if migrating. Stragglers can always be recovered.
Iterate.
Prefer the Good Over the Perfect
Documentation is an art. There is no perfect document, there are only proven methods and prudent guidelines. See Better is better than best.

Documentation is the Story of Your Code
Writing excellent code doesn\u{2019}t end when your code compiles or even if your test coverage reaches 100%. It\u{2019}s easy to write something a computer understands, it\u{2019}s much harder to write something both a human and a computer understand. Your mission as a Code Health-conscious engineer is to write for humans first, computers second. Documentation is an important part of this skill.

There\u{2019}s a spectrum of engineering documentation that ranges from terse comments to detailed prose:

Meaningful names: Good naming allows the code to convey information that would otherwise be relegated to comments or documentation. This includes nameable entities at all levels, from local variables to classes, files, and directories.

Inline comments: The primary purpose of inline comments is to provide information that the code itself cannot contain, such as why the code is there.

Method and class comments:

Method API documentation: The header / Javadoc / docstring comments that say what methods do and how to use them. This documentation is the contract of how your code must behave. The intended audience is future programmers who will use and modify your code.

It is often reasonable to say that any behavior documented here should have a test verifying it. This documentation details what arguments the method takes, what it returns, any \u{201C}gotchas\u{201D} or restrictions, and what exceptions it can throw or errors it can return. It does not usually explain why code behaves a particular way unless that\u{2019}s relevant to a developer\u{2019}s understanding of how to use the method. \u{201C}Why\u{201D} explanations are for inline comments. Think in practical terms when writing method documentation: \u{201C}This is a hammer. You use it to pound nails.\u{201D}

Class / Module API documentation: The header / Javadoc / docstring comments for a class or a whole file. This documentation gives a brief overview of what the class / file does and often gives a few short examples of how you might use the class / file.

Examples are particularly relevant when there\u{2019}s several distinct ways to use the class (some advanced, some simple). Always list the simplest use case first.

README.md: A good README.md orients the new user to the directory and points to more detailed explanation and user guides:

What is this directory intended to hold?
Which files should the developer look at first? Are some files an API?
Who maintains this directory and where I can learn more?
See the README.md guidelines.

docs: The contents of a good docs directory explain how to:

Get started using the relevant API, library, or tool.
Run its tests.
Debug its output.
Release the binary.
Design docs, PRDs: A good design doc or PRD discusses the proposed implementation at length for the purpose of collecting feedback on that design. However, once the code is implemented, design docs should serve as archives of these decisions, not as half-correct docs (they are often misused).

Other external docs: Some teams maintain documentation in other locations, separate from the code, such as Google Sites, Drive, or wiki. If you do maintain documentation in other locations, you should clearly point to those locations from your project directory (for example, by adding an obvious link to the location from your project\u{2019}s README.md).

Duplication is Evil
Do not write your own guide to a common Google technology or process. Link to it instead. If the guide doesn\u{2019}t exist or it\u{2019}s badly out of date, submit your updates to the appropriate directory or create a package-level README.md. Take ownership and don\u{2019}t be shy: Other teams will usually welcome your contributions.`,type:"text",metadata:{inputType:"text"}},{id:"3b",title:"My personal skillset",description:"",content:"I'm a software engineer with 5 years of experience in building web applications. I'm skilled in JavaScript, TypeScript, React, and Node.js. I'm also familiar with Python and have experience with machine learning frameworks like TensorFlow and PyTorch. I'm comfortable with SQL and NoSQL databases, and have experience with Docker and Kubernetes. I'm a quick learner and I'm always looking to improve my skills.",type:"text",metadata:{inputType:"text"}},{id:"4b",title:"Documented code",description:"The code with documentation",content:`You're documenting your code for your team.

Update this code: {{1b}}

Using this guide: {{2b}}]

And incorporate {{3b}}`,type:"prompt"},{id:"5b",title:"Function tests",description:"Generate a test for the code",content:"You're generating a Jest test for {{4b}}. Our testing guidelines: {{6b}}",type:"prompt"},{id:"6b",title:"Testing guidelines",description:"The guidelines for testing",content:`The Test Anatomy

\u{26AA} \u{FE0F} 1.1 Include 3 parts in each test name
\u{2705} Do: A test report should tell whether the current application revision satisfies the requirements for the people who are not necessarily familiar with the code: the tester, the DevOps engineer who is deploying and the future you two years from now. This can be achieved best if the tests speak at the requirements level and include 3 parts:

(1) What is being tested? For example, the ProductsService.addNewProduct method

(2) Under what circumstances and scenario? For example, no price is passed to the method

(3) What is the expected result? For example, the new product is not approved


\u{274C} Otherwise: A deployment just failed, a test named \u{201C}Add product\u{201D} failed. Does this tell you what exactly is malfunctioning?


\u{1F447} Note: Each bullet has code examples and sometime also an image illustration. Click to expand



\u{26AA} \u{FE0F} 1.2 Structure tests by the AAA pattern
\u{2705} Do: Structure your tests with 3 well-separated sections Arrange, Act & Assert (AAA). Following this structure guarantees that the reader spends no brain-CPU on understanding the test plan:

1st A - Arrange: All the setup code to bring the system to the scenario the test aims to simulate. This might include instantiating the unit under test constructor, adding DB records, mocking/stubbing on objects, and any other preparation code

2nd A - Act: Execute the unit under test. Usually 1 line of code

3rd A - Assert: Ensure that the received value satisfies the expectation. Usually 1 line of code


\u{274C} Otherwise: Not only do you spend hours understanding the main code but what should have been the simplest part of the day (testing) stretches your brain


\u{26AA} \u{FE0F}1.3 Describe expectations in a product language: use BDD-style assertions
\u{2705} Do: Coding your tests in a declarative-style allows the reader to get the grab instantly without spending even a single brain-CPU cycle. When you write imperative code that is packed with conditional logic, the reader is forced to exert more brain-CPU cycles. In that case, code the expectation in a human-like language, declarative BDD style using expect or should and not using custom code. If Chai & Jest doesn't include the desired assertion and it\u{2019}s highly repeatable, consider extending Jest matcher (Jest) or writing a custom Chai plugin

\u{274C} Otherwise: The team will write less tests and decorate the annoying ones with .skip()


\u{26AA}  1.4 Stick to black-box testing: Test only public methods
\u{2705} Do: Testing the internals brings huge overhead for almost nothing. If your code/API delivers the right results, should you really invest your next 3 hours in testing HOW it worked internally and then maintain these fragile tests? Whenever a public behavior is checked, the private implementation is also implicitly tested and your tests will break only if there is a certain problem (e.g. wrong output). This approach is also referred to as behavioral testing. On the other side, should you test the internals (white box approach) \u{2014} your focus shifts from planning the component outcome to nitty-gritty details and your test might break because of minor code refactors although the results are fine - this dramatically increases the maintenance burden

\u{274C} Otherwise: Your tests behave like the boy who cried wolf: shouting false-positive cries (e.g., A test fails because a private variable name was changed). Unsurprisingly, people will soon start to ignore the CI notifications until someday, a real bug gets ignored\u{2026}


\u{26AA}  1.5 Choose the right test doubles: Avoid mocks in favor of stubs and spies
\u{2705} Do: Test doubles are a necessary evil because they are coupled to the application internals, yet some provide immense value (Read here a reminder about test doubles: mocks vs stubs vs spies).

Before using test doubles, ask a very simple question: Do I use it to test functionality that appears, or could appear, in the requirements document? If not, it\u{2019}s a white-box testing smell.

For example, if you want to test that your app behaves reasonably when the payment service is down, you might stub the payment service and trigger some \u{2018}No Response\u{2019} return to ensure that the unit under test returns the right value. This checks our application behavior/response/outcome under certain scenarios. You might also use a spy to assert that an email was sent when that service is down \u{2014} this is again a behavioral check which is likely to appear in a requirements doc (\u{201C}Send an email if payment couldn\u{2019}t be saved\u{201D}). On the flip side, if you mock the Payment service and ensure that it was called with the right JavaScript types \u{2014} then your test is focused on internal things that have nothing to do with the application functionality and are likely to change frequently

\u{274C} Otherwise: Any refactoring of code mandates searching for all the mocks in the code and updating accordingly. Tests become a burden rather than a helpful friend



\u{26AA} 1.6 Don\u{2019}t \u{201C}foo\u{201D}, use realistic input data
\u{2705} Do: Often production bugs are revealed under some very specific and surprising input \u{2014} the more realistic the test input is, the greater the chances are to catch bugs early. Use dedicated libraries like Chance or Faker to generate pseudo-real data that resembles the variety and form of production data. For example, such libraries can generate realistic phone numbers, usernames, credit cards, company names, and even \u{2018}lorem ipsum\u{2019} text. You may also create some tests (on top of unit tests, not as a replacement) that randomize fakers' data to stretch your unit under test or even import real data from your production environment. Want to take it to the next level? See the next bullet (property-based testing).

\u{274C} Otherwise: All your development testing will falsely show green when you use synthetic inputs like \u{201C}Foo\u{201D}, but then production might turn red when a hacker passes-in a nasty string like \u{201C}@3e2ddsf . ##\u{2019} 1 fdsfds . fds432 AAAA\u{201D}

`,type:"text",metadata:{inputType:"text"}},{id:"7b",title:"Test results",description:"Run the test for the code",content:"You're running tests for {{5b}}. Respond with the results of the tests.",type:"prompt"},{id:"8",title:"Documented and tested code",description:"The code with documentation and test",content:`Here's the documented code: {{4b}}.

Here's the {{5b}} and the {{7b}}.

Respond with "\u{2705} OK" if the tests all pass, and show a code block with the documented code and tests.`,type:"prompt"}]},{id:"dummy-3",dummy:!0,title:"Generate a course teaching me how this code works",owned:!0,description:"Generate a course teaching me how this code works",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1c",title:"Code to explain",description:"The code to explain",content:`import {ticks, tickIncrement} from "d3-array";
import continuous, {copy} from "./continuous.js";
import {initRange} from "./init.js";
import tickFormat from "./tickFormat.js";

export function linearish(scale) {
  var domain = scale.domain;

  scale.ticks = function(count) {
    var d = domain();
    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);
  };

  scale.tickFormat = function(count, specifier) {
    var d = domain();
    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);
  };

  scale.nice = function(count) {
    if (count == null) count = 10;

    var d = domain();
    var i0 = 0;
    var i1 = d.length - 1;
    var start = d[i0];
    var stop = d[i1];
    var prestep;
    var step;
    var maxIter = 10;

    if (stop < start) {
      step = start, start = stop, stop = step;
      step = i0, i0 = i1, i1 = step;
    }

    while (maxIter-- > 0) {
      step = tickIncrement(start, stop, count);
      if (step === prestep) {
        d[i0] = start
        d[i1] = stop
        return domain(d);
      } else if (step > 0) {
        start = Math.floor(start / step) * step;
        stop = Math.ceil(stop / step) * step;
      } else if (step < 0) {
        start = Math.ceil(start * step) / step;
        stop = Math.floor(stop * step) / step;
      } else {
        break;
      }
      prestep = step;
    }

    return scale;
  };

  return scale;
}

export default function linear() {
  var scale = continuous();

  scale.copy = function() {
    return copy(scale, linear());
  };

  initRange.apply(scale, arguments);

  return linearish(scale);
}`,type:"code"},{id:"2c",title:"My skillset",description:"My skillset",content:"I'm a software engineer with 5 years of experience in building web applications. I'm skilled in JavaScript, TypeScript, React, and Node.js. I'm also familiar with Python and have experience with machine learning frameworks like TensorFlow and PyTorch. I'm comfortable with SQL and NoSQL databases, and have experience with Docker and Kubernetes. I'm a quick learner and I'm always looking to improve my skills.",type:"text",metadata:{inputType:"text"}},{id:"3c",title:"Course outline",description:"The outline of the course",content:"You're generating a course teaching me how to understand {{1c}}. I have the following skillset: {{2c}}. Keep it short and concise, with 2-3 sections.",type:"prompt"},{id:"4c",title:"Course content",description:"The content of the course",content:`Generate a short walkthrough that teaches me how to understand {{1c}}. I have the following skillset: {{2c}}.

Flesh out the {{3c}}. Respond with a short walkthrough, using code blocks for code samples.`,type:"prompt"}]},{id:"dummy-4",dummy:!0,title:"Generate app name",owned:!0,description:"Generate and validate potential names for your app",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1d",title:"App description",description:"Describe your app's purpose and target audience",type:"text",metadata:{inputType:"text"},content:"An email app that uses AI to help you write emails faster."},{id:"2d",title:"Generate names",description:"Generate potential names based on description",type:"prompt",content:`You're a creative app naming expert. Generate 10 potential names for an app based on this description: {{1d}}

Rules for the names:
- Keep them short and memorable
- Make sure they're easy to spell
- Consider domain name availability
- Avoid trademarked terms

Format: a JSON array with one name per line`},{id:"3d",title:"Check domain availability",description:"Check if domains are available for the generated names",type:"code",content:`// This code checks domain availability using DNS lookup
  const nameList = {{2d}}

  const results = [];

  for (const name of nameList) {
    const cleanName = name.toLowerCase().replace(/[^a-z0-9]/g, '');
    const domain = cleanName + '.com';

    try {
      // Try to resolve the domain - if it fails, domain might be available
      const response = await fetch(\`https://dns.google/resolve?name=\${domain}\`);
      const data = await response.json();

      results.push({
        name: name,
        domain: domain,
        available: data.Status === 3 || !data.Answer // NXDOMAIN status or no answer means likely available
      });
    } catch (error) {
      results.push({
        name: name,
        domain: domain,
        error: 'Failed to check availability'
      });
    }
  }

  return results;
`}]},{id:"dummy-5",dummy:!0,title:"Wikipedia",owned:!0,description:"Generate a wiki article on a topic or question",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1e",title:"Topic or question",description:"The topic or question to generate a wiki article on",type:"text",metadata:{inputType:"text"},content:"When do babies start to crawl?"},{id:"2e",title:"Split into topics",description:"Split the topic or question into topics",type:"text",metadata:{inputType:"text"},content:`You're creating a write-up on a concept. You need to split it into 5-6 sections that cover interesting aspects of the concept. Respond with a JSON array with one string per topic.

For example:
Concept: Dogs as pets
Topics:
["Dog breeds", "Dog training", "Dog costs", "Dog health", "Dog accessories"]


Concept: {{1e}}
Topics:`},{id:"3e",title:"Generate article",description:"Generate a wiki article on the concept",type:"prompt",content:"You're a wiki article generator. Generate a wiki article on the concept: {{1e}}. Split it into sections: {{2e}} with a title, a bolded key statement, and a list or 2 paragraphs."},{id:"4e",title:"Image",description:"An image for the article",type:"prompt",content:"Generate an ascii art image for the article: {{3e}}"}]},{id:"dummy-6",dummy:!0,title:"Compare two prompts",owned:!0,description:"Compare the performance of two prompts",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1f",title:"Prompt 1",description:"The first prompt to compare",type:"prompt",content:"Make me a haiku about the color blue"},{id:"2f",title:"Prompt 2",description:"The second prompt to compare",type:"prompt",content:"You are a haiku generator. Make a haiku about the color blue. Your job depends on it."},{id:"3f",title:"Important metrics",description:"The important metrics to compare the prompts on",type:"text",metadata:{inputType:"text"},content:"Relevance, creativity, accuracy, completeness, and style"},{id:"4f",title:"Compare",description:"Compare the performance of the two prompts",type:"prompt",content:"For each of the {{3f}}, compare the two prompts: {{1f}} and {{2f}}. Respond with a JSON array with one object per metric, with the metric name and a winner key that says which prompt is better (just say 1 or 2)."}]},{id:"dummy-7",dummy:!0,title:"testing node with offset",owned:!0,description:"Test the edge render behavior for diagram with node offset",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1",type:"text",title:"First Responder Username",description:"GitHub username of the first responder",content:"lichin-lin",metadata:{inputType:"text"}},{id:"2",type:"text",title:"Start Date",description:"Start date for the report (1 week ago)",content:"@today-7d",metadata:{inputType:"date"}},{id:"repos",type:"text",title:"Repositories",description:"List of repositories to include in the report (one per line, e.g. primer/react)",content:`primer/react
primer/css
primer/components`,metadata:{inputType:"text"}},{id:"repo_query",type:"prompt",title:"Repository Query Builder",description:"Builds the repository query string for GitHub search",content:`Convert this list of repositories into a GitHub search query format. For each repository on a new line in {{repos}}, add 'repo:' prefix and combine with OR operators.

For example:
- If input is 'primer/react\\nprimer/css'
- Output should be 'repo:primer/react OR repo:primer/css'

Only return the query string, nothing else.`},{id:"3",type:"github-graphql",title:"Created Issues",description:"Issues created by the user in the past week across all repositories",content:`query {
  search(query: "({{repo_query}}) author:{{1}} is:issue created:>={{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on Issue {
          title
          url
          createdAt
          state
          repository {
            nameWithOwner
          }
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
        }
      }
    }
  }
}`},{id:"4",type:"github-graphql",title:"PR Reviews",description:"PR reviews submitted by the user in the past week across all repositories",content:`query {
  search(query: "({{repo_query}}) is:pr reviewed-by:{{1}} updated:>={{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          repository {
            nameWithOwner
          }
          reviews(first: 5, author: "{{1}}") {
            edges {
              node {
                state
                submittedAt
              }
            }
          }
        }
      }
    }
  }
}`},{id:"involved_issues",type:"github-graphql",title:"Involved Issues",description:"Issues where the user was involved (commented or assigned) in the past week across all repositories",content:`query {
  search(query: "({{repo_query}}) involves:{{1}} is:issue updated:>={{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on Issue {
          title
          url
          updatedAt
          state
          repository {
            nameWithOwner
          }
          comments(last: 5) {
            nodes {
              author {
                login
              }
              createdAt
            }
          }
          assignees(first: 5) {
            nodes {
              login
            }
          }
        }
      }
    }
  }
}`},{id:"5",type:"prompt",title:"Combined Activity Summary",description:"Summary report of the first responder's activity across all repositories",content:`Generate a comprehensive summary report of the first responder's ({{1}}) activity across multiple repositories over the past week. The repositories included are: {{repos}}

Issues Created:
{{3}}

PR Reviews:
{{4}}

Issue Involvement:
{{involved_issues}}

Please format the report with these sections:
1. Overview (total numbers across all repositories)
2. Repository Breakdown (activity summary per repository)
3. Issue Activity
   - Created Issues (grouped by repository)
   - Issue Involvement (comments, assignments, grouped by repository)
4. PR Review Activity (highlight significant reviews, grouped by repository)
5. Key Observations (patterns across repositories, areas needing attention)

Keep the tone professional and focus on what the next first responder needs to know about as they come in for the next shift. Pay special attention to cross-repository patterns and any repositories that may need extra attention.`}]}]},79036:(e,t,n)=>{n.d(t,{S:()=>c,Xh:()=>d,GF:()=>u});var i=n(74848),a=n(68273),s=n(21728),r=n(34164),l=n(48505);let o="AnnotationIcon-module__AnimatedAnnotationIcon--rXSEJ";function d({annotationLevel:e,...t}){let{icon:n,...a}=u[e];return function({fill:e,stroke:t,ariaLabel:n,svgHtml:a,className:s}){return(0,i.jsx)("svg",{"aria-label":n,className:s,fill:e,height:"24",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",style:{boxShadow:"none"},viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",children:a})}({...n,...a,...t})}let c=(0,a.GV)()?function(e){let t,n,a,l,c=(0,s.c)(8);return c[0]!==e?({className:t,...n}=e,c[0]=e,c[1]=t,c[2]=n):(t=c[1],n=c[2]),c[3]!==t?(a=(0,r.$)(o,t),c[3]=t,c[4]=a):a=c[4],c[5]!==n||c[6]!==a?(l=(0,i.jsx)(d,{...n,className:a}),c[5]=n,c[6]=a,c[7]=l):l=c[7],l}:function({className:e,...t}){return(0,i.jsx)(d,{...t,className:(0,r.$)(o,e)})},u={[l.UZ.Failure]:{priority:1,ariaLabel:"Check failure",primaryColor:"danger.fg",primaryColorClass:"fgColor-danger",borderColor:"borderColor-danger-emphasis",icon:{fill:"var(--bgColor-danger-emphasis, var(--color-danger-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"15",x2:"9",y1:"9",y2:"15"}),(0,i.jsx)("line",{x1:"9",x2:"15",y1:"9",y2:"15"})]})}},[l.UZ.Warning]:{priority:2,ariaLabel:"Check warning",primaryColor:"attention.fg",primaryColorClass:"fgColor-attention",borderColor:"borderColor-attention-emphasis",icon:{fill:"var(--bgColor-attention-emphasis, var(--color-attention-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"12"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"16",y2:"16"})]})}},[l.UZ.Notice]:{priority:3,ariaLabel:"Check notice",primaryColor:"fg.muted",primaryColorClass:"fgColor-muted",borderColor:"fgColor-muted",icon:{fill:"var(--bgColor-neutral-emphasis, var(--color-neutral-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"16",y2:"12"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"8"})]})}}};try{d.displayName||(d.displayName="AnnotationIcon")}catch{}try{c.displayName||(c.displayName="AnimatedAnnotationIcon")}catch{}},79196:(e,t,n)=>{n.d(t,{U:()=>a1});var i,a,s,r,l,o,d,c,u,m,h,f,p,g,y,x,v,b,j,w,_,C,N,S,I,k,L,T,D,E,R,A,O,P,F,M,$,B,V,U,q,G,H,K,W=n(74848),z=n(21728),Q=n(2635),Z=n(33592),J=n(7730),Y=n(25641),X=n(35247),ee=n(72206),et=n(53419),en=n(894),ei=n(75202),ea=n(6551),es=n(69676),er=n(38621),el=n(45800),eo=n(26108),ed=n(94236),ec=n(5524),eu=n(71941),em=n(34164),eh=n(96540),ef=n(22116);let ep="ContentPreview-module__toolbar--_XWuB",eg="ContentPreview-module__actions--o_YRg",ey="ContentPreview-module__rightDivider--LY__Z",ex="ContentPreview-module__content--FgZZL";var ev=n(1747),eb=n(47789),ej=n(90651),ew=n(49246),e_=n(66827),eC=n(29731),eN=n(46251),eS=n(11680),eI=n(43715),ek=n(38598);function eL(e){let t,n,i,a,s,r=(0,z.c)(11),{title:l,description:o,icon:d}=e;return r[0]!==d?(t=(0,W.jsx)(d,{size:24,className:"FailureState-module__icon--TP632"}),r[0]=d,r[1]=t):t=r[1],r[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,W.jsx)("h1",{className:"sr-only",children:"Content preview panel"}),r[2]=n):n=r[2],r[3]!==l?(i=(0,W.jsx)("h2",{className:"FailureState-module__heading--ohXqD",children:l}),r[3]=l,r[4]=i):i=r[4],r[5]!==o?(a=(0,W.jsx)("p",{className:"FailureState-module__subtitle--VM7x1",children:o}),r[5]=o,r[6]=a):a=r[6],r[7]!==t||r[8]!==i||r[9]!==a?(s=(0,W.jsxs)("div",{className:"FailureState-module__container--EliAz",children:[t,n,i,a]}),r[7]=t,r[8]=i,r[9]=a,r[10]=s):s=r[10],s}try{eL.displayName||(eL.displayName="FailureState")}catch{}var eT=n(26100),eD=n(7812);function eE(e){let t,n,i,a,s,r=(0,z.c)(16),{item:l,onVersionSelect:o}=e,{versionedItems:d,openItem:c}=(0,ev.xx)(),u=(0,eD.oy)(l.id),m=d.get(u)??[],h=m.indexOf(l.id);if((0,eh.useEffect)(()=>{o&&m.length>1&&o(`Version${h+1}`)},[h,o,m.length]),m.length<=1)return null;let f=ed.W,p=h+1;r[0]!==p?(t=(0,W.jsx)(ed.W.Button,{variant:"invisible",className:"VersionSelector-module__anchor--Tx_UX",children:(0,W.jsx)(eT.g,{version:p,"data-testid":"version-selector"})}),r[0]=p,r[1]=t):t=r[1];let g=ed.W,y=ec.l;r[2]!==l.id||r[3]!==o||r[4]!==c?(n=(e,t)=>(0,W.jsxs)(ec.l.Item,{onSelect:()=>{c(e),o&&o(`Version${t+1}`)},selected:e===l.id,children:[(0,W.jsx)(ec.l.LeadingVisual,{children:(0,W.jsx)(eT.g,{version:t+1})}),"Version ",t+1]},e),r[2]=l.id,r[3]=o,r[4]=c,r[5]=n):n=r[5];let x=m.map(n);return r[6]!==y||r[7]!==x?(i=(0,W.jsx)(y,{selectionVariant:"single",children:x}),r[6]=y,r[7]=x,r[8]=i):i=r[8],r[9]!==g.Overlay||r[10]!==i?(a=(0,W.jsx)(g.Overlay,{children:i}),r[9]=g.Overlay,r[10]=i,r[11]=a):a=r[11],r[12]!==f||r[13]!==t||r[14]!==a?(s=(0,W.jsxs)(f,{children:[t,a]}),r[12]=f,r[13]=t,r[14]=a,r[15]=s):s=r[15],s}try{eE.displayName||(eE.displayName="VersionSelector")}catch{}var eR=n(17831),eA=n(83494),eO=n(15220),eP=n(69726),eF=n(21373),eM=n(79431),e$=n(28177),eB=n(39344),eV=n(62559),eU=n(81724),eq=n(977),eG=n(81171),eH=n(18501),eK=n(30721),eW=n(40961),ez=n(5338),eQ=n(18312),eZ=n(46461);let eJ={kind:"InlineDataFragment",name:"useIssueQueryIssueContent"};eJ.hash="a175c12fb4b38762491470789bca7dee";let eY=(i={defaultValue:null,kind:"LocalArgument",name:"name"},a={defaultValue:null,kind:"LocalArgument",name:"number"},s={defaultValue:null,kind:"LocalArgument",name:"owner"},r=[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"owner",variableName:"owner"}],l=[{kind:"Variable",name:"number",variableName:"number"}],o={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"databaseId",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"number",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"body",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},g=[p={alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null}],y={alias:null,args:null,kind:"ScalarField",name:"isArchived",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"isCopilotAgentEnabled",storageKey:null},v=[f],j={alias:null,args:b=[{kind:"Literal",name:"first",value:20}],concreteType:"ProjectV2ItemConnection",kind:"LinkedField",name:"projectItems",plural:!1,selections:[{alias:null,args:null,concreteType:"ProjectV2Item",kind:"LinkedField",name:"nodes",plural:!0,selections:[o,{alias:null,args:null,concreteType:"ProjectV2",kind:"LinkedField",name:"project",plural:!1,selections:[o,u],storageKey:null}],storageKey:null}],storageKey:"projectItems(first:20)"},w={alias:null,args:[{kind:"Literal",name:"first",value:1}],concreteType:"IssueConnection",kind:"LinkedField",name:"subIssues",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null}],storageKey:"subIssues(first:1)"},_=[f,o],{fragment:{argumentDefinitions:[i,a,s],kind:"Fragment",metadata:null,name:"useIssueQueryQuery",selections:[{alias:null,args:r,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:l,concreteType:"Issue",kind:"LinkedField",name:"issue",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"useIssueQueryIssueContent",selections:[o,d,c,u,m,h,{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[o,d,f,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:g,storageKey:null},y,x,{alias:null,args:null,concreteType:"Ref",kind:"LinkedField",name:"defaultBranchRef",plural:!1,selections:v,storageKey:null}],storageKey:null},{alias:null,args:b,concreteType:"UserConnection",kind:"LinkedField",name:"assignees",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nodes",plural:!0,selections:g,storageKey:null}],storageKey:"assignees(first:20)"},{alias:null,args:b,concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"nodes",plural:!0,selections:v,storageKey:null}],storageKey:"labels(first:20)"},{alias:null,args:null,concreteType:"Milestone",kind:"LinkedField",name:"milestone",plural:!1,selections:[u],storageKey:null},{alias:null,args:null,concreteType:"IssueType",kind:"LinkedField",name:"issueType",plural:!1,selections:v,storageKey:null},j,w],args:null,argumentDefinitions:[]}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[s,i,a],kind:"Operation",name:"useIssueQueryQuery",selections:[{alias:null,args:r,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:l,concreteType:"Issue",kind:"LinkedField",name:"issue",plural:!1,selections:[o,d,c,u,m,h,{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[o,d,f,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},p,o],storageKey:null},y,x,{alias:null,args:null,concreteType:"Ref",kind:"LinkedField",name:"defaultBranchRef",plural:!1,selections:_,storageKey:null}],storageKey:null},{alias:null,args:b,concreteType:"UserConnection",kind:"LinkedField",name:"assignees",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nodes",plural:!0,selections:[p,o],storageKey:null}],storageKey:"assignees(first:20)"},{alias:null,args:b,concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"nodes",plural:!0,selections:_,storageKey:null}],storageKey:"labels(first:20)"},{alias:null,args:null,concreteType:"Milestone",kind:"LinkedField",name:"milestone",plural:!1,selections:[u,o],storageKey:null},{alias:null,args:null,concreteType:"IssueType",kind:"LinkedField",name:"issueType",plural:!1,selections:_,storageKey:null},j,w],storageKey:null},o],storageKey:null}]},params:{id:"74cdd586b6f12a28054626de37364e0a",metadata:{},name:"useIssueQueryQuery",operationKind:"query",text:null}});async function eX(e,t,n,i,a=!1){try{var s;let r=await (0,eQ.fetchQuery)(e,eY,{owner:t,name:n,number:i},{fetchPolicy:a?"network-only":"store-or-network"}).toPromise();if(r?.repository?.issue==null)return null;return s=r.repository.issue,(0,eQ.readInlineData)(eJ,s)}catch(e){if("object"==typeof e&&null!=e&&"name"in e&&"ValidationError"===e.name&&"message"in e&&"string"==typeof e.message&&e.message.includes("NOT_FOUND"))return null;throw e}}eY.hash="a1c6e44ba1445bc4d870fb9c11487d4d";var e0=n(62670),e1=n(93997),e2=n(97286);function e3(e){let t,n,i,a,s=(0,z.c)(13),{repoId:r,filename:l}=e,o=(0,eQ.useRelayEnvironment)();return s[0]!==o?(t=JSON.stringify(o),s[0]=o,s[1]=t):t=s[1],s[2]!==l||s[3]!==r||s[4]!==t?(n=["copilot-immersive-template-payload",t,r,l],s[2]=l,s[3]=r,s[4]=t,s[5]=n):n=s[5],s[6]!==o||s[7]!==l||s[8]!==r?(i=async()=>r&&l?await e4(o,r,l):null,s[6]=o,s[7]=l,s[8]=r,s[9]=i):i=s[9],s[10]!==n||s[11]!==i?(a={queryKey:n,queryFn:i},s[10]=n,s[11]=i,s[12]=a):a=s[12],(0,e2.I)(a)}async function e4(e,t,n){let i=await (0,eQ.fetchQuery)(e,e0.d,{repoId:t,filename:n}).toPromise();return i&&i.node?(0,e1.EV)(i.node)??null:null}let e5=crypto.randomUUID();async function e6(e,t,n){let i={},a=new Map;if((0,eZ.YR)(n,e=>a.set(e.item.tag,e)),a.size>60)return i[e5]={errorMessages:["You cannot create more than 60 new issues at a time. Please remove some draft issues from the tree and try again."]},i;if(function e(t,n=0){if(n>7)return!0;if(!t.children||0===t.children.length)return!1;for(let i of t.children)if(e(i,n+1))return!0;return!1}(n))return i[e5]={errorMessages:["You cannot add more than 7 levels of sub-issues. Please remove some issues from the tree and try again."]},i;for(let[n,s]of a){let r=s.item;if(i[n]={errorMessages:[]},"new-issue"===r.type&&(!r.repository&&r.parentTag&&(r.repository=a.get(r.parentTag)?.item?.repository),!r.repository)){i[n].errorMessages.push("Repository is required");continue}let[l,o]=r.repository?.split("/")||[];if(!l||!o){i[n].errorMessages.push('Repository must be in the format "owner/repo"');continue}let d=await (0,eG.tZ)(e,l,o);if(!d){i[n].errorMessages.push("Repository not found");continue}if(d.isArchived){i[n].errorMessages.push("Repository is archived");continue}if(!d.hasIssuesEnabled){i[n].errorMessages.push("Repository does not have issues enabled");continue}if(d.viewerInteractionLimitReasonHTML){i[n].errorMessages.push(d.viewerInteractionLimitReasonHTML);continue}if(s.children.length>0&&(d.isLocked||!1===d.viewerCanPush&&d.viewerIssueCreationPermissions?.triageable===!1)){i[n].errorMessages.push("You do not have permission to create subissues in this repository");continue}if("existing-issue"===r.type){if(!r.number){i[n].errorMessages.push("Issue number is required");continue}let t=await eX(e,l,o,r.number);if(!t){i[n].errorMessages.push("Issue not found");continue}if(s.children.length>0){let e=t.subIssues?.totalCount??0,a=s.children.length;e+a>100&&i[n].errorMessages.push(`This issue already has ${e} sub-issue${1===e?"":"s"}. Adding ${a} more would exceed the maximum of 100 sub-issues.`)}continue}let c=r.template?.split("/").findLast(Boolean),u=c?await e4(e,d.id,c):void 0;if(r.template&&!u){i[n].errorMessages.push("Issue template not found");continue}if(!d.isBlankIssuesEnabled&&!u){i[n].errorMessages.push("Issue template is required");continue}let m=(0,eV.O_)(r.name);if(m.isValid||i[n].errorMessages.push(m.errorMessage||"Issue title is invalid"),u&&(0,eU.GQ)(u.data)){t.current=null;let a=document.createElement("div"),s=(0,ez.H)(a);if((0,eW.flushSync)(()=>{s.render((0,W.jsx)(eH.c,{partialName:"copilot-creates-issues-bulk-validation",wasServerRendered:!1,children:(0,W.jsx)(eK.mf,{environment:e,children:(0,W.jsx)(e7,{repository:d,draftIssue:r,template:u,outputRef:t})})}))}),!t.current)throw Error("IssueFormRef is not set");let l=t.current;try{if(l.getInvalidInputs().length>0){i[n].errorMessages.push("Invalid form input");continue}r.body=l.markdown()}finally{l.clearSessionStorage(),s.unmount(),a.remove()}}let h=(0,eV.QK)(r.body??"");h.isValid||i[n].errorMessages.push(h.errorMessage||"Issue body is invalid")}return i}function e7(e){let t,n,i=(0,z.c)(10),{repository:a,draftIssue:s,template:r,outputRef:l}=e,o=`${a.owner.login}/${a.name}`;i[0]!==a.databaseId||i[1]!==a.slashCommandsEnabled||i[2]!==o?(t={type:"issue",repository:{databaseId:a.databaseId,nwo:o,slashCommandsEnabled:a.slashCommandsEnabled}},i[0]=a.databaseId,i[1]=a.slashCommandsEnabled,i[2]=o,i[3]=t):t=i[3];let d=t;if(!(0,eU.GQ)(r.data))return;let c=`copilot-creates-issues:${s.tag}`;return i[4]!==s.defaultValuesById||i[5]!==l||i[6]!==d||i[7]!==c||i[8]!==r.data?(n=(0,W.jsx)(eq.Z,{outputRef:l,issueFormRef:r.data,subject:d,sessionStorageKey:c,defaultValuesById:s.defaultValuesById}),i[4]=s.defaultValuesById,i[5]=l,i[6]=d,i[7]=c,i[8]=r.data,i[9]=n):n=i[9],n}try{e5.displayName||(e5.displayName="TREE_ERROR_KEY")}catch{}try{e7.displayName||(e7.displayName="IssueFormWrapper")}catch{}var e8=n(50467),e9=n(17855),te=n(72994),tt=n(69599),tn=n(94747),ti=n(96379);let ta={fragment:{argumentDefinitions:[C={defaultValue:null,kind:"LocalArgument",name:"name"},N={defaultValue:null,kind:"LocalArgument",name:"owner"}],kind:"Fragment",metadata:null,name:"useRepositoryDefaultBranchQuery",selections:[{alias:null,args:S=[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"owner",variableName:"owner"}],concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,concreteType:"Ref",kind:"LinkedField",name:"defaultBranchRef",plural:!1,selections:[I={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[N,C],kind:"Operation",name:"useRepositoryDefaultBranchQuery",selections:[{alias:null,args:S,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,concreteType:"Ref",kind:"LinkedField",name:"defaultBranchRef",plural:!1,selections:[I,k={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},k],storageKey:null}]},params:{id:"cc890d4a355bf52f7d7b18263e22f595",metadata:{},name:"useRepositoryDefaultBranchQuery",operationKind:"query",text:null}};ta.hash="606cda456dcdccbb61e31c769c1ea96c";var ts=n(69487);let tr=async(e,t,n)=>{let i=await (0,ts.fetchQuery)(e,ta,{owner:t,name:n},{fetchPolicy:"store-or-network"}).toPromise();return i?.repository?.defaultBranchRef?.name||null};var tl=n(16049),to=n(73952);function td(){let e,t,n=(0,z.c)(4),{messages:i}=(0,Q.Pk)();n[0]!==i?(e=(0,to.B)(i),n[0]=i,n[1]=e):e=n[1];let a=e;return n[2]!==a?(t=(e,t)=>null==e?Promise.resolve(t):tc(t,e.databaseId,a[0]?.threadID),n[2]=a,n[3]=t):t=n[3],t}async function tc(e,t,n){let i=e.match(/(!\[.*\]\(https:\/\/(?:.+\.)?github\.com\/github-copilot\/chat\/attachments\/[0-9a-fA-F-]+\))/g),a=new Set;for(let e of i||[]){let t=e.match(/https:\/\/(?:.+\.)?github\.com\/github-copilot\/chat\/attachments\/[0-9a-fA-F-]+/)?.[0];t&&a.add(t)}if(a.size>0){let i=Array.from(a).map(async e=>{let t=await fetch(e),n=await t.blob(),i=n.type.split("/")[1],a=`copilot-image.${i}`,s=await createImageBitmap(n),r=s.width;return s.close(),{file:new File([n],a,{type:n.type}),url:e,width:r}}),s=await Promise.all(i);for(let n of(await Promise.all(s.map(async e=>{if(e)return{uploadedFile:await (0,tl.QM)(e.file,t?.toString()),originalUrl:e.url,width:e.width}}))))if(n){let{uploadedFile:t,originalUrl:i,width:a}=n,s=t.url;if(s){let t=RegExp(`!\\[(.*?)\\]\\(${i}\\)`,"g");e=e.replace(t,`<img alt="$1" width="${a}" src="${s}" />`)}}(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_CREATED_IMAGES",mode:"immersive",imageCount:a.size,threadId:n})}return e}function tu(e){return e.item.tag}function tm(e){return e.item.tag}async function th(e,t){if(!(0,tt.G7)("copilot_api_bulk_create_agent_assignments")||!e.assignees?.some(e=>(0,e9.v)(e)))return;let[n,i]=e.repository.split("/"),a=await tr(t,n,i);if(a)return{target_repo:e.repository,base_ref:a}}function tf(e){return!e.state.error&&e.state.data?.job.state!=="success"&&e.state.data?.job.state!=="error"&&2e3}var tp=n(51213),tg=n(72303),ty=n(20382);let tx={project:"Project assignment errors",dependency:"Dependency errors",update:"Partial update errors",other:"Other errors"};function tv(){let e,t=(0,z.c)(8),n=(0,Z.b)(),i=(0,Q.Pk)(),{closeItems:a,openItem:s,openPreviewPane:r,versionedItems:l,updateItem:o}=(0,ev.xx)();return t[0]!==a||t[1]!==n||t[2]!==s||t[3]!==r||t[4]!==i||t[5]!==o||t[6]!==l?(e=async e=>{if(0===e.length)return;let t=e.find(tk)??e[0];(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUES_SAVED",mode:"immersive",threadId:(0,tg.W)(i)?.id,chatReferrer:document.referrer,repositoryId:t.repository.databaseId,draftType:t.draftType,issueTag:t.tag,issueNumber:t.number,templateType:t.template?t.template.endsWith(".md")?"markdown":"yaml":"none",issuesWithCopilotAssigned:e.filter(tS).length,savedIssuesCount:e.length});let d=[],c=[],u=[];for(let t of e){let n=t.repository.owner.login,i=t.repository.name,a=t.number;o({type:"issue",id:tD(t),messageId:tp.Wp,name:t.title,owner:n,repo:i,number:a,href:t.url});let s=e.find(e=>e.tag===t.parentTag),r=t.blockedByTags?.map(t=>e.find(e=>e.tag===t)).filter(tN),l=t.isBlockingTags?.map(t=>e.find(e=>e.tag===t)).filter(tC),m=r?.length?r.map(t_):void 0,h=l?.length?l.map(tw):void 0;c.push({tag:`${n}/${i}#${a}`,parentTag:s?tT(s):void 0,blockedByTags:m,isBlockingTags:h,title:t.title,repository:`${t.repository.owner.login}/${t.repository.name}`,number:t.number,state:"open",url:t.url}),d.push(tL(t)),u.push(t.tag)}a(e.map(tj).flatMap(e=>l.get(e)??[])),s(tD(t)),r();let m=[{type:"text",name:`timeline-event: {"type": "issue-saved", "markdownContent": "${function(e){if(e.length>1)return`Saved ${e.length} issues`;{let t=e[0],n=tL(t),i="new-issue"===t.draftType?"Created":"Updated";return`${i} issue ${n}`}}(e)}"}`,text:`${e.length>1?"Fetch the details for all saved issues and return them in a code block with YAML following this example format:":"Fetch the issue details and return them in a code block with YAML following this example format:"}
\`\`\`\`yaml type="issue-tree"
${(0,ty.Bh)({data:c},{forceQuotes:!0,noArrayIndent:!0,lineWidth:-1})}\`\`\`\``},{type:"text",name:"ignore-obsolete-drafts",text:`From now on, you should only interact with these newly saved issues and not their corresponding drafts. You MUST exclude the draft issues with the following tags from any future tree creation: ${u.join(", ")}`},...i.currentReferences],h=e.flatMap(tb);h.length&&m.push({type:"text",name:"summarize-continuable-errors",text:`These issues were saved with some errors. You MUST give a high-level summary of these errors at the end of your message in the language used in the conversation. Always prefix it with the word "Note:" in bold for visibility. Be clear but succinct. Here are the errors, grouped by type:
${function(e){let t={};for(let n of e){let e=tx[n.type]||"Other errors";t[e]||(t[e]=[]),t[e].push(n.message)}return Object.entries(t).map(([e,t])=>`${e}:
${t.map(e=>`- ${e}`).join(`
`)}
`).join(`
`)}(h)}`});let f=d.length>1?`Saved the issues: ${d.join(", ")}`:`Saved the issue: ${d[0]}`;await n.sendChatMessage({thread:(0,tg.W)(i),content:f,references:m,topic:i.currentTopic,context:i.context,customInstructions:i.customInstructions,model:i.model})},t[0]=a,t[1]=n,t[2]=s,t[3]=r,t[4]=i,t[5]=o,t[6]=l,t[7]=e):e=t[7],e}function tb(e){return e.errors||[]}function tj(e){return`${e.draftType}:${e.tag}`}function tw(e){return tT(e)}function t_(e){return tT(e)}function tC(e){return null!=e}function tN(e){return null!=e}function tS(e){return e.assignees.some(tI)}function tI(e){return(0,e9.v)(e)}function tk(e){return!e.parentTag}function tL(e){return`[${tT(e)}](${e.url})`}function tT(e){let t=e.repository.owner.login,n=e.repository.name,i=e.number;return`${t}/${n}#${i}`}function tD(e){let t=e.repository.owner.login,n=e.repository.name,i=e.number;return`issue:${t}/${n}/${i}`}let CreateError=class CreateError extends Error{constructor(e){super(e),(0,e8._)(this,"type",void 0),(0,e8._)(this,"bannerTitle",void 0),(0,e8._)(this,"bannerVariant",void 0),this.name="CreateError",this.type="creation",this.bannerTitle="Errors in issue creation",this.bannerVariant="critical"}};let ValidationError=class ValidationError extends Error{constructor(e){super(e),(0,e8._)(this,"type",void 0),(0,e8._)(this,"bannerTitle",void 0),(0,e8._)(this,"bannerVariant",void 0),this.name="ValidationError",this.type="validation",this.bannerTitle="Validation errors in issue content",this.bannerVariant="warning"}};function tE(e){let t,n,i,a,s,r,l,o,d=(0,z.c)(34),{issueNode:c,onComplete:u,onError:m,issueFormRef:h,issueTemplate:f}=e;d[0]!==h||d[1]!==c||d[2]!==f?(t={issueNode:c,issueFormRef:h,issueTemplate:f},d[0]=h,d[1]=c,d[2]=f,d[3]=t):t=d[3];let{mutate:p,isLoading:g,data:y,isComplete:x,isError:v,error:b}=function(e){var t;let n,i,a,s,r,l,o,d,c=(0,z.c)(15),{issueNode:u,issueFormRef:m,issueTemplate:h}=e;c[0]!==m||c[1]!==u||c[2]!==h?(l={issueNode:u,issueFormRef:m,issueTemplate:h},c[0]=m,c[1]=u,c[2]=h,c[3]=l):l=c[3];let f=function(e){let t,n,i,a=(0,z.c)(12),{issueNode:s,issueFormRef:r,issueTemplate:l}=e,o=(0,eQ.useRelayEnvironment)(),d=td(),c=!s.parent&&0===s.children.length;return a[0]!==s.item.tag?(t=["copilot-issues-bulk-create",s.item.tag],a[0]=s.item.tag,a[1]=t):t=a[1],a[2]!==o||a[3]!==c||a[4]!==r||a[5]!==s||a[6]!==l||a[7]!==d?(n=async()=>{let e=[],t=new Map;await (0,eZ.Pq)(s,async n=>{let i=n.item;if("existing-issue"===i.type)return void e.push({tag:i.tag,parent_tag:i.parentTag,repository_nwo:i.repository,number:i.number,blocked_by_tags:n.blockedBy.length?n.blockedBy.map(tm):void 0});let a=i.body;if(c&&l&&(0,eU.GQ)(l.data)&&r?.current&&(a=r.current.markdown()??i.body),a&&i.repository){let e=t.get(i.repository);if(!e){let[n,a]=i.repository.split("/");null!=n&&null!=a&&(e=await (0,eG.tZ)(o,n,a),t.set(i.repository,e))}a=await d(e,a)}e.push({title:i.name,tag:i.tag,repository_nwo:i.repository,body:a,parent_tag:i.parentTag,labels:i.labels,assignees:i.assignees,milestone:i.milestone,issue_type:i.issueType,template:l?.fileName,projects:(0,te.t)(i.projects),blocked_by_tags:n.blockedBy.length?n.blockedBy.map(tu):void 0,agent_assignment:await th(i,o)})});let n=await (0,ti.Sr)("/copilot_issues/bulk_create",{method:"POST",body:{data:{issues:e}}});if(429===n.status)throw Error((await n.json()).error||"Rate limit exceeded. Please try again later.");if(!n.ok)throw Error((await n.json()).error.message||"Failed to create issues.");return await n.json()},a[2]=o,a[3]=c,a[4]=r,a[5]=s,a[6]=l,a[7]=d,a[8]=n):n=a[8],a[9]!==t||a[10]!==n?(i={mutationKey:t,mutationFn:n},a[9]=t,a[10]=n,a[11]=i):i=a[11],(0,tn.n)(i)}(l),p=(t=f.data?.jobStatusUrl,s=(0,z.c)(7),r=!!t,s[0]!==t?(n=["copilot-issues-bulk-create-status",t],i=async e=>{let n=await (0,ti.Sr)(t);if(!n.ok){let t=await n.json();throw e.client.setQueryData(e.queryKey,t),Error(t?.job.error_message||"Failed to fetch job status")}return await n.json()},s[0]=t,s[1]=n,s[2]=i):(n=s[1],i=s[2]),s[3]!==r||s[4]!==n||s[5]!==i?(a={enabled:r,queryKey:n,queryFn:i,refetchInterval:tf},s[3]=r,s[4]=n,s[5]=i,s[6]=a):a=s[6],(0,e2.I)(a)),g=f.error||p.error,y=f.isError||p.isError;c[4]!==f.isPending||c[5]!==p.data?.job.state||c[6]!==p.isLoading?(o=f.isPending||p.isLoading||["pending","queued","started"].includes(p.data?.job.state||""),c[4]=f.isPending,c[5]=p.data?.job.state,c[6]=p.isLoading,c[7]=o):o=c[7];let x=p.data?.job.state==="success";return c[8]!==f.mutate||c[9]!==p.data||c[10]!==g||c[11]!==y||c[12]!==o||c[13]!==x?(d={mutate:f.mutate,data:p.data,error:g,isError:y,isLoading:o,isComplete:x},c[8]=f.mutate,c[9]=p.data,c[10]=g,c[11]=y,c[12]=o,c[13]=x,c[14]=d):d=c[14],d}(t),j=tv();d[4]!==h||d[5]!==c||d[6]!==f||d[7]!==m?(n=()=>{let e;if(!c)return!1;let t=c.item;if("new-issue"!==t.type)return!0;let n=t.name||"",i=(0,eV.O_)(n);if(!i.isValid)return m?.(new ValidationError(i.errorMessage||"Issue title is invalid")),!1;let a=(0,eV.QK)(t.body||"");if(!a.isValid)return m?.(new ValidationError(a.errorMessage||"Issue body is invalid")),!1;if(f&&(0,eU.GQ)(f.data)&&h.current){let t=h.current.getInvalidInputs();if(t.length>0)return e=t[0],m?.(new ValidationError("Please fix the validation errors in the form")),e?.focus(),!1}return!0},d[4]=h,d[5]=c,d[6]=f,d[7]=m,d[8]=n):n=d[8];let w=n;d[9]!==x||d[10]!==g||d[11]!==c||d[12]!==p||d[13]!==w?(i=()=>{!g&&!x&&(c.parent||0!==c.children.length||w())&&p()},d[9]=x,d[10]=g,d[11]=c,d[12]=p,d[13]=w,d[14]=i):i=d[14];let _=i,C=tR;return d[15]!==b||d[16]!==v||d[17]!==m?(a=()=>{v&&b&&m?.(new CreateError(b.message))},s=[v,b,m],d[15]=b,d[16]=v,d[17]=m,d[18]=a,d[19]=s):(a=d[18],s=d[19]),(0,eh.useEffect)(a,s),d[20]!==y||d[21]!==x||d[22]!==c||d[23]!==u||d[24]!==j?(r=()=>{if(!y||!x)return;let e=C(y,c);u(),j(e)},l=[y,x,c,u,j,C],d[20]=y,d[21]=x,d[22]=c,d[23]=u,d[24]=j,d[25]=r,d[26]=l):(r=d[25],l=d[26]),(0,eh.useEffect)(r,l),d[27]!==y||d[28]!==b||d[29]!==_||d[30]!==x||d[31]!==v||d[32]!==g?(o={handleCreate:_,isLoading:g,isComplete:x,isError:v,error:b,data:y},d[27]=y,d[28]=b,d[29]=_,d[30]=x,d[31]=v,d[32]=g,d[33]=o):o=d[33],o}function tR(e,t){if(!e||0===e.job.completed_issues.length)return[];let n=new Map;return(0,eZ.Pt)(t,e=>{n.set(e.item.tag,e.item)}),e.job.completed_issues.map(e=>{let t=n.get(e.tag),[i,a]=t.repository.split("/");return{draftType:t.type,tag:e.tag,parentTag:t.parentTag,blockedByTags:t.blockedByTags,isBlockingTags:t.isBlockingTags,template:"new-issue"===t.type?t.template:void 0,repository:{databaseId:e.repository_id,name:a,owner:{login:i}},number:e.number,title:t.name,url:e.href,assignees:"assignees"in t?t.assignees??[]:[],errors:e.errors||[]}})}function tA({issueNode:e,onComplete:t,onCancel:n}){let i=(0,eh.useMemo)(()=>{let t=e;for(;t?.parent;)t=t.parent;return t},[e]),a=(0,eh.useMemo)(()=>{let e=0;return(0,eZ.YR)(i,t=>{"new-issue"===t.item.type&&e++}),e},[i]),{handleCreate:s,isLoading:r,isComplete:l,isError:o,error:d,data:c}=tE({issueNode:i,onComplete:t}),{loading:u,result:m}=function(e){let t,n,i,a,s=(0,z.c)(8),[r,l]=(0,eh.useState)(!1);s[0]===Symbol.for("react.memo_cache_sentinel")?(t={},s[0]=t):t=s[0];let[o,d]=(0,eh.useState)(t),c=(0,eQ.useRelayEnvironment)(),u=(0,eh.useRef)(null);return s[1]!==c||s[2]!==e?(n=()=>{!async function(){l(!0),d(await e6(c,u,e)),l(!1)}()},i=[c,e],s[1]=c,s[2]=e,s[3]=n,s[4]=i):(n=s[3],i=s[4]),(0,eh.useEffect)(n,i),s[5]!==r||s[6]!==o?(a={loading:r,result:o},s[5]=r,s[6]=o,s[7]=a):a=s[7],a}(i),h=(0,eh.useMemo)(()=>m&&Object.values(m).some(e=>e.errorMessages.length>0),[m]),f=(0,eh.useCallback)(()=>{r||l||n()},[r,l,n]),p=(0,eh.useMemo)(()=>{let e=new Set;return((0,eZ.YR)(i,t=>e.add(t.item.type)),1===e.size&&"existing-issue"===i.item.type)?{title:"Update existing issues?",description:"Clicking Update will update the relationships between the issues shown below.",button:"Update issues"}:e.size>1&&"existing-issue"===i.item.type?{title:"Create all linked draft issues?",description:"Clicking Create will publish all Copilot draft issues shown below. Existing sub-issues aren't displayed and remain unchanged.",button:1===a?"Create 1 issue":`Create ${a} issues`}:e.size>1&&"new-issue"===i.item.type?{title:"Create all linked draft issues?",description:"Clicking Create will publish the Copilot draft issues shown below.",button:1===a?"Create 1 issue":`Create ${a} issues`}:{title:"Create all linked draft issues?",description:"These drafts are linked. Creating a sub-issue automatically publishes its parent and any nested drafts.",button:1===a?"Create 1 issue":`Create ${a} issues`}},[i,a]),{openItem:g,openPreviewPane:y}=(0,ev.xx)(),x=(0,eh.useCallback)(e=>{r||l||(g(e.item.id,!0),y(),n())},[l,r,n,g,y]),v=(0,eh.useMemo)(()=>m[e5]?m[e5]?.errorMessages[0]:"Fill out missing required fields to create all of these issues.",[m]);return(0,W.jsx)(eO.l,{title:p.title,onClose:f,renderFooter:()=>u?null:(0,W.jsxs)(eO.l.Footer,{className:"BulkCreateDialog-module__dialogFooter--aWAd9",children:[(0,W.jsx)("div",{className:"BulkCreateDialog-module__dialogFooterStatus--RMt1N",children:o&&(0,W.jsx)(eM.v,{variant:"critical",children:d?.message})}),(0,W.jsxs)("div",{className:"BulkCreateDialog-module__dialogFooterActions--BvuR4",children:[(0,W.jsx)(eF.Q,{variant:"default",onClick:f,inactive:r||l,children:"Cancel"}),(0,W.jsx)(eF.Q,{variant:"primary",onClick:s,loading:r||l,disabled:h||o,children:p.button})]})]}),children:u?(0,W.jsx)("div",{className:"BulkCreateDialog-module__loadingIndicator--sRZcS",role:"status","aria-label":"Validating issues",children:(0,W.jsx)(eP.A,{})}):h?(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(eS.l,{variant:"warning",hideTitle:!0,title:"Validation errors",description:v,className:"mb-3"}),(0,W.jsx)(tO,{issueNode:i,onNodeClick:x,statusSelector:e=>{let t=m[e.item.tag]?.errorMessages[0];if(t)return{trailingVisual:(0,W.jsx)(er.AlertIcon,{className:"fgColor-attention","data-testid":`warning-icon-${e.item.tag}`}),description:(0,W.jsx)("span",{className:"fgColor-attention",children:t})}}})]}):(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("p",{children:p.description}),(0,W.jsx)(tO,{issueNode:i,onNodeClick:x,statusSelector:e=>({trailingVisual:c?.job.completed_issues.some(t=>t.tag===e.item.tag)&&(0,W.jsx)(er.CheckIcon,{className:"fgColor-success","data-testid":`success-icon-${e.item.tag}`})})})]})})}function tO({issueNode:e,onNodeClick:t,statusSelector:n}){let{versionedItems:i}=(0,ev.xx)(),a=(0,eh.useMemo)(()=>{let t=0;return(0,eZ.YR)(e,e=>{e.parent&&t++}),t},[e]),s=e=>e.blockedBy.map(e=>({title:e.item.name??"",onClick:()=>{t(e)}})),r=e=>{let a=(0,eD.LU)(e.item.id,i),l=n?.(e);return(0,W.jsx)(eB.K.Item,{title:e.item.name,leadingVisual:(0,W.jsx)(e$.n,{...e.item}),trailingBadge:(0,W.jsxs)(W.Fragment,{children:[null!=a?(0,W.jsx)(eT.g,{version:a}):void 0,(0,W.jsx)(tP,{node:e})]}),trailingVisual:l?.trailingVisual,description:l?.description,onClick:()=>t(e),blockedBy:s(e),children:e.children.map(r)},e.item.tag)},l=(0,eD.LU)(e.item.id,i),o=n?.(e);return(0,W.jsxs)(eB.K,{subIssueHeaderText:"existing-issue"===e.item.type?"New sub-issues":void 0,subIssueCount:a,hasTrailingVisuals:!0,children:[(0,W.jsx)(eB.K.RootItem,{title:e.item.name,leadingVisual:(0,W.jsx)(e$.n,{...e.item}),trailingBadge:(0,W.jsxs)(W.Fragment,{children:[null!=l?(0,W.jsx)(eT.g,{version:l}):void 0,(0,W.jsx)(tP,{node:e})]}),trailingVisual:o?.trailingVisual,description:o?.description,onClick:()=>t(e),blockedBy:s(e)}),e.children.map(r)]})}function tP(e){let t,n=(0,z.c)(2),{node:i}=e;if(i.item.repository&&i.item.repository!==i.parent?.item.repository)return n[0]!==i.item.repository?(t=(0,W.jsx)("span",{className:"fgColor-muted",children:i.item.repository}),n[0]=i.item.repository,n[1]=t):t=n[1],t}try{tA.displayName||(tA.displayName="BulkCreateDialog")}catch{}try{tO.displayName||(tO.displayName="IssueTree")}catch{}try{tP.displayName||(tP.displayName="IssueLocation")}catch{}function tF(e){let t,n,i,a,s,r=(0,z.c)(11),{issueNode:l,disabled:o,onSuccess:d}=e,c=void 0!==o&&o,[u,m]=(0,eh.useState)(!1),h=l;for(;h?.parent;)h=h.parent;let f=h,p=new Set;(0,eZ.YR)(f,e=>p.add(e.item.type));e:{if(1===p.size&&p.has("existing-issue")){t="Review and update";break e}t="Review and create"}let g=t;return p.size>1&&"existing-issue"===l.item.type?null:(r[0]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{e.preventDefault(),m(!0)},r[0]=n):n=r[0],r[1]!==g||r[2]!==c?(i=(0,W.jsx)(eA.cQ,{commandId:"github:submit-form",variant:"primary",disabled:c,"data-testid":"create-bulk-issue-dialog-button",showKeybindingHint:!0,onClick:n,children:g}),r[1]=g,r[2]=c,r[3]=i):i=r[3],r[4]!==d||r[5]!==f||r[6]!==u?(a=u&&(0,W.jsx)(tA,{issueNode:f,onComplete:()=>{m(!1),d()},onCancel:()=>{m(!1)}}),r[4]=d,r[5]=f,r[6]=u,r[7]=a):a=r[7],r[8]!==i||r[9]!==a?(s=(0,W.jsxs)(W.Fragment,{children:[i,a]}),r[8]=i,r[9]=a,r[10]=s):s=r[10],s)}try{tF.displayName||(tF.displayName="BulkCreateButton")}catch{}function tM(e){let t,n,i,a,s,r,l=(0,z.c)(29),{issueTemplate:o,issueNode:d,issueFormRef:c,noRepoAccess:u,onClose:m,onError:h,onClearError:f}=e,p=void 0!==u&&u,[g,y]=eh.useState(!1),x=eh.useRef(null),[v,b]=eh.useState(!1),{repository:j}=(0,eR.u)(),w=j&&!o&&!j.isBlankIssuesEnabled,{clearSessionData:_}=(0,eR.u)();l[0]!==_||l[1]!==c?(t=()=>{_(),c.current?.clearSessionStorage()},l[0]=_,l[1]=c,l[2]=t):t=l[2];let C=t;l[3]!==C||l[4]!==m?(n=()=>{C(),m?.(),b(!1)},l[3]=C,l[4]=m,l[5]=n):n=l[5];let N=n;l[6]!==h?(i=e=>{h?.(e),b(!1)},l[6]=h,l[7]=i):i=l[7];let S=i;l[8]!==N||l[9]!==S||l[10]!==c||l[11]!==d||l[12]!==o?(a={issueNode:d,onComplete:N,onError:S,issueFormRef:c,issueTemplate:o},l[8]=N,l[9]=S,l[10]=c,l[11]=d,l[12]=o,l[13]=a):a=l[13];let{handleCreate:I}=tE(a);if(d?.parent||d?.children.length){let e;return l[14]!==N||l[15]!==d||l[16]!==p?(e=(0,W.jsx)(tF,{issueNode:d,disabled:p,onSuccess:N}),l[14]=N,l[15]=d,l[16]=p,l[17]=e):e=l[17],e}if(!j||!j.hasIssuesEnabled)return null;if(w){let e,t,n;return l[18]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(eA.cQ,{commandId:"github:submit-form",variant:"primary","data-testid":"create-issue-dialog-button",ref:x,showKeybindingHint:!0,onClick:e=>{e.preventDefault(),y(!0)},children:"Create"}),l[18]=e):e=l[18],l[19]!==g?(t=g&&(0,W.jsx)(eO.l,{title:"Select a template",onClose:()=>y(!1),footerButtons:[{buttonType:"primary",content:"OK",onClick:()=>y(!1)}],returnFocusRef:x,children:"This repository requires all issues to have a template. To create this issue, first select the appropriate template from the template dropdown."}),l[19]=g,l[20]=t):t=l[20],l[21]!==t?(n=(0,W.jsxs)(W.Fragment,{children:[e,t]}),l[21]=t,l[22]=n):n=l[22],n}return l[23]!==I||l[24]!==f?(s=e=>{e.preventDefault(),f?.(),b(!0),I()},l[23]=I,l[24]=f,l[25]=s):s=l[25],l[26]!==v||l[27]!==s?(r=(0,W.jsx)(W.Fragment,{children:(0,W.jsx)(eA.cQ,{commandId:"github:submit-form",variant:"primary","data-testid":"single-create-issue-button",ref:x,inactive:v,showKeybindingHint:!0,onClick:s,children:"Create"})}),l[26]=v,l[27]=s,l[28]=r):r=l[28],r}try{tM.displayName||(tM.displayName="CreateIssueButton")}catch{}var t$=n(75953),tB=n(73189),tV=n(38447),tU=n(15106),tq=n(66457),tG=n(58321),tH=n(921),tK=n(85391),tW=n(97764),tz=n(46036),tQ=n(43063),tZ=n(57478);function tJ(e){let t,n,i,a,s,r,l,o,d,c,u=(0,z.c)(32),{listItem:m,actions:h}=e,{openItem:f,versionedItems:p}=(0,ev.xx)(),{item:g}=m;u[0]!==g.id||u[1]!==p?(t=(0,eD.LU)(g.id,p),u[0]=g.id,u[1]=p,u[2]=t):t=u[2];let y=t,x=g.tag;if(u[3]!==g.id||u[4]!==f?(n=()=>f(g.id,!0),u[3]=g.id,u[4]=f,u[5]=n):n=u[5],u[6]!==g.tag||u[7]!==y?(i=null!=y?[(0,W.jsx)(eT.g,{version:y},`${g.tag}#${y}`)]:void 0,u[6]=g.tag,u[7]=y,u[8]=i):i=u[8],u[9]!==g.name||u[10]!==n||u[11]!==i?(a=(0,W.jsx)(tW.T,{value:g.name,onClick:n,trailingBadges:i}),u[9]=g.name,u[10]=n,u[11]=i,u[12]=a):a=u[12],u[13]===Symbol.for("react.memo_cache_sentinel")?(s=[],u[13]=s):s=u[13],u[14]!==h||u[15]!==g){let e;u[17]!==g?(e=e=>({key:e.key,render:()=>(0,W.jsxs)(ec.l.Item,{onSelect:()=>e.onSelect(g),children:[(0,W.jsx)(ec.l.LeadingVisual,{children:e.icon}),e.label]},`${g.tag}-${e.key}`)}),u[17]=g,u[18]=e):e=u[18],r=h.map(e),u[14]=h,u[15]=g,u[16]=r}else r=u[16];return u[19]!==r?(l=(0,W.jsx)(tG.o,{actions:s,staticMenuActions:r}),u[19]=r,u[20]=l):l=u[20],u[21]!==h||u[22]!==m.children?(o=m.children?.length?m.children?.map(e=>(0,W.jsx)(tJ,{listItem:e,actions:h},e.item.tag)):void 0,u[21]=h,u[22]=m.children,u[23]=o):o=u[23],u[24]!==g?(d=(0,W.jsx)(tH.Q,{children:(0,W.jsx)(tK.D,{children:(0,W.jsx)(e$.n,{...g})})}),u[24]=g,u[25]=d):d=u[25],u[26]!==g.tag||u[27]!==d||u[28]!==a||u[29]!==l||u[30]!==o?(c=(0,W.jsx)(tq.r,{title:a,secondaryActions:l,subItems:o,defaultExpanded:!0,children:d},x),u[26]=g.tag,u[27]=d,u[28]=a,u[29]=l,u[30]=o,u[31]=c):c=u[31],c}function tY(e){let t,n,i,a,s,r=(0,z.c)(15),{title:l,items:o,totalCount:d,actions:c}=e;if(0===o.length)return null;if(r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,em.$)("RelationshipList-module__container--djndN","mt-2 pb-1 border rounded-2"),r[0]=t):t=r[0],r[1]!==d?(n=(0,W.jsx)(tZ.A,{children:d}),r[1]=d,r[2]=n):n=r[2],r[3]!==n||r[4]!==l?(i=(0,W.jsx)(tz.s,{title:(0,W.jsx)(tQ.c,{title:l,className:"p-0",children:n}),className:"border-0 bgColor-default px-3"}),r[3]=n,r[4]=l,r[5]=i):i=r[5],r[6]!==c||r[7]!==o){let e;r[9]!==c?(e=e=>(0,W.jsx)(tJ,{listItem:e,actions:c},e.item.tag),r[9]=c,r[10]=e):e=r[10],a=o.map(e),r[6]=c,r[7]=o,r[8]=a}else a=r[8];return r[11]!==i||r[12]!==a||r[13]!==l?(s=(0,W.jsx)("div",{className:t,children:(0,W.jsx)(tU.v,{title:l,header:i,children:a})}),r[11]=i,r[12]=a,r[13]=l,r[14]=s):s=r[14],s}try{tJ.displayName||(tJ.displayName="RelationshipListItemComponent")}catch{}try{tY.displayName||(tY.displayName="RelationshipList")}catch{}function tX(){let e,t=(0,z.c)(4),n=(0,Z.b)(),i=(0,Q.Pk)(),{updateItem:a}=(0,ev.xx)();return t[0]!==n||t[1]!==i||t[2]!==a?(e=async(e,t)=>{(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_REMOVE_DEPENDENCY",mode:"immersive",threadId:(0,tg.W)(i)?.id,chatReferrer:document.referrer,issueTag:e.tag,issueRepository:e.repository,blockingIssueTag:t.tag});let s={type:"text",name:`timeline-event: {"type": "remove-dependency", "markdownContent": "Removed dependency on '${t.name}'"}`,text:`Remove the dependency between '${e.tag}' and '${t.tag}'. Return the updated issues.`},r={...e,blockedByTags:e.blockedByTags?.filter(e=>e!==t.tag),isUserEdited:!1};a(r);let l={...t,isBlockingTags:t.isBlockingTags?.filter(t=>t!==e.tag),isUserEdited:!1};a(l);let o=[r,l].map(t0);await n.sendChatMessage({thread:(0,tg.W)(i),content:"Remove the blocking dependency from the issue",references:[s,...o],topic:i.currentTopic,context:i.context,customInstructions:i.customInstructions,model:i.model})},t[0]=n,t[1]=i,t[2]=a,t[3]=e):e=t[3],e}function t0(e){return"existing-issue"===e.type?(0,eD.yA)(e):(0,eD.PO)(e)}function t1(e){let t,n,i,a,s,r=(0,z.c)(11),{issueNode:l}=e,o=tX();e:{if("existing-issue"===l.item.type){t="Newly blocked by";break e}t="Blocked by"}let d=t;return r[0]!==l.blockedBy?(n=l.blockedBy.map(t2),r[0]=l.blockedBy,r[1]=n):n=r[1],r[2]===Symbol.for("react.memo_cache_sentinel")?(i=(0,W.jsx)(er.UnlinkIcon,{}),r[2]=i):i=r[2],r[3]!==l.item||r[4]!==o?(a=[{key:"unlink",label:"Remove dependency",icon:i,onSelect:e=>{o(l.item,e)}}],r[3]=l.item,r[4]=o,r[5]=a):a=r[5],r[6]!==l.blockedBy.length||r[7]!==n||r[8]!==a||r[9]!==d?(s=(0,W.jsx)(tY,{title:d,items:n,totalCount:l.blockedBy.length,actions:a}),r[6]=l.blockedBy.length,r[7]=n,r[8]=a,r[9]=d,r[10]=s):s=r[10],s}function t2(e){return{item:e.item}}try{t1.displayName||(t1.displayName="BlockedByList")}catch{}function t3(e){let t,n,i,a,s,r=(0,z.c)(11),{issueNode:l}=e,o=tX();e:{if("existing-issue"===l.item.type){t="Newly blocking";break e}t="Is blocking"}let d=t;return r[0]!==l.isBlocking?(n=l.isBlocking.map(t4),r[0]=l.isBlocking,r[1]=n):n=r[1],r[2]===Symbol.for("react.memo_cache_sentinel")?(i=(0,W.jsx)(er.UnlinkIcon,{}),r[2]=i):i=r[2],r[3]!==l.item||r[4]!==o?(a=[{key:"unlink",label:"Remove dependency",icon:i,onSelect:e=>{o(e,l.item)}}],r[3]=l.item,r[4]=o,r[5]=a):a=r[5],r[6]!==l.isBlocking.length||r[7]!==n||r[8]!==a||r[9]!==d?(s=(0,W.jsx)(tY,{title:d,items:n,totalCount:l.isBlocking.length,actions:a}),r[6]=l.isBlocking.length,r[7]=n,r[8]=a,r[9]=d,r[10]=s):s=r[10],s}function t4(e){return{item:e.item}}try{t3.displayName||(t3.displayName="BlockingList")}catch{}function t5({issueNode:e}){let t=function(){let e,t=(0,z.c)(4),n=(0,Z.b)(),i=(0,Q.Pk)(),{updateItem:a}=(0,ev.xx)();return t[0]!==n||t[1]!==i||t[2]!==a?(e=async e=>{(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_UNLINK_FROM_PARENT",mode:"immersive",threadId:(0,tg.W)(i)?.id,chatReferrer:document.referrer,issueRepository:e.repository,issueTab:e.tag,parentIssueTag:e.parentTag});let t={type:"text",name:`timeline-event: {"type": "unlink-sub-issue", "markdownContent": "Unlinked sub-issue '${e.name}'"}`,text:`Unlink the sub issue '${e.tag}' from its parent issue by removing the 'parentTag' field. Return the updated '${e.tag}' draft-issue.`},s={...e,parentTag:void 0,isUserEdited:!1};a(s);let r="existing-issue"===s.type?(0,eD.yA)(s):(0,eD.PO)(s);await n.sendChatMessage({thread:(0,tg.W)(i),content:"Unlink the sub-issue from its parent issue",references:[t,r],topic:i.currentTopic,context:i.context,customInstructions:i.customInstructions,model:i.model})},t[0]=n,t[1]=i,t[2]=a,t[3]=e):e=t[3],e}(),n=(0,eh.useMemo)(()=>"existing-issue"===e.item.type?"New sub-issues":"Sub-issues",[e]),i=(0,eh.useMemo)(()=>{if(!e)return 0;let t=-1;return(0,eZ.YR)(e,()=>t++),t},[e]);return(0,W.jsx)(tY,{title:n,items:function e(t){return t.map(t=>({item:t.item,children:e(t.children)}))}(e.children),totalCount:i,actions:[{key:"unlink",label:"Unlink sub-issue",icon:(0,W.jsx)(er.UnlinkIcon,{}),onSelect:e=>{t(e)}}]})}try{t5.displayName||(t5.displayName="SubissuesList")}catch{}function t6(e){let t,n=(0,z.c)(2),{issueNode:i}=e;return n[0]!==i?(t=(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(t5,{issueNode:i}),(0,W.jsx)(t1,{issueNode:i}),(0,W.jsx)(t3,{issueNode:i})]}),n[0]=i,n[1]=t):t=n[1],t}try{t6.displayName||(t6.displayName="RelationshipsSection")}catch{}var t7=n(33987),t8=n(46996),t9=n(48494),ne=n(66040),nt=n(97665);function nn(e,t){let n,i,a,s,r,l,o,d,c,u,m,h=(0,z.c)(45),{draftValue:f,formValue:p,setFormValue:g,onChange:y,resolverResult:x,hasPermission:v,isEqual:b,defaultValue:j}=t,{repository:w}=(0,eR.u)(),_=(0,eh.useRef)(!0),C=(0,eh.useRef)(void 0),N=(0,eh.useRef)(e.id);h[0]!==e.id?(n=()=>{N.current!==e.id&&(_.current=!0,C.current=void 0,N.current=e.id)},h[0]=e.id,h[1]=n):n=h[1],h[2]!==e.id||h[3]!==p?(i=[e.id,p],h[2]=e.id,h[3]=p,h[4]=i):i=h[4],(0,eh.useEffect)(n,i),w?.nameWithOwner;let S=e.repository&&w?.nameWithOwner===e.repository,{isLoading:I,data:k}=x,L=(null!=f||!e.isStreaming)&&!I;h[5]!==S||h[6]!==L?(a=()=>{S&&!L&&(_.current=!0)},s=[S,L],h[5]=S,h[6]=L,h[7]=a,h[8]=s):(a=h[7],s=h[8]),(0,eh.useEffect)(a,s),h[9]!==b||h[10]!==y?(r=(e,t)=>{void 0!==C.current&&b(C.current,e)||(y(e,t),C.current=e)},h[9]=b,h[10]=y,h[11]=r):r=h[11];let T=r;h[12]!==j||h[13]!==S||h[14]!==v||h[15]!==L||h[16]!==T||h[17]!==w||h[18]!==k||h[19]!==g?(l=()=>{S&&L&&(v(w)?(g(k),T(k,!0)):null!=w&&(g(j),T(j,!0)))},o=[S,L,T,w,k,g,v,j],h[12]=j,h[13]=S,h[14]=v,h[15]=L,h[16]=T,h[17]=w,h[18]=k,h[19]=g,h[20]=l,h[21]=o):(l=h[20],o=h[21]),(0,eh.useEffect)(l,o),h[22]!==j||h[23]!==p||h[24]!==S||h[25]!==v||h[26]!==b||h[27]!==L||h[28]!==w||h[29]!==k?(d=()=>{if(!_.current||void 0===C.current||!S||!L||!w)return;let e=v(w);e&&p===k?_.current=!1:!e&&b(p,j)&&(_.current=!1)},h[22]=j,h[23]=p,h[24]=S,h[25]=v,h[26]=b,h[27]=L,h[28]=w,h[29]=k,h[30]=d):d=h[30],h[31]!==j||h[32]!==e.id||h[33]!==p||h[34]!==S||h[35]!==v||h[36]!==b||h[37]!==L||h[38]!==w||h[39]!==k?(c=[e.id,S,L,k,w,p,v,j,b],h[31]=j,h[32]=e.id,h[33]=p,h[34]=S,h[35]=v,h[36]=b,h[37]=L,h[38]=w,h[39]=k,h[40]=c):c=h[40],(0,eh.useEffect)(d,c),h[41]!==p||h[42]!==T?(m=()=>{_.current||T(p,!1)},u=[p,T],h[41]=p,h[42]=T,h[43]=u,h[44]=m):(u=h[43],m=h[44]),(0,eh.useEffect)(m,u)}var ni=n(40104);function na(e){let{openItem:t,updateItem:n}=(0,ev.xx)(),{selectedThreadID:i}=(0,Q.Pk)(),a=function(e){let{messages:t}=(0,Q.Pk)(),{tag:n,issueNumber:i}=e,a=i&&X.W.draftUpdateIssue?"update-issue":"new-issue";return`${a}:${n}#${t.length}`}(e),s=`edited-${i}-${a}`,[r,l]=(0,ni.Fo)(s,void 0);return(0,eh.useCallback)((s,r=!1)=>{let o,d=!1;for(o in s)(0,t8.A)(s[o],e[o])||(d=!0,"name"!==o&&"body"!==o&&"defaultValuesById"!==o&&(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_USER_CHANGED_FIELD",mode:"immersive",threadId:i,repository:e.repository,issueTag:e.tag,userChangedField:o,wasEmpty:function(e){switch(typeof e){case"string":return!e;case"object":if(Array.isArray(e))return!e||0===e.length;return null==e;default:return null==e}}(e[o])}));if(!d)return;let c={...e,...s};!r&&(c.id=a,c.isUserEdited=!0,X.W.copilotPersistEditedDraftIssues&&l(c)),n(c),t(c.id)},[e,n,t,i,a,l])}function ns(e){return e?.viewerIssueCreationPermissions?.assignable}function nr(e){return(0,t7.i)(e)}let nl={fragment:{argumentDefinitions:[L={defaultValue:100,kind:"LocalArgument",name:"count"},T={defaultValue:"",kind:"LocalArgument",name:"labelNames"},D={defaultValue:null,kind:"LocalArgument",name:"owner"},E={defaultValue:null,kind:"LocalArgument",name:"repo"}],kind:"Fragment",metadata:null,name:"useLabelsQueryQuery",selections:[{alias:null,args:R=[{kind:"Variable",name:"name",variableName:"repo"},{kind:"Variable",name:"owner",variableName:"owner"}],concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[O={alias:null,args:[{kind:"Variable",name:"first",variableName:"count"},{kind:"Variable",name:"names",variableName:"labelNames"},{kind:"Literal",name:"orderBy",value:{direction:"ASC",field:"NAME"}}],concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"nodes",plural:!0,selections:[A={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nameHTML",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[D,E,T,L],kind:"Operation",name:"useLabelsQueryQuery",selections:[{alias:null,args:R,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[O,A],storageKey:null}]},params:{id:"b83819e3267088a514ba0c0458c33d5e",metadata:{},name:"useLabelsQueryQuery",operationKind:"query",text:null}};function no(e){return e}function nd(e){return!!e}function nc(e){return e?.viewerIssueCreationPermissions?.labelable}function nu(e){return e.name}nl.hash="d071175b5fcd3e6223eb6f9ac83d6996";var nm=n(90921);function nh(e,t){var n,i;return n=e?.title,i=t?.title,n?.toLowerCase()===i?.toLowerCase()}function nf(e){return e?.viewerIssueCreationPermissions?.milestoneable}var np=n(25820);function ng(e){return!1===e.hasReachedItemsLimit}function ny(e){return!1===e.closed}function nx(e,t){return e.set(t.id,t),e}function nv(e){return!!e.id}function nb(e){return e.toLowerCase()}function nj(e){return!!e}function nw(e){return e.title}function n_(e){return e.id}function nC(e){return!!e.id}function nN(e){return e?.viewerIssueCreationPermissions?.triageable}function nS(e){return{id:e.id,title:e.title}}var nI=n(85346);function nk(e,t){return e?.toLowerCase()===t?.toLowerCase()}function nL(e,t){return nk(e?.name,t?.name)}function nT(e){return e?.viewerIssueCreationPermissions?.typeable}function nD(e){let t,n,i,a,s,r,l,o,d,c,u,m,h,f,p=(0,z.c)(44),{draftIssue:g,issueNode:y,template:x,issueFormRef:v,loadingDraftIssueRepo:b,onChange:j,onClose:w,onBeforeCreate:_,onFieldChange:C}=e,{name:N,body:S,defaultValuesById:I}=g,k=void 0===S?"":S,{repository:L,clearSessionData:T}=(0,eR.u)(),[D,E]=(0,eh.useState)(N),[R,A]=(0,eh.useState)(k),O=(m=(0,z.c)(3),h=(0,Z.b)(),f=(0,Q.Pk)(),m[0]!==h||m[1]!==f?(u=async(e,t,n)=>{let i;if(e.parentMessageID&&(i=f.messages.findLast(t=>t.id===e.parentMessageID&&"root"!==t.id)),!i||!i.content)return;(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_RETRY_MESSAGE",mode:"immersive",threadId:(0,tg.W)(f)?.id,customMessage:t});let a={type:"text",name:`timeline-event: {"type": "automatic-retry", "markdownContent": "${t??"Copilot failed to generate a response, retrying\u2026"}"}`,text:n,icon:er.XIcon};await h.sendChatMessage({thread:(0,tg.W)(f),content:i.content,references:[...i.references??[],a],topic:f.currentTopic,context:f.context,customInstructions:f.customInstructions,model:f.model,parentMessageId:e.id})},m[0]=h,m[1]=f,m[2]=u):u=m[2],u),P=(0,Q.Pk)();p[0]!==T||p[1]!==v?(t=()=>{T(),v.current?.clearSessionStorage()},p[0]=T,p[1]=v,p[2]=t):t=p[2];let F=t;p[3]!==F||p[4]!==w?(n=()=>{F(),w?.()},p[3]=F,p[4]=w,p[5]=n):n=p[5];let M=n;if(p[6]!==k||p[7]!==N?(i=()=>{E(N),A(k)},a=[k,N],p[6]=k,p[7]=N,p[8]=i,p[9]=a):(i=p[8],a=p[9]),(0,eh.useEffect)(i,a),!function(e){let t,n,i,a,s,r=(0,z.c)(15),{repository:l,assignees:o,setAssignees:d}=(0,eR.u)(),c=na(e),u=e.assignees;r[0]!==c?(t=(e,t)=>c({assignees:e.map(nr)},t),r[0]=c,r[1]=t):t=r[1];let m=l?.owner.login,h=l?.name;r[2]!==e.assignees?(n=e.assignees??[],r[2]=e.assignees,r[3]=n):n=r[3],r[4]!==m||r[5]!==h||r[6]!==n?(i={owner:m,repo:h,assignees:n},r[4]=m,r[5]=h,r[6]=n,r[7]=i):i=r[7];let f=function(e){let t,n,i,a,s,r=(0,z.c)(17),{owner:l,repo:o,assignees:d}=e,c=(0,eQ.useRelayEnvironment)(),u=(0,nt.jE)();r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,t7.M)({includeAuthorableBots:!1,includeAssignableBots:!0}),r[0]=t):t=r[0];let m=t;r[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,tt.G7)("item_picker_assignee_tsq_migration"),r[1]=n):n=r[1];let h=n;r[2]!==d||r[3]!==c||r[4]!==l||r[5]!==u||r[6]!==o?(i=h?["copilot-immersive-assignees",JSON.stringify(u),m,l,o,d]:["copilot-immersive-assignees",JSON.stringify(c),m,l,o,d],r[2]=d,r[3]=c,r[4]=l,r[5]=u,r[6]=o,r[7]=i):i=r[7];let f=i;r[8]!==d||r[9]!==c||r[10]!==l||r[11]!==u||r[12]!==o?(a=async()=>l&&o&&d?h?(await (0,ne.nH)(u,{owner:l,repo:o,query:"",loginNames:d,capabilities:m})).assignees:await (0,t9.fH)(c,{owner:l,repo:o,assignees:d,capabilities:m}):[],r[8]=d,r[9]=c,r[10]=l,r[11]=u,r[12]=o,r[13]=a):a=r[13];let p=a;return r[14]!==p||r[15]!==f?(s={queryKey:f,queryFn:p},r[14]=p,r[15]=f,r[16]=s):s=r[16],(0,e2.I)(s)}(i);r[8]===Symbol.for("react.memo_cache_sentinel")?(a=[],r[8]=a):a=r[8],r[9]!==e.assignees||r[10]!==o||r[11]!==d||r[12]!==t||r[13]!==f?(s={draftValue:u,formValue:o,setFormValue:d,onChange:t,resolverResult:f,hasPermission:ns,isEqual:t8.A,defaultValue:a},r[9]=e.assignees,r[10]=o,r[11]=d,r[12]=t,r[13]=f,r[14]=s):s=r[14],nn(e,s)}(g),!function(e){let t,n,i,a,s,r=(0,z.c)(15),{repository:l,labels:o,setLabels:d}=(0,eR.u)(),c=na(e),u=e.labels;r[0]!==c?(t=(e,t)=>c({labels:e.map(nu)},t),r[0]=c,r[1]=t):t=r[1];let m=l?.owner.login,h=l?.name;r[2]!==e.labels?(n=e.labels??[],r[2]=e.labels,r[3]=n):n=r[3],r[4]!==m||r[5]!==h||r[6]!==n?(i={owner:m,repo:h,labels:n},r[4]=m,r[5]=h,r[6]=n,r[7]=i):i=r[7];let f=function(e){let t,n,i,a,s=(0,z.c)(15),{owner:r,repo:l,labels:o}=e,d=(0,eQ.useRelayEnvironment)();return s[0]!==d?(t=JSON.stringify(d),s[0]=d,s[1]=t):t=s[1],s[2]!==o||s[3]!==r||s[4]!==l||s[5]!==t?(n=["copilot-immersive-labels",t,r,l,o],s[2]=o,s[3]=r,s[4]=l,s[5]=t,s[6]=n):n=s[6],s[7]!==d||s[8]!==o||s[9]!==r||s[10]!==l?(i=async()=>{if(!r||!l||!o)return[];let e=await (0,eK.SD)({environment:d,query:nl,variables:{owner:r,repo:l,labelNames:o.join(","),count:o.length}}).toPromise();return(e?.repository?.labels?.nodes??[]).filter(nd).map(no)},s[7]=d,s[8]=o,s[9]=r,s[10]=l,s[11]=i):i=s[11],s[12]!==n||s[13]!==i?(a={queryKey:n,queryFn:i},s[12]=n,s[13]=i,s[14]=a):a=s[14],(0,e2.I)(a)}(i);r[8]===Symbol.for("react.memo_cache_sentinel")?(a=[],r[8]=a):a=r[8],r[9]!==e.labels||r[10]!==o||r[11]!==d||r[12]!==t||r[13]!==f?(s={draftValue:u,formValue:o,setFormValue:d,onChange:t,resolverResult:f,hasPermission:nc,isEqual:t8.A,defaultValue:a},r[9]=e.labels,r[10]=o,r[11]=d,r[12]=t,r[13]=f,r[14]=s):s=r[14],nn(e,s)}(g),!function(e){let t,n,i,a,s,r=(0,z.c)(16),{repository:l,issueType:o,setIssueType:d}=(0,eR.u)(),c=na(e),u=l?.owner.login;r[0]!==u?(t={owner:u},r[0]=u,r[1]=t):t=r[1];let m=function(e){let t,n,i,a,s=(0,z.c)(11),{owner:r}=e,l=(0,nt.jE)();s[0]!==l?(t=JSON.stringify(l),s[0]=l,s[1]=t):t=s[1],s[2]!==r||s[3]!==t?(n=["copilot-immersive-issue-types",t,r],s[2]=r,s[3]=t,s[4]=n):n=s[4];let o=n;s[5]!==r||s[6]!==l?(i=async()=>r?(await (0,nI.R)(l,{owner:r,query:"",count:25})).issueTypes:[],s[5]=r,s[6]=l,s[7]=i):i=s[7];let d=i;return s[8]!==d||s[9]!==o?(a={queryKey:o,queryFn:d},s[8]=d,s[9]=o,s[10]=a):a=s[10],(0,e2.I)(a)}(t);e:{let t;if(m.isLoading||!e.issueType){n=null;break e}r[2]!==e.issueType||r[3]!==m.data?(t=m.data?.find(t=>nk(t.name,e.issueType))||null,r[2]=e.issueType,r[3]=m.data,r[4]=t):t=r[4],n=t}let h=n;r[5]!==c?(i=(e,t)=>c({issueType:e?.name},t),r[5]=c,r[6]=i):i=r[6],r[7]!==h||r[8]!==m.isLoading?(a={isLoading:m.isLoading,data:h},r[7]=h,r[8]=m.isLoading,r[9]=a):a=r[9],r[10]!==e.issueType||r[11]!==o||r[12]!==d||r[13]!==i||r[14]!==a?(s={draftValue:e.issueType,formValue:o,setFormValue:d,onChange:i,resolverResult:a,hasPermission:nT,isEqual:nL,defaultValue:null},r[10]=e.issueType,r[11]=o,r[12]=d,r[13]=i,r[14]=a,r[15]=s):s=r[15],nn(e,s)}(g),!function(e){let t,n,i,a,s=(0,z.c)(15),{repository:r,milestone:l,setMilestone:o}=(0,eR.u)(),d=na(e),c=r?.owner.login,u=r?.name;s[0]!==e.milestone||s[1]!==c||s[2]!==u?(t={owner:c,repo:u,milestone:e.milestone},s[0]=e.milestone,s[1]=c,s[2]=u,s[3]=t):t=s[3];let m=function(e){let t,n,i,a,s=(0,z.c)(15),{owner:r,repo:l,milestone:o}=e,d=(0,nt.jE)();return s[0]!==d?(t=JSON.stringify(d),s[0]=d,s[1]=t):t=s[1],s[2]!==o||s[3]!==r||s[4]!==l||s[5]!==t?(n=["copilot-immersive-milestones",t,r,l,o],s[2]=o,s[3]=r,s[4]=l,s[5]=t,s[6]=n):n=s[6],s[7]!==o||s[8]!==r||s[9]!==d||s[10]!==l?(i=async()=>r&&l&&o?(await (0,nm.U)(d,{owner:r,repo:l,query:o,count:1})).milestones:[],s[7]=o,s[8]=r,s[9]=d,s[10]=l,s[11]=i):i=s[11],s[12]!==n||s[13]!==i?(a={queryKey:n,queryFn:i},s[12]=n,s[13]=i,s[14]=a):a=s[14],(0,e2.I)(a)}(t),h=m.data?.[0]??null;s[4]!==d?(n=(e,t)=>d({milestone:e?.title},t),s[4]=d,s[5]=n):n=s[5],s[6]!==h||s[7]!==m.isLoading?(i={isLoading:m.isLoading,data:h},s[6]=h,s[7]=m.isLoading,s[8]=i):i=s[8],s[9]!==e.milestone||s[10]!==l||s[11]!==o||s[12]!==n||s[13]!==i?(a={draftValue:e.milestone,formValue:l,setFormValue:o,onChange:n,resolverResult:i,hasPermission:nf,isEqual:nh,defaultValue:null},s[9]=e.milestone,s[10]=l,s[11]=o,s[12]=n,s[13]=i,s[14]=a):a=s[14],nn(e,a)}(g),!function(e){let t,n,i,a,s,r=(0,z.c)(15),{repository:l,projects:o,setProjects:d}=(0,eR.u)(),c=na(e),u=e.projects;r[0]!==c?(t=(e,t)=>c({projects:e.map(nS)},t),r[0]=c,r[1]=t):t=r[1];let m=l?.owner.login,h=l?.name;r[2]!==e.projects?(n=e.projects??[],r[2]=e.projects,r[3]=n):n=r[3],r[4]!==m||r[5]!==h||r[6]!==n?(i={owner:m,repo:h,projects:n},r[4]=m,r[5]=h,r[6]=n,r[7]=i):i=r[7];let f=function(e){let t,n,i,a=(0,z.c)(12),{owner:s,repo:r,projects:l}=e,o=(0,nt.jE)();return a[0]!==s||a[1]!==l||a[2]!==r?(t=["copilot-immersive-projects",s,r,l],a[0]=s,a[1]=l,a[2]=r,a[3]=t):t=a[3],a[4]!==s||a[5]!==l||a[6]!==o||a[7]!==r?(n=async()=>{if(!s||!r||!l||!l.length)return[];let e=new Set(l.filter(nC).map(n_)),t=l.map(nw).filter(nj),n=new Set(t.map(nb)),i=l.length>0&&l.every(nv),a=t.length>0?Array.from(new Set(t)).join(","):"",{repositoryProjects:d,recentRepositoryProjects:c,ownerProjects:u,recentOwnerProjects:m}=await o.fetchQuery((0,np.D)({owner:s,repo:r,query:a})),h=[...[...d,...c,...u,...m].reduce(nx,new Map).values()].filter(ny).filter(ng).filter(t=>i?t.id&&e.has(t.id):!!(t.id&&e.has(t.id))||n.has(t.title.toLowerCase()));if(i)return h;{let t=new Set;return h.sort((t,n)=>{let i=e.has(t.id),a=e.has(n.id);return i&&!a?-1:!i&&a?1:0}).filter(e=>{let n=e.title.toLowerCase();return!t.has(n)&&(t.add(n),!0)})}},a[4]=s,a[5]=l,a[6]=o,a[7]=r,a[8]=n):n=a[8],a[9]!==t||a[10]!==n?(i={queryKey:t,queryFn:n},a[9]=t,a[10]=n,a[11]=i):i=a[11],(0,e2.I)(i)}(i);r[8]===Symbol.for("react.memo_cache_sentinel")?(a=[],r[8]=a):a=r[8],r[9]!==e.projects||r[10]!==o||r[11]!==d||r[12]!==t||r[13]!==f?(s={draftValue:u,formValue:o,setFormValue:d,onChange:t,resolverResult:f,hasPermission:nN,isEqual:t8.A,defaultValue:a},r[9]=e.projects,r[10]=o,r[11]=d,r[12]=t,r[13]=f,r[14]=s):s=r[14],nn(e,s)}(g),null==L){let e;if(void 0===g.repository&&g.isStreaming||b){let e;return p[10]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(e_.Q,{optionConfig:{useViewportQueries:!1}}),p[10]=e):e=p[10],e}return p[11]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(eL,{title:"Repository required",description:"Please select a repository above to continue creating your issue.",icon:er.IssueDraftIcon}),p[11]=e):e=p[11],e}let $=P.messages.at(-1);if($&&(0,tV.E)($,["switch-issue-template","switch-issue-repo"])){let e;return p[12]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(e_.Q,{optionConfig:{useViewportQueries:!1}}),p[12]=e):e=p[12],e}let B=P.messages;if(p[13]!==I||p[14]!==g.messageId||p[15]!==O||p[16]!==P.isWaitingOnCopilot||p[17]!==P.messages||p[18]!==x){s=Symbol.for("react.early_return_sentinel");e:{let e=B.find(e=>e.id===g.messageId),t=e?.parentMessageIndex!==void 0?P.messages[e.parentMessageIndex]:void 0;if(e&&t){let n=x&&(0,eU.GQ)(x.data),i=0===Object.keys(I||{}).length,a=!P.isWaitingOnCopilot,r=e.messageIndex===P.messages.length-1,l="assistant"===e.role,o=(0,tV.E)(t,["automatic-retry"]);if(n&&i)if(a)if(r&&l&&!o){let t;O(e,"Copilot failed to use the issue template, retrying\u2026","Force a retry of the user's request and make sure to generate template form values properly. Do not send the same response as the previous attempt."),p[21]===Symbol.for("react.memo_cache_sentinel")?(t=(0,W.jsx)(e_.Q,{optionConfig:{useViewportQueries:!1}}),p[21]=t):t=p[21],s=t;break e}else{let e;p[22]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(eL,{title:"Copilot failed to create an issue",description:"Copilot failed to use the issue template. Please retry or choose a different template.",icon:er.IssueDraftIcon}),p[22]=e):e=p[22],s=e;break e}else{let e;p[20]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(e_.Q,{optionConfig:{useViewportQueries:!1}}),p[20]=e):e=p[20],s=e;break e}}}p[13]=I,p[14]=g.messageId,p[15]=O,p[16]=P.isWaitingOnCopilot,p[17]=P.messages,p[18]=x,p[19]=s}else s=p[19];return s!==Symbol.for("react.early_return_sentinel")?s:(p[23]!==j?(r=e=>{E(e),j?.({name:e})},l=e=>{A(e),j?.({body:e})},p[23]=j,p[24]=r,p[25]=l):(r=p[24],l=p[25]),p[26]!==I||p[27]!==R||p[28]!==g.messageId||p[29]!==v||p[30]!==_||p[31]!==M||p[32]!==C||p[33]!==L||p[34]!==r||p[35]!==l||p[36]!==x||p[37]!==D?(o=(0,W.jsx)(t$.e,{repository:L,title:D,body:R,setTitle:r,setBody:l,clearOnCreate:M,issueFormRef:v,onCreateSuccess:tB.l,onCreateError:tB.l,onCancel:M,onBeforeCreate:_,defaultValuesById:I,selectedTemplate:x,onFieldChange:C,clientMutationId:g.messageId}),p[26]=I,p[27]=R,p[28]=g.messageId,p[29]=v,p[30]=_,p[31]=M,p[32]=C,p[33]=L,p[34]=r,p[35]=l,p[36]=x,p[37]=D,p[38]=o):o=p[38],p[39]!==y?(d=y&&(0,W.jsx)(t6,{issueNode:y}),p[39]=y,p[40]=d):d=p[40],p[41]!==o||p[42]!==d?(c=(0,W.jsxs)(W.Fragment,{children:[o,d]}),p[41]=o,p[42]=d,p[43]=c):c=p[43],c)}try{nD.displayName||(nD.displayName="CreateIssueForm")}catch{}let nE="CreateIssuePreview-module__container--xRZfA IssuePreview-module__container--O4xBI",nR="CreateIssuePreview-module__toolbar--DOlv4 FilePreview-module__toolbar--ZZWN1",nA="CreateIssuePreview-module__toolbarLeft--kUeFB FilePreview-module__toolbarLeft--RCKxW",nO="CreateIssuePreview-module__toolbarActions--n_D57 FilePreview-module__toolbarActions--h04aW",nP="CreateIssuePreview-module__form--X4Vwp";var nF=n(12683);function nM({node:e,onItemSelected:t}){let n=(0,eh.useMemo)(()=>{let t=[],n=e;for(;n;)t.push(n),n=n.parent;return t.reverse()},[e]);if(e.parent)return(0,W.jsxs)(ed.W,{children:[(0,W.jsxs)(ed.W.Button,{variant:"invisible",className:"CreateIssuePreview-module__parentSelectorAnchor--qiqro",children:[(0,W.jsx)("span",{className:"fgColor-muted",children:"Parent:"})," ",e?.parent?.item.name]}),(0,W.jsx)(ed.W.Overlay,{width:"large",children:(0,W.jsx)(nF.lF,{children:n.map((n,i)=>(0,W.jsxs)(nF.lF.Item,{active:n.item.tag===e.item.tag,onSelect:()=>t(n),sx:{paddingLeft:`calc(${i} * var(--base-size-12))`},children:[(0,W.jsx)(nF.lF.LeadingVisual,{children:(0,W.jsx)(e$.n,{...n.item})}),(0,W.jsx)("div",{className:"CreateIssuePreview-module__truncateText--Cyrbf",children:n.item.name})]},n.item.tag))})})]})}try{nM.displayName||(nM.displayName="ParentSelector")}catch{}var n$=n(3398);let nB="RepositoryPicker-module__container--codNO",nV="RepositoryPicker-module__label--WplGo";function nU(e){let t,n,i,a,s,r,l=(0,z.c)(16),{draftIssue:o,resolvedDraftIssueRepo:d,loadingDraftIssueRepo:c,topRepos:u}=e,[m,h]=(0,eh.useState)(void 0),{repository:f}=(0,eR.u)(),p=function(e){let t,n=(0,z.c)(5),i=(0,Z.b)(),a=(0,Q.Pk)(),{updateItem:s}=(0,ev.xx)();return n[0]!==e||n[1]!==i||n[2]!==a||n[3]!==s?(t=async(t,n)=>{let r=`${n}/${t}`,l=[{type:"text",name:`timeline-event: {"type": "switch-issue-repo", "markdownContent": "Changing repository to ${r}\u{2026}"}`,text:`Update draft issue with tag \`${e.tag}\` to use the \`${r}\` repository. DO NOT ask the user for a template. If there is a template in the new repository that makes sense to use, use it. If you cannot find a template, draft a blank issue. Regenerate the title and description. Maintain all conversation context. Update the metadata to follow the new repository and template. DO NOT change the \`tag\` or \`parentTag\` fields.`}];if(e.isUserEdited){let t={...e,...r&&{repository:r},isUserEdited:!1};s(t),l.push((0,eD.PO)(t))}await i.sendChatMessage({thread:(0,tg.W)(a),content:`Use the ${r} repository`,references:[...l,...a.currentReferences],topic:a.currentTopic,context:a.context,customInstructions:a.customInstructions,model:a.model})},n[0]=e,n[1]=i,n[2]=a,n[3]=s,n[4]=t):t=n[4],t}(o);l[0]!==p?(t=e=>{null!=e&&p(e.name,e.owner.login)},l[0]=p,l[1]=t):t=l[1];let g=t;!function(e,t,n,i){let a,s,r,l,o,d,c,u,m,h,f,p=(0,z.c)(32),{repository:g,setRepository:y}=(0,eR.u)(),x=(0,eh.useRef)(!0),v=(0,eh.useRef)(null),b=(0,eh.useRef)(void 0),j=na(e);p[0]!==e.id?(a=()=>{v.current!==e.id&&(x.current=!0,b.current=void 0,v.current=e.id)},p[0]=e.id,p[1]=a):a=p[1],p[2]!==e.id||p[3]!==g?(s=[e.id,g],p[2]=e.id,p[3]=g,p[4]=s):s=p[4],(0,eh.useEffect)(a,s);let w=(null!=e.repository||!e.isStreaming)&&!n;p[5]!==w?(r=()=>{w||(x.current=!0)},l=[w],p[5]=w,p[6]=r,p[7]=l):(r=p[6],l=p[7]),(0,eh.useEffect)(r,l),p[8]!==j?(o=(e,t)=>{var n,i;(void 0===b.current||(n=b.current?.nameWithOwner,i=e?.nameWithOwner,n?.toLowerCase()!==i?.toLowerCase()))&&(j({repository:e?.nameWithOwner},t),b.current=e??null)},p[8]=j,p[9]=o):o=p[9];let _=o;p[10]!==w||p[11]!==_||p[12]!==t||p[13]!==y||p[14]!==i?(d=()=>{w&&(null!=t?(y(t),_(t,!0)):i.length>0?(y(i[0]),_(i[0],!0)):(y(void 0),_(void 0,!0)))},c=[w,_,t,y,i],p[10]=w,p[11]=_,p[12]=t,p[13]=y,p[14]=i,p[15]=d,p[16]=c):(d=p[15],c=p[16]),(0,eh.useEffect)(d,c),p[17]!==g||p[18]!==w||p[19]!==t||p[20]!==i?(u=()=>{x.current&&void 0!==b.current&&w&&(null!=t&&t===g||null==t&&i.length>0&&g===i[0]?x.current=!1:null==t&&i.length<=0&&void 0===g&&(x.current=!1))},p[17]=g,p[18]=w,p[19]=t,p[20]=i,p[21]=u):u=p[21],p[22]!==e.id||p[23]!==g||p[24]!==w||p[25]!==t||p[26]!==i?(m=[e.id,w,t,i,g],p[22]=e.id,p[23]=g,p[24]=w,p[25]=t,p[26]=i,p[27]=m):m=p[27],(0,eh.useEffect)(u,m),p[28]!==g||p[29]!==_?(f=()=>{x.current||_(g,!1)},h=[g,_],p[28]=g,p[29]=_,p[30]=h,p[31]=f):(h=p[30],f=p[31]),(0,eh.useEffect)(f,h)}(o,d,c,u),l[2]!==f||l[3]!==c||l[4]!==u?(n=()=>{c||null==f||null==u||u.find(e=>e.id===f.id)||h(f.id)},i=[f,c,u],l[2]=f,l[3]=c,l[4]=u,l[5]=n,l[6]=i):(n=l[5],i=l[6]),(0,eh.useEffect)(n,i);let y=f??u?.[0],x=o.isStreaming||c;return l[7]===Symbol.for("react.memo_cache_sentinel")?(a=(0,W.jsx)(n$.A,{className:(0,em.$)(nV,"sr-only"),required:!0,children:"Repository"}),l[7]=a):a=l[7],l[8]!==x?(s={hasIssuesEnabled:!0,readonly:x},l[8]=x,l[9]=s):s=l[9],l[10]!==m||l[11]!==g||l[12]!==y||l[13]!==s||l[14]!==u?(r=(0,W.jsxs)("div",{className:nB,children:[a,(0,W.jsx)(eG.f0,{initialRepository:y,onSelect:g,options:s,topRepositories:u,enforceAtleastOneSelected:!0},m)]}),l[10]=m,l[11]=g,l[12]=y,l[13]=s,l[14]=u,l[15]=r):r=l[15],r}try{nU.displayName||(nU.displayName="RepositoryPicker")}catch{}let nq=(P=[{defaultValue:null,kind:"LocalArgument",name:"owner"},{defaultValue:null,kind:"LocalArgument",name:"repo"}],F=[{kind:"Variable",name:"name",variableName:"repo"},{kind:"Variable",name:"owner",variableName:"owner"}],V=[M={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},$={alias:null,args:null,kind:"ScalarField",name:"filename",storageKey:null},B={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null}],U=[M,$,B,{alias:null,args:null,kind:"ScalarField",name:"about",storageKey:null}],{fragment:{argumentDefinitions:P,kind:"Fragment",metadata:null,name:"TemplatePickerQuery",selections:[{alias:null,args:F,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,concreteType:"IssueForm",kind:"LinkedField",name:"issueForms",plural:!0,selections:[M,{kind:"InlineDataFragmentSpread",name:"TemplatePickerForm",selections:V,args:null,argumentDefinitions:[]}],storageKey:null},{alias:null,args:null,concreteType:"IssueTemplate",kind:"LinkedField",name:"issueTemplates",plural:!0,selections:[M,{kind:"InlineDataFragmentSpread",name:"TemplatePickerTemplate",selections:U,args:null,argumentDefinitions:[]}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:P,kind:"Operation",name:"TemplatePickerQuery",selections:[{alias:null,args:F,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,concreteType:"IssueForm",kind:"LinkedField",name:"issueForms",plural:!0,selections:V,storageKey:null},{alias:null,args:null,concreteType:"IssueTemplate",kind:"LinkedField",name:"issueTemplates",plural:!0,selections:U,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:"453f03781d915408c3c338e5d346e0be",metadata:{},name:"TemplatePickerQuery",operationKind:"query",text:null}});nq.hash="582a468668cd62a5a95ad0f91f7ea5e5";let nG={kind:"InlineDataFragment",name:"TemplatePickerForm"};nG.hash="277026edd019ed6ef2c9d27b3d3d6c4a";let nH={kind:"InlineDataFragment",name:"TemplatePickerTemplate"};nH.hash="fa6038bb9389af7bff23ba3491dd0507";var nK=n(86391);function nW(e,t){return e.filename.localeCompare(t.filename)}function nz(e){return(0,ts.readInlineData)(nG,e)}function nQ(e){return(0,ts.readInlineData)(nH,e)}function nZ(e){let t,n,i,a,s=(0,z.c)(10),{draftIssue:r}=e,{repository:l}=(0,eR.u)(),o=l?.owner.login,d=l?.name;s[0]!==o||s[1]!==d?(t={owner:o,repo:d},s[0]=o,s[1]=d,s[2]=t):t=s[2];let{data:c}=function(e){let t,n,i,a,s=(0,z.c)(13),{owner:r,repo:l}=e,o=(0,eQ.useRelayEnvironment)();return s[0]!==o?(t=JSON.stringify(o),s[0]=o,s[1]=t):t=s[1],s[2]!==r||s[3]!==l||s[4]!==t?(n=["copilot-immersive-templates",t,r,l],s[2]=r,s[3]=l,s[4]=t,s[5]=n):n=s[5],s[6]!==o||s[7]!==r||s[8]!==l?(i=async()=>{if(!r||!l)return[];let e=await (0,ts.fetchQuery)(o,nq,{owner:r,repo:l}).toPromise();return[...(e?.repository?.issueTemplates||[]).map(nQ),...(e?.repository?.issueForms||[]).map(nz)].sort(nW)},s[6]=o,s[7]=r,s[8]=l,s[9]=i):i=s[9],s[10]!==n||s[11]!==i?(a={queryKey:n,queryFn:i},s[10]=n,s[11]=i,s[12]=a):a=s[12],(0,e2.I)(a)}(t);if(null==c||0===c.length)return null;s[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,W.jsx)("span",{children:"/"}),s[3]=n):n=s[3],s[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,W.jsx)(n$.A,{className:(0,em.$)(nV,"sr-only"),children:"Template"}),s[4]=i):i=s[4];let u=l?.nameWithOwner,m=l?.isBlankIssuesEnabled;return s[5]!==r||s[6]!==u||s[7]!==m||s[8]!==c?(a=(0,W.jsxs)(W.Fragment,{children:[n,(0,W.jsxs)("div",{className:nB,children:[i,(0,W.jsx)(nJ,{templates:c,draftIssue:r,repositoryNwo:u,isBlankIssuesEnabled:m})]})]}),s[5]=r,s[6]=u,s[7]=m,s[8]=c,s[9]=a):a=s[9],a}function nJ(e){let t,n,i,a,s,r,l,o,d=(0,z.c)(23),{templates:c,draftIssue:u,isBlankIssuesEnabled:m,repositoryNwo:h}=e,[f,p]=(0,eh.useState)("");e:{let e;if(!f){t=c;break e}d[0]!==f||d[1]!==c?(e=c?.filter(e=>e.name?.toLowerCase().includes(f.toLowerCase())),d[0]=f,d[1]=c,d[2]=e):e=d[2],t=e}let g=t,[y,x]=(0,eh.useState)(void 0);d[3]!==u.template||d[4]!==c?(n=()=>{if(!u.template)return void x(void 0);let e=u.template.split("/").findLast(Boolean);x(c?.find(t=>t.filename===e||t.name===e))},i=[c,u.template],d[3]=u.template,d[4]=c,d[5]=n,d[6]=i):(n=d[5],i=d[6]),(0,eh.useEffect)(n,i);let v=function(){let e,t=(0,z.c)(4),n=(0,Z.b)(),i=(0,Q.Pk)(),{updateItem:a}=(0,ev.xx)();return t[0]!==n||t[1]!==i||t[2]!==a?(e=async(e,t,s)=>{let r=[{type:"text",name:`timeline-event: {"type": "switch-issue-template", "markdownContent": "${t?`Changing template to '${t.name}'\u{2026}`:"Removing template\u2026"}"}`,text:t?`Update the draft issue with tag \`${e.tag}\` with the \`${t.filename}\` template${s?` in the \`${s}\` repository`:""}. Regenerate the title and description following the new template. Maintain all conversation context. Update the metadata to follow the new template. DO NOT change the \`tag\` or \`parentTag\` fields.`:`Update draft issue with tag \`${e.tag}\` to remove the template formatting. Regenerate the title and description to follow a generic format. Maintain all conversation context. DO NOT change the \`tag\` or \`parentTag\` fields.`}];if(e.isUserEdited){let t={...e,...s&&{repository:s},isUserEdited:!1};a(t),r.push((0,eD.PO)(t))}await n.sendChatMessage({thread:(0,tg.W)(i),content:t?`Use the '${t.name}' template`:"Remove the template",references:[...r,...i.currentReferences],topic:i.currentTopic,context:i.context,customInstructions:i.customInstructions,model:i.model})},t[0]=n,t[1]=i,t[2]=a,t[3]=e):e=t[3],e}(),b=(0,eh.useRef)(null),j="new-issue"===u.type&&null!=m&&!m;return d[7]!==g?(a=g??[],d[7]=g,d[8]=a):a=d[8],d[9]!==y?(s=y?[y]:[],d[9]=y,d[10]=s):s=d[10],d[11]!==y||d[12]!==j?(r=e=>(0,W.jsxs)(eF.Q,{trailingVisual:er.TriangleDownIcon,...e,ref:b,children:[y?(0,W.jsx)("span",{children:y.name}):"Select a template",j&&(0,W.jsx)("span",{style:{color:"red",marginLeft:4},children:"*"})]}),d[11]=y,d[12]=j,d[13]=r):r=d[13],d[14]!==u||d[15]!==v||d[16]!==h?(l=async e=>{let[t]=e;x(t),await v(u,t,h)},d[14]=u,d[15]=v,d[16]=h,d[17]=l):l=d[17],d[18]!==a||d[19]!==s||d[20]!==r||d[21]!==l?(o=(0,W.jsx)(nK.O,{items:a,initialSelectedItems:s,placeholderText:"Search",selectionVariant:"single",filterItems:p,title:"Select a template",renderAnchor:r,getItemKey:nX,convertToItemProps:nY,onSelectionChange:l,selectPanelRef:b,height:"large",width:"medium"}),d[18]=a,d[19]=s,d[20]=r,d[21]=l,d[22]=o):o=d[22],o}function nY(e){return{id:e.filename,text:e.name,description:("IssueTemplate"===e.__typename?e.about:e.description)||void 0,descriptionVariant:"block",source:e}}function nX(e){return e.filename}try{nZ.displayName||(nZ.displayName="TemplatePicker")}catch{}try{nJ.displayName||(nJ.displayName="TemplatePickerInternal")}catch{}var n0=n(10286);function n1(e,t){return(0,eh.useCallback)((n,i,a)=>{let s=n||`${n0.y}-${i}`;if(e.defaultValuesById&&e.defaultValuesById[s]===a)return;let r={...e,defaultValuesById:{...e.defaultValuesById}};r.defaultValuesById[s]=a,t(r,!1)},[e,t])}function n2(e){let t,n,i,a,s=(0,z.c)(13),{owner:r,repo:l}=e,o=(0,eQ.useRelayEnvironment)();return s[0]!==o?(t=JSON.stringify(o),s[0]=o,s[1]=t):t=s[1],s[2]!==r||s[3]!==l||s[4]!==t?(n=["copilot-immersive-current-repo",t,r,l],s[2]=r,s[3]=l,s[4]=t,s[5]=n):n=s[5],s[6]!==o||s[7]!==r||s[8]!==l?(i=async()=>r&&l?await (0,eG.tZ)(o,r,l):null,s[6]=o,s[7]=r,s[8]=l,s[9]=i):i=s[9],s[10]!==n||s[11]!==i?(a={queryKey:n,queryFn:i},s[10]=n,s[11]=i,s[12]=a):a=s[12],(0,e2.I)(a)}function n3(e){var t,n;let i,a,s,r,l,o,d,c,u,m,h,f,p,g,y,x,v,b,j,w,_,C,N,S,I,k,L,T,D,E,R,A,O,P,F,M,$,B,V,U=(0,z.c)(84),{isPreviewOpening:q,issue:G,onClose:H}=e,{openItem:K}=(0,ev.xx)(),Z=(0,eZ.u0)();U[0]!==G.tag||U[1]!==Z?(r=Z.get(G.tag),U[0]=G.tag,U[1]=Z,U[2]=r):r=U[2];let J=r,[Y,X]=(0,eh.useState)(q);U[3]!==Y?(l=()=>{if(Y){let e=setTimeout(()=>X(!1),ek.t);return()=>clearTimeout(e)}},o=[Y],U[3]=Y,U[4]=l,U[5]=o):(l=U[4],o=U[5]),(0,eh.useEffect)(l,o);let[ee,et]=(0,eh.useState)(null),en=(0,eh.useRef)(null),{selectedThreadID:ei}=(0,Q.Pk)(),{isLoading:ea,data:es}=(B=(0,z.c)(9),V=(0,eQ.useRelayEnvironment)(),B[0]!==V?(P=JSON.stringify(V),B[0]=V,B[1]=P):P=B[1],B[2]!==P?(F=["copilot-immersive-top-repos",P],B[2]=P,B[3]=F):F=B[3],B[4]!==V?(M=async()=>await (0,eG.St)(V,{first:10,hasIssuesEnabled:!0}),B[4]=V,B[5]=M):M=B[5],B[6]!==F||B[7]!==M?($={queryKey:F,queryFn:M},B[6]=F,B[7]=M,B[8]=$):$=B[8],(0,e2.I)($));U[6]!==G.repository?(d=G.repository?.split("/")??[],U[6]=G.repository,U[7]=d):d=U[7];let[el,eo]=d;U[8]!==el||U[9]!==eo?(c={owner:el,repo:eo},U[8]=el,U[9]=eo,U[10]=c):c=U[10];let{isLoading:ed,data:ec}=n2(c),[eu,em]=(0,eh.useState)(ec);U[11]!==ec?(u=()=>{ec&&em(ec)},m=[ec],U[11]=ec,U[12]=u,U[13]=m):(u=U[12],m=U[13]),(0,eh.useEffect)(u,m);let ef=null!=eu&&(!eu.hasIssuesEnabled||null!=eu.viewerInteractionLimitReasonHTML&&eu.viewerInteractionLimitReasonHTML?.length>0);U[14]===Symbol.for("react.memo_cache_sentinel")?(h=e=>{et(e)},U[14]=h):h=U[14];let ep=h;U[15]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{et(null)},U[15]=f):f=U[15];let eg=f;U[16]!==ee?(p=()=>{ee&&en?.current&&en.current.focus()},g=[ee],U[16]=ee,U[17]=p,U[18]=g):(p=U[17],g=U[18]),(0,eh.useEffect)(p,g);let ey=na(G),ex=n1(G,ey),eb=(0,eh.useRef)(null),eT=(t=eb,(a=(0,z.c)(2))[0]!==t?(i=()=>!t.current||t.current.clientWidth<1024,a[0]=t,a[1]=i):i=a[1],s=i,(0,eh.useSyncExternalStore)(n4,s)),eD=J?.parent!=null,eR=(0,eh.useRef)(null),eA=ec?.id??"",eO=G.template||"";U[19]!==eA||U[20]!==eO?(y={repoId:eA,filename:eO},U[19]=eA,U[20]=eO,U[21]=y):y=U[21];let{isLoading:eP,data:eF}=e3(y),eM=ec??void 0;U[22]!==eM?(x={repository:eM},U[22]=eM,U[23]=x):x=U[23];let e$=x;if(Y||ea||eP){let e;return U[24]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(e_.Q,{optionConfig:{useViewportQueries:!1}}),U[24]=e):e=U[24],e}let eB=`${G.id}@${ei}`;return U[25]!==eT||U[26]!==eB?(v=(0,ej.S)({storageKeyPrefix:eB,insidePortal:eT,disableCopilotAssignmentModal:!0}),U[25]=eT,U[26]=eB,U[27]=v):v=U[27],U[28]===Symbol.for("react.memo_cache_sentinel")?(b=(0,eC.G)("create-issue-preview"),U[28]=b):b=U[28],U[29]!==G?(j=(0,W.jsx)("div",{children:(0,W.jsx)(eE,{item:G})}),U[29]=G,U[30]=j):j=U[30],U[31]!==J||U[32]!==K||U[33]!==eD?(w=eD&&(0,W.jsx)("div",{children:(0,W.jsx)(nM,{node:J,onItemSelected:e=>K(e.item.id,!0)})}),U[31]=J,U[32]=K,U[33]=eD,U[34]=w):w=U[34],U[35]!==j||U[36]!==w?(_=(0,W.jsxs)("div",{className:nA,children:[j,w]}),U[35]=j,U[36]=w,U[37]=_):_=U[37],U[38]!==J||U[39]!==ef||U[40]!==H||U[41]!==eF?(C=(0,W.jsx)("div",{className:nO,children:(0,W.jsx)(tM,{issueTemplate:eF,issueNode:J,issueFormRef:eR,noRepoAccess:ef,onClose:H,onError:ep,onClearError:eg})}),U[38]=J,U[39]=ef,U[40]=H,U[41]=eF,U[42]=C):C=U[42],U[43]!==_||U[44]!==C?(N=(0,W.jsxs)("div",{className:nR,children:[_,C]}),U[43]=_,U[44]=C,U[45]=N):N=U[45],U[46]!==es?(S=es||[],U[46]=es,U[47]=S):S=U[47],U[48]!==G||U[49]!==ec||U[50]!==ed||U[51]!==S?(I=(0,W.jsx)(nU,{draftIssue:G,resolvedDraftIssueRepo:ec,loadingDraftIssueRepo:ed,topRepos:S}),U[48]=G,U[49]=ec,U[50]=ed,U[51]=S,U[52]=I):I=U[52],U[53]!==G?(k=(0,W.jsx)(nZ,{draftIssue:G}),U[53]=G,U[54]=k):k=U[54],U[55]!==I||U[56]!==k?(L=(0,W.jsxs)(eN.B,{direction:"horizontal",align:"center",gap:"condensed",className:"py-2",children:[I,k]}),U[55]=I,U[56]=k,U[57]=L):L=U[57],U[58]!==ee?(T=ee&&(0,W.jsx)(eS.l,{ref:en,hideTitle:!0,title:ee.bannerTitle,description:(0,W.jsx)(eI.o,{children:ee.message}),variant:ee.bannerVariant,role:"alert","data-testid":"create-issue-error-banner"}),U[58]=ee,U[59]=T):T=U[59],U[60]!==ec||U[61]!==ef?(D=ef&&((n=ec)&&!n.hasIssuesEnabled?(0,W.jsx)(eL,{title:"Issues are disabled",description:"Issues are disabled on this repository. Please select a different repository above to continue creating your issue.",icon:er.IssueDraftIcon}):n&&n.viewerInteractionLimitReasonHTML?(0,W.jsx)(eL,{title:"You cannot create issues in this repository",description:n.viewerInteractionLimitReasonHTML,icon:er.IssueDraftIcon}):void 0),U[60]=ec,U[61]=ef,U[62]=D):D=U[62],U[63]!==J||U[64]!==G||U[65]!==ed||U[66]!==ef||U[67]!==ey||U[68]!==H||U[69]!==ex||U[70]!==eF?(E=!ef&&(0,W.jsx)(nD,{draftIssue:G,issueNode:J,template:eF??void 0,issueFormRef:eR,loadingDraftIssueRepo:ed,onChange:ey,onClose:H,onFieldChange:ex}),U[63]=J,U[64]=G,U[65]=ed,U[66]=ef,U[67]=ey,U[68]=H,U[69]=ex,U[70]=eF,U[71]=E):E=U[71],U[72]!==L||U[73]!==T||U[74]!==D||U[75]!==E?(R=(0,W.jsxs)("div",{className:nP,children:[L,T,D,E]}),U[72]=L,U[73]=T,U[74]=D,U[75]=E,U[76]=R):R=U[76],U[77]!==N||U[78]!==R?(A=(0,W.jsxs)("div",{className:nE,ref:eb,children:[N,R]}),U[77]=N,U[78]=R,U[79]=A):A=U[79],U[80]!==e$||U[81]!==v||U[82]!==A?(O=(0,W.jsx)(ew.S,{optionConfig:v,preselectedData:e$,...b,children:A}),U[80]=e$,U[81]=v,U[82]=A,U[83]=O):O=U[83],O}function n4(e){let t=new ResizeObserver(e);return t.observe(document.documentElement),()=>{t.unobserve(document.documentElement),t.disconnect()}}try{n3.displayName||(n3.displayName="CreateIssuePreview")}catch{}var n5=n(82380),n6=n(76158);function n7({isPreviewOpening:e,issue:t,onClose:n}){let[i,a]=(0,eh.useState)(e),{openItem:s}=(0,ev.xx)(),r=(0,eZ.u0)().get(t.tag);(0,eh.useEffect)(()=>{if(i){let e=setTimeout(()=>a(!1),ek.t);return()=>clearTimeout(e)}},[i]);let l=(0,eh.useMemo)(()=>(0,W.jsx)(eo.K,{icon:er.LinkExternalIcon,variant:"invisible","aria-label":"Open issue in new tab",onClick:()=>{window.open(t.href,"_blank")}}),[t.href]),o=(0,eh.useMemo)(()=>({isReadonly:!0,hideTimeline:!0,navigate:tB.l,insideSidePanel:!0,shouldSkipSetDocumentTitle:!0,useViewportQueries:!1,onIssueDelete:n,additionalHeaderActions:l,showRepositoryPill:!0}),[n,l]),d=(0,eh.useMemo)(()=>{let[e,n]=t.repository.split("/");if(e&&n)return{owner:e,repo:n,number:t.number,type:"Issue"}},[t.number,t.repository]);return i||!d?(0,W.jsx)(e_.Q,{optionConfig:o}):(0,W.jsxs)("div",{className:"ExistingIssuePreview-module__container--U4DdB CreateIssuePreview-module__container--xRZfA IssuePreview-module__container--O4xBI",children:[(0,W.jsxs)("div",{className:"ExistingIssuePreview-module__toolbar--wnxSx CreateIssuePreview-module__toolbar--DOlv4 FilePreview-module__toolbar--ZZWN1",children:[(0,W.jsx)("div",{className:"ExistingIssuePreview-module__toolbarLeft--NWSuI CreateIssuePreview-module__toolbarLeft--kUeFB FilePreview-module__toolbarLeft--RCKxW",children:r.parent&&(0,W.jsx)(nM,{node:r,onItemSelected:e=>s(e.item.id,!0)})}),(0,W.jsx)("div",{className:"ExistingIssuePreview-module__toolbarActions--ASiVq CreateIssuePreview-module__toolbarActions--n_D57 FilePreview-module__toolbarActions--h04aW",children:(0,W.jsx)(tF,{issueNode:r,onSuccess:n})})]}),(0,W.jsxs)("div",{className:"ExistingIssuePreview-module__viewerContainer--C5tZ7 CreateIssuePreview-module__viewerContainer--bRxNh",children:[(0,W.jsx)(n6.e,{children:(0,W.jsx)(n5.cI,{itemIdentifier:d,optionConfig:o})}),(0,W.jsx)("div",{className:"ExistingIssuePreview-module__relationshipsContainer--CHUGP",children:(0,W.jsx)(t6,{issueNode:r})})]})]})}try{n7.displayName||(n7.displayName="ExistingIssuePreview")}catch{}let n8={fragment:{argumentDefinitions:q=[{defaultValue:null,kind:"LocalArgument",name:"input"}],kind:"Fragment",metadata:null,name:"updateIssueMutationContentOnlyMutation",selections:G=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"UpdateIssuePayload",kind:"LinkedField",name:"updateIssue",plural:!1,selections:[{alias:null,args:null,concreteType:"Issue",kind:"LinkedField",name:"issue",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"body",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"bodyVersion",storageKey:null}],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:q,kind:"Operation",name:"updateIssueMutationContentOnlyMutation",selections:G},params:{id:"d1d9840a47a7be6dd0ad285ce57f1c7f",metadata:{},name:"updateIssueMutationContentOnlyMutation",operationKind:"mutation",text:null}};n8.hash="470cf4272c31ec8565dec1240c55030a";let n9={fragment:{argumentDefinitions:H=[{defaultValue:null,kind:"LocalArgument",name:"input"}],kind:"Fragment",metadata:null,name:"updateIssueMutationDeleteProjectMutation",selections:K=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"DeleteProjectV2ItemPayload",kind:"LinkedField",name:"deleteProjectV2Item",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"deletedItemId",storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:H,kind:"Operation",name:"updateIssueMutationDeleteProjectMutation",selections:K},params:{id:"ad9e6eaf34525daacc17362653e63272",metadata:{},name:"updateIssueMutationDeleteProjectMutation",operationKind:"mutation",text:null}};n9.hash="f03ef95aad392077538992e2c84a9752";var ie=n(61491),it=n(75908),ii=n(36285),ia=n(78137),is=n(37630),ir=n(52590),il=n(81688);async function io({environment:e,currentIssue:t,draftIssue:n,proposedChanges:i,canUseCopilotAssignment:a,onCompleted:s}){let r,l,o=t.labels?.nodes?.filter(e=>null!=e).map(e=>e.name)||[],d=i.labels?.map(e=>e.name)||[],c=void 0!==i.labels&&!(0,t8.A)(o.sort(),d.sort()),u=void 0!==i.milestone&&(i.milestone?.title||null)!==(t.milestone?.title||null),m=void 0!==i.issueType&&i.issueType?.name!==t.issueType?.name,h=t.projectItems?.nodes?.filter(e=>null!=e).map(e=>e.project).filter(e=>null!=e).map(e=>e.id).filter(Boolean)||[],f=i.projects?.map(e=>e.id)||[],p=void 0!==i.projects&&!(0,t8.A)(h.sort(),f.sort()),g=n.name!==t.title,y=void 0!==i.body&&i.body!==(t.body||""),x=[];if(c){let a=new Promise((a,s)=>{(0,ii.N)({environment:e,input:{labelableId:t.id,labels:i.labels||[],labelableTypeName:"Issue"},clientMutationId:n.messageId,onCompleted:()=>{a()},onError:e=>{s(e)}})});x.push({operation:"labels",promise:a})}let v=t.assignees?.nodes?.filter(e=>null!=e),b=function({currentIssue:e,currentAssignees:t,selectedAssignees:n,canUseCopilotAssignment:i,environment:a,messageId:s}){if(void 0===n)return;let r=n.filter(e=>!(0,e9.v)(e.login))??[],l=i?r:n;if(!((e,t)=>{if(e.length!==t.length)return!1;let n=new Set(e.map(e=>e.login));return t.every(e=>n.has(e.login))})(l,t??[]))return new Promise((t,n)=>{(0,ia.j)({environment:a,input:{issueId:e.id,assignedActors:l,participants:[]},clientMutationId:s,onCompleted:()=>{t()},onError:e=>{n(e)}})})}({currentIssue:t,currentAssignees:v,selectedAssignees:i.assignees,canUseCopilotAssignment:a,environment:e,messageId:n.messageId});if(b&&x.push({operation:"assignees",promise:b}),u){let a=new Promise((a,s)=>{(0,ir.v)({environment:e,input:{issueId:t.id,milestone:i.milestone??null,clientMutationId:n.messageId},onCompleted:()=>{a()},onError:e=>{s(e)}})});x.push({operation:"milestone",promise:a})}if(m){let a=new Promise((a,s)=>{(0,is._)({environment:e,input:{issueId:t.id,issueTypeId:i.issueType?.id||null,clientMutationId:n.messageId},onCompleted:()=>{a()},onError:e=>{s(e)}})});x.push({operation:"issueType",promise:a})}if(p){let a=new Promise((a,s)=>{let r=t.projectItems?.nodes||[];(async()=>{try{await ic(t.id,i.projects||[],r,e,n.messageId,i.hasInaccessibleProject),a()}catch(t){let e=t instanceof Error?t.message:"Project update failed";s(Error(`Project update failed: ${e}`))}})()});x.push({operation:"projects",promise:a})}if(g||y){let a=new Promise((a,s)=>{(0,eQ.commitMutation)(e,{mutation:n8,variables:{input:{id:t.id,clientMutationId:n.messageId,...g&&{title:n.name},...y&&{body:i.body,bodyVersion:n?.bodyVersion}}},onCompleted:()=>{a()},onError:e=>{s(e)}})});x.push({operation:"content",promise:a})}let j=[],w=[];if(x.length>0)for(let[e,t]of(await Promise.allSettled(x.map(e=>e.promise))).entries()){let n=x[e]?.operation;n&&("fulfilled"===t.status?j.push(n):w.push({operation:n,error:t.reason instanceof Error?t.reason:Error("Unknown error")}))}let _="assignCopilot";try{await id({currentIssue:t,selectedAssignees:i.assignees,canUseCopilotAssignment:a,hasOtherUpdateErrors:w.length>0,onCompleted:()=>j.push(_)})}catch(e){w.push({operation:_,error:e instanceof Error?e:Error("Unknown error")})}if(0===j.length&&0===w.length){let e={draftType:"update-issue",tag:n?.tag||"",parentTag:n?.parentTag,blockedByTags:n?.blockedByTags,isBlockingTags:n?.isBlockingTags,title:t.title,number:n?.issueNumber||t.number||0,url:t.url||"",repository:{databaseId:t.repository?.databaseId||0,name:t.repository?.name||"",owner:{login:t.repository?.owner.login||""}},template:n?.template,assignees:t.assignees?.nodes?.map(e=>e?.login).filter(e=>!!e)||[]};s&&s({result:{successful:[],failed:[],issue:e}});return}let C=(r=j.includes("content")?n.name:t.title,l=j.includes("assignees")&&void 0!==i.assignees?i.assignees.map(e=>e.login):t.assignees?.nodes?.map(e=>e?.login).filter(e=>!!e)||[],{draftType:"update-issue",tag:n?.tag||"",parentTag:n?.parentTag,blockedByTags:n?.blockedByTags,isBlockingTags:n?.isBlockingTags,title:r,number:n?.issueNumber||t.number||0,url:t.url||"",repository:{databaseId:t.repository?.databaseId||0,name:t.repository?.name||"",owner:{login:t.repository?.owner.login||""}},template:n?.template,assignees:l});s&&s({result:{successful:j,failed:w,issue:C}})}async function id({currentIssue:e,selectedAssignees:t,canUseCopilotAssignment:n,hasOtherUpdateErrors:i,onCompleted:a}){if(void 0!==t&&n&&t?.some(e=>(0,e9.v)(e.login)))return(async()=>{if(i)throw Error("Copilot assignment skipped due to other update error(s)");let t=e.repository.defaultBranchRef?.name??"";if(!t)throw Error("Cannot assign to Copilot: default branch not found");try{let n=await (0,ie.J)(e.repository.owner.login,e.repository.name,[e.number],{instructions:"",targetRepo:`${e.repository.owner.login}/${e.repository.name}`,targetBranch:t});if(!n.ok){let e=(0,it.v0)(n,"Assignment failed");throw Error(e)}a?.()}catch(e){throw e instanceof Error?e:Error("Unknown error")}})()}async function ic(e,t,n,i,a,s){let r=n.filter(e=>null!=e&&null!=e.project),l=t.filter(e=>!r.some(t=>t?.project.id===e.id)),o=s?[]:r.filter(e=>!t.some(t=>t.id===e?.project.id));if(0===l.length&&0===o.length)return;let d=[],c=[];for(let t of l){let n=new Promise(n=>{(0,il.Z)({environment:i,projectId:t.id,issueId:e,clientMutationId:a,onCompleted:()=>{n()},onError:e=>{d.push({projectId:t.id,projectTitle:t.title,operation:"add",error:e.message}),n()}})});c.push(n)}for(let e of o){let t=new Promise(t=>{(0,eQ.commitMutation)(i,{mutation:n9,variables:{input:{clientMutationId:a,itemId:e?.id,projectId:e?.project.id}},onCompleted:()=>{t()},onError:n=>{d.push({projectId:e?.project.id||"unknown",projectTitle:e?.project.title||"unknown",operation:"remove",error:n.message}),t()}})});c.push(t)}if(await Promise.all(c),d.length>0){let e=`Failed to update ${d.length} project(s): ${d.map(e=>`${e.operation} "${e.projectTitle}" (${e.error})`).join(", ")}`,t=Error("Unable to update issue projects");throw t.projectErrors=d,t.detailedMessage=e,t}}function iu({issueRepo:e,draftIssue:t,template:n,issueFormRef:i,onUpdate:a,onUpdateError:s,onClose:r}){let l=(0,eQ.useRelayEnvironment)(),[o,d]=(0,eh.useState)(!1),{clearSessionData:c,assignees:u,labels:m,milestone:h,issueType:f,projects:p}=(0,eR.u)(),g=(0,eh.useCallback)(()=>{let n=e.viewerIssueCreationPermissions;return{assignees:n?.assignable?u:void 0,labels:n?.labelable?m:void 0,milestone:n?.milestoneable?h:void 0,issueType:n?.typeable?f||null:void 0,projects:n?.triageable?p:void 0,hasInaccessibleProject:n?.triageable?t.rawProjectsInput?.includes(""):void 0}},[u,t.rawProjectsInput,e.viewerIssueCreationPermissions,f,m,h,p]),y=(0,eh.useCallback)(()=>{c(),i.current?.clearSessionStorage()},[c,i]),x=(0,eh.useCallback)(()=>{y(),r?.()},[y,r]),v=td(),b=(0,eh.useCallback)(async o=>{o.preventDefault(),d(!0);try{let[o,c]=t.repository?.split("/")??[];if(!o||!c||!t.issueNumber){let e=Error("Invalid repository information");e.name="OTHER",s?.(e),d(!1);return}let u=await eX(l,o,c,t.issueNumber,!0);if(!u){let e=Error("Issue not found or no longer accessible");e.name="ISSUE_NOT_FOUND",s?.(e),d(!1);return}let m=(0,eV.O_)(t.name);if(!m.isValid){let e=Error(m.errorMessage||"Invalid title");e.name="INVALID_TITLE",s?.(e);return}let h=t.body??"";if(n&&(0,eU.GQ)(n.data)&&i.current){let e=i.current.getInvalidInputs();if(e.length>0){let t=Error("Please fix the highlighted errors in the form.");t.name="INVALID_FORM_INPUTS",s?.(t),e[0]?.focus();return}h=i.current.markdown()??""}h=await v(e,h);let f=(u.assignees?.nodes?.filter(e=>null!=e)??[]).some(e=>(0,e9.v)(e.login)),p=(e.viewerIssueCreationPermissions?.assignable??!1)&&!u.repository?.isArchived&&!!u.repository?.isCopilotAgentEnabled&&!f,y=g(),b={body:h,assignees:y.assignees,labels:y.labels,milestone:y.milestone,issueType:y.issueType,projects:y.projects,hasInaccessibleProject:y.hasInaccessibleProject};await io({environment:l,currentIssue:u,draftIssue:t,proposedChanges:b,canUseCopilotAssignment:p,onCompleted:e=>{e.result.failed.length>0?s?.(e):e.result.successful.length>0&&e.result.issue?(x(),r(),a?.(e.result.issue)):(x(),r())}})}catch{let e=Error("Update failed");e.name="OTHER",s?.(e)}finally{d(!1)}},[x,t,l,g,i,e,r,a,s,n,v]);return(0,W.jsx)(W.Fragment,{children:(0,W.jsx)(eF.Q,{variant:"primary","data-testid":"update-issue-button",onClick:b,disabled:o||!t.bodyVersion,children:o?"Updating...":"Update"})})}try{iu.displayName||(iu.displayName="UpdateIssueButton")}catch{}function im(e){var t,n,i;let a,s,r,l,o,d,c,u,m,h,f,p,g,y,x,v,b,j,w,_,C,N,S,I,k,L,T=(0,z.c)(72),{isPreviewOpening:D,issue:E,onClose:R}=e,[A,O]=(0,eh.useState)(D),[P,F]=(0,eh.useState)(null),[M,$]=(0,eh.useState)(E.id);T[0]!==A?(l=()=>{if(A){let e=setTimeout(()=>O(!1),ek.t);return()=>clearTimeout(e)}},o=[A],T[0]=A,T[1]=l,T[2]=o):(l=T[1],o=T[2]),(0,eh.useEffect)(l,o),M!==E.id&&($(E.id),F(null));let{selectedThreadID:B}=(0,Q.Pk)(),V=null!=E.repository||!E.isStreaming,U=(null!=E.bodyVersion||!E.isStreaming)&&!E.bodyVersion;T[3]!==E.repository?(d=E.repository?.split("/")??[],T[3]=E.repository,T[4]=d):d=T[4];let[q,G]=d;T[5]!==q||T[6]!==G?(c={owner:q,repo:G},T[5]=q,T[6]=G,T[7]=c):c=T[7];let{isLoading:H,data:K}=n2(c),Z=K?.id??"",J=E.template||"";T[8]!==Z||T[9]!==J?(u={repoId:Z,filename:J},T[8]=Z,T[9]=J,T[10]=u):u=T[10];let{isLoading:Y,data:X}=e3(u),ee=null!=K&&(!K.hasIssuesEnabled||null!=K.viewerInteractionLimitReasonHTML&&K.viewerInteractionLimitReasonHTML?.length>0),en=td(),ei=tv();T[11]!==ei?(m=async e=>{await ei([e])},T[11]=ei,T[12]=m):m=T[12];let ea=m;T[13]!==ei||T[14]!==E.id||T[15]!==E.repository?(h=async e=>{if(e&&"object"==typeof e&&"result"in e){let{result:t}=e;if(void 0===t.issue){let e=Error("Issue data is unavailable");e.name="UNKNOWN_ERROR",F([e]);return}let n=t.issue?.repository?.databaseId;if(t.failed.length>0&&0===t.successful.length)(0,et.BI)("dotcom_chat.activate.error",{target:"ERROR_ISSUE_UPDATE_FAILED",mode:"immersive",message:`Issue update failed: ${t.failed.length} operations failed`,draftIssueId:E.id,sourceIssueId:n,repository:E.repository,errorType:"MULTIPLE_UPDATE_FAILURES",failedOperationCount:t.failed.length,failedOperations:JSON.stringify(t.failed.map(i_))}),F(t.failed.map(iw));else if(t.failed.length>0&&t.successful.length>0){let e=t.failed.map(ij).join(", ");t.issue.errors=t.failed.map(ib);let i=t.successful.join(", ");(0,et.BI)("dotcom_chat.activate.error",{target:"ERROR_ISSUE_UPDATE_PARTIAL_FAILURE",mode:"immersive",message:`Issue update partial failure. Failed: ${e}. Succeeded: ${i}`,draftIssueId:E.id,sourceIssueId:n,repository:E.repository,errorType:"PARTIAL_UPDATE_FAILURE",failedOperationCount:t.failed.length,failedOperations:JSON.stringify(t.failed.map(iv)),successfulOperations:JSON.stringify(t.successful)});try{await ei([t.issue])}catch{let t=Error(`Partial failure: ${e} failed`);t.name="PARTIAL_UPDATE_FAILURE",F([t])}}return}if(e instanceof Error){let t=Error(e.message);"name"in e?t.name=e.name:t.name="OTHER",(0,et.BI)("dotcom_chat.activate.error",{target:"ERROR_ISSUE_UPDATE_FAILED",mode:"immersive",message:e.message,issueId:E.id,errorType:"OTHER"}),F([t])}},T[13]=ei,T[14]=E.id,T[15]=E.repository,T[16]=h):h=T[16];let es=h,el=na(E),eo=n1(E,el),ed=(0,eh.useRef)(null),ec=(t=ed,(s=(0,z.c)(2))[0]!==t?(a=()=>!t.current||t.current.clientWidth<1024,s[0]=t,s[1]=a):a=s[1],r=a,(0,eh.useSyncExternalStore)(iC,r)),eu=(0,eh.useRef)(null);e:{let e;if(!P||0===P.length){f=null;break e}T[17]!==P?(e=P.map(ih),T[17]=P,T[18]=e):e=T[18],f=e}let em=f,ef=K??void 0;T[19]!==ef?(p={repository:ef},T[19]=ef,T[20]=p):p=T[20];let ep=p;if(A||!V||H||Y){let e;return T[21]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(e_.Q,{optionConfig:{useViewportQueries:!1}}),T[21]=e):e=T[21],e}if(!K){let e;return T[22]!==E.repository?(e=(n=E.repository)?(0,W.jsx)(eL,{title:`${n} is not found`,description:"Please verify if the repository exists and is accessible before trying again.",icon:er.IssueDraftIcon}):(0,W.jsx)(eL,{title:"Malformed draft issue",description:"The drafted issue contains malformed data and the preview is not available. Please retry.",icon:er.IssueDraftIcon}),T[22]=E.repository,T[23]=e):e=T[23],e}if(ee){let e;return T[24]!==K?(e=(i=K).hasIssuesEnabled?i.viewerInteractionLimitReasonHTML?(0,W.jsx)(eL,{title:"You cannot update issues in this repository",description:i.viewerInteractionLimitReasonHTML,icon:er.IssueDraftIcon}):void 0:(0,W.jsx)(eL,{title:"Issues are disabled",description:"Issues are disabled on this repository. Please select a different repository above to continue updating your issue.",icon:er.IssueDraftIcon}),T[24]=K,T[25]=e):e=T[25],e}if(U){let e;return T[26]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(eL,{title:"Malformed draft issue",description:"The drafted issue contains malformed data and the preview is not available. Please retry.",icon:er.IssueDraftIcon}),T[26]=e):e=T[26],e}let eg=`${E.id}@${B}`;T[27]!==ec||T[28]!==eg?(g=(0,ej.S)({storageKeyPrefix:eg,insidePortal:ec,disableCopilotAssignmentModal:!0}),T[27]=ec,T[28]=eg,T[29]=g):g=T[29],T[30]===Symbol.for("react.memo_cache_sentinel")?(y=(0,eC.G)("update-issue-preview"),T[30]=y):y=T[30],T[31]!==E?(x=(0,W.jsx)("div",{className:nA,children:(0,W.jsx)(eE,{item:E})}),T[31]=E,T[32]=x):x=T[32];let ey=X??void 0;T[33]!==K||T[34]!==R||T[35]!==ea||T[36]!==es||T[37]!==ey||T[38]!==E?(v=(0,W.jsx)("div",{className:nO,children:(0,W.jsx)(iu,{issueRepo:K,draftIssue:E,template:ey,issueFormRef:eu,onUpdate:ea,onUpdateError:es,onClose:R})}),T[33]=K,T[34]=R,T[35]=ea,T[36]=es,T[37]=ey,T[38]=E,T[39]=v):v=T[39],T[40]!==x||T[41]!==v?(b=(0,W.jsxs)("div",{className:nR,children:[x,v]}),T[40]=x,T[41]=v,T[42]=b):b=T[42];let ex=P&&em;T[43]===Symbol.for("react.memo_cache_sentinel")?(j=(0,W.jsx)(er.RepoIcon,{}),T[43]=j):j=T[43];let ev=`${K.owner.login}/${K.name}`;T[44]!==ev?(w=(0,W.jsx)("b",{children:ev}),T[44]=ev,T[45]=w):w=T[45],T[46]!==E?(_=(0,W.jsx)(nZ,{draftIssue:E}),T[46]=E,T[47]=_):_=T[47],T[48]!==w||T[49]!==_?(C=(0,W.jsxs)(eN.B,{direction:"horizontal",align:"center",gap:"condensed",className:"py-2",children:[j,w,_]}),T[48]=w,T[49]=_,T[50]=C):C=T[50];let eb=X??void 0;return T[51]!==K||T[52]!==en?(N=e=>en(K,e),T[51]=K,T[52]=en,T[53]=N):N=T[53],T[54]!==el||T[55]!==R||T[56]!==eo||T[57]!==eb||T[58]!==N||T[59]!==E?(S=(0,W.jsx)(nD,{draftIssue:E,template:eb,issueFormRef:eu,onChange:el,onClose:R,onBeforeCreate:N,onFieldChange:eo}),T[54]=el,T[55]=R,T[56]=eo,T[57]=eb,T[58]=N,T[59]=E,T[60]=S):S=T[60],T[61]!==ex||T[62]!==C||T[63]!==S?(I=(0,W.jsxs)("div",{className:nP,children:[ex,C,S]}),T[61]=ex,T[62]=C,T[63]=S,T[64]=I):I=T[64],T[65]!==b||T[66]!==I?(k=(0,W.jsxs)("div",{className:nE,ref:ed,children:[b,I]}),T[65]=b,T[66]=I,T[67]=k):k=T[67],T[68]!==ep||T[69]!==g||T[70]!==k?(L=(0,W.jsx)(ew.S,{optionConfig:g,preselectedData:ep,...y,children:k}),T[68]=ep,T[69]=g,T[70]=k,T[71]=L):L=T[71],L}function ih(e){let t,n;switch(e.name){case"LABELS_UPDATE_FAILED":t="Failed to update labels",n="Could not update issue labels. Please try again.";break;case"ASSIGNEES_UPDATE_FAILED":t="Failed to update assignees",n="Could not update issue assignees. Please try again.";break;case"ASSIGNCOPILOT_UPDATE_FAILED":t="Failed to update assignees",n="Could not assign Copilot to the issue. Please try again.";break;case"MILESTONE_UPDATE_FAILED":t="Failed to update milestone",n="Could not update issue milestone. Please try again.";break;case"ISSUETYPE_UPDATE_FAILED":t="Failed to update issue type",n="Could not update issue type. Please try again.";break;case"PROJECTS_UPDATE_FAILED":t="Failed to update projects",n="Could not update project assignments. Please try again.";break;case"CONTENT_UPDATE_FAILED":t="Failed to update content",n="Could not update issue title or body. Please try again.";break;case"FORBIDDEN":t="Permission Denied",n="You don't have permission to update this issue. Please contact the repo owner.";break;case"NOT_FOUND":t="Issue Not Found",n="The issue you are trying to update could not be found or no longer exists.";break;case"INVALID_TITLE":t="Invalid issue title",n=e.message;break;case"INVALID_FORM_INPUTS":t="Invalid form inputs",n=e.message;break;case"STALE_DATA":t="Issue Outdated",n="The issue you are editing has changed. Please copy your edits and have Copilot draft a new update.";break;case"PROJECT_UPDATE_FAILED":{t="Failed to update project assignment";let i=e.projectErrors??[];if(i.length>0){let e=i.filter(ix),t=i.filter(iy),a=[];e.length>0&&a.push(`Failed to add to ${e.length} project(s): ${e.map(ig).join(", ")}`),t.length>0&&a.push(`Failed to remove ${t.length} project(s): ${t.map(ip).join(", ")}`),n=`The issue was updated successfully, but there were problems with project assignments. ${a.join(". ")}.`}else n="The issue was updated successfully, but there were problems with project assignments.";break}default:t="An error has occurred",n="Please try again later."}let i="PROJECT_UPDATE_FAILED"===e.name?"warning":"critical";return(0,W.jsx)(eS.l,{variant:i,title:t,description:n},`error-${e.name}`)}function ip(e){return`"${e.projectTitle}"`}function ig(e){return`"${e.projectTitle}"`}function iy(e){return"remove"===e.operation}function ix(e){return"add"===e.operation}function iv(e){return{operation:e.operation,error:e.error.message}}function ib(e){return{message:e.error.message,type:"update"}}function ij(e){return e.operation}function iw(e){let t=Error(e.error.message);if(t.name=`${e.operation.toUpperCase()}_UPDATE_FAILED`,t.operation=e.operation,"projects"===e.operation){let n=e.error;n.projectErrors&&(t.projectErrors=n.projectErrors)}return t}function i_(e){return{operation:e.operation,error:e.error.message}}function iC(e){let t=new ResizeObserver(e);return t.observe(document.documentElement),()=>{t.unobserve(document.documentElement),t.disconnect()}}try{im.displayName||(im.displayName="UpdateIssuePreview")}catch{}var iN=n(98755);function iS(e,t,n){let i="head"===n?e.headFile:e.baseFile,a=i.reference,s=(0,Z.b)(),{isLoading:r,isError:l,data:o}=(0,e2.I)({queryKey:["copilot-reference-preview","copilot","references","file",a?(0,Y.Vb)(a):void 0,n],queryFn:async()=>{if(!a||"file"!==a.type||""!==i.value)return null;let r=await s.service.hydrateReference(a);return r.ok?(t({...e,["head"===n?"headFile":"baseFile"]:{...i,value:r.payload.contents,isStreaming:!1}}),r.payload):null},staleTime:1/0});return(0,eh.useEffect)(()=>{o?.contents&&i.value!==o.contents&&t({...e,["head"===n?"headFile":"baseFile"]:{...i,value:o.contents,isStreaming:!1}})},[o?.contents,e,t,i,n]),{isLoading:r,isError:l,data:o}}var iI=n(36903),ik=n(55099),iL=n(25506);function iT(e){let t,n,i,a,s,r=(0,z.c)(24),{left:l,right:o,view:d}=e,c=(0,eh.useId)(),u=(0,eh.useId)(),m=(0,eh.useId)(),h=(0,iL.a)(l);return r[0]!==l.name||r[1]!==c?(t=(0,W.jsxs)("span",{id:c,className:"sr-only",children:[l.name," original file contents"]}),r[0]=l.name,r[1]=c,r[2]=t):t=r[2],r[3]!==o.name||r[4]!==u?(n=(0,W.jsxs)("span",{id:u,className:"sr-only",children:[o.name," modified file contents"]}),r[3]=o.name,r[4]=u,r[5]=n):n=r[5],r[6]!==l.name||r[7]!==o.name||r[8]!==m?(i=(0,W.jsxs)("span",{id:m,className:"sr-only",children:[l.name," and ",o.name," unified diff view"]}),r[6]=l.name,r[7]=o.name,r[8]=m,r[9]=i):i=r[9],r[10]!==h||r[11]!==l.name||r[12]!==l.value||r[13]!==c||r[14]!==o.value||r[15]!==u||r[16]!==m||r[17]!==d?(a=(0,W.jsx)(ik.C,{fileName:l.name,left:l.value,leftLabelledBy:c,right:o.value,rightLabelledBy:u,spacing:h,unifiedLabelledBy:m,view:d}),r[10]=h,r[11]=l.name,r[12]=l.value,r[13]=c,r[14]=o.value,r[15]=u,r[16]=m,r[17]=d,r[18]=a):a=r[18],r[19]!==t||r[20]!==n||r[21]!==i||r[22]!==a?(s=(0,W.jsxs)("div",{children:[t,n,i,a]}),r[19]=t,r[20]=n,r[21]=i,r[22]=a,r[23]=s):s=r[23],s}try{iT.displayName||(iT.displayName="DiffView")}catch{}function iD(e){let t,n,i,a,s,r,l,o=(0,z.c)(15),{isUnifiedDiff:d,setIsUnifiedDiff:c}=e;o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,W.jsx)(ed.W.Anchor,{children:(0,W.jsx)(eo.K,{icon:er.GearIcon,"aria-label":"Open diff view settings",variant:"invisible"})}),o[0]=t):t=o[0],o[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,W.jsx)(ec.l.GroupHeading,{children:"Layout"}),o[1]=n):n=o[1],o[2]!==c?(i=()=>c(!0),o[2]=c,o[3]=i):i=o[3],o[4]!==d||o[5]!==i?(a=(0,W.jsx)(ec.l.Item,{selected:d,onSelect:i,children:"Unified"}),o[4]=d,o[5]=i,o[6]=a):a=o[6];let u=!d;return o[7]!==c?(s=()=>c(!1),o[7]=c,o[8]=s):s=o[8],o[9]!==u||o[10]!==s?(r=(0,W.jsx)(ec.l.Item,{selected:u,onSelect:s,children:"Split"}),o[9]=u,o[10]=s,o[11]=r):r=o[11],o[12]!==a||o[13]!==r?(l=(0,W.jsxs)(ed.W,{children:[t,(0,W.jsx)(ed.W.Overlay,{children:(0,W.jsx)(ec.l,{children:(0,W.jsxs)(ec.l.Group,{selectionVariant:"single",children:[n,a,r]})})})]}),o[12]=a,o[13]=r,o[14]=l):l=o[14],l}try{iD.displayName||(iD.displayName="DiffViewSettings")}catch{}let iE=e=>{let t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=e.name||"file",n.click(),URL.revokeObjectURL(t)};function iR(e){let t,n,i,a,s,r,l,o,d,c=(0,z.c)(29),{fileDiff:u}=e,{updateItem:m}=(0,ev.xx)(),h=u.baseFile,f=u.headFile,[p,g]=(0,eh.useState)(!0),y=h.value&&f.value,x=!h.value&&f.value,v=h.value&&!f.value,{linesOfCode:b,size:j}=(0,iI.K3)(x||y?f:h),w=`${x?"Added: ":v?"Deleted: ":""} ${b} `;iS(u,m,"base"),iS(u,m,"head");let _=1===b?"line":"lines";c[0]!==w||c[1]!==j||c[2]!==_?(t=(0,W.jsx)("div",{className:"DiffPreview-module__toolbarLeft--o4LQ6",children:(0,W.jsxs)("p",{className:"DiffPreview-module__toolbarLoC--xR8Qi",children:[w," ",_," \xb7 ",j]})}),c[0]=w,c[1]=j,c[2]=_,c[3]=t):t=c[3],c[4]!==h.reference?(n=h.reference&&"url"in h.reference&&(0,W.jsx)(eo.K,{as:"a","aria-label":"Go to the file",icon:er.LinkExternalIcon,variant:"invisible",href:h.reference.url}),c[4]=h.reference,c[5]=n):n=c[5],c[6]!==f.value?(i=(0,W.jsx)(iN.T,{textToCopy:f.value,ariaLabel:"Copy code",onCopy:iA}),c[6]=f.value,c[7]=i):i=c[7],c[8]!==f.name||c[9]!==f.value?(a=(0,W.jsx)(eo.K,{"aria-label":"Download code",icon:er.DownloadIcon,variant:"invisible",onClick:()=>{let e=f.name;iE(new File([f.value],e)),(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_DOWNLOAD",mode:"immersive"})}}),c[8]=f.name,c[9]=f.value,c[10]=a):a=c[10],c[11]!==y||c[12]!==p?(s=y&&(0,W.jsx)(iD,{setIsUnifiedDiff:g,isUnifiedDiff:p}),c[11]=y,c[12]=p,c[13]=s):s=c[13],c[14]!==n||c[15]!==i||c[16]!==a||c[17]!==s?(r=(0,W.jsxs)("div",{className:"DiffPreview-module__toolbarActions--EAoyT",children:[n,i,a,s]}),c[14]=n,c[15]=i,c[16]=a,c[17]=s,c[18]=r):r=c[18],c[19]!==t||c[20]!==r?(l=(0,W.jsxs)("div",{className:"DiffPreview-module__toolbar--RiBuK",children:[t,r]}),c[19]=t,c[20]=r,c[21]=l):l=c[21];let C=p?"unified":"split";return c[22]!==h||c[23]!==f||c[24]!==C?(o=(0,W.jsx)(iT,{left:h,right:f,view:C}),c[22]=h,c[23]=f,c[24]=C,c[25]=o):o=c[25],c[26]!==o||c[27]!==l?(d=(0,W.jsxs)("div",{className:"DiffPreview-module__container--BN04s",children:[l,o]}),c[26]=o,c[27]=l,c[28]=d):d=c[28],d}function iA(){return(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_COPY",mode:"immersive"})}try{iR.displayName||(iR.displayName="DiffPreview")}catch{}var iO=n(34522),iP=n(72439),iF=n(50899),iM=n(39768),i$=n(84268),iB=n(23125);let iV="FilePreview-module__previewContainer--KRQup",iU="FilePreview-module__footer--o2xcM";var iq=n(74807),iG=n(79634);let iH="ERROR",iK="LOADING",iW="READY";function iz(e,t){e&&e.postMessage&&e.postMessage(JSON.stringify(t),"*")}var iQ=n(71315);function iZ(e){let t,n=(0,z.c)(4),{error:i}=e;if(n[0]!==i){let e,a,s=i?.split(`
`)??[];n[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)("span",{className:"ErrorMessage-module__errorIcon--ODD8l",children:(0,W.jsx)(er.StopIcon,{size:24})}),a=(0,W.jsx)("h2",{className:"ErrorMessage-module__errorHeader--hmJF7",children:"HTML rendering failed"}),n[2]=e,n[3]=a):(e=n[2],a=n[3]),t=(0,W.jsxs)("div",{className:"ErrorMessage-module__error--xol56",children:[e,a,s.length>0?(0,W.jsx)("p",{children:s.map(iJ)}):(0,W.jsx)("p",{children:"Refresh the page or check the HTML"})]}),n[0]=i,n[1]=t}else t=n[1];return t}function iJ(e){return(0,W.jsxs)(W.Fragment,{children:[e,(0,W.jsx)("br",{})]},`error-line-${e}}`)}try{iZ.displayName||(iZ.displayName="ErrorMessage")}catch{}function iY(e){let t,n,i,a,s=(0,z.c)(14),{content:r,inlineScripts:l,inlineStyles:o,headScripts:d,bodyScripts:c,styles:u,viewscreenUrl:m}=e,h=(0,tt.G7)("viewscreen_sandbox");s[0]!==m?(n=new URL("view/sandbox?url=client://sandbox",m).toString(),t=new URL(n,iQ.fV.origin),s[0]=m,s[1]=t,s[2]=n):(t=s[1],n=s[2]);let f=t.origin,p=(0,eh.useRef)(null),g=(0,eh.useRef)(null);s[3]!==c||s[4]!==r||s[5]!==d||s[6]!==l||s[7]!==o||s[8]!==u?(i={content:r,headScripts:d,bodyScripts:c,inlineScripts:l,inlineStyles:o,styles:u},s[3]=c,s[4]=r,s[5]=d,s[6]=l,s[7]=o,s[8]=u,s[9]=i):i=s[9];let{renderState:y,errorMessage:x}=function(e,t,n,i){let a,s,r,l,o,d,c=(0,z.c)(16),[u,m]=(0,eh.useState)(iK),[h,f]=(0,eh.useState)();c[0]!==t||c[1]!==e||c[2]!==i?(a=n=>(function(e,t,n,i,a,s){let r=function(e){var t;let n=e.data;if(!n)return null;if("string"==typeof n)try{n=JSON.parse(n)}catch{return null}return"object"==typeof(t=n)&&t&&"render"===t.type&&"string"==typeof t.body&&"object"==typeof t.payload?n:null}(e);if(!r)return;let l=r.body,o=n.current?.contentWindow;switch(l){case"hello":iz(o,{type:"render:cmd",body:{cmd:"ack",ack:!0}}),iz(o,{type:"render:cmd",body:{cmd:"branding",branding:!1}});break;case"error":case"error:fatal":case"error:invalid":s(iH),r.payload?.error&&a(r.payload.error);break;case"loading":s(iK);break;case"loaded":if(!n.current||!i.current)return;s("LOADED");break;case"ready":if(!n.current||!i.current)return;s(iW)}})(n,0,e,t,f,m),c[0]=t,c[1]=e,c[2]=i,c[3]=a):a=c[3];let p=a;return c[4]!==p?(s=()=>(window.addEventListener("message",p),()=>window.removeEventListener("message",p)),r=[p],c[4]=p,c[5]=s,c[6]=r):(s=c[5],r=c[6]),(0,eh.useEffect)(s,r),c[7]!==t||c[8]!==e||c[9]!==n||c[10]!==u?(l=()=>{if(u===iW&&e.current&&t.current){var i;let a;i=e.current,t.current,a={type:"render:cmd",body:{cmd:"sandbox:data","sandbox:data":{...n}}},iz(i.contentWindow,a)}},o=[t,e,n,u],c[7]=t,c[8]=e,c[9]=n,c[10]=u,c[11]=l,c[12]=o):(l=c[11],o=c[12]),(0,eh.useEffect)(l,o),c[13]!==h||c[14]!==u?(d={renderState:u,errorMessage:h},c[13]=h,c[14]=u,c[15]=d):d=c[15],d}(p,g,i,f);if(!h)return null;for(let e of((0,et.BI)("sandbox_view.activate",{target:"SANDBOX_INITIALIZED",enabled:h}),Array.from(new Set([...d||[],...c||[],...u||[]].map(e=>{try{return new URL(e,f).origin}catch{return null}}).filter(Boolean)))))(0,et.BI)("sandbox_view.activate",{target:"SANDBOX_RESOURCE_ORIGIN",origin:e});return s[10]!==x||s[11]!==y||s[12]!==n?(a=(0,W.jsx)("div",{ref:g,className:"SandboxView-module__container--PAb4m",children:y===iH?(0,W.jsx)(iZ,{error:x}):(0,W.jsx)("iframe",{ref:p,className:"SandboxView-module__iframe--r6S4N",sandbox:"allow-scripts allow-same-origin",title:"Preview page for the user provided code",src:n})}),s[10]=x,s[11]=y,s[12]=n,s[13]=a):a=s[13],a}try{iY.displayName||(iY.displayName="SandboxView")}catch{}function iX(e,t,n){let i=`file:${e}`;if(!n.has(i))return null;let a=n.get(i)??[],s=a[a.length-1];if(!s)return null;let r=t.get(s);return r&&"file"===r.type?r:null}function i0(e){var t;let n,i,a,s,r,l=(0,z.c)(15),{file:o}=e,{previewUrl:d}=(0,iG.X)(),{items:c,versionedItems:u}=(0,ev.xx)(),{scripts:m,styles:h,files:f}=(t=o.value,a=Array.from(t.matchAll(/<script.*?src="(.*?)"/g)).map(e=>e[1]).filter(e=>void 0!==e).map(e=>iX(e,c,u)),s=(function(e){let t=Array.from(e.matchAll(/<link([^>]+)>/g)).map(e=>e[1]).filter(e=>void 0!==e),n=[];for(let e of t){if("stylesheet"!==/rel\s*=\s*"([^"]+)"/.exec(e)?.[1])continue;let t=/href\s*=\s*"([^"]+)"/.exec(e)?.[1];t&&n.push(t)}return n})(t).map(e=>iX(e,c,u)),r=Array.from(t.matchAll(/<script(?![^>]*\bsrc=).*?>(.*?)<\/script>/gms)).map(e=>e[1]).filter(e=>void 0!==e),{scripts:[...a.map(e=>e?.value??""),...r,'document.dispatchEvent(new Event("DOMContentLoaded"))'].join(`
`),styles:s.map(e=>e?.value??"").join(`
`),files:a.concat(s)}),[p,g]=(0,eh.useState)(!1),y=(o.isStreaming||f.some(i1))&&!p;l[0]!==y||l[1]!==g?(n=()=>{if(y){let e=setTimeout(()=>{g(!0)},3e3);return()=>clearTimeout(e)}},l[0]=y,l[1]=g,l[2]=n):n=l[2],(0,eh.useEffect)(n),l[3]!==o.value?(i=function(e){let t=Array.from(e.matchAll(/<script.*?src="(https:\/\/.*?)"/g)).map(e=>e[1]).filter(e=>void 0!==e),n=[],i=[];for(let a of t)e.substring(e.indexOf("<head"),e.indexOf("</head>")).includes(a)?n.push(a):i.push(a);return{headScripts:n,bodyScripts:i,styles:Array.from(e.matchAll(/<link rel="stylesheet" href="(https:\/\/.*?)"/g)).map(e=>e[1]).filter(e=>void 0!==e)}}(o.value),l[3]=o.value,l[4]=i):i=l[4];let{headScripts:x,bodyScripts:v,styles:b}=i;if(y){let e;return l[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsxs)("div",{className:"HtmlPreview-module__loadingContainer--t3YC7",children:[(0,W.jsx)("div",{className:"HtmlPreview-module__loadingHead--XAabR",children:(0,W.jsx)(iq.N,{animationType:"thinking",loopAnimation:!0})}),(0,W.jsx)("p",{className:"HtmlPreview-module__loadingText--WYn1B",children:"Preparing your preview\u2026"})]}),l[5]=e):e=l[5],e}{let e;return l[6]!==v||l[7]!==b||l[8]!==o.id||l[9]!==o.value||l[10]!==x||l[11]!==d||l[12]!==m||l[13]!==h?(e=(0,W.jsx)(iY,{inlineScripts:m,inlineStyles:h,headScripts:x,bodyScripts:v,styles:b,content:o.value,viewscreenUrl:d},o.id),l[6]=v,l[7]=b,l[8]=o.id,l[9]=o.value,l[10]=x,l[11]=d,l[12]=m,l[13]=h,l[14]=e):e=l[14],e}}function i1(e){return!e||e.isStreaming}try{i0.displayName||(i0.displayName="HtmlPreview")}catch{}var i2=n(70840);let i3={code:er.CodeIcon,preview:er.EyeIcon,diff:er.FileDiffIcon};function i4({isPreviewOpening:e,file:t,onClose:n}){var i;let{updateItem:a,items:s,versionedItems:r}=(0,ev.xx)(),l=(0,Q.Pk)(),o=t.isStreaming?l.messages[l.messages.length-1]:l.messages.find(e=>e.id===t.messageId),{linesOfCode:d,isPreviewable:c,size:u}=(0,iI.K3)(t);!function(e,t){let n,i,a,s,r,l,o,d=(0,z.c)(25),{reference:c}=e,u=(0,Z.b)(),m=c?.type;d[0]!==c?(n=c?(0,Y.Vb)(c):void 0,d[0]=c,d[1]=n):n=d[1],d[2]!==m||d[3]!==n?(i=["copilot-reference-preview","copilot","references",m,n],d[2]=m,d[3]=n,d[4]=i):i=d[4],d[5]!==e||d[6]!==u||d[7]!==c||d[8]!==t?(a=async()=>{if(!c||"file"!==c.type||e.value)return null;let n=await u.service.hydrateReference(c);return n.ok?(t({...e,value:n.payload.contents,isStreaming:!1}),n.payload):null},d[5]=e,d[6]=u,d[7]=c,d[8]=t,d[9]=a):a=d[9],d[10]!==i||d[11]!==a?(s={queryKey:i,queryFn:a,staleTime:1/0},d[10]=i,d[11]=a,d[12]=s):s=d[12];let{isLoading:h,isError:f,data:p}=(0,e2.I)(s);d[13]!==p||d[14]!==e||d[15]!==t?(r=()=>{p?.contents&&e.value!==p.contents&&t({...e,value:p.contents,isStreaming:!1})},d[13]=p,d[14]=e,d[15]=t,d[16]=r):r=d[16];let g=p?.contents;d[17]!==e||d[18]!==g||d[19]!==t?(l=[g,e,t],d[17]=e,d[18]=g,d[19]=t,d[20]=l):l=d[20],(0,eh.useEffect)(r,l),d[21]!==p||d[22]!==f||d[23]!==h?(o={isLoading:h,isError:f,data:p},d[21]=p,d[22]=f,d[23]=h,d[24]=o):o=d[24]}(t,a);let[m,h]=(0,eh.useState)("code"),[f,p]=(0,eh.useState)(!0),[g,y]=(0,eh.useState)(void 0),x=(0,eh.useCallback)(e=>{y(e)},[]),v=(0,eD.SX)(t,s,r),b=!!v;(0,eh.useEffect)(()=>{(o?.error?.type==="publicCode"||o?.error?.type==="filtered")&&n()},[o?.error,n]);let j=[["code","Code"]],w="code";c&&(j.unshift(["preview","Preview"]),w="preview"===m?"preview":w),b&&(j.push(["diff","Diff"]),w="diff"===m?"diff":w);let _="object"==typeof(i=t.reference)&&null!==i&&"repoOwner"in i&&"repoName"in i&&"string"==typeof i.repoOwner&&"string"==typeof i.repoName?`${t.reference.repoOwner}/${t.reference.repoName}/${t.name}`:t.name;return(0,W.jsxs)("div",{className:"FilePreview-module__container--P2h3J",children:[(0,W.jsxs)("div",{className:"FilePreview-module__toolbar--ZZWN1",children:[(0,W.jsxs)("div",{className:"FilePreview-module__toolbarLeft--RCKxW",children:[(c||b)&&(0,W.jsx)(iM.I,{"aria-label":"File view",size:"small",onChange:e=>{let t=j[e]?.[0]||"code";h(t),(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_VIEW_OPTION",option:t})},children:j.map(([e,t])=>{let n=i3[e];return X.W.copilotLinkableFilePaths?(0,W.jsx)(iM.I.IconButton,{"aria-label":t,icon:(0,W.jsx)(n,{size:"small"}),selected:m===e},e):(0,W.jsx)(iM.I.Button,{selected:m===e,children:t},e)})}),(0,W.jsx)(eE,{item:t,onVersionSelect:x}),X.W.copilotLinkableFilePaths&&(0,W.jsx)(i8,{file:t}),(!X.W.copilotLinkableFilePaths||!t.reference||!("url"in t.reference))&&(0,W.jsxs)("p",{className:"FilePreview-module__toolbarLoC--I7tcY",children:[d," ",1===d?"line":"lines"," \xb7 ",u]})]}),(0,W.jsxs)("div",{className:"FilePreview-module__toolbarActions--h04aW",children:[t.reference&&"url"in t.reference&&(0,W.jsx)(eo.K,{as:"a","aria-label":"Go to the file",icon:er.LinkExternalIcon,variant:"invisible",href:t?.reference?.url,size:"small"}),(0,W.jsx)(iN.T,{textToCopy:t.value,ariaLabel:"Copy code",onCopy:()=>(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_COPY",mode:"immersive"}),size:"small"}),(0,W.jsx)(eo.K,{"aria-label":"Download code",icon:er.DownloadIcon,variant:"invisible",onClick:()=>{let e=(()=>{let e=t.name.lastIndexOf(".");if(e>0){let n=t.name.substring(0,e),i=t.name.substring(e);return void 0!==g?`${n}_${g}${i}`:t.name}return void 0!==g?`${t.name}_${g}`:t.name})();iE(new File([t.value],e)),(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_DOWNLOAD",mode:"immersive"})},size:"small"}),"diff"===w&&(0,W.jsx)(iD,{isUnifiedDiff:f,setIsUnifiedDiff:p})]})]}),(0,W.jsx)("div",{className:"FilePreview-module__content--HoIot",children:"preview"===w?(0,W.jsx)(i7,{file:t}):"diff"===w?(0,W.jsx)(iT,{left:v,right:t,view:f?"unified":"split"}):(0,W.jsx)(i6,{file:t,isPreviewOpening:e})}),!X.W.copilotLinkableFilePaths&&(0,W.jsx)("footer",{className:iU,children:(0,W.jsx)("span",{"aria-live":"polite",children:_})})]})}let i5=(0,iB.A)((e,t,n)=>{n({...e,value:t})},500,{leading:!1,trailing:!0});function i6({file:e,isPreviewOpening:t}){var n,i;let a,{openItem:s,updateItem:r,versionedItems:l}=(0,ev.xx)(),o=(0,Z.b)(),d=(0,eh.useRef)(!1),c=(n=l,i=e,(a=n.get((0,eD.oy)(i.id))??[])[a.length-1]===i.id),u=!e.reference||"thread-scoped-file"===e.reference.type,m=u&&!e.isStreaming&&c,h=(0,eh.useId)(),f=(0,iL.a)(e),[p,g]=(0,eh.useState)(),y=p?.id===e.id?p.value:e.value,[x,v]=(0,eh.useState)(!0),{messages:b,currentReferences:j}=(0,Q.Pk)(),w=(0,eh.useRef)(""),_=(0,eh.useRef)(null),[C,N]=(0,eh.useState)(void 0);(0,eh.useEffect)(()=>{!j||j.some(t=>"thread-scoped-snippet"===t.type&&t.name===e.name)||N(null)},[j,e.name]);let S=(0,eh.useMemo)(()=>{if(!X.W.selectionAttachments)return;let t=iP.E.getAttachmentSizeLimit();return{debounceMs:0,onSelection:({view:n,text:i,fromLine:a,toLine:s})=>{if(!i||""===i.trim()||!o)return;let r=n.state.doc.line(a),l=n.state.doc.line(s),d=r.from,c=l.to,u=n.state.doc.sliceString(d,c),m=`${e.id}:${d}-${c}:${e.value.length}`;if(w.current===m||new Blob([u]).size>t)return;let h={type:"thread-scoped-snippet",name:e.name,snippetText:u,language:e.language||"text",range:{start:a,end:s}};_.current?o.replaceReference(_.current,h):o.addReference(h,"immersive-selection"),_.current=h,N({from:d,to:c}),w.current=m},onClear:()=>{w.current&&(o&&_.current&&o.removeReference(_.current),w.current="",_.current=null,N(null))}}},[e.id,e.name,e.value,e.language,o]);(0,eh.useEffect)(()=>{o&&_.current&&o.removeReference(_.current),_.current=null,w.current="",N(null)},[e.id,o]),(0,eh.useEffect)(()=>()=>{o&&_.current&&o.removeReference(_.current),_.current=null,w.current=""},[o]),(0,eh.useEffect)(()=>{v(!1)},[]),(0,eh.useEffect)(()=>{t&&(d.current=!0)},[t]);let I=(0,iF.K)((0,eh.useCallback)(t=>{if(m&&t!==e.value)if(e.isUserEdited)g({value:t,id:e.id}),i5(e,t,r);else{let n={...e,messageId:tp.Wp,id:`file:${e.name}#${b.length}`,timestamp:new Date,isUserEdited:!0,value:t};r(n),s(n.id),g({value:t,id:n.id})}},[e,m,b.length,s,r]));return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)("span",{id:h,className:"sr-only",children:[e.name," file contents"]}),(0,W.jsx)(iO.default,{ariaLabelledBy:h,containerClassName:"FilePreview-module__codeMirrorContainer--lxGn_",fileName:e.name,height:"100%",isReadOnly:!m,spacing:f,value:x?"":y,onChange:I,focusNextRenderRef:d,placeholder:"Loading...",hideHelp:!0,selectionListenerOptions:S,selectionAttachmentRange:C}),u&&!c&&(0,W.jsx)("div",{className:iU,children:"Switch to the latest version to edit this file."})]})}function i7({file:e}){return"markdown"===e.language?(0,W.jsx)("div",{className:iV,children:(0,W.jsx)(i2.G,{content:e})}):"html"===e.language?(0,W.jsx)("div",{className:iV,children:(0,W.jsx)(i0,{file:e})}):null}function i8({file:e}){let t=e.reference;if(!t||"file"!==t.type||!t.url)return null;let n=(0,iI.as)(t.url);if(!n)return null;let{repoOwner:i,repoName:a,filePath:s}=n;return(0,W.jsx)("div",{className:"FilePreview-module__fileLinkContainer--FTT5B",children:(0,W.jsx)(i$.A,{className:"FilePreview-module__filePath--rER6j",href:t.url,rel:"noopener noreferrer",children:(0,iI.L2)(i,a,s)})})}try{i4.displayName||(i4.displayName="FilePreview")}catch{}try{i6.displayName||(i6.displayName="CodeMirrorView")}catch{}try{i7.displayName||(i7.displayName="PreviewComponent")}catch{}try{i8.displayName||(i8.displayName="FileLink")}catch{}function i9(e){let t,n=(0,z.c)(3),{image:i}=e;return n[0]!==i.altText||n[1]!==i.url?(t=(0,W.jsx)("div",{className:"ImagePreview-module__container--lxQZb",children:(0,W.jsx)("img",{className:"ImagePreview-module__imageElement--WTRgY",src:i.url,alt:i.altText})}),n[0]=i.altText,n[1]=i.url,n[2]=t):t=n[2],t}try{i9.displayName||(i9.displayName="ImagePreview")}catch{}let ae=(0,eh.memo)(function(e){let t,n,i,a,s,r,l=(0,z.c)(17),{isPreviewOpening:o,issue:d,onClose:c}=e,[u,m]=(0,eh.useState)(o);l[0]!==u?(t=()=>{if(u){let e=setTimeout(()=>m(!1),ek.t);return()=>clearTimeout(e)}},n=[u],l[0]=u,l[1]=t,l[2]=n):(t=l[1],n=l[2]),(0,eh.useEffect)(t,n),l[3]!==d.href?(i=(0,W.jsx)(eo.K,{icon:er.LinkExternalIcon,variant:"invisible","aria-label":"Open issue in new tab",onClick:()=>{window.open(d.href,"_blank")}}),l[3]=d.href,l[4]=i):i=l[4];let h=i;l[5]!==c||l[6]!==h?(a={navigate:tB.l,insideSidePanel:!0,shouldSkipSetDocumentTitle:!0,useViewportQueries:!1,onIssueDelete:c,additionalHeaderActions:h,showRepositoryPill:!0},l[5]=c,l[6]=h,l[7]=a):a=l[7];let f=a;l[8]!==d.number||l[9]!==d.owner||l[10]!==d.repo?(s={owner:d.owner,repo:d.repo,number:d.number,type:"Issue"},l[8]=d.number,l[9]=d.owner,l[10]=d.repo,l[11]=s):s=l[11];let p=s;if(u){let e;return l[12]!==f?(e=(0,W.jsx)(e_.Q,{optionConfig:f}),l[12]=f,l[13]=e):e=l[13],e}return l[14]!==p||l[15]!==f?(r=(0,W.jsx)("div",{className:"IssuePreview-module__container--O4xBI",children:(0,W.jsx)(n6.e,{children:(0,W.jsx)(n5.cI,{itemIdentifier:p,optionConfig:f})})}),l[14]=p,l[15]=f,l[16]=r):r=l[16],r});try{ae.displayName||(ae.displayName="IssuePreview")}catch{}function at(e){e.stopPropagation()}function an(e){let t,n,i,a,s=(0,z.c)(7),{jobResult:r}=e,l=eh.useRef(null),[o,d]=(0,eh.useState)(null),[c,u]=(0,eh.useState)(null);s[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{e.detail.fetchResponse.succeeded||(u("Failed to load markdown preview"),e.preventDefault(),e.stopPropagation())},s[0]=t):t=s[0];let m=t;return s[1]!==r?(n=()=>{if(l.current){var e;let t,n,i=l.current;return i.addEventListener("turbo:before-fetch-request",at),i.addEventListener("turbo:before-fetch-response",m),d((t=[(e=r).repoOwner,e.repoName,"actions","runs",e.workflowId,"job",e.jobId],(n=new URL(`/${t.map(String).map(encodeURIComponent).join("/")}`,window.location.origin)).searchParams.set("partial","true"),n.toString())),()=>{i.removeEventListener("turbo:before-fetch-request",at),i.removeEventListener("turbo:before-fetch-response",m)}}},i=[m,r],s[1]=r,s[2]=n,s[3]=i):(n=s[2],i=s[3]),(0,eh.useEffect)(n,i),s[4]!==c||s[5]!==o?(a=(0,W.jsx)("div",{className:"JobResultPreview-module__container--ITPQp",children:c?(0,W.jsxs)("div",{className:"JobResultPreview-module__error--UiqJQ",children:[(0,W.jsx)("span",{className:"JobResultPreview-module__errorIcon--Gr5_m",children:(0,W.jsx)(er.StopIcon,{size:24})}),(0,W.jsx)("h2",{className:"JobResultPreview-module__errorHeader--u1d_F",children:"Failed to load job results"})]}):(0,W.jsx)("turbo-frame",{src:o,ref:l,id:"workflow_run_content",target:"_top",children:(0,W.jsx)("div",{className:"JobResultPreview-module__spinner--NGGeF",children:(0,W.jsx)(eP.A,{srText:"Loading Markdown preview\u2026"})})})}),s[4]=c,s[5]=o,s[6]=a):a=s[6],a}try{an.displayName||(an.displayName="JobResultPreview")}catch{}var ai=n(97189),aa=n(73783);function as(e){let t,n,i,a,s,r,l,o,d,c,u,m,h,f,p=(0,z.c)(18),{spec:g}=e,[y,x]=(0,eh.useState)(!1),{createBreakdown:v}=(u=(0,z.c)(6),m=(0,Z.b)(),h=(0,Q.Pk)(),u[0]!==m||u[1]!==g||u[2]!==h?(d=async e=>{let t=g.name||g.tag;(0,et.BI)("copilot.planning_tasklist",{target:`PLANNING_TASK_SPEC_BREAKDOWN_${e.toUpperCase()}`,mode:"immersive",threadId:(0,tg.W)(h)?.id,messageId:g.messageId});let n={type:"text",name:`timeline-event: {"type": "planning-breakdown", "markdownContent": "Breaking down '${t}' into ${e}s..."}`},i="task"===e?`
Break down the ${g.tag} spec into tasks.
`:`
Break down the ${g.tag} spec into tasks, but instead of returning a task list, create an issue for each task.
- The issues should be nested under one parent issue, which is a feature-level issue containing the ${g.tag} spec contents. The name should be the same as the spec name.
- Issues should be blocked by their logical dependencies.
`;await m.sendChatMessage({thread:(0,tg.W)(h),content:i,references:[n],topic:h.currentTopic,context:h.context,customInstructions:h.customInstructions,model:h.model,intent:tp.wh.planningAgent})},u[0]=m,u[1]=g,u[2]=h,u[3]=d):d=u[3],f=d,u[4]!==f?(c={createBreakdown:f},u[4]=f,u[5]=c):c=u[5],c),b=g.isStreaming||!g.content;return p[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,W.jsx)("div",{className:"SpecPreviewFooter-module__footerText--NBYrK",children:"Consider breaking this up into multiple tasks"}),p[0]=t):t=p[0],p[1]!==v?(n=()=>v("task"),p[1]=v,p[2]=n):n=p[2],p[3]!==b||p[4]!==n?(i=(0,W.jsx)(eF.Q,{className:"SpecPreviewFooter-module__button--jMuoa",leadingVisual:er.TasklistIcon,onClick:n,disabled:b,inactive:b,children:"Break down into smaller tasks"}),p[3]=b,p[4]=n,p[5]=i):i=p[5],p[6]===Symbol.for("react.memo_cache_sentinel")?(a=(0,W.jsx)("div",{className:"SpecPreviewFooter-module__divider--U_nTw"}),p[6]=a):a=p[6],p[7]!==b?(s=(0,W.jsx)(ed.W.Anchor,{children:(0,W.jsx)(eo.K,{"aria-label":"Task break down options\u2026",className:"SpecPreviewFooter-module__menuButton--r_s5t",icon:er.TriangleDownIcon,disabled:b,inactive:b})}),p[7]=b,p[8]=s):s=p[8],p[9]!==v?(r=(0,W.jsx)(ed.W.Overlay,{children:(0,W.jsx)(ec.l,{children:(0,W.jsx)(ec.l.Item,{onSelect:()=>v("issue"),children:"Break down into issues"})})}),p[9]=v,p[10]=r):r=p[10],p[11]!==y||p[12]!==s||p[13]!==r?(l=(0,W.jsxs)(ed.W,{open:y,onOpenChange:x,children:[s,r]}),p[11]=y,p[12]=s,p[13]=r,p[14]=l):l=p[14],p[15]!==i||p[16]!==l?(o=(0,W.jsxs)("div",{className:"SpecPreviewFooter-module__footer--M1fJw",children:[t,(0,W.jsxs)(aa.A,{className:"SpecPreviewFooter-module__buttonGroup--ZKWsL",children:[i,a,l]})]}),p[15]=i,p[16]=l,p[17]=o):o=p[17],o}try{as.displayName||(as.displayName="SpecPreviewFooter")}catch{}function ar(e){let t,n,i,a=(0,z.c)(7),{error:s,onDismiss:r}=e,[l,o]=(0,eh.useState)(0);return a[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{o(al)},a[0]=t):t=a[0],a[1]!==s?(n=[s],a[1]=s,a[2]=n):n=a[2],(0,eh.useEffect)(t,n),a[3]!==l||a[4]!==s.message||a[5]!==r?(i=(0,W.jsx)(eS.l,{"aria-atomic":"true",role:"alert",variant:"critical",title:"Failed to start task",hideTitle:!0,description:s.message,onDismiss:r},l),a[3]=l,a[4]=s.message,a[5]=r,a[6]=i):i=a[6],i}function al(e){return e+1}try{ar.displayName||(ar.displayName="TaskErrorBanner")}catch{}var ao=n(62189),ad=n(91747);let ac=(0,eh.forwardRef)((e,t)=>{let n,i,a,s,r,l,o,d=(0,z.c)(23),{children:c,inactive:u,isLoading:m,isMenuOpen:h,loadingAnnouncement:f,menuItems:p,onMenuOpenChange:g,onStartClick:y,primaryButtonText:x}=e,v=void 0===f?"Starting task\u2026":f,b=void 0===x?"Start agent task":x;return d[0]!==u||d[1]!==m||d[2]!==v||d[3]!==y||d[4]!==b||d[5]!==t?(n=(0,W.jsx)(eF.Q,{className:"TaskActions-module__button--mfKv1",inactive:u,leadingVisual:er.AgentIcon,loading:m,loadingAnnouncement:v,onClick:y,ref:t,variant:"primary",children:b}),d[0]=u,d[1]=m,d[2]=v,d[3]=y,d[4]=b,d[5]=t,d[6]=n):n=d[6],d[7]===Symbol.for("react.memo_cache_sentinel")?(i=(0,W.jsx)("div",{className:"TaskActions-module__divider--mfTun"}),d[7]=i):i=d[7],d[8]!==m?(a=(0,W.jsx)(ed.W.Anchor,{"aria-label":"Task options",children:(0,W.jsx)(eo.K,{"aria-label":"Task options\u2026",className:"TaskActions-module__menuButton--KexmI",disabled:m,icon:er.TriangleDownIcon,variant:"primary"})}),d[8]=m,d[9]=a):a=d[9],d[10]!==p?(s=p.map(au),d[10]=p,d[11]=s):s=d[11],d[12]!==s?(r=(0,W.jsx)(ed.W.Overlay,{children:(0,W.jsx)(ec.l,{children:s})}),d[12]=s,d[13]=r):r=d[13],d[14]!==h||d[15]!==g||d[16]!==a||d[17]!==r?(l=(0,W.jsxs)(ed.W,{open:h,onOpenChange:g,children:[a,r]}),d[14]=h,d[15]=g,d[16]=a,d[17]=r,d[18]=l):l=d[18],d[19]!==c||d[20]!==n||d[21]!==l?(o=(0,W.jsxs)(aa.A,{className:"TaskActions-module__buttonGroup--HfUFm",children:[n,c,i,l]}),d[19]=c,d[20]=n,d[21]=l,d[22]=o):o=d[22],o});function au(e){return(0,W.jsx)(ec.l.Item,{disabled:e.disabled,onSelect:e.onSelect,children:e.label},e.label)}ac.displayName="TaskActions";var am=n(65529),ah=n(63685),af=n(25811),ap=n(66990),ag=n(86877),ay=n(82156),ax=n(44095);function av(e){var t,n;let i,a,s,r,l,o,d,c,u,m,h,f,p,g,y,x,v,b,j,w,_,C,N,S,I,k,L=(0,z.c)(52),{previewItem:T,initialRepo:D,topRepos:E,onStart:R,onCancel:A}=e,[O,P]=(0,eh.useState)(D),[F,M]=(0,eh.useState)(""),[$,B]=(0,eh.useState)(""),[V,U]=(0,af.s)();L[0]===Symbol.for("react.memo_cache_sentinel")?(i=(0,tt.G7)("copilot_swe_agent_use_subagents"),L[0]=i):i=L[0];let q=i&&$,{data:G,isLoading:H}=(t=O?.owner?.login,n=O?.name,I=(0,z.c)(13),k=(0,eQ.useRelayEnvironment)(),I[0]!==k?(_=JSON.stringify(k),I[0]=k,I[1]=_):_=I[1],I[2]!==n||I[3]!==t||I[4]!==_?(C=["repository-default-branch",_,t,n],I[2]=n,I[3]=t,I[4]=_,I[5]=C):C=I[5],I[6]!==k||I[7]!==n||I[8]!==t?(N=async()=>t&&n?tr(k,t,n):null,I[6]=k,I[7]=n,I[8]=t,I[9]=N):N=I[9],I[10]!==C||I[11]!==N?(S={queryKey:C,queryFn:N},I[10]=C,I[11]=N,I[12]=S):S=I[12],(0,e2.I)(S));L[1]!==G?(a=()=>{null!=G?(M(G),B(G)):M("")},s=[G],L[1]=G,L[2]=a,L[3]=s):(a=L[2],s=L[3]),(0,eh.useEffect)(a,s),L[4]===Symbol.for("react.memo_cache_sentinel")?(r=e=>{B(e)},L[4]=r):r=L[4];let K=r;L[5]===Symbol.for("react.memo_cache_sentinel")?(l=e=>{P(e)},L[5]=l):l=L[5];let Q=l;L[6]!==R||L[7]!==V||L[8]!==$||L[9]!==O?(o=()=>{R(O,$,V)},L[6]=R,L[7]=V,L[8]=$,L[9]=O,L[10]=o):o=L[10];let Z=o,J=!!O&&!!$;L[11]!==A?(d={buttonType:"default",content:"Cancel",onClick:A},L[11]=A,L[12]=d):d=L[12];let Y=!J;L[13]!==Z||L[14]!==Y?(c={buttonType:"primary",content:"Start",onClick:Z,disabled:Y},L[13]=Z,L[14]=Y,L[15]=c):c=L[15],L[16]!==d||L[17]!==c?(u=[d,c],L[16]=d,L[17]=c,L[18]=u):u=L[18],L[19]===Symbol.for("react.memo_cache_sentinel")?(m=(0,W.jsx)(ag.A.Label,{children:"Target repository"}),L[19]=m):m=L[19];let X=O||void 0;if(L[20]===Symbol.for("react.memo_cache_sentinel")?(h={includeForks:!0},L[20]=h):h=L[20],L[21]!==X||L[22]!==E?(f=(0,W.jsxs)(ag.A,{children:[m,(0,W.jsx)(eG.f0,{initialRepository:X,onSelect:Q,topRepositories:E,enforceAtleastOneSelected:!0,options:h,preventDefault:!0,responsiveOnNarrow:!0})]}),L[21]=X,L[22]=E,L[23]=f):f=L[23],L[24]===Symbol.for("react.memo_cache_sentinel")?(p=(0,W.jsx)(ag.A.Label,{children:"Base branch"}),L[24]=p):p=L[24],L[25]!==H||L[26]!==F||L[27]!==$||L[28]!==O?(g=(0,W.jsxs)(ag.A,{children:[p,O||$?(0,W.jsx)(ap.PI,{useFocusZone:!0,cacheKey:"brainstorm-start-task-ref-selector",canCreate:!1,currentCommitish:F?$:"None available",defaultBranch:F,owner:O?.owner?.login||"",repo:O?.name||"",types:["branch"],selectedRefType:"branch",closeOnSelect:!0,hideShowAll:!0,disabled:H,onSelectItem:K,anchoredOverlayProps:{variant:{regular:"anchored",narrow:"fullscreen"},height:"small"}}):(0,W.jsx)(ay.f,{height:"32px",width:"100px"})]}),L[25]=H,L[26]=F,L[27]=$,L[28]=O,L[29]=g):g=L[29],L[30]!==H||L[31]!==F||L[32]!==V||L[33]!==$||L[34]!==O||L[35]!==U||L[36]!==q)y=q&&O&&(0,W.jsxs)(ag.A,{children:[(0,W.jsx)(ag.A.Label,{children:"Custom agent"}),(0,W.jsx)(ah.b,{repo:{id:O.databaseId||0,graphQLId:O.id,name:O.nameWithOwner,nameWithOwner:O.nameWithOwner,nameOnly:O.name,owner:O.owner.login,private:O.isPrivate||!1,defaultBranch:F||"",isEmpty:!1,enabled:!0},branch:$,selectedAgent:V,onSelectAgent:e=>U(e),iconOnly:!1,disabled:H})]}),L[30]=H,L[31]=F,L[32]=V,L[33]=$,L[34]=O,L[35]=U,L[36]=q,L[37]=y;else y=L[37];return L[38]!==f||L[39]!==g||L[40]!==y?(x=(0,W.jsxs)("div",{className:"StartTaskDialog-module__selectorsRow--t23fd",children:[f,g,y]}),L[38]=f,L[39]=g,L[40]=y,L[41]=x):x=L[41],L[42]===Symbol.for("react.memo_cache_sentinel")?(v=(0,W.jsx)(ag.A.Label,{children:"Task"}),L[42]=v):v=L[42],L[43]!==T?(b=(0,W.jsx)("div",{className:"StartTaskDialog-module__taskContainer--jUtk2",children:(0,W.jsxs)(ag.A,{children:[v,(0,W.jsx)(ax.m,{previewItem:T})]})}),L[43]=T,L[44]=b):b=L[44],L[45]!==x||L[46]!==b?(j=(0,W.jsxs)("div",{className:"StartTaskDialog-module__formContainer--fvFyc",children:[x,b]}),L[45]=x,L[46]=b,L[47]=j):j=L[47],L[48]!==A||L[49]!==u||L[50]!==j?(w=(0,W.jsx)(eO.l,{width:"xlarge",title:"Start task",onClose:A,footerButtons:u,children:j}),L[48]=A,L[49]=u,L[50]=j,L[51]=w):w=L[51],w}try{av.displayName||(av.displayName="StartTaskDialog")}catch{}function ab(e){let t,n,i,a,s,r,l,o,d,c,u,m,h,f,p,g,y,x,v,b,j,w,_,C,N,S=(0,z.c)(37),{spec:I,onError:k}=e,[L,T]=(0,eh.useState)(!1),[D,E]=(0,eh.useState)(!1);S[0]!==I?(t={messageId:I.messageId,name:I.name,isUserEdited:I.isUserEdited,tag:I.tag,repository:I.repository,type:"planning-task",id:I.id.replace("planning-spec:","planning-task:"),description:I.content,isStreaming:I.isStreaming,dependencyTags:void 0,subtaskTags:void 0,aggregateTag:void 0},S[0]=I,S[1]=t):t=S[1];let R=t,{repositoryData:A,isLoading:O}=function(e){let t,n,i,a,s,r,l=(0,z.c)(18);l[0]!==e.repository?(t=e.repository?.split("/")??[],l[0]=e.repository,l[1]=t):t=l[1];let[o,d]=t,c=(0,eQ.useRelayEnvironment)();l[2]!==c?(n=JSON.stringify(c),l[2]=c,l[3]=n):n=l[3],l[4]!==o||l[5]!==d||l[6]!==n?(i=["copilot-immersive-spec-repo",n,o,d],l[4]=o,l[5]=d,l[6]=n,l[7]=i):i=l[7],l[8]!==c||l[9]!==o||l[10]!==d?(a=async()=>o&&d?await (0,eG.tZ)(c,o,d):null,l[8]=c,l[9]=o,l[10]=d,l[11]=a):a=l[11],l[12]!==i||l[13]!==a?(s={queryKey:i,queryFn:a},l[12]=i,l[13]=a,l[14]=s):s=l[14];let{data:u,isLoading:m}=(0,e2.I)(s);return l[15]!==m||l[16]!==u?(r={repositoryData:u,isLoading:m},l[15]=m,l[16]=u,l[17]=r):r=l[17],r}(I),{isLoading:P,data:F}=(x=(0,z.c)(9),v=(0,eQ.useRelayEnvironment)(),x[0]!==v?(f=JSON.stringify(v),x[0]=v,x[1]=f):f=x[1],x[2]!==f?(p=["copilot-immersive-spec-top-repos",f],x[2]=f,x[3]=p):p=x[3],x[4]!==v?(g=async()=>await (0,eG.St)(v,{first:10,hasIssuesEnabled:!0}),x[4]=v,x[5]=g):g=x[5],x[6]!==p||x[7]!==g?(y={queryKey:p,queryFn:g},x[6]=p,x[7]=g,x[8]=y):y=x[8],(0,e2.I)(y)),{start:M,error:$}=(0,am.vQ)(R),{pullRequest:B,isLoading:V}=(0,am.as)(R),{createIssue:U}=(w=(0,z.c)(6),_=(0,Z.b)(),C=(0,Q.Pk)(),w[0]!==_||w[1]!==I||w[2]!==C?(b=async()=>{let e=I.name||I.tag,t=(0,tg.W)(C);(0,et.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_SPEC_CREATE_ISSUE",mode:"immersive",threadId:t?.id,messageId:I.messageId});let n={type:"text",name:`timeline-event: {"type": "planning-spec-to-issue", "markdownContent": "Drafting '${e}' spec as an issue..."}`},i=`
Create an issue based on the ${I.tag} spec${I.repository?` in the ${I.repository} repository`:""}.
- The issue title should be the same as the spec name.
- Use the spec content to draft the issue body. The issue body should include the full spec content and any relevant implementation details.
`;await _.sendChatMessage({thread:t,content:i,references:[n],topic:C.currentTopic,context:C.context,customInstructions:C.customInstructions,model:C.model,intent:tp.wh.planningAgent})},w[0]=_,w[1]=I,w[2]=C,w[3]=b):b=w[3],N=b,w[4]!==N?(j={createIssue:N},w[4]=N,w[5]=j):j=w[5],j);S[2]!==$||S[3]!==k?(n=()=>{k?.($)},i=[$,k],S[2]=$,S[3]=k,S[4]=n,S[5]=i):(n=S[4],i=S[5]),(0,eh.useEffect)(n,i);let q=(0,ad.u)("copilot_swe_agent_progress_commands");S[6]!==q||S[7]!==B?(a=B?q?(0,ao.U)(B.global_relay_id):`/${B.repository_nwo}/pull/${B.number}`:void 0,S[6]=q,S[7]=B,S[8]=a):a=S[8];let G=a,H=q?"View task":"View pull request",K=I.isStreaming??!1;S[9]!==I.content?(s=I.content?.trim(),S[9]=I.content,S[10]=s):s=S[10];let J=K||O||P||V,Y=!s||J;S[11]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{E(!0)},S[11]=r):r=S[11];let X=r;S[12]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{E(!1)},S[12]=l):l=S[12];let ee=l;S[13]!==M?(o=(e,t,n)=>{M({nameWithOwner:e.nameWithOwner,branch:t,subAgent:n?.subAgentSlug}),E(!1)},S[13]=M,S[14]=o):o=S[14];let en=o;S[15]!==U?(d=()=>{U()},S[15]=U,S[16]=d):d=S[16];let ei=d;if(B){let e;return S[17]!==G||S[18]!==H?(e=(0,W.jsx)(eF.Q,{as:"a",href:G,variant:"primary",size:"small",children:H}),S[17]=G,S[18]=H,S[19]=e):e=S[19],e}let ea=Y||A?.hasIssuesEnabled===!1;return S[20]!==ei||S[21]!==ea?(c=[{label:"Create issue",onSelect:ei,disabled:ea}],S[20]=ei,S[21]=ea,S[22]=c):c=S[22],S[23]!==Y||S[24]!==J||S[25]!==L||S[26]!==c?(u=(0,W.jsx)(ac,{inactive:Y,isLoading:J,isMenuOpen:L,loadingAnnouncement:"Loading spec\u2026",menuItems:c,onMenuOpenChange:T,onStartClick:X,primaryButtonText:"Start task"}),S[23]=Y,S[24]=J,S[25]=L,S[26]=c,S[27]=u):u=S[27],S[28]!==en||S[29]!==D||S[30]!==A||S[31]!==I||S[32]!==F?(m=D&&(0,W.jsx)(av,{previewItem:I,initialRepo:A,topRepos:F||[],onStart:en,onCancel:ee}),S[28]=en,S[29]=D,S[30]=A,S[31]=I,S[32]=F,S[33]=m):m=S[33],S[34]!==u||S[35]!==m?(h=(0,W.jsxs)(W.Fragment,{children:[u,m]}),S[34]=u,S[35]=m,S[36]=h):h=S[36],h}try{ab.displayName||(ab.displayName="SpecActions")}catch{}function aj(e){let t,n,i,a,s,r,l,o,d,c,u,m,h,f,p,g,y,x,v,b,j,w=(0,z.c)(60),{spec:_,linesOfCode:C,size:N,isDiffable:S,onViewModeChange:I}=e,{selectedThreadID:k}=(0,Q.Pk)(),[L,T]=(0,eh.useState)("preview"),[D,E]=(0,eh.useState)(void 0),[R,A]=(0,eh.useState)(null),[O,P]=(0,eh.useState)(null),F=R&&R!==O;w[0]!==R?(t=()=>{P(R)},w[0]=R,w[1]=t):t=w[1];let M=t;w[2]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{A(e)},w[2]=n):n=w[2];let $=n;if(w[3]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{P(null)},w[3]=i):i=w[3],w[4]!==_.id?(a=[_.id],w[4]=_.id,w[5]=a):a=w[5],(0,eh.useEffect)(i,a),w[6]===Symbol.for("react.memo_cache_sentinel")?(s=["preview","Preview"],w[6]=s):s=w[6],w[7]!==S){if(r=[s],S){let e;w[9]===Symbol.for("react.memo_cache_sentinel")?(e=["diff","Diff"],w[9]=e):e=w[9],r.push(e)}w[7]=S,w[8]=r}else r=w[8];let B=r;w[10]===Symbol.for("react.memo_cache_sentinel")?(l=e=>{E(e)},w[10]=l):l=w[10];let V=l;w[11]!==B||w[12]!==I||w[13]!==_.messageId||w[14]!==k?(o=e=>{let t=B[e]?.[0]||"preview";T(t),I(t),(0,et.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_SPEC_CHANGE_VIEW_MODE",option:t,threadId:k,messageId:_.messageId})},w[11]=B,w[12]=I,w[13]=_.messageId,w[14]=k,w[15]=o):o=w[15];let U=o;w[16]!==D||w[17]!==_.content||w[18]!==_.messageId||w[19]!==_.tag||w[20]!==k?(d=()=>{let e,t=(e=_.tag,void 0!==D?`${e}_${D}.md`:`${e}.md`);iE(new File([_.content],t)),(0,et.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_SPEC_DOWNLOAD_FILE",mode:"immersive",threadId:k,messageId:_.messageId})},w[16]=D,w[17]=_.content,w[18]=_.messageId,w[19]=_.tag,w[20]=k,w[21]=d):d=w[21];let q=d;w[22]!==_.messageId||w[23]!==k?(c=()=>{(0,et.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_SPEC_COPY_CODE",mode:"immersive",threadId:k,messageId:_.messageId})},w[22]=_.messageId,w[23]=k,w[24]=c):c=w[24];let G=c;w[25]!==R||w[26]!==M||w[27]!==F?(u=F&&(0,W.jsx)(ar,{error:R,onDismiss:M}),w[25]=R,w[26]=M,w[27]=F,w[28]=u):u=w[28],w[29]!==B||w[30]!==U||w[31]!==L?(m=B.length>1&&(0,W.jsx)(iM.I,{"aria-label":"Spec view",onChange:U,children:B.map(e=>{let[t,n]=e;return(0,W.jsx)(iM.I.Button,{selected:L===t,children:n},t)})}),w[29]=B,w[30]=U,w[31]=L,w[32]=m):m=w[32],w[33]!==_?(h=(0,W.jsx)(eE,{item:_,onVersionSelect:V}),w[33]=_,w[34]=h):h=w[34];let H=1===C?"line":"lines";return w[35]!==C||w[36]!==N||w[37]!==H?(f=(0,W.jsxs)("p",{className:"SpecToolbar-module__toolbarLoC--Zemt9 FilePreview-module__toolbarLoC--I7tcY",children:[C," ",H," \xb7 ",N]}),w[35]=C,w[36]=N,w[37]=H,w[38]=f):f=w[38],w[39]!==m||w[40]!==h||w[41]!==f?(p=(0,W.jsxs)("div",{className:"SpecToolbar-module__toolbarLeft--R4qo5 FilePreview-module__toolbarLeft--RCKxW",children:[m,h,f]}),w[39]=m,w[40]=h,w[41]=f,w[42]=p):p=w[42],w[43]!==G||w[44]!==_.content?(g=(0,W.jsx)(iN.T,{textToCopy:_.content,ariaLabel:"Copy spec content",onCopy:G}),w[43]=G,w[44]=_.content,w[45]=g):g=w[45],w[46]!==q?(y=(0,W.jsx)(eo.K,{"aria-label":"Download spec",icon:er.DownloadIcon,variant:"invisible",onClick:q}),w[46]=q,w[47]=y):y=w[47],w[48]!==_?(x=(0,W.jsx)(ab,{spec:_,onError:$}),w[48]=_,w[49]=x):x=w[49],w[50]!==g||w[51]!==y||w[52]!==x?(v=(0,W.jsxs)("div",{className:"SpecToolbar-module__toolbarActions--wO9eJ FilePreview-module__toolbarActions--h04aW",children:[g,y,x]}),w[50]=g,w[51]=y,w[52]=x,w[53]=v):v=w[53],w[54]!==p||w[55]!==v?(b=(0,W.jsxs)("div",{className:"SpecToolbar-module__toolbar--tdSZU FilePreview-module__toolbar--ZZWN1",children:[p,v]}),w[54]=p,w[55]=v,w[56]=b):b=w[56],w[57]!==u||w[58]!==b?(j=(0,W.jsxs)(W.Fragment,{children:[u,b]}),w[57]=u,w[58]=b,w[59]=j):j=w[59],j}try{aj.displayName||(aj.displayName="SpecToolbar")}catch{}function aw(e){return{messageId:e.messageId,name:`${e.tag}.md`,id:e.id.replace("planning-spec:","file:"),type:"file",value:e.content,language:"markdown",timestamp:e.timestamp,isStreaming:e.isStreaming??!1,isUserEdited:e.isUserEdited}}function a_(e){let t,n,i,a,s,r,l,o,d=(0,z.c)(23),{spec:c}=e,{items:u,versionedItems:m}=(0,ev.xx)(),[h,f]=(0,eh.useState)("preview");d[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{f(e)},d[0]=t):t=d[0];let p=t;if(d[1]!==u||d[2]!==c||d[3]!==m){let e=(0,eD.SX)(c,u,m);n=!!e,i=e?aw(e):null,d[1]=u,d[2]=c,d[3]=m,d[4]=n,d[5]=i}else n=d[4],i=d[5];let g=i;d[6]!==c?(a=aw(c),d[6]=c,d[7]=a):a=d[7];let y=a,{linesOfCode:x,size:v}=(0,iI.K3)(y);return d[8]!==n||d[9]!==x||d[10]!==v||d[11]!==c?(s=(0,W.jsx)(aj,{spec:c,linesOfCode:x,size:v,isDiffable:n,onViewModeChange:p}),d[8]=n,d[9]=x,d[10]=v,d[11]=c,d[12]=s):s=d[12],d[13]!==g||d[14]!==y||d[15]!==h?(r=(0,W.jsx)("div",{className:"SpecPreview-module__content--ES0hY FilePreview-module__content--HoIot",children:"preview"===h?(0,W.jsx)(i2.G,{content:{value:y.value,name:y.name},fallbackToRaw:!0,hideHeadingAnchors:!0}):(0,W.jsx)(iT,{left:g,right:y,view:"unified"})}),d[13]=g,d[14]=y,d[15]=h,d[16]=r):r=d[16],d[17]!==c?(l=(0,W.jsx)(as,{spec:c}),d[17]=c,d[18]=l):l=d[18],d[19]!==s||d[20]!==r||d[21]!==l?(o=(0,W.jsx)(ai.Fn,{children:(0,W.jsxs)("div",{className:"SpecPreview-module__container--WG_WF FilePreview-module__container--P2h3J",children:[s,r,l]})}),d[19]=s,d[20]=r,d[21]=l,d[22]=o):o=d[22],o}try{a_.displayName||(a_.displayName="SpecPreview")}catch{}function aC(e){let t,n,i,a,s=(0,z.c)(14),{title:r,description:l,onClose:o,onSubmit:d,buttonRef:c}=e;return s[0]!==o?(t={buttonType:"default",content:"Cancel",onClick:o},s[0]=o,s[1]=t):t=s[1],s[2]!==o||s[3]!==d?(n={buttonType:"danger",content:"Proceed to PR creation",onClick:()=>{d(),o()}},s[2]=o,s[3]=d,s[4]=n):n=s[4],s[5]!==t||s[6]!==n?(i=[t,n],s[5]=t,s[6]=n,s[7]=i):i=s[7],s[8]!==c||s[9]!==l||s[10]!==o||s[11]!==i||s[12]!==r?(a=(0,W.jsx)(eO.l,{title:r,onClose:o,returnFocusRef:c,footerButtons:i,children:l}),s[8]=c,s[9]=l,s[10]=o,s[11]=i,s[12]=r,s[13]=a):a=s[13],a}try{aC.displayName||(aC.displayName="StartTaskWarningDialog")}catch{}function aN(e){let t,n=(0,z.c)(4),{buttonRef:i,onClose:a,onSubmit:s}=e;return n[0]!==i||n[1]!==a||n[2]!==s?(t=(0,W.jsx)(aC,{buttonRef:i,description:"This task has unmerged dependencies. Please consider waiting until all dependencies are completed before starting the task.",onClose:a,onSubmit:s,title:"Unmerged dependencies"}),n[0]=i,n[1]=a,n[2]=s,n[3]=t):t=n[3],t}try{aN.displayName||(aN.displayName="UnmergedDependenciesWarningDialog")}catch{}var aS=n(35104);function aI(e){return e.isLoading||null==e.pullRequest||"merged"!==e.pullRequest.state}function ak(e){return null!=e}function aL(e){let t,n,i,a,s,r,l,o,d,c,u=(0,z.c)(33),{loading:m,task:h,startTask:f}=e,[p,g]=(0,eh.useState)(!1),[y,x]=(0,eh.useState)(!1),{convertToDraftIssue:v}=(0,aS.Y)(h),b=(0,eh.useRef)(null),[j,w]=(0,eh.useState)(!1),_=function(e){let t,n,i=(0,z.c)(6),{items:a,versionedItems:s}=(0,ev.xx)();i[0]!==a||i[1]!==e.dependencyTags||i[2]!==s?(t=e.dependencyTags?.map(e=>{let t=s.get(`planning-task:${e}`);return null==t||0===t.length?null:a.get(t.at(-1))}).filter(ak)??[],i[0]=a,i[1]=e.dependencyTags,i[2]=s,i[3]=t):t=i[3];let r=t,l=(0,am.fp)(r);return i[4]!==l?(n=l.some(aI),i[4]=l,i[5]=n):n=i[5],n}(h);u[0]!==m||u[1]!==h?(t={externalLoading:m,task:h},u[0]=m,u[1]=h,u[2]=t):t=u[2];let{selectedRepo:C,topRepos:N,isLoading:S}=function(e){let t,n,i,a,s,r,l,o,d,c,u,m,h,f,p=(0,z.c)(42),{externalLoading:g,task:y}=e;p[0]!==y.repository?(t=y.repository?.split("/")??[],p[0]=y.repository,p[1]=t):t=p[1];let[x,v]=t,[b,j]=(0,eh.useState)(void 0),{updateItem:w}=(0,ev.xx)(),_=(0,eQ.useRelayEnvironment)();p[2]!==_?(n=JSON.stringify(_),p[2]=_,p[3]=n):n=p[3],p[4]!==n?(i=["copilot-immersive-top-repos",n],p[4]=n,p[5]=i):i=p[5],p[6]!==_?(a=async()=>await (0,eG.St)(_,{first:10}),p[6]=_,p[7]=a):a=p[7],p[8]!==i||p[9]!==a?(s={queryKey:i,queryFn:a},p[8]=i,p[9]=a,p[10]=s):s=p[10];let{data:C,isLoading:N}=(0,e2.I)(s);p[11]!==C?(r=void 0===C?[]:C,p[11]=C,p[12]=r):r=p[12];let S=r;p[13]!==_?(l=JSON.stringify(_),p[13]=_,p[14]=l):l=p[14],p[15]!==x||p[16]!==v||p[17]!==l?(o=["copilot-immersive-current-repo",l,x,v],p[15]=x,p[16]=v,p[17]=l,p[18]=o):o=p[18],p[19]!==_||p[20]!==x||p[21]!==v?(d=async()=>x&&v?await (0,eG.tZ)(_,x,v):null,p[19]=_,p[20]=x,p[21]=v,p[22]=d):d=p[22],p[23]!==o||p[24]!==d?(c={queryKey:o,queryFn:d},p[23]=o,p[24]=d,p[25]=c):c=p[25];let{data:I,isLoading:k}=(0,e2.I)(c),L=void 0!==g&&g||N||k;p[26]!==y||p[27]!==w?(u=e=>{j(e),e&&w({...y,isUserEdited:!0,repository:e.nameWithOwner})},p[26]=y,p[27]=w,p[28]=u):u=p[28];let T=u;return p[29]!==I||p[30]!==T||p[31]!==L||p[32]!==b||p[33]!==y.repository||p[34]!==S?(m=()=>{if(!L){if(y.repository){I&&I.nameWithOwner!==b?.nameWithOwner&&j(I);return}!b&&S&&S.length>0&&T(S[0])}},h=[I,T,L,b,y.repository,S],p[29]=I,p[30]=T,p[31]=L,p[32]=b,p[33]=y.repository,p[34]=S,p[35]=m,p[36]=h):(m=p[35],h=p[36]),(0,eh.useEffect)(m,h),p[37]!==T||p[38]!==L||p[39]!==b||p[40]!==S?(f={handleRepoSelect:T,isLoading:L,selectedRepo:b,topRepos:S},p[37]=T,p[38]=L,p[39]=b,p[40]=S,p[41]=f):f=p[41],f}(t);u[3]!==_?(n=()=>{_?w(!0):x(!0)},u[3]=_,u[4]=n):n=u[4];let I=n;u[5]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{x(!1)},u[5]=i):i=u[5];let k=i;u[6]!==f?(a=(e,t,n)=>{f({nameWithOwner:e.nameWithOwner,branch:t,subAgent:n?.subAgentSlug}),x(!1)},u[6]=f,u[7]=a):a=u[7];let L=a;u[8]!==v?(s=()=>{v()},u[8]=v,u[9]=s):s=u[9];let T=s,D=!C,E=S?"Loading\u2026":"Starting task\u2026",R=C?.hasIssuesEnabled===!1;return u[10]!==T||u[11]!==R?(r=[{disabled:R,label:"Draft issue",onSelect:T}],u[10]=T,u[11]=R,u[12]=r):r=u[12],u[13]!==I||u[14]!==j?(l=j&&(0,W.jsx)(aN,{buttonRef:b,onClose:()=>w(!1),onSubmit:I}),u[13]=I,u[14]=j,u[15]=l):l=u[15],u[16]!==I||u[17]!==S||u[18]!==p||u[19]!==l||u[20]!==D||u[21]!==E||u[22]!==r?(o=(0,W.jsx)("div",{className:"NoPullRequestTaskToolbar-module__toolbarActions--nHT53 FilePreview-module__toolbarActions--h04aW",children:(0,W.jsx)(ac,{inactive:D,isLoading:S,isMenuOpen:p,loadingAnnouncement:E,menuItems:r,onMenuOpenChange:g,onStartClick:I,ref:b,children:l})}),u[16]=I,u[17]=S,u[18]=p,u[19]=l,u[20]=D,u[21]=E,u[22]=r,u[23]=o):o=u[23],u[24]!==L||u[25]!==y||u[26]!==h||u[27]!==C||u[28]!==N?(d=y&&(0,W.jsx)(av,{previewItem:h,initialRepo:C,topRepos:N||[],onStart:L,onCancel:k}),u[24]=L,u[25]=y,u[26]=h,u[27]=C,u[28]=N,u[29]=d):d=u[29],u[30]!==o||u[31]!==d?(c=(0,W.jsxs)(W.Fragment,{children:[o,d]}),u[30]=o,u[31]=d,u[32]=c):c=u[32],c}try{aL.displayName||(aL.displayName="NoPullRequestTaskToolbar")}catch{}var aT=n(26607);function aD(e){let t,n,i,a,s,r,l=(0,z.c)(19),{pullRequest:o}=e,d=(0,ad.u)("copilot_swe_agent_progress_commands");l[0]!==d||l[1]!==o.global_relay_id||l[2]!==o.number||l[3]!==o.repository_nwo?(t=d?(0,ao.U)(o.global_relay_id):`/${o.repository_nwo}/pull/${o.number}`,l[0]=d,l[1]=o.global_relay_id,l[2]=o.number,l[3]=o.repository_nwo,l[4]=t):t=l[4];let c=t,u=d?"View task":"View pull request";l[5]!==o.repository_nwo?(n=(0,W.jsx)("div",{className:"PullRequestTaskToolbar-module__toolbarLeft--zhjF9 FilePreview-module__toolbarLeft--RCKxW",children:(0,W.jsx)(aT.A,{variant:"accent",size:"large",className:"PullRequestTaskToolbar-module__toolbarRepo--V_hWp",children:o.repository_nwo})}),l[5]=o.repository_nwo,l[6]=n):n=l[6];let m="merged"===o.state?"success":"accent",h="merged"===o.state?"Merged":"In progress";return l[7]!==m||l[8]!==h?(i=(0,W.jsx)(aT.A,{variant:m,size:"small",children:h}),l[7]=m,l[8]=h,l[9]=i):i=l[9],l[10]!==c||l[11]!==u?(a=(0,W.jsx)(eF.Q,{as:"a",href:c,variant:"primary",size:"small",children:u}),l[10]=c,l[11]=u,l[12]=a):a=l[12],l[13]!==i||l[14]!==a?(s=(0,W.jsxs)("div",{className:"PullRequestTaskToolbar-module__toolbarActions--chqDS FilePreview-module__toolbarActions--h04aW",children:[i,a]}),l[13]=i,l[14]=a,l[15]=s):s=l[15],l[16]!==n||l[17]!==s?(r=(0,W.jsxs)(W.Fragment,{children:[n,s]}),l[16]=n,l[17]=s,l[18]=r):r=l[18],r}try{aD.displayName||(aD.displayName="PullRequestTaskToolbar")}catch{}function aE(e){let t,n,i,a,s,r,l,o,d=(0,z.c)(22),{className:c,task:u}=e,{pullRequest:m,isLoading:h}=(0,am.as)(u),{start:f,error:p}=(0,am.vQ)(u),[g,y]=(0,eh.useState)(null),x=p&&p!==g;d[0]!==p?(t=()=>{y(p)},d[0]=p,d[1]=t):t=d[1];let v=t;return d[2]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{y(null)},d[2]=n):n=d[2],d[3]!==u.id?(i=[u.id],d[3]=u.id,d[4]=i):i=d[4],(0,eh.useEffect)(n,i),d[5]!==p||d[6]!==v||d[7]!==x?(a=x&&(0,W.jsx)(ar,{error:p,onDismiss:v}),d[5]=p,d[6]=v,d[7]=x,d[8]=a):a=d[8],d[9]!==c?(s=(0,em.$)("TaskToolbar-module__toolbar--lRGiC FilePreview-module__toolbar--ZZWN1",c),d[9]=c,d[10]=s):s=d[10],d[11]!==h||d[12]!==m||d[13]!==f||d[14]!==u?(r=m?(0,W.jsx)(aD,{pullRequest:m}):(0,W.jsx)(aL,{loading:h,task:u,startTask:f}),d[11]=h,d[12]=m,d[13]=f,d[14]=u,d[15]=r):r=d[15],d[16]!==s||d[17]!==r?(l=(0,W.jsx)("div",{className:s,children:r}),d[16]=s,d[17]=r,d[18]=l):l=d[18],d[19]!==a||d[20]!==l?(o=(0,W.jsxs)(W.Fragment,{children:[a,l]}),d[19]=a,d[20]=l,d[21]=o):o=d[21],o}try{aE.displayName||(aE.displayName="TaskToolbar")}catch{}function aR(e){let t,n,i,a=(0,z.c)(8),{task:s}=e,r=s.description;s.name&&(r=`# ${s.name}

${r}`);let l=r;a[0]!==s?(t=(0,W.jsx)(aE,{task:s}),a[0]=s,a[1]=t):t=a[1];let o=`${s.tag}.md`;return a[2]!==l||a[3]!==o?(n=(0,W.jsx)(i2.G,{content:{value:l,name:o},fallbackToRaw:!0,hideHeadingAnchors:!0}),a[2]=l,a[3]=o,a[4]=n):n=a[4],a[5]!==t||a[6]!==n?(i=(0,W.jsx)(ai.Fn,{children:(0,W.jsxs)("div",{className:"TaskPreview-module__container--RZnMV",children:[t,n]})}),a[5]=t,a[6]=n,a[7]=i):i=a[7],i}try{aR.displayName||(aR.displayName="TaskPreview")}catch{}function aA(e){let t,n=(0,z.c)(35),{isOpening:i,onClose:a,previewItem:s}=e,r=(0,eb.qw)(),l=null;switch(s.type){case"file":{let e;n[0]!==i||n[1]!==a||n[2]!==s?(e=(0,W.jsx)(i4,{isPreviewOpening:i,file:s,onClose:a}),n[0]=i,n[1]=a,n[2]=s,n[3]=e):e=n[3],l=e;break}case"file-diff":{let e;n[4]!==s?(e=(0,W.jsx)(iR,{fileDiff:s}),n[4]=s,n[5]=e):e=n[5],l=e;break}case"issue":{let e;n[6]!==i||n[7]!==a||n[8]!==s?(e=(0,W.jsx)(ae,{isPreviewOpening:i,issue:s,onClose:a}),n[6]=i,n[7]=a,n[8]=s,n[9]=e):e=n[9],l=e;break}case"new-issue":{let e;n[10]!==i||n[11]!==a||n[12]!==s?(e=(0,W.jsx)(n3,{isPreviewOpening:i,issue:s,onClose:a}),n[10]=i,n[11]=a,n[12]=s,n[13]=e):e=n[13],l=e;break}case"update-issue":{let e;n[14]!==i||n[15]!==a||n[16]!==s?(e=(0,W.jsx)(im,{isPreviewOpening:i,issue:s,onClose:a}),n[14]=i,n[15]=a,n[16]=s,n[17]=e):e=n[17],l=e;break}case"existing-issue":{let e;n[18]!==i||n[19]!==a||n[20]!==s?(e=(0,W.jsx)(n7,{isPreviewOpening:i,issue:s,onClose:a}),n[18]=i,n[19]=a,n[20]=s,n[21]=e):e=n[21],l=e;break}case"image":{let e;n[22]!==s?(e=(0,W.jsx)(i9,{image:s}),n[22]=s,n[23]=e):e=n[23],l=e;break}case"planning-task":{let e;n[24]!==s?(e=(0,W.jsx)(aR,{task:s}),n[24]=s,n[25]=e):e=n[25],l=e;break}case"planning-spec":{let e;n[26]!==s?(e=(0,W.jsx)(a_,{spec:s}),n[26]=s,n[27]=e):e=n[27],l=e;break}case"plugin-content":if(n[28]!==r||n[29]!==s.reference){for(let e of r){let t=e.previewComponents?.[s.reference.type];if(t){l=(0,W.jsx)(t,{reference:s.reference});break}}n[28]=r,n[29]=s.reference,n[30]=l}else l=n[30];break;case"job-result":{let e;n[31]!==s?(e=(0,W.jsx)(an,{jobResult:s}),n[31]=s,n[32]=e):e=n[32],l=e}}return n[33]!==l?(t=l?(0,W.jsx)(ei.t,{fallback:(0,W.jsx)(ef.x,{regionName:"This workbench item"}),children:l}):null,n[33]=l,n[34]=t):t=n[34],t}try{aA.displayName||(aA.displayName="ContentPreviewItem")}catch{}var aO=n(77999);function aP(e){let t=(0,z.c)(3),{file:n}=e;if(n.isStreaming){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(eP.A,{size:"small"}),t[0]=e):e=t[0],e}if("markdown"===n.language){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(er.MarkdownIcon,{}),t[1]=e):e=t[1],e}{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(er.CodeIcon,{}),t[2]=e):e=t[2],e}}function aF(e){let t=(0,z.c)(12),{item:n}=e;switch(n.type){case"file":{let e;return t[0]!==n?(e=(0,W.jsx)(aP,{file:n}),t[0]=n,t[1]=e):e=t[1],e}case"file-diff":{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(er.FileDiffIcon,{}),t[2]=e):e=t[2],e}case"image":{let e;return t[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(er.ImageIcon,{}),t[3]=e):e=t[3],e}case"issue":{let e;return t[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(er.IssueOpenedIcon,{}),t[4]=e):e=t[4],e}case"new-issue":{let e;return t[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(er.IssueDraftIcon,{}),t[5]=e):e=t[5],e}case"update-issue":{let e;return t[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(er.IssueDraftIcon,{}),t[6]=e):e=t[6],e}case"existing-issue":{let e;return t[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(er.IssueOpenedIcon,{}),t[7]=e):e=t[7],e}case"planning-task":{let e;return t[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(er.TasklistIcon,{}),t[8]=e):e=t[8],e}case"planning-spec":{let e;return t[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(er.NoteIcon,{}),t[9]=e):e=t[9],e}case"plugin-content":{let e;return t[10]!==n.icon?(e=n.icon?(0,W.jsx)(n.icon,{}):null,t[10]=n.icon,t[11]=e):e=t[11],e}default:return null}}let aM=(0,eh.forwardRef)(function(e,t){let n,i,a,s,r,l,o,d,c,u,m,h,f,p,g,y,x,v,b,j,w=(0,z.c)(52);w[0]!==e?({onClick:s,onClose:r,isActive:i,item:a,controlHintId:n,tabPanelId:o,...l}=e,w[0]=e,w[1]=n,w[2]=i,w[3]=a,w[4]=s,w[5]=r,w[6]=l,w[7]=o):(n=w[1],i=w[2],a=w[3],s=w[4],r=w[5],l=w[6],o=w[7]);let[_,C]=(0,eh.useState)(!1),N=(0,eh.useRef)(null),S=!a.disableCloseButton;w[8]!==r?(d=()=>{r&&r(),(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_TAB_CLOSE",mode:"immersive"})},w[8]=r,w[9]=d):d=w[9];let I=d,k=(0,eh.useRef)(null),L=a.name;w[10]!==_?(c=()=>{let e=N.current;if(!e)return;let t=e.scrollWidth>e.clientWidth;t!==_&&C(t)},w[10]=_,w[11]=c):c=w[11];let T=c,D=`content-preview-tab-${a.id}`;w[12]!==T||w[13]!==D||w[14]!==L?(u=(0,W.jsx)("span",{className:"ContentPreviewTab-module__title--l571P","data-title":L,"data-testid":D,ref:N,onMouseEnter:T,children:L}),w[12]=T,w[13]=D,w[14]=L,w[15]=u):u=w[15];let E=u;w[16]!==i?(m=(0,em.$)("ContentPreviewTab-module__tabContent--xe28k",{"ContentPreviewTab-module__isActive--Pi2gz":i}),w[16]=i,w[17]=m):m=w[17];let R=i?"true":void 0;return w[18]!==s?(h=e=>{s&&s(e),(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_TAB_SELECT",mode:"immersive"})},w[18]=s,w[19]=h):h=w[19],w[20]!==I||w[21]!==S?(f=e=>{switch(e.key.toLowerCase()){case"delete":case"backspace":S&&I();break;case"tab":if(e.shiftKey)break;S&&(e.preventDefault(),k.current?.focus())}},p=e=>{1===e.button&&S&&I()},w[20]=I,w[21]=S,w[22]=f,w[23]=p):(f=w[22],p=w[23]),w[24]!==a?(g=(0,W.jsx)("span",{className:"ContentPreviewTab-module__icon--lefqk",children:(0,W.jsx)(aF,{item:a})}),w[24]=a,w[25]=g):g=w[25],w[26]!==_||w[27]!==L||w[28]!==E?(y=_?(0,W.jsx)(aO.m,{text:L,position:"bottom",children:E}):E,w[26]=_,w[27]=L,w[28]=E,w[29]=y):y=w[29],w[30]!==a.trailingComponent?(x=a.trailingComponent?(0,W.jsx)("div",{className:"ContentPreviewTab-module__trailingComponent--lAh8u",children:a.trailingComponent}):null,w[30]=a.trailingComponent,w[31]=x):x=w[31],w[32]!==n||w[33]!==t||w[34]!==l||w[35]!==g||w[36]!==y||w[37]!==x||w[38]!==R||w[39]!==h||w[40]!==f||w[41]!==p||w[42]!==o?(v=(0,W.jsxs)("button",{className:"ContentPreviewTab-module__mainButton--vLx58",type:"button",role:"tab","aria-selected":R,"aria-describedby":n,"aria-controls":o,onClick:h,onKeyDown:f,onAuxClick:p,ref:t,...l,children:[g,y,x]}),w[32]=n,w[33]=t,w[34]=l,w[35]=g,w[36]=y,w[37]=x,w[38]=R,w[39]=h,w[40]=f,w[41]=p,w[42]=o,w[43]=v):v=w[43],w[44]!==I||w[45]!==S||w[46]!==L?(b=S&&(0,W.jsx)("div",{className:"ContentPreviewTab-module__closeButton--SByWv",children:(0,W.jsx)(eo.K,{icon:er.XIcon,size:"small",variant:"invisible","aria-label":`Close ${L}`,"aria-hidden":!0,tabIndex:-1,unsafeDisableTooltip:!0,onClick:I,ref:k})}),w[44]=I,w[45]=S,w[46]=L,w[47]=b):b=w[47],w[48]!==v||w[49]!==b||w[50]!==m?(j=(0,W.jsx)("div",{className:"ContentPreviewTab-module__tabContainer--ApaB_",children:(0,W.jsxs)("div",{className:m,children:[v,b]})}),w[48]=v,w[49]=b,w[50]=m,w[51]=j):j=w[51],j});try{aP.displayName||(aP.displayName="CodeTabIcon")}catch{}try{aF.displayName||(aF.displayName="TabIcon")}catch{}try{aM.displayName||(aM.displayName="ContentPreviewTab")}catch{}var a$=n(61526);function aB(){let e,t=(0,z.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",children:(0,W.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M13 .5H3A2.5 2.5 0 0 0 .5 3v10A2.5 2.5 0 0 0 3 15.5h10a2.5 2.5 0 0 0 2.5-2.5V3A2.5 2.5 0 0 0 13 .5M2 3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1zm6 6.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5M12.25 5a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0M5 12.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5",clipRule:"evenodd"})}),t[0]=e):e=t[0],e}try{aB.displayName||(aB.displayName="DiceIcon")}catch{}function aV(e){let t,n,i,a,s,r,l,o,d,c,u,m,h=(0,z.c)(23),{isOpening:f}=e,p=(0,Z.b)(),g=(0,Q.Pk)(),y=(0,a$.zy)(),x=(0,eh.useRef)(null);h[0]!==g?(t=(0,tg.W)(g),h[0]=g,h[1]=t):t=h[1];let v=t,b=(0,iG.X)();h[2]===Symbol.for("react.memo_cache_sentinel")?(n=[],h[2]=n):n=h[2];let[j,w]=(0,eh.useState)(n);h[3]!==b.icebreakers?(i=()=>{var e;if(Array.isArray(e=b.icebreakers)&&e.every(e=>"type"in e&&"data"in e)){let e=b.icebreakers.find(aU);e&&e.data.length>0&&w(e.data)}},h[3]=b.icebreakers,h[4]=i):i=h[4],h[5]!==y||h[6]!==b.icebreakers?(a=[b.icebreakers,y],h[5]=y,h[6]=b.icebreakers,h[7]=a):a=h[7],(0,eh.useEffect)(i,a),h[8]!==f?(s=()=>{f&&x.current&&window.requestAnimationFrame(()=>{x.current?.focus({preventScroll:!0})})},r=[f],h[8]=f,h[9]=s,h[10]=r):(s=h[9],r=h[10]),(0,eh.useEffect)(s,r),h[11]!==v||h[12]!==j||h[13]!==p||h[14]!==g?(l=()=>{if(0===j.length)return;let e=function(e){let t=Math.floor(Math.random()*e.length),n=e[t];if(!n)throw Error("No icebreaker found");return n}(j),t=0===g.messages.length?v:(0,tg.W)(g),n=g.currentUserLogin,i=e.message;p.sendChatMessage({thread:t,content:i.replaceAll("$$USERNAME$$",n),references:g.currentReferences,topic:g.currentTopic,context:g.context,customInstructions:g.customInstructions,model:g.model}),(0,et.BI)("dotcom_chat.activate",{target:"CONTENT_PREVIEW_EMPTY_STATE_ICEBREAKER_BUTTON",topic:g.currentTopic?.name,mode:"immersive",suggestionId:e.id})},h[11]=v,h[12]=j,h[13]=p,h[14]=g,h[15]=l):l=h[15];let _=l;return h[16]===Symbol.for("react.memo_cache_sentinel")?(c=(0,W.jsx)(er.BrowserIcon,{size:24,className:"EmptyState-module__icon--Ur91O"}),u=(0,W.jsx)("h1",{className:"sr-only",children:"Content preview panel"}),o=(0,W.jsx)("h2",{className:"EmptyState-module__heading--fStvv",children:"View files directly within Copilot"}),d=(0,W.jsx)("p",{className:"EmptyState-module__subtitle--tjaBc",children:"Ask to generate a file or app, or use the button below to try it yourself."}),h[16]=o,h[17]=d,h[18]=c,h[19]=u):(o=h[16],d=h[17],c=h[18],u=h[19]),h[20]!==_||h[21]!==g.isWaitingOnCopilot?(m=(0,W.jsxs)("div",{className:"EmptyState-module__container--LAYqE",children:[c,u,o,d,(0,W.jsx)(eF.Q,{ref:x,leadingVisual:aB,onClick:_,disabled:g.isWaitingOnCopilot,children:"I\u2019m feeling lucky"})]}),h[20]=_,h[21]=g.isWaitingOnCopilot,h[22]=m):m=h[22],m}function aU(e){return"interactional"===e.type}try{aV.displayName||(aV.displayName="EmptyState")}catch{}function aq(){let e,t=(0,z.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)("div",{className:"LoadingState-module__container--dKvYJ",children:(0,W.jsx)(eP.A,{size:"large"})}),t[0]=e):e=t[0],e}try{aq.displayName||(aq.displayName="LoadingState")}catch{}function aG(e,t,n={}){(0,et.BI)(e,{contentPreviewType:t.type,mode:"immersive",path:t.id,...n})}function aH(){let e,t=(0,z.c)(5),{closePreviewPane:n}=(0,ev.xx)(),{secondaryColumnFullWidth:i,toggleSecondaryColumnFullWidth:a,setDesktopLayoutState:s}=(0,en.L)();return t[0]!==n||t[1]!==i||t[2]!==s||t[3]!==a?(e=()=>{i&&(a(),s(aK)),n()},t[0]=n,t[1]=i,t[2]=s,t[3]=a,t[4]=e):e=t[4],e}function aK(e){return{...e,fullWidth:!1}}function aW(e){let t,n,i,a,s,r,l,o,d,c,u,m,h,f,p,g,y,x,v,b,j,w,_,C,N,S,I,k,L,T,D,E,R,A,O,P,F,M,$,B,V,U,q=(0,z.c)(130),{returnFocusRef:G,disableResourcePanel:H,disableActionsMenu:K}=e,en=void 0!==K&&K,ei=(0,ev.tZ)(),ef=(0,ev.wI)(),{selectedThreadID:eb}=(0,Q.bP)("selectedThreadID"),ej=(0,ee.tD)(),ew=(0,Z.b)(),e_=(0,ea.S)(eb),{items:eC,allOpenItems:eN,selectedItem:eS,openItem:eI,closeItem:ek,closeItems:eL,showLoadingState:eT,openResourcePanel:eD,returnFocusElementRef:eE}=(0,ev.xx)(),eR=aH(),eA=(0,ea.S)(ei),eO=ei&&!eA,eP=eA&&!ei;if(q[0]!==eC||q[1]!==eN){let e;q[3]!==eC?(e=e=>eC.get(e),q[3]=eC,q[4]=e):e=q[4],t=eN.map(e).filter(aY),q[0]=eC,q[1]=eN,q[2]=t}else t=q[2];let eF=t,eM=(0,eh.useId)(),e$=(0,eh.useId)(),eB=(0,eh.useId)();if(q[5]!==eC||q[6]!==eN||q[7]!==eS){let e;q[10]!==eC?(e=e=>eC.get(e),q[10]=eC,q[11]=e):e=q[11],i=(n=eN.map(e).filter(aJ)).find(e=>e.id===eS)??n[0],q[5]=eC,q[6]=eN,q[7]=eS,q[8]=n,q[9]=i}else n=q[8],i=q[9];let eV=i,eU=(0,ea.S)(eS),eq=X.W.copilotResourcePanel&&!(void 0!==H&&H),eG=(0,eh.useRef)(!0);q[12]!==eP||q[13]!==eO||q[14]!==eE||q[15]!==G||q[16]!==eV?(a=()=>{if(eP||X.W.focusTextAreaInsteadOfWorkbench&&eG.current&&eV&&"file"===eV.type&&!eO){eG.current=!1;let e=eE.current;e?e.focus():G.current?.focus()}},s=[eP,eO,G,eV,eE],q[12]=eP,q[13]=eO,q[14]=eE,q[15]=G,q[16]=eV,q[17]=a,q[18]=s):(a=q[17],s=q[18]),(0,eh.useEffect)(a,s),q[19]!==eR||q[20]!==e_||q[21]!==eb?(r=()=>{null!=e_&&e_!==eb&&eR()},l=[eR,e_,eb],q[19]=eR,q[20]=e_,q[21]=eb,q[22]=r,q[23]=l):(r=q[22],l=q[23]),(0,eh.useEffect)(r,l),q[24]!==ei||q[25]!==n||q[26]!==eS?(d=()=>{if(!eS||!ei)return;let e=n.findIndex(e=>e.id===eS),t=eW.current[e];t?.scrollIntoView({block:"nearest",inline:"nearest"})},o=[eS,n,ei],q[24]=ei,q[25]=n,q[26]=eS,q[27]=o,q[28]=d):(o=q[27],d=q[28]),(0,eh.useEffect)(d,o),q[29]!==ef||q[30]!==eD||q[31]!==eU||q[32]!==eq||q[33]!==eS||q[34]!==eV?(c=()=>{eq&&eS&&eS!==eU&&!ef&&eV?.type==="file"&&(0,Y.SI)(eV.reference)&&eD()},u=[ef,eD,eU,eq,eS,eV],q[29]=ef,q[30]=eD,q[31]=eU,q[32]=eq,q[33]=eS,q[34]=eV,q[35]=c,q[36]=u):(c=q[35],u=q[36]),(0,eh.useEffect)(c,u),q[37]!==ej||q[38]!==ew||q[39]!==eU||q[40]!==eS||q[41]!==eV?(m=()=>{if(!X.W.copilotResourcePanel||eS===eU)return;let{currentReferences:e,implicitReferences:t}=ej();if(eS&&eV?.type==="file"){let n=eV.reference;(0,Y.SI)(n)&&!e.some(e=>(0,Y.x_)(e,n))&&(t.size>0&&ew.clearImplicitReferences(),ew.addReference(n,"ContentPreview",{implicit:!0}))}else t.size>0&&ew.clearImplicitReferences()},h=[ej,ew,eU,eS,eV],q[37]=ej,q[38]=ew,q[39]=eU,q[40]=eS,q[41]=eV,q[42]=m,q[43]=h):(m=q[42],h=q[43]),(0,eh.useEffect)(m,h),q[44]!==eF?(f=async()=>{let e=eF.map(aZ);iE(new File([await (0,eu._6)(e).blob()],"files.zip"))},q[44]=eF,q[45]=f):f=q[45];let eH=f;q[46]!==ek||q[47]!==eR||q[48]!==n.length||q[49]!==eV?(p=e=>{if(eV){let t=void 0!==e&&e&&1===n.length;ek(eV.id),t&&(eR(),(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE",mode:"immersive"}))}},q[46]=ek,q[47]=eR,q[48]=n.length,q[49]=eV,q[50]=p):p=q[50];let eK=p;q[51]===Symbol.for("react.memo_cache_sentinel")?(g=[],q[51]=g):g=q[51];let eW=(0,eh.useRef)(g),ez=(0,eh.useRef)(null);q[52]===Symbol.for("react.memo_cache_sentinel")?(y={containerRef:ez,focusableElementFilter:aQ,bindKeys:es.z0.ArrowHorizontal|es.z0.HomeAndEnd,focusInStrategy:"first",focusOutBehavior:"wrap"},q[52]=y):y=q[52],q[53]!==n?(x=[n],q[53]=n,q[54]=x):x=q[54],(0,el.G)(y,x);let eQ=!(0,J.g)(ez);if(q[55]!==eM||q[56]!==ek||q[57]!==eL||q[58]!==eB||q[59]!==eR||q[60]!==ef||q[61]!==eI||q[62]!==n||q[63]!==eD||q[64]!==eq||q[65]!==eS||q[66]!==e$){let e;q[78]!==eL||q[79]!==eR?(e=()=>{eL(),eR(),(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE_ALL_TABS",mode:"immersive"})},q[78]=eL,q[79]=eR,q[80]=e):e=q[80],v=e,k=ep,q[81]!==ef||q[82]!==eD||q[83]!==eq?(L=eq&&!ef&&(0,W.jsx)("div",{className:(0,em.$)(eg,ey),children:(0,W.jsx)(eo.K,{icon:er.ListUnorderedIcon,"aria-label":"Open resource panel",onClick:eD,variant:"invisible"})}),q[81]=ef,q[82]=eD,q[83]=eq,q[84]=L):L=q[84],I="ContentPreview-module__tabsContainer--t0I1P",b="ContentPreview-module__tabs--X2Pn9",j="tablist",w="Workbench items",_=ez,C=-1,N=az,S=n.map((e,t)=>(0,W.jsx)(aM,{id:e.id===eS?eM:void 0,tabPanelId:e.id===eS?e$:void 0,controlHintId:eB,isActive:e.id===eS,onClick:()=>{eI(e.id),aG("filePreviewTab.click",e)},onClose:()=>(e=>{let t=n[e];if(!t)return;let i=eW.current[e+1]??eW.current[e-1]??ez.current;i?.focus();let a=1===n.length;ek(t.id),a&&eR(),aG("filePreviewTab.close",t)})(t),item:e,ref:e=>{eW.current[t]=e}},e.id)),q[55]=eM,q[56]=ek,q[57]=eL,q[58]=eB,q[59]=eR,q[60]=ef,q[61]=eI,q[62]=n,q[63]=eD,q[64]=eq,q[65]=eS,q[66]=e$,q[67]=v,q[68]=b,q[69]=j,q[70]=w,q[71]=_,q[72]=C,q[73]=N,q[74]=S,q[75]=I,q[76]=k,q[77]=L}else v=q[67],b=q[68],j=q[69],w=q[70],_=q[71],C=q[72],N=q[73],S=q[74],I=q[75],k=q[76],L=q[77];q[85]!==eB?(T=(0,W.jsx)("span",{id:eB,"aria-hidden":"true",className:"sr-only",children:"Press Delete to close."}),q[85]=eB,q[86]=T):T=q[86],q[87]===Symbol.for("react.memo_cache_sentinel")?(D=(0,W.jsx)("span",{}),q[87]=D):D=q[87],q[88]!==b||q[89]!==j||q[90]!==w||q[91]!==_||q[92]!==C||q[93]!==N||q[94]!==S||q[95]!==T?(E=(0,W.jsxs)("div",{className:b,role:j,"aria-label":w,ref:_,tabIndex:C,onWheel:N,children:[S,T,D]}),q[88]=b,q[89]=j,q[90]=w,q[91]=_,q[92]=C,q[93]=N,q[94]=S,q[95]=T,q[96]=E):E=q[96],q[97]!==I||q[98]!==E?(R=(0,W.jsx)("div",{className:I,children:E}),q[97]=I,q[98]=E,q[99]=R):R=q[99];let eZ=eQ&&"ContentPreview-module__leftDivider--FCyvC";return q[100]!==eZ?(A=(0,em.$)(eg,eZ),q[100]=eZ,q[101]=A):A=q[101],q[102]!==v||q[103]!==en||q[104]!==eH||q[105]!==eF.length||q[106]!==eN.length?(O=!en&&eN.length>0&&(0,W.jsxs)(ed.W,{children:[(0,W.jsx)(ed.W.Anchor,{children:(0,W.jsx)(eo.K,{icon:er.KebabHorizontalIcon,"aria-label":"More options",variant:"invisible"})}),(0,W.jsx)(ed.W.Overlay,{children:(0,W.jsxs)(ec.l,{children:[eF.length>0&&(0,W.jsxs)(ec.l.Item,{onSelect:eH,children:[(0,W.jsx)(ec.l.LeadingVisual,{children:(0,W.jsx)(er.FileZipIcon,{})}),"Download all files"]}),(0,W.jsxs)(ec.l.Item,{onSelect:v,children:[(0,W.jsx)(ec.l.LeadingVisual,{children:(0,W.jsx)(er.XIcon,{})}),"Close all tabs"]})]})})]}),q[102]=v,q[103]=en,q[104]=eH,q[105]=eF.length,q[106]=eN.length,q[107]=O):O=q[107],q[108]===Symbol.for("react.memo_cache_sentinel")?(P=(0,W.jsx)(aX,{}),q[108]=P):P=q[108],q[109]!==A||q[110]!==O?(F=(0,W.jsxs)("div",{className:A,children:[O,P]}),q[109]=A,q[110]=O,q[111]=F):F=q[111],q[112]!==k||q[113]!==L||q[114]!==R||q[115]!==F?(M=(0,W.jsxs)("div",{className:k,children:[L,R,F]}),q[112]=k,q[113]=L,q[114]=R,q[115]=F,q[116]=M):M=q[116],q[117]===Symbol.for("react.memo_cache_sentinel")?($=(0,em.$)(ex,"content-preview-content"),q[117]=$):$=q[117],q[118]!==eK||q[119]!==eO||q[120]!==eV||q[121]!==eT?(B=eT?(0,W.jsx)(aq,{}):eV?(0,W.jsx)(aA,{isOpening:eO,previewItem:eV,onClose:eK}):(0,W.jsx)(aV,{isOpening:eO}),q[118]=eK,q[119]=eO,q[120]=eV,q[121]=eT,q[122]=B):B=q[122],q[123]!==eM||q[124]!==e$||q[125]!==B?(V=(0,W.jsx)("div",{className:$,role:"tabpanel",id:e$,"aria-labelledby":eM,children:B}),q[123]=eM,q[124]=e$,q[125]=B,q[126]=V):V=q[126],q[127]!==M||q[128]!==V?(U=(0,W.jsxs)(W.Fragment,{children:[M,V]}),q[127]=M,q[128]=V,q[129]=U):U=q[129],U}function az(e){e.deltaY&&(e.preventDefault(),e.currentTarget.scrollLeft=e.currentTarget.scrollLeft+e.deltaY)}function aQ(e){return"tab"===e.role}function aZ(e){return new File([e.value],e.name)}function aJ(e){return!!e}function aY(e){return e?.type==="file"}function aX(){let e,t,n,i,a=(0,z.c)(11),s=aH(),{secondaryColumnFullWidth:r,toggleSecondaryColumnFullWidth:l}=(0,en.L)(),o=r?er.MinimizeIcon:er.MaximizeIcon,d=r?"Collapse workbench":"Expand workbench";return a[0]!==l?(e=()=>{l()},a[0]=l,a[1]=e):e=a[1],a[2]!==o||a[3]!==d||a[4]!==e?(t=(0,W.jsx)(eo.K,{variant:"invisible",icon:o,"aria-label":d,onClick:e,className:"ContentPreview-module__onlyShowOnLargeViewports--pV5gG"}),a[2]=o,a[3]=d,a[4]=e,a[5]=t):t=a[5],a[6]!==s?(n=(0,W.jsx)(eo.K,{variant:"invisible",icon:er.XIcon,"aria-label":"Close workbench",onClick:()=>{s(),(0,et.BI)("dotcom_chat.activate",{target:"CLOSE_PREVIEW_PANE_BUTTON",mode:"immersive"})}}),a[6]=s,a[7]=n):n=a[7],a[8]!==t||a[9]!==n?(i=(0,W.jsxs)("div",{className:"d-flex gap-1",children:[t,n]}),a[8]=t,a[9]=n,a[10]=i):i=a[10],i}function a0(){let e,t=(0,z.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("div",{className:ep,children:(0,W.jsx)("div",{className:(0,em.$)(eg,ey),children:(0,W.jsx)(aX,{})})}),(0,W.jsx)("div",{className:(0,em.$)(ex),children:(0,W.jsx)(ef.x,{regionName:"The workbench"})})]}),t[0]=e):e=t[0],e}function a1(e){let t,n,i,a,s,r=(0,z.c)(16),{returnFocusRef:l,disableResourcePanel:o,disableActionsMenu:d,className:c}=e,u=void 0!==o&&o,m=void 0!==d&&d,h=(0,eh.useId)(),{contentPreviewRef:f}=(0,ev.xx)(),p=(0,ev.tZ)(),g=(0,ev.wI)()&&"ContentPreview-module__resourcePanelOpen--YIQql";r[0]!==c||r[1]!==g?(t=(0,em.$)("ContentPreview-module__container--y5_MG",g,c),r[0]=c,r[1]=g,r[2]=t):t=r[2];let y=p?f:void 0;return r[3]!==h?(n=(0,W.jsx)("h2",{id:h,className:"sr-only",children:"Workbench"}),r[3]=h,r[4]=n):n=r[4],r[5]===Symbol.for("react.memo_cache_sentinel")?(i=(0,W.jsx)(a0,{}),r[5]=i):i=r[5],r[6]!==m||r[7]!==u||r[8]!==l?(a=(0,W.jsx)(ei.t,{fallback:i,children:(0,W.jsx)(aW,{returnFocusRef:l,disableResourcePanel:u,disableActionsMenu:m})}),r[6]=m,r[7]=u,r[8]=l,r[9]=a):a=r[9],r[10]!==h||r[11]!==t||r[12]!==y||r[13]!==n||r[14]!==a?(s=(0,W.jsxs)("div",{"aria-labelledby":h,className:t,tabIndex:-1,"data-testid":"content-preview",role:"dialog",ref:y,children:[n,a]}),r[10]=h,r[11]=t,r[12]=y,r[13]=n,r[14]=a,r[15]=s):s=r[15],s}try{aW.displayName||(aW.displayName="ContentPreviewInner")}catch{}try{aX.displayName||(aX.displayName="CloseContentPreviewButton")}catch{}try{a0.displayName||(a0.displayName="ContentPreviewFallback")}catch{}try{a1.displayName||(a1.displayName="ContentPreview")}catch{}},79684:(e,t,n)=>{n.d(t,{B:()=>g});var i=n(74848),a=n(21728),s=n(96540),r=n(61526),l=n(94236),o=n(5524);let d="Breadcrumbs-module__container--bnnIp",c="Breadcrumbs-module__list--hG7n1",u="Breadcrumbs-module__item--fekY7",m="Breadcrumbs-module__link--A48Bt",h="Breadcrumbs-module__text--yZS1N";var f=n(38621),p=n(40090);let g=e=>{let t,n,r,h,f,p=(0,a.c)(31),{children:g,"aria-label":j,condensed:w}=e,_=void 0===j?"Breadcrumbs":j;if(p[0]!==g){t=[];let e=(n,i)=>{let a=void 0===i?"":i;for(let[i,r]of s.Children.toArray(n).entries())(0,s.isValidElement)(r)&&(r.type===s.Fragment||"Symbol(react.fragment)"===r.type.toString()?e(r.props.children,`${a}fragment-${i}-`):r.type===y?t.push({key:r.key?.toString()||`${a}item-${i}`,href:r.props.href,children:r.props.children,hasMenu:!1}):r.type===x&&t.push({key:r.key?.toString()||`${a}item-${i}`,children:r.props.children,hasMenu:!0,menuOverlay:r.props.menuOverlay}))};e(g),p[0]=g,p[1]=t}else t=p[1];let C=t[t.length-1];p[2]!==t?(n=t.slice(0,-1),p[2]=t,p[3]=n):n=p[3];let N=n,S=t.length>=3,I=void 0!==w&&w&&S,k=s.useRef(null);if(void 0!==w)if(I){let e,t,n,a,s;return p[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(l.W.Button,{ref:k,className:m,children:"..."}),p[4]=e):e=p[4],p[5]!==N?(t=(0,i.jsx)("li",{className:u,children:(0,i.jsxs)(l.W,{children:[e,(0,i.jsx)(l.W.Overlay,{children:(0,i.jsx)(o.l,{children:N.map(v)})})]})}),p[5]=N,p[6]=t):t=p[6],p[7]!==C?(n=C&&(C.hasMenu&&C.menuOverlay?(0,i.jsx)(x,{menuOverlay:C.menuOverlay,children:C.children}):C.href?(0,i.jsx)(y,{href:C.href,children:C.children}):null),p[7]=C,p[8]=n):n=p[8],p[9]!==t||p[10]!==n?(a=(0,i.jsxs)("ol",{className:c,children:[t,n]}),p[9]=t,p[10]=n,p[11]=a):a=p[11],p[12]!==_||p[13]!==a?(s=(0,i.jsx)("nav",{className:`${d} Breadcrumbs-module__condensed--l60Z1`,"aria-label":_,children:a}),p[12]=_,p[13]=a,p[14]=s):s=p[14],s}else{let e,t;return p[15]!==g?(e=(0,i.jsx)("ol",{className:c,children:g}),p[15]=g,p[16]=e):e=p[16],p[17]!==_||p[18]!==e?(t=(0,i.jsx)("nav",{className:d,"aria-label":_,children:e}),p[17]=_,p[18]=e,p[19]=t):t=p[19],t}let L=`${c} ${S?"Breadcrumbs-module__fullList--aHVvT":"Breadcrumbs-module__alwaysVisible--dK_nL"}`;return p[20]!==g||p[21]!==L?(r=(0,i.jsx)("ol",{className:L,children:g}),p[20]=g,p[21]=L,p[22]=r):r=p[22],p[23]!==S||p[24]!==C||p[25]!==N?(h=S&&(0,i.jsxs)("ol",{className:`${c} Breadcrumbs-module__condensedList--vpMXO`,children:[(0,i.jsx)("li",{className:u,children:(0,i.jsxs)(l.W,{children:[(0,i.jsx)(l.W.Button,{ref:k,className:m,children:"..."}),(0,i.jsx)(l.W.Overlay,{children:(0,i.jsx)(o.l,{children:N.map(b)})})]})}),C&&(C.hasMenu&&C.menuOverlay?(0,i.jsx)(x,{menuOverlay:C.menuOverlay,children:C.children}):C.href?(0,i.jsx)(y,{href:C.href,children:C.children}):null)]}),p[23]=S,p[24]=C,p[25]=N,p[26]=h):h=p[26],p[27]!==_||p[28]!==r||p[29]!==h?(f=(0,i.jsxs)("nav",{className:d,"aria-label":_,children:[r,h]}),p[27]=_,p[28]=r,p[29]=h,p[30]=f):f=p[30],f},y=e=>{let t,n,s,l,o,d=(0,a.c)(14);if(d[0]!==e?({href:n,loading:s,children:t,...l}=e,d[0]=e,d[1]=t,d[2]=n,d[3]=s,d[4]=l):(t=d[1],n=d[2],s=d[3],l=d[4]),s){let e;return d[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("li",{className:u,children:(0,i.jsx)(p.r,{className:"Breadcrumbs-module__skeleton--_d2ba"})}),d[5]=e):e=d[5],e}if(n){let e,a;return d[6]!==t?(e=(0,i.jsx)("span",{className:h,children:t}),d[6]=t,d[7]=e):e=d[7],d[8]!==n||d[9]!==l||d[10]!==e?(a=(0,i.jsx)("li",{className:u,children:(0,i.jsx)(r.N_,{...l,to:n,className:m,"aria-current":"page",children:e})}),d[8]=n,d[9]=l,d[10]=e,d[11]=a):a=d[11],a}return d[12]!==t?(o=(0,i.jsx)("li",{className:u,children:(0,i.jsx)("span",{className:"Breadcrumbs-module__textOnly--v7ypW",children:t})}),d[12]=t,d[13]=o):o=d[13],o},x=e=>{let t,n,s,r,o=(0,a.c)(9),{buttonRef:d,children:c,menuOverlay:p}=e;return o[0]!==c?(t=(0,i.jsx)("span",{className:h,children:c}),o[0]=c,o[1]=t):t=o[1],o[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)("span",{className:"Breadcrumbs-module__icon--CWnGJ",children:(0,i.jsx)(f.TriangleDownIcon,{})}),o[2]=n):n=o[2],o[3]!==t?(s=(0,i.jsx)(l.W.Anchor,{children:(0,i.jsxs)("button",{className:m,"aria-current":"page","aria-haspopup":"true",children:[t,n]})}),o[3]=t,o[4]=s):s=o[4],o[5]!==d||o[6]!==p||o[7]!==s?(r=(0,i.jsx)("li",{className:u,children:(0,i.jsxs)(l.W,{anchorRef:d,children:[s,p]})}),o[5]=d,o[6]=p,o[7]=s,o[8]=r):r=o[8],r};g.Item=y,g.ItemWithMenu=x;try{g.displayName||(g.displayName="Breadcrumbs")}catch{}try{y.displayName||(y.displayName="Item")}catch{}try{x.displayName||(x.displayName="ItemWithMenu")}catch{}function v(e){return(0,i.jsx)(o.l.LinkItem,{href:e.href,children:e.children},e.key)}function b(e){return(0,i.jsx)(o.l.LinkItem,{href:e.href,children:e.children},e.key)}},80081:(e,t,n)=>{n.d(t,{EJ:()=>a,Lm:()=>s,o_:()=>i});function i({suggestedChange:e,hasCommitRange:t,isOutdated:n,isPending:i,isResolved:a,pullRequestIsClosed:s,pullRequestIsInMergeQueue:r,userCanApplySuggestion:l,applySuggestedChangesValidationData:o,suggestedChangesConfig:d}){let{lineRange:c}=o;if(n)return{isValid:!1,reason:"This suggestion is outdated and cannot be applied."};if(i)return{isValid:!1,reason:"This suggestion is part of a pending comment and cannot be applied."};if(a)return{isValid:!1,reason:"This suggestion is part of a resolved comment and cannot be applied."};if(s)return{isValid:!1,reason:"This suggestion cannot be applied because the pull request is closed."};if(r)return{isValid:!1,reason:"This suggestion cannot be applied because the pull request is queued to merge."};if(!l)return{isValid:!1,reason:"You do not have permission to apply this suggestion."};if(!c)return{isValid:!1,reason:"This suggestion does not have a valid line range."};if(t)return{isValid:!1,reason:"Unable to apply suggestions when viewing a specific commit range."};if(!d)return{isValid:!1,reason:"Unable to determine the validity of this suggestion."};if(!d?.isValidSuggestionRange)return{isValid:!1,reason:"Unable to apply suggestions on deleted lines."};let u=d?.sourceContentFromDiffLines,m=e.suggestion.join(`
`);return 0!==e.suggestion.length&&m===u?{isValid:!1,reason:"This suggestion is invalid because no changes were made to the code."}:{isValid:!0}}function a(e,t){return t.length>=50?{isValid:!1,reason:"Unable to commit due to too many changes in the batch."}:t.find(t=>t.threadId===e.threadId)||function(e,t){for(let a of t)if(e.path===a.path){var n,i;return n=e.lineRange,i=a.lineRange,n.endLineNumber>=i.startLineNumber&&n.startLineNumber<=i.endLineNumber}return!1}(e,t)?{isValid:!1,reason:"Unable to commit due to other pending changes affecting this line."}:{isValid:!0}}function s(e){if(!e||e.subjectType?.toUpperCase()!=="LINE")return;let t=e.positioning??e.subject;if(!t)return;let n=t.startDiffSide??t.endDiffSide;if(!n||"isOutdated"in t&&t.isOutdated||!t.endLine||!t.endDiffSide)return;let i=t.startLine??t.endLine;return{endLineNumber:t.endLine,endOrientation:t.endDiffSide,startLineNumber:i,startOrientation:n||"RIGHT"}}},80770:(e,t,n)=>{n.d(t,{C:()=>l,n:()=>r});var i=n(21728),a=n(97286),s=n(99519);let r="all-loops";function l(){let e,t,n=(0,i.c)(3),l=(0,s.EY)();return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=[r],n[0]=e):e=n[0],n[1]!==l?(t={queryKey:e,queryFn:async()=>{let e=await l.getAllLoops();if(!e.success)throw Error(e.error);return e.data.sort(o)},refetchOnMount:!0},n[1]=l,n[2]=t):t=n[2],(0,a.I)(t)}function o(e,t){return t.updatedAt-e.updatedAt}},80947:(e,t,n)=>{n.d(t,{G:()=>tM,o:()=>t$});var i=n(74848),a=n(4817),s=n(96540),r=n(48881),l=n(85094),o=n(47970),d=n(21728),c=n(46665),u=n(26100),m=n(39876),h=n(51213),f=n(35247),p=n(23967),g=n(22072),y=n(53419),x=n(38621),v=n(69726),b=n(26108),j=n(34164),w=n(1747),_=n(36903);function C(e){let t,n,a,s=(0,d.c)(4),{className:r}=e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)("g",{clipPath:"url(#clip0_6911_7629)",fill:"currentColor",children:(0,i.jsx)("path",{d:"M14.722 6.047a.75.75 0 11-1.5 0V3.615L10.2 6.638a.75.75 0 01-1.06-1.06l3.023-3.024H9.729a.75.75 0 010-1.499h4.243a.75.75 0 01.75.75v4.242zM1.278 9.953a.75.75 0 111.5 0v2.432L5.8 9.362a.75.75 0 011.06 1.06l-3.023 3.024h2.433a.75.75 0 010 1.499H2.028a.75.75 0 01-.75-.75V9.953z"})}),s[0]=t):t=s[0],s[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_6911_7629",children:(0,i.jsx)("path",{fill:"#fff",d:"M0 0H16V16H0z"})})}),s[1]=n):n=s[1],s[2]!==r?(a=(0,i.jsxs)("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",role:"presentation",className:r,children:[t,n]}),s[2]=r,s[3]=a):a=s[3],a}try{C.displayName||(C.displayName="ExpandIcon")}catch{}let N="FileBlock-module__container--Dzsqa",S="FileBlock-module__header--AdNd3",I="FileBlock-module__language--hjnkp",k="FileBlock-module__name--PRLLi",L="FileBlock-module__previewCode--xp45Y",T="FileBlock-module__isClipped--g6E0E",D="FileBlock-module__expandIconContainer--re33w",E="FileBlock-module__actionsContainer--FCHFZ";function R(e){return e.replace(/#L\d+(-L\d+)?$/,"")}function A(e){let t,n,l,o,A,M,$,B,V,U,q,G,H,K,W,z,Q,Z,J,Y,X,ee,et,en,ei,ea=(0,d.c)(102),{language:es,name:er,url:el,code:eo,line:ed,children:ec,isClipped:eu,isStreaming:em,index:eh,startOffset:ef,endOffset:ep}=e,{message:eg}=(0,c.V)();if(ea[0]!==er||ea[1]!==el){let e=f.W.copilotLinkableFilePaths&&el?(0,_.as)(el):null;t=e?.repoOwner&&e?.repoName?(0,_.L2)(e.repoOwner,e.repoName,e.filePath):er,ea[0]=er,ea[1]=el,ea[2]=t}else t=ea[2];let ey=t,{updateItem:ex,openItem:ev,openPreviewPane:eb,versionedItems:ej,getOpenItems:ew}=(0,w.xx)(),{messageIndex:e_,messageId:eC,messageTimestamp:eN,autoOpenPreviewPane:eS,markdown:eI,hasAutoOpenedPreviewPaneRef:ek,setHasAutoOpenedPreviewPane:eL}=(0,r.H)(),{name:eT}=(0,p.vL)(es),eD=`file:${er}`,eE=`${eD}#${e_}.${ed}`,eR=!!eo;ea[3]!==eD||ea[4]!==eE||ea[5]!==ej?(n=(l=ej.get(eD)??[]).indexOf(eE),ea[3]=eD,ea[4]=eE,ea[5]=ej,ea[6]=n,ea[7]=l):(n=ea[6],l=ea[7]);let eA=n,eO=l.length>1&&-1!==eA?eA+1:null,eP=(0,s.useRef)(null);ea[8]!==eg.references||ea[9]!==el?(o=function(e,t){if(!f.W.fileBlockRefMatching||!e||!t)return;let n=R(e);return t.find(e=>R(e.url)===n)}(el,eg.references?.filter(F)),ea[8]=eg.references,ea[9]=el,ea[10]=o):o=ea[10];let eF=o;ea[11]!==eF||ea[12]!==ew||ea[13]!==eE||ea[14]!==eh||ea[15]!==ev||ea[16]!==eb?(A=(e,t)=>{(0,y.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_OPENED",mode:"immersive",...f.W.fileBlockRefMatching?{isRepoFile:!!eF}:{}}),ev(eE,void 0===t||t||ew().length<1||0===eh),e&&eb(eP.current)},ea[11]=eF,ea[12]=ew,ea[13]=eE,ea[14]=eh,ea[15]=ev,ea[16]=eb,ea[17]=A):A=ea[17];let eM=A;ea[18]!==eo||ea[19]!==eF||ea[20]!==eE||ea[21]!==em||ea[22]!==es||ea[23]!==eI||ea[24]!==eC||ea[25]!==eN||ea[26]!==er||ea[27]!==eR||ea[28]!==ex?(M=()=>{let e=eo?.trimEnd();eR&&eC!==h.Wp&&-1!==eI.indexOf(e)&&(f.W.fileBlockRefMatching?ex({messageId:eC,id:eE,language:es,name:er,value:eo,type:"file",timestamp:new Date(eN),isStreaming:em,isUserEdited:!1,reference:(()=>{if(!eF)return;let e=function(e){if(!f.W.fileBlockRefMatching||!e)return null;let t=/^https?:\/\/(?:github|.*\.ghe)\.com\/([^/]+)\/([^/]+)/.exec(e);return t&&t[1]&&t[2]?{owner:t[1],name:t[2]}:null}(eF.url);return{type:"file",url:R(eF.url),path:eF.path,repoID:eF.repoID,repoOwner:e?.owner??eF.repoOwner??"",repoName:e?.name??eF.repoName??"",ref:eF.ref,commitOID:eF.commitOID}})()}):ex({messageId:eC,id:eE,language:es,name:er,value:eo,type:"file",timestamp:new Date(eN),isStreaming:em,isUserEdited:!1}))},ea[18]=eo,ea[19]=eF,ea[20]=eE,ea[21]=em,ea[22]=es,ea[23]=eI,ea[24]=eC,ea[25]=eN,ea[26]=er,ea[27]=eR,ea[28]=ex,ea[29]=M):M=ea[29],ea[30]!==eo||ea[31]!==eF||ea[32]!==eE||ea[33]!==eh||ea[34]!==em||ea[35]!==es||ea[36]!==eI||ea[37]!==eC||ea[38]!==eN||ea[39]!==er||ea[40]!==eR||ea[41]!==ex||ea[42]!==el?($=[eo,es,eC,er,el,ex,eE,eR,eN,em,eI,eF,eh],ea[30]=eo,ea[31]=eF,ea[32]=eE,ea[33]=eh,ea[34]=em,ea[35]=es,ea[36]=eI,ea[37]=eC,ea[38]=eN,ea[39]=er,ea[40]=eR,ea[41]=ex,ea[42]=el,ea[43]=$):$=ea[43],(0,s.useEffect)(M,$),ea[44]!==eS||ea[45]!==ek||ea[46]!==em||ea[47]!==eC||ea[48]!==eM||ea[49]!==eR||ea[50]!==eL?(B=()=>{em&&eR&&eC!==h.Wp&&(eM(eS&&!ek.current,!1),eL(!0))},V=[em,eR,eM,eS,eC,ek,eL],ea[44]=eS,ea[45]=ek,ea[46]=em,ea[47]=eC,ea[48]=eM,ea[49]=eR,ea[50]=eL,ea[51]=B,ea[52]=V):(B=ea[51],V=ea[52]),(0,s.useEffect)(B,V);let[e$,eB]=(0,s.useState)(!1),{publicCodeReferences:eV,codeVulnerabilities:eU}=(0,m.R)(eg.copilotAnnotations,ef,ep);ea[53]!==eM?(U=()=>eM(!0),q=e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),eM(!0))},ea[53]=eM,ea[54]=U,ea[55]=q):(U=ea[54],q=ea[55]);let eq=`View file: ${er}`,eG=`chat-message-view-file-${er}`,eH=em?(0,i.jsx)(v.A,{size:"small",className:a.sX}):p.Yr.has(eT)?(0,i.jsx)(x.MarkdownIcon,{className:a.sX}):(0,i.jsx)(x.CodeIcon,{className:a.sX});ea[56]!==ey?(G=(0,i.jsx)("span",{className:k,children:ey}),ea[56]=ey,ea[57]=G):G=ea[57],ea[58]!==eO?(H=null!==eO&&(0,i.jsx)(u.g,{version:eO}),ea[58]=eO,ea[59]=H):H=ea[59],ea[60]!==I||ea[61]!==eH||ea[62]!==G||ea[63]!==H?(K=(0,i.jsxs)("div",{className:I,children:[eH,G,H]}),ea[60]=I,ea[61]=eH,ea[62]=G,ea[63]=H,ea[64]=K):K=ea[64],ea[65]!==eU||ea[66]!==eV.length||ea[67]!==eB?(W=(eV.length>0||eU.length>0)&&(0,i.jsx)(b.K,{variant:"invisible",size:"small",icon:x.ShieldIcon,"aria-label":"Code insights",onClick:e=>{e.stopPropagation(),eB(!0)},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.stopPropagation(),eB(!0))}}),ea[65]=eU,ea[66]=eV.length,ea[67]=eB,ea[68]=W):W=ea[68],ea[69]!==el?(z=f.W.copilotLinkableFilePaths&&el&&(0,i.jsx)(b.K,{as:"a","aria-label":"Go to the file",icon:x.LinkExternalIcon,variant:"invisible",href:el,size:"small",onClick:P,onKeyDown:O}),ea[69]=el,ea[70]=z):z=ea[70],ea[71]===Symbol.for("react.memo_cache_sentinel")?(Q=(0,i.jsx)("div",{className:D,children:(0,i.jsx)(C,{})}),ea[71]=Q):Q=ea[71],ea[72]!==W||ea[73]!==z?(Z=(0,i.jsxs)("div",{className:E,children:[W,z,Q]}),ea[72]=W,ea[73]=z,ea[74]=Z):Z=ea[74],ea[75]!==S||ea[76]!==K||ea[77]!==Z?(J=(0,i.jsxs)("div",{className:S,children:[K,Z]}),ea[75]=S,ea[76]=K,ea[77]=Z,ea[78]=J):J=ea[78];let eK=eu&&T;return ea[79]!==eK?(Y=(0,j.$)(L,eK),ea[79]=eK,ea[80]=Y):Y=ea[80],ea[81]!==ec?(X=(0,i.jsx)("code",{children:ec}),ea[81]=ec,ea[82]=X):X=ea[82],ea[83]!==Y||ea[84]!==X?(ee=(0,i.jsx)("pre",{className:Y,"aria-hidden":!0,children:X}),ea[83]=Y,ea[84]=X,ea[85]=ee):ee=ea[85],ea[86]!==N||ea[87]!==U||ea[88]!==q||ea[89]!==eq||ea[90]!==eG||ea[91]!==J||ea[92]!==ee?(et=(0,i.jsx)("div",{className:"position-relative",children:(0,i.jsxs)("div",{ref:eP,className:N,onClick:U,onKeyDown:q,role:"button",tabIndex:0,"aria-label":eq,"data-testid":eG,children:[J,ee]})}),ea[86]=N,ea[87]=U,ea[88]=q,ea[89]=eq,ea[90]=eG,ea[91]=J,ea[92]=ee,ea[93]=et):et=ea[93],ea[94]!==eU||ea[95]!==e$||ea[96]!==eV||ea[97]!==eB?(en=e$&&(0,i.jsx)(g.t,{publicCodeReferences:eV,codeVulnerabilities:eU,onClose:()=>eB(!1)}),ea[94]=eU,ea[95]=e$,ea[96]=eV,ea[97]=eB,ea[98]=en):en=ea[98],ea[99]!==et||ea[100]!==en?(ei=(0,i.jsxs)(i.Fragment,{children:[et,en]}),ea[99]=et,ea[100]=en,ea[101]=ei):ei=ea[101],ei}function O(e){("Enter"===e.key||" "===e.key)&&e.stopPropagation()}function P(e){return e.stopPropagation()}function F(e){return"file"===e.type||"file-v2"===e.type||"snippet"===e.type}try{A.displayName||(A.displayName="FileBlock")}catch{}let M="data-fileblock-props",$=(0,l.F)(M),B=/^name=(?<name>[^\s]+)/,V=/^name=(?<name>[^\s]+)\n?/,U=/url=(?<url>[^\s]+)/,q={code:(e,t)=>{let n=(0,l.k)(e,M);return n?(0,i.jsx)(A,{...n,children:e.children}):t}};var G=n(50467);let H=/^type=(?<type>[^\s]+)\n?/;let YamlBlockExtension=class YamlBlockExtension{get dataProperty(){return(0,l.F)(this.dataAttribute)}constructor(){(0,G._)(this,"transformMarkdown",e=>{(0,o.YR)(e,"code",e=>{let t,n=e.lang;if(!n)return;let i=(t=H.exec(e.meta??"")?.groups?.type??"").startsWith('"')&&t.endsWith('"')||t.startsWith("'")&&t.endsWith("'")?t.slice(1,-1):t;if(!i)return;let a={lang:n,type:i,value:e.value,isStreaming:e.isStreaming};if(!this.isSupported(a))return;let s=this.extractProps(a);e.data={hName:"div",hProperties:{[this.dataProperty]:JSON.stringify(s)},hChildren:[]}})}),(0,G._)(this,"transformHtml",e=>{(0,o.YR)(e,"element",(e,t,n)=>{let i=e.children?.[0];n&&null!=t&&"pre"===e.tagName&&e.children?.length===1&&i?.type==="element"&&this.dataProperty in i.properties&&n.children.splice(t,1,i)})}),(0,G._)(this,"reactComponents",{div:(e,t)=>{let n=(0,l.k)(e,this.dataAttribute);return n?this.createComponent(n):t}})}};var K=n(72994),W=n(20382),z=n(7812),Q=n(28177),Z=n(39344),J=n(2635),Y=n(73952);function X(){let{messages:e}=(0,J.Pk)(),t=(0,Y.B)(e);return(0,s.useMemo)(()=>t.flatMap(e=>e.mediaContent||[]),[t])}function ee(e){let t=X();return e?et(e,t):""}function et(e,t){if(!e)return"";let n=e.match(/(!\[.*?\]\(image\d+\))/g);if(null==n)return e;for(let i of n){let n=/\(image(\d+)\)/,a=parseInt(i.match(n)[1],10),s=t.length-a,r=t[s]?.chatAttachmentUrl||t[s]?.url;if(r){let t=i.replace(n,`(${r})`);e=e.replace(i,t)}}return e}var en=n(7026),ei=n(69599),ea=n(46996),es=n(99852);let er=e=>e.replace(/\\n/g,`
`).replace(/^\s+|\s+$/g,""),el=(e,t)=>{let n=(e||[]).map(e=>er(e)),i=(t||[]).map(e=>er(e));return n.length===i.length&&(0,ea.A)((0,es.A)(n),(0,es.A)(i))},eo=e=>null==e?"":er(e),ed=e=>{if(Array.isArray(e)){let t=e.map(e=>"string"==typeof e?er(e):String(e));return`[${t.join(",")}]`}return"string"==typeof e||null==e?eo(e):JSON.stringify(e)},ec=(e,t)=>{let n=[],i={};return eo(e.title)!==eo(t.title)&&(n.push("title"),i.title={expected:ed(t.title),actual:ed(e.title)}),eo(e.body)!==eo(t.description)&&(n.push("body"),i.body={expected:ed(t.description),actual:ed(e.body)}),eo(e.repository)!==eo(t.repository)&&(n.push("repository"),i.repository={expected:ed(t.repository),actual:ed(e.repository)}),eo(e.template)!==eo(t.template)&&(n.push("template"),i.template={expected:ed(t.template),actual:ed(e.template)}),eo(e.issueType)!==eo(t.issueType)&&(n.push("issueType"),i.issueType={expected:ed(t.issueType),actual:ed(e.issueType)}),eo(e.milestone)!==eo(t.milestone)&&(n.push("milestone"),i.milestone={expected:ed(t.milestone),actual:ed(e.milestone)}),el(e.assignees,t.assignees)||(n.push("assignees"),i.assignees={expected:ed(t.assignees),actual:ed(e.assignees)}),el(e.labels,t.labels)||(n.push("labels"),i.labels={expected:ed(t.labels),actual:ed(e.labels)}),((e,t)=>{let n=e||[],i=t||[];if(n.length!==i.length)return!1;if(0===n.length)return!0;if(!(n.some(e=>"string"==typeof e)||i.some(e=>"string"==typeof e))&&n.every(e=>"object"==typeof e&&e.id)&&i.every(e=>"object"==typeof e&&e.id)){let e=n.map(e=>er(e.id||"")),t=i.map(e=>er(e.id||""));return(0,ea.A)((0,es.A)(e),(0,es.A)(t))}let a=e=>"string"==typeof e?e:e.title||"",s=n.map(e=>er(a(e))),r=i.map(e=>er(a(e)));return(0,ea.A)((0,es.A)(s),(0,es.A)(r))})(e.projects,t.projects)||(n.push("projects"),i.projects={expected:ed(t.projects),actual:ed(e.projects)}),(0,ea.A)(e.templateFormValues,t.templateFormValuesById)||(n.push("templateFormValues"),i.templateFormValues={expected:ed(t.templateFormValuesById),actual:ed(e.templateFormValues)}),el(e.blockedByTags,t.blockedByTags)||(n.push("blockedByTags"),i.blockedByTags={expected:ed(t.blockedByTags),actual:ed(e.blockedByTags)}),el(e.isBlockingTags,t.isBlockingTags)||(n.push("isBlockingTags"),i.isBlockingTags={expected:ed(t.isBlockingTags),actual:ed(e.isBlockingTags)}),{isEqual:0===n.length,mismatchedFields:n,fieldComparisons:i}};function eu(e){let t,n,i=(0,d.c)(8),{issues:a,isStreaming:l,isIssueTree:o}=e,c=void 0!==o&&o,{messages:u,threadSelectedAt:m}=(0,J.Pk)(),{messageId:h}=(0,r.H)();i[0]!==c||i[1]!==l||i[2]!==a||i[3]!==h||i[4]!==u||i[5]!==m?(t=()=>{let e=(0,Y.B)(u),t=e[e.length-1],n=e.find(e=>e.id===h);if(!l&&n&&"assistant"===n.role&&n.id===t?.id&&new Date(n.createdAt)>=m&&n.references&&a.length>0){let e=n.references.filter(em);for(let t of a)if(t.tag){let n=e.find(e=>e.tag===t.tag);if(n){let e=ec(t,n);if(!e.isEqual)return void(0,y.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_DRAFT_ISSUE_REFERENCE_MISMATCH",mode:"immersive",messageId:h,issueTree:c,mismatchedFields:e.mismatchedFields.join(","),fieldComparisons:JSON.stringify(e.fieldComparisons),yamlMarshaled:(0,ei.G7)("copilot_api_agentic_issue_marshal_yaml")})}}}},n=[l,a,u,m,c,h],i[0]=c,i[1]=l,i[2]=a,i[3]=h,i[4]=u,i[5]=m,i[6]=t,i[7]=n):(t=i[6],n=i[7]),(0,s.useEffect)(t,n)}function em(e){return"draft-issue"===e.type||"draft-update-issue"===e.type}let eh=e=>{if("object"!=typeof e||null==e)return null;let t={};return"title"in e&&"string"==typeof e.title?t.title=e.title:"name"in e&&"string"==typeof e.name&&(t.title=e.name),"tag"in e&&"string"==typeof e.tag&&(t.tag=e.tag),"template-form-values"in e&&"object"==typeof e["template-form-values"]&&null!=e["template-form-values"]&&(t.templateFormValues=Object.fromEntries(Object.entries(e["template-form-values"]).map(([e,t])=>[e,"string"==typeof t?t.trim():t]))),"description"in e&&"string"==typeof e.description&&(t.body=e.description),"labels"in e&&Array.isArray(e.labels)&&(t.labels=e.labels.filter(e=>"string"==typeof e)),"assignees"in e&&Array.isArray(e.assignees)&&(t.assignees=e.assignees.filter(e=>"string"==typeof e)),"repository"in e&&"string"==typeof e.repository&&(t.repository=e.repository),"template"in e&&"string"==typeof e.template&&(t.template=e.template),"projects"in e&&Array.isArray(e.projects)&&(t.projects=e.projects.filter(e=>"string"==typeof e||"object"==typeof e&&null!=e)),"milestone"in e&&"string"==typeof e.milestone&&(t.milestone=e.milestone),"state"in e&&"string"==typeof e.state&&(t.state=e.state),"parentTag"in e&&"string"==typeof e.parentTag&&(t.parentTag=e.parentTag),"issueNumber"in e&&"number"==typeof e.issueNumber&&(t.issueNumber=e.issueNumber),"blockedByTags"in e&&Array.isArray(e.blockedByTags)&&(t.blockedByTags=e.blockedByTags.filter(e=>"string"==typeof e)),"isBlockingTags"in e&&Array.isArray(e.isBlockingTags)&&(t.isBlockingTags=e.isBlockingTags.filter(e=>"string"==typeof e)),"bodyVersion"in e&&"string"==typeof e.bodyVersion&&(t.bodyVersion=e.bodyVersion),"issueType"in e&&"string"==typeof e.issueType&&(t.issueType=e.issueType),"type"in e&&"string"==typeof e.type&&(t.type=e.type),t},ef=e=>{try{let t=(0,W.Hh)(e);return eh(t)}catch{return null}};function ep(e){let t,n,l,o,c,m,h,p,g,x,b,j,_,C,N,S,I,k,L,T=(0,d.c)(87),{yaml:D,isStreaming:E}=e,[R,A]=(0,s.useState)(E);T[0]!==E?(t=()=>{E&&A(!0)},n=[E],T[0]=E,T[1]=t,T[2]=n):(t=T[1],n=T[2]),(0,s.useEffect)(t,n);let{updateItem:O,openItem:P,openPreviewPane:F,closeItem:M,versionedItems:$,items:B}=(0,w.xx)(),{messageId:V,messageIndex:U,autoOpenPreviewPane:q,hasAutoOpenedPreviewPaneRef:G,setHasAutoOpenedPreviewPane:H}=(0,r.H)();D=ee(D),T[3]===Symbol.for("react.memo_cache_sentinel")?(l={},T[3]=l):l=T[3];let W=(0,en.M)(D,ef,l);T[4]!==W?(o=[W],T[4]=W,T[5]=o):o=T[5],T[6]!==E||T[7]!==o?(c={issues:o,isStreaming:E,isIssueTree:!1},T[6]=E,T[7]=o,T[8]=c):c=T[8],eu(c),T[9]===Symbol.for("react.memo_cache_sentinel")?(m=[],T[9]=m):m=T[9],(0,s.useEffect)(ex,m),T[10]!==E||T[11]!==W.type?(h="new-issue",f.W.draftUpdateIssue&&(h=null==W.type&&E?void 0:"draft-update-issue"===W.type?"update-issue":"new-issue"),T[10]=E,T[11]=W.type,T[12]=h):h=T[12];let J=null!=W.tag&&null!=h?`${h}:${W.tag}#${U}`:void 0;T[13]!==J||T[14]!==$?(p=null!=J?(0,z.LU)(J,$):null,T[13]=J,T[14]=$,T[15]=p):p=T[15];let Y=p;T[16]!==J||T[17]!==B?(g=null!=J?B.get(J):void 0,T[16]=J,T[17]=B,T[18]=g):g=T[18];let X=g,et=W.repository||null==h||X?.type!==h?W.repository:X.repository||"";T[19]!==q||T[20]!==G||T[21]!==J||T[22]!==P||T[23]!==F||T[24]!==H?(x=e=>{let{selectItem:t,event:n}=e;null!=J&&(P(J,t),(t||q&&!G.current)&&(F(n?.currentTarget),H(!0)),(0,y.BI)("dotcom_chat.activate",{target:"BROWSER_DRAFT_ISSUE_OPENED",mode:"immersive"}))},T[19]=q,T[20]=G,T[21]=J,T[22]=P,T[23]=F,T[24]=H,T[25]=x):x=T[25];let ei=x;T[26]!==W.projects?(b=(0,K.c)(W.projects),T[26]=W.projects,T[27]=b):b=T[27];let ea=b;T[28]!==M||T[29]!==h||T[30]!==J||T[31]!==E||T[32]!==W.assignees||T[33]!==W.body||T[34]!==W.bodyVersion||T[35]!==W.issueNumber||T[36]!==W.issueType||T[37]!==W.labels||T[38]!==W.milestone||T[39]!==W.parentTag||T[40]!==W.tag||T[41]!==W.template||T[42]!==W.templateFormValues||T[43]!==W.title||T[44]!==V||T[45]!==ea||T[46]!==et||T[47]!==O?(j=()=>{null!=J&&("update-issue"===h&&et&&W.issueNumber&&M(`issue:${et}/${W.issueNumber}`),O({messageId:V,name:W.title??"",body:W.body,bodyVersion:W.bodyVersion,repository:et,id:J,type:h,tag:W.tag??"",parentTag:W.parentTag,isStreaming:E,template:W.template,issueType:W.issueType,milestone:W.milestone,assignees:W.assignees?.sort(),labels:W.labels?.sort(),projects:ea,rawProjectsInput:ea.map(ey).filter(eg).sort(),isUserEdited:!1,defaultValuesById:W.templateFormValues??{},issueNumber:W.issueNumber}))},T[28]=M,T[29]=h,T[30]=J,T[31]=E,T[32]=W.assignees,T[33]=W.body,T[34]=W.bodyVersion,T[35]=W.issueNumber,T[36]=W.issueType,T[37]=W.labels,T[38]=W.milestone,T[39]=W.parentTag,T[40]=W.tag,T[41]=W.template,T[42]=W.templateFormValues,T[43]=W.title,T[44]=V,T[45]=ea,T[46]=et,T[47]=O,T[48]=j):j=T[48],T[49]!==M||T[50]!==h||T[51]!==J||T[52]!==E||T[53]!==W.assignees||T[54]!==W.body||T[55]!==W.bodyVersion||T[56]!==W.issueNumber||T[57]!==W.issueType||T[58]!==W.labels||T[59]!==W.milestone||T[60]!==W.parentTag||T[61]!==W.projects||T[62]!==W.tag||T[63]!==W.template||T[64]!==W.templateFormValues||T[65]!==W.title||T[66]!==V||T[67]!==ea||T[68]!==et||T[69]!==O?(_=[M,h,J,E,W.assignees,W.body,W.bodyVersion,W.issueNumber,W.issueType,W.labels,W.milestone,W.parentTag,W.projects,W.tag,W.template,W.templateFormValues,W.title,V,ea,et,O],T[49]=M,T[50]=h,T[51]=J,T[52]=E,T[53]=W.assignees,T[54]=W.body,T[55]=W.bodyVersion,T[56]=W.issueNumber,T[57]=W.issueType,T[58]=W.labels,T[59]=W.milestone,T[60]=W.parentTag,T[61]=W.projects,T[62]=W.tag,T[63]=W.template,T[64]=W.templateFormValues,T[65]=W.title,T[66]=V,T[67]=ea,T[68]=et,T[69]=O,T[70]=_):_=T[70],(0,s.useEffect)(j,_),T[71]!==R||T[72]!==J||T[73]!==ei?(C=()=>{null!=J&&R&&ei({selectItem:!0})},N=[J,ei,R],T[71]=R,T[72]=J,T[73]=ei,T[74]=C,T[75]=N):(C=T[74],N=T[75]),(0,s.useEffect)(C,N);let es=W.title??"";return T[76]!==E?(S=E?(0,i.jsx)(v.A,{size:"small",className:a.sX}):(0,i.jsx)(Q.n,{type:"new-issue"}),T[76]=E,T[77]=S):S=T[77],T[78]!==Y?(I=null!=Y&&(0,i.jsx)(u.g,{"data-testid":"version-label",version:Y}),T[78]=Y,T[79]=I):I=T[79],T[80]!==ei?(k=e=>ei({selectItem:!0,event:e}),T[80]=ei,T[81]=k):k=T[81],T[82]!==es||T[83]!==S||T[84]!==I||T[85]!==k?(L=(0,i.jsx)(Z.K,{subIssueCount:0,children:(0,i.jsx)(Z.K.RootItem,{title:es,leadingVisual:S,trailingBadge:I,onClick:k})}),T[82]=es,T[83]=S,T[84]=I,T[85]=k,T[86]=L):L=T[86],L}function eg(e){return""!==e}function ey(e){return e.title||""}function ex(){return(0,y.BI)("dotcom_chat.activate",{target:"ISSUE_DRAFT_BLOCK_RENDERED",mode:"immersive"})}try{ep.displayName||(ep.displayName="DraftIssueBlock")}catch{}let ev=new class extends YamlBlockExtension{get dataAttribute(){return"data-draft-issue-block"}isSupported(e){return"yaml"===e.lang&&"draft-issue"===e.type}extractProps(e){return{yaml:e.value,isStreaming:e.isStreaming??!1}}createComponent(e){return(0,i.jsx)(ep,{...e})}};var eb=n(46461),ej=n(13974);let ew="DraftIssueTreeBlock-module__container--framP",e_=e=>{if("object"!=typeof e||null===e)return null;let t={};return"tag"in e&&"string"==typeof e.tag&&(t.tag=e.tag),"parentTag"in e&&"string"==typeof e.parentTag&&(t.parentTag=e.parentTag),"title"in e&&"string"==typeof e.title?t.title=e.title:"name"in e&&"string"==typeof e.name&&(t.title=e.name),"repository"in e&&"string"==typeof e.repository&&(t.repository=e.repository),"number"in e&&"number"==typeof e.number&&(t.number=e.number),"state"in e&&"string"==typeof e.state&&(t.state=e.state),"url"in e&&"string"==typeof e.url&&(t.url=e.url),"blockedByTags"in e&&Array.isArray(e.blockedByTags)&&(t.blockedByTags=e.blockedByTags.filter(e=>"string"==typeof e)),"isBlockingTags"in e&&Array.isArray(e.isBlockingTags)&&(t.isBlockingTags=e.isBlockingTags.filter(e=>"string"==typeof e)),t};function eC(e){try{let t=(0,W.Hh)(e);if("object"==typeof t&&null!==t&&"data"in t&&Array.isArray(t.data))return t.data.map(e_).filter(e=>!!e).filter(e=>!!e.tag);return null}catch{return null}}function eN({data:e}){let t=(0,en.M)(e,eC,[]),{messageId:n}=(0,r.H)(),{updateItem:a,openItem:l,openPreviewPane:o}=(0,w.xx)(),d=(0,s.useMemo)(()=>Array.from((0,eb.G9)(t,e=>e.tag,e=>e.parentTag,e=>e.blockedByTags,e=>e.isBlockingTags).values()).filter(e=>!e.parent),[t]);function c(e,t){if(!e.url)return;let[i,s]=e.repository?.split("/")??[];if(!i||!s||!e.number)return;let r=`issue:${i}/${s}/${e.number}`;a({messageId:n,name:e.title??"",number:e.number,owner:i,repo:s,id:r,href:e.url,type:"issue"}),l(r),o(t?.currentTarget)}let u=e=>e.blockedBy.map(e=>({title:e.item.title??"",href:e.item.url,onClick:t=>{t.metaKey||t.ctrlKey||(t.preventDefault(),c(e.item,t))}}));function m(e){return(0,i.jsx)(Z.K.Item,{title:e.item.title??"",leadingVisual:(0,i.jsx)(eS,{item:e.item}),trailingBadge:(0,i.jsx)(eI,{node:e}),href:e.item.url,onClick:t=>{if(!t.metaKey&&!t.ctrlKey)return t.preventDefault(),c(e.item,t)},blockedBy:u(e),children:e.children.map(m)},e.item.tag)}return(0,i.jsx)("div",{className:ew,children:d.map(e=>{let t=-1;return(0,eb.YR)(e,()=>t++),(0,i.jsxs)(Z.K,{subIssueCount:t,children:[(0,i.jsx)(Z.K.RootItem,{leadingVisual:(0,i.jsx)(eS,{item:e.item}),title:e.item.title??"",trailingBadge:(0,i.jsx)(eI,{node:e}),href:e.item.url,onClick:t=>{if(!t.metaKey&&!t.ctrlKey)return t.preventDefault(),c(e.item,t)},blockedBy:u(e)}),e.children.map(m)]},e.item.tag)})})}function eS(e){let t=(0,d.c)(2),{item:n}=e;if("open"===n.state){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(x.IssueOpenedIcon,{className:"fgColor-open"}),t[0]=e):e=t[0],e}if("closed"===n.state){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(x.IssueClosedIcon,{className:"fgColor-done"}),t[1]=e):e=t[1],e}}function eI(e){let t,n=(0,d.c)(5),{node:a}=e;if(!a.item.repository||!a.item.number)return null;if(a.item.repository===a.parent?.item.repository){let e;return n[0]!==a.item.number?(e=(0,i.jsxs)("span",{className:"fgColor-muted no-wrap",children:["#",a.item.number]}),n[0]=a.item.number,n[1]=e):e=n[1],e}return n[2]!==a.item.number||n[3]!==a.item.repository?(t=(0,i.jsxs)("span",{className:"fgColor-muted no-wrap",children:[a.item.repository,"#",a.item.number]}),n[2]=a.item.number,n[3]=a.item.repository,n[4]=t):t=n[4],t}try{eN.displayName||(eN.displayName="IssueTreeBlock")}catch{}try{eS.displayName||(eS.displayName="LeadingVisual")}catch{}try{eI.displayName||(eI.displayName="IssueLocation")}catch{}function ek(e){return"state"in e&&"draft"===e.state}function eL(e){return"state"in e&&("open"===e.state||"closed"===e.state)}function eT({data:e,isStreaming:t}){let{message:n}=(0,c.V)(),a=n.references?.filter(e=>"draft-issue"===e.type||"draft-update-issue"===e.type||"existing-issue"===e.type),l=ee(e),o=X(),d=(0,s.useRef)(o);(0,s.useEffect)(()=>{d.current=o},[o]);let m=(0,s.useMemo)(()=>{if(f.W.draftIssueUseRefForDraftBlock&&a){let t=function(e){try{let t=(0,W.gh)(e);if(Array.isArray(t))return t.filter(e=>"object"==typeof e&&null!=e).filter(e=>"tag"in e&&"string"==typeof e.tag).map(e=>e.tag);return[]}catch{return[]}}(l);if(t.length>0&&a.length>0){var e;return e=d.current,t.map(t=>{var n,i;let s=a.find(e=>e.tag===t);return s&&(n=[s],i=e,n.map(e=>{let t;if("existing-issue"===e.type)return{tag:e.tag,parentTag:e.parentTag,title:e.title,repository:e.repository,number:e.number,state:e.state,url:e.url};let n=et(e.description||"",i);if(e.templateFormValuesById){for(let[n,a]of(t={},Object.entries(e.templateFormValuesById)))if(a)try{let e=JSON.parse(a);if(e&&"object"==typeof e&&"string"==typeof e.content){let a=et(e.content,i);t[n]=a.trim()}else{let e=et("string"==typeof a?a:"",i);t[n]=e.trim()}}catch{let e=et("string"==typeof a?a:"",i);t[n]=e.trim()}}return{title:e.title,tag:e.tag,body:n,labels:e.labels,assignees:e.assignees,repository:e.repository,parentTag:e.parentTag,templateFormValues:t,issueType:e.issueType,projects:e.projects,milestone:e.milestone,issueNumber:e.issueNumber,blockedByTags:e.blockedByTags,bodyVersion:e.bodyVersion,type:e.type,template:e.template,state:"draft"}}).filter(e=>!!e.tag))[0]||null}).filter(e=>null!==e)}}return function(e){try{let t=(0,W.gh)(e);if(Array.isArray(t))return t.filter(e=>"object"==typeof e&&null!=e).map(e=>{switch("state"in e?e.state:void 0){case void 0:case"draft":return eh(e);case"open":case"closed":return e_(e)}}).filter(e=>!!e).filter(e=>!!e.tag);return null}catch{return null}}(l)||[]},[l,a]),{items:h,updateItem:p,openItem:g,openPreviewPane:x,closeItem:v,versionedItems:b}=(0,w.xx)(),{messageId:j,messageIndex:_,autoOpenPreviewPane:C,hasAutoOpenedPreviewPaneRef:N,setHasAutoOpenedPreviewPane:S}=(0,r.H)(),I=(0,s.useCallback)(e=>{if(ek(e)&&e.tag){let t="draft-update-issue"===e.type?"update-issue":"new-issue";return`${t}:${e.tag}#${_}`}if(eL(e)&&e.repository&&e.number)return`existing-issue:${e.repository}/${e.number}`},[_]);eu({issues:m,isStreaming:t,isIssueTree:!0}),(0,s.useEffect)(()=>{for(let e of m){if(!e.tag)continue;let n=I(e);if(n){if(f.W.draftIssueUseRefForDraftBlock&&a&&h.get(n))continue;if(ek(e)){let n="draft-update-issue"===e.type?"update-issue":"new-issue",i=`${n}:${e.tag}#${_}`;"update-issue"===n&&e.repository&&e.issueNumber&&v(`issue:${e.repository}/${e.issueNumber}`),p({messageId:j,type:n,id:i,tag:e.tag,parentTag:e.parentTag,name:e.title??"",body:e.body,bodyVersion:e.bodyVersion,repository:e.repository,template:e.template,issueType:e.issueType,milestone:e.milestone,assignees:e.assignees?.sort(),labels:e.labels?.sort(),projects:e.projects?.map(e=>"object"==typeof e&&null!==e?{id:"string"==typeof e.id?e.id:void 0,title:"string"==typeof e.title?e.title:void 0}:{title:String(e)}).filter(e=>!!e.title||!!e.id).sort((e,t)=>(e.title||"").localeCompare(t.title||"")),defaultValuesById:e.templateFormValues??{},isUserEdited:!1,isStreaming:t,blockedByTags:e.blockedByTags??[],isBlockingTags:e.isBlockingTags??[],issueNumber:e.issueNumber})}eL(e)&&e.repository&&e.number&&e.url&&(v(`issue:${e.repository}/${e.number}`),p({messageId:j,type:"existing-issue",id:`existing-issue:${e.repository}/${e.number}`,tag:e.tag,parentTag:e.parentTag,repository:e.repository,number:e.number,name:e.title??"",state:e.state??"open",href:e.url,blockedByTags:e.blockedByTags??[],isBlockingTags:e.isBlockingTags??[]}))}}},[I,t,m,j,_,p,v,a,h]);let k=(0,s.useCallback)((e,{selectItem:t,event:n})=>{let i=I(e);i&&(g(i,t),(t||C&&!N.current)&&(x(n?.currentTarget),S(!0)),(0,y.BI)("dotcom_chat.activate",{target:"BROWSER_DRAFT_ISSUE_OPENED",mode:"immersive"}))},[I,g,C,N,x,S]),L=(0,s.useCallback)(e=>{let t=[...h.entries()].find(([t,n])=>(t.startsWith("new-issue:")||t.startsWith("existing-issue:"))&&("new-issue"===n.type||"existing-issue"===n.type)&&n.tag===e);if(!t)return;let[n]=t,i=(0,z.oy)(n),a=b.get(i),s=a?.at(-1);if(!s)return;let r=h.get(s);if(r)switch(r?.type){case"new-issue":case"update-issue":return{...eh(r),state:"draft"};case"existing-issue":return e_(r);default:return}},[h,b]),T=(0,s.useMemo)(()=>{let e=new Set(m.map(e=>e.tag)),t=Array.from(new Set([...new Set(m.filter(e=>null!=e.parentTag).map(e=>e.parentTag)),...new Set(m.flatMap(e=>null!=e.blockedByTags?e.blockedByTags:[]).filter(e=>null!=e)),...new Set(m.flatMap(e=>null!=e.isBlockingTags?e.isBlockingTags:[]).filter(e=>null!=e))])).filter(t=>null!=t&&!e.has(t)).map(e=>L(e)).filter(e=>null!=e),n=[...m,...t];return Array.from((0,eb.G9)(n,e=>e.tag,e=>e.parentTag,e=>e.blockedByTags,e=>e.isBlockingTags).values()).filter(e=>!e.parent)},[m,L]),D=(0,ej.p)(t);(0,s.useEffect)(()=>{if(!D)return;let e=!0;for(let t of T.values()){if(ek(t.item)){k(t.item,{selectItem:e}),e=!1;continue}for(let n of t.children)ek(n.item)&&(k(n.item,{selectItem:e}),e=!1)}},[D,T,k]);let E=e=>e.blockedBy.map(e=>({title:e.item.title??"",href:eL(e.item)?e.item.url:void 0,onClick:t=>{t.metaKey||t.ctrlKey||(t.preventDefault(),k(e.item,{selectItem:!0,event:t}))}})),R=e=>{let n=I(e.item),a=n?(0,z.LU)(n,b):null;return(0,i.jsx)(Z.K.Item,{title:e.item.title??"",leadingVisual:(0,i.jsx)(eD,{isStreaming:t,item:e.item}),trailingBadge:null!=a?(0,i.jsx)(u.g,{version:a}):void 0,onClick:t=>{t.metaKey||t.ctrlKey||(t.preventDefault(),k(e.item,{selectItem:!0,event:t}))},href:eL(e.item)?e.item.url:void 0,blockedBy:E(e),children:e.children.map(R)},e.item.tag)};return(0,i.jsx)("div",{className:ew,children:T.map(e=>{let n=I(e.item),a=n?(0,z.LU)(n,b):null,s=-1;return(0,eb.YR)(e,()=>s++),(0,i.jsxs)(Z.K,{subIssueHeaderText:eL(e.item)?"New sub-issues":void 0,subIssueCount:s,children:[(0,i.jsx)(Z.K.RootItem,{title:e.item.title??"",leadingVisual:(0,i.jsx)(eD,{isStreaming:t,item:e.item}),trailingBadge:null!=a?(0,i.jsx)(u.g,{"data-testid":"version-label",version:a}):void 0,onClick:t=>{t.metaKey||t.ctrlKey||(t.preventDefault(),k(e.item,{selectItem:!0,event:t}))},href:eL(e.item)?e.item.url:void 0,blockedBy:E(e)}),e.children.map(R)]},e.item.tag)})})}function eD(e){let t=(0,d.c)(5),{isStreaming:n,item:s}=e;if(n){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(v.A,{size:"small",className:`${a.sX} mt-1`}),t[0]=e):e=t[0],e}if(ek(s)){let e,n="draft-update-issue"===s.type?"update-issue":"new-issue";return t[1]!==n?(e=(0,i.jsx)(Q.n,{type:n}),t[1]=n,t[2]=e):e=t[2],e}if(eL(s)){let e;return t[3]!==s.state?(e=(0,i.jsx)(Q.n,{type:"existing-issue",state:s.state}),t[3]=s.state,t[4]=e):e=t[4],e}}try{eT.displayName||(eT.displayName="DraftIssueTreeBlock")}catch{}try{eD.displayName||(eD.displayName="LeadingVisual")}catch{}let eE=new class extends YamlBlockExtension{get dataAttribute(){return"data-draft-tree-issue-block"}isSupported(e){return"yaml"===e.lang&&"draft-issue-tree"===e.type}extractProps(e){return{data:e.value,isStreaming:e.isStreaming??!1}}createComponent(e){return(0,i.jsx)(eT,{...e})}};var eR=n(72534),eA=n(84268);function eO(e){let t,n,a,l,o,c,u=(0,d.c)(28),{owner:m,repo:h,issueNumber:f,href:p,children:g}=e,{updateItem:x,openItem:v,openPreviewPane:b,items:j}=(0,w.xx)(),{messageId:_}=(0,r.H)(),C=(0,J.A3)("messages"),N=(0,s.useRef)(null),S=Number(f),I=`issue:${m}/${h}/${S}`;u[0]!==I||u[1]!==j?(t=j.get(I),u[0]=I,u[1]=j,u[2]=t):t=u[2];let k=t;u[3]!==k?.name||u[4]!==_||u[5]!==C||u[6]!==S||u[7]!==m||u[8]!==h?(n=function(e,t,n,i,a){if(!n||!i||!a||isNaN(a))return;let s=e.find(e=>e.id===t),r=s?.references,l=r?.find(e=>"issue"===e.type&&e.number===a&&e.repository.name===i&&e.repository.owner===n),o=l?.title;if(o)return o;let d=r?.find(e=>"api-response"===e.type&&"Issue"===e.resourceType&&e.repo===`${n}/${i}`&&e.data.number===a),c=d?.data;return c?.title}(C,_,m,h,S)??k?.name??`Issue #${S}`,u[3]=k?.name,u[4]=_,u[5]=C,u[6]=S,u[7]=m,u[8]=h,u[9]=n):n=u[9];let L=n;return u[10]!==p||u[11]!==I||u[12]!==_||u[13]!==S||u[14]!==m||u[15]!==h||u[16]!==L||u[17]!==x?(a=()=>{m&&h&&x({messageId:_,name:L,number:S,owner:m,repo:h,id:I,href:p,type:"issue"})},l=[I,_,p,S,m,h,L,x],u[10]=p,u[11]=I,u[12]=_,u[13]=S,u[14]=m,u[15]=h,u[16]=L,u[17]=x,u[18]=a,u[19]=l):(a=u[18],l=u[19]),(0,s.useEffect)(a,l),u[20]!==I||u[21]!==v||u[22]!==b?(o=e=>{e.metaKey||e.ctrlKey||(v(I),b(N.current),(0,y.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_OPENED",mode:"immersive"}),e.preventDefault())},u[20]=I,u[21]=v,u[22]=b,u[23]=o):o=u[23],u[24]!==g||u[25]!==p||u[26]!==o?(c=(0,i.jsx)(eA.A,{ref:N,href:p,onClick:o,target:"_blank",rel:"noreferrer",children:g}),u[24]=g,u[25]=p,u[26]=o,u[27]=c):c=u[27],c}try{eO.displayName||(eO.displayName="IssueLinkBlock")}catch{}let eP="data-issuelink-props",eF=(0,l.F)(eP),eM=/\/(?<owner>[^/]+)\/(?<repo>[^/]+)\/issues\/(?<number>\d+)/,e$={span:(e,t)=>{let n=(0,l.k)(e,eP);return n?(0,i.jsx)(eO,{...n}):t}};var eB=n(77430),eV=n(10422),eU=n(29731),eq=n(62935),eG=n(26607),eH=n(24494),eK=n(69497),eW=n(91865),ez=n(77164),eQ=n(97286);function eZ(){return{}}function eJ(){return[]}let eY="IssueListBlock-module__item--gmkkY",eX="IssueListBlock-module__content--bNFq8",e0="IssueListBlock-module__title--Di3wj",e1="IssueListBlock-module__description--Uf86U",e2="IssueListBlock-module__open--CQmwr",e3="IssueListBlock-module__draft--ymDJ6",e4="IssueListBlock-module__done--bWmcu",e5="IssueListBlock-module__closed--Iuz7v",e6=e=>{if("object"!=typeof e||null===e)return{};let t={};return"url"in e&&"string"==typeof e.url&&(t.url=e.url),"state"in e&&"string"==typeof e.state&&(t.state=e.state),"draft"in e&&"boolean"==typeof e.draft&&(t.draft=e.draft),"created_at"in e&&"string"==typeof e.created_at&&(t.created_at=e.created_at),"closed_at"in e&&"string"==typeof e.closed_at&&(t.closed_at=e.closed_at),"merged_at"in e&&"string"==typeof e.merged_at&&(t.merged_at=e.merged_at),"title"in e&&"string"==typeof e.title&&(t.title=e.title),"number"in e&&"number"==typeof e.number&&(t.number=e.number),"labels"in e&&Array.isArray(e.labels)&&(t.labels=e.labels.filter(e=>"string"==typeof e)),"author"in e&&"string"==typeof e.author&&(t.author=e.author),"comments"in e&&"number"==typeof e.comments&&(t.comments=e.comments),"assignees_avatar_urls"in e&&Array.isArray(e.assignees_avatar_urls)&&(t.assignees_avatar_urls=e.assignees_avatar_urls.filter(e=>"string"==typeof e)),"repository"in e&&"string"==typeof e.repository&&(t.repository=e.repository),t};function e7(e){let t,n,a,s,r,l,o,c=(0,d.c)(15),{item:u,isStreaming:m}=e,h=u.author;u.merged_at?(l=u.merged_at,o="Merged"):u.closed_at?(l=u.closed_at,o="Closed"):u.created_at&&(l=u.created_at,o="Opened"),c[0]!==l?(n=(t=l?new Date(l):null)&&isNaN(t.getTime()),c[0]=l,c[1]=t,c[2]=n):(t=c[1],n=c[2]),n&&(t=null);let f=!!u.repository;return h&&t||!m||f?(c[3]!==h||c[4]!==f||c[5]!==u.repository||c[6]!==t?(a=f&&(0,i.jsxs)(i.Fragment,{children:[u.repository,(h||t)&&" \xb7 "]}),c[3]=h,c[4]=f,c[5]=u.repository,c[6]=t,c[7]=a):a=c[7],c[8]!==o||c[9]!==h||c[10]!==t?(s=(h||t)&&o&&(0,i.jsxs)(i.Fragment,{children:[h," ",h?o.toLowerCase():o," ",t&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(eq.A,{date:t,format:"relative"})})]}),c[8]=o,c[9]=h,c[10]=t,c[11]=s):s=c[11],c[12]!==a||c[13]!==s?(r=(0,i.jsxs)("span",{className:e1,children:[a,s]}),c[12]=a,c[13]=s,c[14]=r):r=c[14],r):null}let e8=e=>{try{let t=(0,W.Hh)(e);if("object"==typeof t&&null!==t&&"data"in t&&Array.isArray(t.data))return t.data.map(e6);return null}catch{return null}};function e9(e){let t,n,a,l,o,c,u,m=(0,d.c)(17),{data:h,type:f,isStreaming:p}=e;m[0]!==h?(t=()=>e8(h)??[],m[0]=h,m[1]=t):t=m[1];let[g,v]=(0,s.useState)(t),{updateItem:b,openItem:_,openPreviewPane:C}=(0,w.xx)(),{messageId:N}=(0,r.H)(),[S,I]=(0,s.useState)(!0);m[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,ei.G7)("copilot_issue_list_show_more"),m[2]=n):n=m[2];let k=n,L=(0,ei.G7)("copilot_coding_agent_task_response"),T=function(){let e,t,n,i,a,s,r,l=(0,d.c)(13);l[0]===Symbol.for("react.memo_cache_sentinel")?(e={queryKey:ez.ZL,queryFn:eJ,enabled:!1,notifyOnChangeProps:["data"]},l[0]=e):e=l[0];let{data:o}=(0,eQ.I)(e);l[1]!==o?(t=o||[],l[1]=o,l[2]=t):t=l[2],l[3]!==t?(n=(0,eW.ms)(t),l[3]=t,l[4]=n):n=l[4];let c=n;l[5]!==c?(i=["agent-sessions-pull-requests",c],l[5]=c,l[6]=i):i=l[6],l[7]===Symbol.for("react.memo_cache_sentinel")?(a=["data"],l[7]=a):a=l[7],l[8]!==i?(s={queryKey:i,queryFn:eZ,enabled:!1,notifyOnChangeProps:a},l[8]=i,l[9]=s):s=l[9];let{data:u}=(0,eQ.I)(s);if(l[10]!==o||l[11]!==u){if(r=new Map,o&&o.length>0)for(let e of o){if(!e.resource_global_id)continue;let t=`https://github.com/copilot/tasks/pull/${e.resource_global_id}`,n=e.resource_id&&u?u[e.resource_id]:void 0,i={state:e.latest_session_state,title:n?.title};r.set(t,i)}l[10]=o,l[11]=u,l[12]=r}else r=l[12];return r}(),D=k&&S?g.slice(0,10):g,E=k&&g.length>10;m[3]!==h?(a=()=>v(e=>e8(h)??e),l=[h],m[3]=h,m[4]=a,m[5]=l):(a=m[4],l=m[5]),(0,s.useEffect)(a,l),(0,s.useEffect)(()=>{"issue"===f?(0,y.BI)("dotcom_chat.activate",{target:"ISSUE_LIST_BLOCK_RENDERED",mode:"immersive"}):"pr"===f?(0,y.BI)("dotcom_chat.activate",{target:"PR_LIST_BLOCK_RENDERED",mode:"immersive"}):"task"===f&&L&&(0,y.BI)("dotcom_chat.activate",{target:"TASK_LIST_BLOCK_RENDERED",mode:"immersive"})},[f,L]);let R=p&&"IssueListBlock-module__streaming--sTYSD";m[6]!==R?(o=(0,j.$)("IssueListBlock-module__list--hU3Jz",R),m[6]=R,m[7]=o):o=m[7];let A=D.map((e,t)=>{let n={...e,type:f};if("task"===f&&L&&e.url){let t=T.get(e.url);t&&(n={...n,state:t.state,title:t.title??n.title})}let a=p&&t===D.length-1,{icon:s,colorClass:r}=function(e,t){let n,a=null;if("issue"===e.type)"open"!==e.state||e.draft?"closed"!==e.state||e.draft?"open"===e.state&&e.draft?(a=(0,i.jsx)(x.IssueDraftIcon,{"aria-label":"Draft issue"}),n=e3):"closed"===e.state&&e.draft&&(a=(0,i.jsx)(x.SkipIcon,{"aria-label":"Closed draft issue"}),n=e3):(a=(0,i.jsx)(x.IssueClosedIcon,{"aria-label":"Closed issue"}),n=e4):(a=(0,i.jsx)(x.IssueOpenedIcon,{"aria-label":"Open issue"}),n=e2);else if("pr"===e.type){let t="string"==typeof e.merged_at&&e.merged_at.length>0;"open"===e.state&&!t&&e.draft?(a=(0,i.jsx)(x.GitPullRequestDraftIcon,{"aria-label":"Draft pull request"}),n=e3):"open"!==e.state||t||e.draft?"closed"!==e.state||t?"closed"===e.state&&t&&(a=(0,i.jsx)(x.GitMergeIcon,{"aria-label":"Merged pull request"}),n=e4):(a=(0,i.jsx)(x.GitPullRequestClosedIcon,{"aria-label":"Closed pull request"}),n=e5):(a=(0,i.jsx)(x.GitPullRequestIcon,{"aria-label":"Pull request"}),n=e2)}else"task"===e.type&&t&&("queued"===e.state?(a=(0,i.jsx)(x.ClockIcon,{"aria-label":"Task queued",className:"IssueListBlock-module__clockIcon--yllN9"}),n=e2):"pending"===e.state||"idle"===e.state?(a=(0,i.jsx)(x.DotFillIcon,{"aria-label":"Task pending",className:"IssueListBlock-module__dotFillIcon--jW2uo"}),n=e2):"running"===e.state||"in_progress"===e.state?(a=(0,i.jsx)(eV.gX,{animated:!0}),n=e2):"completed"===e.state||"waiting_for_user"===e.state?(a=(0,i.jsx)(x.CheckCircleFillIcon,{"aria-label":"Task completed",className:"IssueListBlock-module__checkCircleIcon--ZHYse"}),n=e4):"failed"===e.state||"timed_out"===e.state?(a=(0,i.jsx)(x.XCircleFillIcon,{"aria-label":"Task failed",className:"IssueListBlock-module__stopIcon--u2wRE"}),n=e5):"cancelled"===e.state&&(a=(0,i.jsx)(x.SkipIcon,{"aria-label":"Task cancelled",className:"IssueListBlock-module__skipIcon--glgzv"}),n=e5));return{icon:a,colorClass:n}}(n,L);return(0,i.jsx)("li",{className:eY,children:(0,i.jsxs)("div",{className:eX,children:[(0,i.jsx)("div",{className:(0,j.$)(r,"IssueListBlock-module__icon--qAaLP"),children:s}),(0,i.jsxs)("div",{className:"IssueListBlock-module__header--NtmSe",children:[a&&!n.title?null:(0,i.jsx)("a",{...(0,eU.G)("issue-list-item-link"),href:n.url??"#",className:"IssueListBlock-module__link--fc5wy",onClick:e=>{if(e.metaKey||e.ctrlKey)return;e.preventDefault();let t=n.url;if(t)if("issue"===n.type){(0,y.BI)("dotcom_chat.activate",{target:"ISSUE_LIST_BLOCK_ITEM_OPEN",mode:"immersive"});let{owner:i,repo:a,number:s}=function(e){let t=/^https?:\/\/[^/]+\/([^/]+)\/([^/]+)\/issues\/(\d+)(\/.*)?$/.exec(e);if(!t)return{};let n=parseInt(t[3]??"0",10);return{owner:t[1],repo:t[2],number:n}}(t);if(i&&a&&s){let r=`issue:${i}/${a}/${s}`;b({messageId:N,name:n.title??`Issue #${s}`,number:s,owner:i,repo:a,id:r,href:t,type:"issue"}),_(r),C(e.currentTarget)}}else"task"===n.type&&L?(0,y.BI)("dotcom_chat.activate",{target:"TASK_LIST_BLOCK_ITEM_OPEN",mode:"immersive"}):(0,y.BI)("dotcom_chat.activate",{target:"PR_LIST_BLOCK_ITEM_OPEN",mode:"immersive"}),window.open(t,"_self")},target:"_blank",rel:"noreferrer",children:n.title?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:e0,children:n.title}),void 0!==n.number&&"task"!==n.type&&(0,i.jsxs)("span",{className:"IssueListBlock-module__number--vsvJy",children:["#",n.number]})]}):void 0!==n.number?(0,i.jsxs)("span",{className:e0,children:["#",n.number]}):(0,i.jsx)("span",{className:(0,j.$)(e0,"IssueListBlock-module__unknownTitle--JszGm"),children:"task"===n.type?"Unknown task":"Unknown issue"})}),"task"!==n.type&&(0,i.jsxs)("div",{className:"IssueListBlock-module__labels--xeeTb",children:[n.labels?.length?n.labels.map(tt):null,0!==n.comments&&void 0!==n.comments&&(0,i.jsxs)(eG.A,{size:"small",variant:"secondary",children:[(0,i.jsx)(x.CommentIcon,{className:"IssueListBlock-module__labelIcon--g4B1V",size:12}),n.comments]})]})]}),"task"===n.type&&L?n.repository?(0,i.jsx)("div",{className:e1,children:n.repository}):null:(0,i.jsx)(e7,{item:n,isStreaming:a}),("task"!==n.type||!L)&&(0,i.jsx)("div",{className:"IssueListBlock-module__metadata--W4tCj",children:void 0===n.assignees_avatar_urls?null:0===n.assignees_avatar_urls.length?(0,i.jsx)("div",{className:"IssueListBlock-module__unassignedAvatar--RB1C7",role:"img","aria-label":"Unassigned",children:(0,i.jsx)(x.PersonIcon,{size:12})}):(0,i.jsx)("div",{role:"img","aria-label":`${n.assignees_avatar_urls.length} ${1===n.assignees_avatar_urls.length?"assignee":"assignees"}`,children:(0,i.jsx)(eH.A,{disableExpand:!0,children:n.assignees_avatar_urls.map(te)})})})]})},t)});return m[8]!==S||m[9]!==E||m[10]!==p||m[11]!==g?(c=E&&(0,i.jsx)("li",{className:eY,children:(0,i.jsx)("div",{className:(0,j.$)(eX,"IssueListBlock-module__toggleContent--NWbi1"),children:(0,i.jsxs)("button",{type:"button",className:(0,j.$)("IssueListBlock-module__toggleButton--C9dbQ",p&&"IssueListBlock-module__shimmer--xZ0Bt"),onClick:()=>I(!S),"aria-expanded":!S,"aria-controls":"issue-list",children:[(0,i.jsx)("span",{className:"IssueListBlock-module__toggleIcon--hynWs",children:S?(0,i.jsx)(x.UnfoldIcon,{size:16}):(0,i.jsx)(x.FoldIcon,{size:16})}),S?`Show ${g.length-10} more`:"Show less"]})})}),m[8]=S,m[9]=E,m[10]=p,m[11]=g,m[12]=c):c=m[12],m[13]!==o||m[14]!==A||m[15]!==c?(u=(0,i.jsx)("div",{children:(0,i.jsxs)("ul",{id:"issue-list",className:o,children:[A,c]})}),m[13]=o,m[14]=A,m[15]=c,m[16]=u):u=m[16],u}function te(e){return(0,i.jsx)(eB.r,{src:e,alt:"Assignee avatar"},e)}function tt(e){return(0,i.jsx)(eG.A,{size:"small",variant:"secondary",className:"IssueListBlock-module__label--tGgUZ",children:(0,i.jsx)(eK.A,{inline:!0,maxWidth:"100%",title:e,children:e})},e)}try{e7.displayName||(e7.displayName="Description")}catch{}try{e9.displayName||(e9.displayName="ListBlock")}catch{}let tn=new class extends YamlBlockExtension{get dataAttribute(){return"data-issues-list-block"}isSupported(e){return"list"===e.lang&&("issue"===e.type||"pr"===e.type||"task"===e.type)}extractProps(e){return{data:e.value,type:e.type,isStreaming:e.isStreaming??!1}}createComponent(e){return(0,i.jsx)(e9,{...e})}},ti=new class extends YamlBlockExtension{get dataAttribute(){return"data-tree-issue-block"}isSupported(e){return"yaml"===e.lang&&"issue-tree"===e.type}extractProps(e){return{data:e.value}}createComponent(e){return(0,i.jsx)(eN,{...e})}};var ta=n(5524),ts=n(35104);function tr(e){let t,n=(0,d.c)(3),{children:a,isStreaming:s,taskCount:r}=e;if(!s&&0===r){let e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("span",{children:"No tasks were created, please retry."}),n[0]=e):e=n[0],e}return n[1]!==a?(t=(0,i.jsx)(i.Fragment,{children:a}),n[1]=a,n[2]=t):t=n[2],t}try{tr.displayName||(tr.displayName="SubtasksGroup")}catch{}var tl=n(35673),to=n(57478),td=n(94236);function tc(e){let t,n,a,s=(0,d.c)(10),{onConvertAllToDraftIssues:r,taskCount:l,title:o}=e;return s[0]!==l?(t=(0,i.jsx)(to.A,{className:"ml-2 pb-1",children:l}),s[0]=l,s[1]=t):t=s[1],s[2]!==r||s[3]!==l||s[4]!==o?(n=l>0&&(0,i.jsx)("div",{className:"flex-justify-end d-flex flex-1",children:(0,i.jsxs)(td.W,{children:[(0,i.jsx)(td.W.Anchor,{children:(0,i.jsx)(b.K,{"aria-label":`Tasklist '${o}' options`,icon:x.KebabHorizontalIcon,variant:"invisible"})}),(0,i.jsx)(tl.UJ,{children:(0,i.jsx)(ta.l,{children:(0,i.jsx)(ta.l.Item,{onSelect:r,children:"Draft all as issues"})})})]})}),s[2]=r,s[3]=l,s[4]=o,s[5]=n):n=s[5],s[6]!==t||s[7]!==n||s[8]!==o?(a=(0,i.jsxs)(ta.l.Heading,{as:"h4",className:"mx-3 mt-3 mb-1 d-flex flex-items-center",children:[o,t,n]}),s[6]=t,s[7]=n,s[8]=o,s[9]=a):a=s[9],a}try{tc.displayName||(tc.displayName="TasklistHeader")}catch{}var tu=n(97189),tm=n(65529);function th(e){let t,n=(0,d.c)(4),{isStreaming:a,onClick:s,task:r}=e;return n[0]!==a||n[1]!==s||n[2]!==r?(t=(0,i.jsx)(tu.Fn,{children:(0,i.jsx)(tf,{isStreaming:a,onClick:s,task:r})}),n[0]=a,n[1]=s,n[2]=r,n[3]=t):t=n[3],t}function tf(e){let t,n,s,r,l,o,c=(0,d.c)(19),{isStreaming:m,onClick:h,task:f}=e,{pullRequest:p,isLoading:g}=(0,tm.as)(f),{versionedItems:y}=(0,w.xx)();c[0]!==f.id||c[1]!==y?(t=(0,z.LU)(f.id,y),c[0]=f.id,c[1]=y,c[2]=t):t=c[2];let b=t;c[3]!==g||c[4]!==m||c[5]!==p?(n=()=>m||g?(0,i.jsx)(v.A,{size:"small",className:a.sX}):p?.state==="merged"?(0,i.jsx)(x.CheckIcon,{}):p?(0,i.jsx)(x.GitPullRequestIcon,{}):(0,i.jsx)(x.TasklistIcon,{}),c[3]=g,c[4]=m,c[5]=p,c[6]=n):n=c[6];let j=n;return c[7]!==j?(s=(0,i.jsx)(ta.l.LeadingVisual,{children:j()}),c[7]=j,c[8]=s):s=c[8],c[9]!==b?(r=null!=b&&(0,i.jsx)(u.g,{version:b}),c[9]=b,c[10]=r):r=c[10],c[11]!==r?(l=(0,i.jsx)(ta.l.TrailingVisual,{children:r}),c[11]=r,c[12]=l):l=c[12],c[13]!==h||c[14]!==s||c[15]!==l||c[16]!==f.id||c[17]!==f.name?(o=(0,i.jsxs)(ta.l.Item,{onSelect:h,children:[s,f.name,l]},f.id),c[13]=h,c[14]=s,c[15]=l,c[16]=f.id,c[17]=f.name,c[18]=o):o=c[18],o}try{th.displayName||(th.displayName="TasklistItem")}catch{}try{tf.displayName||(tf.displayName="TasklistItemImpl")}catch{}let tp=e=>"object"==typeof e&&null!==e&&"tag"in e&&"string"==typeof e.tag&&"title"in e&&"string"==typeof e.title&&"description"in e&&"string"==typeof e.description&&(!("dependencyTags"in e)||!!Array.isArray(e.dependencyTags))&&(!("repository"in e)||"string"==typeof e.repository)&&!0;function tg({yaml:e,isStreaming:t}){let n=(0,ej.p)(t),a=(0,s.useRef)(new Set),{selectedThreadID:l}=(0,J.Pk)(),{updateItem:o,openItem:d,openPreviewPane:c}=(0,w.xx)(),{messageId:u,messageIndex:m,setHasAutoOpenedPreviewPane:h}=(0,r.H)(),f=(0,s.useRef)({name:"Tasklist",tasks:[]}),p=(0,s.useMemo)(()=>{let t=((e,t)=>{try{var n=(0,W.Hh)(e);if("object"!=typeof n||null==n)return null;let t={name:"name"in n&&"string"==typeof n.name?n.name:"Tasklist",tasks:[]};if("tasks"in n&&Array.isArray(n.tasks))for(let e of n.tasks)"object"==typeof e&&null!=e&&tp(e)&&t.tasks.push(e);return t}catch{return(0,y.BI)("copilot.planning_tasklist",{type:"MALFORMED_YAML",mode:"immersive",threadId:t}),null}})(e,l);return null!=t?(f.current=t,t):f.current},[e,l]),g=(0,s.useMemo)(()=>p.tasks.map(e=>{let n=`planning-task:${e.tag}#${m}`,{title:i,...a}=e;return{...a,name:i,messageId:u,id:n,type:"planning-task",isUserEdited:!1,isStreaming:t,subtaskTags:[]}}),[p,m,u,t]),{convertAllToDraftIssues:x}=(0,ts.W)(g.map(e=>e.tag)),v=(0,s.useCallback)((e,t={})=>{let{selectItem:n,event:i}=t;d(e.id,n),c(i?.currentTarget),h(!0)},[d,c,h]);(0,s.useEffect)(()=>{for(let e=0;e<g.length;e++){let i=g[e];o(i),(t||n)&&!a.current.has(i.id)&&(a.current.add(i.id),v(i,{selectItem:0===e}))}},[t,n,v,g,o]);let b=(0,s.useCallback)((e,t)=>v(e,{event:t}),[v]);(0,s.useEffect)(()=>(0,y.BI)("copilot.planning_tasklist",{type:"BLOCK_RENDERED",mode:"immersive",threadId:l}),[l]),(0,s.useEffect)(()=>{n&&0===g.length&&(0,y.BI)("copilot.planning_tasklist",{type:"NO_TASKS",mode:"immersive",threadId:l})},[n,g.length,l]);let j=g.map(e=>(0,i.jsx)(th,{isStreaming:!!t,onClick:t=>b(e,t),task:e},e.id));return(0,i.jsx)("div",{className:"PlanningTasklistBlock-module__container--Vl4PK",children:(0,i.jsxs)(ta.l,{variant:"full",showDividers:!0,children:[(0,i.jsx)(tc,{onConvertAllToDraftIssues:x,taskCount:g.length,title:p?.name??"Tasklist"}),(0,i.jsx)(tr,{isStreaming:!!t,taskCount:g.length,children:j})]})})}try{tg.displayName||(tg.displayName="PlanningTasklistBlock")}catch{}let ty=new class extends YamlBlockExtension{get dataAttribute(){return"data-planning-tasklist-block"}isSupported(e){return"yaml"===e.lang&&"planning-tasklist"===e.type}extractProps(e){return{yaml:e.value,isStreaming:e.isStreaming??!1}}createComponent(e){return(0,i.jsx)(tg,{...e})}};var tx=n(33592),tv=n(86877),tb=n(4175),tj=n(1903),tw=n(51933),t_=n(21373),tC=n(40090);let tN="PlanningQuestionsForm-module__container--Xi24c",tS="PlanningQuestionsForm-module__headerContainer--td62h",tI="PlanningQuestionsForm-module__headerSection--pbytI",tk="PlanningQuestionsForm-module__outlineSection--Tx0yi",tL="PlanningQuestionsForm-module__title2--Xmt0r",tT="PlanningQuestionsForm-module__questionContainer--Wr4q2",tD="PlanningQuestionsForm-module__footerContainer--Xpj2v";function tE({questions:e,isStreaming:t=!1,isReadOnly:n=!1,onSubmitAnswers:a,className:r}){let l=(0,s.useMemo)(()=>{let t={},n={};for(let[i,a]of e.questions.entries()){if(!a.suggestions||0===a.suggestions.length)continue;let e=a.suggestions[0];t[i]=e,n[i]=0}return{initialAnswers:t,initialSelectedSuggestions:n}},[e.questions]),[o,d]=(0,s.useState)(l.initialAnswers),[c,u]=(0,s.useState)(l.initialSelectedSuggestions),[m,h]=(0,s.useState)(""),f=(0,s.useCallback)((e,t)=>{u(t=>{let{[e]:n,...i}=t;return i}),d(n=>({...n,[e]:t}))},[]),p=(0,s.useCallback)((e,t,n)=>{u(n=>({...n,[e]:t})),d(t=>({...t,[e]:n}))},[]),g=(0,s.useMemo)(()=>e.questions.some((e,t)=>o[t]?.trim())||m.trim(),[o,e.questions,m]),y=(0,s.useCallback)(t=>{t.preventDefault();let n=[];for(let[t,i]of e.questions.entries()){let e=o[t]?.trim();e&&n.push(`Question: ${i.question.trim()}
Answer: ${e}`)}let i=m.trim();i&&n.push(`Additional comments: ${i}`),0!==n.length&&a(n.join(`

`))},[o,e.questions,m,a]);return n?e.questions.length>0?(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{children:"Open questions:"}),(0,i.jsx)("ul",{style:{listStyleType:"none"},children:e.questions.map(e=>(0,i.jsx)("li",{children:e.question},e.question))})]}):null:t?(0,i.jsxs)("div",{className:(0,j.$)(tN,r),children:[(0,i.jsx)("div",{className:tS,children:(0,i.jsxs)("div",{className:tI,children:[(0,i.jsx)(tC.r,{maxWidth:"50%",size:"titleLarge"}),(0,i.jsxs)("div",{className:tk,children:[(0,i.jsx)(tC.r,{maxWidth:"10%",size:"subtitle"}),(0,i.jsx)(tC.r,{maxWidth:"25%"}),(0,i.jsx)(tC.r,{maxWidth:"25%"}),(0,i.jsx)(tC.r,{maxWidth:"25%"})]})]})}),(0,i.jsxs)("div",{className:"pl-3 pt-3 width-full",children:[(0,i.jsx)(tC.r,{maxWidth:"10%",size:"subtitle"}),[1,2,3].map(e=>(0,i.jsxs)("div",{className:tT,children:[(0,i.jsx)(tC.r,{maxWidth:"80%",size:"subtitle"}),(0,i.jsx)(tC.r,{maxWidth:"70%",size:"bodyLarge"}),(0,i.jsx)(tC.r,{maxWidth:"50%",size:"bodySmall"})]},e))]}),(0,i.jsxs)("div",{className:tD,children:[(0,i.jsx)(tC.r,{maxWidth:"15%",size:"titleLarge"}),(0,i.jsx)(tC.r,{maxWidth:"15%",size:"titleLarge"})]})]}):(0,i.jsxs)("form",{className:(0,j.$)(tN,r),onSubmit:y,children:[(0,i.jsx)("div",{className:tS,children:(0,i.jsxs)("div",{className:tI,children:[(0,i.jsx)("div",{className:"PlanningQuestionsForm-module__title1--TtN_9",children:e.name}),e.outline.length>0&&(0,i.jsxs)("div",{className:tk,children:[(0,i.jsx)("div",{className:tL,children:"Outline"}),(0,i.jsx)("ul",{className:"PlanningQuestionsForm-module__outlineList--dnB7B",children:e.outline.map(e=>(0,i.jsx)("li",{children:e},e))})]})]})}),e.questions.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"pt-3",children:(0,i.jsx)("div",{className:tL,children:"Open questions"})}),e.questions.map(t=>{let n=e.questions.indexOf(t),a=t.suggestions||[];return(0,i.jsx)("div",{className:tT,children:(0,i.jsxs)(tv.A,{className:"flex-self-stretch",children:[(0,i.jsx)(tv.A.Label,{children:t.question}),(0,i.jsx)(tb.Ay,{block:!0,onChange:e=>f(n,e.target.value),rows:1,value:o[n]||""}),a.length>0&&(0,i.jsxs)(tv.A.Caption,{className:"PlanningQuestionsForm-module__suggestionsContainer--GZd8T",children:["Suggestions",(0,i.jsx)(tj.A,{className:"PlanningQuestionsForm-module__suggestions--rKk1X",children:a.map(e=>{let t=a.indexOf(e),s=c[n]===t;return(0,i.jsx)(tw.A,{as:"button",isSelected:s,onClick:()=>p(n,t,e),text:e,type:"button"},e)})})]})]})},t.question)})]}),(0,i.jsxs)(tv.A,{className:"flex-self-stretch",children:[(0,i.jsx)(tv.A.Label,{children:"Additional comments"}),(0,i.jsx)(tb.Ay,{block:!0,onChange:e=>h(e.target.value),rows:3,value:m})]}),(0,i.jsx)("div",{className:tD,children:(0,i.jsx)(t_.Q,{type:"submit",variant:"primary",disabled:!g,children:"Submit"})})]})}try{tE.displayName||(tE.displayName="PlanningQuestionsForm")}catch{}let tR=e=>"object"==typeof e&&null!==e&&"question"in e&&"string"==typeof e.question&&(!("suggestions"in e)||!!Array.isArray(e.suggestions)&&e.suggestions.every(e=>"string"==typeof e));function tA(e){let t,n,a,l,o,c,u=(0,d.c)(18),{yaml:m,isStreaming:h}=e,{selectedThreadID:f,messages:p,currentReferences:g}=(0,J.Pk)(),{messageIndex:x}=(0,r.H)(),v=(0,tx.b)();u[0]!==f||u[1]!==m?(t=((e,t)=>{try{var n=(0,W.Hh)(e);if("object"!=typeof n||null==n)return null;let t={name:"name"in n&&"string"==typeof n.name?n.name:"Brainstorm Questions",outline:[],questions:[]};if("outline"in n&&Array.isArray(n.outline))for(let e of n.outline)"string"==typeof e&&t.outline.push(e);if("questions"in n&&Array.isArray(n.questions))for(let e of n.questions)"object"==typeof e&&null!=e&&tR(e)&&t.questions.push(e);return t}catch{return(0,y.BI)("copilot.planning_questions",{type:"MALFORMED_YAML",mode:"immersive",threadId:t}),null}})(m,f),u[0]=f,u[1]=m,u[2]=t):t=u[2];let b=t;u[3]!==b?(n=b??{name:"Brainstorm Questions",outline:[],questions:[]},u[3]=b,u[4]=n):n=u[4];let j=n,w=p.length>x+1;u[5]!==g||u[6]!==v||u[7]!==j.questions.length||u[8]!==f?(a=e=>{(0,y.BI)("copilot.planning_questions",{type:"SUBMIT_ANSWERS_CLICKED",mode:"immersive",threadId:f,totalQuestionsCount:j.questions.length});let t=v.getThreadById(f);v.sendChatMessage({thread:t,content:e,references:g})},u[5]=g,u[6]=v,u[7]=j.questions.length,u[8]=f,u[9]=a):a=u[9];let _=a;return u[10]!==f?(l=()=>(0,y.BI)("copilot.planning_questions",{type:"BLOCK_RENDERED",mode:"immersive",threadId:f}),o=[f],u[10]=f,u[11]=l,u[12]=o):(l=u[11],o=u[12]),(0,s.useEffect)(l,o),u[13]!==_||u[14]!==w||u[15]!==h||u[16]!==j?(c=(0,i.jsx)(tE,{className:"mb-3",questions:j,isStreaming:h,isReadOnly:w,onSubmitAnswers:_}),u[13]=_,u[14]=w,u[15]=h,u[16]=j,u[17]=c):c=u[17],c}try{tA.displayName||(tA.displayName="PlanningQuestionsBlock")}catch{}let tO=new class extends YamlBlockExtension{get dataAttribute(){return"data-planning-questions-block"}isSupported(e){return"yaml"===e.lang&&"planning-questions"===e.type}extractProps(e){return{yaml:e.value,isStreaming:e.isStreaming??!1}}createComponent(e){return(0,i.jsx)(tA,{...e})}};var tP=n(44095);let tF=new class extends YamlBlockExtension{get dataAttribute(){return"data-planning-spec-block"}isSupported(e){return"yaml"===e.lang&&"planning-spec"===e.type}extractProps(e){return{yaml:e.value,isStreaming:e.isStreaming??!1}}createComponent(e){return(0,i.jsx)(tP._,{...e})}},tM=({messageId:e,messageIndex:t,messageTimestamp:n,autoOpenPreviewPane:l,markdown:d,...c})=>{let u=(0,s.useRef)(!1),m=(0,s.useCallback)(e=>{u.current=e},[]),h=(0,s.useMemo)(()=>{var e;return[...c.extensions??[],(e=[],{transformMarkdown:t=>(0,o.YR)(t,"code",t=>{let n=t.lang??"",{name:i,code:a}=function(e,t){let n=e&&B.exec(e);if(n)return{name:n.groups?.name,code:t};let i=V.exec(t);return i?{name:i.groups?.name,code:t.replace(V,"")}:{code:t}}(t.meta??void 0,t.value);if(!i)return;e.includes(i)||e.push(i);let s=function(e){if(!e)return;let t=U.exec(e);return t?.groups?.url}(t.meta??void 0),r=a.split(`
`,6),l=6===r.length,o=l?r.join(`
`):`${r.join(`
`)}
`,d=t.position?.start.line??0;t.value=o,t.data={...t.data,hName:"code",hProperties:{[$]:JSON.stringify({language:n,name:i,url:s,code:a,line:d,isStreaming:t.isStreaming??!1,isClipped:l,index:e.indexOf(i),startOffset:t.position?.start.offset??-1,endOffset:t.position?.end.offset??-1})}}}),transformHtml:e=>(0,o.YR)(e,"element",(e,t,n)=>{let i=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&i?.type==="element"&&"code"===i.tagName&&$ in i.properties&&n.children.splice(t,1,i)}),reactComponents:q}),{transformMarkdown:e=>(0,o.YR)(e,"link",e=>{try{if(new URL(e.url,window.location.origin).origin!==window.location.origin)return}catch{return}let t=eM.exec(e.url);if(!t?.groups)return;let{owner:n="",repo:i="",number:a=""}=t.groups;e.data={hName:"span",hProperties:{[eF]:JSON.stringify({owner:n,repo:i,issueNumber:a,href:e.url,children:(0,eR.d)(e)})}}}),reactComponents:e$},tn,ti,ev,eE,ty,tO,tF]},[c.extensions]);return(0,i.jsx)(r.A.Provider,{value:(0,s.useMemo)(()=>({messageId:e,messageIndex:t,messageTimestamp:n,autoOpenPreviewPane:l,markdown:d,hasAutoOpenedPreviewPaneRef:u,setHasAutoOpenedPreviewPane:m}),[e,t,n,l,d,u,m]),children:(0,i.jsx)(a.To,{...c,markdown:d,extensions:h,chatMode:"immersive",className:"MarkdownViewer-module__markdownOverrides--xtpOl"})})},t$=s.memo(tM);try{tM.displayName||(tM.displayName="MarkdownViewer")}catch{}try{t$.displayName||(t$.displayName="MemoizedMarkdownViewer")}catch{}},81453:(e,t,n)=>{n.d(t,{U:()=>ek});var i=n(74848),a=n(21728),s=n(82595),r=n(894),l=n(75202),o=n(91747),d=n(61526),c=n(38621),u=n(11196),m=n(94236),h=n(5524),f=n(34164),p=n(96540),g=n(2635),y=n(33592),x=n(53419),v=n(26108),b=n(81960),j=n(40090),w=n(40961),_=n(25641),C=n(18878);function N({selectedItemID:e,loadingState:t,onConversationSelect:n,isSidebarCondensed:a}){let s=(0,y.b)(),{threads:r}=(0,g.Pk)(),l=(0,p.useMemo)(()=>s.sortAndFilterThreads(r).map(e=>({id:e.id,text:(0,_.CB)(e),href:`${_.Jz}/c/${e.id}`,date:new Date(e.updatedAt)})),[r,s]),o=function(e){let t=new Date,n=new Date(t);n.setDate(t.getDate()-1);let i=new Date(t);i.setDate(t.getDate()-7);let a=new Date(t);a.setDate(t.getDate()-30);let s=[],r=[],l=[],o=[];for(let d of e)d.date.toDateString()===t.toDateString()?s.push(d):d.date.toDateString()===n.toDateString()?r.push(d):d.date>i?l.push(d):d.date>a&&o.push(d);return{Today:s,Yesterday:r,"Last 7 days":l,"Last 30 days":o}}(l),d=0===l.length,c=(0,p.useId)();return(0,i.jsx)("nav",{"aria-labelledby":`${c}-conversations`,id:`${c}-conversation-list`,tabIndex:-1,className:(0,f.$)("ConversationListV2-module__container--DfLLE",a&&"ConversationListV2-module__condensed--vCbJZ"),children:d&&("loading"===t||"pending"===t)?(0,i.jsx)(j.r,{lines:5}):d?(0,i.jsx)(I,{}):(0,i.jsxs)("div",{className:"ConversationListV2-module__section--G3Lm1",children:[(0,i.jsx)("h3",{id:`${c}-conversations`,className:"sr-only",children:"Chats"}),Object.entries(o).map(([t,a])=>a.length>0&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{id:`${c}_${t}`,className:"ConversationListV2-module__title--VKD9S",children:t}),(0,i.jsx)("ul",{className:"ConversationListV2-module__list--N8p2i",children:a.map(t=>(0,i.jsx)(S,{item:t,selectedItemId:e??void 0,onSelect:n,threads:r},t.id))})]},t))]})})}function S({item:e,selectedItemId:t,onSelect:n,threads:a}){let s=e.id===t,[r,l]=(0,p.useState)(null),[o,u]=(0,p.useState)(!1),f=(0,p.useCallback)(()=>u(!0),[]),g=(0,p.useCallback)(()=>u(!1),[]),y=a.get(t),b=!!y?.customCopilotID,j=(0,p.useRef)(null),_=(0,p.useCallback)(()=>{(0,w.flushSync)(()=>l(null)),j.current?.focus()},[j]);return e.href&&(0,i.jsxs)("li",{className:"ConversationListV2-module__item--cPXI6",children:[(0,i.jsx)(d.N_,{className:"ConversationListV2-module__link--J46j6",to:e.href,"aria-current":s?"page":void 0,onClick:()=>{n(),(0,x.BI)("dotcom_chat.activate",{target:"CONVERSATION_SELECT",threadId:e.id,mode:"immersive"})},children:(0,i.jsx)("span",{className:"ConversationListV2-module__text--IsNRP",children:e.text})}),(0,i.jsx)("span",{className:"ConversationListV2-module__context--a0pCE",children:(0,i.jsxs)(m.W,{anchorRef:j,children:[(0,i.jsx)(m.W.Anchor,{children:(0,i.jsx)(v.K,{loading:o,icon:c.KebabHorizontalIcon,"aria-label":"Manage chat",variant:"invisible",onClick:()=>(0,x.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU",mode:"immersive"})})}),(0,i.jsx)(m.W.Overlay,{children:(0,i.jsx)(h.l,{children:(0,i.jsx)(C.V,{onOpenDialog:l,isShared:!!a.get(e.id)?.sharedID,showShare:!b,threadName:e.text,threadId:e.id})})})]})}),(0,i.jsx)(C.p,{visibleDialog:r,onClose:_,threadName:e.text,threadId:e.id,selectedThreadId:t,onStartLoading:f,onFinishLoading:g,returnFocusRef:j})]},e.id)}function I(){return(0,i.jsxs)("div",{className:"ConversationListV2-module__empty--4TgQY",children:[(0,i.jsx)(b.A,{as:"h3",className:"ConversationListV2-module__emptyStateHeading--KkuQU",children:"No chats yet"}),(0,i.jsx)("span",{className:"ConversationListV2-module__emptyStateText--LsdKG",children:"Ask Copilot anything on the right to start your first chat."})]})}try{N.displayName||(N.displayName="ConversationList")}catch{}try{S.displayName||(S.displayName="ConversationListEntry")}catch{}try{I.displayName||(I.displayName="EmptyState")}catch{}var k=n(7554),L=n(61282),T=n(11607),D=n(71205),E=n(29607),R=n(77999),A=n(62421);function O({handleSidebarClick:e,title:t,trailingAction:n}){let a=(0,d.zy)().pathname.includes("/share/"),{threadsLoading:s,selectedThreadID:r,threads:l}=(0,g.bP)("threadsLoading","selectedThreadID","threads"),o=(0,y.b)(),c=(0,p.useMemo)(()=>o.sortAndFilterThreads(l).map(e=>({id:e.id,text:(0,_.CB)(e),href:`${_.Jz}/c/${e.id}`,date:new Date(e.updatedAt)})),[l,o]),u=0===c.length,m="loading"===s.state||"pending"===s.state;return(0,i.jsx)(E.s,{title:t,isEmpty:u,isLoading:m,trailingAction:n,children:c.map(t=>(0,i.jsx)(P,{item:t,selectedItemId:a?void 0:r??void 0,onSelect:e,threads:l},t.id))})}function P({item:e,selectedItemId:t,onSelect:n,threads:a}){let s=e.id===t,[r,l]=(0,p.useState)(null),[o,d]=(0,p.useState)(!1),u=(0,p.useCallback)(()=>d(!0),[]),f=(0,p.useCallback)(()=>d(!1),[]),g=a.get(t),y=!!g?.customCopilotID,b=(0,p.useRef)(null),j=(0,p.useCallback)(()=>{(0,w.flushSync)(()=>l(null)),b.current?.focus()},[b]),_=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(m.W,{anchorRef:b,children:[(0,i.jsx)(m.W.Anchor,{children:(0,i.jsx)(v.K,{loading:o,icon:c.KebabHorizontalIcon,"aria-label":"Manage chat",variant:"invisible",onClick:()=>(0,x.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU",mode:"immersive"})})}),(0,i.jsx)(m.W.Overlay,{children:(0,i.jsx)(h.l,{children:(0,i.jsx)(C.V,{onOpenDialog:l,isShared:!!a.get(e.id)?.sharedID,showShare:!y,threadName:e.text,threadId:e.id})})})]}),(0,i.jsx)(C.p,{visibleDialog:r,onClose:j,threadName:e.text,threadId:e.id,selectedThreadId:t,onStartLoading:u,onFinishLoading:f,returnFocusRef:b})]});return(0,i.jsx)(D.W,{href:e.href,text:e.text,isSelected:s,trailingAction:_,onClick:()=>{n(),(0,x.BI)("dotcom_chat.activate",{target:"CONVERSATION_SELECT",threadId:e.id,mode:"immersive"})}})}function F({handleSidebarClick:e,isCondensed:t,onToggleSidebar:n}){let[a,s]=(0,p.useState)(!1),r=(0,A.G)(),l=(0,p.useCallback)(()=>{t&&n()},[t,n]),o=(0,p.useCallback)(()=>s(!1),[]),d=(0,p.useCallback)(async()=>{t?o():e(),await r({clearTopic:!0,includeThreads:!1}),(0,x.BI)("dotcom_chat.activate",{target:"SIDEBAR_CONVERSATION_NEW",mode:"immersive"})},[e,r,t,o]),u=(0,i.jsx)(L.V,{isIconButton:!0,icon:c.PlusIcon,label:"New agent session",onOpen:()=>(0,x.BI)("agent_sessions.task_view",{target:"CREATE_TASK_FROM_CHAT_BUTTON"}),onClose:l,eventType:"activity_panel",size:"small",tooltipDirection:"e",variant:"invisible"}),h=()=>(0,i.jsxs)(E.j,{isCondensed:!1,"aria-label":"Navigation",children:[(0,i.jsx)(k.oR,{showTitle:!0,trailingAction:u,onTaskClick:t?o:void 0}),(0,i.jsx)(O,{title:"Chats",trailingAction:(0,i.jsx)(v.K,{icon:c.PlusIcon,variant:"invisible","aria-label":"New chat",size:"small",tooltipDirection:"e",onClick:d}),handleSidebarClick:e})]});return t?(0,i.jsx)("div",{className:"ActivityPanel-module__compactContainer--KLMAT",children:(0,i.jsxs)("div",{className:"ActivityPanel-module__compactAgentsMenu--MWK7t",children:[(0,i.jsxs)(m.W,{open:a,onOpenChange:s,children:[(0,i.jsx)(m.W.Anchor,{children:(0,i.jsx)(R.m,{text:"Agent sessions and chats",children:(0,i.jsx)(T.$,{"aria-label":"Agent sessions and chats",icon:(0,i.jsx)(c.HistoryIcon,{}),iconOnly:!0,size:"medium",variant:"invisible"})})}),(0,i.jsx)(m.W.Overlay,{width:"medium",side:"outside-right",align:"start",maxHeight:"xlarge",className:"ActivityPanel-module__overlay--OZPYs",children:(0,i.jsx)("div",{children:h()})})]}),(0,i.jsx)("div",{className:"ActivityPanel-module__largeButton--NUegB",children:u})]})}):h()}try{O.displayName||(O.displayName="ConversationListWrapper")}catch{}try{P.displayName||(P.displayName="ConversationListEntry")}catch{}try{F.displayName||(F.displayName="ActivityPanel")}catch{}let M="CopilotNavigation-module__toggleButtonIcon--__j1B",$="CopilotNavigation-module__footerButton--RlFpZ",B="CopilotNavigation-module__footerButtonContent--mIARB",V="CopilotNavigation-module__condensed--TzlR_",U="CopilotNavigation-module__footerButtonIcon--VWrey";var q=n(84646),G=n(69599),H=n(49851),K=n(26607),W=n(27359),z=n(47789),Q=n(23657);let Z="ServiceList-module__link--VJdHH",J="ServiceList-module__content--k6BSj",Y="ServiceList-module__textWrapper--jtpsQ",X="ServiceList-module__text--DxTKY",ee="ServiceList-module__label--eTRas",et="ServiceList-module__condensed--x5s6A";function en({"aria-current":e,"data-analytics-event":t,href:n,icon:a,onLinkClick:r,id:l,displayName:o,condensed:u,label:m,external:h}){let p=h?(0,i.jsxs)("a",{href:n,className:Z,"aria-label":o,rel:"noopener noreferrer",children:[(0,i.jsx)(s.I,{size:16,icon:a}),(0,i.jsxs)("div",{className:(0,f.$)(J,u&&et),children:[(0,i.jsx)("div",{className:Y,children:(0,i.jsx)("div",{className:X,children:o})}),(0,i.jsx)("div",{className:ee,children:(0,i.jsxs)("div",{className:"ServiceList-module__externalLabel--P9mcb",children:[(0,i.jsx)("span",{className:"ServiceList-module__previewLabel--JWC5Z",children:m}),(0,i.jsx)(c.ArrowUpRightIcon,{className:"ServiceList-module__externalIcon--lTFBq"})]})})]})]}):(0,i.jsxs)(d.N_,{to:n,...{"aria-current":e,"data-analytics-event":t,className:Z,onClick:e=>{r?.(e,l)}},"aria-label":o,children:[(0,i.jsx)(s.I,{size:16,icon:a}),(0,i.jsxs)("div",{className:(0,f.$)(J,u&&et),children:[(0,i.jsx)("div",{className:Y,children:(0,i.jsx)("div",{className:X,children:o})}),(0,i.jsx)("div",{className:ee,children:m})]})]});return(0,i.jsx)("li",{className:"ServiceList-module__section--k1uLc",children:(0,i.jsx)("div",{className:"ServiceList-module__item--fn806",children:(0,i.jsx)(R.m,{text:u?o:"",children:p})})})}let ei=JSON.stringify({source:"ServiceList"});function ea({toggleFloatingSidebar:e,isSidebarCondensed:t}){let{selectedThreadID:n}=(0,g.Pk)(),a=(0,W.v)()?.id,s=(0,z.qw)(),r=(0,A.G)(),l=(0,q.BV)(),o=(0,Q.mM)(),d=!n&&!a&&!o,u=async t=>{t.metaKey||t.ctrlKey||(e(),await r({clearTopic:!0,includeThreads:!1}),(0,x.BI)("dotcom_chat.activate",{target:"SIDEBAR_CONVERSATION_NEW",mode:"immersive"}))},m=(0,p.useCallback)(t=>{t.metaKey||t.ctrlKey||e()},[e]),h=(0,p.useCallback)(t=>{t.metaKey||t.ctrlKey||e()},[e]),f=!(0,G.G7)("copilot_spaces_ga"),y=(0,p.useMemo)(()=>{let e=l?[{type:"spaces",component:(0,i.jsx)(en,{"aria-current":o?"page":void 0,"data-analytics-event":ei,displayName:"Spaces",href:_.VR,icon:H.Dy,condensed:t,id:"spaces",onLinkClick:m,label:f&&(0,i.jsx)(K.A,{variant:"success",children:"Preview"})},"spaces"),displayName:"Spaces"}]:[],n=s.flatMap(e=>e.navigationItems&&e.navigationItems.length>0?e.navigationItems.map(n=>({type:"plugin",component:(0,i.jsx)(en,{"aria-current":a===e.id?"page":void 0,"data-analytics-event":ei,displayName:n.displayName,href:n.href,icon:n.icon,condensed:t,id:n.id,onLinkClick:n.external?void 0:h,label:n.label,external:n.external},`${e.id}-${n.id}`),displayName:n.displayName})):[]),r=(0,G.G7)("copilot_default_to_task_input");return[...e,...n].sort((e,t)=>{if(r){if("Agents"===e.displayName)return -1;if("Agents"===t.displayName)return 1}return e.displayName.localeCompare(t.displayName)})},[l,o,t,m,f,s,a,h]),v=(0,G.G7)("copilot_default_to_task_input"),b=y.map(e=>e.component),j=(0,i.jsx)(en,{"aria-current":d?"page":void 0,"data-analytics-event":ei,displayName:v?"Chat":"New chat",href:_.Jz,icon:v?c.CommentDiscussionIcon:H.KJ,condensed:t,id:"home",onLinkClick:u}),w=(0,G.G7)("copilot_default_to_task_input")&&y[0]?.displayName==="Agents";return b.splice(+!!w,0,j),(0,i.jsx)("ul",{className:"ServiceList-module__list--nR74A",children:b})}try{en.displayName||(en.displayName="ServiceListItem")}catch{}try{ea.displayName||(ea.displayName="ServiceList")}catch{}var es=n(77430),er=n(84268),el=n(51213),eo=n(98755),ed=n(71315),ec=n(15220),eu=n(46251),em=n(69726),eh=n(76720),ef=n(25744),ep=n(3803);let eg="ManageSharedConversationsDialog-module__mutedText--_uOci";var ey=n(21373),ex=n(20139);let ev=e=>{let t,n,s,r,l,o,d,c,u,m,h,f,v,b,j,w,_,C,N,S,I=(0,a.c)(60),{closeDialog:k,threadId:L}=e,T=(0,g.Pk)(),D=(0,y.b)(),{selectedThreadID:E,ssoOrganizations:R,apiUrl:A,threads:O}=T,[P,F]=(0,p.useState)(T.messages);I[0]!==L||I[1]!==O?(t=()=>{let e=O.get(L);return e?.sharedID||""},I[0]=L,I[1]=O,I[2]=t):t=I[2];let[M,$]=(0,p.useState)(t),B=(0,p.useRef)(""!==M),V=(0,p.useRef)("");I[3]!==P||I[4]!==M||I[5]!==T.apiUrl||I[6]!==T.ssoOrganizations||I[7]!==L?(n=()=>{let e=async()=>{if(0===P.filter(e=>e.threadID===L).length){let e=new ex.k(T.apiUrl,T.ssoOrganizations),t=await e.listSharedThreadMessages(M);t.ok&&F(t.payload.messages)}};V.current!==M&&M&&(V.current=M,e())},s=[M,L,P,T.apiUrl,T.ssoOrganizations],I[3]=P,I[4]=M,I[5]=T.apiUrl,I[6]=T.ssoOrganizations,I[7]=L,I[8]=n,I[9]=s):(n=I[8],s=I[9]),(0,p.useEffect)(n,s),I[10]!==E||I[11]!==L||I[12]!==O?(r=O.get(L||E),I[10]=E,I[11]=L,I[12]=O,I[13]=r):r=I[13];let U=r,q=P[P.length-1],G=q?.content||"";I[14]!==E||I[15]!==L||I[16]!==O?(l=()=>{let e=L||E;if(e){let t=O.get(e);$(t?.sharedID||"")}},I[14]=E,I[15]=L,I[16]=O,I[17]=l):l=I[17],I[18]!==D||I[19]!==E||I[20]!==L||I[21]!==O?(o=[D,$,E,O,L],I[18]=D,I[19]=E,I[20]=L,I[21]=O,I[22]=o):o=I[22],(0,p.useEffect)(l,o),I[23]!==A||I[24]!==k||I[25]!==D||I[26]!==E||I[27]!==M||I[28]!==R||I[29]!==L?(d=async()=>{let e=L||E,t=new ex.k(A,R),n=await t.unshareThread(e);if(n.ok){let{sharedID:t,sharedAt:i,sharedMessageID:a}=n.payload;D.dispatch({type:"SHARED_THREAD_UPDATED",thread:{id:e,sharedID:t,sharedAt:i,sharedMessageID:a}}),B.current=!1,k(),(0,x.BI)("dotcom_chat.activate",{target:"COPILOT_UNSHARE_CONVERSATION",mode:"immersive",originalThreadId:e,sharedThreadId:M})}},I[23]=A,I[24]=k,I[25]=D,I[26]=E,I[27]=M,I[28]=R,I[29]=L,I[30]=d):d=I[30];let H=d;I[31]!==k?(c=()=>{k()},I[31]=k,I[32]=c):c=I[32];let K=c;I[33]!==H||I[34]!==M?(u=()=>{if(M)return(0,i.jsx)(ey.Q,{onClick:H,variant:"danger",children:"Unshare"})},I[33]=H,I[34]=M,I[35]=u):u=I[35];let W=u;I[36]!==k?(m=()=>(0,i.jsx)(ey.Q,{onClick:k,children:"Cancel"}),I[36]=k,I[37]=m):m=I[37];let z=m;I[38]===Symbol.for("react.memo_cache_sentinel")?(h=(0,i.jsx)("span",{children:"You're about to unshare the link for the following conversation:"}),I[38]=h):h=I[38];let Q=U?.name||"";return I[39]!==Q?(f=(0,i.jsx)("span",{className:"UnshareConversationDialog-module__threadTitle--eBgrX",children:Q}),I[39]=Q,I[40]=f):f=I[40],I[41]!==G?(v=(0,i.jsx)("span",{className:"UnshareConversationDialog-module__threadDescription--E1H0T",children:G}),I[41]=G,I[42]=v):v=I[42],I[43]!==f||I[44]!==v?(b=(0,i.jsxs)(eu.B,{direction:"vertical",className:"UnshareConversationDialog-module__threadInfoStack--gcf6y",children:[f,v]}),I[43]=f,I[44]=v,I[45]=b):b=I[45],I[46]===Symbol.for("react.memo_cache_sentinel")?(j=(0,i.jsx)("span",{children:"Once unshared, the link will no longer be accessible."}),I[46]=j):j=I[46],I[47]!==z?(w=z(),I[47]=z,I[48]=w):w=I[48],I[49]!==W?(_=W(),I[49]=W,I[50]=_):_=I[50],I[51]!==w||I[52]!==_?(C=(0,i.jsxs)(eu.B,{direction:"horizontal",gap:"condensed",align:"end",justify:"end",className:"UnshareConversationDialog-module__buttonStack--JvbNF",children:[w,_]}),I[51]=w,I[52]=_,I[53]=C):C=I[53],I[54]!==b||I[55]!==C?(N=(0,i.jsxs)("div",{className:"UnshareConversationDialog-module__container--Tc1R_",children:[h,b,j,C]}),I[54]=b,I[55]=C,I[56]=N):N=I[56],I[57]!==K||I[58]!==N?(S=(0,i.jsx)(ec.l,{title:"Unshare conversation",onClose:K,width:"large",children:N}),I[57]=K,I[58]=N,I[59]=S):S=I[59],S};try{ev.displayName||(ev.displayName="UnshareConversationDialog")}catch{}let eb=e=>{let t=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"}).format(t)},ej=({closeDialog:e,returnFocusRef:t})=>{let n=(0,y.b)(),a=(0,g.Pk)(),[s,r]=(0,p.useState)(0),[l,o]=(0,p.useState)([]),[d,u]=(0,p.useState)(!0),[m,h]=(0,p.useState)(!1),[f,b]=(0,p.useState)(null),[j,w]=(0,p.useState)(!1),[_,C]=(0,p.useState)(5>l.length),N=5*s,S=l.slice(N,N+5);(0,p.useEffect)(()=>{(async()=>{let e=await n.fetchSharedThreads();e&&o(e.map(e=>({id:e.id,conversation:e.name||"New conversation",lastUpdated:eb(e.updatedAt),sharedUrl:`${ed.fV.origin}/copilot/share/${e.sharedID}`,threadUrl:`${ed.fV.origin}/copilot/c/${e.id}`}))),u(!1)})()},[n]),(0,p.useEffect)(()=>{_&&s>0&&l.length<=5*s&&r(0);let e=5<l.length;e!==_&&C(e)},[l,s,5,_]);let I=(0,p.useCallback)(()=>{e()},[e]),k=(0,p.useCallback)(async()=>{if(!j)return void w(!0);w(!1),u(!0);try{(await n.unshareAllThreads()).ok&&(o([]),await n.fetchThreads())}finally{u(!1)}},[j,n]),L=async()=>{h(!1),b(null),u(!0);let e=await n.fetchSharedThreads();e&&o(e.map(e=>({id:e.id,conversation:e.name||"New chat",lastUpdated:eb(e.updatedAt),sharedUrl:`${ed.fV.origin}/copilot/share/${e.sharedID}`,threadUrl:`${ed.fV.origin}/copilot/c/${e.id}`}))),u(!1)},T=d||"error"===a.sharedThreadsLoading.state||0===l.length,D=(0,p.useMemo)(()=>{if(!l.length)return[];let e={buttonType:"danger",content:"Unshare all",onClick:()=>{j?k():w(!0)}};return j?[{buttonType:"default",content:"Cancel",onClick:()=>w(!1)},e]:[e]},[l.length,j,k]),E=(0,p.useMemo)(()=>d?{result:"loading",heading:"Loading shared conversations",description:"Your shared conversations will appear here.",isSpinner:!0}:"error"===a.sharedThreadsLoading.state?{result:"error",heading:"We couldn't load the shared conversations",description:"Try again or, if the problem persists, contact support."}:{result:"empty",heading:"No shared conversations",description:"Your shared conversations will appear here."},[d,a.sharedThreadsLoading.state]);return(0,i.jsxs)(ec.l,{title:"Manage shared conversations",width:"xlarge",className:"ManageSharedConversationsDialog-module__dialog--_C8sX",position:{narrow:"fullscreen",regular:"center"},onClose:I,returnFocusRef:t,renderFooter:()=>{var e;return D?.length?(0,i.jsx)(ec.l.Footer,{className:"ManageSharedConversationsDialog-module__footer--aTXFp",children:(0,i.jsxs)("div",{className:"ManageSharedConversationsDialog-module__footerContent--yVU91",children:[(0,i.jsx)("div",{className:"ManageSharedConversationsDialog-module__footerLeft--eRZWV",children:j&&(0,i.jsx)("div",{className:"ManageSharedConversationsDialog-module__confirmationText--tYQ41 ManageSharedConversationsDialog-module__quickFadeUp--tiEAs",children:1===(e=l.length)?"Are you sure you want to unshare this conversation?":`Are you sure you want to unshare all ${e} conversations?`})}),(0,i.jsx)("div",{className:"ManageSharedConversationsDialog-module__footerRight--n1XJG",children:(0,i.jsx)(ec.l.Buttons,{buttons:D})})]})}):null},children:[T?(0,i.jsxs)(eh.E,{children:[(0,i.jsx)(eh.E.Visual,{children:E.isSpinner?(0,i.jsx)(eu.B,{direction:"horizontal",align:"center",children:(0,i.jsx)(em.A,{size:"medium",srText:"Loading shared conversations\u2026"})}):(0,i.jsx)("div",{className:eg,children:"error"===E.result?(0,i.jsx)(c.AlertIcon,{size:"medium",className:"ManageSharedConversationsDialog-module__alertIcon--mA28C","aria-label":"Error loading shared conversations"}):(0,i.jsx)(c.LinkIcon,{size:"medium","aria-label":"No shared conversations"})})}),(0,i.jsx)(eh.E.Heading,{children:E.heading}),(0,i.jsx)(eh.E.Description,{children:E.description})]}):(0,i.jsxs)(ef.X.Container,{children:[(0,i.jsx)(ep.b,{"aria-labelledby":"manage-shared-conversations",cellPadding:"normal",columns:[{header:"Chat",field:"conversation",width:"growCollapse",minWidth:"60%",rowHeader:!0,renderCell:e=>(0,i.jsx)(er.A,{href:e.threadUrl,className:"ManageSharedConversationsDialog-module__conversationLink--JqMKE",children:e.conversation})},{header:"Last updated",field:"lastUpdated",width:"growCollapse",renderCell:e=>(0,i.jsx)("span",{className:eg,children:e.lastUpdated})},{id:"actions",width:"growCollapse",align:"end",header:()=>(0,i.jsx)("div",{className:"sr-only",children:"Actions"}),renderCell:e=>(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"ManageSharedConversationsDialog-module__actionButtons--iuECd",children:[(0,i.jsx)(eo.T,{textToCopy:e.sharedUrl,onCopy:()=>{(0,x.BI)("dotcom_chat.activate",{target:"COPILOT_COPY_SHARED_CONVERSATION_LINK",mode:"immersive"})},ariaLabel:"Copy share link"}),(0,i.jsx)(v.K,{"aria-label":"Unshare chat",title:"Unshare chat",icon:c.UnlinkIcon,variant:"invisible",onClick:()=>{b(e),h(!0)}})]})})}],data:S}),l.length>5&&(0,i.jsx)(ef.X.Pagination,{"aria-label":"Shared chats pagination",pageSize:5,defaultPageIndex:s,totalCount:l.length,onChange:e=>{r(e.pageIndex)},showPages:!1})]}),m&&f&&(0,i.jsx)(ev,{threadId:f.id,closeDialog:L})]})};try{ej.displayName||(ej.displayName="ManageSharedConversationsDialog")}catch{}var ew=n(17005),e_=n(87255);let eC="UserMenu-module__userAvatar--sp40T";function eN(e){let t,n,s,r,l,o,d,u,y,v,b,j,w,_,C,N,S,I,k,L,T,D,E,R,A=(0,a.c)(55),{isCondensed:O}=e,P=void 0!==O&&O,F=(0,p.useRef)(null),M=(0,p.useRef)(null),[$,B]=(0,p.useState)(!1),[V,U]=(0,p.useState)(!1),{currentUserLogin:q,plan:G,optedInToUserFeedback:H}=(0,g.bP)("currentUserLogin","plan","optedInToUserFeedback"),K=(0,Q.mM)();A[0]!==G?(t=function(e){switch(e){case el.UH.IndividualFree:return"Free";case el.UH.IndividualPro:return"Pro";case el.UH.IndividualProPlus:return"Pro+";case el.UH.Business:return"Business";case el.UH.Enterprise:return"Enterprise";default:return"Free"}}(G),A[0]=G,A[1]=t):t=A[1];let W=`Copilot ${t}`,z=!G||G===el.UH.IndividualFree,Z=P&&"UserMenu-module__condensed--rjzRR";A[2]!==Z?(n=(0,f.$)("UserMenu-module__userButton--FuXsC",Z),A[2]=Z,A[3]=n):n=A[3];let J=P?"user":void 0,Y=`/${q}.png`;A[4]!==Y?(s=(0,i.jsx)("div",{className:eC,children:(0,i.jsx)(es.r,{src:Y,size:24})}),A[4]=Y,A[5]=s):s=A[5],A[6]!==W?(r=(0,i.jsx)("div",{className:"UserMenu-module__planLabel--wfY7B",children:W}),A[6]=W,A[7]=r):r=A[7],A[8]!==q||A[9]!==r?(l=(0,i.jsxs)("div",{className:"UserMenu-module__userContent--jXldm",children:[q,r]}),A[8]=q,A[9]=r,A[10]=l):l=A[10],A[11]!==n||A[12]!==J||A[13]!==s||A[14]!==l?(o=(0,i.jsx)(m.W.Anchor,{children:(0,i.jsxs)("button",{className:n,"aria-label":J,children:[s,l]})}),A[11]=n,A[12]=J,A[13]=s,A[14]=l,A[15]=o):o=A[15];let X=`/${q}.png`;return A[16]!==X?(d=(0,i.jsx)("div",{className:eC,children:(0,i.jsx)(es.r,{src:X,size:32})}),A[16]=X,A[17]=d):d=A[17],A[18]!==q?(u=(0,i.jsx)("div",{className:"UserMenu-module__username--n5Tln",children:q}),A[18]=q,A[19]=u):u=A[19],A[20]!==z?(y=z&&(0,i.jsxs)(i.Fragment,{children:[" \xb7 ",(0,i.jsx)(er.A,{onClick:eI,href:"https://github.com/github-copilot/pro",className:"UserMenu-module__upgradeLink--eI332",children:"Upgrade"})]}),A[20]=z,A[21]=y):y=A[21],A[22]!==W||A[23]!==y?(v=(0,i.jsxs)("span",{className:"UserMenu-module__description--FvI5s",children:[W,y]}),A[22]=W,A[23]=y,A[24]=v):v=A[24],A[25]!==u||A[26]!==v?(b=(0,i.jsxs)("div",{className:"UserMenu-module__userDetails--mes1V",children:[u,v]}),A[25]=u,A[26]=v,A[27]=b):b=A[27],A[28]!==d||A[29]!==b?(j=(0,i.jsxs)("div",{className:"UserMenu-module__menuItem--oXBxi",children:[d,b]}),A[28]=d,A[29]=b,A[30]=j):j=A[30],A[31]===Symbol.for("react.memo_cache_sentinel")?(w=(0,i.jsx)(h.l.Divider,{}),A[31]=w):w=A[31],A[32]===Symbol.for("react.memo_cache_sentinel")?(_=()=>{U(!0),(0,x.BI)("dotcom_chat.activate",{target:"USER_MENU_PERSONAL_INSTRUCTIONS",mode:"immersive"})},A[32]=_):_=A[32],A[33]===Symbol.for("react.memo_cache_sentinel")?(C=(0,i.jsxs)(h.l.Item,{onSelect:_,children:[(0,i.jsx)(h.l.LeadingVisual,{children:(0,i.jsx)(c.NoteIcon,{})}),"Personal instructions"]}),A[33]=C):C=A[33],A[34]!==K?(N=!K&&(0,i.jsxs)(h.l.Item,{onSelect:()=>{B(!0),(0,x.BI)("dotcom_chat.activate",{target:"USER_MENU_MANAGE_SHARED",mode:"immersive"})},children:[(0,i.jsx)(h.l.LeadingVisual,{children:(0,i.jsx)(c.ListUnorderedIcon,{})}),"Manage shared conversations"]}),A[34]=K,A[35]=N):N=A[35],A[36]!==H?(S=H&&(0,i.jsxs)(h.l.Item,{onSelect:()=>{M.current?.openDialog(),(0,x.BI)("dotcom_chat.activate",{target:"USER_MENU_GIVE_FEEDBACK",mode:"immersive"})},children:[(0,i.jsx)(h.l.LeadingVisual,{children:(0,i.jsx)(c.CommentIcon,{})}),"Give feedback"]}),A[36]=H,A[37]=S):S=A[37],A[38]===Symbol.for("react.memo_cache_sentinel")?(I=(0,i.jsxs)(h.l.LinkItem,{href:"/settings/copilot",onClick:eS,children:[(0,i.jsx)(h.l.LeadingVisual,{children:(0,i.jsx)(c.GearIcon,{})}),"Settings"]}),A[38]=I):I=A[38],A[39]!==j||A[40]!==N||A[41]!==S?(k=(0,i.jsx)(m.W.Overlay,{width:"small",align:"end",children:(0,i.jsxs)(h.l,{children:[j,w,C,N,S,I]})}),A[39]=j,A[40]=N,A[41]=S,A[42]=k):k=A[42],A[43]!==o||A[44]!==k?(L=(0,i.jsxs)(m.W,{anchorRef:F,children:[o,k]}),A[43]=o,A[44]=k,A[45]=L):L=A[45],A[46]===Symbol.for("react.memo_cache_sentinel")?(T=(0,i.jsx)(ew.l,{ref:M,mode:"immersive",returnFocusRef:F}),A[46]=T):T=A[46],A[47]!==$?(D=$&&(0,i.jsx)(ej,{closeDialog:()=>{B(!1)},returnFocusRef:F}),A[47]=$,A[48]=D):D=A[48],A[49]!==V?(E=V&&(0,i.jsx)(e_.Y,{onDismiss:()=>U(!1),returnFocusRef:F}),A[49]=V,A[50]=E):E=A[50],A[51]!==L||A[52]!==D||A[53]!==E?(R=(0,i.jsxs)(i.Fragment,{children:[L,T,D,E]}),A[51]=L,A[52]=D,A[53]=E,A[54]=R):R=A[54],R}function eS(){return(0,x.BI)("dotcom_chat.activate",{target:"USER_MENU_SETTINGS",mode:"immersive"})}function eI(){(0,x.BI)("dotcom_chat.activate",{target:"UPGRADE_USER_MENU_LINK",mode:"immersive"})}try{eN.displayName||(eN.displayName="UserMenu")}catch{}function ek(){let e,t=(0,a.c)(5),{sidebarExpanded:n,sidebarVisible:s,layoutBreakpoint:l,toggleSidebar:o}=(0,r.L)();return t[0]!==l||t[1]!==n||t[2]!==s||t[3]!==o?(e=(0,i.jsx)(eT,{sidebarExpanded:n,sidebarVisible:s,sidebarFloating:l,onToggleSidebar:o}),t[0]=l,t[1]=n,t[2]=s,t[3]=o,t[4]=e):e=t[4],e}function eL(e){let t,n=(0,a.c)(6),{children:s,showTooltip:r,text:l,direction:o}=e,d=void 0===o?"e":o;if(!r){let e;return n[0]!==s?(e=(0,i.jsx)(i.Fragment,{children:s}),n[0]=s,n[1]=e):e=n[1],e}return n[2]!==s||n[3]!==d||n[4]!==l?(t=(0,i.jsx)(u.m,{text:l,direction:d,children:s}),n[2]=s,n[3]=d,n[4]=l,n[5]=t):t=n[5],t}function eT(e){let t,n,r,u,x,v,b,j,w,_,C,S,I,k,L,T,D=(0,a.c)(47),{onSidebarClick:E,onToggleSidebar:R,sidebarExpanded:A,sidebarFloating:O,sidebarVisible:P}=e,q=!O&&!A,G=(0,y.b)(),{threadsLoading:H,threads:K,selectedThreadID:W,ssoOrganizations:z,agentsEnabled:Q}=(0,g.bP)("threadsLoading","threads","selectedThreadID","ssoOrganizations","agentsEnabled"),Z=(0,d.zy)(),J=Z.pathname.includes("/share/");D[0]!==G||D[1]!==K.size||D[2]!==H.state?(t=()=>{0===K.size&&"pending"===H.state&&G.fetchThreads()},n=[K.size,G,H.state],D[0]=G,D[1]=K.size,D[2]=H.state,D[3]=t,D[4]=n):(t=D[3],n=D[4]),(0,p.useEffect)(t,n),D[5]!==E||D[6]!==P||D[7]!==R?(r=()=>{E?.(),P&&R()},D[5]=E,D[6]=P,D[7]=R,D[8]=r):r=D[8];let Y=r,X=(0,p.useId)();D[9]!==Z.hash||D[10]!==Z.pathname||D[11]!==Z.search?(u=e=>{let t=`/orgs/${encodeURIComponent(e)}/sso`,n=Z.pathname+Z.search+Z.hash;return`${t}?return_to=${encodeURIComponent(n)}`},D[9]=Z.hash,D[10]=Z.pathname,D[11]=Z.search,D[12]=u):u=D[12];let ee=u;D[13]!==q||D[14]!==R?(x=()=>(0,i.jsx)(eL,{showTooltip:q,text:"Expand sidebar",children:(0,i.jsxs)("button",{className:$,"aria-label":q?"Expand sidebar":"Collapse sidebar",onClick:R,children:[q?(0,i.jsx)(c.SidebarCollapseIcon,{size:16,className:M}):(0,i.jsx)(c.SidebarExpandIcon,{size:16,className:M}),(0,i.jsx)("span",{className:(0,f.$)(B,q&&V),children:"Collapse"})]})}),D[13]=q,D[14]=R,D[15]=x):x=D[15];let et=x;D[16]!==ee||D[17]!==q||D[18]!==z?(v=()=>{if(0===z.length)return null;if(1===z.length){let e=z[0];return(0,i.jsx)(eL,{showTooltip:q,text:"Single sign-on",children:(0,i.jsxs)("a",{href:ee(e.login),className:$,children:[(0,i.jsx)(c.ShieldLockIcon,{size:16,className:U}),(0,i.jsx)("span",{className:(0,f.$)(B,q&&V),"aria-hidden":q,children:"Single sign-on"})]})})}return(0,i.jsx)(eL,{showTooltip:q,text:"Single sign-on",children:(0,i.jsx)("div",{children:(0,i.jsxs)(m.W,{children:[(0,i.jsx)(m.W.Anchor,{children:(0,i.jsxs)("button",{className:$,"aria-label":"Single sign-on",children:[(0,i.jsx)(s.I,{icon:c.ShieldLockIcon,size:16,className:U}),(0,i.jsx)("div",{className:(0,f.$)(B,q&&V),"aria-hidden":q,children:"Single sign-on"})]})}),(0,i.jsx)(m.W.Overlay,{children:(0,i.jsx)(h.l,{children:z.map(e=>(0,i.jsx)(h.l.LinkItem,{href:ee(e.login),children:e.login},e.login))})})]})})})},D[16]=ee,D[17]=q,D[18]=z,D[19]=v):v=D[19];let en=v;D[20]===Symbol.for("react.memo_cache_sentinel")?(b=(0,i.jsx)(eD,{}),D[20]=b):b=D[20];let ei=`${X}-quick-links`,es=`${X}-quick-links`;D[21]!==es?(j=(0,i.jsx)("h3",{id:es,className:"sr-only",children:"Quick links"}),D[21]=es,D[22]=j):j=D[22],D[23]!==Y||D[24]!==q?(w=(0,i.jsx)(ea,{isSidebarCondensed:q,toggleFloatingSidebar:Y}),D[23]=Y,D[24]=q,D[25]=w):w=D[25],D[26]!==j||D[27]!==w||D[28]!==ei?(_=(0,i.jsxs)("nav",{"aria-labelledby":ei,className:"CopilotNavigation-module__quicklinks--y91ru",children:[j,w]}),D[26]=j,D[27]=w,D[28]=ei,D[29]=_):_=D[29];let er=(0,o.u)("copilot_swe_agent_progress_commands")&&Q?(0,i.jsx)(F,{handleSidebarClick:Y,isCondensed:q,onToggleSidebar:R}):(0,i.jsx)(N,{selectedItemID:J?null:W,loadingState:H.state,onConversationSelect:Y,isSidebarCondensed:q});return D[30]!==_||D[31]!==er?(C=(0,i.jsxs)(l.t,{fallback:b,children:[_,er]}),D[30]=_,D[31]=er,D[32]=C):C=D[32],D[33]!==et||D[34]!==O?(S=!O&&et(),D[33]=et,D[34]=O,D[35]=S):S=D[35],D[36]!==en?(I=en(),D[36]=en,D[37]=I):I=D[37],D[38]!==q?(k=(0,i.jsx)(eN,{isCondensed:q}),D[38]=q,D[39]=k):k=D[39],D[40]!==S||D[41]!==I||D[42]!==k?(L=(0,i.jsxs)("div",{className:"CopilotNavigation-module__footer--WE0C5",children:[S,I,k]}),D[40]=S,D[41]=I,D[42]=k,D[43]=L):L=D[43],D[44]!==C||D[45]!==L?(T=(0,i.jsxs)(i.Fragment,{children:[C,L]}),D[44]=C,D[45]=L,D[46]=T):T=D[46],T}function eD(){let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{className:"CopilotNavigation-module__blankslateContainer--nuX9Y",children:(0,i.jsx)("div",{children:"Error loading conversations"})}),t[0]=e):e=t[0],e}try{ek.displayName||(ek.displayName="CopilotNavigationWithContext")}catch{}try{eL.displayName||(eL.displayName="ConditionalTooltip")}catch{}try{eT.displayName||(eT.displayName="CopilotNavigation")}catch{}try{eD.displayName||(eD.displayName="SidebarContentsFallback")}catch{}},82130:(e,t,n)=>{n.d(t,{q:()=>l});var i=n(68273),a=n(21728),s=n(30459),r=n(96540);let l=(0,i.Z6)()?function(){let e,t,n=(0,a.c)(4),{sendAnalyticsEvent:i}=(0,s.s)();n[0]!==i?(e=(e,t,n)=>{i(e,t,void 0===n?{}:n)},n[0]=i,n[1]=e):e=n[1];let r=e;return n[2]!==r?(t={sendPullRequestAnalyticsEvent:r},n[2]=r,n[3]=t):t=n[3],t}:function(){let{sendAnalyticsEvent:e}=(0,s.s)();return{sendPullRequestAnalyticsEvent:(0,r.useCallback)((t,n,i={})=>{e(t,n,i)},[e])}}},82590:(e,t,n)=>{n.d(t,{oO:()=>sW,Ao:()=>sK,Yf:()=>R.Yf});var i=n(74848),a=n(68273),s=n(21728),r=n(90047),l=n(96540),o=n(36729),d=n(77430),c=n(38621),u=n(81960),m=n(26108),h=n(53627);function f(e,t="r"){(0,h.Zu)(`#${t}${e}`)}var p=n(91835),g=n(71315),y=n(83494),x=n(34164),v=n(50625),b=n(93642);let j="AddCommentEditor-module__AddCommentEditor--JFfip",w="AddCommentEditor-module__ConversationCommentBox--Q4U7y",_="AddCommentEditor-module__hideMarkdownFooter--sfStq",C="AddCommentEditor-module__showMarkdownFooter--ZyiXk",N="AddCommentEditor-module__isReplying--DYCp6",S="AddCommentEditor-module__condensed--cPcHQ";var I=n(70109),k=n(27011),L=n(71323),T=n(97283),D=n(87134),E=n(36472),R=n(3038),A=n(51391),O=n(13814);let P=(0,l.createContext)(null),F=(0,a.GV)()?function(e){let t=(0,l.useContext)(P);if(!t)throw Error("Missing DiffStoreProvider in the tree");return(0,L.P)(t,e)}:function(e){let t=(0,l.useContext)(P);if(!t)throw Error("Missing DiffStoreProvider in the tree");return(0,L.P)(t,e)},M=({children:e,...t})=>{let n=(0,l.useRef)(null),a=(0,l.useRef)(t.diffLines),s=(0,l.useRef)(t.isSplitView),r=(0,l.useRef)(t.hiddenFeatures);return n.current||(n.current=$(t)),(0,l.useEffect)(()=>{n.current&&a.current.length!==t.diffLines.length&&(n.current.getState().diffLinesSliceUpdates.updateDiffLinesHash(t.diffLines),a.current=t.diffLines)},[t,t.diffLines]),(0,l.useEffect)(()=>{n.current&&s.current!==t.isSplitView&&(n.current.getState().diffLinesSliceUpdates.updateDiffView(t.isSplitView),s.current=t.isSplitView)},[t,t.isSplitView]),(0,l.useEffect)(()=>{n.current&&!function(e,t){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}(r.current,t.hiddenFeatures)&&(n.current.setState({hiddenFeatures:t.hiddenFeatures}),r.current=t.hiddenFeatures)},[t,t.hiddenFeatures]),(0,i.jsx)(P.Provider,{value:n.current,children:e})},$=e=>(0,T.y)()((0,D.lt)((...t)=>({...(e=>({dialogMode:{activeGridCellId:null},dialogModeActions:{enableDialogMode:t=>e(()=>({dialogMode:{activeGridCellId:t}}),void 0,"dialogMode#enabled"),disableDialogMode:()=>e(()=>({dialogMode:{activeGridCellId:null}}),void 0,"dialogMode#disabled")}}))(...t),...(({diffAnchor:e,path:t,diffLines:n,fileLineCount:i,isSplitView:a})=>(s,r)=>{let l=n.reduce((e,t)=>(e[(0,A.bo)(t)]=t,e),{}),{selectedLineKeys:o,selectedLineRange:d,startOrientation:c}=(0,A.EV)({diffAnchor:e,diffLines:n,isSplitView:a,lineRange:(0,A.KV)(e)}),u=(0,A.Aj)(o),m=(0,A.sB)(o),h=n.reduce((e,t)=>{let n=(0,A.bo)(t);return o.has((0,A.bo)(t))&&(e[n]={isSelected:!0,isFirstSelected:u===n,isLastSelected:m===n}),e},{}),f=null;if(u){let e=l[u];if(e&&c){let t="left"===c?e.left:e.right;t&&(f={lineNumber:t,orientation:c,shouldStartConversation:!1,lineKey:(0,A.bo)(e)})}}return{diffLines:{diffAnchor:e,_diffLines:n,_diffLinesHash:l,selectedLinesInfo:h,fileLineCount:i,firstLineSelectionOnDrag:f,_firstSelectedLineInfo:f?{lineKey:f.lineKey,lineNumber:f.lineNumber,orientation:f.orientation}:null,getDiffLinesInfo:()=>r().diffLines._diffLines,getSplitDiffLinesFromLineRange:e=>{let t=(0,R.Mk)(r().diffLines._diffLines),n=t.leftLines,i=t.rightLines;return(0,E.A)({selectedLineRange:e,leftLines:n,rightLines:i})},getSelectedDiffLines:()=>{let e=[];for(let t of r().diffLines.selectedLineKeys){let n=r().diffLines._diffLinesHash[t];n&&e.push(n)}return e},getfirstLineSelectionOnDrag:()=>r().diffLines.firstLineSelectionOnDrag,getSelectedLineRange:()=>r().diffLines.selectedLineRange,hasSelectedLines:()=>r().diffLines.selectedLineKeys.size>0,isSplitView:a,selectedLineKeys:o,selectedLineRange:d},diffLinesSliceUpdates:{updateDiffLinesHash:e=>{let t=e.reduce((e,t)=>(e[(0,A.bo)(t)]=t,e),{});s(n=>({diffLines:{...n.diffLines,_diffLines:e,_diffLinesHash:t}}),void 0,"updateDiffLines")},updateDiffView:e=>s(t=>({diffLines:{...t.diffLines,isSplitView:e}}),void 0,"update diff view settings")},diffLinesActions:{clearFirstLineSelectionOnDrag:()=>s(e=>({diffLines:{...e.diffLines,firstLineSelectionOnDrag:null}}),void 0,"clearFirstLineSelectionOnDrag"),addLineToSelection:({lineKey:n,orientation:i},a)=>{let l;if(!n)return;let o=r().diffLines._diffLinesHash[n];if(!o)return;let d=r().diffLines.firstLineSelectionOnDrag,c=r().diffLines._firstSelectedLineInfo,u=r().diffLines.selectedLineRange;if(d&&n===d.lineKey||!u){let e="right"===i?o.right:o.left;if(!e)return;r().diffLinesActions.selectLine({lineKey:n,firstLineSelectionOnDrag:{lineNumber:e,orientation:i,lineKey:n,shouldStartConversation:!1}},a);return}if(!c)return;let m=r().diffLines._diffLinesHash[c.lineKey];l=(0,A.M6)({current:o,currentOrientation:i,previous:m,previousOrientation:c.orientation})?{...u,startLineNumber:("left"===i?o?.left:o?.right)??-1,startOrientation:i,endLineNumber:c.lineNumber,endOrientation:c.orientation}:{...u,startLineNumber:c.lineNumber,startOrientation:c.orientation,endLineNumber:("left"===i?o?.left:o?.right)??-1,endOrientation:i};let{selectedLineKeys:h,selectedLineRange:f}=(0,A.EV)({diffAnchor:e,diffLines:r().diffLines._diffLines,isSplitView:r().diffLines.isSplitView,lineRange:l}),p=(0,A.Aj)(h),y=(0,A.sB)(h),x=Array.from(h).reduce((e,t)=>(e[t]={isFirstSelected:t===p,isLastSelected:t===y,isSelected:!0},e),{});if(!f?.endLineNumber||!f?.startLineNumber)return;let v=new O.J(f,t);g.cg?.dispatchEvent(v),s(e=>({diffLines:{...e.diffLines,selectedLineKeys:h,selectedLinesInfo:x,selectedLineRange:f}}),void 0,"addLineToSelection"),a(f)},clearSelectedLines:()=>{s(e=>({diffLines:{...e.diffLines,firstLineSelectionOnDrag:null,selectedLineKeys:new Set([]),selectedLinesInfo:{},selectedLineRange:void 0,_firstSelectedLineInfo:null}}),void 0,"clearSelectedLines")},selectLine:({lineKey:e,firstLineSelectionOnDrag:n},i)=>{if(!e)return;r().diffLinesActions.clearSelectedLines();let a=r().diffLines._diffLinesHash[e];if(!a)return;let l={[e]:{isFirstSelected:!0,isLastSelected:!0,isSelected:!0}},o="left"===n.orientation?a.left:a.right;if(!o)return;let d={diffAnchor:r().diffLines.diffAnchor,endLineNumber:o,endOrientation:n.orientation,startLineNumber:o,startOrientation:n.orientation},c=new O.J(d,t);g.cg?.dispatchEvent(c),s(t=>({diffLines:{...t.diffLines,firstLineSelectionOnDrag:{...n,lineKey:e},selectedLineKeys:new Set([e]),selectedLinesInfo:l,selectedLineRange:d,_firstSelectedLineInfo:{lineKey:e,lineNumber:n.lineNumber,orientation:n.orientation}}}),void 0,"selectLine"),i(d)},selectMultipleLines:({startLineKey:n,endLineKey:i,startOrientation:a,endOrientation:l,firstLineSelectionOnDrag:o},d)=>{if(!n||!i||!o)return;let c=r().diffLines._diffLinesHash[n],u=r().diffLines._diffLinesHash[i];if(!c||!u||!c.left&&!c.right||!u.left&&!u.right)return;let m={diffAnchor:e,endLineNumber:("right"===l?u.right:u.left)??-1,endOrientation:l,startLineNumber:("right"===a?c.right:c.left)??-1,startOrientation:a},{selectedLineKeys:h,selectedLineRange:f}=(0,A.EV)({diffAnchor:e,diffLines:r().diffLines._diffLines,isSplitView:r().diffLines.isSplitView,lineRange:m}),p=(0,A.Aj)(h),y=(0,A.sB)(h),x=Array.from(h).reduce((e,t)=>(e[t]={isFirstSelected:t===p,isLastSelected:t===y,isSelected:!0},e),{});if(!f?.endLineNumber||!f?.startLineNumber)return;let v=new O.J(f,t);g.cg?.dispatchEvent(v),s(e=>({diffLines:{...e.diffLines,selectedLinesInfo:x,selectedLineKeys:h,firstLineSelectionOnDrag:o,selectedLineRange:f,_firstSelectedLineInfo:{lineNumber:o.lineNumber,orientation:o.orientation,lineKey:o.lineKey}}}),void 0,"selectMultipleLines"),d(f)}}}})(e)(...t),...(({hiddenFeatures:e})=>()=>({hiddenFeatures:e}))(e)(...t),...(({addInjectedContextLines:e})=>()=>({injectedContextLinesActions:{addInjectedContextLines:e}}))(e)(...t),...(({startNewConversationForLineOrFileMap:e})=>(t,n)=>({startNewConversationForLineOrFileMap:e,getMoveNewCommentDataForLine:e=>n().startNewConversationForLineOrFileMap[e],addStartNewCommentOnLine:(t,n,i)=>{e[t]={diffLineKey:i,startNewComment:n}}}))(e)(...t),...(({newTreeEntry:e,oldTreeEntry:t})=>()=>({treeEntries:{newTreeEntry:e,oldTreeEntry:t}}))(e)(...t)}),{name:`diff-store-${e.diffAnchor}`}));try{P.displayName||(P.displayName="DiffStoreContext")}catch{}try{M.displayName||(M.displayName="DiffStoreProvider")}catch{}let B=(0,a.GV)()?()=>F(ea):()=>F(e=>e.diffLines.getSplitDiffLinesFromLineRange),V=(0,a.GV)()?()=>F(es):()=>F(e=>e.diffLines.getSelectedDiffLines),U=(0,a.GV)()?()=>F(er):()=>F(e=>e.diffLines.getDiffLinesInfo),q=(0,a.GV)()?()=>F(el):()=>F(e=>e.diffLines.getfirstLineSelectionOnDrag),G=(0,a.GV)()?()=>F(eo):()=>F(e=>e.diffLines.getSelectedLineRange),H=(0,a.GV)()?()=>F(ed):()=>F(e=>e.diffLines.hasSelectedLines),K=(0,a.GV)()?()=>F(ec):()=>F(e=>e.hiddenFeatures),W=(0,a.GV)()?e=>{let t,n=(0,s.c)(2);return n[0]!==e?(t=t=>!!e&&t.dialogMode.activeGridCellId===e,n[0]=e,n[1]=t):t=n[1],F(t)}:e=>F(t=>!!e&&t.dialogMode.activeGridCellId===e),z=(0,a.GV)()?()=>F(eu):()=>F(e=>e.dialogModeActions),Q=(0,a.GV)()?()=>F(em):()=>F(e=>e.diffLines.diffAnchor),Z=(0,a.GV)()?()=>F(eh):()=>F(e=>e.diffLines.fileLineCount),J={isSelected:!1,isFirstSelected:!1,isLastSelected:!1},Y=(0,a.GV)()?e=>{let t,n=(0,s.c)(2);return n[0]!==e?(t=t=>e&&t.diffLines.selectedLinesInfo[(0,A.bo)(e)]||J,n[0]=e,n[1]=t):t=n[1],F(t)}:e=>F(t=>e&&t.diffLines.selectedLinesInfo[(0,A.bo)(e)]||J),X=(0,a.GV)()?()=>F(ef):()=>F(e=>e.diffLinesActions),ee=(0,a.GV)()?()=>F(ep):()=>F(e=>e.injectedContextLinesActions),et=(0,a.GV)()?()=>F(eg):()=>F(e=>e.treeEntries),en=(0,a.GV)()?()=>F(ey):()=>F(e=>e.getMoveNewCommentDataForLine),ei=(0,a.GV)()?()=>F(ex):()=>F(e=>e.addStartNewCommentOnLine);function ea(e){return e.diffLines.getSplitDiffLinesFromLineRange}function es(e){return e.diffLines.getSelectedDiffLines}function er(e){return e.diffLines.getDiffLinesInfo}function el(e){return e.diffLines.getfirstLineSelectionOnDrag}function eo(e){return e.diffLines.getSelectedLineRange}function ed(e){return e.diffLines.hasSelectedLines}function ec(e){return e.hiddenFeatures}function eu(e){return e.dialogModeActions}function em(e){return e.diffLines.diffAnchor}function eh(e){return e.diffLines.fileLineCount}function ef(e){return e.diffLinesActions}function ep(e){return e.injectedContextLinesActions}function eg(e){return e.treeEntries}function ey(e){return e.getMoveNewCommentDataForLine}function ex(e){return e.addStartNewCommentOnLine}var ev=n(61583),eb=n(4559);function ej(){(0,eb.i)("Selection Cleared")}function ew({diffAnchor:e,endLineNumber:t,endOrientation:n,startLineNumber:i,startOrientation:a}){if(i&&t){var s;(0,ev.i8)({diffAnchor:e,endLineNumber:t,endOrientation:n,startLineNumber:i,startOrientation:a}),(s={diffAnchor:e,endLineNumber:t,endOrientation:n,startLineNumber:i,startOrientation:a}).startLineNumber===s.endLineNumber&&s.startOrientation===s.endOrientation?(0,eb.i)(`${"left"===s.startOrientation?"L":"R"}${s.startLineNumber} selected.`):(0,eb.i)(`${"left"===s.startOrientation?"L":"R"}${s.startLineNumber} to ${"left"===s.endOrientation?"L":"R"}${s.endLineNumber} selected.`)}}var e_=n(3252),eC=n(71317);let eN="comment",eS="review",eI=(0,a.GV)()?function(e){let t,n,a,r,o,d,c,u,m,h,f,L,T,D,E,R,A,O,P,F,M=(0,s.c)(78),{batchingEnabled:$,condensed:B,fileLevelComment:V,filePath:U,focusOnMount:q,isReplying:G,lineNumber:H,onAddComment:K,onCancelComment:W,onPersistedCommentExists:z,quotedText:Q,side:Z,startLineNumber:J,subjectId:Y,threadId:ee,suggestedChangesConfig:et,commentLineChangeConfig:en}=e,ei=void 0===Q?"":Q,[ea,es]=(0,l.useState)(ei),[er,el]=(0,l.useState)(null),eo=(0,l.useRef)(ei),[ed,ec]=(0,l.useState)(),eu=(0,l.useRef)(null),em=(0,l.useRef)(null),eh=(0,k.it)(),ef=(0,l.useRef)(void 0),{selectMultipleLines:ep,clearSelectedLines:eg}=X();M[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{(0,eC.k)(e??"",100),ec(e)},M[0]=t):t=M[0];let ey=t,ex=null!==er,{persistCommentToStorage:ev,removePersistedCommentFromStorage:eb,persistCommentOnGivenLineToStorage:ej}=(0,v.L)({diffSide:Z,filePath:U,line:H,subjectId:Y,threadId:ee,handlePersistedCommentExists:e=>{let{text:t,shouldFocus:n,startLine:i,startSide:a,startLineKey:s,endLineKey:r}=e;if(t){if(es(t),n&&eu.current&&(eu.current.focus(),eu.current.moveCursorToEnd(),eI({text:t,startLine:i,startSide:a,startLineKey:s,endLineKey:r}),i)){let e="LEFT"===Z?"left":"right";ep({endLineKey:r,endOrientation:e,startLineKey:s,startOrientation:e,firstLineSelectionOnDrag:{lineKey:s??"b:0-l:0-r:0",lineNumber:H??0,orientation:e,shouldStartConversation:!1}},ew)}z?.()}},fileLevelComment:!!V}),eI=ev;if(M[1]!==ei?(n=()=>{ei!==eo.current&&(eo.current=ei,es(ei))},a=[ei],M[1]=ei,M[2]=n,M[3]=a):(n=M[2],a=M[3]),(0,l.useEffect)(n,a),M[4]!==eg||M[5]!==en||M[6]!==ea||M[7]!==U||M[8]!==H||M[9]!==W||M[10]!==ej||M[11]!==eb||M[12]!==ep||M[13]!==Z?(r=()=>{if(en){if(null!==(0,e_.T)(ea))return void en.setErrorMessage("Changing the line number of a comment with a suggested change is not supported.");if(en.closeLineMovingDialog(),ej({text:ea,givenLineDiffSide:en.diffSide,givenFilePath:U,givenLine:en.endLineNumber,shouldBeFileLevelComment:en.isFileLevelComment,startLine:en.startLineNumber,startLineKey:en.startDiffLineKey,endLineKey:en.endDiffLineKey}),eb(),H!==en.endLineNumber||en.isFileLevelComment)en.startConversationOnNewLine(),W?.(!1);else if(en.endDiffLineKey&&en.startDiffLineKey&&ef.current!==en){ef.current=en;let e="LEFT"===Z?"left":"right";ep({endLineKey:en.endDiffLineKey,endOrientation:e,startLineKey:en.startDiffLineKey,startOrientation:e,firstLineSelectionOnDrag:{lineKey:en.startDiffLineKey??"b:0-l:0-r:0",lineNumber:H??0,orientation:e,shouldStartConversation:!1}},ew)}else en.startDiffLineKey||eg()}},o=[eg,en,ea,U,H,W,ej,eb,ep,Z],M[4]=eg,M[5]=en,M[6]=ea,M[7]=U,M[8]=H,M[9]=W,M[10]=ej,M[11]=eb,M[12]=ep,M[13]=Z,M[14]=r,M[15]=o):(r=M[14],o=M[15]),(0,l.useEffect)(r,o),M[16]!==q?(c=()=>{if(q){let e=setTimeout(()=>{if(g.XC&&g.cg){if(em.current){let e=em.current,t=e.getBoundingClientRect(),n=g.XC?.documentElement.clientHeight||0;if(!(t.top>=0&&t.bottom<=(g.cg?.innerHeight||n))){let i=t.top,a=g.XC?.documentElement.getBoundingClientRect().top||0,s=.6666666666666666*e.clientHeight;g.cg?.scrollTo({top:i-a-.6666666666666666*n+s,behavior:"smooth"})}}eu.current&&(eu.current.focus(),eu.current.moveCursorToEnd())}},100);return()=>{window.clearTimeout(e)}}},d=[q],M[16]=q,M[17]=d,M[18]=c):(d=M[17],c=M[18]),(0,l.useEffect)(c,d),M[19]!==ea||M[20]!==ex||M[21]!==K||M[22]!==W||M[23]!==eb||M[24]!==et?.sourceContentFromDiffLines){let e,t=e=>{let{submitBatch:t,action:n}=e,i="Failed to save comment";if(ex)return;if(!ea.trim())return void ey(`${i}: Body can't be blank`);el(n),ec(void 0),ey(void 0);let a=(0,b.u)(ea,et?.sourceContentFromDiffLines??"");if(!a.isValid){ey(a.errorMessage),ec(a.errorMessage),el(null);return}K?.({commentText:ea,onCompleted(){el(null),u()},onError(e){el(null),e.message&&(i=`${i}: ${e.message}`),ey(i)},submitBatch:t})};m=()=>{t({submitBatch:!1,action:eS})},h=()=>{t({submitBatch:!0,action:eN})},M[28]!==W||M[29]!==eb?(e=()=>{eb(),es(""),W?.()},M[28]=W,M[29]=eb,M[30]=e):e=M[30],u=e,M[19]=ea,M[20]=ex,M[21]=K,M[22]=W,M[23]=eb,M[24]=et?.sourceContentFromDiffLines,M[25]=u,M[26]=m,M[27]=h}else u=M[25],m=M[26],h=M[27];M[31]!==eI||M[32]!==Z||M[33]!==J?(f=e=>{ey(void 0),eI({text:e,startLine:J,startSide:J?Z:void 0}),es(e)},M[31]=eI,M[32]=Z,M[33]=J,M[34]=f):f=M[34];let ek=f;M[35]!==h?(L={"pull-requests-conversations:submit-comment-and-review":h},M[35]=h,M[36]=L):L=M[36],M[37]!==u||M[38]!==ea?(T=e=>{"Escape"!==e.key||ea.trim()?e.stopPropagation():(e.preventDefault(),u())},M[37]=u,M[38]=ea,M[39]=T):T=M[39];let eL=$?m:h,eT=B||G?_:C,eD=G&&N,eE=B&&S;return M[40]!==eT||M[41]!==eD||M[42]!==eE?(D=(0,x.$)(w,eT,eD,eE),M[40]=eT,M[41]=eD,M[42]=eE,M[43]=D):D=M[43],M[44]!==u||M[45]!==W?(E=W&&(0,i.jsx)(p.x,{className:"py-1 px-2",variant:"default",onClick:u,children:"Cancel"}),M[44]=u,M[45]=W,M[46]=E):E=M[46],M[47]!==$||M[48]!==eh||M[49]!==h||M[50]!==G||M[51]!==er?(R=!eh&&(0,i.jsx)(p.x,{className:"py-1 px-2",variant:$?"default":"primary",onClick:h,ref:em,loading:er===eN,children:G?"Reply":"Comment"}),M[47]=$,M[48]=eh,M[49]=h,M[50]=G,M[51]=er,M[52]=R):R=M[52],M[53]!==$||M[54]!==eh||M[55]!==m||M[56]!==er?(A=$&&(0,i.jsx)(p.x,{className:"py-1 px-2",variant:"primary",onClick:m,loading:er===eS,children:eh?"Add review comment":"Start a review"}),M[53]=$,M[54]=eh,M[55]=m,M[56]=er,M[57]=A):A=M[57],M[58]!==ea||M[59]!==ed||M[60]!==U||M[61]!==ek||M[62]!==ex||M[63]!==H||M[64]!==J||M[65]!==et||M[66]!==eL||M[67]!==D||M[68]!==E||M[69]!==R||M[70]!==A?(O=(0,i.jsxs)(I.S,{ref:eu,label:"Add diff comment",value:ea,onChange:ek,onPrimaryAction:eL,suggestedChangesConfig:et,markdownErrorMessage:ed,lineNumber:H,filePath:U,startLineNumber:J,disabled:ex,className:D,children:[E,R,A]}),M[58]=ea,M[59]=ed,M[60]=U,M[61]=ek,M[62]=ex,M[63]=H,M[64]=J,M[65]=et,M[66]=eL,M[67]=D,M[68]=E,M[69]=R,M[70]=A,M[71]=O):O=M[71],M[72]!==T||M[73]!==O?(P=(0,i.jsx)("div",{className:j,onKeyDown:T,children:O}),M[72]=T,M[73]=O,M[74]=P):P=M[74],M[75]!==L||M[76]!==P?(F=(0,i.jsx)(y.tL,{commands:L,children:P}),M[75]=L,M[76]=P,M[77]=F):F=M[77],F}:function({batchingEnabled:e,condensed:t,fileLevelComment:n,filePath:a,focusOnMount:s,isReplying:r,lineNumber:o,onAddComment:d,onCancelComment:c,onPersistedCommentExists:u,quotedText:m="",side:h,startLineNumber:f,subjectId:L,threadId:T,suggestedChangesConfig:D,commentLineChangeConfig:E}){let[R,A]=(0,l.useState)(m),[O,P]=(0,l.useState)(null),F=(0,l.useRef)(m),[M,$]=(0,l.useState)(),B=(0,l.useRef)(null),V=(0,l.useRef)(null),U=(0,k.it)(),q=(0,l.useRef)(void 0),{selectMultipleLines:G,clearSelectedLines:H}=X(),K=(0,l.useCallback)(e=>{(0,eC.k)(e??"",100),$(e)},[$]),W=null!==O,{persistCommentToStorage:z,removePersistedCommentFromStorage:Q,persistCommentOnGivenLineToStorage:Z}=(0,v.L)({diffSide:h,filePath:a,line:o,subjectId:L,threadId:T,handlePersistedCommentExists:({text:e,shouldFocus:t,startLine:n,startSide:i,startLineKey:a,endLineKey:s})=>{if(e){if(A(e),t&&B.current&&(B.current.focus(),B.current.moveCursorToEnd(),z({text:e,startLine:n,startSide:i,startLineKey:a,endLineKey:s}),n)){let e="LEFT"===h?"left":"right";G({endLineKey:s,endOrientation:e,startLineKey:a,startOrientation:e,firstLineSelectionOnDrag:{lineKey:a??"b:0-l:0-r:0",lineNumber:o??0,orientation:e,shouldStartConversation:!1}},ew)}u?.()}},fileLevelComment:!!n});(0,l.useEffect)(()=>{m!==F.current&&(F.current=m,A(m))},[m]),(0,l.useEffect)(()=>{if(E){if(null!==(0,e_.T)(R))return void E.setErrorMessage("Changing the line number of a comment with a suggested change is not supported.");if(E.closeLineMovingDialog(),Z({text:R,givenLineDiffSide:E.diffSide,givenFilePath:a,givenLine:E.endLineNumber,shouldBeFileLevelComment:E.isFileLevelComment,startLine:E.startLineNumber,startLineKey:E.startDiffLineKey,endLineKey:E.endDiffLineKey}),Q(),o!==E.endLineNumber||E.isFileLevelComment)E.startConversationOnNewLine(),c?.(!1);else if(E.endDiffLineKey&&E.startDiffLineKey&&q.current!==E){q.current=E;let e="LEFT"===h?"left":"right";G({endLineKey:E.endDiffLineKey,endOrientation:e,startLineKey:E.startDiffLineKey,startOrientation:e,firstLineSelectionOnDrag:{lineKey:E.startDiffLineKey??"b:0-l:0-r:0",lineNumber:o??0,orientation:e,shouldStartConversation:!1}},ew)}else E.startDiffLineKey||H()}},[H,E,R,a,o,c,Z,Q,G,h]),(0,l.useEffect)(()=>{if(s){let e=setTimeout(()=>{if(g.XC&&g.cg){if(V.current){let e=V.current,t=e.getBoundingClientRect(),n=g.XC?.documentElement.clientHeight||0;if(!(t.top>=0&&t.bottom<=(g.cg?.innerHeight||n))){let i=t.top,a=g.XC?.documentElement.getBoundingClientRect().top||0,s=e.clientHeight*(2/3);g.cg?.scrollTo({top:i-a-2/3*n+s,behavior:"smooth"})}}B.current&&(B.current.focus(),B.current.moveCursorToEnd())}},100);return()=>{window.clearTimeout(e)}}},[s]);let J=({submitBatch:e,action:t})=>{let n="Failed to save comment";if(W)return;if(!R.trim())return void K(`${n}: Body can't be blank`);P(t),$(void 0),K(void 0);let i=(0,b.u)(R,D?.sourceContentFromDiffLines??"");if(!i.isValid){K(i.errorMessage),$(i.errorMessage),P(null);return}d?.({commentText:R,onCompleted(){P(null),et()},onError(e){P(null),e.message&&(n=`${n}: ${e.message}`),K(n)},submitBatch:e})},Y=()=>{J({submitBatch:!1,action:eS})},ee=()=>{J({submitBatch:!0,action:eN})},et=(0,l.useCallback)(()=>{Q(),A(""),c?.()},[c,Q]);return(0,i.jsx)(y.tL,{commands:{"pull-requests-conversations:submit-comment-and-review":ee},children:(0,i.jsx)("div",{className:j,onKeyDown:e=>{"Escape"!==e.key||R.trim()?e.stopPropagation():(e.preventDefault(),et())},children:(0,i.jsxs)(I.S,{ref:B,label:"Add diff comment",value:R,onChange:e=>{K(void 0),z({text:e,startLine:f,startSide:f?h:void 0}),A(e)},onPrimaryAction:e?Y:ee,suggestedChangesConfig:D,markdownErrorMessage:M,lineNumber:o,filePath:a,startLineNumber:f,disabled:W,className:(0,x.$)(w,t||r?_:C,r&&N,t&&S),children:[c&&(0,i.jsx)(p.x,{className:"py-1 px-2",variant:"default",onClick:et,children:"Cancel"}),!U&&(0,i.jsx)(p.x,{className:"py-1 px-2",variant:e?"default":"primary",onClick:ee,ref:V,loading:O===eN,children:r?"Reply":"Comment"}),e&&(0,i.jsx)(p.x,{className:"py-1 px-2",variant:"primary",onClick:Y,loading:O===eS,children:U?"Add review comment":"Start a review"})]})})})};try{eI.displayName||(eI.displayName="AddCommentEditor")}catch{}var ek=n(21373),eL=n(15220),eT=n(15837),eD=n(86877),eE=n(33989),eR=n(99511),eA=n(94236),eO=n(5524);let eP=(0,a.GV)()?function(e){let t,n,a,r,o,d,u=(0,s.c)(25),{ariaLabelId:m,currentLineNumberText:h,setCommentLineChangeConfig:f,baseEndLineNumber:p,diffSide:g,baseStartLineNumber:y}=e,[x,v]=(0,l.useState)(!1);u[0]!==p||u[1]!==y?(t=()=>y&&p?"lineRange":p?"line":"file",u[0]=p,u[1]=y,u[2]=t):t=u[2];let[b,j]=(0,l.useState)(t),[w,_]=(0,l.useState)("LEFT"===g),[C,N]=(0,l.useState)(y?String(y):""),[S,I]=(0,l.useState)(p?String(p):""),[k,L]=(0,l.useState)(""),T=en(),D=(0,l.useRef)(null);u[3]!==S||u[4]!==T||u[5]!==w||u[6]!==b||u[7]!==f||u[8]!==C?(n=()=>{let e=T(eB(w,Number(S),"file"===b)),t=T(eB(w,Number(C),"file"===b)),n=e?.startNewComment,i=e?.diffLineKey,a=t?.diffLineKey;(eU("lineRange"===b?C:void 0,S)||"file"===b)&&n&&i?f(eV({isLeftSide:w,startLineNumber:"lineRange"===b?Number(C):void 0,endDiffLineKey:i,endLineNumber:Number(S),isFileLevelComment:"file"===b,startDiffLineKey:"lineRange"===b?a:void 0,startConversationOnNewLine:n,closeLineMovingDialog:()=>v(!1),setErrorMessage:e=>L(e)})):L("Please enter a valid line number or range.")},u[3]=S,u[4]=T,u[5]=w,u[6]=b,u[7]=f,u[8]=C,u[9]=n):n=u[9];let E=n;return u[10]===Symbol.for("react.memo_cache_sentinel")?(a=()=>v(!0),u[10]=a):a=u[10],u[11]!==m||u[12]!==h?(r=(0,i.jsx)(ek.Q,{"aria-labelledby":m,"aria-description":"Select to change location",ref:D,type:"button",size:"small",onClick:a,trailingAction:c.TriangleDownIcon,children:h}),u[11]=m,u[12]=h,u[13]=r):r=u[13],u[14]!==S||u[15]!==k||u[16]!==x||u[17]!==w||u[18]!==b||u[19]!==C||u[20]!==E?(o=x&&(0,i.jsx)(eL.l,{onClose:()=>v(!1),returnFocusRef:D,title:"Add comment on",width:"medium",footerButtons:[{buttonType:"default",content:"Cancel",onClick:()=>{v(!1)}},{buttonType:"primary",content:"Save",onClick:E}],children:(0,i.jsxs)(eT.A,{name:"line-number-selection",onChange:e=>{j(e)},children:[(0,i.jsx)(eT.A.Label,{}),(0,i.jsxs)(eD.A,{children:[(0,i.jsx)(eE.A,{value:"line",defaultChecked:"line"===b}),(0,i.jsx)(eD.A.Label,{children:"Line number"}),"line"===b&&(0,i.jsxs)(eD.A.Caption,{className:"d-flex align-items-center",children:[(0,i.jsx)(e$,{isLeftSelected:w,setIsLeftSelected:_}),(0,i.jsx)(eR.A,{autoComplete:"off",className:"ml-1","aria-label":"Line number",name:"lineNumber",value:S,onChange:e=>I(e.target.value),onKeyDown:e=>{"Enter"===e.key&&E()}})]})]}),(0,i.jsxs)(eD.A,{children:[(0,i.jsx)(eE.A,{value:"lineRange",defaultChecked:"lineRange"===b}),(0,i.jsx)(eD.A.Label,{children:"Line range"}),"lineRange"===b&&(0,i.jsxs)(eD.A.Caption,{className:"d-flex align-items-center",children:[(0,i.jsx)(e$,{isLeftSelected:w,setIsLeftSelected:_}),(0,i.jsx)(eR.A,{autoComplete:"off",className:"ml-1","aria-label":"Line number",name:"lineNumber",value:C,onChange:e=>N(e.target.value),onKeyDown:e=>{"Enter"===e.key&&E()}}),(0,i.jsx)(c.ArrowRightIcon,{className:"mt-2 mx-2"}),(0,i.jsx)(eR.A,{autoComplete:"off",className:"ml-1","aria-label":"Line number",name:"lineNumber",value:S,onChange:e=>I(e.target.value),onKeyDown:e=>{"Enter"===e.key&&E()}})]})]}),(0,i.jsxs)(eD.A,{children:[(0,i.jsx)(eE.A,{value:"file",defaultChecked:"file"===b}),(0,i.jsx)(eD.A.Label,{children:"File"})]}),k&&(0,i.jsx)(eT.A.Validation,{variant:"error",children:k})]})}),u[14]=S,u[15]=k,u[16]=x,u[17]=w,u[18]=b,u[19]=C,u[20]=E,u[21]=o):o=u[21],u[22]!==r||u[23]!==o?(d=(0,i.jsxs)("div",{className:"ml-1",children:[r,o]}),u[22]=r,u[23]=o,u[24]=d):d=u[24],d}:function({ariaLabelId:e,currentLineNumberText:t,setCommentLineChangeConfig:n,baseEndLineNumber:a,diffSide:s,baseStartLineNumber:r}){let[o,d]=(0,l.useState)(!1),[u,m]=(0,l.useState)(()=>r&&a?"lineRange":a?"line":"file"),[h,f]=(0,l.useState)("LEFT"===s),[p,g]=(0,l.useState)(r?String(r):""),[y,x]=(0,l.useState)(a?String(a):""),[v,b]=(0,l.useState)(""),j=en(),w=(0,l.useRef)(null),_=(0,l.useCallback)(()=>{let e=j(eB(h,Number(y),"file"===u)),t=j(eB(h,Number(p),"file"===u)),i=e?.startNewComment,a=e?.diffLineKey,s=t?.diffLineKey;(eU("lineRange"===u?p:void 0,y)||"file"===u)&&i&&a?n(eV({isLeftSide:h,startLineNumber:"lineRange"===u?Number(p):void 0,endDiffLineKey:a,endLineNumber:Number(y),isFileLevelComment:"file"===u,startDiffLineKey:"lineRange"===u?s:void 0,startConversationOnNewLine:i,closeLineMovingDialog:()=>d(!1),setErrorMessage:e=>b(e)})):b("Please enter a valid line number or range.")},[j,h,y,u,p,n]);return(0,i.jsxs)("div",{className:"ml-1",children:[(0,i.jsx)(ek.Q,{"aria-labelledby":e,"aria-description":"Select to change location",ref:w,type:"button",size:"small",onClick:()=>d(!0),trailingAction:c.TriangleDownIcon,children:t}),o&&(0,i.jsx)(eL.l,{onClose:()=>d(!1),returnFocusRef:w,title:"Add comment on",width:"medium",footerButtons:[{buttonType:"default",content:"Cancel",onClick:()=>{d(!1)}},{buttonType:"primary",content:"Save",onClick:_}],children:(0,i.jsxs)(eT.A,{name:"line-number-selection",onChange:e=>{m(e)},children:[(0,i.jsx)(eT.A.Label,{}),(0,i.jsxs)(eD.A,{children:[(0,i.jsx)(eE.A,{value:"line",defaultChecked:"line"===u}),(0,i.jsx)(eD.A.Label,{children:"Line number"}),"line"===u&&(0,i.jsxs)(eD.A.Caption,{className:"d-flex align-items-center",children:[(0,i.jsx)(e$,{isLeftSelected:h,setIsLeftSelected:f}),(0,i.jsx)(eR.A,{autoComplete:"off",className:"ml-1","aria-label":"Line number",name:"lineNumber",value:y,onChange:e=>x(e.target.value),onKeyDown:e=>{"Enter"===e.key&&_()}})]})]}),(0,i.jsxs)(eD.A,{children:[(0,i.jsx)(eE.A,{value:"lineRange",defaultChecked:"lineRange"===u}),(0,i.jsx)(eD.A.Label,{children:"Line range"}),"lineRange"===u&&(0,i.jsxs)(eD.A.Caption,{className:"d-flex align-items-center",children:[(0,i.jsx)(e$,{isLeftSelected:h,setIsLeftSelected:f}),(0,i.jsx)(eR.A,{autoComplete:"off",className:"ml-1","aria-label":"Line number",name:"lineNumber",value:p,onChange:e=>g(e.target.value),onKeyDown:e=>{"Enter"===e.key&&_()}}),(0,i.jsx)(c.ArrowRightIcon,{className:"mt-2 mx-2"}),(0,i.jsx)(eR.A,{autoComplete:"off",className:"ml-1","aria-label":"Line number",name:"lineNumber",value:y,onChange:e=>x(e.target.value),onKeyDown:e=>{"Enter"===e.key&&_()}})]})]}),(0,i.jsxs)(eD.A,{children:[(0,i.jsx)(eE.A,{value:"file",defaultChecked:"file"===u}),(0,i.jsx)(eD.A.Label,{children:"File"})]}),v&&(0,i.jsx)(eT.A.Validation,{variant:"error",children:v})]})})]})},eF="Left (L)",eM="Right (R)",e$=(0,a.GV)()?function(e){let t,n,a,r,l,o=(0,s.c)(12),{isLeftSelected:d,setIsLeftSelected:c}=e,u=d?eF:eM;return o[0]!==u?(t=(0,i.jsx)(eA.W.Button,{children:u}),o[0]=u,o[1]=t):t=o[1],o[2]!==c?(n=(0,i.jsx)(eO.l.Item,{onSelect:()=>{c(!0)},children:eF}),o[2]=c,o[3]=n):n=o[3],o[4]!==c?(a=(0,i.jsx)(eO.l.Item,{onSelect:()=>{c(!1)},children:eM}),o[4]=c,o[5]=a):a=o[5],o[6]!==n||o[7]!==a?(r=(0,i.jsx)(eA.W.Overlay,{children:(0,i.jsxs)(eO.l,{children:[n,a]})}),o[6]=n,o[7]=a,o[8]=r):r=o[8],o[9]!==t||o[10]!==r?(l=(0,i.jsxs)(eA.W,{children:[t,r]}),o[9]=t,o[10]=r,o[11]=l):l=o[11],l}:function({isLeftSelected:e,setIsLeftSelected:t}){let n=e?eF:eM;return(0,i.jsxs)(eA.W,{children:[(0,i.jsx)(eA.W.Button,{children:n}),(0,i.jsx)(eA.W.Overlay,{children:(0,i.jsxs)(eO.l,{children:[(0,i.jsx)(eO.l.Item,{onSelect:()=>{t(!0)},children:eF}),(0,i.jsx)(eO.l.Item,{onSelect:()=>{t(!1)},children:eM})]})})]})};function eB(e,t,n){return n?"F0":`${e?"L":"R"}${t}`}function eV(e){return{diffSide:e.isLeftSide?"LEFT":"RIGHT",startLineNumber:e.startLineNumber,endLineNumber:e.endLineNumber,isFileLevelComment:e.isFileLevelComment,startDiffLineKey:e.startDiffLineKey,endDiffLineKey:e.endDiffLineKey,setErrorMessage:e.setErrorMessage,startConversationOnNewLine:e.startConversationOnNewLine,closeLineMovingDialog:e.closeLineMovingDialog}}function eU(e,t){let n=Number(e),i=Number(t);return Number.isInteger(i)&&i>0&&(void 0===e||Number.isInteger(n)&&n>0&&n<=i)}try{eP.displayName||(eP.displayName="ChangeCommentLineNumberButton")}catch{}try{e$.displayName||(e$.displayName="MoveCommentLineNumberDropdown")}catch{}var eq=n(91747);let eG="diff-comment-positioning-",eH=(0,a.GV)()?function(e){let t,n,a,r,o,h,p,g,y,x,v,b,j,w,_,C,N,S,I,k,L=(0,s.c)(52);if(L[0]!==e){let{addCommentDialogTitle:i,isLeftSide:s,fileLevelComment:l,filePath:d,focusOnMount:c,lineNumber:u,onAddComment:m,onClose:f,viewerData:b,threadsConnectionId:j,showOnCloseIcon:w,..._}=e;t=i,r=s,n=l,a=d,y=c,o=u,h=m,p=f,v=b,x=w,g=_,L[0]=e,L[1]=t,L[2]=n,L[3]=a,L[4]=r,L[5]=o,L[6]=h,L[7]=p,L[8]=g,L[9]=y,L[10]=x,L[11]=v}else t=L[1],n=L[2],a=L[3],r=L[4],o=L[5],h=L[6],p=L[7],g=L[8],y=L[9],x=L[10],v=L[11];let T=void 0===y||y,D=void 0===x||x,[E,R]=(0,l.useState)(void 0),A=(0,eq.u)("move_new_comments_ui");L[12]!==h?(b=e=>{let{commentText:t,onCompleted:n,onError:i,submitBatch:a}=e;h({text:t,onError:i,onCompleted:(e,t)=>{t&&f(t.toString()),n?.(e,t)},submitBatch:a})},L[12]=h,L[13]=b):b=L[13];let O=b,P=`${eG}${(0,l.useId)()}`,F=v.avatarUrl||"";L[14]!==F||L[15]!==v.login?(j=(0,i.jsx)(d.r,{alt:v.login,size:24,src:F,className:"mr-2"}),L[14]=F,L[15]=v.login,L[16]=j):j=L[16],L[17]!==t||L[18]!==n||L[19]!==A?(w=!A&&(n?(0,i.jsx)(i.Fragment,{children:"Add comment on file"}):(0,i.jsx)("span",{children:t?`Add a comment on ${t}`:"Add a comment"})),L[17]=t,L[18]=n,L[19]=A,L[20]=w):w=L[20],L[21]!==t||L[22]!==P||L[23]!==n||L[24]!==r||L[25]!==o||L[26]!==A||L[27]!==g?(_=A&&(0,i.jsxs)("div",{className:"d-flex flex-items-center",id:P,children:[(0,i.jsxs)("div",{className:"pt-1",children:["Add ",n?"":"a"," comment on "]}),(0,i.jsx)(eP,{ariaLabelId:P,currentLineNumberText:n?"file":t??"",baseEndLineNumber:o,baseStartLineNumber:g.startLineNumber,diffSide:r?"LEFT":"RIGHT",setCommentLineChangeConfig:R})]}),L[21]=t,L[22]=P,L[23]=n,L[24]=r,L[25]=o,L[26]=A,L[27]=g,L[28]=_):_=L[28],L[29]!==j||L[30]!==w||L[31]!==_?(C=(0,i.jsxs)(u.A,{as:"h4",className:"f5 ml-1 pt-1 pb-2 d-flex",children:[j,w,_]}),L[29]=j,L[30]=w,L[31]=_,L[32]=C):C=L[32],L[33]!==p||L[34]!==D?(N=p&&D&&(0,i.jsx)(m.K,{variant:"invisible",icon:c.XIcon,onClick:()=>p(),"aria-label":"Cancel"}),L[33]=p,L[34]=D,L[35]=N):N=L[35],L[36]!==C||L[37]!==N?(S=(0,i.jsxs)("div",{className:"d-flex flex-justify-between flex-items-center",children:[C,N]}),L[36]=C,L[37]=N,L[38]=S):S=L[38];let M=n??!1,$=r?"LEFT":"RIGHT";return L[39]!==E||L[40]!==a||L[41]!==T||L[42]!==O||L[43]!==o||L[44]!==p||L[45]!==g||L[46]!==M||L[47]!==$?(I=(0,i.jsx)(eI,{focusOnMount:T,condensed:!1,fileLevelComment:M,filePath:a,lineNumber:o,onAddComment:O,onCancelComment:p,commentLineChangeConfig:E,side:$,...g}),L[39]=E,L[40]=a,L[41]=T,L[42]=O,L[43]=o,L[44]=p,L[45]=g,L[46]=M,L[47]=$,L[48]=I):I=L[48],L[49]!==S||L[50]!==I?(k=(0,i.jsxs)("div",{className:"px-2 pb-2 pt-1",children:[S,I]}),L[49]=S,L[50]=I,L[51]=k):k=L[51],k}:function({addCommentDialogTitle:e,isLeftSide:t,fileLevelComment:n,filePath:a,focusOnMount:s=!0,lineNumber:r,onAddComment:o,onClose:h,viewerData:p,threadsConnectionId:g,showOnCloseIcon:y=!0,...x}){let[v,b]=(0,l.useState)(void 0),j=(0,eq.u)("move_new_comments_ui"),w=`${eG}${(0,l.useId)()}`;return(0,i.jsxs)("div",{className:"px-2 pb-2 pt-1",children:[(0,i.jsxs)("div",{className:"d-flex flex-justify-between flex-items-center",children:[(0,i.jsxs)(u.A,{as:"h4",className:"f5 ml-1 pt-1 pb-2 d-flex",children:[(0,i.jsx)(d.r,{alt:p.login,size:24,src:p.avatarUrl||"",className:"mr-2"}),!j&&(n?(0,i.jsx)(i.Fragment,{children:"Add comment on file"}):(0,i.jsx)("span",{children:e?`Add a comment on ${e}`:"Add a comment"})),j&&(0,i.jsxs)("div",{className:"d-flex flex-items-center",id:w,children:[(0,i.jsxs)("div",{className:"pt-1",children:["Add ",n?"":"a"," comment on "]}),(0,i.jsx)(eP,{ariaLabelId:w,currentLineNumberText:n?"file":e??"",baseEndLineNumber:r,baseStartLineNumber:x.startLineNumber,diffSide:t?"LEFT":"RIGHT",setCommentLineChangeConfig:b})]})]}),h&&y&&(0,i.jsx)(m.K,{variant:"invisible",icon:c.XIcon,onClick:()=>h(),"aria-label":"Cancel"})]}),(0,i.jsx)(eI,{focusOnMount:s,condensed:!1,fileLevelComment:n??!1,filePath:a,lineNumber:r,onAddComment:({commentText:e,onCompleted:t,onError:n,submitBatch:i})=>{o({text:e,onError:n,onCompleted:(e,n)=>{n&&f(n.toString()),t?.(e,n)},submitBatch:i})},onCancelComment:h,commentLineChangeConfig:v,side:t?"LEFT":"RIGHT",...x})]})};try{eH.displayName||(eH.displayName="StartThreadComment")}catch{}var eK=n(33671),eW=n(8934),ez=n(97286),eQ=n(73017),eZ=n(69726);let eJ="RichDiff-module__fileRendererViewport--EBwd1",eY="RichDiff-module__fileRendererIframe--svTsY",eX=(0,a.GV)()?function(e){let t,n,a,r,l,o,d=(0,s.c)(29),{queryConfig:c,initialData:u}=e;if(u&&(u.proseDiffHtml||u.renderInfo||u.dependencyDiffPath)){let e;d[0]!==u.dependencyDiffPath||d[1]!==u.proseDiffHtml||d[2]!==u.renderInfo?(e={proseDiffHtml:u.proseDiffHtml,renderInfo:u.renderInfo,dependencyDiffPath:u.dependencyDiffPath},d[0]=u.dependencyDiffPath,d[1]=u.proseDiffHtml,d[2]=u.renderInfo,d[3]=e):e=d[3],o=e}let m=c?.key,h=c?.args;d[4]!==m||d[5]!==h?(t=[m,h],d[4]=m,d[5]=h,d[6]=t):t=d[6],d[7]!==c?(n=async()=>await c?.fetcher(c.args)||{},d[7]=c,d[8]=n):n=d[8];let f=!!c;d[9]!==o||d[10]!==t||d[11]!==n||d[12]!==f?(a={queryKey:t,queryFn:n,initialData:o,staleTime:1/0,enabled:f},d[9]=o,d[10]=t,d[11]=n,d[12]=f,d[13]=a):a=d[13];let p=(0,ez.I)(a);d[14]!==o||d[15]!==c||d[16]!==p?(r=c?p:{data:o,isLoading:!1},d[14]=o,d[15]=c,d[16]=p,d[17]=r):r=d[17];let{data:g,isLoading:y}=r;d[18]!==g?(l=g||{},d[18]=g,d[19]=l):l=d[19];let{proseDiffHtml:x,renderInfo:v,dependencyDiffPath:b}=l;if(y){let e;return d[20]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{className:"d-flex flex-justify-center p-4",children:(0,i.jsx)(eZ.A,{size:"large"})}),d[20]=e):e=d[20],e}if(x){let e;return d[21]!==x?(e=(0,i.jsx)("div",{className:"prose-diff position-relative",children:(0,i.jsx)(eQ.vb,{html:x})}),d[21]=x,d[22]=e):e=d[22],e}if(v){let e;return d[23]!==v?(e=(0,i.jsx)(eK.default,{...v,viewportClassName:eJ,iframeClassName:eY}),d[23]=v,d[24]=e):e=d[24],e}if(b){let e,t;return d[25]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsxs)("div",{className:"text-center py-3",children:[(0,i.jsx)(eZ.A,{size:"medium"}),(0,i.jsx)("p",{className:"color-fg-muted my-2",children:"Loading Dependency Review..."})]}),d[25]=e):e=d[25],d[26]!==b?(t=(0,i.jsx)("div",{children:(0,i.jsx)(eW.x,{src:b,children:e})}),d[26]=b,d[27]=t):t=d[27],t}{let e;return d[28]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{className:"d-flex flex-justify-center p-4",children:"This rich diff is not supported at the moment."}),d[28]=e):e=d[28],e}}:function({queryConfig:e,initialData:t}){let n;t&&(t.proseDiffHtml||t.renderInfo||t.dependencyDiffPath)&&(n={proseDiffHtml:t.proseDiffHtml,renderInfo:t.renderInfo,dependencyDiffPath:t.dependencyDiffPath});let a=(0,ez.I)({queryKey:[e?.key,e?.args],queryFn:async()=>await e?.fetcher(e.args)||{},initialData:n,staleTime:1/0,enabled:!!e}),{data:s,isLoading:r}=e?a:{data:n,isLoading:!1},{proseDiffHtml:l,renderInfo:o,dependencyDiffPath:d}=s||{};return r?(0,i.jsx)("div",{className:"d-flex flex-justify-center p-4",children:(0,i.jsx)(eZ.A,{size:"large"})}):l?(0,i.jsx)("div",{className:"prose-diff position-relative",children:(0,i.jsx)(eQ.vb,{html:l})}):o?(0,i.jsx)(eK.default,{...o,viewportClassName:eJ,iframeClassName:eY}):d?(0,i.jsx)("div",{children:(0,i.jsx)(eW.x,{src:d,children:(0,i.jsxs)("div",{className:"text-center py-3",children:[(0,i.jsx)(eZ.A,{size:"medium"}),(0,i.jsx)("p",{className:"color-fg-muted my-2",children:"Loading Dependency Review..."})]})})}):(0,i.jsx)("div",{className:"d-flex flex-justify-center p-4",children:"This rich diff is not supported at the moment."})};try{eX.displayName||(eX.displayName="RichDiff")}catch{}var e0=n(59523),e1=n(19976),e2=n(13083),e3=n(84268),e4=n(69599);let e5="HiddenDiffPatch-module__gridColumnTemplate--gSfuk",e6=(0,a.GV)()?function(e){let t,n,a,r,o,d,u,m,h,f,p=(0,s.c)(27),{children:g,helpText:y,helpUrl:v,onLoadDiff:b,diffAnchor:j}=e,w=v&&y,[_,C]=(0,l.useState)("initial");p[0]!==b?(t=async()=>{try{C("loading"),await b()}catch{C("error")}},p[0]=b,p[1]=t):t=p[1];let N=t;return p[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,x.$)(e5),p[2]=n):n=p[2],p[3]===Symbol.for("react.memo_cache_sentinel")?(a={maxWidth:"340px"},p[3]=a):a=p[3],p[4]===Symbol.for("react.memo_cache_sentinel")?(r=(0,i.jsx)("svg",{"aria-hidden":!0,height:"84",style:a,viewBox:"0 0 340 84",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{clipPath:"url(#diff-placeholder)",d:"M0 0h340v84H0z",fillRule:"evenodd",style:{fill:"var(--bgColor-muted, var(--color-canvas-subtle))"}})}),p[4]=r):r=p[4],p[5]!==_?(o="loading"===_&&(0,i.jsx)(eZ.A,{size:"medium"}),p[5]=_,p[6]=o):o=p[6],p[7]!==_?(d="error"===_&&(0,i.jsx)(c.AlertIcon,{size:24}),p[7]=_,p[8]=d):d=p[8],p[9]!==_||p[10]!==N?(u="initial"===_&&(0,i.jsx)(ek.Q,{className:"h4 mx-auto fgColor-accent",variant:"invisible",onClick:()=>{N(),C("loading")},children:"Load Diff"}),p[9]=_,p[10]=N,p[11]=u):u=p[11],p[12]!==g||p[13]!==y||p[14]!==v||p[15]!==_||p[16]!==N||p[17]!==w?(m="error"===_?(0,i.jsxs)("span",{className:"fgColor-muted mt-1",children:["The contents of the file couldn't be loaded."," ",(0,i.jsx)(e3.A,{inline:!0,as:"button",onClick:()=>{N(),C("loading")},children:"Retry"})]}):(0,i.jsxs)("span",{className:"fgColor-muted mt-1",children:[g,w&&(0,i.jsx)(e3.A,{inline:!0,href:v,children:y})]}),p[12]=g,p[13]=y,p[14]=v,p[15]=_,p[16]=N,p[17]=w,p[18]=m):m=p[18],p[19]!==o||p[20]!==d||p[21]!==u||p[22]!==m?(h=(0,i.jsxs)("div",{className:n,children:[r," ",(0,i.jsxs)("div",{className:"d-flex flex-justify-center flex-column flex-column text-center flex-items-center",children:[o,d,u,m]})]}),p[19]=o,p[20]=d,p[21]=u,p[22]=m,p[23]=h):h=p[23],p[24]!==j||p[25]!==h?(f=(0,i.jsx)("div",{className:"px-3 py-4 fgColor-muted","data-diff-anchor":j,children:h}),p[24]=j,p[25]=h,p[26]=f):f=p[26],f}:function({children:e,helpText:t,helpUrl:n,onLoadDiff:a,diffAnchor:s}){let r=n&&t,[o,d]=(0,l.useState)("initial"),u=(0,l.useCallback)(async()=>{try{d("loading"),await a()}catch{d("error")}},[a,d]);return(0,i.jsx)("div",{className:"px-3 py-4 fgColor-muted","data-diff-anchor":s,children:(0,i.jsxs)("div",{className:(0,x.$)(e5),children:[(0,i.jsx)("svg",{"aria-hidden":!0,height:"84",style:{maxWidth:"340px"},viewBox:"0 0 340 84",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{clipPath:"url(#diff-placeholder)",d:"M0 0h340v84H0z",fillRule:"evenodd",style:{fill:"var(--bgColor-muted, var(--color-canvas-subtle))"}})})," ",(0,i.jsxs)("div",{className:"d-flex flex-justify-center flex-column flex-column text-center flex-items-center",children:["loading"===o&&(0,i.jsx)(eZ.A,{size:"medium"}),"error"===o&&(0,i.jsx)(c.AlertIcon,{size:24}),"initial"===o&&(0,i.jsx)(ek.Q,{className:"h4 mx-auto fgColor-accent",variant:"invisible",onClick:()=>{u(),d("loading")},children:"Load Diff"}),"error"===o?(0,i.jsxs)("span",{className:"fgColor-muted mt-1",children:["The contents of the file couldn't be loaded."," ",(0,i.jsx)(e3.A,{inline:!0,as:"button",onClick:()=>{u(),d("loading")},children:"Retry"})]}):(0,i.jsxs)("span",{className:"fgColor-muted mt-1",children:[e,r&&(0,i.jsx)(e3.A,{inline:!0,href:n,children:t})]})]})]})})};try{e6.displayName||(e6.displayName="HiddenDiffPatch")}catch{}let e7="final-hunk-header-line";function e8(e,t){return e.startBlobLineNumber-t.startBlobLineNumber}function e9(e,t){if("HUNK"===e.type&&e.__id===e7)return{currentHunk:t[t.length-1],previousHunk:t[t.length-2]};let n=t.sort(e8).findIndex(t=>t.startBlobLineNumber<=e.blobLineNumber&&t.endBlobLineNumber>=e.blobLineNumber);return{currentHunk:t[n],nextHunk:t[n+1],previousHunk:t[n-1]}}function te(e){let t,n=[],i=0;for(let a=1;a<e.length;a++){let s=e[a];if(s&&!(0,R.Po)(s)&&(t=s,"HUNK"===s.type)){let t,r=e[i];if(!r||(0,R.Po)(r))continue;let l=a-1;for(;(!t||(0,R.Po)(t))&&(t=e[l],-1!=--l););t&&!(0,R.Po)(t)&&n.push({startBlobLineNumber:r.blobLineNumber,endBlobLineNumber:t.blobLineNumber}),s.__id===e7&&n.push({startBlobLineNumber:s.blobLineNumber,endBlobLineNumber:s.blobLineNumber+20}),i=a;continue}}if(t&&"HUNK"!==t.type){let a=e[i];a&&!(0,R.Po)(a)&&n.push({startBlobLineNumber:a.blobLineNumber,endBlobLineNumber:t.blobLineNumber})}return n}var tt=n(45800),tn=n(35750),ti=n(18150),ta=n(85242),ts=n(88243),tr=n(16213),tl=n(50467),to=new WeakMap,td=new WeakMap,tc=new WeakMap,tu=new WeakMap,tm=new WeakMap,th=new WeakMap,tf=new WeakSet,tp=new WeakSet,tg=new WeakSet,ty=new WeakSet,tx=new WeakSet,tv=new WeakSet,tb=new WeakSet,tj=new WeakSet,tw=new WeakSet,t_=new WeakSet;let GridNavigator=class GridNavigator{moveToNextItem(e,t){let n,i=(0,tn._)(this,td).get(this.focusedGridCell?.cellId??"");if(!i)return;let[a]=i,[,s]=i;switch(("ArrowDown"===e||"ArrowUp"===e)&&(0,ts._)(this,tb,tT).call(this,a)&&(0,tn._)(this,tu)&&(s=(0,tn._)(this,tu),(0,ta._)(this,tu,void 0)),!0){case t&&"Home"===e:this.focusFirstGridCell();break;case t&&"End"===e:{let e=(0,tn._)(this,to).length-1,t=(0,tn._)(this,to)[e]?.length;t&&(n=(0,tn._)(this,to)[e]?.[t-1]);break}case"ArrowUp"===e:(0,ts._)(this,tb,tT).call(this,a-1)?((0,ts._)(this,t_,tR).call(this,s),n=(0,tn._)(this,to)[a-1]?.[0]):n=(0,tn._)(this,to)[a-1]?.[s];break;case"ArrowDown"===e:(0,ts._)(this,tb,tT).call(this,a+1)?((0,ts._)(this,t_,tR).call(this,s),n=(0,tn._)(this,to)[a+1]?.[0]):n=(0,tn._)(this,to)[a+1]?.[s];break;case"ArrowLeft"===e:n=(0,tn._)(this,to)[a]?.[s-1];break;case"ArrowRight"===e:n=(0,tn._)(this,to)[a]?.[s+1];break;case"PageUp"===e:{(0,ts._)(this,t_,tR).call(this,s);let e=(0,ts._)(this,tg,tS).call(this,a);n=(0,tn._)(this,to)[e]?.[0];break}case"PageDown"===e:{(0,ts._)(this,t_,tR).call(this,s);let e=(0,ts._)(this,tp,tN).call(this,a),t=0;e||(e=(0,tn._)(this,to).length-1,t=s),n=(0,tn._)(this,to)[e]?.[t];break}case"Home"===e:n=(0,tn._)(this,to)[a]?.[0];break;case"End"===e:{let e=(0,tn._)(this,to)[a];if(e&&!(0,ts._)(this,tb,tT).call(this,a)){let t=e.length-1;n=(0,tn._)(this,to)[a]?.[t]}}}return n&&(this.focusedGridCell=n),this.focusedGridCell}reinitializeGrid(e,t){(0,ts._)(this,ty,tI).call(this,e,t)}focusFirstGridCell(e){e&&(0,tn._)(this,td).get(e)?this.focusGridCell(e):this.focusedGridCell=(0,tn._)(this,to)[0]?.[0]}focusGridCell(e){if(this.focusedGridCell?.cellId===e)return;let t=(0,tn._)(this,td).get(e);if(!t)return;let[n,i]=t;this.focusedGridCell=(0,tn._)(this,to)[n]?.[i]}getNextSelectableCell(e){let t,n=this.getValidSelectableRowCell()||this.focusedGridCell,i=this.lastSelectedGridCell||n,a=(0,tn._)(this,td).get(i?.cellId??"");if(!a)return;let[s,r]=a;if("ArrowUp"===e){let e=s-1;for(;!t&&e>=0;)t=(0,ts._)(this,tf,tC).call(this,{rowIndex:e,columnIndex:r}),e--}if("ArrowDown"===e){let e=s+1;for(;!t&&e<(0,tn._)(this,to).length;)t=(0,ts._)(this,tf,tC).call(this,{rowIndex:e,columnIndex:r}),e++}return t&&(this.lastSelectedGridCell=t),t}getValidSelectableRowCell(){if(this.focusedGridCell?.isHunk)return;if(!this.focusedGridCell?.isEmpty)return this.focusedGridCell;let e=(0,tn._)(this,td).get(this.focusedGridCell.cellId)?.[0];if(e)return this.focusedGridCell.columnIndex<=1&&!(0,tn._)(this,th)?(0,tn._)(this,to)[e]?.[this.focusedGridCell.columnIndex+1]:this.focusedGridCell.columnIndex<2&&(0,tn._)(this,th)?(0,tn._)(this,to)[e]?.[this.focusedGridCell.columnIndex+2]:(0,tn._)(this,to)[e]?.[this.focusedGridCell.columnIndex-2]}clearLastSelectedCell(){this.lastSelectedGridCell=void 0}getFirstCodeCell(){let e=(0,tn._)(this,to).find(e=>e[0]&&!e[0].isHunk);return e?.find(e=>!e.isEmpty)}getLastCodeCell(){let e=(0,tn._)(this,to).slice().reverse().find(e=>e[0]&&!e[0].isHunk);return e?.slice().reverse().find(e=>!e.isEmpty)}hasLine(e,t,n){let i=(0,R.qX)((0,tn._)(this,tm),e,t),a=(0,R.u6)(i,0),s=(0,tn._)(this,td).get(a);if(!s)return!1;let[r]=s;return!!n===(0,ts._)(this,tb,tT).call(this,r)}constructor(e,t,n,i,a){(0,tr._)(this,tf),(0,tr._)(this,tp),(0,tr._)(this,tg),(0,tr._)(this,ty),(0,tr._)(this,tx),(0,tr._)(this,tv),(0,tr._)(this,tb),(0,tr._)(this,tj),(0,tr._)(this,tw),(0,tr._)(this,t_),(0,ti._)(this,to,{writable:!0,value:[]}),(0,ti._)(this,td,{writable:!0,value:new Map}),(0,ti._)(this,tc,{writable:!0,value:new Set}),(0,tl._)(this,"focusedGridCell",void 0),(0,tl._)(this,"lastSelectedGridCell",void 0),(0,ti._)(this,tu,{writable:!0,value:void 0}),(0,ti._)(this,tm,{writable:!0,value:void 0}),(0,ti._)(this,th,{writable:!0,value:void 0}),(0,ta._)(this,tm,e),(0,ta._)(this,th,t),(0,ts._)(this,ty,tI).call(this,n,i),this.focusFirstGridCell(a)}};function tC({rowIndex:e,columnIndex:t}){let n=(0,tn._)(this,to)[e],i=n?.[t];switch(!0){case i?.isHunk:return;case i?.orientation==="left"&&i.isEmpty:return n?.[t+2];case i?.orientation==="right"&&i.isEmpty&&(0,tn._)(this,th):return n?.[t-2];case i?.orientation==="right"&&i.isEmpty&&!(0,tn._)(this,th):return n?.[t+1];default:return n?.[t]}}function tN(e){return Array.from((0,tn._)(this,tc)).sort((e,t)=>e-t).find(t=>t>e)}function tS(e){return Array.from((0,tn._)(this,tc)).sort((e,t)=>e-t).reverse().find(t=>t<e)??0}function tI(e,t){(0,ta._)(this,to,[]),(0,ta._)(this,td,new Map),(0,ta._)(this,tc,new Set);for(let n=0;n<e.length;n++){let i=[],a=e[n];if(void 0!==a){if((0,tn._)(this,th)){let e=(t||[])[n],s=(0,R.qX)((0,tn._)(this,tm),a,e);(0,R.Po)(a)||"HUNK"!==a.type?(0,ts._)(this,tj,tD).call(this,{leftLine:a,rightLine:e,row:i,rowIdentifier:s,rowIndex:n}):(0,ts._)(this,tv,tL).call(this,i,s,n,a)}else{let e=(0,R.qX)((0,tn._)(this,tm),a,a);(0,R.Po)(a)||"HUNK"!==a.type?(0,ts._)(this,tw,tE).call(this,{diffLine:a,row:i,rowIdentifier:e,rowIndex:n}):(0,ts._)(this,tv,tL).call(this,i,e,n,a)}(0,tn._)(this,to).push(i)}}}function tk({cellIndex:e,diffLine:t,orientation:n,row:i,rowIdentifier:a,rowIndex:s,isSplit:r}){let l,o,d=(0,R.u6)(a,e);o=!(r||(0,R.Po)(t))&&t?.type==="DELETION"&&1===e||!(r||(0,R.Po)(t))&&t?.type==="ADDITION"&&0===e||(0,R.Po)(t),(0,R.Po)(t)||"left"!==n||(l=t?.left),(0,R.Po)(t)||"right"!==n||(l=t?.right),i.push({lineNumber:l,orientation:n,isEmpty:o,isHunk:!1,cellId:(0,R.u6)(a,e),columnIndex:e,lineKey:!(0,R.Po)(t)&&t?(0,A.bo)(t):void 0}),(0,tn._)(this,td).set(d,[s,e])}function tL(e,t,n,i){let a=(0,R.u6)(t,0);e.push({isHunk:!0,isEmpty:!1,cellId:a,columnIndex:0,lineKey:(0,A.bo)(i)}),(0,tn._)(this,td).set(a,[n,0]),(0,tn._)(this,tc).add(n)}function tT(e){return(0,tn._)(this,tc).has(e)}function tD({leftLine:e,rightLine:t,row:n,rowIdentifier:i,rowIndex:a}){(0,ts._)(this,tx,tk).call(this,{cellIndex:0,diffLine:e,orientation:"left",row:n,rowIdentifier:i,rowIndex:a,isSplit:!0}),(0,ts._)(this,tx,tk).call(this,{cellIndex:1,diffLine:e,orientation:"left",row:n,rowIdentifier:i,rowIndex:a,isSplit:!0}),(0,ts._)(this,tx,tk).call(this,{cellIndex:2,diffLine:t,orientation:"right",row:n,rowIdentifier:i,rowIndex:a,isSplit:!0}),(0,ts._)(this,tx,tk).call(this,{cellIndex:3,diffLine:t,orientation:"right",row:n,rowIdentifier:i,rowIndex:a,isSplit:!0})}function tE({diffLine:e,row:t,rowIdentifier:n,rowIndex:i}){let a=(0,R.Po)(e)||"DELETION"!==e.type?"right":"left";(0,ts._)(this,tx,tk).call(this,{cellIndex:0,diffLine:e,orientation:"left",row:t,rowIdentifier:n,rowIndex:i,isSplit:!1}),(0,ts._)(this,tx,tk).call(this,{cellIndex:1,diffLine:e,orientation:"right",row:t,rowIdentifier:n,rowIndex:i,isSplit:!1}),(0,ts._)(this,tx,tk).call(this,{cellIndex:2,diffLine:e,orientation:a,row:t,rowIdentifier:n,rowIndex:i,isSplit:!1})}function tR(e){(0,ts._)(this,tb,tT).call(this,e)||(0,ta._)(this,tu,e)}function tA(e){e&&setTimeout(()=>{0!==e.tabIndex&&(e.tabIndex=0)})}function tO(e,t,n){let i=[];for(let a=0;a<t.length;a++){let s=t[a],r=n?.[a]??s,l=!(0,R.Po)(s)&&s?.type==="HUNK";s&&r&&!e.hasLine(s,r,l)&&i.push(s)}return i}let tP=(0,a.GV)()?function(e,t,n,i,a,r){let o,d,c=(0,s.c)(8);c[0]!==i||c[1]!==e||c[2]!==n||c[3]!==t||c[4]!==a||c[5]!==r?(o=()=>{if(a&&document.activeElement){let s=tO(a,t,r);if(0!==s.length){if(document.activeElement===document.body){let i,a,r,l=t.indexOf(s[s.length-1]),o=t[l+1],d=s[0];o&&!(0,R.Po)(o)&&"HUNK"===o.type&&(i=(0,R.u6)((0,R.qX)(e,o,o),0),a=document.querySelector(`[data-grid-cell-id=${i}]`),r=a?.querySelector("button[data-direction=down], button[data-direction=all]")),r||(i=(0,R.u6)((0,R.qX)(e,d,d),0),a=document.querySelector(`[data-grid-cell-id=${i}]`),r=a?.querySelector("button[data-direction=up], button[data-direction=all]")),i&&a&&(r?r.focus():a.focus(),n.focusGridCell(i),tA(a))}else if("BUTTON"===document.activeElement.tagName)tA(document.activeElement.closest("td"));else if("TD"===document.activeElement.tagName){let e=document.activeElement.getAttribute("data-grid-cell-id"),t=n.focusedGridCell?.cellId;if(e!==t){let e=i.current?.querySelector(`[data-grid-cell-id=${t}]`);e?.focus()}}}}},d=[e,t,n,r,a,i],c[0]=i,c[1]=e,c[2]=n,c[3]=t,c[4]=a,c[5]=r,c[6]=o,c[7]=d):(o=c[6],d=c[7]),(0,l.useEffect)(o,d)}:function(e,t,n,i,a,s){(0,l.useEffect)(()=>{if(a&&document.activeElement){let r=tO(a,t,s);if(0!==r.length){if(document.activeElement===document.body){let i,a,s,l=t.indexOf(r[r.length-1]),o=t[l+1],d=r[0];o&&!(0,R.Po)(o)&&"HUNK"===o.type&&(i=(0,R.u6)((0,R.qX)(e,o,o),0),a=document.querySelector(`[data-grid-cell-id=${i}]`),s=a?.querySelector("button[data-direction=down], button[data-direction=all]")),s||(i=(0,R.u6)((0,R.qX)(e,d,d),0),a=document.querySelector(`[data-grid-cell-id=${i}]`),s=a?.querySelector("button[data-direction=up], button[data-direction=all]")),i&&a&&(s?s.focus():a.focus(),n.focusGridCell(i),tA(a))}else if("BUTTON"===document.activeElement.tagName)tA(document.activeElement.closest("td"));else if("TD"===document.activeElement.tagName){let e=document.activeElement.getAttribute("data-grid-cell-id"),t=n.focusedGridCell?.cellId;if(e!==t){let e=i.current?.querySelector(`[data-grid-cell-id=${t}]`);e?.focus()}}}}},[e,t,n,s,a,i])};var tF=n(69676);let tM={ArrowLeft:tF.z0.ArrowHorizontal,ArrowDown:tF.z0.ArrowVertical,ArrowUp:tF.z0.ArrowVertical,ArrowRight:tF.z0.ArrowHorizontal,h:tF.z0.HL,j:tF.z0.JK,k:tF.z0.JK,l:tF.z0.HL,a:tF.z0.AD,s:tF.z0.WS,w:tF.z0.WS,d:tF.z0.AD,Tab:tF.z0.Tab,Home:tF.z0.HomeAndEnd,End:tF.z0.HomeAndEnd,PageUp:tF.z0.PageUpDown,PageDown:tF.z0.PageUpDown,Backspace:tF.z0.Backspace},t$=tF.z0.ArrowAll|tF.z0.PageUpDown|tF.z0.HomeAndEnd|tF.z0.AD,tB={avatarUrl:"https://avatars.githubusercontent.com/ghost",id:"ghost",login:"ghost",url:"/ghost",__typename:"Author"},tV=(0,a.GV)()?function(e,t){let n,i,a,r=(0,s.c)(6);r[0]!==t?(n=e=>{let n=e.target.getAttribute("data-grid-cell-id");n&&t.focusGridCell(n)},r[0]=t,r[1]=n):n=r[1];let o=n;r[2]!==e||r[3]!==o?(i=()=>{let t=e.current;return t?.addEventListener("focusin",o),()=>t?.removeEventListener("focusin",o)},a=[e,o],r[2]=e,r[3]=o,r[4]=i,r[5]=a):(i=r[4],a=r[5]),(0,l.useEffect)(i,a)}:function(e,t){let n=(0,l.useCallback)(e=>{let n=e.target.getAttribute("data-grid-cell-id");n&&t.focusGridCell(n)},[t]);(0,l.useEffect)(()=>{let t=e.current;return t?.addEventListener("focusin",n),()=>t?.removeEventListener("focusin",n)},[e,n])};function tU(e){return e in tM&&(tM[e]&t$)>0}function tq({addLineToSelection:e,clearSelectedLines:t,containerRef:n,fileAnchor:i,getfirstLineSelectionOnDrag:a,isSplitDiff:s,leftLines:r,rightLines:o,selectMultipleLines:d,disabled:c}){let u=(0,l.useRef)(void 0),m=(0,l.useMemo)(()=>new GridNavigator(i,s,r,o,u.current?.focusedGridCell?.cellId),[i,s,r,o]);(0,l.useEffect)(()=>{u.current=m},[m]),(0,l.useEffect)(()=>{let e=n.current,t=()=>{m.clearLastSelectedCell()};return e?.addEventListener("mousedown",t),()=>e?.removeEventListener("mousedown",t)},[n,m]),tP(i,r,m,n,u.current,o),tV(n,m);let h=(0,l.useCallback)((n,i,s)=>{let r=m.getValidSelectableRowCell();switch(!0){case(s.metaKey||s.ctrlKey)&&"KeyA"===s.code:{let e=m.getFirstCodeCell(),t=m.getLastCodeCell();if(!e||!t)return i;return e.lineKey&&e.lineNumber&&e.orientation&&d({endLineKey:t.lineKey,endOrientation:t.orientation,startLineKey:e.lineKey,startOrientation:e.orientation,firstLineSelectionOnDrag:{lineKey:e.lineKey,lineNumber:e.lineNumber,orientation:e.orientation,shouldStartConversation:!1}},ew),i}case s.shiftKey&&"ArrowDown"===s.key:{let t=m.getNextSelectableCell("ArrowDown");if(!t||!r)return i;return a()?e({lineKey:t.lineKey,orientation:t.orientation},ew):r.lineKey&&r.lineNumber&&r.orientation&&d({endLineKey:t.lineKey,endOrientation:t.orientation,startLineKey:r.lineKey,startOrientation:r.orientation,firstLineSelectionOnDrag:{lineKey:r.lineKey,lineNumber:r.lineNumber,orientation:r.orientation,shouldStartConversation:!1}},ew),tG(t.cellId),i}case s.shiftKey&&"ArrowUp"===s.key:{let t=m.getNextSelectableCell("ArrowUp");if(!t||!r)return i;return a()?e({lineKey:t.lineKey,orientation:t.orientation},ew):r.lineKey&&r.lineNumber&&r.orientation&&d({endLineKey:r.lineKey,endOrientation:r.orientation,startLineKey:t.lineKey,startOrientation:t.orientation,firstLineSelectionOnDrag:{lineKey:r.lineKey,lineNumber:r.lineNumber,orientation:r.orientation,shouldStartConversation:!1}},ew),tG(t.cellId),i}case"ArrowLeft"===s.key&&s.metaKey&&s.shiftKey:return i;default:{let e=m.moveToNextItem(s.key,s.ctrlKey),n=e&&document.querySelector(`[data-grid-cell-id=${e.cellId}]`);return t(),m.clearLastSelectedCell(),n??void 0}}},[e,a,m,d,t]);return(0,tt.G)({containerRef:n,bindKeys:t$,getNextFocusable:h,focusableElementFilter:e=>"TD"===e.tagName&&"gridcell"===e.getAttribute("role"),focusInStrategy:"previous",disabled:c},[h]),{gridNavigator:m}}function tG(e){let t=g.XC?.querySelector(`[data-grid-cell-id=${e}]`);!function(e){if(!g.XC||!g.cg||!e)return!1;let t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(g.cg.innerHeight||g.XC.documentElement.clientHeight)&&t.right<=(g.cg.innerWidth||g.XC.documentElement.clientWidth)}(t)&&t?.scrollIntoView({block:"nearest",inline:"nearest"})}var tH=n(21537),tK=n(30459);let tW=(0,a.GV)()?function(e){let t,n,a,r,o,d,c,u,m,h,f=(0,s.c)(20);if(f[0]!==e){let{anchorRef:i,diffAnchor:s,isInDialogMode:l,isOpen:d,returnFocusRef:c,onCloseCommentDialog:u,suggestedChangesConfig:m,...h}=e;t=l,n=d,a=u,o=m,r=h,f[0]=e,f[1]=t,f[2]=n,f[3]=a,f[4]=r,f[5]=o}else t=f[1],n=f[2],a=f[3],r=f[4],o=f[5];let{sendAnalyticsEvent:p}=(0,tK.s)(),g=(0,l.useRef)(null),y=G();e:{if(n&&o?.configureSuggestedChangesFromLineRange){let e;if(f[6]!==y||f[7]!==o){let t=y();e=o.configureSuggestedChangesFromLineRange(t,o?.shouldStartNewConversationWithSuggestedChange),f[6]=y,f[7]=o,f[8]=e}else e=f[8];d=e;break e}d=void 0}let x=d;if(!n)return null;f[9]===Symbol.for("react.memo_cache_sentinel")?(c=e=>{e.target===g.current&&g.current.querySelector("textarea")?.focus()},f[9]=c):c=f[9];let v=c,b=t?0:-1;return f[10]!==a||f[11]!==p?(u=e=>{a(e),p("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON")},f[10]=a,f[11]=p,f[12]=u):u=f[12],f[13]!==x||f[14]!==r||f[15]!==u?(m=(0,i.jsx)(eH,{onClose:u,showOnCloseIcon:!1,suggestedChangesConfig:x,...r}),f[13]=x,f[14]=r,f[15]=u,f[16]=m):m=f[16],f[17]!==b||f[18]!==m?(h=(0,i.jsx)("div",{className:"rounded-2 bgColor-default","data-marker-navigation-new-thread":!0,"data-marker-id":"new-comment",ref:g,tabIndex:b,onFocus:v,children:m}),f[17]=b,f[18]=m,f[19]=h):h=f[19],h}:function({anchorRef:e,diffAnchor:t,isInDialogMode:n,isOpen:a,returnFocusRef:s,onCloseCommentDialog:r,suggestedChangesConfig:o,...d}){let{sendAnalyticsEvent:c}=(0,tK.s)(),u=(0,l.useRef)(null),m=G(),h=(0,l.useMemo)(()=>{if(a&&o?.configureSuggestedChangesFromLineRange){let e=m();return o.configureSuggestedChangesFromLineRange(e,o?.shouldStartNewConversationWithSuggestedChange)}},[a,o,m]);return a?(0,i.jsx)("div",{className:"rounded-2 bgColor-default","data-marker-navigation-new-thread":!0,"data-marker-id":"new-comment",ref:u,tabIndex:n?0:-1,onFocus:e=>{e.target===u.current&&u.current.querySelector("textarea")?.focus()},children:(0,i.jsx)(eH,{onClose:e=>{r(e),c("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON")},showOnCloseIcon:!1,suggestedChangesConfig:h,...d})}):null};try{tW.displayName||(tW.displayName="StartConversation")}catch{}var tz=n(2265);let tQ=tF.z0.ArrowAll;tF.z0.ArrowHorizontal,tF.z0.ArrowVertical,tF.z0.ArrowVertical,tF.z0.ArrowHorizontal;let MarkerNavigator=class MarkerNavigator{focusMarker(e){let t=this.markers.findIndex(t=>t.id.toString()===e.toString());-1!==t&&(this.currentMarkerPosition={markerId:e,index:t})}get focusedMarker(){if(this.currentMarkerPosition)return this.markers[this.currentMarkerPosition.index]}moveToFirstComment(e){if(0!==this.markers.length&&!e)return}moveToNextMarker(e,t){let n;if(0===this.markers.length)return;if(t){let e=t.closest("[data-marker-id]"),n=e?.getAttribute("data-marker-id");n&&(this.currentMarkerPosition={markerId:n,index:this.markers.findIndex(e=>e.id.toString()===n.toString())})}if(!this.currentMarkerPosition){let t="ArrowUp"===e?this.markers.length-1:0,n=this.markers[t];if(!n)return;return this.currentMarkerPosition={markerId:n.id,index:t},this.markers[t]}let i=0===this.currentMarkerPosition.index,a=this.currentMarkerPosition.index===this.markers.length-1;switch(e){case"ArrowDown":if(a)return;n=(this.currentMarkerPosition.index+1)%this.markers.length;break;case"ArrowUp":if(i)return;n=(this.currentMarkerPosition.index-1+this.markers.length)%this.markers.length;break;default:return}let s=this.markers[n];if(s)return this.currentMarkerPosition={markerId:s.id,index:n},s}moveToNextMarkerItem(e,t){let n;if(!t||!this.markerComments)return;let i=t.closest("[data-marker-id]"),a=i?.getAttribute("data-marker-id");if(!i||!a)return;let s=this.markerComments[a]||[];if(0===s.length)return;let r=t.getAttribute("data-marker-navigation-comment-id"),l=s.findIndex(e=>e.id===r);if(-1===l)return;let o=l===s.length-1;switch(e){case"ArrowDown":if(o)return;n=l+1;break;case"ArrowUp":if(0===l)return;n=l-1;break;default:return}let d=s[n];if(d)return this.currentMarkerCommentPosition={markerId:d.id,index:n},d}constructor(e,t,n){if((0,tl._)(this,"markers",void 0),(0,tl._)(this,"markerComments",null),(0,tl._)(this,"currentMarkerPosition",null),(0,tl._)(this,"currentMarkerCommentPosition",null),this.markers=e.map(e=>{let t=e.id;return{...e,id:t}}),this.markerComments=e.reduce((e,t)=>{let n=document.querySelectorAll(`[data-marker-navigation-comment-thread-id="${t.id}"]`);if(n){let i=Array.from(n).map(e=>({id:e.getAttribute("data-marker-navigation-comment-id")}));return{...e,[t.id.toString()]:i}}return e},{}),t&&!n){const e=this.markers.findIndex(e=>e.id.toString()===t.toString());-1!==e&&(this.currentMarkerPosition={markerId:t,index:e})}}};function tZ({containerRef:e,markers:t,disabled:n=!1,focusInStrategy:i="previous"}){let a=(0,l.useRef)(void 0),s=(0,l.useRef)(void 0);(0,l.useEffect)(()=>{s.current=new MarkerNavigator(t,a.current?.focusedMarker?.id||void 0),a.current=s.current},[t]);let r=(0,l.useCallback)((e,t,n)=>{let i=n.key,a=!tJ(t)&&!tY(t)&&!t2(t)&&!tX(t);switch(!0){case a&&("ArrowUp"===i||"ArrowDown"===i||"ArrowRight"===i||"ArrowLeft"===i):return t1(t)||t0(t)||void 0;case"ArrowUp"===i||"ArrowDown"===i:if(s.current&&tJ(t)){let e=s.current.moveToNextMarker(i,t0(t));if(e)return document.querySelector(`[data-marker-id="${e.id}"]`)||void 0;return t}if(s.current&&tX(t)){let e=s.current.moveToNextMarker(i,tX(t));if(e)return document.querySelector(`[data-marker-id="${e.id}"]`)||void 0;return t}if(s.current&&t2(t)){let e=s.current.moveToNextMarkerItem(i,t2(t));if(e)return document.querySelector(`[data-marker-navigation-comment-id="${e.id}"]`)||void 0;return t}if(s.current&&tY(t)){let e=s.current.moveToNextMarkerItem(i,t);if(e)return document.querySelector(`[data-marker-navigation-comment-id="${e.id}"]`)||void 0}return t;case"ArrowRight"===i:if(tY(t))return t1(t);if(tJ(t))return t?.querySelector('[data-first-thread-comment="true"]')||void 0;return t;case"ArrowLeft"===i:if(tJ(t))return t0(t);if(tX(t))return tX(t);if(t2(t))return t2(t);if(tY(t))return t?.closest("[data-marker-id]")||void 0;return t;default:return t??void 0}},[s]);return(0,tt.G)({containerRef:e,bindKeys:tQ,getNextFocusable:r,focusableElementFilter:e=>!n&&!!(e.hasAttribute("data-marker-id")&&e.hasAttribute("data-marker-navigation-comment-id")),focusInStrategy:i,disabled:n},[r,n]),{markerNavigator:s}}function tJ(e){return!!e?.hasAttribute("data-marker-id")}function tY(e){return!!e?.hasAttribute("data-marker-navigation-comment-id")}function tX(e){return e?.closest("[data-marker-navigation-new-thread]")??void 0}function t0(e){return e?.closest("[data-marker-id]")??void 0}function t1(e){return e?.closest("[data-marker-navigation-comment-id]")??void 0}function t2(e){return e?.closest("[data-marker-navigation-thread-reply]")??void 0}var t3=n(48505);let t4="a, audio, button, details, embed, iframe, img, input, keygen, label, object, select, textarea, video";function t5(e){e?.setAttribute("aria-hidden","true"),!function t(n=0){setTimeout(()=>{let n=Array.from(e?.querySelectorAll("*")??[]),i=Array.from(e?.querySelectorAll(t4)??[]);if(0===i.length)return t(200);for(let e of n)e?.setAttribute("aria-hidden","true");for(let e of i)e.setAttribute("tabindex","-1")},n)}()}function t6(e){for(let t of(e?.setAttribute("aria-hidden","false"),Array.from(e?.querySelectorAll("*")??[])))t?.setAttribute("aria-hidden","false");for(let t of Array.from(e?.querySelectorAll(t4)??[]))t.setAttribute("tabindex","0")}let t7=(0,a.GV)()?function(e){let t,n,i=(0,s.c)(7),{commentSubjectType:a,gridCellId:r,markerRef:o,isThread:d,thread:c}=e,u=void 0!==d&&d,m=W(r);i[0]!==a||i[1]!==m||i[2]!==u||i[3]!==o||i[4]!==c?(t=()=>{let e=null;if(!u||c)return m?"commit"===a?e=setTimeout(()=>{t6(o.current)},100):t6(o.current):t5(o.current),()=>{e&&clearTimeout(e)}},n=[m,a,o,u,c],i[0]=a,i[1]=m,i[2]=u,i[3]=o,i[4]=c,i[5]=t,i[6]=n):(t=i[5],n=i[6]),(0,l.useEffect)(t,n)}:function({commentSubjectType:e,gridCellId:t,markerRef:n,isThread:i=!1,thread:a}){let s=W(t);(0,l.useEffect)(()=>{let t=null;if(!i||a)return s?"commit"===e?t=setTimeout(()=>{t6(n.current)},100):t6(n.current):t5(n.current),()=>{t&&clearTimeout(t)}},[s,e,n,i,a])};var t8=n(86909);let t9="InlineAnnotation-module__inlineAnnotation--bVDzc",ne=(0,a.GV)()?function(e){let t,n,a,r,o=(0,s.c)(14),{annotation:d,gridCellId:c,isFirstMarker:u}=e,m=(0,l.useRef)(null),h=W(c);o[0]!==c?(t={commentSubjectType:"pull request",gridCellId:c,markerRef:m},o[0]=c,o[1]=t):t=o[1],t7(t);let f=`annotation_${d.databaseId}`,p=u?"mb-1":"mb-2";o[2]!==p?(n=(0,x.$)("border rounded-2 color-border-default color-shadow-small overflow-hidden",p,t9),o[2]=p,o[3]=n):n=o[3];let g=`annotation-${d.id}`,y=`${d.id}`,v=h?0:-1;return o[4]!==d?(a=(0,i.jsx)(t8.YH,{annotation:d}),o[4]=d,o[5]=a):a=o[5],o[6]!==d.annotationLevel||o[7]!==f||o[8]!==n||o[9]!==g||o[10]!==y||o[11]!==v||o[12]!==a?(r=(0,i.jsx)("div",{id:f,ref:m,className:n,"data-level":d.annotationLevel,"data-testid":g,"data-marker-id":y,tabIndex:v,children:a}),o[6]=d.annotationLevel,o[7]=f,o[8]=n,o[9]=g,o[10]=y,o[11]=v,o[12]=a,o[13]=r):r=o[13],r}:function({annotation:e,gridCellId:t,isFirstMarker:n}){let a=(0,l.useRef)(null),s=W(t);return t7({commentSubjectType:"pull request",gridCellId:t,markerRef:a}),(0,i.jsx)("div",{id:`annotation_${e.databaseId}`,ref:a,className:(0,x.$)("border rounded-2 color-border-default color-shadow-small overflow-hidden",n?"mb-1":"mb-2",t9),"data-level":e.annotationLevel,"data-testid":`annotation-${e.id}`,"data-marker-id":`${e.id}`,tabIndex:s?0:-1,children:(0,i.jsx)(t8.YH,{annotation:e})})};try{ne.displayName||(ne.displayName="InlineAnnotation")}catch{}let nt="InlineMarkers-module__closeMarkersDialogButton--wdW2G",nn="InlineMarkers-module__markersWrapper--Fw1hl",ni="InlineMarkers-module__fileMarkersWrapper--rXaAB",na="InlineMarkers-module__markersDialogActive--v0PSm";var ns=n(33643),nr=n(75202),nl=n(82075),no=n(26607),nd=n(72511),nc=n(76720);let nu=(0,a.GV)()?function(){let e,t,n,a=(0,s.c)(3);return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(nc.E.Visual,{children:(0,i.jsx)(c.AlertIcon,{size:24,className:"fgColor-muted mt-3 mb-3"})}),a[0]=e):e=a[0],a[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(nc.E.Heading,{children:(0,i.jsx)("strong",{children:"Comments cannot be loaded right now"})}),a[1]=t):t=a[1],a[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)("div",{className:"position-relative",children:(0,i.jsxs)(nc.E,{border:!0,children:[e,t,(0,i.jsx)("div",{className:"mb-n2",children:(0,i.jsx)(nc.E.Description,{children:"Refresh the page or try again later"})}),(0,i.jsx)(nc.E.SecondaryAction,{href:"https://www.githubstatus.com/",children:"GitHub status"})]})}),a[2]=n):n=a[2],n}:function(){return(0,i.jsx)("div",{className:"position-relative",children:(0,i.jsxs)(nc.E,{border:!0,children:[(0,i.jsx)(nc.E.Visual,{children:(0,i.jsx)(c.AlertIcon,{size:24,className:"fgColor-muted mt-3 mb-3"})}),(0,i.jsx)(nc.E.Heading,{children:(0,i.jsx)("strong",{children:"Comments cannot be loaded right now"})}),(0,i.jsx)("div",{className:"mb-n2",children:(0,i.jsx)(nc.E.Description,{children:"Refresh the page or try again later"})}),(0,i.jsx)(nc.E.SecondaryAction,{href:"https://www.githubstatus.com/",children:"GitHub status"})]})})};try{nu.displayName||(nu.displayName="CommentErrorFallback")}catch{}let nm="InlineReviewThread-module__inlineReviewThreadHeading--CBLMR",nh="InlineReviewThread-module__ReviewThreadContainer--MW9GI",nf="InlineReviewThread-module__ResolvableContainer--FkZ8G",np="InlineReviewThread-module__ThreadLoading--UIhR9";var ng=n(11738),ny=n(96760),nx=n(11680),nv=n(20622),nb=n(48845),nj=n(97665),nw=n(94747),n_=n(96379),nC=n(69510);let nN=(0,a.Z6)()?function(e,t){let n,i,a,r=(0,s.c)(13),l=(0,k.Kp)(),o=(0,nj.jE)(),d=`${l}/page_data/${nv.uT.createReviewComment}`,{updateThread:c}=(0,k.an)(),{addPendingComment:u,clearPendingReview:m}=(0,k._N)();return r[0]!==d?(n=async e=>{let t=await (0,n_.Sr)(`${d}`,{method:"POST",headers:{Accept:"application/json"},body:e}),n=await (0,nb.hp)(t);return(0,nb.R)(t,n),n},r[0]=d,r[1]=n):n=r[1],r[2]!==u||r[3]!==l||r[4]!==m||r[5]!==e||r[6]!==t||r[7]!==o||r[8]!==c?(i=(n,i)=>(void 0!==i.submitBatch&&!i.submitBatch&&n.thread&&u(Number(n.thread.id)),i.submitBatch&&m(),c(Number(n.thread.id),e,t,e=>n.thread),o.invalidateQueries({queryKey:(0,nC.XG)(l)})),r[2]=u,r[3]=l,r[4]=m,r[5]=e,r[6]=t,r[7]=o,r[8]=c,r[9]=i):i=r[9],r[10]!==n||r[11]!==i?(a={mutationFn:n,onSuccess:i},r[10]=n,r[11]=i,r[12]=a):a=r[12],(0,nw.n)(a)}:function(e,t){let n=(0,k.Kp)(),i=(0,nj.jE)(),a=`${n}/page_data/${nv.uT.createReviewComment}`,{updateThread:s}=(0,k.an)(),{addPendingComment:r,clearPendingReview:l}=(0,k._N)();return(0,nw.n)({mutationFn:async e=>{let t=await (0,n_.Sr)(`${a}`,{method:"POST",headers:{Accept:"application/json"},body:e}),n=await (0,nb.hp)(t);return(0,nb.R)(t,n),n},onSuccess:(a,o)=>(void 0!==o.submitBatch&&!o.submitBatch&&a.thread&&r(Number(a.thread.id)),o.submitBatch&&l(),s(Number(a.thread.id),e,t,e=>a.thread),i.invalidateQueries({queryKey:(0,nC.XG)(n)}))})};var nS=n(80081),nI=n(95542);let nk="ReviewThread-module__ReviewThreadContainer--s6e8A";var nL=n(61219);let nT=(0,a.GV)()?function(e){let t,n,a,r,o,d,c,u,m,h,p=(0,s.c)(87),{batchingEnabled:y,commentAnchorPrefix:x,lineMarkersKey:v,disableDialogMode:b,enableDialogMode:j,filePath:w,gridCellId:_,isInlineComment:C,isInDialogMode:N,onDeleteLineComment:S,subjectId:I,thread:L,threadPositionNumber:T,threadsConnectionId:D,shouldLimitHeight:E,suggestedChangesConfig:R,viewerData:A,ghostUser:O}=e,P=void 0===E||E,[F,M]=(0,l.useState)(!1),[$,B]=(0,l.useState)(void 0),{sendAnalyticsEvent:V}=(0,tK.s)(),U=(0,k.Kp)(),q=(0,l.useRef)(null),G=(0,l.useRef)(null),{mutate:H}=nN(w,v),{baseOid:K,headOid:W}=(0,k.E4)();p[0]!==H||p[1]!==W||p[2]!==w||p[3]!==V||p[4]!==K||p[5]!==L.commentsData?.comments?(t=e=>{let{commentText:t,onCompleted:n,onError:i,submitBatch:a}=e,s=L.commentsData?.comments[L.commentsData?.comments.length-1];H({text:t,submitBatch:a,inReplyTo:s?.databaseId,path:w,comparisonEndOid:W,comparisonStartOid:K},{onError:i,onSuccess:e=>{var t;(t=e.comment.databaseId)&&f(t.toString()),n?.()}}),V("comments.add","ADD_COMMENT_BUTTON")},p[0]=H,p[1]=W,p[2]=w,p[3]=V,p[4]=K,p[5]=L.commentsData?.comments,p[6]=t):t=p[6];let z=t;p[7]!==V?(n=()=>{M(!1),B(void 0),V("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON"),g.cg?.requestAnimationFrame(()=>q.current?.focus())},p[7]=V,p[8]=n):n=p[8];let Q=n;p[9]===Symbol.for("react.memo_cache_sentinel")?(a=e=>{B(e),M(!0)},p[9]=a):a=p[9];let Z=a;if(!L.commentsData||null===L.commentsData.comments||L.commentsData.comments.length<1)return null;p[10]!==L?(r=(0,nS.Lm)(L),p[10]=L,p[11]=r):r=p[11];let J=r;p[12]!==J||p[13]!==L.subjectType?(o=L.subjectType?.toLowerCase()==="line"?{lineRange:J}:void 0,p[12]=J,p[13]=L.subjectType,p[14]=o):o=p[14];let Y=o;p[15]!==F?(d=e=>{G.current===e.target&&(F?G.current?.querySelector("textarea")?.focus():q.current?.focus())},p[15]=F,p[16]=d):d=p[16];let X=d;if(p[17]!==Y||p[18]!==U||p[19]!==x||p[20]!==b||p[21]!==j||p[22]!==w||p[23]!==O||p[24]!==_||p[25]!==N||p[26]!==C||p[27]!==v||p[28]!==S||p[29]!==I||p[30]!==R||p[31]!==L.commentsData.__id||p[32]!==L.commentsData.comments||p[33]!==L.id||p[34]!==L.isResolved||p[35]!==L.positioning?.isOutdated||p[36]!==T||p[37]!==D||p[38]!==A){let e;p[40]!==Y||p[41]!==U||p[42]!==x||p[43]!==b||p[44]!==j||p[45]!==w||p[46]!==O||p[47]!==_||p[48]!==N||p[49]!==C||p[50]!==v||p[51]!==S||p[52]!==I||p[53]!==R||p[54]!==L.commentsData.__id||p[55]!==L.commentsData.comments.length||p[56]!==L.id||p[57]!==L.isResolved||p[58]!==L.positioning?.isOutdated||p[59]!==T||p[60]!==D||p[61]!==A?(e=(e,t)=>(function(e,t){return e.reviewVariantType===t3.hH.Automated&&0===t})(e,t)?(0,i.jsx)(nI.y,{anchorPrefix:x,basePath:U,comment:e,isAnchorable:!0,isInlineComment:C,isInDialogMode:N,isOutdated:L.positioning?.isOutdated,isThreadResolved:!!L.isResolved,onQuoteReply:Z,subjectId:I,threadId:L.id,threadPositionNumber:T,threadsConnectionId:D,viewerData:A},e.id):(0,i.jsx)(nL.U,{lineMarkersKey:v,isAnchorable:!0,index:t,threadPositionNumber:T,isFirstComment:0===t,isInlineComment:C,isLastChild:t===(L.commentsData?.comments.length??0)-1,anchorPrefix:x,comment:e,commentConnectionId:L.commentsData?.__id,disableDialogMode:b,enableDialogMode:j,filePath:w,gridCellId:_,isInDialogMode:N,isOutdated:L.positioning?.isOutdated,subjectId:I,threadId:L.id,onDeleteLineComment:S,onQuoteReply:Z,threadCommentCount:L.commentsData?.comments.length,threadsConnectionId:D,isThreadResolved:!!L.isResolved,suggestedChangesConfig:R,applySuggestedChangesValidationData:Y,viewerData:A,ghostUser:O},e.id),p[40]=Y,p[41]=U,p[42]=x,p[43]=b,p[44]=j,p[45]=w,p[46]=O,p[47]=_,p[48]=N,p[49]=C,p[50]=v,p[51]=S,p[52]=I,p[53]=R,p[54]=L.commentsData.__id,p[55]=L.commentsData.comments.length,p[56]=L.id,p[57]=L.isResolved,p[58]=L.positioning?.isOutdated,p[59]=T,p[60]=D,p[61]=A,p[62]=e):e=p[62],c=L.commentsData.comments.map(e),p[17]=Y,p[18]=U,p[19]=x,p[20]=b,p[21]=j,p[22]=w,p[23]=O,p[24]=_,p[25]=N,p[26]=C,p[27]=v,p[28]=S,p[29]=I,p[30]=R,p[31]=L.commentsData.__id,p[32]=L.commentsData.comments,p[33]=L.id,p[34]=L.isResolved,p[35]=L.positioning?.isOutdated,p[36]=T,p[37]=D,p[38]=A,p[39]=c}else c=p[39];return p[63]!==L.reviewCommentsLimit||p[64]!==L.reviewCommentsLimitExceeded?(u=L.reviewCommentsLimitExceeded&&(0,i.jsx)(nx.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:`Only the first ${(L.reviewCommentsLimit||0)-1} replies are currently being shown.`,className:"m-3"}),p[63]=L.reviewCommentsLimit,p[64]=L.reviewCommentsLimitExceeded,p[65]=u):u=p[65],p[66]!==z||p[67]!==y||p[68]!==Q||p[69]!==w||p[70]!==X||p[71]!==N||p[72]!==F||p[73]!==J?.endLineNumber||p[74]!==J?.startLineNumber||p[75]!==$||p[76]!==V||p[77]!==I||p[78]!==R||p[79]!==L.id||p[80]!==L.viewerCanReply?(m=L.viewerCanReply&&(0,i.jsxs)("div",{id:ny.Bq.issueCommentComposer,className:"rounded-bottom-2 p-2 bgColor-inset","data-marker-navigation-comment-thread-id":L.id,"data-marker-navigation-comment-id":`${L.id}-reply-comment`,"data-marker-navigation-thread-reply":!0,tabIndex:N?0:-1,onFocus:X,ref:G,children:[F&&(0,i.jsx)(eI,{startLineNumber:J?.startLineNumber,lineNumber:J?.endLineNumber,batchingEnabled:y,condensed:!1,fileLevelComment:!0,filePath:w,focusOnMount:!0,isReplying:!0,onCancelComment:Q,quotedText:$,subjectId:I,threadId:L.id,onAddComment:z,suggestedChangesConfig:R}),!F&&(0,i.jsx)(ng.z,{ref:q,onClick:()=>{V("comments.start_thread_reply","REPLY_TO_THREAD_INPUT_BUTTON"),M(!0)},children:"Write a reply"})]}),p[66]=z,p[67]=y,p[68]=Q,p[69]=w,p[70]=X,p[71]=N,p[72]=F,p[73]=J?.endLineNumber,p[74]=J?.startLineNumber,p[75]=$,p[76]=V,p[77]=I,p[78]=R,p[79]=L.id,p[80]=L.viewerCanReply,p[81]=m):m=p[81],p[82]!==P||p[83]!==m||p[84]!==c||p[85]!==u?(h=(0,i.jsx)("div",{"data-testid":"review-thread",children:(0,i.jsxs)("div",{className:nk,"data-limit-height":P,children:[c,u,m]})}),p[82]=P,p[83]=m,p[84]=c,p[85]=u,p[86]=h):h=p[86],h}:function({batchingEnabled:e,commentAnchorPrefix:t,lineMarkersKey:n,disableDialogMode:a,enableDialogMode:s,filePath:r,gridCellId:o,isInlineComment:d,isInDialogMode:c,onDeleteLineComment:u,subjectId:m,thread:h,threadPositionNumber:p,threadsConnectionId:y,shouldLimitHeight:x=!0,suggestedChangesConfig:v,viewerData:b,ghostUser:j}){let[w,_]=(0,l.useState)(!1),[C,N]=(0,l.useState)(void 0),{sendAnalyticsEvent:S}=(0,tK.s)(),I=(0,k.Kp)(),L=(0,l.useRef)(null),T=(0,l.useRef)(null),{mutate:D}=nN(r,n),{baseOid:E,headOid:R}=(0,k.E4)(),A=e=>{N(e),_(!0)};if(!h.commentsData||null===h.commentsData.comments||h.commentsData.comments.length<1)return null;let O=(0,nS.Lm)(h),P=h.subjectType?.toLowerCase()==="line"?{lineRange:O}:void 0;return(0,i.jsx)("div",{"data-testid":"review-thread",children:(0,i.jsxs)("div",{className:nk,"data-limit-height":x,children:[h.commentsData.comments.map((e,l)=>e.reviewVariantType===t3.hH.Automated&&0===l?(0,i.jsx)(nI.y,{anchorPrefix:t,basePath:I,comment:e,isAnchorable:!0,isInlineComment:d,isInDialogMode:c,isOutdated:h.positioning?.isOutdated,isThreadResolved:!!h.isResolved,onQuoteReply:A,subjectId:m,threadId:h.id,threadPositionNumber:p,threadsConnectionId:y,viewerData:b},e.id):(0,i.jsx)(nL.U,{lineMarkersKey:n,isAnchorable:!0,index:l,threadPositionNumber:p,isFirstComment:0===l,isInlineComment:d,isLastChild:l===(h.commentsData?.comments.length??0)-1,anchorPrefix:t,comment:e,commentConnectionId:h.commentsData?.__id,disableDialogMode:a,enableDialogMode:s,filePath:r,gridCellId:o,isInDialogMode:c,isOutdated:h.positioning?.isOutdated,subjectId:m,threadId:h.id,onDeleteLineComment:u,onQuoteReply:A,threadCommentCount:h.commentsData?.comments.length,threadsConnectionId:y,isThreadResolved:!!h.isResolved,suggestedChangesConfig:v,applySuggestedChangesValidationData:P,viewerData:b,ghostUser:j},e.id)),h.reviewCommentsLimitExceeded&&(0,i.jsx)(nx.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:`Only the first ${(h.reviewCommentsLimit||0)-1} replies are currently being shown.`,className:"m-3"}),h.viewerCanReply&&(0,i.jsxs)("div",{id:ny.Bq.issueCommentComposer,className:"rounded-bottom-2 p-2 bgColor-inset","data-marker-navigation-comment-thread-id":h.id,"data-marker-navigation-comment-id":`${h.id}-reply-comment`,"data-marker-navigation-thread-reply":!0,tabIndex:c?0:-1,onFocus:e=>{T.current===e.target&&(w?T.current?.querySelector("textarea")?.focus():L.current?.focus())},ref:T,children:[w&&(0,i.jsx)(eI,{startLineNumber:O?.startLineNumber,lineNumber:O?.endLineNumber,batchingEnabled:e,condensed:!1,fileLevelComment:!0,filePath:r,focusOnMount:!0,isReplying:!0,onCancelComment:()=>{_(!1),N(void 0),S("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON"),g.cg?.requestAnimationFrame(()=>L.current?.focus())},quotedText:C,subjectId:m,threadId:h.id,onAddComment:({commentText:e,onCompleted:t,onError:n,submitBatch:i})=>{let a=h.commentsData?.comments[h.commentsData?.comments.length-1];D({text:e,submitBatch:i,inReplyTo:a?.databaseId,path:r,comparisonEndOid:R,comparisonStartOid:E},{onError:n,onSuccess:e=>{var n;(n=e.comment.databaseId)&&f(n.toString()),t?.()}}),S("comments.add","ADD_COMMENT_BUTTON")},suggestedChangesConfig:v}),!w&&(0,i.jsx)(ng.z,{ref:L,onClick:()=>{S("comments.start_thread_reply","REPLY_TO_THREAD_INPUT_BUTTON"),_(!0)},children:"Write a reply"})]})]})})};try{nT.displayName||(nT.displayName="ReviewThread")}catch{}var nD=n(97695),nE=n(39698),nR=n(25407),nA=n(21067);let nO=(0,a.Z6)()?function(e,t){let n,i,a,r,l=(0,s.c)(12),o=(0,k.Kp)();l[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,nA.cj)(),l[0]=n):n=l[0];let d=n,c=(0,nj.jE)(),{updateThread:u}=(0,k.an)();return l[1]!==o?(i=async e=>{let{automatedReviewCommentId:t,reason:n,resolutionNote:i}=e,a=(0,nR.L7I)({basePath:o,automatedReviewCommentId:t}),s=await (0,nb.q$)(a,{method:"PUT",body:{reason:n,resolution_note:i}});(0,nb.R)(s)},l[1]=o,l[2]=i):i=l[2],l[3]!==o||l[4]!==e||l[5]!==t||l[6]!==c||l[7]!==u?(a=(n,i)=>{u(Number(i.threadId),e,t,e=>{if(e?.commentsData?.comments[0]?.automatedComment){let t=e.commentsData?.comments[0]?.automatedComment;return{...e,isResolved:!0,resolvedBy:d,commentsData:{...e.commentsData,comments:[{...e.commentsData.comments[0],automatedComment:{...t,isDismissed:!0,viewerCanDismiss:!1,viewerCanReopen:!0}},...e.commentsData.comments.slice(1)]}}}}),c.invalidateQueries({queryKey:(0,nC.XG)(o)})},l[3]=o,l[4]=e,l[5]=t,l[6]=c,l[7]=u,l[8]=a):a=l[8],l[9]!==i||l[10]!==a?(r={mutationFn:i,onSuccess:a},l[9]=i,l[10]=a,l[11]=r):r=l[11],(0,nw.n)(r)}:function(e,t){let n=(0,k.Kp)(),i=(0,nA.cj)(),a=(0,nj.jE)(),{updateThread:s}=(0,k.an)();return(0,nw.n)({mutationFn:async({automatedReviewCommentId:e,reason:t,resolutionNote:i})=>{let a=(0,nR.L7I)({basePath:n,automatedReviewCommentId:e}),s=await (0,nb.q$)(a,{method:"PUT",body:{reason:t,resolution_note:i}});(0,nb.R)(s)},onSuccess:(r,l)=>{s(Number(l.threadId),e,t,e=>{if(e?.commentsData?.comments[0]?.automatedComment){let t=e.commentsData?.comments[0]?.automatedComment;return{...e,isResolved:!0,resolvedBy:i,commentsData:{...e.commentsData,comments:[{...e.commentsData.comments[0],automatedComment:{...t,isDismissed:!0,viewerCanDismiss:!1,viewerCanReopen:!0}},...e.commentsData.comments.slice(1)]}}}}),a.invalidateQueries({queryKey:(0,nC.XG)(n)})}})},nP=(0,a.Z6)()?function(e,t){let n,i,a,r=(0,s.c)(11),l=(0,k.Kp)(),o=(0,nj.jE)(),{updateThread:d}=(0,k.an)();return r[0]!==l?(n=async e=>{let{automatedReviewCommentId:t}=e,n=(0,nR.Aav)({basePath:l,automatedReviewCommentId:t}),i=await (0,nb.q$)(n,{method:"PUT"});(0,nb.R)(i)},r[0]=l,r[1]=n):n=r[1],r[2]!==l||r[3]!==e||r[4]!==t||r[5]!==o||r[6]!==d?(i=(n,i)=>{d(Number(i.threadId),e,t,nF),o.invalidateQueries({queryKey:(0,nC.XG)(l)})},r[2]=l,r[3]=e,r[4]=t,r[5]=o,r[6]=d,r[7]=i):i=r[7],r[8]!==n||r[9]!==i?(a={mutationFn:n,onSuccess:i},r[8]=n,r[9]=i,r[10]=a):a=r[10],(0,nw.n)(a)}:function(e,t){let n=(0,k.Kp)(),i=(0,nj.jE)(),{updateThread:a}=(0,k.an)();return(0,nw.n)({mutationFn:async({automatedReviewCommentId:e})=>{let t=(0,nR.Aav)({basePath:n,automatedReviewCommentId:e}),i=await (0,nb.q$)(t,{method:"PUT"});(0,nb.R)(i)},onSuccess:(s,r)=>{a(Number(r.threadId),e,t,e=>{if(e?.commentsData?.comments[0]?.automatedComment){let t=e.commentsData?.comments[0]?.automatedComment;return{...e,isResolved:!1,resolvedBy:void 0,commentsData:{...e.commentsData,comments:[{...e.commentsData.comments[0],automatedComment:{...t,isDismissed:!1,viewerCanDismiss:!0,viewerCanReopen:!1}},...e.commentsData.comments.slice(1)]}}}}),i.invalidateQueries({queryKey:(0,nC.XG)(n)})}})};function nF(e){if(e?.commentsData?.comments[0]?.automatedComment){let t=e.commentsData?.comments[0]?.automatedComment;return{...e,isResolved:!1,resolvedBy:void 0,commentsData:{...e.commentsData,comments:[{...e.commentsData.comments[0],automatedComment:{...t,isDismissed:!1,viewerCanDismiss:!0,viewerCanReopen:!1}},...e.commentsData.comments.slice(1)]}}}}var nM=n(73262);let n$=(0,a.GV)()?function(e){let t,n,a,r=(0,s.c)(20),{automatedComment:l,thread:o,filePath:d,lineMarkersKey:c,setErrorMessage:u,setIsCollapsed:m,safeLocalStorage:h}=e,{mutate:f,isPending:p,error:g}=nO(d,c);r[0]!==l.id||r[1]!==f||r[2]!==h||r[3]!==u||r[4]!==m||r[5]!==o.id?(t=(e,t)=>{let{reason:n,resolutionNote:i}=e,{onSuccess:a}=t;f({automatedReviewCommentId:l.id,threadId:o.id,reason:n,resolutionNote:i},{onError:()=>u("Failed to dismiss"),onSuccess:()=>{a(),m(!0),h.removeItem(`reviewThreadIsCollapsed_${o.id}`)}})},r[0]=l.id,r[1]=f,r[2]=h,r[3]=u,r[4]=m,r[5]=o.id,r[6]=t):t=r[6];let y=t,{mutate:x,isPending:v}=nP(d,c);r[7]!==l.id||r[8]!==x||r[9]!==h||r[10]!==u||r[11]!==m||r[12]!==o.id?(n=()=>{x({automatedReviewCommentId:l.id,threadId:o.id},{onError:()=>u("Failed to reopen"),onSuccess:()=>{m(!1),h.removeItem(`reviewThreadIsCollapsed_${o.id}`)}})},r[7]=l.id,r[8]=x,r[9]=h,r[10]=u,r[11]=m,r[12]=o.id,r[13]=n):n=r[13];let b=n,j=p||v;return r[14]!==l||r[15]!==g||r[16]!==y||r[17]!==b||r[18]!==j?(a=(0,i.jsx)(nM.K,{automatedComment:l,dismissError:g,isButtonDisabled:j,onDismiss:y,onReopen:b,className:"p-2 border-top"}),r[14]=l,r[15]=g,r[16]=y,r[17]=b,r[18]=j,r[19]=a):a=r[19],a}:function({automatedComment:e,thread:t,filePath:n,lineMarkersKey:a,setErrorMessage:s,setIsCollapsed:r,safeLocalStorage:l}){let{mutate:o,isPending:d,error:c}=nO(n,a),{mutate:u,isPending:m}=nP(n,a);return(0,i.jsx)(nM.K,{automatedComment:e,dismissError:c,isButtonDisabled:d||m,onDismiss:({reason:n,resolutionNote:i},{onSuccess:a})=>{o({automatedReviewCommentId:e.id,threadId:t.id,reason:n,resolutionNote:i},{onError:()=>s("Failed to dismiss"),onSuccess:()=>{a(),r(!0),l.removeItem(`reviewThreadIsCollapsed_${t.id}`)}})},onReopen:()=>{u({automatedReviewCommentId:e.id,threadId:t.id},{onError:()=>s("Failed to reopen"),onSuccess:()=>{r(!1),l.removeItem(`reviewThreadIsCollapsed_${t.id}`)}})},className:"p-2 border-top"})};try{n$.displayName||(n$.displayName="InlineAutomatedReviewThreadActions")}catch{}let nB=(0,a.GV)()?function(e){let t,n=(0,s.c)(2),{children:a}=e;return n[0]!==a?(t=(0,i.jsx)("span",{className:"text-semibold fgColor-default",children:a}),n[0]=a,n[1]=t):t=n[1],t}:function({children:e}){return(0,i.jsx)("span",{className:"text-semibold fgColor-default",children:e})};function nV({thread:e}){if(void 0===e)return null;let t=e.positioning??e.subject;return void 0!==t&&t.endDiffSide&&t.endLine?t.startLine&&t.startDiffSide&&t.startLine!==t.endLine?nq({positioning:t}):nU({positioning:t}):null}let nU=(0,a.GV)()?function(e){let t,n=(0,s.c)(3),{positioning:a}=e,r="LEFT"===a.endDiffSide?"L":"R",l=a.endLine??"";return n[0]!==r||n[1]!==l?(t=(0,i.jsxs)("h2",{className:nm,children:["Comment on line"," ",(0,i.jsxs)(nB,{children:[r,l]})]}),n[0]=r,n[1]=l,n[2]=t):t=n[2],t}:function({positioning:e}){let t="LEFT"===e.endDiffSide?"L":"R";return(0,i.jsxs)("h2",{className:nm,children:["Comment on line"," ",(0,i.jsxs)(nB,{children:[t,e.endLine??""]})]})},nq=(0,a.GV)()?function(e){let t,n,a,r=(0,s.c)(9),{positioning:l}=e,o="LEFT"===l.startDiffSide?"L":"R",d="LEFT"===l.endDiffSide?"L":"R",c=l.startLine??"";r[0]!==o||r[1]!==c?(t=(0,i.jsxs)(nB,{children:[o,c]}),r[0]=o,r[1]=c,r[2]=t):t=r[2];let u=l.endLine??"";return r[3]!==d||r[4]!==u?(n=(0,i.jsxs)(nB,{children:[d,u]}),r[3]=d,r[4]=u,r[5]=n):n=r[5],r[6]!==t||r[7]!==n?(a=(0,i.jsxs)("h2",{className:nm,children:["Comment on lines"," ",t," ","to"," ",n]}),r[6]=t,r[7]=n,r[8]=a):a=r[8],a}:function({positioning:e}){let t="LEFT"===e.startDiffSide?"L":"R",n="LEFT"===e.endDiffSide?"L":"R";return(0,i.jsxs)("h2",{className:nm,children:["Comment on lines"," ",(0,i.jsxs)(nB,{children:[t,e.startLine??""]})," ","to"," ",(0,i.jsxs)(nB,{children:[n,e.endLine??""]})]})},nG=(0,a.GV)()?function(e){let t,n,a,r,o,d,u,h,f,p,g,y,v,b,j,w,_,C,N,S,I,L,T,D,E,R,A,O,P,F,M,$,B=(0,s.c)(99);if(B[0]!==e){let{fileAnchor:i,filePath:s,gridCellId:l,onDeleteLineComment:c,threadId:m,threadPositionNumber:x,lineMarkersKey:v,threadsConnectionId:b,isFirstThread:j,ghostUser:w,manuallyUpdateCommentsWithThisThreadId:_,suggestedChangesConfig:C,...N}=e;t=i,n=s,r=l,u=c,p=m,g=x,d=v,y=b,o=j,a=w,f=C,h=N,B[0]=e,B[1]=t,B[2]=n,B[3]=a,B[4]=r,B[5]=o,B[6]=d,B[7]=u,B[8]=h,B[9]=f,B[10]=p,B[11]=g,B[12]=y}else t=B[1],n=B[2],a=B[3],r=B[4],o=B[5],d=B[6],u=B[7],h=B[8],f=B[9],p=B[10],g=B[11],y=B[12];let V=(0,k._W)(p,n,d),{mutate:U}=(0,nD.H)(n,d),q=()=>{V&&(U({threadId:V.id},{onError:()=>J("Failed to resolve thread"),onSuccess:()=>{ee(!0),H.removeItem(`reviewThreadIsCollapsed_${p}`)}}),el("comments.resolve_thread","RESOLVE_CONVERSATION_BUTTON"))},G=(0,l.useRef)(null),H=(0,nl.A)("localStorage"),K=V?.isResolved,[Q,Z]=(0,l.useState)(""),J=Z,[Y,X]=(0,l.useState)(K??!1),ee=X,et=W(r),{disableDialogMode:en,enableDialogMode:ei}=z();B[13]!==K||B[14]!==p?(v=[K,p],B[13]=K,B[14]=p,B[15]=v):v=B[15],(0,l.useEffect)(()=>{let e=localStorage.getItem(`reviewThreadIsCollapsed_${p}`);null!==e?ee(JSON.parse(e)):K&&ee(!0)},v);let ea=()=>{window.requestAnimationFrame(()=>{H.setItem(`reviewThreadIsCollapsed_${p}`,JSON.stringify(!Y))}),ee(nK)};B[16]!==r||B[17]!==V?(b={commentSubjectType:"pull request",gridCellId:r,markerRef:G,isThread:!0,thread:V},B[16]=r,B[17]=V,B[18]=b):b=B[18],t7(b);e:{let e=V?.positioning??V?.subject;if(!e){j=void 0;break e}if(t&&V&&e.startDiffSide&&e.endDiffSide&&e.startLine&&e.endLine&&f?.configureSuggestedChangesFromLineRange){let n,i=e.startLine??e.endLine,a=e.startDiffSide??e.endDiffSide,s="LEFT"===e.endDiffSide?"left":"right",r="LEFT"===a?"left":"right",l="LEFT"===a?"left":"right";if(B[19]!==t||B[20]!==e.endLine||B[21]!==i||B[22]!==f||B[23]!==s||B[24]!==r||B[25]!==l){let a={diffAnchor:t,endLineNumber:e.endLine,endOrientation:s,startLineNumber:i,startOrientation:r,firstSelectedLineNumber:i,firstSelectedOrientation:l};n=f?.configureSuggestedChangesFromLineRange(a),B[19]=t,B[20]=e.endLine,B[21]=i,B[22]=f,B[23]=s,B[24]=r,B[25]=l,B[26]=n}else n=B[26];j=n;break e}j=void 0}let es=j,{sendAnalyticsEvent:er}=(0,tK.s)(),el=er,{mutate:eo}=(0,nE.i)(n,d);B[27]!==H||B[28]!==el||B[29]!==J||B[30]!==ee||B[31]!==V||B[32]!==eo?(w=()=>{V&&(eo({threadId:V.id},{onError:()=>J("Failed to unresolve thread"),onSuccess:()=>{ee(!1),H.removeItem(`reviewThreadIsCollapsed_${V.id}`)}}),el("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON"))},B[27]=H,B[28]=el,B[29]=J,B[30]=ee,B[31]=V,B[32]=eo,B[33]=w):w=B[33];let ed=w,ec=V?.commentsData?.comments[0]?.reviewVariantType===t3.hH.Automated,eu=ec?V.commentsData?.comments[0]?.automatedComment:null,em=eu&&eu.dismissable,eh=eu&&eu.source===t3.vk.LicenseCompliance;if(!V||!((V.commentsData?.comments?.length??0)>0))return null;let ef=!!V.isResolved;B[34]===Symbol.for("react.memo_cache_sentinel")?(_=(0,nA.M3)(),B[34]=_):_=B[34];let ep=_;B[35]!==V.commentsData?.comments?(C=ep&&V.commentsData?.comments?.some(nH),B[35]=V.commentsData?.comments,B[36]=C):C=B[36];let eg=C,ey=V.commentsData?.comments?.[0]?.createdAt,ex=V.commentsData?.comments?.[0]?.author?.login??"Unknown Author",ev=`${K?"Unresolve":"Resolve"} comment`;if(ey){let e;B[37]!==ey?(e=(0,ns.C)(new Date(ey)),B[37]=ey,B[38]=e):e=B[38];let t=e;ev=`${K?"Unresolve":"Resolve"} ${ex}'s comment, ${t}`}B[39]===Symbol.for("react.memo_cache_sentinel")?(N=(0,i.jsx)(nu,{}),B[39]=N):N=B[39],B[40]===Symbol.for("react.memo_cache_sentinel")?(S=(0,x.$)("px-1",nh),B[40]=S):S=B[40];let eb=Y?"Expand comment":"Collapse comment",ej=Y?c.ChevronRightIcon:c.ChevronDownIcon;return B[41]!==ea||B[42]!==o||B[43]!==eb||B[44]!==ej?(I=(0,i.jsx)(m.K,{"aria-label":eb,icon:ej,size:"small",variant:"invisible",onClick:ea,"data-is-first-collapse-button":o}),B[41]=ea,B[42]=o,B[43]=eb,B[44]=ej,B[45]=I):I=B[45],B[46]!==V?(L=(0,i.jsx)(nV,{thread:V}),B[46]=V,B[47]=L):L=B[47],B[48]!==V.positioning?.isOutdated?(T=V.positioning?.isOutdated&&(0,i.jsx)(no.A,{variant:"secondary",children:"Outdated"}),B[48]=V.positioning?.isOutdated,B[49]=T):T=B[49],B[50]!==ec||B[51]!==ef?(D=ef&&!ec&&(0,i.jsx)(no.A,{variant:"secondary",children:"Resolved"}),B[50]=ec,B[51]=ef,B[52]=D):D=B[52],B[53]!==eu?.isDismissed?(E=eu?.isDismissed&&(0,i.jsx)(no.A,{variant:"secondary",children:"Dismissed"}),B[53]=eu?.isDismissed,B[54]=E):E=B[54],B[55]!==T||B[56]!==D||B[57]!==E?(R=(0,i.jsxs)("div",{className:nf,children:[T,D,E]}),B[55]=T,B[56]=D,B[57]=E,B[58]=R):R=B[58],B[59]!==I||B[60]!==L||B[61]!==R?(A=(0,i.jsxs)("div",{className:S,children:[I,L,R]}),B[59]=I,B[60]=L,B[61]=R,B[62]=A):A=B[62],B[63]===Symbol.for("react.memo_cache_sentinel")?(O=(0,i.jsxs)("div",{className:np,children:[(0,i.jsx)(eZ.A,{}),(0,i.jsx)("p",{children:"Loading comments"})]}),B[63]=O):O=B[63],B[64]!==Q?(P=Q&&(0,i.jsxs)(nd.A,{variant:"danger",className:"m-2",children:[(0,i.jsx)(c.StopIcon,{className:"mr-2"}),Q]}),B[64]=Q,B[65]=P):P=B[65],B[66]!==eu||B[67]!==es||B[68]!==en||B[69]!==em||B[70]!==ei||B[71]!==n||B[72]!==a||B[73]!==r||B[74]!==q||B[75]!==ed||B[76]!==Y||B[77]!==et||B[78]!==eg||B[79]!==K||B[80]!==ef||B[81]!==eh||B[82]!==d||B[83]!==u||B[84]!==ev||B[85]!==h||B[86]!==H||B[87]!==J||B[88]!==ee||B[89]!==V||B[90]!==g||B[91]!==y?(F=!Y&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(nT,{lineMarkersKey:d,disableDialogMode:en,enableDialogMode:ei,filePath:n,gridCellId:r,onDeleteLineComment:u,isInlineComment:!0,isInDialogMode:et,thread:V,threadPositionNumber:g,threadsConnectionId:y,suggestedChangesConfig:es,shouldLimitHeight:!1,...h,ghostUser:a}),eg&&!em&&!eh&&(0,i.jsxs)("div",{className:"d-flex flex-items-center p-2 border-top flex-wrap",children:[(0,i.jsx)(ek.Q,{"aria-label":ev,onClick:ef?ed:q,className:"mr-2",children:K?"Unresolve comment":"Resolve comment"}),ef&&V.resolvedBy&&(0,i.jsxs)("span",{className:"fgColor-muted f6",children:[(0,i.jsx)("b",{children:V.resolvedBy})," marked this comment as resolved"]})]}),em&&(0,i.jsx)(n$,{automatedComment:eu,thread:V,filePath:n,lineMarkersKey:d,setErrorMessage:J,setIsCollapsed:ee,safeLocalStorage:H})]}),B[66]=eu,B[67]=es,B[68]=en,B[69]=em,B[70]=ei,B[71]=n,B[72]=a,B[73]=r,B[74]=q,B[75]=ed,B[76]=Y,B[77]=et,B[78]=eg,B[79]=K,B[80]=ef,B[81]=eh,B[82]=d,B[83]=u,B[84]=ev,B[85]=h,B[86]=H,B[87]=J,B[88]=ee,B[89]=V,B[90]=g,B[91]=y,B[92]=F):F=B[92],B[93]!==P||B[94]!==F?(M=(0,i.jsxs)(l.Suspense,{fallback:O,children:[P,F]}),B[93]=P,B[94]=F,B[95]=M):M=B[95],B[96]!==A||B[97]!==M?($=(0,i.jsx)(nr.t,{fallback:N,children:(0,i.jsxs)("div",{className:"rounded-2 bgColor-default",ref:G,children:[A,M]})}),B[96]=A,B[97]=M,B[98]=$):$=B[98],$}:function({fileAnchor:e,filePath:t,gridCellId:n,onDeleteLineComment:a,threadId:s,threadPositionNumber:r,lineMarkersKey:o,threadsConnectionId:d,isFirstThread:u,ghostUser:h,manuallyUpdateCommentsWithThisThreadId:f,suggestedChangesConfig:p,...g}){let y=(0,k._W)(s,t,o),{mutate:v}=(0,nD.H)(t,o),b=(0,l.useRef)(null),j=(0,nl.A)("localStorage"),w=y?.isResolved,[_,C]=(0,l.useState)(""),[N,S]=(0,l.useState)(w??!1),I=W(n),{disableDialogMode:L,enableDialogMode:T}=z();(0,l.useEffect)(()=>{let e=localStorage.getItem(`reviewThreadIsCollapsed_${s}`);null!==e?S(JSON.parse(e)):w&&S(!0)},[w,s]),t7({commentSubjectType:"pull request",gridCellId:n,markerRef:b,isThread:!0,thread:y});let D=(0,l.useMemo)(()=>{let t=y?.positioning??y?.subject;if(t&&e&&y&&t.startDiffSide&&t.endDiffSide&&t.startLine&&t.endLine&&p?.configureSuggestedChangesFromLineRange){let n=t.startLine??t.endLine,i=t.startDiffSide??t.endDiffSide,a={diffAnchor:e,endLineNumber:t.endLine,endOrientation:"LEFT"===t.endDiffSide?"left":"right",startLineNumber:n,startOrientation:"LEFT"===i?"left":"right",firstSelectedLineNumber:n,firstSelectedOrientation:"LEFT"===i?"left":"right"};return p?.configureSuggestedChangesFromLineRange(a)}},[e,y,p]),{sendAnalyticsEvent:E}=(0,tK.s)(),{mutate:R}=(0,nE.i)(t,o),A=y?.commentsData?.comments[0]?.reviewVariantType===t3.hH.Automated,O=A?y.commentsData?.comments[0]?.automatedComment:null,P=O&&O.dismissable,F=O&&O.source===t3.vk.LicenseCompliance;if(!y||!((y.commentsData?.comments?.length??0)>0))return null;let M=!!y.isResolved,$=(0,nA.M3)()&&y.commentsData?.comments?.some(e=>e.state?.toUpperCase()!=="PENDING"),B=y.commentsData?.comments?.[0]?.createdAt,V=y.commentsData?.comments?.[0]?.author?.login??"Unknown Author",U=`${w?"Unresolve":"Resolve"} comment`;if(B){let e=(0,ns.C)(new Date(B));U=`${w?"Unresolve":"Resolve"} ${V}'s comment, ${e}`}return(0,i.jsx)(nr.t,{fallback:(0,i.jsx)(nu,{}),children:(0,i.jsxs)("div",{className:"rounded-2 bgColor-default",ref:b,children:[(0,i.jsxs)("div",{className:(0,x.$)("px-1",nh),children:[(0,i.jsx)(m.K,{"aria-label":N?"Expand comment":"Collapse comment",icon:N?c.ChevronRightIcon:c.ChevronDownIcon,size:"small",variant:"invisible",onClick:()=>{window.requestAnimationFrame(()=>{j.setItem(`reviewThreadIsCollapsed_${s}`,JSON.stringify(!N))}),S(e=>!e)},"data-is-first-collapse-button":u}),(0,i.jsx)(nV,{thread:y}),(0,i.jsxs)("div",{className:nf,children:[y.positioning?.isOutdated&&(0,i.jsx)(no.A,{variant:"secondary",children:"Outdated"}),M&&!A&&(0,i.jsx)(no.A,{variant:"secondary",children:"Resolved"}),O?.isDismissed&&(0,i.jsx)(no.A,{variant:"secondary",children:"Dismissed"})]})]}),(0,i.jsxs)(l.Suspense,{fallback:(0,i.jsxs)("div",{className:np,children:[(0,i.jsx)(eZ.A,{}),(0,i.jsx)("p",{children:"Loading comments"})]}),children:[_&&(0,i.jsxs)(nd.A,{variant:"danger",className:"m-2",children:[(0,i.jsx)(c.StopIcon,{className:"mr-2"}),_]}),!N&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(nT,{lineMarkersKey:o,disableDialogMode:L,enableDialogMode:T,filePath:t,gridCellId:n,onDeleteLineComment:a,isInlineComment:!0,isInDialogMode:I,thread:y,threadPositionNumber:r,threadsConnectionId:d,suggestedChangesConfig:D,shouldLimitHeight:!1,...g,ghostUser:h}),$&&!P&&!F&&(0,i.jsxs)("div",{className:"d-flex flex-items-center p-2 border-top flex-wrap",children:[(0,i.jsx)(ek.Q,{"aria-label":U,onClick:M?()=>{y&&(R({threadId:y.id},{onError:()=>C("Failed to unresolve thread"),onSuccess:()=>{S(!1),j.removeItem(`reviewThreadIsCollapsed_${y.id}`)}}),E("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON"))}:()=>{y&&(v({threadId:y.id},{onError:()=>C("Failed to resolve thread"),onSuccess:()=>{S(!0),j.removeItem(`reviewThreadIsCollapsed_${s}`)}}),E("comments.resolve_thread","RESOLVE_CONVERSATION_BUTTON"))},className:"mr-2",children:w?"Unresolve comment":"Resolve comment"}),M&&y.resolvedBy&&(0,i.jsxs)("span",{className:"fgColor-muted f6",children:[(0,i.jsx)("b",{children:y.resolvedBy})," marked this comment as resolved"]})]}),P&&(0,i.jsx)(n$,{automatedComment:O,thread:y,filePath:t,lineMarkersKey:o,setErrorMessage:C,setIsCollapsed:S,safeLocalStorage:j})]})]})]})})};function nH(e){return e.state?.toUpperCase()!=="PENDING"}function nK(e){return!e}try{nB.displayName||(nB.displayName="Emphasis")}catch{}try{nV.displayName||(nV.displayName="ThreadBanner")}catch{}try{nU.displayName||(nU.displayName="SingleLineThreadBanner")}catch{}try{nq.displayName||(nq.displayName="MultineLineThreadBanner")}catch{}try{nG.displayName||(nG.displayName="InlineReviewThread")}catch{}let nW=(0,a.GV)()?function(e,t,n){let i,a=(0,s.c)(5),{enableDialogMode:r}=z();return a[0]!==t||a[1]!==n||a[2]!==r||a[3]!==e?(i=(i,a)=>{t.current?.classList.contains("diff-text-cell")&&(r(e),n("USER_EXPANDED_MARKERS"),(void 0===i?{shouldFocusFirstMarker:!0}:i).shouldFocusFirstMarker?setTimeout(()=>{t.current?.querySelector('[data-first-marker="true"]')?.focus()},0):a&&setTimeout(()=>{t.current?.querySelector(`[data-marker-id="${a}"]`)?.focus()},0))},a[0]=t,a[1]=n,a[2]=r,a[3]=e,a[4]=i):i=a[4],i}:function(e,t,n){let{enableDialogMode:i}=z();return(0,l.useCallback)((a={shouldFocusFirstMarker:!0},s)=>{t.current?.classList.contains("diff-text-cell")&&(i(e),n("USER_EXPANDED_MARKERS"),a.shouldFocusFirstMarker?setTimeout(()=>{t.current?.querySelector('[data-first-marker="true"]')?.focus()},0):s&&setTimeout(()=>{t.current?.querySelector(`[data-marker-id="${s}"]`)?.focus()},0))},[t,i,e,n])},nz={[t3.UZ.Failure]:0,[t3.UZ.Warning]:1,[t3.UZ.Notice]:2},nQ=(0,a.GV)()?function(e){let t,n=(0,s.c)(2);return n[0]!==e?(t=(0,i.jsx)(tz.j,{children:(0,i.jsx)(nZ,{...e})}),n[0]=e,n[1]=t):t=n[1],t}:function(e){return(0,i.jsx)(tz.j,{children:(0,i.jsx)(nZ,{...e})})},nZ=(0,a.GV)()?function(e){let t,n,a,r,o,d,u,h,f,p,y,v,b,j,w,_,C,N,S,I,L,T,D,E,R,A,O,P,F,M,$,B,V,U,q,G=(0,s.c)(104);if(G[0]!==e){let{annotations:i,backgroundColor:s,cellRef:l,dispatchMarkersStatus:c,children:m,conversationListThreads:g,inlineMarkersRef:x,isMarkerListOpen:I,isRowSelected:k,lineMarkersKey:L,fileAnchor:T,filePath:D,gridCellId:E,gutterSizeOffset:R,lineType:A,onCloseConversationList:O,onCloseFocusMode:P,onDeleteLineComment:F,returnFocusRef:M,threadsConnectionId:$,suggestedChangesConfig:B,manuallyUpdateCommentsWithThisThreadId:V,ghostUser:U,...q}=e;t=i,n=s,a=l,d=c,r=m,o=g,v=x,b=L,u=T,h=D,p=E,y=R,w=P,_=F,S=$,N=B,j=V,f=U,C=q,G[0]=e,G[1]=t,G[2]=n,G[3]=a,G[4]=r,G[5]=o,G[6]=d,G[7]=u,G[8]=h,G[9]=f,G[10]=p,G[11]=y,G[12]=v,G[13]=b,G[14]=j,G[15]=w,G[16]=_,G[17]=C,G[18]=N,G[19]=S}else t=G[1],n=G[2],a=G[3],r=G[4],o=G[5],d=G[6],u=G[7],h=G[8],f=G[9],p=G[10],y=G[11],v=G[12],b=G[13],j=G[14],w=G[15],_=G[16],C=G[17],N=G[18],S=G[19];let H=W(p),{disableDialogMode:K,enableDialogMode:Q}=z(),Z=nW(p,a,d),J=(0,l.useRef)(null);G[20]!==t?(I=[...t].sort(n0),G[20]=t,G[21]=I):I=G[21];let Y=I;e:{let e;if(r){let e,t;G[22]===Symbol.for("react.memo_cache_sentinel")?(e={id:"new-comment"},G[22]=e):e=G[22],G[23]!==o||G[24]!==Y?(t=[...o,e,...Y],G[23]=o,G[24]=Y,G[25]=t):t=G[25],L=t;break e}G[26]!==o||G[27]!==Y?(e=[...o,...Y],G[26]=o,G[27]=Y,G[28]=e):e=G[28],L=e}let X=L,ee=nX;G[29]!==Q||G[30]!==p||G[31]!==H?(T=e=>{ee(e),H||Q(p)},G[29]=Q,G[30]=p,G[31]=H,G[32]=T):T=G[32];let et=T;G[33]!==K||G[34]!==H?(D=e=>{e.target&&H&&(e.target.closest("[data-inline-markers]")||K())},G[33]=K,G[34]=H,G[35]=D):D=G[35];let en=D;G[36]!==en?(E=()=>(g.XC?.addEventListener("mousedown",en),()=>g.XC?.removeEventListener("mousedown",en)),R=[en],G[36]=en,G[37]=E,G[38]=R):(E=G[37],R=G[38]),(0,l.useEffect)(E,R);let ei=(0,k.mF)();G[39]!==t||G[40]!==o||G[41]!==Z||G[42]!==ei?(A=()=>{if(ei){let e=o.map(nY),n=t.map(nJ);(e.includes(ei)||n.includes(ei))&&Z({shouldFocusFirstMarker:!1},ei)}},O=[ei,Z,o,t],G[39]=t,G[40]=o,G[41]=Z,G[42]=ei,G[43]=A,G[44]=O):(A=G[43],O=G[44]),(0,l.useEffect)(A,O);let ea=!H;G[45]!==X||G[46]!==ea?(P={containerRef:J,markers:X,disabled:ea},G[45]=X,G[46]=ea,G[47]=P):P=G[47],tZ(P);let es=H?na:"";G[48]!==es?(F=(0,x.$)("d-flex pt-1",es),G[48]=es,G[49]=F):F=G[49],G[50]!==n||G[51]!==y||G[52]!==H?(M=H?{marginRight:`-${y}`,backgroundColor:n}:{marginRight:`-${y}`},G[50]=n,G[51]=y,G[52]=H,G[53]=M):M=G[53];let er=H?"false":"true";if(G[54]!==o||G[55]!==u||G[56]!==h||G[57]!==f||G[58]!==p||G[59]!==H||G[60]!==b||G[61]!==j||G[62]!==X||G[63]!==_||G[64]!==C||G[65]!==N||G[66]!==S){let e;G[68]!==u||G[69]!==h||G[70]!==f||G[71]!==p||G[72]!==H||G[73]!==b||G[74]!==j||G[75]!==X||G[76]!==_||G[77]!==C||G[78]!==N||G[79]!==S?(e=(e,t)=>(0,i.jsx)("div",{className:(0,x.$)("mt-1 border rounded-2 color-border-default color-shadow-small",t===X.length-1?"mb-1":"mb-2"),"data-first-marker":0===t,"data-marker-id":`${e.id}`,tabIndex:H?0:-1,children:(0,i.jsx)(nG,{threadPositionNumber:t+1,manuallyUpdateCommentsWithThisThreadId:j,isFirstThread:0===t,filePath:h,lineMarkersKey:b,fileAnchor:u,gridCellId:p,onDeleteLineComment:_,threadId:e.id,threadsConnectionId:S,suggestedChangesConfig:N,ghostUser:f,...C})},`review-thread-${e.id}`),G[68]=u,G[69]=h,G[70]=f,G[71]=p,G[72]=H,G[73]=b,G[74]=j,G[75]=X,G[76]=_,G[77]=C,G[78]=N,G[79]=S,G[80]=e):e=G[80],$=o.map(e),G[54]=o,G[55]=u,G[56]=h,G[57]=f,G[58]=p,G[59]=H,G[60]=b,G[61]=j,G[62]=X,G[63]=_,G[64]=C,G[65]=N,G[66]=S,G[67]=$}else $=G[67];if(G[81]!==p||G[82]!==X||G[83]!==Y){let e;G[85]!==p||G[86]!==X?(e=(e,t)=>{let n=0===t&&e===X[0];return(0,i.jsx)(ne,{annotation:e,gridCellId:p,isFirstMarker:n},`annotation-${e.id}`)},G[85]=p,G[86]=X,G[87]=e):e=G[87],B=Y.map(e),G[81]=p,G[82]=X,G[83]=Y,G[84]=B}else B=G[84];return G[88]!==r||G[89]!==$||G[90]!==B?(V=(0,i.jsxs)("div",{className:nn,ref:J,children:[$,r,B]}),G[88]=r,G[89]=$,G[90]=B,G[91]=V):V=G[91],G[92]!==o.length||G[93]!==H||G[94]!==w?(U=H&&(0,i.jsx)(m.K,{icon:c.UndoIcon,className:(0,x.$)(nt,"ml-2 position-relative",0===o.length?"mt-2":"mt-1"),"aria-label":"Return to code","data-exit-dialog-mode-button":"true",variant:"default",size:"small",onMouseUp:w,onKeyDown:e=>{("Enter"===e.key||"Space"===e.code)&&w()}}),G[92]=o.length,G[93]=H,G[94]=w,G[95]=U):U=G[95],G[96]!==et||G[97]!==v||G[98]!==F||G[99]!==M||G[100]!==er||G[101]!==V||G[102]!==U?(q=(0,i.jsxs)("div",{className:F,style:M,"aria-hidden":er,onFocus:et,onClick:ee,onKeyUp:ee,onMouseDown:ee,onMouseUp:ee,"data-inline-markers":!0,ref:v,children:[V,U]}),G[96]=et,G[97]=v,G[98]=F,G[99]=M,G[100]=er,G[101]=V,G[102]=U,G[103]=q):q=G[103],q}:function({annotations:e,backgroundColor:t,cellRef:n,dispatchMarkersStatus:a,children:s,conversationListThreads:r,inlineMarkersRef:o,isMarkerListOpen:d,isRowSelected:u,lineMarkersKey:h,fileAnchor:f,filePath:p,gridCellId:y,gutterSizeOffset:v,lineType:b,onCloseConversationList:j,onCloseFocusMode:w,onDeleteLineComment:_,returnFocusRef:C,threadsConnectionId:N,suggestedChangesConfig:S,manuallyUpdateCommentsWithThisThreadId:I,ghostUser:L,...T}){let D=W(y),{disableDialogMode:E,enableDialogMode:R}=z(),A=nW(y,n,a),O=(0,l.useRef)(null),P=(0,l.useMemo)(()=>[...e].sort((e,t)=>nz[e.annotationLevel]-nz[t.annotationLevel]),[e]),F=(0,l.useMemo)(()=>s?[...r,{id:"new-comment"},...P]:[...r,...P],[s,r,P]),M=e=>e.stopPropagation(),$=(0,l.useCallback)(e=>{e.target&&D&&(e.target.closest("[data-inline-markers]")||E())},[E,D]);(0,l.useEffect)(()=>(g.XC?.addEventListener("mousedown",$),()=>g.XC?.removeEventListener("mousedown",$)),[$]);let B=(0,k.mF)();return(0,l.useEffect)(()=>{if(B){let t=r.map(e=>e.id),n=e.map(e=>e.id);(t.includes(B)||n.includes(B))&&A({shouldFocusFirstMarker:!1},B)}},[B,A,r,e]),tZ({containerRef:O,markers:F,disabled:!D}),(0,i.jsxs)("div",{className:(0,x.$)("d-flex pt-1",D?na:""),style:D?{marginRight:`-${v}`,backgroundColor:t}:{marginRight:`-${v}`},"aria-hidden":D?"false":"true",onFocus:e=>{M(e),D||R(y)},onClick:M,onKeyUp:M,onMouseDown:M,onMouseUp:M,"data-inline-markers":!0,ref:o,children:[(0,i.jsxs)("div",{className:nn,ref:O,children:[r.map((e,t)=>(0,i.jsx)("div",{className:(0,x.$)("mt-1 border rounded-2 color-border-default color-shadow-small",t===F.length-1?"mb-1":"mb-2"),"data-first-marker":0===t,"data-marker-id":`${e.id}`,tabIndex:D?0:-1,children:(0,i.jsx)(nG,{threadPositionNumber:t+1,manuallyUpdateCommentsWithThisThreadId:I,isFirstThread:0===t,filePath:p,lineMarkersKey:h,fileAnchor:f,gridCellId:y,onDeleteLineComment:_,threadId:e.id,threadsConnectionId:N,suggestedChangesConfig:S,ghostUser:L,...T})},`review-thread-${e.id}`)),s,P.map((e,t)=>{let n=0===t&&e===F[0];return(0,i.jsx)(ne,{annotation:e,gridCellId:y,isFirstMarker:n},`annotation-${e.id}`)})]}),D&&(0,i.jsx)(m.K,{icon:c.UndoIcon,className:(0,x.$)(nt,"ml-2 position-relative",0===r.length?"mt-2":"mt-1"),"aria-label":"Return to code","data-exit-dialog-mode-button":"true",variant:"default",size:"small",onMouseUp:w,onKeyDown:e=>{("Enter"===e.key||"Space"===e.code)&&w()}})]})};function nJ(e){return e.id}function nY(e){return e.id}function nX(e){return e.stopPropagation()}function n0(e,t){return nz[e.annotationLevel]-nz[t.annotationLevel]}try{nQ.displayName||(nQ.displayName="InlineMarkers")}catch{}try{nZ.displayName||(nZ.displayName="InlineMarkersInternal")}catch{}var n1=n(18799),n2=n(40260);async function n3({diffLine:e,diffLines:t,getSelectedDiffLines:n,getSelectedLineRange:i,isSplit:a,isLeftSide:s}){let r,l=window.getSelection();if(l&&""!==l.toString())return void document.execCommand("copy");let o=n().length<=1;switch(!0){case o:r=n5(e);break;case a:r=n6({diffLines:t,diffOrientation:s?"left":"right",getSelectedLineRange:i});break;default:r=n4({diffLines:t,getSelectedLineRange:i})}await (0,n2.D)(r)}let n4=({diffLines:e,getSelectedLineRange:t})=>{let n=t();if(!n)return"";let{startOrientation:i,endOrientation:a,startLineNumber:s,endLineNumber:r}=n,l=0,o=0;return e.length>1&&(l=e.findIndex(e=>"left"===i?e.left===s:e.right===s),o=e.findIndex(e=>"left"===a?e.left===r:e.right===r)),(0,R.Ls)(e.slice(l,o+1))},n5=e=>(0,R.Po)(e)||!e?"":(0,R.Ls)([e]),n6=({diffLines:e,diffOrientation:t,getSelectedLineRange:n})=>{if(void 0===t)return"";let i=n();if(!i)return"";let a=(0,R.Mk)(e),s=a.leftLines,r=a.rightLines,{selectedRightLines:l,selectedLeftLines:o}=(0,E.A)({selectedLineRange:i,leftLines:s,rightLines:r});return"left"===t?(0,R.Ls)(o):(0,R.Ls)(l)},n7=(0,l.createContext)(null),n8=(0,a.GV)()?function(e){let t,n,a,r,o,d,c=(0,s.c)(14),{children:u}=e,[m,h]=(0,l.useState)(!1),[f,p]=(0,l.useState)(),[g,y]=(0,l.useState)(),[x,v]=(0,l.useState)(),[b,j]=(0,l.useState)(),w=!!f||!!g||!!x||!!b;c[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{h(!0)},c[0]=t):t=c[0];let _=t;c[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{h(!1)},c[1]=n):n=c[1];let C=n;c[2]===Symbol.for("react.memo_cache_sentinel")?(a=(e,t,n)=>{switch(e){case"context-menu":p(t),j(void 0),v(void 0),y(void 0);break;case"new-conversation":j({cellId:t,withSuggestedChange:n?.withSuggestedChange}),p(void 0),v(void 0),y(void 0);break;case"marker-details":v(t),p(void 0),y(void 0),j(void 0);break;case"marker-list":y(t),p(void 0),j(void 0),v(void 0)}},c[2]=a):a=c[2];let N=a;c[3]===Symbol.for("react.memo_cache_sentinel")?(r=e=>{switch(e){case"context-menu":p(void 0);break;case"new-conversation":j(void 0);break;case"marker-details":v(void 0);break;case"marker-list":y(void 0)}},c[3]=r):r=c[3];let S=r;c[4]!==w||c[5]!==m||c[6]!==f||c[7]!==x||c[8]!==g||c[9]!==b?(o={isActionBarVisible:m,showActionBar:_,hideActionBar:C,closeDialog:S,openDialog:N,anyMenuOpen:w,openContextMenuCell:f,openMarkersListCell:g,openMarkerDetailsCell:x,openNewConversationCell:b},c[4]=w,c[5]=m,c[6]=f,c[7]=x,c[8]=g,c[9]=b,c[10]=o):o=c[10];let I=o;return c[11]!==u||c[12]!==I?(d=(0,i.jsx)(n7.Provider,{value:I,children:u}),c[11]=u,c[12]=I,c[13]=d):d=c[13],d}:function({children:e}){let[t,n]=(0,l.useState)(!1),[a,s]=(0,l.useState)(),[r,o]=(0,l.useState)(),[d,c]=(0,l.useState)(),[u,m]=(0,l.useState)(),h=(0,l.useMemo)(()=>!!a||!!r||!!d||!!u,[a,d,r,u]),f=(0,l.useCallback)(()=>{n(!0)},[]),p=(0,l.useCallback)(()=>{n(!1)},[]),g=(0,l.useCallback)((e,t,n)=>{switch(e){case"context-menu":s(t),m(void 0),c(void 0),o(void 0);break;case"new-conversation":m({cellId:t,withSuggestedChange:n?.withSuggestedChange}),s(void 0),c(void 0),o(void 0);break;case"marker-details":c(t),s(void 0),o(void 0),m(void 0);break;case"marker-list":o(t),s(void 0),m(void 0),c(void 0)}},[]),y=(0,l.useCallback)(e=>{switch(e){case"context-menu":s(void 0);break;case"new-conversation":m(void 0);break;case"marker-details":c(void 0);break;case"marker-list":o(void 0)}},[]),x=(0,l.useMemo)(()=>({isActionBarVisible:t,showActionBar:f,hideActionBar:p,closeDialog:y,openDialog:g,anyMenuOpen:h,openContextMenuCell:a,openMarkersListCell:r,openMarkerDetailsCell:d,openNewConversationCell:u}),[t,f,p,y,g,h,a,r,d,u]);return(0,i.jsx)(n7.Provider,{value:x,children:e})},n9=(0,a.GV)()?function(){let e=(0,l.useContext)(n7);if(!e)throw Error("useMarkersDialogContext must be used within a MarkersDialogContextProvider");return e}:function(){let e=(0,l.useContext)(n7);if(!e)throw Error("useMarkersDialogContext must be used within a MarkersDialogContextProvider");return e};try{n7.displayName||(n7.displayName="MarkersDialogContext")}catch{}try{n8.displayName||(n8.displayName="MarkersDialogContextProvider")}catch{}let ie=(0,a.GV)()?function(e){let t,n,i,a,r,o,d,c=(0,s.c)(27),{cellId:u,actionBarRef:m}=e,[h,f]=(0,l.useState)(m),{openDialog:p,closeDialog:g,openContextMenuCell:y,anyMenuOpen:x}=n9(),v=y===u;c[0]!==u||c[1]!==p?(t=()=>{p("context-menu",u)},c[0]=u,c[1]=p,c[2]=t):t=c[2];let b=t;c[3]!==m||c[4]!==b?(n=()=>{f(m),b()},c[3]=m,c[4]=b,c[5]=n):n=c[5];let j=n;c[6]!==g?(i=()=>{g("context-menu")},c[6]=g,c[7]=i):i=c[7];let w=i;c[8]!==w||c[9]!==v||c[10]!==b?(a=()=>{v?w():b()},c[8]=w,c[9]=v,c[10]=b,c[11]=a):a=c[11];let _=a;c[12]!==m||c[13]!==_?(r=()=>{f(m),_()},c[12]=m,c[13]=_,c[14]=r):r=c[14];let C=r;c[15]!==g?(o=()=>{g("marker-list")},c[15]=g,c[16]=o):o=c[16];let N=o;return c[17]!==x||c[18]!==w||c[19]!==N||c[20]!==v||c[21]!==b||c[22]!==j||c[23]!==h||c[24]!==_||c[25]!==C?(d={isContextMenuOpen:v,openContextMenu:b,openContextMenuFromActionBar:j,closeContextMenu:w,toggleContextMenu:_,toggleContextMenuFromActionBar:C,closeMarkerListDialog:N,returnFocusRef:h,anyMenuOpen:x},c[17]=x,c[18]=w,c[19]=N,c[20]=v,c[21]=b,c[22]=j,c[23]=h,c[24]=_,c[25]=C,c[26]=d):d=c[26],d}:function({cellId:e,actionBarRef:t}){let[n,i]=(0,l.useState)(t),{openDialog:a,closeDialog:s,openContextMenuCell:r,anyMenuOpen:o}=n9(),d=(0,l.useMemo)(()=>r===e,[e,r]),c=(0,l.useCallback)(()=>{a("context-menu",e)},[e,a]),u=(0,l.useCallback)(()=>{i(t),c()},[t,c]),m=(0,l.useCallback)(()=>{s("context-menu")},[s]),h=(0,l.useCallback)(()=>{d?m():c()},[m,d,c]),f=(0,l.useCallback)(()=>{i(t),h()},[t,h]);return{isContextMenuOpen:d,openContextMenu:c,openContextMenuFromActionBar:u,closeContextMenu:m,toggleContextMenu:h,toggleContextMenuFromActionBar:f,closeMarkerListDialog:(0,l.useCallback)(()=>{s("marker-list")},[s]),returnFocusRef:n,anyMenuOpen:o}},it=(0,a.GV)()?function(e){let t,n,i,a,r,l=(0,s.c)(17),{cellId:o,onOpenDialog:d}=e,{openDialog:c,closeDialog:u,openNewConversationCell:m}=n9(),{sendAnalyticsEvent:h}=(0,tK.s)(),f=m?.cellId===o;l[0]!==o||l[1]!==d||l[2]!==c?(t=e=>{d?.(),c("new-conversation",o,e)},l[0]=o,l[1]=d,l[2]=c,l[3]=t):t=l[3];let p=t;l[4]!==p?(n=()=>{p()},l[4]=p,l[5]=n):n=l[5];let g=n;l[6]!==p||l[7]!==h?(i=()=>{p({withSuggestedChange:!0}),h("diff.start_new_conversation_with_suggested_change","CELL_CONTEXT_MENU")},l[6]=p,l[7]=h,l[8]=i):i=l[8];let y=i;l[9]!==u?(a=()=>{u("new-conversation")},l[9]=u,l[10]=a):a=l[10];let x=a,v=m?.withSuggestedChange;return l[11]!==x||l[12]!==f||l[13]!==v||l[14]!==g||l[15]!==y?(r={isNewConversationDialogOpen:f,startNewConversation:g,startNewConversationWithSuggestedChange:y,closeNewConversation:x,shouldStartNewConversationWithSuggestedChange:v},l[11]=x,l[12]=f,l[13]=v,l[14]=g,l[15]=y,l[16]=r):r=l[16],r}:function({cellId:e,onOpenDialog:t}){let{openDialog:n,closeDialog:i,openNewConversationCell:a}=n9(),{sendAnalyticsEvent:s}=(0,tK.s)(),r=(0,l.useMemo)(()=>a?.cellId===e,[e,a]),o=(0,l.useCallback)(i=>{t?.(),n("new-conversation",e,i)},[e,t,n]),d=(0,l.useCallback)(()=>{o()},[o]),c=(0,l.useCallback)(()=>{o({withSuggestedChange:!0}),s("diff.start_new_conversation_with_suggested_change","CELL_CONTEXT_MENU")},[o,s]);return{isNewConversationDialogOpen:r,startNewConversation:d,startNewConversationWithSuggestedChange:c,closeNewConversation:(0,l.useCallback)(()=>{i("new-conversation")},[i]),shouldStartNewConversationWithSuggestedChange:(0,l.useMemo)(()=>a?.withSuggestedChange,[a])}},ii=(0,a.GV)()?function(e){let t,n,i,a,r,o,d,c,u=(0,s.c)(29),{cellRef:m}=e,{showActionBar:h,hideActionBar:f,anyMenuOpen:p}=n9(),[g,y]=(0,l.useState)(!1);u[0]!==h?(t=()=>{h()},u[0]=h,u[1]=t):t=u[1];let x=t;u[2]!==p||u[3]!==m||u[4]!==f?(n=e=>{p||m.current&&m.current.contains(e.relatedTarget)||f()},u[2]=p,u[3]=m,u[4]=f,u[5]=n):n=u[5];let v=n;u[6]!==h?(i=()=>{h()},u[6]=h,u[7]=i):i=u[7];let b=i;u[8]!==p||u[9]!==m||u[10]!==f?(a=()=>{p||m.current===document.activeElement||m.current?.contains(document.activeElement)&&document.activeElement?.getAttribute("data-add-comment-button")!=="true"||f()},u[8]=p,u[9]=m,u[10]=f,u[11]=a):a=u[11];let j=a;u[12]!==p||u[13]!==m||u[14]!==f?(r=e=>{m.current&&(p||(m.current.contains(e.relatedTarget)?m.current===e.relatedTarget&&y(!1):(f(),y(!1))))},u[12]=p,u[13]=m,u[14]=f,u[15]=r):r=u[15];let w=r;u[16]!==p?(o=e=>{p||(e.stopPropagation(),y(!0))},u[16]=p,u[17]=o):o=u[17];let _=o;u[18]!==p?(d=e=>{!p&&tU(e.key)&&e.stopPropagation()},u[18]=p,u[19]=d):d=u[19];let C=d;return u[20]!==w||u[21]!==_||u[22]!==C||u[23]!==v||u[24]!==x||u[25]!==b||u[26]!==j||u[27]!==g?(c={isActionBarFocused:g,handleCellBlur:v,handleCellFocus:x,handleCellMouseEnter:b,handleCellMouseLeave:j,handleActionBarBlur:w,handleActionBarFocusCapture:_,handleActionBarKeydownCapture:C},u[20]=w,u[21]=_,u[22]=C,u[23]=v,u[24]=x,u[25]=b,u[26]=j,u[27]=g,u[28]=c):c=u[28],c}:function({cellRef:e}){let{showActionBar:t,hideActionBar:n,anyMenuOpen:i}=n9(),[a,s]=(0,l.useState)(!1),r=(0,l.useCallback)(()=>{t()},[t]),o=(0,l.useCallback)(t=>{i||e.current&&e.current.contains(t.relatedTarget)||n()},[i,e,n]),d=(0,l.useCallback)(()=>{t()},[t]),c=(0,l.useCallback)(()=>{i||e.current===document.activeElement||e.current?.contains(document.activeElement)&&document.activeElement?.getAttribute("data-add-comment-button")!=="true"||n()},[i,e,n]),u=(0,l.useCallback)(t=>{e.current&&(i||(e.current.contains(t.relatedTarget)?e.current===t.relatedTarget&&s(!1):(n(),s(!1))))},[i,e,n]);return{isActionBarFocused:a,handleCellBlur:o,handleCellFocus:r,handleCellMouseEnter:d,handleCellMouseLeave:c,handleActionBarBlur:u,handleActionBarFocusCapture:(0,l.useCallback)(e=>{i||(e.stopPropagation(),s(!0))},[i]),handleActionBarKeydownCapture:(0,l.useCallback)(e=>{!i&&tU(e.key)&&e.stopPropagation()},[i])}};var ia=n(50899),is=n(54571);let ir=(0,a.GV)()?function(e,t){let n,i,a,r,l,o=(0,s.c)(17),{sendAnalyticsEvent:d}=(0,tK.s)(),c=B(),u=(0,k.ww)(),m=G();o[0]===Symbol.for("react.memo_cache_sentinel")?(n=[],o[0]=n):n=o[0];let[h]=(0,is.I)(io,!0,n);o[1]!==c||o[2]!==e?(i=function(t){if(!t)return"DELETION"!==e.type;let n=c(t)?.selectedLeftLines;return n?!!n?.every(il):"right"===t.startOrientation&&"right"===t.endOrientation||(t.startLineNumber===t.endLineNumber&&t.startOrientation===t.endOrientation?"DELETION"!==e.type:void 0)},o[1]=c,o[2]=e,o[3]=i):i=o[3];let f=i;o[4]!==c||o[5]!==h||o[6]!==e?(a=function(t){let n=t?c(t)?.selectedRightLines:[];if(t&&n&&n.length>1)return h?"":(0,R.Ls)(n);if(!e)return"";let[i]=(0,R.dv)(e.text,e.type);return i},o[4]=c,o[5]=h,o[6]=e,o[7]=a):a=o[7];let p=a;o[8]!==p||o[9]!==u||o[10]!==d||o[11]!==f?(r=function(e,t){let n=!!(f(e)&&!u);return{isValidSuggestionRange:n,showSuggestChangesButton:n,sourceContentFromDiffLines:n?p(e):void 0,onInsertSuggestedChange:()=>{d("diff.add_suggested_change","ADD_SUGGESTED_CHANGE_BUTTON")},shouldInsertSuggestedChange:t}},o[8]=p,o[9]=u,o[10]=d,o[11]=f,o[12]=r):r=o[12];let g=(0,ia.K)(r);return o[13]!==g||o[14]!==m||o[15]!==t?(l={getSelectedLineRange:m,configureSuggestedChangesFromLineRange:g,shouldStartNewConversationWithSuggestedChange:t},o[13]=g,o[14]=m,o[15]=t,o[16]=l):l=o[16],l}:function(e,t){let{sendAnalyticsEvent:n}=(0,tK.s)(),i=B(),a=(0,k.ww)(),s=G(),[r]=(0,is.I)(()=>!1,!0,[]),o=(0,ia.K)(function(t,s){let l=!!(function(t){if(!t)return"DELETION"!==e.type;let n=i(t)?.selectedLeftLines;return n?!!n?.every(e=>"empty-diff-line"!==e&&"DELETION"!==e.type):"right"===t.startOrientation&&"right"===t.endOrientation||(t.startLineNumber===t.endLineNumber&&t.startOrientation===t.endOrientation?"DELETION"!==e.type:void 0)}(t)&&!a);return{isValidSuggestionRange:l,showSuggestChangesButton:l,sourceContentFromDiffLines:l?function(t){let n=t?i(t)?.selectedRightLines:[];if(t&&n&&n.length>1)return r?"":(0,R.Ls)(n);if(!e)return"";let[a]=(0,R.dv)(e.text,e.type);return a}(t):void 0,onInsertSuggestedChange:()=>{n("diff.add_suggested_change","ADD_SUGGESTED_CHANGE_BUTTON")},shouldInsertSuggestedChange:s}});return(0,l.useMemo)(()=>({getSelectedLineRange:s,configureSuggestedChangesFromLineRange:o,shouldStartNewConversationWithSuggestedChange:t}),[o,s,t])};function il(e){return"empty-diff-line"!==e&&"DELETION"!==e.type}function io(){return!1}var id=n(21513),ic=n(73783),iu=n(24494),im=n(79036);let ih={compact:{avatarSize:18},relaxed:{avatarSize:20}};function ip({shouldAnimateRef:e,lineSpacingPreference:t="relaxed",threads:n,annotations:a}){(0,l.useEffect)(()=>{e?.current&&(e.current=!1)},[e]);let{avatarSize:s}=ih[t],r=n.length+a.length;if(0===r)return null;let o={},c=[];a.map(e=>{e?.annotationLevel&&c.push({id:e.id,level:e.annotationLevel})}),n.map(e=>e?.commentsData?.comments?.map(e=>{e?.author?o[e?.author.login]=e.author:tB?.login&&(o[tB.login]=tB)}));let u=[...c.sort((e,t)=>(im.GF[e.level]?.priority||0)<(im.GF[t.level]?.priority||0)?-1:1).map(t=>e?.current?(0,i.jsx)(im.S,{annotationLevel:t.level},t.id):(0,i.jsx)(im.Xh,{annotationLevel:t.level},t.id)),...Object.keys(o).map(e=>{let t=o[e]?.login,n=o[e]?.avatarUrl??(tB?.avatarUrl||" ");return(0,i.jsx)(d.r,{alt:t,size:20,src:n},t)})].slice(0,3),m=r>9?"9+":`${r}`;return(0,i.jsxs)("div",{className:(0,x.$)("d-flex","flex-justify-between","flex-items-center","CommentIndicator-module__commentIndicatorContainer--GS12p"),children:[(0,i.jsx)(iu.A,{disableExpand:!0,size:s,className:(0,x.$)("CommentIndicator-module__AvatarStack--LfU8D","relaxed"===t?"CommentIndicator-module__Relaxed--oSXaK":"CommentIndicator-module__Compact--Q1u86"),children:u}),(0,i.jsx)("span",{className:(0,x.$)("fgColor-default","ml-1","CommentIndicator-module__textStyles--ZLD5t"),children:m})]})}try{ip.displayName||(ip.displayName="CommentIndicator")}catch{}var ig=n(89141);let iy=(0,a.GV)()?function(e){let t,n,i,a,r=(0,s.c)(18),{currentHunk:l,nextHunk:o,previousHunk:d}=e,{addInjectedContextLines:c}=ee(),u=!!l&&0!==l.startBlobLineNumber,m=!!l&&!!o;r[0]!==c||r[1]!==u||r[2]!==l||r[3]!==d?(t=()=>{if(!u||!l)return;let e=d&&l&&d.endBlobLineNumber+20>l.startBlobLineNumber,t={start:Math.max(0,l.startBlobLineNumber-20),end:l.startBlobLineNumber};e&&(t.start=d.endBlobLineNumber+1),c(t)},r[0]=c,r[1]=u,r[2]=l,r[3]=d,r[4]=t):t=r[4];let h=t;r[5]!==c||r[6]!==m||r[7]!==l?(n=()=>{m&&l&&c({start:l.endBlobLineNumber+1,end:l.endBlobLineNumber+1+20})},r[5]=c,r[6]=m,r[7]=l,r[8]=n):n=r[8];let f=n;r[9]!==c||r[10]!==d?(i=()=>{d&&c({start:d.endBlobLineNumber+1,end:d.endBlobLineNumber+1+20})},r[9]=c,r[10]=d,r[11]=i):i=r[11];let p=i;return r[12]!==m||r[13]!==u||r[14]!==f||r[15]!==p||r[16]!==h?(a={expandStartOfHunk:h,expandEndOfHunk:f,expandEndOfPreviousHunk:p,canExpandEndOfHunk:m,canExpandStartOfHunk:u},r[12]=m,r[13]=u,r[14]=f,r[15]=p,r[16]=h,r[17]=a):a=r[17],a}:function({currentHunk:e,nextHunk:t,previousHunk:n}){let{addInjectedContextLines:i}=ee(),a=!!e&&0!==e.startBlobLineNumber,s=!!e&&!!t;return{expandStartOfHunk:()=>{if(!a||!e)return;let t=n&&e&&n.endBlobLineNumber+20>e.startBlobLineNumber,s={start:Math.max(0,e.startBlobLineNumber-20),end:e.startBlobLineNumber};t&&(s.start=n.endBlobLineNumber+1),i(s)},expandEndOfHunk:()=>{s&&e&&i({start:e.endBlobLineNumber+1,end:e.endBlobLineNumber+1+20})},expandEndOfPreviousHunk:()=>{n&&i({start:n.endBlobLineNumber+1,end:n.endBlobLineNumber+1+20})},canExpandEndOfHunk:s,canExpandStartOfHunk:a}};var ix=n(29255);let iv={left:"L",right:"R"},ib="Add comment",ij="Suggest change";function iw(e,t,n){let i=n&&!(0,R.Ji)(t)?iv.left:iv.right;return`${e} on line ${i}${t.blobLineNumber}`}function i_(e,t,n,i,a){return e.right===t.right?n||i&&a?` on line R${e.right}`:`, modified line R${t.right}`:n||i&&a?` on lines R${e.right}-R${t.right}`:`, modified lines R${e.right}-R${t.right}`}function iC(e,t,n){return e.left===t.left?n?` on line L${e.left}`:`, original line L${e.left}`:n?` on lines L${e.left}-L${t.right}`:`, original lines L${e.left}-L${t.left}`}let iN=(0,a.GV)()?function(e){let t,n,a,r,l,o,d,u,m,h,f,p,g,y,x,v,b,j,w,_,C,N=(0,s.c)(72),{diffLine:S,handleStartConversationWithSuggestedChange:I,handleStartConversation:k,isLeftSide:L,isSplit:T}=e,{selectMultipleLines:D}=X(),E=V(),O=G();N[0]!==O?(t=O(),N[0]=O,N[1]=t):t=N[1];let P=t;N[2]!==E?(n=(0,R.Mk)(E()),N[2]=E,N[3]=n):n=N[3];let F=n;N[4]!==F.leftLines?(a=F.leftLines.find(iO),N[4]=F.leftLines,N[5]=a):a=N[5];let M=a;N[6]!==F.leftLines?(r=F.leftLines.filter(iA),N[6]=F.leftLines,N[7]=r):r=N[7];let $=r,B=$[$.length-1];N[8]!==F.leftLines?(l=F.leftLines.filter(iR).every(iE),N[8]=F.leftLines,N[9]=l):l=N[9];let U=l;N[10]!==F.rightLines?(o=F.rightLines.find(iD),N[10]=F.rightLines,N[11]=o):o=N[11];let q=o;N[12]!==F.rightLines?(d=F.rightLines.filter(iT),N[12]=F.rightLines,N[13]=d):d=N[13];let H=d,K=H[H.length-1];N[14]!==F.rightLines?(u=F.rightLines.filter(iL),N[14]=F.rightLines,N[15]=u):u=N[15];let W=0===u.length;N[16]!==F.leftLines?(m=F.leftLines.filter(ik),N[16]=F.leftLines,N[17]=m):m=N[17];let z=0===m.length;e:{if(F.leftLines.find(iI)||F.rightLines.find(iS)){h=!1;break e}h=!0}let Q=h;N[18]!==M||N[19]!==k||N[20]!==I||N[21]!==B||N[22]!==D||N[23]!==P?(f=(e,t)=>{!(!P||!B||!M||(0,R.Po)(B)||(0,R.Po)(M))&&M.left&&B.left&&(D({endLineKey:(0,A.bo)(B),endOrientation:"left",startLineKey:(0,A.bo)(M),startOrientation:"left",firstLineSelectionOnDrag:{lineKey:(0,A.bo)(M),lineNumber:M.left,orientation:"left",shouldStartConversation:!1}},ew),t?.withSuggestedChange?I():k())},N[18]=M,N[19]=k,N[20]=I,N[21]=B,N[22]=D,N[23]=P,N[24]=f):f=N[24];let Z=f;N[25]!==q||N[26]!==k||N[27]!==I||N[28]!==K||N[29]!==D||N[30]!==P?(p=(e,t)=>{!(!P||!K||!q||(0,R.Po)(K)||(0,R.Po)(q))&&q.right&&K.right&&(D({endLineKey:(0,A.bo)(K),endOrientation:"right",startLineKey:(0,A.bo)(q),startOrientation:"right",firstLineSelectionOnDrag:{lineKey:(0,A.bo)(q),lineNumber:q.right,orientation:"right",shouldStartConversation:!1}},ew),t?.withSuggestedChange?I():k())},N[25]=q,N[26]=k,N[27]=I,N[28]=K,N[29]=D,N[30]=P,N[31]=p):p=N[31];let J=p,Y="DELETION"!==S.type;t:{if(!P){g=!1;break t}if(P.startOrientation!==P.endOrientation||P.startLineNumber!==P.endLineNumber){g=!0;break t}g=!1}let ee=g,et=!1,en=!1;if(P&&ee){let e,t=iv[P.startOrientation],n=iv[P.endOrientation];if(v=` on lines ${t}${P.startLineNumber}-${n}${P.endLineNumber}`,!(0,R.Po)(M)&&!(0,R.Po)(B)&&M&&B){let e;et=!0,N[32]!==M||N[33]!==B||N[34]!==W?(e=iC(M,B,W),N[32]=M,N[33]=B,N[34]=W,N[35]=e):e=N[35],y=e}if(!(0,R.Po)(q)&&!(0,R.Po)(K)&&q&&K){let e;en=!0,N[36]!==Q||N[37]!==q||N[38]!==T||N[39]!==K||N[40]!==z?(e=i_(q,K,z,T,Q),N[36]=Q,N[37]=q,N[38]=T,N[39]=K,N[40]=z,N[41]=e):e=N[41],x=e}return N[42]!==Q||N[43]!==U||N[44]!==Y||N[45]!==k||N[46]!==I||N[47]!==J||N[48]!==Z||N[49]!==T||N[50]!==W||N[51]!==x||N[52]!==y||N[53]!==en||N[54]!==et||N[55]!==v?(e=(0,i.jsx)(i.Fragment,{children:T?(0,i.jsx)(i.Fragment,{children:Q?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eO.l.Item,{onSelect:J,children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.PlusIcon,{})}),ib+x,(0,i.jsx)(eO.l.TrailingVisual,{children:(0,i.jsx)(ix.U,{keys:"Alt+n"})})]}),(0,i.jsxs)(eO.l.Item,{onSelect:e=>J(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.PlusCircleIcon,{})}),ij+x]})]}):(0,i.jsxs)(i.Fragment,{children:[et?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eO.l.Item,{onSelect:Z,children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.PlusIcon,{})}),ib+y,(0,i.jsx)(eO.l.TrailingVisual,{children:(0,i.jsx)(ix.U,{keys:W?"Alt+n":"Alt+Shift+N"})})]}),U&&(0,i.jsxs)(eO.l.Item,{onSelect:e=>Z(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.PlusCircleIcon,{})}),ij+y]})]}):null,en?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eO.l.Item,{onSelect:J,children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.PlusIcon,{})}),ib+x,(0,i.jsx)(eO.l.TrailingVisual,{children:(0,i.jsx)(ix.U,{keys:"Alt+n"})})]}),(0,i.jsxs)(eO.l.Item,{onSelect:e=>J(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.PlusCircleIcon,{})}),ij+x]})]}):null]})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eO.l.Item,{onSelect:k,children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.PlusIcon,{})}),ib+v]}),Y&&U&&(0,i.jsxs)(eO.l.Item,{onSelect:I,children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.PlusCircleIcon,{})}),ij+v]})]})}),N[42]=Q,N[43]=U,N[44]=Y,N[45]=k,N[46]=I,N[47]=J,N[48]=Z,N[49]=T,N[50]=W,N[51]=x,N[52]=y,N[53]=en,N[54]=et,N[55]=v,N[56]=e):e=N[56],e}return N[57]===Symbol.for("react.memo_cache_sentinel")?(b=(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.PlusIcon,{})}),N[57]=b):b=N[57],N[58]!==L||N[59]!==S?(j=iw(ib,S,L),N[58]=L,N[59]=S,N[60]=j):j=N[60],N[61]!==k||N[62]!==j?(w=(0,i.jsxs)(eO.l.Item,{onSelect:k,children:[b,j]}),N[61]=k,N[62]=j,N[63]=w):w=N[63],N[64]!==Y||N[65]!==I||N[66]!==L||N[67]!==S?(_=Y&&(0,i.jsxs)(eO.l.Item,{onSelect:I,children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.PlusCircleIcon,{})}),iw(ij,S,L)]}),N[64]=Y,N[65]=I,N[66]=L,N[67]=S,N[68]=_):_=N[68],N[69]!==w||N[70]!==_?(C=(0,i.jsxs)(i.Fragment,{children:[w,_]}),N[69]=w,N[70]=_,N[71]=C):C=N[71],C}:function({diffLine:e,handleStartConversationWithSuggestedChange:t,handleStartConversation:n,isLeftSide:a,isSplit:s}){let r,o,d,{selectMultipleLines:u}=X(),m=V(),h=G()(),f=(0,l.useMemo)(()=>(0,R.Mk)(m()),[m]),p=(0,l.useMemo)(()=>f.leftLines.find(e=>!(0,R.Po)(e)),[f.leftLines]),g=(0,l.useMemo)(()=>{let e=f.leftLines.filter(e=>!(0,R.Po)(e));return e[e.length-1]},[f.leftLines]),y=(0,l.useMemo)(()=>f.leftLines.filter(e=>!(0,R.Po)(e)).every(e=>"DELETION"!==e.type),[f.leftLines]),x=(0,l.useMemo)(()=>f.rightLines.find(e=>!(0,R.Po)(e)),[f.rightLines]),v=(0,l.useMemo)(()=>{let e=f.rightLines.filter(e=>!(0,R.Po)(e));return e[e.length-1]},[f.rightLines]),b=(0,l.useMemo)(()=>0===f.rightLines.filter(e=>!(0,R.Po)(e)).length,[f.rightLines]),j=(0,l.useMemo)(()=>0===f.leftLines.filter(e=>!(0,R.Po)(e)).length,[f.leftLines]),w=(0,l.useMemo)(()=>!(f.leftLines.find(e=>!(0,R.Po)(e)&&!(0,R.Ji)(e)&&"INJECTED_CONTEXT"!==e.type)||f.rightLines.find(e=>!(0,R.Po)(e)&&!(0,R.Ji)(e)&&"INJECTED_CONTEXT"!==e.type)),[f.leftLines,f.rightLines]),_=(0,l.useCallback)((e,i)=>{!(!h||!g||!p||(0,R.Po)(g)||(0,R.Po)(p))&&p.left&&g.left&&(u({endLineKey:(0,A.bo)(g),endOrientation:"left",startLineKey:(0,A.bo)(p),startOrientation:"left",firstLineSelectionOnDrag:{lineKey:(0,A.bo)(p),lineNumber:p.left,orientation:"left",shouldStartConversation:!1}},ew),i?.withSuggestedChange?t():n())},[h,g,p,u,t,n]),C=(0,l.useCallback)((e,i)=>{!(!h||!v||!x||(0,R.Po)(v)||(0,R.Po)(x))&&x.right&&v.right&&(u({endLineKey:(0,A.bo)(v),endOrientation:"right",startLineKey:(0,A.bo)(x),startOrientation:"right",firstLineSelectionOnDrag:{lineKey:(0,A.bo)(x),lineNumber:x.right,orientation:"right",shouldStartConversation:!1}},ew),i?.withSuggestedChange?t():n())},[h,v,x,u,t,n]),N="DELETION"!==e.type,S=(0,l.useMemo)(()=>!!h&&(h.startOrientation!==h.endOrientation||h.startLineNumber!==h.endLineNumber),[h]),I=!1,k=!1;if(h&&S){let e=iv[h.startOrientation],a=iv[h.endOrientation];return d=` on lines ${e}${h.startLineNumber}-${a}${h.endLineNumber}`,!(0,R.Po)(p)&&!(0,R.Po)(g)&&p&&g&&(I=!0,r=iC(p,g,b)),!(0,R.Po)(x)&&!(0,R.Po)(v)&&x&&v&&(k=!0,o=i_(x,v,j,s,w)),(0,i.jsx)(i.Fragment,{children:s?(0,i.jsx)(i.Fragment,{children:w?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eO.l.Item,{onSelect:C,children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.PlusIcon,{})}),ib+o,(0,i.jsx)(eO.l.TrailingVisual,{children:(0,i.jsx)(ix.U,{keys:"Alt+n"})})]}),(0,i.jsxs)(eO.l.Item,{onSelect:e=>C(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.PlusCircleIcon,{})}),ij+o]})]}):(0,i.jsxs)(i.Fragment,{children:[I?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eO.l.Item,{onSelect:_,children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.PlusIcon,{})}),ib+r,(0,i.jsx)(eO.l.TrailingVisual,{children:(0,i.jsx)(ix.U,{keys:b?"Alt+n":"Alt+Shift+N"})})]}),y&&(0,i.jsxs)(eO.l.Item,{onSelect:e=>_(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.PlusCircleIcon,{})}),ij+r]})]}):null,k?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eO.l.Item,{onSelect:C,children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.PlusIcon,{})}),ib+o,(0,i.jsx)(eO.l.TrailingVisual,{children:(0,i.jsx)(ix.U,{keys:"Alt+n"})})]}),(0,i.jsxs)(eO.l.Item,{onSelect:e=>C(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.PlusCircleIcon,{})}),ij+o]})]}):null]})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eO.l.Item,{onSelect:n,children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.PlusIcon,{})}),ib+d]}),N&&y&&(0,i.jsxs)(eO.l.Item,{onSelect:t,children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.PlusCircleIcon,{})}),ij+d]})]})})}return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eO.l.Item,{onSelect:n,children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.PlusIcon,{})}),iw(ib,e,a)]}),N&&(0,i.jsxs)(eO.l.Item,{onSelect:t,children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.PlusCircleIcon,{})}),iw(ij,e,a)]})]})};function iS(e){return!(0,R.Po)(e)&&!(0,R.Ji)(e)&&"INJECTED_CONTEXT"!==e.type}function iI(e){return!(0,R.Po)(e)&&!(0,R.Ji)(e)&&"INJECTED_CONTEXT"!==e.type}function ik(e){return!(0,R.Po)(e)}function iL(e){return!(0,R.Po)(e)}function iT(e){return!(0,R.Po)(e)}function iD(e){return!(0,R.Po)(e)}function iE(e){return"DELETION"!==e.type}function iR(e){return!(0,R.Po)(e)}function iA(e){return!(0,R.Po)(e)}function iO(e){return!(0,R.Po)(e)}try{iN.displayName||(iN.displayName="StartConversationContextMenuItems")}catch{}var iP=n(66358);let iF=(0,a.GV)()?function(e){let t,n,a,r,l,o,d,c=(0,s.c)(28);return c[0]!==e?(t=(0,i.jsx)(iU,{...e}),c[0]=e,c[1]=t):t=c[1],c[2]!==e.copilotChatReference||c[3]!==e.diffAnchor||c[4]!==e.diffLine||c[5]!==e.isLeftSide||c[6]!==e.viewerData.shouldDisplayComments?(n=e.viewerData.shouldDisplayComments&&(0,i.jsx)(iB,{diffAnchor:e.diffAnchor,diffLine:e.diffLine,fileDiffReference:e.copilotChatReference,isLeftSide:e.isLeftSide}),c[2]=e.copilotChatReference,c[3]=e.diffAnchor,c[4]=e.diffLine,c[5]=e.isLeftSide,c[6]=e.viewerData.shouldDisplayComments,c[7]=n):n=c[7],c[8]!==e.handleCopyCode?(a=(0,i.jsx)(iW,{handleCopyCode:e.handleCopyCode}),c[8]=e.handleCopyCode,c[9]=a):a=c[9],c[10]!==e.diffAnchor?(r=(0,i.jsx)(iV,{diffAnchor:e.diffAnchor}),c[10]=e.diffAnchor,c[11]=r):r=c[11],c[12]!==e.diffAnchor||c[13]!==e.diffLine||c[14]!==e.viewerData.shouldDisplayComments?(l=e.viewerData.shouldDisplayComments&&(0,i.jsx)(iM,{diffAnchor:e.diffAnchor,diffLine:e.diffLine}),c[12]=e.diffAnchor,c[13]=e.diffLine,c[14]=e.viewerData.shouldDisplayComments,c[15]=l):l=c[15],c[16]!==e.currentHunk||c[17]!==e.diffAnchor||c[18]!==e.nextHunk||c[19]!==e.previousHunk?(o=(0,i.jsx)(iQ,{currentHunk:e.currentHunk,diffAnchor:e.diffAnchor,nextHunk:e.nextHunk,previousHunk:e.previousHunk}),c[16]=e.currentHunk,c[17]=e.diffAnchor,c[18]=e.nextHunk,c[19]=e.previousHunk,c[20]=o):o=c[20],c[21]!==t||c[22]!==n||c[23]!==a||c[24]!==r||c[25]!==l||c[26]!==o?(d=(0,i.jsxs)(i.Fragment,{children:[t,n,a,r,l,o]}),c[21]=t,c[22]=n,c[23]=a,c[24]=r,c[25]=l,c[26]=o,c[27]=d):d=c[27],d}:function(e){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(iU,{...e}),e.viewerData.shouldDisplayComments&&(0,i.jsx)(iB,{diffAnchor:e.diffAnchor,diffLine:e.diffLine,fileDiffReference:e.copilotChatReference,isLeftSide:e.isLeftSide}),(0,i.jsx)(iW,{handleCopyCode:e.handleCopyCode}),(0,i.jsx)(iV,{diffAnchor:e.diffAnchor}),e.viewerData.shouldDisplayComments&&(0,i.jsx)(iM,{diffAnchor:e.diffAnchor,diffLine:e.diffLine}),(0,i.jsx)(iQ,{currentHunk:e.currentHunk,diffAnchor:e.diffAnchor,nextHunk:e.nextHunk,previousHunk:e.previousHunk})]})},iM=(0,a.GV)()?function(e){let t,n,a,r,l=(0,s.c)(8),{diffLine:o,diffAnchor:d}=e,u=G();l[0]!==d||l[1]!==u||l[2]!==o?(t=()=>{let e=u(),t=(0,R.j2)({line:o,range:e,fileAnchor:d});t&&(0,n2.D)(t)},l[0]=d,l[1]=u,l[2]=o,l[3]=t):t=l[3];let m=t;return l[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.LinkIcon,{})}),l[4]=n):n=l[4],l[5]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsx)(eO.l.TrailingVisual,{children:(0,i.jsx)(ix.U,{keys:"Mod+Alt+y"})}),l[5]=a):a=l[5],l[6]!==m?(r=(0,i.jsxs)(eO.l.Item,{onSelect:m,onMouseDown:i$,children:[n,"Copy link",a]}),l[6]=m,l[7]=r):r=l[7],r}:function({diffLine:e,diffAnchor:t}){let n=G(),a=(0,l.useCallback)(()=>{let i=n(),a=(0,R.j2)({line:e,range:i,fileAnchor:t});a&&(0,n2.D)(a)},[t,n,e]);return(0,i.jsxs)(eO.l.Item,{onSelect:a,onMouseDown:e=>{window.getSelection()?.toString()!==""&&e.preventDefault()},children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.LinkIcon,{})}),"Copy link",(0,i.jsx)(eO.l.TrailingVisual,{children:(0,i.jsx)(ix.U,{keys:"Mod+Alt+y"})})]})};function i$(e){window.getSelection()?.toString()!==""&&e.preventDefault()}let iB=(0,a.GV)()?e=>{let t,n,a=(0,s.c)(8),r=G();if(a[0]!==r||a[1]!==e.diffAnchor||a[2]!==e.diffLine||a[3]!==e.isLeftSide){let n=r();t=(0,R.Av)(n,e.diffLine,e.isLeftSide,e.diffAnchor),a[0]=r,a[1]=e.diffAnchor,a[2]=e.diffLine,a[3]=e.isLeftSide,a[4]=t}else t=a[4];let l=t;return e.fileDiffReference?(a[5]!==l||a[6]!==e.fileDiffReference?(n=(0,i.jsx)(ig.w,{showDivider:!0,selectedRange:l,fileDiffReference:e.fileDiffReference}),a[5]=l,a[6]=e.fileDiffReference,a[7]=n):n=a[7],n):null}:e=>{let t=G()(),n=(0,R.Av)(t,e.diffLine,e.isLeftSide,e.diffAnchor);return e.fileDiffReference?(0,i.jsx)(ig.w,{showDivider:!0,selectedRange:n,fileDiffReference:e.fileDiffReference}):null},iV=(0,a.GV)()?function(e){let t,n,a,r,l=(0,s.c)(6),{diffAnchor:o}=e;l[0]!==o?(t=()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${o}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"a",code:"KeyA",ctrlKey:!0}))})},l[0]=o,l[1]=t):t=l[1];let d=t;return l[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.MultiSelectIcon,{})}),l[2]=n):n=l[2],l[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsx)(eO.l.TrailingVisual,{children:(0,i.jsx)(ix.U,{keys:"Mod+a"})}),l[3]=a):a=l[3],l[4]!==d?(r=(0,i.jsxs)(eO.l.Item,{onSelect:d,children:[n,"Select all",a]}),l[4]=d,l[5]=r):r=l[5],r}:function({diffAnchor:e}){return(0,i.jsxs)(eO.l.Item,{onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${e}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"a",code:"KeyA",ctrlKey:!0}))})},children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.MultiSelectIcon,{})}),"Select all",(0,i.jsx)(eO.l.TrailingVisual,{children:(0,i.jsx)(ix.U,{keys:"Mod+a"})})]})},iU=(0,a.GV)()?function(e){let t,n,a,r,l=(0,s.c)(21),{diffLine:o,handleViewMarkersSelection:d,isLeftSide:c,isSplit:u,shouldDisplayCollapseComments:m,showStartConversation:h,startConversationCurrentLine:f,startConversationWithSuggestedChange:p,threads:g,annotations:y,viewerData:x}=e,v=y.length>0;return h||g||v?(l[0]!==o||l[1]!==c||l[2]!==u||l[3]!==h||l[4]!==f||l[5]!==p||l[6]!==x.shouldDisplayComments?(t=x.shouldDisplayComments&&h&&(0,i.jsx)(iN,{diffLine:o,handleStartConversation:f,handleStartConversationWithSuggestedChange:p,isLeftSide:c,isSplit:u}),l[0]=o,l[1]=c,l[2]=u,l[3]=h,l[4]=f,l[5]=p,l[6]=x.shouldDisplayComments,l[7]=t):t=l[7],l[8]!==y||l[9]!==o||l[10]!==d||l[11]!==c||l[12]!==u||l[13]!==m||l[14]!==g||l[15]!==x?(n=(0,i.jsx)(iq,{threads:g,annotations:y,diffLine:o,handleViewMarkersSelection:d,isLeftSide:c,isSplit:u,shouldDisplayCollapseComments:m,viewerData:x}),l[8]=y,l[9]=o,l[10]=d,l[11]=c,l[12]=u,l[13]=m,l[14]=g,l[15]=x,l[16]=n):n=l[16],l[17]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsx)(eO.l.Divider,{}),l[17]=a):a=l[17],l[18]!==t||l[19]!==n?(r=(0,i.jsxs)(i.Fragment,{children:[t,n,a]}),l[18]=t,l[19]=n,l[20]=r):r=l[20],r):null}:function({diffLine:e,handleViewMarkersSelection:t,isLeftSide:n,isSplit:a,shouldDisplayCollapseComments:s,showStartConversation:r,startConversationCurrentLine:l,startConversationWithSuggestedChange:o,threads:d,annotations:c,viewerData:u}){let m=c.length>0;return r||d||m?(0,i.jsxs)(i.Fragment,{children:[u.shouldDisplayComments&&r&&(0,i.jsx)(iN,{diffLine:e,handleStartConversation:l,handleStartConversationWithSuggestedChange:o,isLeftSide:n,isSplit:a}),(0,i.jsx)(iq,{threads:d,annotations:c,diffLine:e,handleViewMarkersSelection:t,isLeftSide:n,isSplit:a,shouldDisplayCollapseComments:s,viewerData:u}),(0,i.jsx)(eO.l.Divider,{})]}):null},iq=(0,a.GV)()?function(e){let t,n=(0,s.c)(14),{diffLine:a,handleViewMarkersSelection:r,isLeftSide:l,isSplit:o,threads:d,annotations:c,shouldDisplayCollapseComments:u,viewerData:m}=e;if(m.commentsPreference===n1.sI.Visible)return null;if(!o){let e,t;return n[0]!==r?(e=()=>r(),n[0]=r,n[1]=e):e=n[1],n[2]!==c||n[3]!==a||n[4]!==u||n[5]!==e||n[6]!==d?(t=(0,i.jsx)(iH,{threads:d,annotations:c,diffLine:a,onSelect:e,shouldDisplayCollapseComments:u}),n[2]=c,n[3]=a,n[4]=u,n[5]=e,n[6]=d,n[7]=t):t=n[7],t}return n[8]!==c||n[9]!==r||n[10]!==l||n[11]!==u||n[12]!==d?(t=(0,i.jsx)(iG,{threads:d,annotations:c,handleViewMarkersSelection:r,isLeftSide:l,shouldDisplayCollapseComments:u}),n[8]=c,n[9]=r,n[10]=l,n[11]=u,n[12]=d,n[13]=t):t=n[13],t}:function({diffLine:e,handleViewMarkersSelection:t,isLeftSide:n,isSplit:a,threads:s,annotations:r,shouldDisplayCollapseComments:l,viewerData:o}){return o.commentsPreference===n1.sI.Visible?null:a?(0,i.jsx)(iG,{threads:s,annotations:r,handleViewMarkersSelection:t,isLeftSide:n,shouldDisplayCollapseComments:l}):(0,i.jsx)(iH,{threads:s,annotations:r,diffLine:e,onSelect:()=>t(),shouldDisplayCollapseComments:l})},iG=(0,a.GV)()?function(e){let t,n,a=(0,s.c)(13),{handleViewMarkersSelection:r,isLeftSide:l,shouldDisplayCollapseComments:o,threads:d,annotations:c}=e,u=d.length>0,m=c.length>0;if(l){let e,t;return a[0]!==r||a[1]!==u||a[2]!==o?(e=u&&(0,i.jsx)(iK,{text:o?"Collapse comments":"Expand comments",onSelect:()=>r("LEFT")}),a[0]=r,a[1]=u,a[2]=o,a[3]=e):e=a[3],a[4]!==e?(t=(0,i.jsx)(i.Fragment,{children:e}),a[4]=e,a[5]=t):t=a[5],t}return a[6]!==r||a[7]!==m||a[8]!==u||a[9]!==o?(t=(u||m)&&(0,i.jsx)(iK,{text:o?"Collapse comments":"Expand comments",onSelect:()=>r("RIGHT")}),a[6]=r,a[7]=m,a[8]=u,a[9]=o,a[10]=t):t=a[10],a[11]!==t?(n=(0,i.jsx)(i.Fragment,{children:t}),a[11]=t,a[12]=n):n=a[12],n}:function({handleViewMarkersSelection:e,isLeftSide:t,shouldDisplayCollapseComments:n,threads:a,annotations:s}){let r=a.length>0,l=s.length>0;return t?(0,i.jsx)(i.Fragment,{children:r&&(0,i.jsx)(iK,{text:n?"Collapse comments":"Expand comments",onSelect:()=>e("LEFT")})}):(0,i.jsx)(i.Fragment,{children:(r||l)&&(0,i.jsx)(iK,{text:n?"Collapse comments":"Expand comments",onSelect:()=>e("RIGHT")})})},iH=(0,a.GV)()?function(e){let t,n,a=(0,s.c)(5),{diffLine:r,onSelect:l,threads:o,annotations:d,shouldDisplayCollapseComments:c}=e;if(!(r&&(o.length>0||d.length>0)))return null;let u=c?"Collapse comments":"Expand comments";return a[0]!==l?(t=()=>l(),a[0]=l,a[1]=t):t=a[1],a[2]!==u||a[3]!==t?(n=(0,i.jsx)(iK,{text:u,onSelect:t}),a[2]=u,a[3]=t,a[4]=n):n=a[4],n}:function({diffLine:e,onSelect:t,threads:n,annotations:a,shouldDisplayCollapseComments:s}){return e&&(n.length>0||a.length>0)?(0,i.jsx)(iK,{text:s?"Collapse comments":"Expand comments",onSelect:()=>t()}):null},iK=(0,a.GV)()?function(e){let t,n,a=(0,s.c)(4),{onSelect:r,text:l}=e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.CommentDiscussionIcon,{})}),a[0]=t):t=a[0],a[1]!==r||a[2]!==l?(n=(0,i.jsxs)(eO.l.Item,{onSelect:r,children:[t,l]}),a[1]=r,a[2]=l,a[3]=n):n=a[3],n}:function({onSelect:e,text:t}){return(0,i.jsxs)(eO.l.Item,{onSelect:e,children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.CommentDiscussionIcon,{})}),t]})},iW=(0,a.GV)()?function(e){let t,n,a,r=(0,s.c)(4),{handleCopyCode:l}=e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.CopyIcon,{})}),r[0]=t):t=r[0],r[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(eO.l.TrailingVisual,{children:(0,i.jsx)(ix.U,{keys:"Mod+c"})}),r[1]=n):n=r[1],r[2]!==l?(a=(0,i.jsxs)(eO.l.Item,{onSelect:l,onMouseDown:iz,children:[t,"Copy",n]}),r[2]=l,r[3]=a):a=r[3],a}:function({handleCopyCode:e}){return(0,i.jsxs)(eO.l.Item,{onSelect:e,onMouseDown:e=>{window.getSelection()?.toString()!==""&&e.preventDefault()},children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.CopyIcon,{})}),"Copy",(0,i.jsx)(eO.l.TrailingVisual,{children:(0,i.jsx)(ix.U,{keys:"Mod+c"})})]})};function iz(e){window.getSelection()?.toString()!==""&&e.preventDefault()}let iQ=(0,a.GV)()?function(e){let t,n,a,r,l,o=(0,s.c)(17),{currentHunk:d,diffAnchor:c,nextHunk:u,previousHunk:m}=e,h=K();o[0]!==d||o[1]!==u||o[2]!==m?(t={currentHunk:d,nextHunk:u,previousHunk:m},o[0]=d,o[1]=u,o[2]=m,o[3]=t):t=o[3];let{canExpandStartOfHunk:f,canExpandEndOfHunk:p}=iy(t);return f||p||m||u?(o[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(eO.l.Divider,{}),o[4]=n):n=o[4],o[5]!==d||o[6]!==h||o[7]!==u||o[8]!==m?(a=h.has(iP.YR.expandLines)?null:(0,i.jsx)(iZ,{currentHunk:d,nextHunk:u,previousHunk:m}),o[5]=d,o[6]=h,o[7]=u,o[8]=m,o[9]=a):a=o[9],o[10]!==c||o[11]!==u||o[12]!==m?(r=(0,i.jsx)(iJ,{diffAnchor:c,nextHunk:u,previousHunk:m}),o[10]=c,o[11]=u,o[12]=m,o[13]=r):r=o[13],o[14]!==a||o[15]!==r?(l=(0,i.jsxs)(i.Fragment,{children:[n,a,r]}),o[14]=a,o[15]=r,o[16]=l):l=o[16],l):null}:function({currentHunk:e,diffAnchor:t,nextHunk:n,previousHunk:a}){let s=K(),{canExpandStartOfHunk:r,canExpandEndOfHunk:l}=iy({currentHunk:e,nextHunk:n,previousHunk:a});return r||l||a||n?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eO.l.Divider,{}),s.has(iP.YR.expandLines)?null:(0,i.jsx)(iZ,{currentHunk:e,nextHunk:n,previousHunk:a}),(0,i.jsx)(iJ,{diffAnchor:t,nextHunk:n,previousHunk:a})]}):null},iZ=(0,a.GV)()?function(e){let t,n,a,r,l=(0,s.c)(13),{currentHunk:o,nextHunk:d,previousHunk:u}=e;l[0]!==o||l[1]!==d||l[2]!==u?(t={currentHunk:o,nextHunk:d,previousHunk:u},l[0]=o,l[1]=d,l[2]=u,l[3]=t):t=l[3];let{canExpandStartOfHunk:m,expandEndOfHunk:h,expandStartOfHunk:f,canExpandEndOfHunk:p}=iy(t);return l[4]!==m||l[5]!==f?(n=m&&(0,i.jsxs)(eO.l.Item,{onSelect:f,children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.FoldUpIcon,{})}),"Expand above"]}),l[4]=m,l[5]=f,l[6]=n):n=l[6],l[7]!==p||l[8]!==h?(a=p&&(0,i.jsxs)(eO.l.Item,{onSelect:h,children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.FoldDownIcon,{})}),"Expand below"]}),l[7]=p,l[8]=h,l[9]=a):a=l[9],l[10]!==n||l[11]!==a?(r=(0,i.jsxs)(i.Fragment,{children:[n,a]}),l[10]=n,l[11]=a,l[12]=r):r=l[12],r}:function({currentHunk:e,nextHunk:t,previousHunk:n}){let{canExpandStartOfHunk:a,expandEndOfHunk:s,expandStartOfHunk:r,canExpandEndOfHunk:l}=iy({currentHunk:e,nextHunk:t,previousHunk:n});return(0,i.jsxs)(i.Fragment,{children:[a&&(0,i.jsxs)(eO.l.Item,{onSelect:r,children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.FoldUpIcon,{})}),"Expand above"]}),l&&(0,i.jsxs)(eO.l.Item,{onSelect:s,children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.FoldDownIcon,{})}),"Expand below"]})]})},iJ=(0,a.GV)()?function(e){let t,n,a,r,l,o=(0,s.c)(13),{diffAnchor:d,nextHunk:u,previousHunk:m}=e,h=!!m,f=!!u;o[0]!==d?(t=()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${d}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"PageDown"}))})},o[0]=d,o[1]=t):t=o[1];let p=t;o[2]!==d?(n=()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${d}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"PageUp"}))})},o[2]=d,o[3]=n):n=o[3];let g=n;return o[4]!==p||o[5]!==f?(a=f?(0,i.jsxs)(eO.l.Item,{"aria-keyshortcuts":"PageDown",onSelect:p,children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.MoveToBottomIcon,{})}),"Go to next hunk",(0,i.jsx)(eO.l.TrailingVisual,{children:"Page Down"})]}):null,o[4]=p,o[5]=f,o[6]=a):a=o[6],o[7]!==g||o[8]!==h?(r=h?(0,i.jsxs)(eO.l.Item,{"aria-keyshortcuts":"PageUp",onSelect:g,children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.MoveToTopIcon,{})}),"Go to previous hunk",(0,i.jsx)(eO.l.TrailingVisual,{children:"Page Up"})]}):null,o[7]=g,o[8]=h,o[9]=r):r=o[9],o[10]!==a||o[11]!==r?(l=(0,i.jsxs)(i.Fragment,{children:[a,r]}),o[10]=a,o[11]=r,o[12]=l):l=o[12],l}:function({diffAnchor:e,nextHunk:t,previousHunk:n}){return(0,i.jsxs)(i.Fragment,{children:[t?(0,i.jsxs)(eO.l.Item,{"aria-keyshortcuts":"PageDown",onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${e}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"PageDown"}))})},children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.MoveToBottomIcon,{})}),"Go to next hunk",(0,i.jsx)(eO.l.TrailingVisual,{children:"Page Down"})]}):null,n?(0,i.jsxs)(eO.l.Item,{"aria-keyshortcuts":"PageUp",onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${e}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"PageUp"}))})},children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.MoveToTopIcon,{})}),"Go to previous hunk",(0,i.jsx)(eO.l.TrailingVisual,{children:"Page Up"})]}):null]})};try{iF.displayName||(iF.displayName="CellContextMenu")}catch{}try{iM.displayName||(iM.displayName="CopyAnchorLink")}catch{}try{iV.displayName||(iV.displayName="SelectAllListItem")}catch{}try{iU.displayName||(iU.displayName="MarkerListItems")}catch{}try{iq.displayName||(iq.displayName="ViewMarkerListItems")}catch{}try{iG.displayName||(iG.displayName="SplitDiffMarkersListItems")}catch{}try{iH.displayName||(iH.displayName="UnifiedDiffMarkerListItem")}catch{}try{iK.displayName||(iK.displayName="MarkerListItem")}catch{}try{iW.displayName||(iW.displayName="CopyContentListItems")}catch{}try{iQ.displayName||(iQ.displayName="HunkListItems")}catch{}try{iZ.displayName||(iZ.displayName="ExpandHunksListItems")}catch{}try{iJ.displayName||(iJ.displayName="JumpToHunkListItems")}catch{}var iY=n(17998);let iX="InProgressCommentIndicator-module__statusAvatarBackground--xzHl8",i0="InProgressCommentIndicator-module__statusAvatar--BNNHX",i1=(0,a.GV)()?function(e){let t,n=(0,s.c)(4),{authorAvatarUrl:a,authorLogin:r,lineSpacingPreference:l}=e,o="compact"===l?18:20,d=`${r}'s avatar image with pending indicator`;return n[0]!==a||n[1]!==o||n[2]!==d?(t=(0,i.jsx)(iY.k,{altText:d,icon:c.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",square:!1,size:o,src:a,backgroundClassName:iX,className:i0}),n[0]=a,n[1]=o,n[2]=d,n[3]=t):t=n[3],t}:function({authorAvatarUrl:e,authorLogin:t,lineSpacingPreference:n}){return(0,i.jsx)(iY.k,{altText:`${t}'s avatar image with pending indicator`,icon:c.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",square:!1,size:"compact"===n?18:20,src:e,backgroundClassName:iX,className:i0})};try{i1.displayName||(i1.displayName="InProgressCommentIndicator")}catch{}let i2="ActionBar-module__action-bar-position--cMcOj",i3="ActionBar-module__addCommentButton--gIYSg",i4="ActionBar-module__addCommentButtonDraftCompact--HKIKU",i5="ActionBar-module__addCommentButtonDraftRelaxed--_qJPM",i6="ActionBar-module__addCommentButtonNew--j1kFj",i7="ActionBar-module__actionBarArrowSizing--L93H4",i8="ActionBar-module__actionBarHeight--wiyuB",i9="ActionBar-module__actionBarStartCommentWidth--TTHf8",ae="ActionBar-module__action-bar-button-group--G1uFN";var at=n(85933),an=n(82518);let ai=(0,l.forwardRef)(function({annotations:e,authorAvatarUrl:t,authorLogin:n,cellId:a,cellRef:s,copilotChatReference:r,currentHunk:o,diffAnchor:d,diffLine:u,enterDialogMode:m,hasDraftComment:h,handleCopyCode:f,isLeftSide:p,isSplit:g,nextHunk:y,onMouseDownAddCommentButton:v,onMouseLeaveAddCommentButton:b,previousHunk:j,shouldDisplayCollapseComments:w,shouldDisplayMinimizedComments:_,showStartConversation:C,threads:N,toggleViewingMarkers:S,viewerData:I},k){let L=(0,l.useRef)(null),T=(0,l.useRef)(null),{lineSpacingPreference:D,commentsPreference:E}=I,R=(0,l.useRef)(null),{sendAnalyticsEvent:A}=(0,tK.s)(),O=L.current?L:T;(0,id.T)(k,O);let P=N.reduce((e,t)=>e+(t.commentsData?.comments.length??0),0),F=e.length,{isActionBarFocused:M,handleActionBarBlur:$,handleActionBarFocusCapture:B,handleActionBarKeydownCapture:V}=ii({cellRef:s}),{isContextMenuOpen:U,anyMenuOpen:q,toggleContextMenu:G,toggleContextMenuFromActionBar:H}=ie({cellId:a,actionBarRef:R}),{startNewConversation:K,startNewConversationWithSuggestedChange:W}=it({cellId:a,onOpenDialog:m}),z=(0,l.useCallback)(e=>{(0,at.X)()?.registerCallback({event:e.nativeEvent,cb:e=>{A("diff-lines.inp_interaction","CELL_ADD_COMMENT_BUTTON",{latency:e.latency}),(0,an.au)({name:"PRS_COMMENT_BOX_INP",value:e.latency})}}),e.stopPropagation(),K()},[K,A]),Q=P+F>0&&E===n1.sI.Collapsed,Z={onBlur:$,onFocusCapture:B,onKeyDownCapture:V},J=(0,l.useCallback)(t=>{(1===N.length||1===e.length)&&t.preventDefault(),S?.()},[e.length,N.length,S]);return(0,i.jsxs)(i.Fragment,{children:[C&&(0,i.jsx)("div",{"aria-hidden":!M,className:(0,x.$)("d-flex","flex-row",i3),children:(0,i.jsx)(i.Fragment,{children:h?(0,i.jsx)(ek.Q,{"aria-label":"Continue comment in progress",size:"small",className:(0,x.$)("py-0","compact"===D?i4:i5,i8),onClick:K,...Z,children:(0,i.jsx)(i1,{lineSpacingPreference:D,authorAvatarUrl:t,authorLogin:n})}):(0,i.jsx)(ek.Q,{icon:c.PlusIcon,"aria-label":"Add comment",ref:T,size:"small","data-add-comment-button":!0,className:(0,x.$)("fgColor-muted","bgColor-accent-emphasis","borderColor-accent-emphasis","fgColor-onEmphasis","px-0",i6,i8,i9),onClick:z,onMouseDown:v,onMouseLeave:b,...Z})})}),(0,i.jsx)("div",{"aria-hidden":!M,className:(0,x.$)("d-flex","flex-row",i2),children:(0,i.jsxs)(ic.A,{className:ae,...Z,children:[Q&&_&&(0,i.jsx)(ek.Q,{ref:L,"aria-expanded":q,"aria-label":"View comments",size:"small",className:(0,x.$)("py-0","px-1",i8),onClick:J,children:(0,i.jsx)(ip,{threads:N,annotations:e,lineSpacingPreference:D})}),(0,i.jsxs)(eA.W,{anchorRef:R,open:U,onOpenChange:G,children:[(0,i.jsx)(eA.W.Anchor,{children:(0,i.jsx)(ek.Q,{ref:R,"aria-haspopup":"true","aria-label":"More actions",icon:c.TriangleDownIcon,size:"small",className:(0,x.$)("fgColor-muted",i7),onClick:H})}),(0,i.jsx)(eA.W.Overlay,{width:"medium",children:(0,i.jsx)(eO.l,{children:(0,i.jsx)(iF,{threads:N,annotations:e,currentHunk:o,diffAnchor:d,diffLine:u,shouldDisplayCollapseComments:w,copilotChatReference:r,showStartConversation:C,handleCopyCode:f,handleViewMarkersSelection:S,isLeftSide:p,isSplit:g,nextHunk:y,previousHunk:j,startConversationCurrentLine:K,startConversationWithSuggestedChange:W,viewerData:I})})})]})]})})]})});function aa(e,t){let n=t>0,i=e>0;switch(!0){case n&&i:return"Code has comments and alerts. Press enter to view.";case i:return"Code has comments. Press enter to view.";case n:return"Code has alerts. Press enter to view.";default:return""}}ai.displayName="ActionBar";let as=(0,a.GV)()?function(e){let t,n,a=(0,s.c)(5),{threadCount:r,annotationCount:l}=e;a[0]!==l||a[1]!==r?(t=aa(r,l),a[0]=l,a[1]=r,a[2]=t):t=a[2];let o=t;return o?(a[3]!==o?(n=(0,i.jsx)("span",{className:"sr-only user-select-none",children:o}),a[3]=o,a[4]=n):n=a[4],n):null}:function({threadCount:e,annotationCount:t}){let n=aa(e,t);return n?(0,i.jsx)("span",{className:"sr-only user-select-none",children:n}):null};try{as.displayName||(as.displayName="DiffLineScreenReaderSummary")}catch{}let ar=(0,l.forwardRef)((0,a.GV)()?function(e,t){let n,a,r,o,d,c,u,m,h,f,p,g,y,x,v,b,j,w,_,C,N,S,I,k,L,T,D,E,A=(0,s.c)(63);if(A[0]!==e){let{cellId:t,children:i,className:s,columnIndex:l,diffLine:C,diffAnchor:N,handleDiffCellMouseDown:S,handleExitDialogMode:I,handleHideMarkersFromFocus:k,handleDiffSideCellSelectionBlocking:L,handleStartConversation:T,handleUserClosedMarkersDialog:D,isLeftSide:E,isRowSelected:R,isSplit:O,lineAnchor:P,commentDialogOpen:F,enterDialogMode:M,hasThreads:$,role:B,...V}=e;n=t,a=i,r=s,o=l,c=C,d=N,m=S,f=I,h=L,p=T,g=D,x=E,_=R,v=O,b=P,u=M,y=$,w=B,j=V,A[0]=e,A[1]=n,A[2]=a,A[3]=r,A[4]=o,A[5]=d,A[6]=c,A[7]=u,A[8]=m,A[9]=h,A[10]=f,A[11]=p,A[12]=g,A[13]=y,A[14]=x,A[15]=v,A[16]=b,A[17]=j,A[18]=w,A[19]=_}else n=A[1],a=A[2],r=A[3],o=A[4],d=A[5],c=A[6],u=A[7],m=A[8],h=A[9],f=A[10],p=A[11],g=A[12],y=A[13],x=A[14],v=A[15],b=A[16],j=A[17],w=A[18],_=A[19];let O=void 0!==_&&_,P=c,F=(0,l.useRef)(null),M=G(),{sendAnalyticsEvent:$}=(0,tK.s)();A[20]===Symbol.for("react.memo_cache_sentinel")?(C=()=>F.current,N=[],A[20]=C,A[21]=N):(C=A[20],N=A[21]),(0,l.useImperativeHandle)(t,C,N);let{disableDialogMode:B}=z();A[22]!==d||A[23]!==M||A[24]!==P?(S=()=>{let e=M(),t=(0,R.j2)({line:P,range:e,fileAnchor:d});t&&(0,n2.D)(t)},A[22]=d,A[23]=M,A[24]=P,A[25]=S):S=A[25];let H=S,K=q(),{clearFirstLineSelectionOnDrag:W}=X();A[26]!==W||A[27]!==K||A[28]!==p||A[29]!==$?(I=e=>{(0,at.X)()?.registerCallback({event:e.nativeEvent,cb:e=>{$("diff-lines.inp_interaction","CELL_MULTI_SELECT",{latency:e.latency})}});let t=K();t?.shouldStartConversation&&p?.(),W()},A[26]=W,A[27]=K,A[28]=p,A[29]=$,A[30]=I):I=A[30];let Q=I;A[31]!==m||A[32]!==h?(k=e=>{e.shiftKey&&e.preventDefault(),m?.(e),h?.(e)},A[31]=m,A[32]=h,A[33]=k):k=A[33];let Z=k;A[34]!==B||A[35]!==f||A[36]!==g?(L=()=>{F.current?.focus(),B(),f?.(),g?.()},A[34]=B,A[35]=f,A[36]=g,A[37]=L):L=A[37];let J=L,Y=V(),ee=U();A[38]!==H||A[39]!==c||A[40]!==u||A[41]!==J||A[42]!==ee||A[43]!==Y||A[44]!==M||A[45]!==p||A[46]!==y||A[47]!==x||A[48]!==v?(T=async e=>{if(e.target===F.current&&(e?.metaKey||e?.ctrlKey)&&"c"===e.key){e.preventDefault();let t=ee();await n3({diffLine:c,diffLines:t,getSelectedDiffLines:Y,getSelectedLineRange:M,isSplit:v,isLeftSide:x});return}if(e.target===F.current&&(e?.metaKey||e?.ctrlKey)&&e.altKey&&"y"===e.key)return void H();if(F.current?.contains(e.target)&&e?.key==="Escape")return void J();if(F.current?.contains(e.target)&&"true"===e.target.getAttribute("data-exit-dialog-mode-button")&&!e?.shiftKey&&e?.key==="Tab"){e.preventDefault(),F.current?.querySelector('[data-is-first-collapse-button="true"]')?.focus();return}if(F.current?.contains(e.target)&&"true"===e.target.getAttribute("data-is-first-collapse-button")&&e?.shiftKey&&e?.key==="Tab"){e.preventDefault(),F.current?.querySelector('[data-exit-dialog-mode-button="true"]')?.focus();return}e.target===F.current&&"Enter"===e.key&&(u?.(),!1===y&&p?.(),e.preventDefault())},A[38]=H,A[39]=c,A[40]=u,A[41]=J,A[42]=ee,A[43]=Y,A[44]=M,A[45]=p,A[46]=y,A[47]=x,A[48]=v,A[49]=T):T=A[49];let et=T,en=`Cell-left:${P.left}-right:${P.right}-leftSide:${x}`,ei=!!O,ea=w??"gridcell";A[50]===Symbol.for("react.memo_cache_sentinel")?(D={userSelect:"none",position:"relative"},A[50]=D):D=A[50];let es=r?`focusable-grid-cell ${r} ${o<3?"left-side":""}`:"focusable-grid-cell";return A[51]!==n||A[52]!==a||A[53]!==Z||A[54]!==Q||A[55]!==et||A[56]!==en||A[57]!==b||A[58]!==j||A[59]!==ea||A[60]!==es||A[61]!==ei?(E=(0,i.jsx)("td",{ref:F,"data-grid-cell-id":n,"data-line-anchor":b,"data-selected":ei,role:ea,style:D,tabIndex:-1,valign:"top",className:es,onKeyDown:et,onMouseDown:Z,onMouseUp:Q,...j,children:a},en),A[51]=n,A[52]=a,A[53]=Z,A[54]=Q,A[55]=et,A[56]=en,A[57]=b,A[58]=j,A[59]=ea,A[60]=es,A[61]=ei,A[62]=E):E=A[62],E}:function({cellId:e,children:t,className:n,columnIndex:a,diffLine:s,diffAnchor:r,handleDiffCellMouseDown:o,handleExitDialogMode:d,handleHideMarkersFromFocus:c,handleDiffSideCellSelectionBlocking:u,handleStartConversation:m,handleUserClosedMarkersDialog:h,isLeftSide:f,isRowSelected:p=!1,isSplit:g,lineAnchor:y,commentDialogOpen:x,enterDialogMode:v,hasThreads:b,role:j,...w},_){let C=(0,l.useRef)(null),N=G(),{sendAnalyticsEvent:S}=(0,tK.s)();(0,l.useImperativeHandle)(_,()=>C.current,[]);let{disableDialogMode:I}=z(),k=(0,l.useCallback)(()=>{let e=N(),t=(0,R.j2)({line:s,range:e,fileAnchor:r});t&&(0,n2.D)(t)},[r,N,s]),L=q(),{clearFirstLineSelectionOnDrag:T}=X(),D=(0,l.useCallback)(e=>{(0,at.X)()?.registerCallback({event:e.nativeEvent,cb:e=>{S("diff-lines.inp_interaction","CELL_MULTI_SELECT",{latency:e.latency})}});let t=L();t?.shouldStartConversation&&m?.(),T()},[T,L,m,S]),E=(0,l.useCallback)(e=>{e.shiftKey&&e.preventDefault(),o?.(e),u?.(e)},[o,u]),A=(0,l.useCallback)(()=>{C.current?.focus(),I(),d?.(),h?.()},[I,d,h]),O=V(),P=U(),F=(0,l.useCallback)(async e=>{if(e.target===C.current&&(e?.metaKey||e?.ctrlKey)&&"c"===e.key){e.preventDefault();let t=P();await n3({diffLine:s,diffLines:t,getSelectedDiffLines:O,getSelectedLineRange:N,isSplit:g,isLeftSide:f});return}if(e.target===C.current&&(e?.metaKey||e?.ctrlKey)&&e.altKey&&"y"===e.key)return void k();if(C.current?.contains(e.target)&&e?.key==="Escape")return void A();if(C.current?.contains(e.target)&&"true"===e.target.getAttribute("data-exit-dialog-mode-button")&&!e?.shiftKey&&e?.key==="Tab"){e.preventDefault(),C.current?.querySelector('[data-is-first-collapse-button="true"]')?.focus();return}if(C.current?.contains(e.target)&&"true"===e.target.getAttribute("data-is-first-collapse-button")&&e?.shiftKey&&e?.key==="Tab"){e.preventDefault(),C.current?.querySelector('[data-exit-dialog-mode-button="true"]')?.focus();return}e.target===C.current&&"Enter"===e.key&&(v?.(),!1===b&&m?.(),e.preventDefault())},[P,s,O,N,g,f,k,A,v,b,m]),M=`Cell-left:${s.left}-right:${s.right}-leftSide:${f}`;return(0,i.jsx)("td",{ref:C,"data-grid-cell-id":e,"data-line-anchor":y,"data-selected":!!p,role:j??"gridcell",style:{userSelect:"none",position:"relative"},tabIndex:-1,valign:"top",className:n?`focusable-grid-cell ${n} ${a<3?"left-side":""}`:"focusable-grid-cell",onKeyDown:F,onMouseDown:E,onMouseUp:D,...w,children:t},M)});try{ar.displayName||(ar.displayName="Cell")}catch{}let al=(0,a.GV)()?function(e,t,n){let i,a,r=(0,s.c)(4),l=G();r[0]!==l||r[1]!==n?(i=n?l():void 0,r[0]=l,r[1]=n,r[2]=i):i=r[2];let o=i,d=!!o&&o.startLineNumber!==o.endLineNumber;if(o&&d){let e;r[3]===Symbol.for("react.memo_cache_sentinel")?(e={left:"L",right:"R"},r[3]=e):e=r[3];let t=e,n=t[o.startOrientation],i=t[o.endOrientation];a=o.startLineNumber!==o.endLineNumber?` lines ${n}${o.startLineNumber} to ${i}${o.endLineNumber}`:` line ${n}${o.startLineNumber}`}else{let n=t&&!(0,R.Ji)(e)?"L":"R";a=` line ${n}${e.blobLineNumber}`}return a}:function(e,t,n){let i=G();return(0,l.useMemo)(()=>{let a=n?i():void 0,s="",r=!!a&&a.startLineNumber!==a.endLineNumber;if(a&&r){let e={left:"L",right:"R"},t=e[a.startOrientation],n=e[a.endOrientation];s+=a.startLineNumber!==a.endLineNumber?` lines ${t}${a.startLineNumber} to ${n}${a.endLineNumber}`:` line ${t}${a.startLineNumber}`}else{let n=t&&!(0,R.Ji)(e)?"L":"R";s+=` line ${n}${e.blobLineNumber}`}return s},[e,t,n,i])};var ao=n(43362);let ad=(0,a.Z6)()?function(){let e,t,n,i=(0,s.c)(12),a=(0,k.Kp)(),r=(0,nj.jE)(),l=`${a}/page_data/${nv.uT.createReviewComment}`,{updateThread:d}=(0,k.an)(),{onCommentThreadAdded:c}=(0,k.Ud)(),{addPendingComment:u,clearPendingReview:m}=(0,k._N)();return i[0]!==l?(e=async e=>{let t=await (0,n_.Sr)(`${l}`,{method:"POST",headers:{Accept:"application/json"},body:e}),n=await (0,nb.hp)(t);return(0,nb.R)(t,n),n},i[0]=l,i[1]=e):e=i[1],i[2]!==u||i[3]!==a||i[4]!==m||i[5]!==c||i[6]!==r||i[7]!==d?(t=(e,t)=>{let n=t.subjectType===o.Wr.File?"FILE":"right"===t.side?`R${t.line}`:`L${t.line}`,i=t.startSide&&t.startLine?"right"===t.startSide?`R${t.startLine}`:`L${t.startLine}`:void 0;void 0!==t.submitBatch&&!t.submitBatch&&e.thread&&u(Number(e.thread.id)),t.submitBatch&&m(),d(Number(e.thread.id),t.path,n,()=>{let n=(0,ao.YY)(t);return e.thread.subject=n,e.thread.positioning=n,e.thread}),c({path:t.path,diffLineKey:n,startPosition:i,threadID:e.thread.id}),r.invalidateQueries({queryKey:(0,nC.XG)(a)})},i[2]=u,i[3]=a,i[4]=m,i[5]=c,i[6]=r,i[7]=d,i[8]=t):t=i[8],i[9]!==e||i[10]!==t?(n={mutationFn:e,onSuccess:t},i[9]=e,i[10]=t,i[11]=n):n=i[11],(0,nw.n)(n)}:function(){let e=(0,k.Kp)(),t=(0,nj.jE)(),n=`${e}/page_data/${nv.uT.createReviewComment}`,{updateThread:i}=(0,k.an)(),{onCommentThreadAdded:a}=(0,k.Ud)(),{addPendingComment:s,clearPendingReview:r}=(0,k._N)();return(0,nw.n)({mutationFn:async e=>{let t=await (0,n_.Sr)(`${n}`,{method:"POST",headers:{Accept:"application/json"},body:e}),i=await (0,nb.hp)(t);return(0,nb.R)(t,i),i},onSuccess:(n,l)=>{let d=l.subjectType===o.Wr.File?"FILE":"right"===l.side?`R${l.line}`:`L${l.line}`,c=l.startSide&&l.startLine?"right"===l.startSide?`R${l.startLine}`:`L${l.startLine}`:void 0;void 0!==l.submitBatch&&!l.submitBatch&&n.thread&&s(Number(n.thread.id)),l.submitBatch&&r(),i(Number(n.thread.id),l.path,d,()=>{let e=(0,ao.YY)(l);return n.thread.subject=e,n.thread.positioning=e,n.thread}),a({path:l.path,diffLineKey:d,startPosition:c,threadID:n.thread.id}),t.invalidateQueries({queryKey:(0,nC.XG)(e)})}})};var ac=new WeakMap,au=new WeakMap,am=new WeakMap,ah=new WeakMap,af=new WeakMap,ap=new WeakMap,ag=new WeakMap,ay=new WeakSet,ax=new WeakSet,av=new WeakSet;let ReviewCommentFactory=class ReviewCommentFactory{fileRequestData(){return{...(0,ts._)(this,av,aw).call(this),path:(0,tn._)(this,au),subjectType:o.Wr.File}}lineRequestData(e,t){let n=t&&!(0,R.Ji)(e)?"left":"right";return{...(0,ts._)(this,av,aw).call(this),line:e.blobLineNumber,path:(0,ts._)(this,ay,ab).call(this,n),positioning:{type:o.Wr.Line,baseCommitOid:(0,tn._)(this,ac),headCommitOid:(0,tn._)(this,am),path:(0,ts._)(this,ay,ab).call(this,n),line:e.blobLineNumber,commitOid:(0,ts._)(this,ax,aj).call(this,n)},side:n,subjectType:o.Wr.Line}}multilineRequestData(e){let{endLineNumber:t,endOrientation:n,startLineNumber:i,startOrientation:a}=e,s="left"===n?"left":"right",r="left"===a?"left":"right";return{...(0,ts._)(this,av,aw).call(this),line:t,path:(0,ts._)(this,ay,ab).call(this,s),positioning:{baseCommitOid:(0,tn._)(this,ac),headCommitOid:(0,tn._)(this,am),type:o.Wr.Multiline,startPath:(0,ts._)(this,ay,ab).call(this,r),startLine:i,startCommitOid:(0,ts._)(this,ax,aj).call(this,r),endPath:(0,ts._)(this,ay,ab).call(this,s),endLine:t,endCommitOid:(0,ts._)(this,ax,aj).call(this,s)},side:s,startLine:i,startSide:r,subjectType:o.Wr.Multiline}}constructor({filePath:e,newTreeEntry:t,oldTreeEntry:n,effectiveDiffRange:i,submitBatch:a,text:s}){(0,tr._)(this,ay),(0,tr._)(this,ax),(0,tr._)(this,av),(0,ti._)(this,ac,{writable:!0,value:void 0}),(0,ti._)(this,au,{writable:!0,value:void 0}),(0,ti._)(this,am,{writable:!0,value:void 0}),(0,ti._)(this,ah,{writable:!0,value:void 0}),(0,ti._)(this,af,{writable:!0,value:void 0}),(0,ti._)(this,ap,{writable:!0,value:void 0}),(0,ti._)(this,ag,{writable:!0,value:void 0}),(0,ta._)(this,ac,i.baseOid),(0,ta._)(this,au,e),(0,ta._)(this,am,i.headOid),(0,ta._)(this,ah,t),(0,ta._)(this,af,n),(0,ta._)(this,ap,a),(0,ta._)(this,ag,s)}};function ab(e){return"left"===e&&(0,tn._)(this,af)?.path&&(0,tn._)(this,ah)?.path&&(0,tn._)(this,af).path!==(0,tn._)(this,ah).path?(0,tn._)(this,af).path:(0,tn._)(this,au)}function aj(e){return"left"===e?(0,tn._)(this,ac):(0,tn._)(this,am)}function aw(){return{comparisonEndOid:(0,tn._)(this,am),comparisonStartOid:(0,tn._)(this,ac),text:(0,tn._)(this,ag),submitBatch:(0,tn._)(this,ap)}}let a_=new Set,aC=!1,aN=e=>{let t=e.target instanceof Node?e.target:null;for(let e of a_){let{element:n,shouldIgnore:i,onPointerExit:a}=e;if(!n.isConnected){a_.delete(e);continue}if(t&&n.contains(t)){e.pendingExit=!1;continue}e.pendingExit=!0,i?.()||(e.pendingExit=!1,a())}0===a_.size&&aS()},aS=()=>{aC&&g.XC&&!(a_.size>0)&&(g.XC.removeEventListener("pointermove",aN),aC=!1)},aI=(0,l.forwardRef)(function({annotationsAtPosition:e,columnIndex:t,commentsPreference:n,copilotChatReference:a,currentHunk:s,diffAnchor:r,diffLine:o,dispatchMarkersStatus:d,filePath:u,handleDiffSideCellSelectionBlocking:m,isLeftSide:h,isRowSelected:f,isSplit:p,lineAnchor:y,markersStatus:b,nextHunk:j,previousHunk:w,rowId:_,subjectId:C,threadsAtPosition:N,viewerData:S},I){let[L,T]=(0,R.x_)(o.html,o.type),D=T&&["+","-"].includes(T),[E,P]=(0,l.useState)(""),{isActionBarVisible:F,hideActionBar:M,anyMenuOpen:$}=n9(),B=(0,eq.u)("move_new_comments_ui"),{hasPersistedComment:H}=(0,v.L)({diffSide:h?"LEFT":"RIGHT",filePath:u,line:o.blobLineNumber,subjectId:C,fileLevelComment:!1}),K={...S,commentsPreference:n},Q=(0,R.u6)(_,t),Z=W(Q),{disableDialogMode:J}=z(),Y=h?"LEFT":"RIGHT",ee="RIGHT"===Y?o.right:o.left,en=(0,R.oH)(ee,Y),ea=N.length,es=e.length,er=(0,l.useRef)(null),el=(0,l.useRef)(null);(0,l.useImperativeHandle)(I,()=>el.current,[]);let eo=0!==ea+es,ed=(0,R.S4)({hasThreads:eo&&n===n1.sI.Collapsed}),ec=al(o,!!h,f),{handleCellBlur:eu,handleCellFocus:em,handleCellMouseEnter:eh,handleCellMouseLeave:ef}=ii({cellRef:el});(0,l.useEffect)(()=>{if(F&&el.current)return function(e){let{element:t}=e;if(!t)return()=>{};let n={...e,pendingExit:!1};return a_.add(n),!aC&&g.XC&&(g.XC.addEventListener("pointermove",aN),aC=!0),()=>{a_.delete(n),aS()}}({element:el.current,shouldIgnore:()=>{let e,t;return $||(e=g.XC?.activeElement,!!(t=el.current)&&!!e&&(t===e||t.contains(e)))},onPointerExit:M})},[$,M,F]);let ep=(0,l.useRef)(null),eg=nW(Q,el,d),ey=U(),ex=V(),ev=ei(),eb=G(),ej=(0,eq.u)("cotd_ui"),e_=(0,l.useCallback)((e=!0)=>{e&&requestAnimationFrame(()=>el.current?.focus()),J(),d("USER_MINIMIZED_MARKERS")},[J,d]),eC=(0,l.useCallback)(()=>{n===n1.sI.Collapsed&&b.showMarkers?e_():eg()},[e_,eg,b.showMarkers,n]),{closeMarkerListDialog:eN,returnFocusRef:eS,isContextMenuOpen:eI}=ie({cellId:Q,actionBarRef:er}),ek=(0,l.useCallback)(()=>{eg(),S.shouldDisplayComments||M();let e=eb();e||(e={startLineNumber:o.blobLineNumber,endLineNumber:o.blobLineNumber,startOrientation:h?"left":"right",endOrientation:h?"left":"right",diffAnchor:r});let t=new O.L(e,u);g.cg?.dispatchEvent(t)},[eg,S.shouldDisplayComments,eb,u,M,o.blobLineNumber,h,r]),{isNewConversationDialogOpen:eL,shouldStartNewConversationWithSuggestedChange:eT,startNewConversation:eD,closeNewConversation:eE}=it({cellId:Q,onOpenDialog:ek}),eR=(0,l.useMemo)(()=>{if(!F)return!1;if(!S.shouldDisplayComments)if(ej)return!(0,R.Po)(o);else return(0,R.a1)(o,(0,R.Mk)(ex()));return!eL&&!!S.viewerCanComment&&(ej?!(0,R.Po)(o):(0,R.a1)(o,(0,R.Mk)(ex())))},[F,eL,S.shouldDisplayComments,S.viewerCanComment,ej,o,ex]),{baseOid:eA,headOid:eO}=(0,k.E4)(),{mutate:eP}=ad(),{effectiveRange:eF}=(0,k.L3)(),{newTreeEntry:eM,oldTreeEntry:e$}=et(),eB=ir(o,eT),eV=(0,l.useCallback)(()=>{eg?.(),eD?.()},[eg,eD]);(0,l.useEffect)(()=>{B&&ev(en,eV,(0,A.bo)(o))},[ev,eV,o,en,B]);let eU=(0,l.useRef)(!0),eG=(0,l.useMemo)(()=>!!S.shouldDisplayComments&&!!n&&(eo&&n===n1.sI.Collapsed?!b.userMinimized:(!!eL||!!eo)&&(n===n1.sI.Collapsed&&(!!eL||!!Z)||n===n1.sI.Visible&&(!!eo||!!eL||!!b.showMarkers)||!1)),[eo,Z,eL,b.showMarkers,b.userMinimized,n,S.shouldDisplayComments]),eH=(0,l.useMemo)(()=>(0,R.dT)(o),[o]),{addLineToSelection:eK,clearSelectedLines:eW,selectLine:ez}=X(),eZ=q();(0,l.useEffect)(()=>{H&&n===n1.sI.Visible&&eV()},[H,eV,n]);let eJ=(0,l.useCallback)(()=>{let e=eb();return!!e&&("right"===e.endOrientation&&!h&&e.endLineNumber===o.right||!!e&&"left"===e.endOrientation&&!!h&&e.endLineNumber===o.left)},[eb,h,o.left,o.right]),eY=(0,l.useCallback)(()=>{eJ()||eW()},[eW,eJ]),eX=(0,l.useCallback)(e=>{if(1!==e.buttons)return;ef();let t=h?o.left:o.right,n=(0,A.bo)(o);f||!t||eJ()?eK({lineKey:(0,A.bo)(o),orientation:h?"left":"right"},ew):ez({lineKey:n,firstLineSelectionOnDrag:{lineNumber:t,orientation:h?"left":"right",lineKey:n,shouldStartConversation:!0}},ew)},[eK,ef,eJ,h,f,o,ez]),e0=(0,l.useCallback)(e=>{let t=eZ();1===e.buttons&&t&&eK({lineKey:(0,A.bo)(o),orientation:h?"left":"right"},ew),eh()},[eK,eZ,eh,h,o]),e1=(0,l.useCallback)(()=>{let e=eZ();if(!e){S.shouldDisplayComments||eI||M(),ef();return}let t=eb(),n=t?.startOrientation==="right"&&"right"===e.orientation&&!h&&o.right===e.lineNumber,i=t?.startOrientation==="left"&&"left"===e.orientation&&h&&o.left===e.lineNumber;n||i||ef()},[eZ,eb,h,o.right,o.left,S.shouldDisplayComments,eI,ef,M]),e2=(0,l.useCallback)(()=>{d("USER_EXITED_MARKERS_DIALOG")},[d]),e3=(0,l.useCallback)(()=>{d("USER_MINIMIZED_MARKERS")},[d]),e4=(0,l.useCallback)((e=!0)=>{e_(e),eE()},[e_,eE]),e5=async()=>{let e=ey();await n3({diffLine:o,diffLines:e,getSelectedDiffLines:ex,getSelectedLineRange:eb,isSplit:p,isLeftSide:h})},e6=`ContentCell-left:${o.left}-right:${o.right}-leftSide:${h}`,e7=`inline-dialog-heading-${(0,l.useId)()}`,e8=(0,l.useMemo)(()=>{if(!f)return o.blobLineNumber;let e=eb();return e?.endLineNumber??o.blobLineNumber},[eb,f,o.blobLineNumber]),e9=(0,l.useMemo)(()=>{if(!f)return;let e=eb();return e?.startLineNumber},[eb,f]);return(0,i.jsxs)(ar,{ref:el,cellId:Q,columnIndex:t,commentDialogOpen:eL,diffAnchor:r,diffLine:o,enterDialogMode:eg,handleDiffSideCellSelectionBlocking:m,handleExitDialogMode:e2,handleUserClosedMarkersDialog:e3,lineAnchor:y,handleStartConversation:eV,hasThreads:eo,isLeftSide:h,isRowSelected:f,isSplit:p,className:(0,x.$)(`diff-text-cell ${h?"left-side-diff-cell":"right-side-diff-cell"} ${eH?"pt-4":""}`,{"border-right":h&&"HUNK"!==o.type}),style:{backgroundColor:(0,R.Yf)(o.type,!1,f),paddingRight:ed},onBlur:eu,onFocus:em,onMouseEnter:e0,onMouseLeave:e1,"aria-labelledby":Z?e7:void 0,role:Z?"dialog":"gridcell",children:[Z&&(0,i.jsx)("h1",{id:e7,className:"sr-only",children:"Comment view"}),(0,i.jsxs)("code",{className:(0,x.$)("diff-text syntax-highlighted-line",{addition:"ADDITION"===o.type,deletion:"DELETION"===o.type}),children:[D&&(0,i.jsx)("span",{className:"diff-text-marker",children:T}),(0,i.jsx)(eQ.$6,{html:L,className:(0,x.$)("diff-text-inner",{"color-fg-muted":"HUNK"===o.type})})]}),o.displayNoNewLineWarning&&(0,i.jsx)(c.NoEntryIcon,{size:16,className:"fgColor-danger"}),(F||o.isLastSelected&&h&&eb()?.endOrientation==="left"&&o.left===eb()?.endLineNumber||!h&&eb()?.endOrientation==="right"&&o.right===eb()?.endLineNumber)&&(0,i.jsx)(ai,{authorAvatarUrl:S.avatarUrl,authorLogin:S.login,ref:er,cellId:Q,cellRef:el,copilotChatReference:a,currentHunk:s,diffAnchor:r,diffLine:o,threads:N,annotations:e,enterDialogMode:ek,handleCopyCode:e5,hasDraftComment:H,isLeftSide:h,isSplit:p,nextHunk:j,onMouseDownAddCommentButton:eY,onMouseLeaveAddCommentButton:eX,previousHunk:w,showStartConversation:eR,shouldDisplayMinimizedComments:S.shouldDisplayComments,shouldDisplayCollapseComments:b.showMarkers,toggleViewingMarkers:eC,viewerData:K}),eG?(0,i.jsx)(nQ,{backgroundColor:(0,R.Yf)(o.type,!0,f),gridCellId:Q,gutterSizeOffset:ed,inlineMarkersRef:ep,cellRef:el,dispatchMarkersStatus:d,lineMarkersKey:en,manuallyUpdateCommentsWithThisThreadId:E,annotations:e,batchingEnabled:!0,conversationListThreads:N,fileAnchor:r,filePath:u,onCloseFocusMode:e_,isMarkerListOpen:!!el.current?.classList.contains("diff-text-cell")&&N.length>0,isRowSelected:f,lineType:o.type,returnFocusRef:eS,subjectId:C,suggestedChangesConfig:eB,onCloseConversationList:eN,onDeleteLineComment:()=>{N.length<=1&&setTimeout(()=>el.current?.focus())},viewerData:K,ghostUser:tB,children:eL&&(0,i.jsx)("div",{className:(0,x.$)(" border rounded-2 color-border-default",(N.length,"mt-2 mb-1")),children:(0,i.jsx)(tW,{addCommentDialogTitle:ec,anchorRef:el,diffAnchor:r,batchingEnabled:!0,filePath:u,focusOnMount:!(H&&n===n1.sI.Visible),isLeftSide:!!h,isInDialogMode:Z,isOpen:eL,lineNumber:e8,returnFocusRef:eS,startLineNumber:e9,subjectId:C,suggestedChangesConfig:eB,viewerData:K,onAddComment:({onCompleted:e,onError:t,submitBatch:n,text:i})=>{if(!o)return;let a=eb();if(ej){let s,r=new ReviewCommentFactory({filePath:u,newTreeEntry:eM,oldTreeEntry:e$,effectiveDiffRange:eF,submitBatch:n,text:i});eP(s=a&&f&&a.startLineNumber&&a.endLineNumber&&a.startLineNumber!==a.endLineNumber?r.multilineRequestData(a):r.lineRequestData(o,h),{onError:t,onSuccess:t=>{e?.(t.thread.id,t.comment?.databaseId),eg(),P(t.thread.id)}})}else{let s,r,l=!!a&&a.startLineNumber!==a.endLineNumber,d=o.blobLineNumber,c=h&&!(0,R.Ji)(o)?"left":"right";a&&l&&f&&(c="left"===a.endOrientation?"left":"right",r="left"===a.startOrientation?"left":"right",d=a.endLineNumber,s=a.startLineNumber),eP({text:i,line:d,path:u,side:c,startSide:r,submitBatch:n,startLine:s,comparisonEndOid:eO,comparisonStartOid:eA},{onError:t,onSuccess:t=>{e?.(t.thread.id,t.comment?.databaseId),eg(),P(t.thread.id)}})}},onCloseCommentDialog:e4})})}):null,!F&&n===n1.sI.Collapsed&&S.shouldDisplayComments&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{"aria-hidden":"true",style:{left:"compact"===S.lineSpacingPreference?"-8px":"-9px"},className:(0,x.$)("position-absolute top-0 d-flex user-select-none","ContentCell-module__in-progress-comment-indicator--Onob7"),children:H&&(0,i.jsx)(i1,{lineSpacingPreference:S.lineSpacingPreference,authorAvatarUrl:S.avatarUrl,authorLogin:S.login})}),(0,i.jsx)("div",{"aria-hidden":"true",className:(0,x.$)("position-absolute top-0 d-flex user-select-none","ContentCell-module__comment-indicator--Avv5C"),children:(0,i.jsx)(ip,{threads:N,annotations:e,shouldAnimateRef:eU,lineSpacingPreference:S.lineSpacingPreference})})]}),(0,i.jsx)(as,{annotationCount:es,threadCount:ea})]},e6)}),ak=(0,l.memo)(aI);try{aI.displayName||(aI.displayName="ContentCellUnmemoized")}catch{}try{ak.displayName||(ak.displayName="ContentCell")}catch{}let aL=["CONTEXT","INJECTED_CONTEXT"];function aT(e,t,n,i){return("CONTEXT"!==e.type||!t||!n)&&i>0}let aD=(0,l.memo)(aR),aE=(0,a.GV)();function aR(e){return aE?function(e){let t,n,a,r,o,d,c,u,m,h,f,p,g,y,v,b,j,w,_,C,N,S,I,k,L,T,D=(0,s.c)(70);if(D[0]!==e){let{children:i,columnIndex:s,diffAnchor:l,diffLine:x,handleDiffSideCellSelectionBlocking:b,isLeftSide:j,isRowSelected:w,isSplit:_,filePath:C,copilotChatReference:N,contentRef:S,contentColumnIndex:I,dispatchMarkersStatus:k,rowId:L,threadsAtPosition:T,annotationsAtPosition:E,...R}=e;n=i,a=s,d=l,c=x,m=b,h=j,f=w,p=_,o=S,r=I,u=k,y=L,v=T,t=E,g=R,D[0]=e,D[1]=t,D[2]=n,D[3]=a,D[4]=r,D[5]=o,D[6]=d,D[7]=c,D[8]=u,D[9]=m,D[10]=h,D[11]=f,D[12]=p,D[13]=g,D[14]=y,D[15]=v}else t=D[1],n=D[2],a=D[3],r=D[4],o=D[5],d=D[6],c=D[7],u=D[8],m=D[9],h=D[10],f=D[11],p=D[12],g=D[13],y=D[14],v=D[15];let E=(0,l.useRef)(null),O=c,P=q(),{addLineToSelection:F}=X();D[16]!==F||D[17]!==P||D[18]!==h||D[19]!==O?(b=e=>{1!==e.buttons||P()&&F({lineKey:(0,A.bo)(O),orientation:h?"left":"right"},ew)},D[16]=F,D[17]=P,D[18]=h,D[19]=O,D[20]=b):b=D[20];let M=b,{selectLine:$}=X(),B=G();D[21]!==F||D[22]!==B||D[23]!==h||D[24]!==O||D[25]!==$?(j=e=>{if(B()&&e.shiftKey)return void F({lineKey:(0,A.bo)(O),orientation:h?"left":"right"},ew);let t=h?O.left:O.right;t&&$({lineKey:(0,A.bo)(O),firstLineSelectionOnDrag:{orientation:h?"left":"right",lineNumber:t,shouldStartConversation:!1,lineKey:(0,A.bo)(O)}},ew)},D[21]=F,D[22]=B,D[23]=h,D[24]=O,D[25]=$,D[26]=j):j=D[26];let V=j,U=`LineNumberCell-left:${O.left}-right:${O.right}-leftSide:${h}`;D[27]!==r||D[28]!==y?(w=(0,R.u6)(y,r),D[27]=r,D[28]=y,D[29]=w):w=D[29];let H=w,K=nW(H,o,u);D[30]!==H||D[31]!==K?(_={cellId:H,onOpenDialog:K},D[30]=H,D[31]=K,D[32]=_):_=D[32];let{startNewConversation:W}=it(_);D[33]!==a||D[34]!==y?(C=(0,R.u6)(y,a),D[33]=a,D[34]=y,D[35]=C):C=D[35];let z=C;D[36]!==O.type?(N=(0,x.$)("diff-line-number position-relative",aL.includes(O.type)&&"diff-line-number-neutral"),D[36]=O.type,D[37]=N):N=D[37];let Q=!p&&0===a,Z=v.length+t.length;return D[38]!==h||D[39]!==p||D[40]!==O||D[41]!==Z?(S=aT(O,h,p,Z),D[38]=h,D[39]=p,D[40]=O,D[41]=Z,D[42]=S):S=D[42],D[43]!==f||D[44]!==O.type?(I=(0,R.Yf)(O.type,!0,f),D[43]=f,D[44]=O.type,D[45]=I):I=D[45],D[46]!==I?(k={backgroundColor:I,textAlign:"center"},D[46]=I,D[47]=k):k=D[47],D[48]!==n?(L=(0,i.jsx)("code",{children:n}),D[48]=n,D[49]=L):L=D[49],D[50]!==z||D[51]!==a||D[52]!==d||D[53]!==c||D[54]!==K||D[55]!==m||D[56]!==V||D[57]!==M||D[58]!==h||D[59]!==f||D[60]!==p||D[61]!==U||D[62]!==g||D[63]!==W||D[64]!==k||D[65]!==L||D[66]!==N||D[67]!==Q||D[68]!==S?(T=(0,i.jsx)(ar,{ref:E,cellId:z,className:N,columnIndex:a,diffAnchor:d,diffLine:c,"data-first-unified-line-number-cell":Q,enterDialogMode:K,handleDiffSideCellSelectionBlocking:m,hasThreads:S,style:k,handleDiffCellMouseDown:V,handleStartConversation:W,isLeftSide:h,isRowSelected:f,isSplit:p,onMouseEnter:M,...g,children:L},U),D[50]=z,D[51]=a,D[52]=d,D[53]=c,D[54]=K,D[55]=m,D[56]=V,D[57]=M,D[58]=h,D[59]=f,D[60]=p,D[61]=U,D[62]=g,D[63]=W,D[64]=k,D[65]=L,D[66]=N,D[67]=Q,D[68]=S,D[69]=T):T=D[69],T}(e):function({children:e,columnIndex:t,diffAnchor:n,diffLine:a,handleDiffSideCellSelectionBlocking:s,isLeftSide:r,isRowSelected:o,isSplit:d,filePath:c,copilotChatReference:u,contentRef:m,contentColumnIndex:h,dispatchMarkersStatus:f,rowId:p,threadsAtPosition:g,annotationsAtPosition:y,...v}){let b=(0,l.useRef)(null),j=q(),{addLineToSelection:w}=X(),_=(0,l.useCallback)(e=>{1!==e.buttons||j()&&w({lineKey:(0,A.bo)(a),orientation:r?"left":"right"},ew)},[j,w,a,r]),{selectLine:C}=X(),N=G(),S=`LineNumberCell-left:${a.left}-right:${a.right}-leftSide:${r}`,I=(0,R.u6)(p,h),k=nW(I,m,f),{startNewConversation:L}=it({cellId:I,onOpenDialog:k}),T=(0,R.u6)(p,t);return(0,i.jsx)(ar,{ref:b,cellId:T,className:(0,x.$)("diff-line-number position-relative",aL.includes(a.type)&&"diff-line-number-neutral"),columnIndex:t,diffAnchor:n,diffLine:a,"data-first-unified-line-number-cell":!d&&0===t,enterDialogMode:k,handleDiffSideCellSelectionBlocking:s,hasThreads:aT(a,r,d,g.length+y.length),style:{backgroundColor:(0,R.Yf)(a.type,!0,o),textAlign:"center"},handleDiffCellMouseDown:e=>{if(N()&&e.shiftKey)return void w({lineKey:(0,A.bo)(a),orientation:r?"left":"right"},ew);let t=r?a.left:a.right;t&&C({lineKey:(0,A.bo)(a),firstLineSelectionOnDrag:{orientation:r?"left":"right",lineNumber:t,shouldStartConversation:!1,lineKey:(0,A.bo)(a)}},ew)},handleStartConversation:L,isLeftSide:r,isRowSelected:o,isSplit:d,onMouseEnter:_,...v,children:(0,i.jsx)("code",{children:e})},S)}(e)}try{aD.displayName||(aD.displayName="LineNumberCell")}catch{}try{aR.displayName||(aR.displayName="LineNumberCellUnmemoized")}catch{}let aA=(0,a.GV)()?function(e){let t,n,a=(0,s.c)(9),{columnIndex:r,diffAnchor:l,diffLine:o,isLeftSide:d,isSplit:c,showRightBorder:u}=e;return a[0]!==u?(t=(0,x.$)("empty-diff-line",{"border-right":u}),a[0]=u,a[1]=t):t=a[1],a[2]!==r||a[3]!==l||a[4]!==o||a[5]!==d||a[6]!==c||a[7]!==t?(n=(0,i.jsx)(ar,{className:t,columnIndex:r,diffAnchor:l,diffLine:o,isLeftSide:d,isSplit:c}),a[2]=r,a[3]=l,a[4]=o,a[5]=d,a[6]=c,a[7]=t,a[8]=n):n=a[8],n}:function({columnIndex:e,diffAnchor:t,diffLine:n,isLeftSide:a,isSplit:s,showRightBorder:r}){return(0,i.jsx)(ar,{className:(0,x.$)("empty-diff-line",{"border-right":r}),columnIndex:e,diffAnchor:t,diffLine:n,isLeftSide:a,isSplit:s})};try{aA.displayName||(aA.displayName="EmptyCell")}catch{}function aO(e,t){switch(t){case"SHOW_MARKERS":return{userMinimized:!1,showMarkers:!0};case"USER_EXPANDED_MARKERS":return{showMarkers:!0,userMinimized:!1};case"USER_MINIMIZED_MARKERS":return{userMinimized:!0,showMarkers:!1};case"USER_EXITED_MARKERS_DIALOG":return{...e,showMarkers:!1}}}let aP=(0,a.GV)()?function(e){let t,n,i,a,r=(0,s.c)(7),o=e===n1.sI.Collapsed;r[0]!==o?(t={userMinimized:o,showMarkers:!1},r[0]=o,r[1]=t):t=r[1];let[d,c]=(0,l.useReducer)(aO,t),u=(0,l.useRef)(e);return r[2]!==e?(n=()=>{u.current!==e&&(u.current=e,e===n1.sI.Visible?c("SHOW_MARKERS"):c("USER_MINIMIZED_MARKERS"))},i=[e,c],r[2]=e,r[3]=n,r[4]=i):(n=r[3],i=r[4]),(0,l.useEffect)(n,i),r[5]!==d?(a=[d,c],r[5]=d,r[6]=a):a=r[6],a}:function(e){let[t,n]=(0,l.useReducer)(aO,{userMinimized:e===n1.sI.Collapsed,showMarkers:!1}),i=(0,l.useRef)(e);return(0,l.useEffect)(()=>{i.current!==e&&(i.current=e,e===n1.sI.Visible?n("SHOW_MARKERS"):n("USER_MINIMIZED_MARKERS"))},[e,n]),[t,n]};var aF=n(87825);let aM=(0,a.GV)()?e=>{let t,n,a,r,o,d,c=(0,s.c)(67),{annotationsAtPosition:u,commentsPreference:m,copilotChatReference:h,currentHunk:f,diffAnchor:p,diffLine:g,filePath:y,lineAnchor:x,handleDiffSideCellSelectionBlocking:v,hasHiddenUnicodeCharacters:b,isLeftSide:j,isRowSelected:w,isSplit:_,nextHunk:C,previousHunk:N,rowId:S,subjectId:I,threadsAtPosition:k,viewerData:L}=e,T=(0,l.useRef)(null),D="ADDITION"!==g.type,E=!_||j,R="DELETION"!==g.type,A=!_||!j;c[0]!==v?(t=()=>{v&&v("left")},c[0]=v,c[1]=t):t=c[1];let O=t;c[2]!==v?(n=()=>{v&&v("right")},c[2]=v,c[3]=n):n=c[3];let P=n,F=_?j?1:3:2,[M,$]=aP(m??n1.sI.Visible);c[4]!==u||c[5]!==F||c[6]!==h||c[7]!==p||c[8]!==g||c[9]!==$||c[10]!==y||c[11]!==P||c[12]!==b||c[13]!==j||c[14]!==w||c[15]!==_||c[16]!==g.left||c[17]!==S||c[18]!==D||c[19]!==E||c[20]!==R||c[21]!==k?(a=E&&(0,i.jsxs)(aD,{threadsAtPosition:k,annotationsAtPosition:u,copilotChatReference:h,columnIndex:0,contentColumnIndex:F,contentRef:T,diffAnchor:p,diffLine:g,dispatchMarkersStatus:$,filePath:y,handleDiffSideCellSelectionBlocking:P,isLeftSide:j,isRowSelected:w,isSplit:_,rowId:S,children:[b&&!R&&(0,i.jsx)(aB,{children:(0,i.jsx)(aF.o,{})}),D&&g.left]}),c[4]=u,c[5]=F,c[6]=h,c[7]=p,c[8]=g,c[9]=$,c[10]=y,c[11]=P,c[12]=b,c[13]=j,c[14]=w,c[15]=_,c[16]=g.left,c[17]=S,c[18]=D,c[19]=E,c[20]=R,c[21]=k,c[22]=a):a=c[22],c[23]!==u||c[24]!==F||c[25]!==h||c[26]!==p||c[27]!==g||c[28]!==$||c[29]!==y||c[30]!==O||c[31]!==b||c[32]!==j||c[33]!==w||c[34]!==_||c[35]!==g.right||c[36]!==S||c[37]!==R||c[38]!==A||c[39]!==k?(r=A&&(0,i.jsxs)(aD,{annotationsAtPosition:u,copilotChatReference:h,columnIndex:_?2:1,contentColumnIndex:F,contentRef:T,diffAnchor:p,diffLine:g,dispatchMarkersStatus:$,filePath:y,handleDiffSideCellSelectionBlocking:O,isLeftSide:j,isRowSelected:w,isSplit:_,rowId:S,threadsAtPosition:k,children:[b&&R&&(0,i.jsx)(aB,{children:(0,i.jsx)(aF.o,{})}),R&&g.right]}),c[23]=u,c[24]=F,c[25]=h,c[26]=p,c[27]=g,c[28]=$,c[29]=y,c[30]=O,c[31]=b,c[32]=j,c[33]=w,c[34]=_,c[35]=g.right,c[36]=S,c[37]=R,c[38]=A,c[39]=k,c[40]=r):r=c[40];let B=j?P:O;return c[41]!==u||c[42]!==m||c[43]!==F||c[44]!==h||c[45]!==f||c[46]!==p||c[47]!==g||c[48]!==$||c[49]!==y||c[50]!==j||c[51]!==w||c[52]!==_||c[53]!==x||c[54]!==M||c[55]!==C||c[56]!==N||c[57]!==S||c[58]!==I||c[59]!==B||c[60]!==k||c[61]!==L?(o=(0,i.jsx)(ak,{annotationsAtPosition:u,commentsPreference:m,copilotChatReference:h,columnIndex:F,currentHunk:f,diffAnchor:p,diffLine:g,dispatchMarkersStatus:$,filePath:y,lineAnchor:x,handleDiffSideCellSelectionBlocking:B,isLeftSide:j,isRowSelected:w,isSplit:_,markersStatus:M,nextHunk:C,previousHunk:N,ref:T,rowId:S,subjectId:I,threadsAtPosition:k,viewerData:L}),c[41]=u,c[42]=m,c[43]=F,c[44]=h,c[45]=f,c[46]=p,c[47]=g,c[48]=$,c[49]=y,c[50]=j,c[51]=w,c[52]=_,c[53]=x,c[54]=M,c[55]=C,c[56]=N,c[57]=S,c[58]=I,c[59]=B,c[60]=k,c[61]=L,c[62]=o):o=c[62],c[63]!==a||c[64]!==r||c[65]!==o?(d=(0,i.jsxs)(n8,{children:[a,r,o]}),c[63]=a,c[64]=r,c[65]=o,c[66]=d):d=c[66],d}:({annotationsAtPosition:e,commentsPreference:t,copilotChatReference:n,currentHunk:a,diffAnchor:s,diffLine:r,filePath:o,lineAnchor:d,handleDiffSideCellSelectionBlocking:c,hasHiddenUnicodeCharacters:u,isLeftSide:m,isRowSelected:h,isSplit:f,nextHunk:p,previousHunk:g,rowId:y,subjectId:x,threadsAtPosition:v,viewerData:b})=>{let j=(0,l.useRef)(null),w="ADDITION"!==r.type,_=!f||m,C="DELETION"!==r.type,N=!f||!m,S=(0,l.useCallback)(()=>{c&&c("left")},[c]),I=(0,l.useCallback)(()=>{c&&c("right")},[c]),k=f?m?1:3:2,[L,T]=aP(t??n1.sI.Visible);return(0,i.jsxs)(n8,{children:[_&&(0,i.jsxs)(aD,{threadsAtPosition:v,annotationsAtPosition:e,copilotChatReference:n,columnIndex:0,contentColumnIndex:k,contentRef:j,diffAnchor:s,diffLine:r,dispatchMarkersStatus:T,filePath:o,handleDiffSideCellSelectionBlocking:I,isLeftSide:m,isRowSelected:h,isSplit:f,rowId:y,children:[u&&!C&&(0,i.jsx)(aB,{children:(0,i.jsx)(aF.o,{})}),w&&r.left]}),N&&(0,i.jsxs)(aD,{annotationsAtPosition:e,copilotChatReference:n,columnIndex:f?2:1,contentColumnIndex:k,contentRef:j,diffAnchor:s,diffLine:r,dispatchMarkersStatus:T,filePath:o,handleDiffSideCellSelectionBlocking:S,isLeftSide:m,isRowSelected:h,isSplit:f,rowId:y,threadsAtPosition:v,children:[u&&C&&(0,i.jsx)(aB,{children:(0,i.jsx)(aF.o,{})}),C&&r.right]}),(0,i.jsx)(ak,{annotationsAtPosition:e,commentsPreference:t,copilotChatReference:n,columnIndex:k,currentHunk:a,diffAnchor:s,diffLine:r,dispatchMarkersStatus:T,filePath:o,lineAnchor:d,handleDiffSideCellSelectionBlocking:m?I:S,isLeftSide:m,isRowSelected:h,isSplit:f,markersStatus:L,nextHunk:p,previousHunk:g,ref:j,rowId:y,subjectId:x,threadsAtPosition:v,viewerData:b})]})},a$=(0,a.GV)()?e=>{let t,n=(0,s.c)(41),{annotationsAtPosition:a,commentsPreference:r,copilotChatReference:l,currentHunk:o,diffLine:d,diffAnchor:c,filePath:u,handleDiffSideCellSelectionBlocking:m,hasHiddenUnicodeCharacters:h,isLeftSide:f,isRowSelected:p,isSplit:g,nextHunk:y,previousHunk:x,rowId:v,subjectId:b,threadsAtPosition:j,viewerData:w}=e;if((0,R.Po)(d)){let e,t,a,s=2*!f;n[0]!==c||n[1]!==d||n[2]!==f||n[3]!==g||n[4]!==s?(e=(0,i.jsx)(aA,{columnIndex:s,diffAnchor:c,diffLine:d,isLeftSide:f,isSplit:g}),n[0]=c,n[1]=d,n[2]=f,n[3]=g,n[4]=s,n[5]=e):e=n[5];let r=f?1:3;return n[6]!==c||n[7]!==d||n[8]!==f||n[9]!==g||n[10]!==r?(t=(0,i.jsx)(aA,{columnIndex:r,diffAnchor:c,diffLine:d,isLeftSide:f,isSplit:g}),n[6]=c,n[7]=d,n[8]=f,n[9]=g,n[10]=r,n[11]=t):t=n[11],n[12]!==e||n[13]!==t?(a=(0,i.jsxs)(i.Fragment,{children:[e,t]}),n[12]=e,n[13]=t,n[14]=a):a=n[14],a}if(n[15]!==c||n[16]!==d.left||n[17]!==d.right||n[18]!==d.type||n[19]!==f){let e=f?"left":(0,e2.XU)(d.type),i="left"===e?d.left:d.right;t=(0,e2.IQ)(c,e,i??0),n[15]=c,n[16]=d.left,n[17]=d.right,n[18]=d.type,n[19]=f,n[20]=t}else t=n[20];let _=t;switch(d.type){case"HUNK":return null;case"ADDITION":case"DELETION":case"CONTEXT":case"INJECTED_CONTEXT":{let e;return n[21]!==a||n[22]!==r||n[23]!==l||n[24]!==o||n[25]!==c||n[26]!==d||n[27]!==u||n[28]!==m||n[29]!==h||n[30]!==f||n[31]!==p||n[32]!==g||n[33]!==_||n[34]!==y||n[35]!==x||n[36]!==v||n[37]!==b||n[38]!==j||n[39]!==w?(e=(0,i.jsx)(aU,{annotationsAtPosition:a,commentsPreference:r,copilotChatReference:l,currentHunk:o,diffAnchor:c,diffLine:d,filePath:u,handleDiffSideCellSelectionBlocking:m,hasHiddenUnicodeCharacters:h,isLeftSide:f,isRowSelected:p,isSplit:g,lineAnchor:_,nextHunk:y,previousHunk:x,rowId:v,subjectId:b,threadsAtPosition:j,viewerData:w}),n[21]=a,n[22]=r,n[23]=l,n[24]=o,n[25]=c,n[26]=d,n[27]=u,n[28]=m,n[29]=h,n[30]=f,n[31]=p,n[32]=g,n[33]=_,n[34]=y,n[35]=x,n[36]=v,n[37]=b,n[38]=j,n[39]=w,n[40]=e):e=n[40],e}default:throw Error(`cannot handle type ${d.type}`)}}:({annotationsAtPosition:e,commentsPreference:t,copilotChatReference:n,currentHunk:a,diffLine:s,diffAnchor:r,filePath:l,handleDiffSideCellSelectionBlocking:o,hasHiddenUnicodeCharacters:d,isLeftSide:c,isRowSelected:u,isSplit:m,nextHunk:h,previousHunk:f,rowId:p,subjectId:g,threadsAtPosition:y,viewerData:x})=>{if((0,R.Po)(s))return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(aA,{columnIndex:2*!c,diffAnchor:r,diffLine:s,isLeftSide:c,isSplit:m}),(0,i.jsx)(aA,{columnIndex:c?1:3,diffAnchor:r,diffLine:s,isLeftSide:c,isSplit:m})]});let v=c?"left":(0,e2.XU)(s.type),b="left"===v?s.left:s.right,j=(0,e2.IQ)(r,v,b??0);switch(s.type){case"HUNK":return null;case"ADDITION":case"DELETION":case"CONTEXT":case"INJECTED_CONTEXT":return(0,i.jsx)(aU,{annotationsAtPosition:e,commentsPreference:t,copilotChatReference:n,currentHunk:a,diffAnchor:r,diffLine:s,filePath:l,handleDiffSideCellSelectionBlocking:o,hasHiddenUnicodeCharacters:d,isLeftSide:c,isRowSelected:u,isSplit:m,lineAnchor:j,nextHunk:h,previousHunk:f,rowId:p,subjectId:g,threadsAtPosition:y,viewerData:x});default:throw Error(`cannot handle type ${s.type}`)}},aB=(0,a.GV)()?function(e){let t,n,a=(0,s.c)(3),{children:r}=e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(t={left:"-1px",zIndex:"1"},a[0]=t):t=a[0],a[1]!==r?(n=(0,i.jsx)("span",{className:"position-absolute",style:t,children:r}),a[1]=r,a[2]=n):n=a[2],n}:function({children:e}){return(0,i.jsx)("span",{className:"position-absolute",style:{left:"-1px",zIndex:"1"},children:e})},aV=l.memo(a$),aU=l.memo(aM);try{aM.displayName||(aM.displayName="CodeDiffLineUnmemoized")}catch{}try{a$.displayName||(a$.displayName="DiffLineSideUnmemoized")}catch{}try{aB.displayName||(aB.displayName="DiffCodeAlert")}catch{}try{aV.displayName||(aV.displayName="DiffLineSide")}catch{}try{aU.displayName||(aU.displayName="CodeDiffLine")}catch{}let aq=(0,a.GV)()?function(e){let t,n,a,r=(0,s.c)(5),{isSplit:l}=e,o=!l&&"hunk-kebab-icon-unified";return r[0]!==o?(t=(0,x.$)("hunk-kebab-icon pr-2 pb-1",o),r[0]=o,r[1]=t):t=r[1],r[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(c.KebabHorizontalIcon,{}),r[2]=n):n=r[2],r[3]!==t?(a=(0,i.jsx)("div",{className:t,children:n}),r[3]=t,r[4]=a):a=r[4],a}:function({isSplit:e}){return(0,i.jsx)("div",{className:(0,x.$)("hunk-kebab-icon pr-2 pb-1",!e&&"hunk-kebab-icon-unified"),children:(0,i.jsx)(c.KebabHorizontalIcon,{})})};try{aq.displayName||(aq.displayName="HunkKebabIcon")}catch{}let aG=(0,a.GV)()?function(e){let t,n,i,a,r,o,d,c=(0,s.c)(17),[u,m]=(0,l.useState)(!1),[h,f]=(0,l.useState)(!1),p=u?0:-1;c[0]!==e?(t=t=>{e.current&&e.current.contains(t.relatedTarget)||m(!1)},c[0]=e,c[1]=t):t=c[1];let g=t;c[2]!==e?(n=()=>{e.current===document.activeElement&&m(!0)},c[2]=e,c[3]=n):n=c[3];let y=n;c[4]!==e?(i=t=>{e.current&&!e.current.contains(t.relatedTarget)&&m(!1),f(!1)},c[4]=e,c[5]=i):i=c[5];let x=i;c[6]===Symbol.for("react.memo_cache_sentinel")?(a=e=>{e.stopPropagation(),f(!0)},c[6]=a):a=c[6];let v=a;c[7]!==g||c[8]!==y?(r={onFocus:y,onBlur:g},c[7]=g,c[8]=y,c[9]=r):r=c[9];let b=r,j=!h;c[10]!==p||c[11]!==x||c[12]!==j?(o={"aria-hidden":j,tabIndex:p,onBlur:x,onFocusCapture:v,onKeyDownCapture:aH},c[10]=p,c[11]=x,c[12]=j,c[13]=o):o=c[13];let w=o;return c[14]!==w||c[15]!==b?(d=[b,w],c[14]=w,c[15]=b,c[16]=d):d=c[16],d}:function(e){let[t,n]=(0,l.useState)(!1),[i,a]=(0,l.useState)(!1),s=(0,l.useCallback)(t=>{e.current&&e.current.contains(t.relatedTarget)||n(!1)},[e]);return[{onFocus:(0,l.useCallback)(()=>{e.current===document.activeElement&&n(!0)},[e]),onBlur:s},{"aria-hidden":!i,tabIndex:t?0:-1,onBlur:(0,l.useCallback)(t=>{e.current&&!e.current.contains(t.relatedTarget)&&n(!1),a(!1)},[e]),onFocusCapture:(0,l.useCallback)(e=>{e.stopPropagation(),a(!0)},[]),onKeyDownCapture:(0,l.useCallback)(e=>{tU(e.key)&&e.stopPropagation()},[])}]};function aH(e){tU(e.key)&&e.stopPropagation()}let aK=(0,a.GV)()?function(e){let t,n,a,r,o,d=(0,s.c)(18),{diffAnchor:c,diffLine:u,isLeftSide:m,isSplit:h,renderHunkButton:f}=e,p=(0,l.useRef)(null),[g,y]=aG(p);if((0,R.Po)(u))return null;let x=`HunkCell-left:${u.left}-right:${u.right}`;d[0]===Symbol.for("react.memo_cache_sentinel")?(t={backgroundColor:"var(--bgColor-accent-muted, var(--color-accent-subtle))",flexGrow:1},d[0]=t):t=d[0],d[1]!==y||d[2]!==h||d[3]!==f?(n=f?.(y)??(0,i.jsx)(aq,{isSplit:h}),d[1]=y,d[2]=h,d[3]=f,d[4]=n):n=d[4];let v=u.html;return d[5]!==v?(a=(0,i.jsx)("code",{className:"diff-text-cell hunk",children:(0,i.jsx)(eQ.$6,{className:"diff-text-inner color-fg-muted",html:v})}),d[5]=v,d[6]=a):a=d[6],d[7]!==n||d[8]!==a?(r=(0,i.jsxs)("div",{className:"d-flex flex-row",children:[n,a]}),d[7]=n,d[8]=a,d[9]=r):r=d[9],d[10]!==g||d[11]!==c||d[12]!==u||d[13]!==m||d[14]!==h||d[15]!==x||d[16]!==r?(o=(0,i.jsx)(ar,{className:"diff-hunk-cell",colSpan:4,columnIndex:0,diffAnchor:c,diffLine:u,isLeftSide:m,isSplit:h,ref:p,style:t,...g,children:r},x),d[10]=g,d[11]=c,d[12]=u,d[13]=m,d[14]=h,d[15]=x,d[16]=r,d[17]=o):o=d[17],o}:function({diffAnchor:e,diffLine:t,isLeftSide:n,isSplit:a,renderHunkButton:s}){let r=(0,l.useRef)(null),[o,d]=aG(r);if((0,R.Po)(t))return null;let c=`HunkCell-left:${t.left}-right:${t.right}`;return(0,i.jsx)(ar,{className:"diff-hunk-cell",colSpan:4,columnIndex:0,diffAnchor:e,diffLine:t,isLeftSide:n,isSplit:a,ref:r,style:{backgroundColor:"var(--bgColor-accent-muted, var(--color-accent-subtle))",flexGrow:1},...o,children:(0,i.jsxs)("div",{className:"d-flex flex-row",children:[s?.(d)??(0,i.jsx)(aq,{isSplit:a}),(0,i.jsx)("code",{className:"diff-text-cell hunk",children:(0,i.jsx)(eQ.$6,{className:"diff-text-inner color-fg-muted",html:t.html})})]})},c)};try{aK.displayName||(aK.displayName="HunkCell")}catch{}let aW="ExpandableHunkHeaderDiffLine-module__expand-button-line--CbsbZ",az="ExpandableHunkHeaderDiffLine-module__expand-up-and-down--amzYl",aQ="ExpandableHunkHeaderDiffLine-module__expand-button-unified--pt9f0",aZ=(0,a.GV)()?function(e){let t,n,a,r,l,o,d,c,u,m,h,f,p=(0,s.c)(24);p[0]!==e?({direction:l,icon:t,isSplit:o,label:d,onClick:c,ariaLabel:a,className:r,...n}=e,p[0]=e,p[1]=t,p[2]=n,p[3]=a,p[4]=r,p[5]=l,p[6]=o,p[7]=d,p[8]=c):(t=p[1],n=p[2],a=p[3],r=p[4],l=p[5],o=p[6],d=p[7],c=p[8]);let{sendAnalyticsEvent:g}=(0,tK.s)();p[9]!==c||p[10]!==g?(u=()=>{c(),g("file_entry.expand_hunk","FILE_EXPANDER_BUTTON")},p[9]=c,p[10]=g,p[11]=u):u=p[11];let y=!o&&aQ;p[12]!==r||p[13]!==y?(m=(0,x.$)("Button Button--iconOnly Button--invisible",aW,y,r),p[12]=r,p[13]=y,p[14]=m):m=p[14];let v=a??d;return p[15]!==t?(h=(0,i.jsx)(t,{}),p[15]=t,p[16]=h):h=p[16],p[17]!==n||p[18]!==l||p[19]!==u||p[20]!==m||p[21]!==v||p[22]!==h?(f=(0,i.jsx)("button",{onClick:u,className:m,"aria-label":v,"data-direction":l,...n,children:h}),p[17]=n,p[18]=l,p[19]=u,p[20]=m,p[21]=v,p[22]=h,p[23]=f):f=p[23],f}:function({direction:e,icon:t,isSplit:n,label:a,onClick:s,ariaLabel:r,className:l,...o}){let{sendAnalyticsEvent:d}=(0,tK.s)();return(0,i.jsx)("button",{onClick:()=>{s(),d("file_entry.expand_hunk","FILE_EXPANDER_BUTTON")},className:(0,x.$)("Button Button--iconOnly Button--invisible",aW,!n&&aQ,l),"aria-label":r??a,"data-direction":e,...o,children:(0,i.jsx)(t,{})})},aJ=(0,a.GV)()?function(e){let t,n,a,r,l,o,d,u,m,h,f,p=(0,s.c)(25),{currentHunk:g,diffAnchor:y,diffLine:x,fileLineCount:v,isLeftSide:b,isSplit:j,nextHunk:w,nextLine:_,previousHunk:C,prevLine:N}=e;p[0]!==g||p[1]!==w||p[2]!==C?(t={currentHunk:g,nextHunk:w,previousHunk:C},p[0]=g,p[1]=w,p[2]=C,p[3]=t):t=p[3];let{expandStartOfHunk:S,expandEndOfPreviousHunk:I}=iy(t),k=0===x.position&&0!==x.blobLineNumber||!N,L=!_,T=0===x.blobLineNumber,D=k||L,E=L&&N?.blobLineNumber===v;e:{if(D||x.blobLineNumber<=0){n=!1;break e}if(x.blobLineNumber-N.blobLineNumber<=20||_.blobLineNumber-x.blobLineNumber>=20){n=!0;break e}n=!1}let R=n;t:{if(D||E){a=!1;break t}if(x.blobLineNumber-N.blobLineNumber>20){a=!0;break t}a=!1}let A=a;n:{if(x.blobLineNumber<=0||T){r=!1;break n}if(k){r=!0;break n}r=!1}let O=r;i:{if(k||E){l=!1;break i}if(L){l=!0;break i}l=!1}let P=l;a:{switch(!0){case R:o="expand-all";break a;case A:o="expand-up-and-down";break a;case O:o="expand-up";break a;case P:o="expand-down";break a}o=void 0}let F=o;p[4]!==S?(d=()=>S(),p[4]=S,p[5]=d):d=p[5];let M=d;p[6]!==I?(u=()=>I(),p[6]=I,p[7]=u):u=p[7];let $=u;p[8]!==S?(m=()=>S(),p[8]=S,p[9]=m):m=p[9];let B=m,V=K();p[10]!==F||p[11]!==M||p[12]!==B||p[13]!==$||p[14]!==V||p[15]!==j||p[16]!==_?.blobLineNumber||p[17]!==N?.blobLineNumber?(h=e=>{if(V.has(iP.YR.expandLines))return null;switch(F){case"expand-all":return(0,i.jsx)(aZ,{...e,direction:"all",icon:c.UnfoldIcon,isSplit:j,label:`Expand file from line ${N?.blobLineNumber||""} to line ${_?.blobLineNumber||""}`,onClick:B});case"expand-up-and-down":return(0,i.jsxs)("div",{className:"d-flex flex-column",children:[(0,i.jsx)(aZ,{...e,direction:"down",icon:c.FoldDownIcon,isSplit:j,label:`Expand file down from line ${N?.blobLineNumber||""}`,className:az,onClick:$}),(0,i.jsx)(aZ,{...e,direction:"up",icon:c.FoldUpIcon,isSplit:j,label:`Expand file up from line ${_?.blobLineNumber||""}`,className:az,onClick:M})]});case"expand-up":return(0,i.jsx)(aZ,{...e,direction:"up",icon:c.FoldUpIcon,isSplit:j,label:`Expand file up from line ${_?.blobLineNumber||""}`,onClick:M});case"expand-down":return(0,i.jsx)(aZ,{...e,direction:"down",icon:c.FoldDownIcon,isSplit:j,label:`Expand file down from line ${N?.blobLineNumber||""}`,onClick:$});default:return null}},p[10]=F,p[11]=M,p[12]=B,p[13]=$,p[14]=V,p[15]=j,p[16]=_?.blobLineNumber,p[17]=N?.blobLineNumber,p[18]=h):h=p[18];let U=h;return p[19]!==y||p[20]!==x||p[21]!==b||p[22]!==j||p[23]!==U?(f=(0,i.jsx)(aK,{renderHunkButton:U,diffAnchor:y,diffLine:x,isLeftSide:b,isSplit:j}),p[19]=y,p[20]=x,p[21]=b,p[22]=j,p[23]=U,p[24]=f):f=p[24],f}:function({currentHunk:e,diffAnchor:t,diffLine:n,fileLineCount:a,isLeftSide:s,isSplit:r,nextHunk:o,nextLine:d,previousHunk:u,prevLine:m}){let{expandStartOfHunk:h,expandEndOfPreviousHunk:f}=iy({currentHunk:e,nextHunk:o,previousHunk:u}),p=0===n.position&&0!==n.blobLineNumber||!m,g=!d,y=0===n.blobLineNumber,x=p||g,v=g&&m?.blobLineNumber===a,b=(0,l.useMemo)(()=>!x&&!(n.blobLineNumber<=0)&&(!!(n.blobLineNumber-m.blobLineNumber<=20)||!!(d.blobLineNumber-n.blobLineNumber>=20)),[x,n,d,m]),j=(0,l.useMemo)(()=>!x&&!v&&n.blobLineNumber-m.blobLineNumber>20,[x,v,n,m]),w=(0,l.useMemo)(()=>!(n.blobLineNumber<=0)&&!y&&!!p,[p,y,n]),_=(0,l.useMemo)(()=>!p&&!v&&!!g,[p,g,v]),C=(0,l.useMemo)(()=>{switch(!0){case b:return"expand-all";case j:return"expand-up-and-down";case w:return"expand-up";case _:return"expand-down"}},[b,j,w,_]),N=()=>h(),S=()=>f(),I=()=>h(),k=K();return(0,i.jsx)(aK,{renderHunkButton:e=>{if(k.has(iP.YR.expandLines))return null;switch(C){case"expand-all":return(0,i.jsx)(aZ,{...e,direction:"all",icon:c.UnfoldIcon,isSplit:r,label:`Expand file from line ${m?.blobLineNumber||""} to line ${d?.blobLineNumber||""}`,onClick:I});case"expand-up-and-down":return(0,i.jsxs)("div",{className:"d-flex flex-column",children:[(0,i.jsx)(aZ,{...e,direction:"down",icon:c.FoldDownIcon,isSplit:r,label:`Expand file down from line ${m?.blobLineNumber||""}`,className:az,onClick:S}),(0,i.jsx)(aZ,{...e,direction:"up",icon:c.FoldUpIcon,isSplit:r,label:`Expand file up from line ${d?.blobLineNumber||""}`,className:az,onClick:N})]});case"expand-up":return(0,i.jsx)(aZ,{...e,direction:"up",icon:c.FoldUpIcon,isSplit:r,label:`Expand file up from line ${d?.blobLineNumber||""}`,onClick:N});case"expand-down":return(0,i.jsx)(aZ,{...e,direction:"down",icon:c.FoldDownIcon,isSplit:r,label:`Expand file down from line ${m?.blobLineNumber||""}`,onClick:S});default:return null}},diffAnchor:t,diffLine:n,isLeftSide:s,isSplit:r})};try{aZ.displayName||(aZ.displayName="ExpandButtonLine")}catch{}try{aJ.displayName||(aJ.displayName="ExpandableHunkHeaderDiffLine")}catch{}var aY=n(12918);let aX=(0,l.memo)((0,a.GV)()?function(e){let t,n,a,r,l,o,d,c,u,m,h,f=(0,s.c)(54),{copilotChatReference:p,diffHasHiddenUnicodeCharacters:g,filePath:y,handleDiffSideCellSelectionBlocking:x,hunksData:v,leftDiffLine:b,nextDiffLine:j,prevDiffLine:w,rightDiffLine:_,showHiddenUnicode:C,subjectId:N,viewerData:S}=e,I=Q(),L=Z();f[0]!==g||f[1]!==C?(t=e=>{let t=!1;return g&&!(0,R.Po)(e)&&(t=(0,tH.Y)(e.text),C&&t&&(e=e.html?{...e,html:(0,aY.Gx)(e.html)??e.html}:{...e,text:(0,tH.TA)(e.text)})),[e,t]},f[0]=g,f[1]=C,f[2]=t):t=f[2];let T=t,[D,E]=T(b),[A,O]=T(_),P=Y((0,R.Po)(D)?void 0:D),F=Y((0,R.Po)(A)?void 0:A);e:{let e;if((0,R.Po)(D)){n=D;break e}f[3]!==D||f[4]!==P?(e={...D,...P},f[3]=D,f[4]=P,f[5]=e):e=f[5],n=e}let M=n;t:{let e;if((0,R.Po)(A)){a=A;break t}f[6]!==A||f[7]!==F?(e={...A,...F},f[6]=A,f[7]=F,f[8]=e):e=f[8],a=e}let $=a;f[9]!==M?(r=(0,R.qK)(M)&&"HUNK"===M.type,f[9]=M,f[10]=r):r=f[10];let B=r;f[11]!==I||f[12]!==b||f[13]!==_?(l=(0,R.qX)(I,b,_),f[11]=I,f[12]=b,f[13]=_,f[14]=l):l=f[14];let V=l;f[15]!==M||f[16]!==$?(o=(0,R.Po)(M)?(0,R.Po)($)?void 0:$:M,f[15]=M,f[16]=$,f[17]=o):o=f[17];let U=o;f[18]!==D?(d=(0,R.Po)(D)?void 0:(0,R.oH)(D.left,"LEFT"),f[18]=D,f[19]=d):d=f[19];let q=d,{threads:G,annotations:H,commentsPreference:K}=(0,k.rP)(y,q??"");f[20]!==A?(c=(0,R.Po)(A)?void 0:(0,R.oH)(A.right,"RIGHT"),f[20]=A,f[21]=c):c=f[21];let W=c,{threads:z,annotations:J,commentsPreference:X}=(0,k.rP)(y,W??""),ee=K===n1.sI.Collapsed||X===n1.sI.Collapsed?n1.sI.Collapsed:n1.sI.Visible,et=!(((0,R.Po)(M)||!M.isSelected)&&((0,R.Po)($)||!$.isSelected));if(!U)return null;f[22]!==U||f[23]!==v?(u=e9(U,v),f[22]=U,f[23]=v,f[24]=u):u=f[24];let{currentHunk:en,nextHunk:ei,previousHunk:ea}=u;return M?(f[25]!==p||f[26]!==ee||f[27]!==en||f[28]!==I||f[29]!==L||f[30]!==y||f[31]!==x||f[32]!==B||f[33]!==et||f[34]!==H||f[35]!==b||f[36]!==E||f[37]!==M||f[38]!==G||f[39]!==j||f[40]!==ei||f[41]!==w||f[42]!==ea||f[43]!==J||f[44]!==O||f[45]!==$||f[46]!==z||f[47]!==V||f[48]!==N||f[49]!==S?(m=B?(0,i.jsx)(aJ,{currentHunk:en,diffAnchor:I,diffLine:b,fileLineCount:L,isLeftSide:!0,isSplit:!0,nextHunk:ei,nextLine:j,previousHunk:ea,prevLine:w}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(aV,{annotationsAtPosition:H,commentsPreference:ee,copilotChatReference:p,currentHunk:en,diffLine:M,diffAnchor:I,filePath:y,handleDiffSideCellSelectionBlocking:x,hasHiddenUnicodeCharacters:E,isLeftSide:!0,isRowSelected:et,isSplit:!0,nextHunk:ei,previousHunk:ea,rowId:V,subjectId:N,threadsAtPosition:G,viewerData:S}),(0,i.jsx)(aV,{threadsAtPosition:z,annotationsAtPosition:J,commentsPreference:ee,copilotChatReference:p,currentHunk:en,diffLine:$,diffAnchor:I,filePath:y,handleDiffSideCellSelectionBlocking:x,hasHiddenUnicodeCharacters:O,isLeftSide:!1,isRowSelected:et,isSplit:!0,nextHunk:ei,previousHunk:ea,rowId:V,subjectId:N,viewerData:S})]}),f[25]=p,f[26]=ee,f[27]=en,f[28]=I,f[29]=L,f[30]=y,f[31]=x,f[32]=B,f[33]=et,f[34]=H,f[35]=b,f[36]=E,f[37]=M,f[38]=G,f[39]=j,f[40]=ei,f[41]=w,f[42]=ea,f[43]=J,f[44]=O,f[45]=$,f[46]=z,f[47]=V,f[48]=N,f[49]=S,f[50]=m):m=f[50],f[51]!==V||f[52]!==m?(h=(0,i.jsx)("tr",{className:"diff-line-row",children:m},V),f[51]=V,f[52]=m,f[53]=h):h=f[53],h):null}:function({copilotChatReference:e,diffHasHiddenUnicodeCharacters:t,filePath:n,handleDiffSideCellSelectionBlocking:a,hunksData:s,leftDiffLine:r,nextDiffLine:o,prevDiffLine:d,rightDiffLine:c,showHiddenUnicode:u,subjectId:m,viewerData:h}){let f=Q(),p=Z(),g=e=>{let n=!1;return t&&!(0,R.Po)(e)&&(n=(0,tH.Y)(e.text),u&&n&&(e=e.html?{...e,html:(0,aY.Gx)(e.html)??e.html}:{...e,text:(0,tH.TA)(e.text)})),[e,n]},[y,x]=g(r),[v,b]=g(c),j=Y((0,R.Po)(y)?void 0:y),w=Y((0,R.Po)(v)?void 0:v),_=(0,l.useMemo)(()=>(0,R.Po)(y)?y:{...y,...j},[y,j]),C=(0,l.useMemo)(()=>(0,R.Po)(v)?v:{...v,...w},[v,w]),N=(0,R.qK)(_)&&"HUNK"===_.type,S=(0,R.qX)(f,r,c),I=(0,R.Po)(_)?(0,R.Po)(C)?void 0:C:_,L=(0,R.Po)(y)?void 0:(0,R.oH)(y.left,"LEFT"),{threads:T,annotations:D,commentsPreference:E}=(0,k.rP)(n,L??""),A=(0,R.Po)(v)?void 0:(0,R.oH)(v.right,"RIGHT"),{threads:O,annotations:P,commentsPreference:F}=(0,k.rP)(n,A??""),M=E===n1.sI.Collapsed||F===n1.sI.Collapsed?n1.sI.Collapsed:n1.sI.Visible,$=(0,l.useMemo)(()=>!(((0,R.Po)(_)||!_.isSelected)&&((0,R.Po)(C)||!C.isSelected)),[_,C]);if(!I)return null;let{currentHunk:B,nextHunk:V,previousHunk:U}=e9(I,s);return _?(0,i.jsx)("tr",{className:"diff-line-row",children:N?(0,i.jsx)(aJ,{currentHunk:B,diffAnchor:f,diffLine:r,fileLineCount:p,isLeftSide:!0,isSplit:!0,nextHunk:V,nextLine:o,previousHunk:U,prevLine:d}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(aV,{annotationsAtPosition:D,commentsPreference:M,copilotChatReference:e,currentHunk:B,diffLine:_,diffAnchor:f,filePath:n,handleDiffSideCellSelectionBlocking:a,hasHiddenUnicodeCharacters:x,isLeftSide:!0,isRowSelected:$,isSplit:!0,nextHunk:V,previousHunk:U,rowId:S,subjectId:m,threadsAtPosition:T,viewerData:h}),(0,i.jsx)(aV,{threadsAtPosition:O,annotationsAtPosition:P,commentsPreference:M,copilotChatReference:e,currentHunk:B,diffLine:C,diffAnchor:f,filePath:n,handleDiffSideCellSelectionBlocking:a,hasHiddenUnicodeCharacters:b,isLeftSide:!1,isRowSelected:$,isSplit:!0,nextHunk:V,previousHunk:U,rowId:S,subjectId:m,viewerData:h})]})},S):null});try{aX.displayName||(aX.displayName="SplitDiffRow")}catch{}function a0(e){let t=[],n=[],i=()=>{for(;t.length<n.length;)t.push(o.Vv);for(;n.length<t.length;)n.push(o.Vv)};for(let a of e)switch(a.type){case"ADDITION":n.push(a);break;case"DELETION":t.push(a);break;case"CONTEXT":case"INJECTED_CONTEXT":case"HUNK":i(),t.push(a),n.push(a)}return i(),{leftLines:t,rightLines:n}}let a1=(0,a.GV)()?function(e){let t,n,i=(0,s.c)(5);i[0]!==e?(t=a0(e),i[0]=e,i[1]=t):t=i[1];let{leftLines:a,rightLines:r}=t;return i[2]!==a||i[3]!==r?(n={leftLines:a,rightLines:r},i[2]=a,i[3]=r,i[4]=n):n=i[4],n}:function(e){let{leftLines:t,rightLines:n}=(0,l.useMemo)(()=>a0(e),[e]);return{leftLines:t,rightLines:n}},a2=(0,l.memo)((0,a.GV)()?function(e){let t,n,a,r,l=(0,s.c)(24),{diffHasHiddenUnicodeCharacters:o,diffLines:d,fileAnchor:c,filePath:u,handleDiffSideCellSelectionBlocking:m,showHiddenUnicode:h,tableRef:f,copilotChatReference:p,subjectId:g,viewerData:y}=e,{leftLines:x,rightLines:v}=a1(d);l[0]!==x?(t=te(x),l[0]=x,l[1]=t):t=l[1];let b=t,{addLineToSelection:j,clearSelectedLines:w,selectMultipleLines:_}=X(),C=q();return l[2]!==j||l[3]!==w||l[4]!==c||l[5]!==C||l[6]!==x||l[7]!==v||l[8]!==_||l[9]!==f?(n={addLineToSelection:j,clearSelectedLines:w,containerRef:f,fileAnchor:c,getfirstLineSelectionOnDrag:C,isSplitDiff:!0,leftLines:x,selectMultipleLines:_,rightLines:v,disabled:!1},l[2]=j,l[3]=w,l[4]=c,l[5]=C,l[6]=x,l[7]=v,l[8]=_,l[9]=f,l[10]=n):n=l[10],tq(n),l[11]!==p||l[12]!==o||l[13]!==u||l[14]!==m||l[15]!==b||l[16]!==x||l[17]!==v||l[18]!==h||l[19]!==g||l[20]!==y?(a=x.map((e,t)=>{let n=x[t],a=v[t],s=x[t-1],r=(0,R.Po)(x[t+1])?v[t+1]:x[t+1],l=`${(0,R.Po)(n)||!n?`empty-left-diff-${t}`:n.blobLineNumber}-${(0,R.Po)(a)||!a?`empty-right-diff-${t}`:a.blobLineNumber}`;return(0,i.jsx)(aX,{copilotChatReference:p,diffHasHiddenUnicodeCharacters:o,filePath:u,handleDiffSideCellSelectionBlocking:m,hunksData:b,leftDiffLine:n,nextDiffLine:r,prevDiffLine:s,rightDiffLine:a,showHiddenUnicode:h,subjectId:g,viewerData:y},l)}),l[11]=p,l[12]=o,l[13]=u,l[14]=m,l[15]=b,l[16]=x,l[17]=v,l[18]=h,l[19]=g,l[20]=y,l[21]=a):a=l[21],l[22]!==a?(r=(0,i.jsx)(i.Fragment,{children:a}),l[22]=a,l[23]=r):r=l[23],r}:function({diffHasHiddenUnicodeCharacters:e,diffLines:t,fileAnchor:n,filePath:a,handleDiffSideCellSelectionBlocking:s,showHiddenUnicode:r,tableRef:o,copilotChatReference:d,subjectId:c,viewerData:u}){let{leftLines:m,rightLines:h}=a1(t),f=(0,l.useMemo)(()=>te(m),[m]),{addLineToSelection:p,clearSelectedLines:g,selectMultipleLines:y}=X();return tq({addLineToSelection:p,clearSelectedLines:g,containerRef:o,fileAnchor:n,getfirstLineSelectionOnDrag:q(),isSplitDiff:!0,leftLines:m,selectMultipleLines:y,rightLines:h,disabled:!1}),(0,i.jsx)(i.Fragment,{children:m.map((t,n)=>{let l=m[n],o=h[n],p=m[n-1],g=(0,R.Po)(m[n+1])?h[n+1]:m[n+1],y=`${(0,R.Po)(l)||!l?`empty-left-diff-${n}`:l.blobLineNumber}-${(0,R.Po)(o)||!o?`empty-right-diff-${n}`:o.blobLineNumber}`;return(0,i.jsx)(aX,{copilotChatReference:d,diffHasHiddenUnicodeCharacters:e,filePath:a,handleDiffSideCellSelectionBlocking:s,hunksData:f,leftDiffLine:l,nextDiffLine:g,prevDiffLine:p,rightDiffLine:o,showHiddenUnicode:r,subjectId:c,viewerData:u},y)})})});try{a2.displayName||(a2.displayName="SplitDiffLines")}catch{}let a3=(0,l.memo)(function({copilotChatReference:e,diffHasHiddenUnicodeCharacters:t,filePath:n,hunksData:a,currentDiffLine:s,nextDiffLine:r,prevDiffLine:o,showHiddenUnicode:d,subjectId:c,viewerData:u}){let m=Q(),h=Z(),f=Y(s),p=(0,l.useMemo)(()=>({...s,...f}),[s,f]),g=(0,l.useMemo)(()=>!!p.isSelected,[p.isSelected]),y="DELETION"!==s.type?"RIGHT":"LEFT",x="RIGHT"===y?s.right:s.left,v=(0,R.oH)(x,y),{threads:b,annotations:j,commentsPreference:w}=(0,k.rP)(n,v??""),_="HUNK"===p.type,C=(0,e2.IQ)(m,(0,e2.XU)(p.type),p.blobLineNumber),{currentHunk:N,nextHunk:S,previousHunk:I}=e9(p,a),L=(0,R.qX)(m,p,p),T=t&&(0,tH.Y)(p.text);d&&T&&(p=p.html?{...p,html:(0,aY.Gx)(p.html)??p.html}:{...p,text:(0,tH.TA)(p.text)});let D="DELETION"===p.type;return(0,i.jsx)("tr",{className:"diff-line-row",children:_?(0,i.jsx)(aJ,{currentHunk:N,diffAnchor:m,diffLine:p,fileLineCount:h,isLeftSide:D,isSplit:!1,nextHunk:S,nextLine:r,previousHunk:I,prevLine:o}):(0,i.jsx)(aU,{annotationsAtPosition:j,commentsPreference:w,copilotChatReference:e,currentHunk:N,diffAnchor:m,diffLine:p,filePath:n,hasHiddenUnicodeCharacters:T,isLeftSide:D,isRowSelected:g,isSplit:!1,lineAnchor:C,nextHunk:S,previousHunk:I,rowId:L,subjectId:c,threadsAtPosition:b,viewerData:u})},L)});try{a3.displayName||(a3.displayName="UnifiedDiffRow")}catch{}let a4=(0,l.memo)((0,a.GV)()?function(e){let t,n,a,r,l=(0,s.c)(21),{diffHasHiddenUnicodeCharacters:o,diffLines:d,fileAnchor:c,filePath:u,tableRef:m,showHiddenUnicode:h,copilotChatReference:f,subjectId:p,viewerData:g}=e;l[0]!==d?(t=te(d.map(a5)),l[0]=d,l[1]=t):t=l[1];let y=t,{addLineToSelection:x,clearSelectedLines:v,selectMultipleLines:b}=X(),j=q();return l[2]!==x||l[3]!==v||l[4]!==c||l[5]!==j||l[6]!==b||l[7]!==d||l[8]!==m?(n={addLineToSelection:x,clearSelectedLines:v,containerRef:m,fileAnchor:c,getfirstLineSelectionOnDrag:j,isSplitDiff:!1,leftLines:d,selectMultipleLines:b,disabled:!1},l[2]=x,l[3]=v,l[4]=c,l[5]=j,l[6]=b,l[7]=d,l[8]=m,l[9]=n):n=l[9],tq(n),l[10]!==f||l[11]!==o||l[12]!==d||l[13]!==u||l[14]!==y||l[15]!==h||l[16]!==p||l[17]!==g?(a=d.map((e,t)=>{let n=d[t+1],a=d[t-1],s=`unified-diff-row-l:${e.left}-r:${e.right}-b:${e.blobLineNumber}`;return(0,i.jsx)(a3,{copilotChatReference:f,diffHasHiddenUnicodeCharacters:o,filePath:u,hunksData:y,currentDiffLine:e,nextDiffLine:n,prevDiffLine:a,showHiddenUnicode:h,subjectId:p,viewerData:g},s)}),l[10]=f,l[11]=o,l[12]=d,l[13]=u,l[14]=y,l[15]=h,l[16]=p,l[17]=g,l[18]=a):a=l[18],l[19]!==a?(r=(0,i.jsx)(i.Fragment,{children:a}),l[19]=a,l[20]=r):r=l[20],r}:function({diffHasHiddenUnicodeCharacters:e,diffLines:t,fileAnchor:n,filePath:a,tableRef:s,showHiddenUnicode:r,copilotChatReference:o,subjectId:d,viewerData:c}){let u=(0,l.useMemo)(()=>te(t.map(e=>e)),[t]),{addLineToSelection:m,clearSelectedLines:h,selectMultipleLines:f}=X();return tq({addLineToSelection:m,clearSelectedLines:h,containerRef:s,fileAnchor:n,getfirstLineSelectionOnDrag:q(),isSplitDiff:!1,leftLines:t,selectMultipleLines:f,disabled:!1}),(0,i.jsx)(i.Fragment,{children:t.map((n,s)=>{let l=t[s+1],m=t[s-1],h=`unified-diff-row-l:${n.left}-r:${n.right}-b:${n.blobLineNumber}`;return(0,i.jsx)(a3,{copilotChatReference:o,diffHasHiddenUnicodeCharacters:e,filePath:a,hunksData:u,currentDiffLine:n,nextDiffLine:l,prevDiffLine:m,showHiddenUnicode:r,subjectId:d,viewerData:c},h)})})});try{a4.displayName||(a4.displayName="UnifiedDiffLines")}catch{}function a5(e){return e}let a6="DiffLines-module__tableLayoutFixed--UBX7h",a7="DiffLines-module__compact--wxqBo";var a8=n(60745),a9=n(73189);let se=(0,a.GV)()?function(e){let t,n,a=(0,s.c)(9),{showStartConversation:r,hasDraftComment:l,lineSpacingPreference:o,openStartConversationDialog:d,authorLogin:u,authorAvatarUrl:m}=e;return a[0]!==m||a[1]!==u||a[2]!==l||a[3]!==o||a[4]!==d||a[5]!==r?(t=r&&(0,i.jsx)("div",{"aria-hidden":!1,className:(0,x.$)("d-flex","flex-row",i3),children:(0,i.jsx)(i.Fragment,{children:l?(0,i.jsx)(ek.Q,{"aria-label":"Continue comment in progress",size:"small",className:(0,x.$)("py-0","compact"===o?i4:i5,i8),onClick:d,children:(0,i.jsx)(i1,{lineSpacingPreference:o,authorAvatarUrl:m,authorLogin:u})}):(0,i.jsx)(ek.Q,{icon:c.PlusIcon,"aria-label":"Add comment",size:"small","data-add-comment-button":!0,className:(0,x.$)("fgColor-muted","bgColor-accent-emphasis","borderColor-accent-emphasis","fgColor-onEmphasis","px-0",i6,i8,i9),onClick:d})})}),a[0]=m,a[1]=u,a[2]=l,a[3]=o,a[4]=d,a[5]=r,a[6]=t):t=a[6],a[7]!==t?(n=(0,i.jsx)(i.Fragment,{children:t}),a[7]=t,a[8]=n):n=a[8],n}:function({showStartConversation:e,hasDraftComment:t,lineSpacingPreference:n,openStartConversationDialog:a,authorLogin:s,authorAvatarUrl:r}){return(0,i.jsx)(i.Fragment,{children:e&&(0,i.jsx)("div",{"aria-hidden":!1,className:(0,x.$)("d-flex","flex-row",i3),children:(0,i.jsx)(i.Fragment,{children:t?(0,i.jsx)(ek.Q,{"aria-label":"Continue comment in progress",size:"small",className:(0,x.$)("py-0","compact"===n?i4:i5,i8),onClick:a,children:(0,i.jsx)(i1,{lineSpacingPreference:n,authorAvatarUrl:r,authorLogin:s})}):(0,i.jsx)(ek.Q,{icon:c.PlusIcon,"aria-label":"Add comment",size:"small","data-add-comment-button":!0,className:(0,x.$)("fgColor-muted","bgColor-accent-emphasis","borderColor-accent-emphasis","fgColor-onEmphasis","px-0",i6,i8,i9),onClick:a})})})})};try{se.displayName||(se.displayName="SimpleAddCommentButton")}catch{}let st=(0,a.GV)()?function(e){let t,n,a,r,o,d,u,m,h=(0,s.c)(40),{showStartConversation:f,viewerData:p,openStartConversationDialog:g,threads:y,annotations:v,shouldDisplayMinimizedComments:b,diffAnchor:j,diffLine:w,isLeftSide:_,isSplit:C,nextHunk:N,previousHunk:S,currentHunk:I,copilotChatReference:k,handleCopyCode:L,shouldDisplayCollapseComments:T,toggleViewingMarkers:D}=e,[E,R]=(0,l.useState)(!1),A=(0,l.useRef)(null),O=y.reduce(sn,0),P=v.length,{commentsPreference:F,lineSpacingPreference:M}=p,$=O+P>0&&F===n1.sI.Collapsed;h[0]!==v.length||h[1]!==y.length||h[2]!==D?(t=e=>{(1===y.length||1===v.length)&&e.preventDefault(),D?.()},h[0]=v.length,h[1]=y.length,h[2]=D,h[3]=t):t=h[3];let B=t;return h[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,x.$)("d-flex","flex-row",i2),h[4]=n):n=h[4],h[5]!==E||h[6]!==v||h[7]!==B||h[8]!==M||h[9]!==b||h[10]!==y||h[11]!==$?(a=$&&b&&(0,i.jsx)(ek.Q,{"aria-expanded":E,"aria-label":"View comments",size:"small",className:(0,x.$)("py-0","px-1",i8),onClick:B,children:(0,i.jsx)(ip,{threads:y,annotations:v,lineSpacingPreference:M})}),h[5]=E,h[6]=v,h[7]=B,h[8]=M,h[9]=b,h[10]=y,h[11]=$,h[12]=a):a=h[12],h[13]===Symbol.for("react.memo_cache_sentinel")?(r=(0,x.$)("fgColor-muted",i7),h[13]=r):r=h[13],h[14]!==E?(o=(0,i.jsx)(eA.W.Anchor,{children:(0,i.jsx)(ek.Q,{ref:A,"aria-haspopup":"true","aria-label":"More actions",icon:c.TriangleDownIcon,size:"small",className:r,onClick:()=>R(!E)})}),h[14]=E,h[15]=o):o=h[15],h[16]!==v||h[17]!==k||h[18]!==I||h[19]!==j||h[20]!==w||h[21]!==L||h[22]!==_||h[23]!==C||h[24]!==N||h[25]!==g||h[26]!==S||h[27]!==T||h[28]!==f||h[29]!==y||h[30]!==D||h[31]!==p?(d=(0,i.jsx)(eA.W.Overlay,{width:"medium",children:(0,i.jsx)(eO.l,{children:(0,i.jsx)(iF,{threads:y,annotations:v,currentHunk:I,diffAnchor:j,diffLine:w,shouldDisplayCollapseComments:T,copilotChatReference:k,showStartConversation:f,handleCopyCode:L,handleViewMarkersSelection:D,isLeftSide:_,isSplit:C,nextHunk:N,previousHunk:S,startConversationCurrentLine:g,startConversationWithSuggestedChange:g,viewerData:p})})}),h[16]=v,h[17]=k,h[18]=I,h[19]=j,h[20]=w,h[21]=L,h[22]=_,h[23]=C,h[24]=N,h[25]=g,h[26]=S,h[27]=T,h[28]=f,h[29]=y,h[30]=D,h[31]=p,h[32]=d):d=h[32],h[33]!==E||h[34]!==o||h[35]!==d?(u=(0,i.jsxs)(eA.W,{anchorRef:A,open:E,onOpenChange:a9.l,children:[o,d]}),h[33]=E,h[34]=o,h[35]=d,h[36]=u):u=h[36],h[37]!==a||h[38]!==u?(m=(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{"aria-hidden":!1,className:n,children:(0,i.jsxs)(ic.A,{className:ae,children:[a,u]})})}),h[37]=a,h[38]=u,h[39]=m):m=h[39],m}:function({showStartConversation:e,viewerData:t,openStartConversationDialog:n,threads:a,annotations:s,shouldDisplayMinimizedComments:r,diffAnchor:o,diffLine:d,isLeftSide:u,isSplit:m,nextHunk:h,previousHunk:f,currentHunk:p,copilotChatReference:g,handleCopyCode:y,shouldDisplayCollapseComments:v,toggleViewingMarkers:b}){let[j,w]=(0,l.useState)(!1),_=(0,l.useRef)(null),C=a.reduce((e,t)=>e+(t.commentsData?.comments.length??0),0),N=s.length,{commentsPreference:S,lineSpacingPreference:I}=t,k=C+N>0&&S===n1.sI.Collapsed,L=(0,l.useCallback)(e=>{(1===a.length||1===s.length)&&e.preventDefault(),b?.()},[s.length,a.length,b]);return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{"aria-hidden":!1,className:(0,x.$)("d-flex","flex-row",i2),children:(0,i.jsxs)(ic.A,{className:ae,children:[k&&r&&(0,i.jsx)(ek.Q,{"aria-expanded":j,"aria-label":"View comments",size:"small",className:(0,x.$)("py-0","px-1",i8),onClick:L,children:(0,i.jsx)(ip,{threads:a,annotations:s,lineSpacingPreference:I})}),(0,i.jsxs)(eA.W,{anchorRef:_,open:j,onOpenChange:a9.l,children:[(0,i.jsx)(eA.W.Anchor,{children:(0,i.jsx)(ek.Q,{ref:_,"aria-haspopup":"true","aria-label":"More actions",icon:c.TriangleDownIcon,size:"small",className:(0,x.$)("fgColor-muted",i7),onClick:()=>w(!j)})}),(0,i.jsx)(eA.W.Overlay,{width:"medium",children:(0,i.jsx)(eO.l,{children:(0,i.jsx)(iF,{threads:a,annotations:s,currentHunk:p,diffAnchor:o,diffLine:d,shouldDisplayCollapseComments:v,copilotChatReference:g,showStartConversation:e,handleCopyCode:y,handleViewMarkersSelection:b,isLeftSide:u,isSplit:m,nextHunk:h,previousHunk:f,startConversationCurrentLine:n,startConversationWithSuggestedChange:n,viewerData:t})})})]})]})})})};function sn(e,t){return e+(t.commentsData?.comments.length??0)}try{st.displayName||(st.displayName="SimpleContextMenu")}catch{}let si=(0,l.forwardRef)((0,a.GV)()?function(e,t){let n,a,r,l=(0,s.c)(28),{annotations:o,authorAvatarUrl:d,authorLogin:c,copilotChatReference:u,currentHunk:m,diffAnchor:h,diffLine:f,hasDraftComment:p,handleCopyCode:g,isLeftSide:y,isSplit:x,nextHunk:v,previousHunk:b,shouldDisplayCollapseComments:j,shouldDisplayMinimizedComments:w,showStartConversation:_,threads:C,toggleViewingMarkers:N,viewerData:S,openStartConversationDialog:I}=e;l[0]!==d||l[1]!==c||l[2]!==p||l[3]!==I||l[4]!==_||l[5]!==S.lineSpacingPreference?(n=(0,i.jsx)(se,{showStartConversation:_,hasDraftComment:p,lineSpacingPreference:S.lineSpacingPreference,openStartConversationDialog:I,authorLogin:c,authorAvatarUrl:d}),l[0]=d,l[1]=c,l[2]=p,l[3]=I,l[4]=_,l[5]=S.lineSpacingPreference,l[6]=n):n=l[6];let k=w??!1;return l[7]!==o||l[8]!==u||l[9]!==m||l[10]!==h||l[11]!==f||l[12]!==g||l[13]!==y||l[14]!==x||l[15]!==v||l[16]!==I||l[17]!==b||l[18]!==j||l[19]!==_||l[20]!==k||l[21]!==C||l[22]!==N||l[23]!==S?(a=(0,i.jsx)(st,{showStartConversation:_,viewerData:S,openStartConversationDialog:I,threads:C,annotations:o,shouldDisplayMinimizedComments:k,diffAnchor:h,diffLine:f,isLeftSide:y,isSplit:x,nextHunk:v,previousHunk:b,currentHunk:m,copilotChatReference:u,handleCopyCode:g,shouldDisplayCollapseComments:j,toggleViewingMarkers:N}),l[7]=o,l[8]=u,l[9]=m,l[10]=h,l[11]=f,l[12]=g,l[13]=y,l[14]=x,l[15]=v,l[16]=I,l[17]=b,l[18]=j,l[19]=_,l[20]=k,l[21]=C,l[22]=N,l[23]=S,l[24]=a):a=l[24],l[25]!==n||l[26]!==a?(r=(0,i.jsxs)(i.Fragment,{children:[n,a]}),l[25]=n,l[26]=a,l[27]=r):r=l[27],r}:function({annotations:e,authorAvatarUrl:t,authorLogin:n,copilotChatReference:a,currentHunk:s,diffAnchor:r,diffLine:l,hasDraftComment:o,handleCopyCode:d,isLeftSide:c,isSplit:u,nextHunk:m,previousHunk:h,shouldDisplayCollapseComments:f,shouldDisplayMinimizedComments:p,showStartConversation:g,threads:y,toggleViewingMarkers:x,viewerData:v,openStartConversationDialog:b},j){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(se,{showStartConversation:g,hasDraftComment:o,lineSpacingPreference:v.lineSpacingPreference,openStartConversationDialog:b,authorLogin:n,authorAvatarUrl:t}),(0,i.jsx)(st,{showStartConversation:g,viewerData:v,openStartConversationDialog:b,threads:y,annotations:e,shouldDisplayMinimizedComments:p??!1,diffAnchor:r,diffLine:l,isLeftSide:c,isSplit:u,nextHunk:m,previousHunk:h,currentHunk:s,copilotChatReference:a,handleCopyCode:d,shouldDisplayCollapseComments:f,toggleViewingMarkers:x})]})});si.displayName="ActionBar";let sa=(0,a.GV)()?function(e){let t,n,a,r,o,d,c,u,m=(0,s.c)(32),{diffLine:h,filePath:f}=e,p="HUNK"===h.type,g="ADDITION"!==h.type,y="DELETION"!==h.type;m[0]!==h.type?(t=(0,R.Yf)(h.type,!0,!1),m[0]=h.type,m[1]=t):t=m[1];let v=t;m[2]!==h.type?(n=(0,R.Yf)(h.type,!1,!1),m[2]=h.type,m[3]=n):n=m[3];let b=n;m[4]!==h.html||m[5]!==h.type?(a=(0,R.x_)(h.html,h.type),m[4]=h.html,m[5]=h.type,m[6]=a):a=m[6];let[j,w]=a;m[7]!==w?(r=w&&["+","-"].includes(w),m[7]=w,m[8]=r):r=m[8];let _=r,[C,N]=(0,l.useState)(!1),[S,I]=(0,l.useState)(!1),L="DELETION"!==h.type?"RIGHT":"LEFT",T="RIGHT"===L?h.right:h.left;m[9]!==T||m[10]!==L?(o=(0,R.oH)(T,L),m[9]=T,m[10]=L,m[11]=o):o=m[11];let D=o,{threads:E,annotations:A}=(0,k.rP)(f,D??""),O=(0,l.useRef)(null),P=(0,l.useRef)(null),F=(0,l.useRef)(null),[M,$]=(0,l.useState)(E.length>0||A.length>0);return m[12]===Symbol.for("react.memo_cache_sentinel")?(d=()=>I(!0),c=()=>I(!1),m[12]=d,m[13]=c):(d=m[12],c=m[13]),m[14]!==A||m[15]!==b||m[16]!==h||m[17]!==f||m[18]!==S||m[19]!==p||m[20]!==C||m[21]!==j||m[22]!==D||m[23]!==v||m[24]!==L||m[25]!==w||m[26]!==M||m[27]!==g||m[28]!==_||m[29]!==y||m[30]!==E?(u=(0,i.jsx)("tr",{className:"diff-line-row",onMouseEnter:d,onMouseLeave:c,children:p?(0,i.jsx)("td",{colSpan:4,className:"flex-grow-0 bgColor-accent-muted",children:(0,i.jsx)("div",{className:"d-flex flex-row",children:(0,i.jsx)("code",{className:"diff-text-cell hunk",children:(0,i.jsx)(eQ.$6,{className:"diff-text-inner color-fg-muted",html:h.html})})})}):(0,i.jsxs)(i.Fragment,{children:[g?(0,i.jsx)("td",{className:"text-center v-align-top",style:{backgroundColor:v},children:(0,i.jsx)("code",{children:h.left})}):(0,i.jsx)("td",{style:{userSelect:"none",position:"relative",backgroundColor:v}}),y?(0,i.jsx)("td",{className:"text-center v-align-top",style:{backgroundColor:v},children:(0,i.jsx)("code",{children:h.right})}):(0,i.jsx)("td",{style:{userSelect:"none",position:"relative",backgroundColor:v}}),(0,i.jsxs)("td",{className:"diff-text-cell",style:{backgroundColor:b},children:[(0,i.jsxs)("code",{className:(0,x.$)("diff-text syntax-highlighted-line",{addition:"ADDITION"===h.type,deletion:"DELETION"===h.type}),children:[_&&(0,i.jsx)("span",{className:"diff-text-marker",children:w}),(0,i.jsx)(eQ.$6,{html:j,className:"diff-text-inner"})]}),M?(0,i.jsx)(nQ,{backgroundColor:"",gridCellId:"",gutterSizeOffset:"0",inlineMarkersRef:O,cellRef:F,dispatchMarkersStatus:a9.l,lineMarkersKey:D,annotations:A,conversationListThreads:E,filePath:f,onCloseFocusMode:a9.l,isMarkerListOpen:!1,isRowSelected:!1,lineType:h.type,returnFocusRef:P,subjectId:"",onCloseConversationList:a9.l,onDeleteLineComment:a9.l,children:C&&(0,i.jsx)("div",{className:(0,x.$)(" border rounded-2 color-border-default",(E.length,"mt-2 mb-1")),children:(0,i.jsx)(tW,{addCommentDialogTitle:"test",anchorRef:F,diffAnchor:"diff-blah",batchingEnabled:!0,filePath:f,focusOnMount:!1,isLeftSide:"LEFT"===L,isInDialogMode:!1,isOpen:C,lineNumber:h.blobLineNumber,returnFocusRef:P,startLineNumber:void 0,subjectId:"subjectId",suggestedChangesConfig:void 0,viewerData:{avatarUrl:"",login:""},onAddComment:a9.l,onCloseCommentDialog:()=>N(!1)})})}):null,S&&(0,i.jsx)(si,{openStartConversationDialog:()=>{N(!0),$(!0)},authorAvatarUrl:"undefined",authorLogin:"undefined",ref:F,copilotChatReference:void 0,currentHunk:void 0,diffAnchor:"diff-blah",diffLine:h,threads:E,annotations:A,handleCopyCode:a9.l,hasDraftComment:!1,isLeftSide:"LEFT"===L,isSplit:!1,nextHunk:void 0,previousHunk:void 0,showStartConversation:!0,shouldDisplayMinimizedComments:!1,shouldDisplayCollapseComments:!0,toggleViewingMarkers:a9.l,viewerData:{avatarUrl:"string",diffViewPreference:"string",lineSpacingPreference:"compact",login:"string",shouldDisplayComments:!0,shouldDisplayEditOptions:!0,tabSizePreference:8,viewerCanComment:!0,viewerCanApplySuggestion:!0}})]})]})}),m[14]=A,m[15]=b,m[16]=h,m[17]=f,m[18]=S,m[19]=p,m[20]=C,m[21]=j,m[22]=D,m[23]=v,m[24]=L,m[25]=w,m[26]=M,m[27]=g,m[28]=_,m[29]=y,m[30]=E,m[31]=u):u=m[31],u}:function({diffLine:e,filePath:t}){let n="HUNK"===e.type,a="ADDITION"!==e.type,s="DELETION"!==e.type,r=(0,R.Yf)(e.type,!0,!1),o=(0,R.Yf)(e.type,!1,!1),[d,c]=(0,R.x_)(e.html,e.type),u=c&&["+","-"].includes(c),[m,h]=(0,l.useState)(!1),[f,p]=(0,l.useState)(!1),g="DELETION"!==e.type?"RIGHT":"LEFT",y="RIGHT"===g?e.right:e.left,v=(0,R.oH)(y,g),{threads:b,annotations:j}=(0,k.rP)(t,v??""),w=(0,l.useRef)(null),_=(0,l.useRef)(null),C=(0,l.useRef)(null),[N,S]=(0,l.useState)(b.length>0||j.length>0);return(0,i.jsx)("tr",{className:"diff-line-row",onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:n?(0,i.jsx)("td",{colSpan:4,className:"flex-grow-0 bgColor-accent-muted",children:(0,i.jsx)("div",{className:"d-flex flex-row",children:(0,i.jsx)("code",{className:"diff-text-cell hunk",children:(0,i.jsx)(eQ.$6,{className:"diff-text-inner color-fg-muted",html:e.html})})})}):(0,i.jsxs)(i.Fragment,{children:[a?(0,i.jsx)("td",{className:"text-center v-align-top",style:{backgroundColor:r},children:(0,i.jsx)("code",{children:e.left})}):(0,i.jsx)("td",{style:{userSelect:"none",position:"relative",backgroundColor:r}}),s?(0,i.jsx)("td",{className:"text-center v-align-top",style:{backgroundColor:r},children:(0,i.jsx)("code",{children:e.right})}):(0,i.jsx)("td",{style:{userSelect:"none",position:"relative",backgroundColor:r}}),(0,i.jsxs)("td",{className:"diff-text-cell",style:{backgroundColor:o},children:[(0,i.jsxs)("code",{className:(0,x.$)("diff-text syntax-highlighted-line",{addition:"ADDITION"===e.type,deletion:"DELETION"===e.type}),children:[u&&(0,i.jsx)("span",{className:"diff-text-marker",children:c}),(0,i.jsx)(eQ.$6,{html:d,className:"diff-text-inner"})]}),N?(0,i.jsx)(nQ,{backgroundColor:"",gridCellId:"",gutterSizeOffset:"0",inlineMarkersRef:w,cellRef:C,dispatchMarkersStatus:a9.l,lineMarkersKey:v,annotations:j,conversationListThreads:b,filePath:t,onCloseFocusMode:a9.l,isMarkerListOpen:!1,isRowSelected:!1,lineType:e.type,returnFocusRef:_,subjectId:"",onCloseConversationList:a9.l,onDeleteLineComment:a9.l,children:m&&(0,i.jsx)("div",{className:(0,x.$)(" border rounded-2 color-border-default",(b.length,"mt-2 mb-1")),children:(0,i.jsx)(tW,{addCommentDialogTitle:"test",anchorRef:C,diffAnchor:"diff-blah",batchingEnabled:!0,filePath:t,focusOnMount:!1,isLeftSide:"LEFT"===g,isInDialogMode:!1,isOpen:m,lineNumber:e.blobLineNumber,returnFocusRef:_,startLineNumber:void 0,subjectId:"subjectId",suggestedChangesConfig:void 0,viewerData:{avatarUrl:"",login:""},onAddComment:a9.l,onCloseCommentDialog:()=>h(!1)})})}):null,f&&(0,i.jsx)(si,{openStartConversationDialog:()=>{h(!0),S(!0)},authorAvatarUrl:"undefined",authorLogin:"undefined",ref:C,copilotChatReference:void 0,currentHunk:void 0,diffAnchor:"diff-blah",diffLine:e,threads:b,annotations:j,handleCopyCode:a9.l,hasDraftComment:!1,isLeftSide:"LEFT"===g,isSplit:!1,nextHunk:void 0,previousHunk:void 0,showStartConversation:!0,shouldDisplayMinimizedComments:!1,shouldDisplayCollapseComments:!0,toggleViewingMarkers:a9.l,viewerData:{avatarUrl:"string",diffViewPreference:"string",lineSpacingPreference:"compact",login:"string",shouldDisplayComments:!0,shouldDisplayEditOptions:!0,tabSizePreference:8,viewerCanComment:!0,viewerCanApplySuggestion:!0}})]})]})})};try{sa.displayName||(sa.displayName="SimpleUnifiedDiffRow")}catch{}function ss({diffLines:e,filePath:t}){return e.map(e=>{let n=`unified-diff-row-l:${e.left}-r:${e.right}-b:${e.blobLineNumber}`;return(0,i.jsx)(sa,{diffLine:e,filePath:t},n)})}try{ss.displayName||(ss.displayName="SimpleUnifiedDiffLines")}catch{}let sr=(0,a.GV)()?function(e){let t,n,a,r,o,d,c,u,m,h,f,p=(0,s.c)(47),{leftDiffLine:g,rightDiffLine:y,filePath:v}=e,b=g?.type==="HUNK";p[0]!==g?(t=g?(0,R.Yf)(g.type,!0,!1):"",p[0]=g,p[1]=t):t=p[1];let j=t;p[2]!==y?(n=y?(0,R.Yf)(y.type,!0,!1):"",p[2]=y,p[3]=n):n=p[3];let w=n;p[4]!==g?(a=g?(0,R.Yf)(g.type,!1,!1):"",p[4]=g,p[5]=a):a=p[5];let _=a;p[6]!==y?(r=y?(0,R.Yf)(y.type,!1,!1):"",p[6]=y,p[7]=r):r=p[7];let C=r;p[8]!==g?(o=g?(0,R.x_)(g.html,g.type):[void 0,void 0],p[8]=g,p[9]=o):o=p[9];let[N,S]=o;p[10]!==S?(d=S&&["+","-"].includes(S),p[10]=S,p[11]=d):d=p[11];let I=d;p[12]!==y?(c=y?(0,R.x_)(y.html,y.type):[void 0,void 0],p[12]=y,p[13]=c):c=p[13];let[L,T]=c;p[14]!==T?(u=T&&["+","-"].includes(T),p[14]=T,p[15]=u):u=p[15];let D=u;p[16]!==g?(m=g?(0,R.oH)(g.left,"LEFT"):void 0,p[16]=g,p[17]=m):m=p[17];let E=m,{threads:A,annotations:O}=(0,k.rP)(v,E??"");p[18]!==y?(h=y?(0,R.oH)(y.right,"RIGHT"):void 0,p[18]=y,p[19]=h):h=p[19];let P=h,{threads:F,annotations:M}=(0,k.rP)(v,P??""),[$,B]=(0,l.useState)(!1),[V,U]=(0,l.useState)(!1),[q,G]=(0,l.useState)(!1),[H,K]=(0,l.useState)(!1),[W,z]=(0,l.useState)(A.length>0||O.length>0),[Q,Z]=(0,l.useState)(F.length>0||M.length>0),J=(0,l.useRef)(null),Y=(0,l.useRef)(null),X=(0,l.useRef)(null);return p[20]!==v||p[21]!==b||p[22]!==V||p[23]!==$||p[24]!==H||p[25]!==q||p[26]!==O||p[27]!==_||p[28]!==g||p[29]!==N||p[30]!==E||p[31]!==j||p[32]!==S||p[33]!==A||p[34]!==M||p[35]!==C||p[36]!==y||p[37]!==L||p[38]!==P||p[39]!==w||p[40]!==T||p[41]!==F||p[42]!==W||p[43]!==I||p[44]!==Q||p[45]!==D?(f=(0,i.jsx)("tr",{className:"diff-line-row",children:b?(0,i.jsx)("td",{colSpan:4,className:"flex-grow-0 bgColor-accent-muted",children:(0,i.jsx)("div",{className:"d-flex flex-row",children:(0,i.jsx)("code",{className:"diff-text-cell hunk",children:(0,i.jsx)(eQ.$6,{className:"diff-text-inner color-fg-muted",html:g.html})})})}):(0,i.jsxs)(i.Fragment,{children:[g?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("td",{className:"text-center v-align-top",style:{backgroundColor:j},children:(0,i.jsx)("code",{children:g.left})}),(0,i.jsxs)("td",{className:"diff-text-cell",style:{backgroundColor:_},children:[(0,i.jsxs)("code",{className:(0,x.$)("diff-text syntax-highlighted-line",{addition:"ADDITION"===g.type,deletion:"DELETION"===g.type}),onMouseEnter:()=>U(!0),onMouseLeave:()=>U(!1),children:[I&&(0,i.jsx)("span",{className:"diff-text-marker",children:S}),(0,i.jsx)(eQ.$6,{html:N,className:"diff-text-inner"}),W&&(0,i.jsx)(nQ,{backgroundColor:"",gridCellId:"",gutterSizeOffset:"0",inlineMarkersRef:J,cellRef:X,dispatchMarkersStatus:a9.l,lineMarkersKey:E,annotations:O,conversationListThreads:A,filePath:v,onCloseFocusMode:a9.l,isMarkerListOpen:!1,isRowSelected:!1,lineType:g.type,returnFocusRef:Y,subjectId:"",onCloseConversationList:a9.l,onDeleteLineComment:a9.l,children:$&&(0,i.jsx)("div",{className:(0,x.$)(" border rounded-2 color-border-default",(A.length,"mt-2 mb-1")),children:(0,i.jsx)(tW,{addCommentDialogTitle:"new comment",anchorRef:X,diffAnchor:"diff-test",batchingEnabled:!0,filePath:v,focusOnMount:!1,isLeftSide:!1,isInDialogMode:!1,isOpen:!0,lineNumber:g.left??void 0,returnFocusRef:Y,startLineNumber:g.left??void 0,subjectId:"",viewerData:{avatarUrl:"monalisa",login:"monalisa"},onAddComment:a9.l,onCloseCommentDialog:a9.l})})})]}),V&&(0,i.jsx)(si,{openStartConversationDialog:()=>{B(!0),z(!0)},authorAvatarUrl:"undefined",authorLogin:"undefined",ref:X,copilotChatReference:void 0,currentHunk:void 0,diffAnchor:"diff-blah",diffLine:g,threads:A,annotations:O,handleCopyCode:a9.l,hasDraftComment:!1,isLeftSide:!0,isSplit:!1,nextHunk:void 0,previousHunk:void 0,showStartConversation:!0,shouldDisplayMinimizedComments:!1,shouldDisplayCollapseComments:!0,toggleViewingMarkers:a9.l,viewerData:{avatarUrl:"string",diffViewPreference:"string",lineSpacingPreference:"compact",login:"string",shouldDisplayComments:!0,shouldDisplayEditOptions:!0,tabSizePreference:8,viewerCanComment:!0,viewerCanApplySuggestion:!0}})]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("td",{style:{userSelect:"none",position:"relative",backgroundColor:j}}),(0,i.jsx)("td",{style:{userSelect:"none",position:"relative",backgroundColor:j}})]}),y?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("td",{className:"text-center v-align-top",style:{backgroundColor:w},onMouseEnter:()=>K(!0),onMouseLeave:()=>K(!1),children:(0,i.jsx)("code",{children:y.right})}),(0,i.jsxs)("td",{className:"diff-text-cell",style:{backgroundColor:C},onMouseEnter:()=>K(!0),onMouseLeave:()=>K(!1),children:[(0,i.jsxs)("code",{className:(0,x.$)("diff-text syntax-highlighted-line",{addition:"ADDITION"===y.type,deletion:"DELETION"===y.type}),children:[D&&(0,i.jsx)("span",{className:"diff-text-marker",children:T}),(0,i.jsx)(eQ.$6,{html:L,className:"diff-text-inner"}),Q&&(0,i.jsx)(nQ,{backgroundColor:"",gridCellId:"",gutterSizeOffset:"0",inlineMarkersRef:J,cellRef:X,dispatchMarkersStatus:a9.l,lineMarkersKey:P,annotations:M,conversationListThreads:F,filePath:v,onCloseFocusMode:a9.l,isMarkerListOpen:!1,isRowSelected:!1,lineType:y.type,returnFocusRef:Y,subjectId:"",onCloseConversationList:a9.l,onDeleteLineComment:a9.l,children:q&&(0,i.jsx)("div",{className:(0,x.$)(" border rounded-2 color-border-default",(F.length,"mt-2 mb-1")),children:(0,i.jsx)(tW,{addCommentDialogTitle:"new comment",anchorRef:X,diffAnchor:"diff-test",batchingEnabled:!0,filePath:v,focusOnMount:!1,isLeftSide:!1,isInDialogMode:!1,isOpen:!0,lineNumber:y.right??void 0,returnFocusRef:Y,startLineNumber:y.right??void 0,subjectId:"",viewerData:{avatarUrl:"monalisa",login:"monalisa"},onAddComment:a9.l,onCloseCommentDialog:a9.l})})})]}),H&&(0,i.jsx)(si,{openStartConversationDialog:()=>{G(!0),Z(!0)},authorAvatarUrl:"undefined",authorLogin:"undefined",ref:X,copilotChatReference:void 0,currentHunk:void 0,diffAnchor:"diff-blah",diffLine:y,threads:F,annotations:M,handleCopyCode:a9.l,hasDraftComment:!1,isLeftSide:!1,isSplit:!1,nextHunk:void 0,previousHunk:void 0,showStartConversation:!0,shouldDisplayMinimizedComments:!1,shouldDisplayCollapseComments:!0,toggleViewingMarkers:a9.l,viewerData:{avatarUrl:"string",diffViewPreference:"string",lineSpacingPreference:"compact",login:"string",shouldDisplayComments:!0,shouldDisplayEditOptions:!0,tabSizePreference:8,viewerCanComment:!0,viewerCanApplySuggestion:!0}})]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("td",{style:{userSelect:"none",position:"relative",backgroundColor:w}}),(0,i.jsx)("td",{style:{userSelect:"none",position:"relative",backgroundColor:w}})]})]})}),p[20]=v,p[21]=b,p[22]=V,p[23]=$,p[24]=H,p[25]=q,p[26]=O,p[27]=_,p[28]=g,p[29]=N,p[30]=E,p[31]=j,p[32]=S,p[33]=A,p[34]=M,p[35]=C,p[36]=y,p[37]=L,p[38]=P,p[39]=w,p[40]=T,p[41]=F,p[42]=W,p[43]=I,p[44]=Q,p[45]=D,p[46]=f):f=p[46],f}:function({leftDiffLine:e,rightDiffLine:t,filePath:n}){let a=e?.type==="HUNK",s=e?(0,R.Yf)(e.type,!0,!1):"",r=t?(0,R.Yf)(t.type,!0,!1):"",o=e?(0,R.Yf)(e.type,!1,!1):"",d=t?(0,R.Yf)(t.type,!1,!1):"",[c,u]=e?(0,R.x_)(e.html,e.type):[void 0,void 0],m=u&&["+","-"].includes(u),[h,f]=t?(0,R.x_)(t.html,t.type):[void 0,void 0],p=f&&["+","-"].includes(f),g=e?(0,R.oH)(e.left,"LEFT"):void 0,{threads:y,annotations:v}=(0,k.rP)(n,g??""),b=t?(0,R.oH)(t.right,"RIGHT"):void 0,{threads:j,annotations:w}=(0,k.rP)(n,b??""),[_,C]=(0,l.useState)(!1),[N,S]=(0,l.useState)(!1),[I,L]=(0,l.useState)(!1),[T,D]=(0,l.useState)(!1),[E,A]=(0,l.useState)(y.length>0||v.length>0),[O,P]=(0,l.useState)(j.length>0||w.length>0),F=(0,l.useRef)(null),M=(0,l.useRef)(null),$=(0,l.useRef)(null);return(0,i.jsx)("tr",{className:"diff-line-row",children:a?(0,i.jsx)("td",{colSpan:4,className:"flex-grow-0 bgColor-accent-muted",children:(0,i.jsx)("div",{className:"d-flex flex-row",children:(0,i.jsx)("code",{className:"diff-text-cell hunk",children:(0,i.jsx)(eQ.$6,{className:"diff-text-inner color-fg-muted",html:e.html})})})}):(0,i.jsxs)(i.Fragment,{children:[e?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("td",{className:"text-center v-align-top",style:{backgroundColor:s},children:(0,i.jsx)("code",{children:e.left})}),(0,i.jsxs)("td",{className:"diff-text-cell",style:{backgroundColor:o},children:[(0,i.jsxs)("code",{className:(0,x.$)("diff-text syntax-highlighted-line",{addition:"ADDITION"===e.type,deletion:"DELETION"===e.type}),onMouseEnter:()=>S(!0),onMouseLeave:()=>S(!1),children:[m&&(0,i.jsx)("span",{className:"diff-text-marker",children:u}),(0,i.jsx)(eQ.$6,{html:c,className:"diff-text-inner"}),E&&(0,i.jsx)(nQ,{backgroundColor:"",gridCellId:"",gutterSizeOffset:"0",inlineMarkersRef:F,cellRef:$,dispatchMarkersStatus:a9.l,lineMarkersKey:g,annotations:v,conversationListThreads:y,filePath:n,onCloseFocusMode:a9.l,isMarkerListOpen:!1,isRowSelected:!1,lineType:e.type,returnFocusRef:M,subjectId:"",onCloseConversationList:a9.l,onDeleteLineComment:a9.l,children:_&&(0,i.jsx)("div",{className:(0,x.$)(" border rounded-2 color-border-default",(y.length,"mt-2 mb-1")),children:(0,i.jsx)(tW,{addCommentDialogTitle:"new comment",anchorRef:$,diffAnchor:"diff-test",batchingEnabled:!0,filePath:n,focusOnMount:!1,isLeftSide:!1,isInDialogMode:!1,isOpen:!0,lineNumber:e.left??void 0,returnFocusRef:M,startLineNumber:e.left??void 0,subjectId:"",viewerData:{avatarUrl:"monalisa",login:"monalisa"},onAddComment:a9.l,onCloseCommentDialog:a9.l})})})]}),N&&(0,i.jsx)(si,{openStartConversationDialog:()=>{C(!0),A(!0)},authorAvatarUrl:"undefined",authorLogin:"undefined",ref:$,copilotChatReference:void 0,currentHunk:void 0,diffAnchor:"diff-blah",diffLine:e,threads:y,annotations:v,handleCopyCode:a9.l,hasDraftComment:!1,isLeftSide:!0,isSplit:!1,nextHunk:void 0,previousHunk:void 0,showStartConversation:!0,shouldDisplayMinimizedComments:!1,shouldDisplayCollapseComments:!0,toggleViewingMarkers:a9.l,viewerData:{avatarUrl:"string",diffViewPreference:"string",lineSpacingPreference:"compact",login:"string",shouldDisplayComments:!0,shouldDisplayEditOptions:!0,tabSizePreference:8,viewerCanComment:!0,viewerCanApplySuggestion:!0}})]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("td",{style:{userSelect:"none",position:"relative",backgroundColor:s}}),(0,i.jsx)("td",{style:{userSelect:"none",position:"relative",backgroundColor:s}})]}),t?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("td",{className:"text-center v-align-top",style:{backgroundColor:r},onMouseEnter:()=>D(!0),onMouseLeave:()=>D(!1),children:(0,i.jsx)("code",{children:t.right})}),(0,i.jsxs)("td",{className:"diff-text-cell",style:{backgroundColor:d},onMouseEnter:()=>D(!0),onMouseLeave:()=>D(!1),children:[(0,i.jsxs)("code",{className:(0,x.$)("diff-text syntax-highlighted-line",{addition:"ADDITION"===t.type,deletion:"DELETION"===t.type}),children:[p&&(0,i.jsx)("span",{className:"diff-text-marker",children:f}),(0,i.jsx)(eQ.$6,{html:h,className:"diff-text-inner"}),O&&(0,i.jsx)(nQ,{backgroundColor:"",gridCellId:"",gutterSizeOffset:"0",inlineMarkersRef:F,cellRef:$,dispatchMarkersStatus:a9.l,lineMarkersKey:b,annotations:w,conversationListThreads:j,filePath:n,onCloseFocusMode:a9.l,isMarkerListOpen:!1,isRowSelected:!1,lineType:t.type,returnFocusRef:M,subjectId:"",onCloseConversationList:a9.l,onDeleteLineComment:a9.l,children:I&&(0,i.jsx)("div",{className:(0,x.$)(" border rounded-2 color-border-default",(j.length,"mt-2 mb-1")),children:(0,i.jsx)(tW,{addCommentDialogTitle:"new comment",anchorRef:$,diffAnchor:"diff-test",batchingEnabled:!0,filePath:n,focusOnMount:!1,isLeftSide:!1,isInDialogMode:!1,isOpen:!0,lineNumber:t.right??void 0,returnFocusRef:M,startLineNumber:t.right??void 0,subjectId:"",viewerData:{avatarUrl:"monalisa",login:"monalisa"},onAddComment:a9.l,onCloseCommentDialog:a9.l})})})]}),T&&(0,i.jsx)(si,{openStartConversationDialog:()=>{L(!0),P(!0)},authorAvatarUrl:"undefined",authorLogin:"undefined",ref:$,copilotChatReference:void 0,currentHunk:void 0,diffAnchor:"diff-blah",diffLine:t,threads:j,annotations:w,handleCopyCode:a9.l,hasDraftComment:!1,isLeftSide:!1,isSplit:!1,nextHunk:void 0,previousHunk:void 0,showStartConversation:!0,shouldDisplayMinimizedComments:!1,shouldDisplayCollapseComments:!0,toggleViewingMarkers:a9.l,viewerData:{avatarUrl:"string",diffViewPreference:"string",lineSpacingPreference:"compact",login:"string",shouldDisplayComments:!0,shouldDisplayEditOptions:!0,tabSizePreference:8,viewerCanComment:!0,viewerCanApplySuggestion:!0}})]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("td",{style:{userSelect:"none",position:"relative",backgroundColor:r}}),(0,i.jsx)("td",{style:{userSelect:"none",position:"relative",backgroundColor:r}})]})]})})};try{sr.displayName||(sr.displayName="SimpleSplitDiffRow")}catch{}function sl(e){let t=[],n=[],i=()=>{for(;t.length<n.length;)t.push(void 0);for(;n.length<t.length;)n.push(void 0)};for(let a of e)switch(a.type){case"ADDITION":n.push(a);break;case"DELETION":t.push(a);break;case"CONTEXT":case"INJECTED_CONTEXT":case"HUNK":i(),t.push(a),n.push(a)}return i(),{leftLines:t,rightLines:n}}let so=(0,a.GV)()?function(e){let t,n,i=(0,s.c)(5);i[0]!==e?(t=sl(e),i[0]=e,i[1]=t):t=i[1];let{leftLines:a,rightLines:r}=t;return i[2]!==a||i[3]!==r?(n={leftLines:a,rightLines:r},i[2]=a,i[3]=r,i[4]=n):n=i[4],n}:function(e){let{leftLines:t,rightLines:n}=(0,l.useMemo)(()=>sl(e),[e]);return{leftLines:t,rightLines:n}},sd=(0,a.GV)()?function(e){let t,n=(0,s.c)(4),{diffLines:a,filePath:r}=e,{leftLines:l,rightLines:o}=so(a);return n[0]!==r||n[1]!==l||n[2]!==o?(t=l.map((e,t)=>{let n=l[t],a=o[t],s=`${!n?`empty-left-diff-${t}`:n.blobLineNumber}-${!a?`empty-right-diff-${t}`:a.blobLineNumber}`;return(0,i.jsx)(sr,{leftDiffLine:n,rightDiffLine:a,filePath:r},s)}),n[0]=r,n[1]=l,n[2]=o,n[3]=t):t=n[3],t}:function({diffLines:e,filePath:t}){let{leftLines:n,rightLines:a}=so(e);return n.map((e,s)=>{let r=n[s],l=a[s],o=`${!r?`empty-left-diff-${s}`:r.blobLineNumber}-${!l?`empty-right-diff-${s}`:l.blobLineNumber}`;return(0,i.jsx)(sr,{leftDiffLine:r,rightDiffLine:l,filePath:t},o)})};try{sd.displayName||(sd.displayName="SimpleSplitDiffLines")}catch{}let sc=(0,a.GV)()?function(e){let t,n=(0,s.c)(3),{diffAnchor:a,children:r}=e;return n[0]!==r||n[1]!==a?(t=(0,i.jsx)("div",{className:"fgColor-muted p-2","data-diff-anchor":a,children:r}),n[0]=r,n[1]=a,n[2]=t):t=n[2],t}:function({diffAnchor:e,children:t}){return(0,i.jsx)("div",{className:"fgColor-muted p-2","data-diff-anchor":e,children:t})},su=(0,l.memo)((0,a.GV)()?function(e){let t,n=(0,s.c)(39),{diffEntryData:a,diffLinesManuallyUnhidden:r,baseHelpUrl:l,onHandleLoadDiff:o,copilotChatReference:d,hasExpandedAllRanges:c,isSplitView:u,subjectId:m,viewerData:h}=e,f=`diff-${a.pathDigest}`;if(a.isBinary){let e;return n[0]!==f?(e=(0,i.jsx)(sc,{diffAnchor:f,children:"Binary file not shown."}),n[0]=f,n[1]=e):e=n[1],e}if((0,e0.dK)(a)){let e;return n[2]!==f?(e=(0,i.jsx)(sc,{diffAnchor:f,children:"File renamed without changes."}),n[2]=f,n[3]=e):e=n[3],e}if((0,e0.Jc)(a)){let e;return n[4]!==f?(e=(0,i.jsx)(sc,{diffAnchor:f,children:"File copied without changes."}),n[4]=f,n[5]=e):e=n[5],e}if((0,e0.Sn)(a,a.status,a.oldTreeEntry?.mode,a.newTreeEntry?.mode)){let e;return n[6]!==f?(e=(0,i.jsx)(sc,{diffAnchor:f,children:"File mode changed."}),n[6]=f,n[7]=e):e=n[7],e}if(!r&&(0,e0.HI)(a)){let e,t,s=a.truncatedReason;return n[8]!==s?(e=(0,e0.l_)(s),n[8]=s,n[9]=e):e=n[9],n[10]!==f||n[11]!==o||n[12]!==e?(t=(0,i.jsx)(e6,{diffAnchor:f,onLoadDiff:o,children:e}),n[10]=f,n[11]=o,n[12]=e,n[13]=t):t=n[13],t}if((0,e0.s8)(a)){let e;return n[14]!==f?(e=(0,i.jsx)(sc,{diffAnchor:f,children:"Whitespace-only changes."}),n[14]=f,n[15]=e):e=n[15],e}if(!r&&(0,e0.lO)(a)){let e;return n[16]!==f||n[17]!==o?(e=(0,i.jsx)(e6,{diffAnchor:f,onLoadDiff:o,children:"This file was deleted."}),n[16]=f,n[17]=o,n[18]=e):e=n[18],e}if(!r&&(0,e0.xW)(a)){let e,t=`${l}/github/administering-a-repository/customizing-how-changed-files-appear-on-github`;return n[19]!==f||n[20]!==o||n[21]!==t?(e=(0,i.jsxs)(e6,{diffAnchor:f,helpText:"customizing how changed files appear on GitHub.",helpUrl:t,onLoadDiff:o,children:["Some generated files are not rendered by default. Learn more about"," "]}),n[19]=f,n[20]=o,n[21]=t,n[22]=e):e=n[22],e}if(a.isTooBig&&0===a.diffLines.length)if(r){let e,t,a=`${l}/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally`;return n[23]!==a?(e=(0,i.jsx)(e3.A,{inline:!0,href:a,children:"check out this pull request locally."}),n[23]=a,n[24]=e):e=n[24],n[25]!==f||n[26]!==e?(t=(0,i.jsxs)(sc,{diffAnchor:f,children:["Diff is too big to render. To view,"," ",e]}),n[25]=f,n[26]=e,n[27]=t):t=n[27],t}else{let e;return n[28]!==f||n[29]!==o?(e=(0,i.jsx)(e6,{diffAnchor:f,onLoadDiff:o,children:"Large diffs are not rendered by default."}),n[28]=f,n[29]=o,n[30]=e):e=n[30],e}return a.diffLines?(n[31]!==d||n[32]!==f||n[33]!==a||n[34]!==c||n[35]!==u||n[36]!==m||n[37]!==h?(t=(0,i.jsx)(sm,{diffAnchor:f,diffEntryData:a,viewerData:h,copilotChatReference:d,hasExpandedAllRanges:c,isSplitView:u,subjectId:m}),n[31]=d,n[32]=f,n[33]=a,n[34]=c,n[35]=u,n[36]=m,n[37]=h,n[38]=t):t=n[38],t):null}:function({diffEntryData:e,diffLinesManuallyUnhidden:t,baseHelpUrl:n,onHandleLoadDiff:a,copilotChatReference:s,hasExpandedAllRanges:r,isSplitView:l,subjectId:o,viewerData:d}){let c=`diff-${e.pathDigest}`;if(e.isBinary)return(0,i.jsx)(sc,{diffAnchor:c,children:"Binary file not shown."});if((0,e0.dK)(e))return(0,i.jsx)(sc,{diffAnchor:c,children:"File renamed without changes."});if((0,e0.Jc)(e))return(0,i.jsx)(sc,{diffAnchor:c,children:"File copied without changes."});if((0,e0.Sn)(e,e.status,e.oldTreeEntry?.mode,e.newTreeEntry?.mode))return(0,i.jsx)(sc,{diffAnchor:c,children:"File mode changed."});if(!t&&(0,e0.HI)(e))return(0,i.jsx)(e6,{diffAnchor:c,onLoadDiff:a,children:(0,e0.l_)(e.truncatedReason)});if((0,e0.s8)(e))return(0,i.jsx)(sc,{diffAnchor:c,children:"Whitespace-only changes."});if(!t&&(0,e0.lO)(e))return(0,i.jsx)(e6,{diffAnchor:c,onLoadDiff:a,children:"This file was deleted."});if(!t&&(0,e0.xW)(e))return(0,i.jsxs)(e6,{diffAnchor:c,helpText:"customizing how changed files appear on GitHub.",helpUrl:`${n}/github/administering-a-repository/customizing-how-changed-files-appear-on-github`,onLoadDiff:a,children:["Some generated files are not rendered by default. Learn more about"," "]});if(e.isTooBig&&0===e.diffLines.length)if(t)return(0,i.jsxs)(sc,{diffAnchor:c,children:["Diff is too big to render. To view,"," ",(0,i.jsx)(e3.A,{inline:!0,href:`${n}/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally`,children:"check out this pull request locally."})]});else return(0,i.jsx)(e6,{diffAnchor:c,onLoadDiff:a,children:"Large diffs are not rendered by default."});return e.diffLines?(0,i.jsx)(sm,{diffAnchor:c,diffEntryData:e,viewerData:d,copilotChatReference:s,hasExpandedAllRanges:r,isSplitView:l,subjectId:o}):null}),sm=(0,a.GV)()?function(e){let t,n,a,r,o,d,c,u,m,f,p,y,v,b,j,w,_,C,N=(0,s.c)(58),{diffAnchor:S,viewerData:I,diffEntryData:k,copilotChatReference:L,hasExpandedAllRanges:T,isSplitView:D,subjectId:E}=e,R=(0,l.useRef)(null),{clearSelectedLines:A}=X(),[O,P]=(0,l.useState)(null),[F,M]=(0,l.useState)(!1),$=k.newTreeEntry?.lineCount??k.oldTreeEntry?.lineCount??0;N[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,e4.G7)("pr_simple_diffs"),N[0]=t):t=N[0];let B=t;e:{let e=k.diffLines[k.diffLines.length-1];if(e?.blobLineNumber&&e.blobLineNumber<$){let t;N[1]!==k.diffLines||N[2]!==e.blobLineNumber?(t=k.diffLines.concat({__id:e7,blobLineNumber:e.blobLineNumber+1,left:null,right:null,type:"HUNK",html:"",text:""}),N[1]=k.diffLines,N[2]=e.blobLineNumber,N[3]=t):t=N[3],n=t;break e}n=k.diffLines}let V=n,{lineSpacingPreference:U,tabSizePreference:q}=I,G=H();N[4]!==A||N[5]!==G?(a=e=>{if(!R.current||!e.target)return;let t=e.target;!R.current.contains(t)&&(t.closest("td.diff-line-number")||t.closest("[data-add-comment-button]"))&&G()&&(A(),ej(),(0,h.K3)())},N[4]=A,N[5]=G,N[6]=a):a=N[6];let K=a;N[7]!==K?(r=()=>(g.XC?.addEventListener("mousedown",K),()=>{g.XC?.removeEventListener("mousedown",K)}),o=[K],N[7]=K,N[8]=r,N[9]=o):(r=N[8],o=N[9]),(0,l.useEffect)(r,o);t:{let e,t=k.status,n=k.oldTreeEntry?.path,i=k.newTreeEntry?.path;if(!n&&!i){d=void 0;break t}e="RENAMED"===t?`${n} renamed to ${i}`:"DELETED"===t||"REMOVED"===t?n:i,d=`Diff for: ${e}`}let W=d;N[10]!==V?(c=(0,e2.c7)(V),N[10]=V,N[11]=c):c=N[11];let z=c;N[12]===Symbol.for("react.memo_cache_sentinel")?(u=e=>{P(e)},N[12]=u):u=N[12];let Q=u;N[13]!==k.path||N[14]!==T?(m=e=>{if(e.shiftKey&&e.metaKey&&"ArrowLeft"===e.key&&!T&&e.target?.getAttribute("role")==="gridcell"){let e=document.querySelector(`.js-expand-all-difflines-button[data-file-path="${k.path}"]`);e?.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0}))}},N[13]=k.path,N[14]=T,N[15]=m):m=N[15];let Z=m;N[16]!==O||N[17]!==D?(f=e=>{let t=document.getSelection();if(t){let n=[];for(let e=0;e<t.rangeCount;e++){let i=t.getRangeAt(e).cloneContents();if(i.querySelectorAll("td").length){let e=`td.diff-line-number, span.diff-text-marker${D?`, ${"left"===O?"td.left-side-diff-cell":"td.right-side-diff-cell"}`:""}`;for(let t of i.querySelectorAll(e))t.parentNode&&t.parentNode.removeChild(t);for(let e of i.children){if(0===e.querySelectorAll("td.diff-text-cell").length)continue;let t=e.textContent;`
`===t?n.push(""):n.push(t)}}else if(1===t.rangeCount){let e=t.toString();if(!e)continue;n.push(e)}else{let e=i.textContent;if(!e)continue;n.push(e)}}e.clipboardData.setData("text/plain",n.join(`
`)),e.preventDefault()}},N[16]=O,N[17]=D,N[18]=f):f=N[18];let J=f;N[19]!==V?(p=V.some(sh),N[19]=V,N[20]=p):p=N[20];let Y=p;N[21]!==L||N[22]!==S||N[23]!==k.path||N[24]!==Y||N[25]!==V||N[26]!==$||N[27]!==F||N[28]!==E||N[29]!==I?(y={diffHasHiddenUnicodeCharacters:Y,diffLines:V,fileAnchor:S,fileLineCount:$,filePath:k.path,handleDiffSideCellSelectionBlocking:Q,showHiddenUnicode:F,tableRef:R,copilotChatReference:L,subjectId:E,viewerData:I},N[21]=L,N[22]=S,N[23]=k.path,N[24]=Y,N[25]=V,N[26]=$,N[27]=F,N[28]=E,N[29]=I,N[30]=y):y=N[30];let ee=y;N[31]!==Y||N[32]!==F?(v=Y&&(0,i.jsx)(a8.a,{isShown:F,toggleShowHiddenCharacters:()=>M(!F)}),N[31]=Y,N[32]=F,N[33]=v):v=N[33];let et="compact"===U;N[34]!==et?(b=(0,x.$)("tab-size","width-full",a6,{[a7]:et}),N[34]=et,N[35]=b):b=N[35];let en=`${z}px`,ei=`${2*parseFloat(z)}px`;return N[36]!==en||N[37]!==ei?(j={"--line-number-cell-width":en,"--line-number-cell-width-unified":ei},N[36]=en,N[37]=ei,N[38]=j):j=N[38],N[39]!==k.path||N[40]!==V||N[41]!==ee||N[42]!==D||N[43]!==z?(w=D?(0,i.jsx)(e1.wj,{lineWidth:z,children:B?(0,i.jsx)(sd,{diffLines:V,filePath:k.path}):(0,i.jsx)(a2,{...ee})}):(0,i.jsx)(e1.Qe,{lineWidth:z,children:B?(0,i.jsx)(ss,{diffLines:V,filePath:k.path}):(0,i.jsx)(a4,{...ee})}),N[39]=k.path,N[40]=V,N[41]=ee,N[42]=D,N[43]=z,N[44]=w):w=N[44],N[45]!==S||N[46]!==O||N[47]!==Z||N[48]!==J||N[49]!==b||N[50]!==j||N[51]!==w||N[52]!==q||N[53]!==W?(_=(0,i.jsx)("table",{"aria-label":W,onKeyDown:Z,ref:R,className:b,"data-block-diff-cell-selection":O,"data-diff-anchor":S,"data-tab-size":q,"data-paste-markdown-skip":!0,onCopy:J,role:"grid",style:j,children:w}),N[45]=S,N[46]=O,N[47]=Z,N[48]=J,N[49]=b,N[50]=j,N[51]=w,N[52]=q,N[53]=W,N[54]=_):_=N[54],N[55]!==v||N[56]!==_?(C=(0,i.jsxs)(i.Fragment,{children:[v,_]}),N[55]=v,N[56]=_,N[57]=C):C=N[57],C}:function({diffAnchor:e,viewerData:t,diffEntryData:n,copilotChatReference:a,hasExpandedAllRanges:s,isSplitView:r,subjectId:o}){let d=(0,l.useRef)(null),{clearSelectedLines:c}=X(),[u,m]=(0,l.useState)(null),[f,p]=(0,l.useState)(!1),y=n.newTreeEntry?.lineCount??n.oldTreeEntry?.lineCount??0,v=(0,e4.G7)("pr_simple_diffs"),b=(0,l.useMemo)(()=>{let e=n.diffLines[n.diffLines.length-1];return e?.blobLineNumber&&e.blobLineNumber<y?n.diffLines.concat({__id:e7,blobLineNumber:e.blobLineNumber+1,left:null,right:null,type:"HUNK",html:"",text:""}):n.diffLines},[n.diffLines,y]),{lineSpacingPreference:j,tabSizePreference:w}=t,_=H(),C=(0,l.useCallback)(e=>{if(!d.current||!e.target)return;let t=e.target;!d.current.contains(t)&&(t.closest("td.diff-line-number")||t.closest("[data-add-comment-button]"))&&_()&&(c(),ej(),(0,h.K3)())},[c,_]);(0,l.useEffect)(()=>(g.XC?.addEventListener("mousedown",C),()=>{g.XC?.removeEventListener("mousedown",C)}),[C]);let N=(0,l.useMemo)(()=>{let e,t=n.status,i=n.oldTreeEntry?.path,a=n.newTreeEntry?.path;if(i||a)return e="RENAMED"===t?`${i} renamed to ${a}`:"DELETED"===t||"REMOVED"===t?i:a,`Diff for: ${e}`},[n]),S=(0,e2.c7)(b),I=(0,l.useCallback)(e=>{m(e)},[m]),k=(0,l.useCallback)(e=>{if(e.shiftKey&&e.metaKey&&"ArrowLeft"===e.key&&!s&&e.target?.getAttribute("role")==="gridcell"){let e=document.querySelector(`.js-expand-all-difflines-button[data-file-path="${n.path}"]`);e?.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0}))}},[s,n.path]),L=(0,l.useCallback)(e=>{let t=document.getSelection();if(t){let n=[];for(let e=0;e<t.rangeCount;e++){let i=t.getRangeAt(e).cloneContents();if(i.querySelectorAll("td").length){let e=`td.diff-line-number, span.diff-text-marker${r?`, ${"left"===u?"td.left-side-diff-cell":"td.right-side-diff-cell"}`:""}`;for(let t of i.querySelectorAll(e))t.parentNode&&t.parentNode.removeChild(t);for(let e of i.children){if(0===e.querySelectorAll("td.diff-text-cell").length)continue;let t=e.textContent;`
`===t?n.push(""):n.push(t)}}else if(1===t.rangeCount){let e=t.toString();if(!e)continue;n.push(e)}else{let e=i.textContent;if(!e)continue;n.push(e)}}e.clipboardData.setData("text/plain",n.join(`
`)),e.preventDefault()}},[u,r]),T=(0,l.useMemo)(()=>b.some(e=>(0,tH.Y)(e.text)),[b]),D={diffHasHiddenUnicodeCharacters:T,diffLines:b,fileAnchor:e,fileLineCount:y,filePath:n.path,handleDiffSideCellSelectionBlocking:I,showHiddenUnicode:f,tableRef:d,copilotChatReference:a,subjectId:o,viewerData:t};return(0,i.jsxs)(i.Fragment,{children:[T&&(0,i.jsx)(a8.a,{isShown:f,toggleShowHiddenCharacters:()=>p(!f)}),(0,i.jsx)("table",{"aria-label":N,onKeyDown:k,ref:d,className:(0,x.$)("tab-size","width-full",a6,{[a7]:"compact"===j}),"data-block-diff-cell-selection":u,"data-diff-anchor":e,"data-tab-size":w,"data-paste-markdown-skip":!0,onCopy:L,role:"grid",style:{"--line-number-cell-width":`${S}px`,"--line-number-cell-width-unified":`${2*parseFloat(S)}px`},children:r?(0,i.jsx)(e1.wj,{lineWidth:S,children:v?(0,i.jsx)(sd,{diffLines:b,filePath:n.path}):(0,i.jsx)(a2,{...D})}):(0,i.jsx)(e1.Qe,{lineWidth:S,children:v?(0,i.jsx)(ss,{diffLines:b,filePath:n.path}):(0,i.jsx)(a4,{...D})})})]})};function sh(e){return(0,tH.Y)(e.text)}try{sc.displayName||(sc.displayName="PlainTextStatus")}catch{}try{su.displayName||(su.displayName="DiffLines")}catch{}try{sm.displayName||(sm.displayName="CodeDiffLines")}catch{}var sf=n(8431),sp=n(46251),sg=n(78049);let sy="SubmoduleDiff-module__filesActionList--sbPQt",sx="SubmoduleDiff-module__fileRowLinkItem--Z1ES5",sv="SubmoduleDiff-module__path--hB1wm",sb="SubmoduleDiff-module__fileRow--Y9n2E",sj="SubmoduleDiff-module__linesAdded--tJqtP",sw="SubmoduleDiff-module__linesDeleted--nr9cp",s_=(0,a.GV)()?function(e){let t,n,a,r,l,o,d=(0,s.c)(28),{submodule:u}=e,{basePath:m,changedFiles:h,contentsUrl:f,newCommitOid:p,oldCommitOid:g,status:y,submoduleUrl:x}=u,v=u.summary.length>0&&u.contentsUrl&&"MODIFIED"===y;switch(y){case"ADDED":{let e;d[0]!==f||d[1]!==p?(e=(0,i.jsx)(sS,{commitOid:p,contentsUrl:f,type:"added"}),d[0]=f,d[1]=p,d[2]=e):e=d[2],t=e;break}case"DELETED":case"REMOVED":{let e;d[3]!==f||d[4]!==g?(e=(0,i.jsx)(sS,{commitOid:g,contentsUrl:f,type:"deleted"}),d[3]=f,d[4]=g,d[5]=e):e=d[5],t=e;break}default:{let e;d[6]!==h||d[7]!==f||d[8]!==p||d[9]!==g?(e=(0,i.jsx)(sI,{newCommitOid:p,oldCommitOid:g,changedFiles:h,contentsUrl:f}),d[6]=h,d[7]=f,d[8]=p,d[9]=g,d[10]=e):e=d[10],t=e}}let b=t,j=`px-3 py-2 ${v?"border-bottom bgColor-muted":""}`;return d[11]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(c.FileSubmoduleIcon,{className:"fgColor-muted mr-2",size:16}),d[11]=n):n=d[11],d[12]!==m||d[13]!==x?(a=(0,i.jsx)(sC,{basePath:m,submoduleUrl:x}),d[12]=m,d[13]=x,d[14]=a):a=d[14],d[15]!==b||d[16]!==j||d[17]!==a?(r=(0,i.jsxs)("div",{className:j,children:[n,a,b]}),d[15]=b,d[16]=j,d[17]=a,d[18]=r):r=d[18],d[19]!==f||d[20]!==p||d[21]!==g||d[22]!==v||d[23]!==u.summary?(l=v&&(0,i.jsx)(eO.l,{className:sy,showDividers:!0,variant:"full",children:u.summary.map(e=>(0,i.jsx)(sk,{compareUrl:`${f}/compare/${g}...${p}`,linesAdded:e.linesAdded,linesDeleted:e.linesDeleted,path:e.path,pathDigest:e.pathDigest,status:e.status},e.pathDigest))}),d[19]=f,d[20]=p,d[21]=g,d[22]=v,d[23]=u.summary,d[24]=l):l=d[24],d[25]!==r||d[26]!==l?(o=(0,i.jsxs)("div",{children:[r,l]}),d[25]=r,d[26]=l,d[27]=o):o=d[27],o}:function({submodule:e}){let{basePath:t,changedFiles:n,contentsUrl:a,newCommitOid:s,oldCommitOid:r,status:o,submoduleUrl:d}=e,u=e.summary.length>0&&e.contentsUrl&&"MODIFIED"===o,m=(0,l.useMemo)(()=>{switch(o){case"ADDED":return(0,i.jsx)(sS,{commitOid:s,contentsUrl:a,type:"added"});case"DELETED":case"REMOVED":return(0,i.jsx)(sS,{commitOid:r,contentsUrl:a,type:"deleted"});default:return(0,i.jsx)(sI,{newCommitOid:s,oldCommitOid:r,changedFiles:n,contentsUrl:a})}},[s,r,o,n,a]);return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:`px-3 py-2 ${u?"border-bottom bgColor-muted":""}`,children:[(0,i.jsx)(c.FileSubmoduleIcon,{className:"fgColor-muted mr-2",size:16}),(0,i.jsx)(sC,{basePath:t,submoduleUrl:d}),m]}),u&&(0,i.jsx)(eO.l,{className:sy,showDividers:!0,variant:"full",children:e.summary.map(e=>(0,i.jsx)(sk,{compareUrl:`${a}/compare/${r}...${s}`,linesAdded:e.linesAdded,linesDeleted:e.linesDeleted,path:e.path,pathDigest:e.pathDigest,status:e.status},e.pathDigest))})]})},sC=(0,a.GV)()?function(e){let t,n,a=(0,s.c)(5),{basePath:r,submoduleUrl:l}=e;return a[0]!==r||a[1]!==l?(t=l?(0,i.jsx)(e3.A,{inline:!0,href:l,children:r}):r,a[0]=r,a[1]=l,a[2]=t):t=a[2],a[3]!==t?(n=(0,i.jsxs)(i.Fragment,{children:["Submodule"," ",t," "]}),a[3]=t,a[4]=n):n=a[4],n}:function({basePath:e,submoduleUrl:t}){return(0,i.jsxs)(i.Fragment,{children:["Submodule"," ",t?(0,i.jsx)(e3.A,{inline:!0,href:t,children:e}):e," "]})};function sN(e){return e.slice(0,7)}let sS=(0,a.GV)()?function(e){let t=(0,s.c)(13),{commitOid:n,contentsUrl:a,type:r}=e,l=void 0===n?"":n,o="added"===r?"added at":"deleted from";if(a){let e,n,s,r=`${a}/tree/${l}`;return t[0]!==l?(e=sN(l),t[0]=l,t[1]=e):e=t[1],t[2]!==r||t[3]!==e?(n=(0,i.jsx)(e3.A,{inline:!0,href:r,children:e}),t[2]=r,t[3]=e,t[4]=n):n=t[4],t[5]!==n||t[6]!==o?(s=(0,i.jsxs)(i.Fragment,{children:[o," ",n]}),t[5]=n,t[6]=o,t[7]=s):s=t[7],s}{let e,n;return t[8]!==l?(e=sN(l),t[8]=l,t[9]=e):e=t[9],t[10]!==e||t[11]!==o?(n=(0,i.jsxs)(i.Fragment,{children:[o," ",e]}),t[10]=e,t[11]=o,t[12]=n):n=t[12],n}}:function({commitOid:e="",contentsUrl:t,type:n}){let a="added"===n?"added at":"deleted from";return t?(0,i.jsxs)(i.Fragment,{children:[a," ",(0,i.jsx)(e3.A,{inline:!0,href:`${t}/tree/${e}`,children:sN(e)})]}):(0,i.jsxs)(i.Fragment,{children:[a," ",sN(e)]})},sI=(0,a.GV)()?function(e){let t,n,a,r=(0,s.c)(12),{newCommitOid:l,oldCommitOid:o,changedFiles:d,contentsUrl:c}=e,u=void 0===l?"":l,m=void 0===o?"":o,h=void 0===d?0:d;r[0]!==h||r[1]!==c||r[2]!==u||r[3]!==m?(t=h>0&&c?`${h} ${1===h?"file":"files"}`:`from ${sN(m)} to ${sN(u)}`,r[0]=h,r[1]=c,r[2]=u,r[3]=m,r[4]=t):t=r[4];let f=t;return r[5]!==f||r[6]!==c||r[7]!==u||r[8]!==m?(n=c?(0,i.jsx)(e3.A,{inline:!0,href:`${c}/compare/${m}...${u}`,children:f}):f,r[5]=f,r[6]=c,r[7]=u,r[8]=m,r[9]=n):n=r[9],r[10]!==n?(a=(0,i.jsxs)(i.Fragment,{children:["updated"," ",n]}),r[10]=n,r[11]=a):a=r[11],a}:function({newCommitOid:e="",oldCommitOid:t="",changedFiles:n=0,contentsUrl:a}){let s=n>0&&a?`${n} ${1===n?"file":"files"}`:`from ${sN(t)} to ${sN(e)}`;return(0,i.jsxs)(i.Fragment,{children:["updated"," ",a?(0,i.jsx)(e3.A,{inline:!0,href:`${a}/compare/${t}...${e}`,children:s}):s]})},sk=(0,a.GV)()?function(e){let t,n,a,l,o,d,c=(0,s.c)(16),{compareUrl:u,linesAdded:m,linesDeleted:h,path:f,pathDigest:p,status:g}=e,y=`${u}#diff-${p}`;return c[0]!==g?(t=(0,i.jsx)(sg.E,{status:g}),c[0]=g,c[1]=t):t=c[1],c[2]!==f?(n=(0,i.jsx)("span",{className:sv,children:f}),c[2]=f,c[3]=n):n=c[3],c[4]!==m||c[5]!==h?(a=(m>0||h>0)&&(0,i.jsxs)("div",{className:"d-flex flex-shrink-0 gap-1 flex-nowrap",children:[(0,i.jsx)("div",{className:sj,children:m>0&&(0,i.jsxs)(r.C,{isAddition:!0,children:["+",sL(m)]})}),(0,i.jsx)("div",{className:sw,children:h>0&&(0,i.jsxs)(r.C,{isAddition:!1,children:["-",sL(h)]})})]}),c[4]=m,c[5]=h,c[6]=a):a=c[6],c[7]!==n||c[8]!==a?(l=(0,i.jsxs)("div",{className:"d-flex gap-1 flex-justify-between width-full",children:[n,a]}),c[7]=n,c[8]=a,c[9]=l):l=c[9],c[10]!==t||c[11]!==l?(o=(0,i.jsxs)(sp.B,{gap:"condensed",direction:"horizontal",align:"center",className:sb,children:[t,l]}),c[10]=t,c[11]=l,c[12]=o):o=c[12],c[13]!==y||c[14]!==o?(d=(0,i.jsx)(eO.l.LinkItem,{href:y,className:sx,children:o}),c[13]=y,c[14]=o,c[15]=d):d=c[15],d}:function({compareUrl:e,linesAdded:t,linesDeleted:n,path:a,pathDigest:s,status:l}){return(0,i.jsx)(eO.l.LinkItem,{href:`${e}#diff-${s}`,className:sx,children:(0,i.jsxs)(sp.B,{gap:"condensed",direction:"horizontal",align:"center",className:sb,children:[(0,i.jsx)(sg.E,{status:l}),(0,i.jsxs)("div",{className:"d-flex gap-1 flex-justify-between width-full",children:[(0,i.jsx)("span",{className:sv,children:a}),(t>0||n>0)&&(0,i.jsxs)("div",{className:"d-flex flex-shrink-0 gap-1 flex-nowrap",children:[(0,i.jsx)("div",{className:sj,children:t>0&&(0,i.jsxs)(r.C,{isAddition:!0,children:["+",sL(t)]})}),(0,i.jsx)("div",{className:sw,children:n>0&&(0,i.jsxs)(r.C,{isAddition:!1,children:["-",sL(n)]})})]})]})]})})};function sL(e){return e>999?`${(e/1e3).toFixed(1)}k`:e.toLocaleString()}try{s_.displayName||(s_.displayName="SubmoduleDiff")}catch{}try{sC.displayName||(sC.displayName="SubmodulePath")}catch{}try{sS.displayName||(sS.displayName="SubmoduleCommitChange")}catch{}try{sI.displayName||(sI.displayName="SubmoduleModified")}catch{}try{sk.displayName||(sk.displayName="SubmoduleFileRow")}catch{}let sT=({hasCopilotAccess:e,isBinary:t,isSubmodule:n,path:i,repository:a,status:s})=>!!e&&!t&&!n&&!!i&&"DELETED"!==s&&"REMOVED"!==s&&!!a.id&&!!a.name&&!!a.ownerLogin&&!0,sD=({newCommitOid:e,newTreeEntry:t,oldCommitOid:n,oldTreeEntry:i,path:a,pathDigest:s,repository:r})=>{let l=n&&e?(0,nR.IO9)({repo:r,commitish:n,action:"raw",path:a}):"";return{baseFile:sE({path:i?.path,oid:n,repository:r}),headFile:sE({path:t?.path,oid:e,repository:r}),baseBranchRef:n,id:`#diff-${s}`,type:"file-diff",url:l}},sE=({path:e,oid:t,repository:n})=>e&&t?{type:"file",url:(0,nR.IO9)({repo:n,commitish:t,action:"raw",path:e}),path:e,repoID:n.id,repoName:n.name,repoOwner:n.ownerLogin,ref:t,commitOID:t}:null,sR=(0,a.GV)()?function(e){let t,n=(0,s.c)(8),{isBinary:i,isSubmodule:a,path:r,status:l,repository:o,newCommitOid:d,newTreeEntry:c,oldCommitOid:u,oldTreeEntry:m,pathDigest:h,hasCopilotAccess:f}=e;e:{let e;if(!sT({isBinary:i,isSubmodule:a,path:r,status:l,repository:o,hasCopilotAccess:f})){t=void 0;break e}n[0]!==d||n[1]!==c||n[2]!==u||n[3]!==m||n[4]!==r||n[5]!==h||n[6]!==o?(e=sD({newCommitOid:d,newTreeEntry:c,oldCommitOid:u,oldTreeEntry:m,path:r,pathDigest:h,repository:o}),n[0]=d,n[1]=c,n[2]=u,n[3]=m,n[4]=r,n[5]=h,n[6]=o,n[7]=e):e=n[7],t=e}return t}:function({isBinary:e,isSubmodule:t,path:n,status:i,repository:a,newCommitOid:s,newTreeEntry:r,oldCommitOid:o,oldTreeEntry:d,pathDigest:c,hasCopilotAccess:u}){return(0,l.useMemo)(()=>{if(sT({isBinary:e,isSubmodule:t,path:n,status:i,repository:a,hasCopilotAccess:u}))return sD({newCommitOid:s,newTreeEntry:r,oldCommitOid:o,oldTreeEntry:d,path:n,pathDigest:c,repository:a})},[s,r,o,d,c,a,u,e,t,n,i])},sA="FileReviewThread-module__ReviewThreadContainer--InwxI",sO="FileReviewThread-module__ReviewThreadHeading--oFg3s",sP="FileReviewThread-module__ReviewThreadInnerContainer--jYE3S",sF="FileReviewThread-module__SpinnerWrapper--zQOoj",sM=(0,a.GV)()?function(e){let t,n,a,r,d,u,h,f,p,g,y,v,b,j,w,_,C,N,S,I,k,L,T,D,E,R,A=(0,s.c)(69);if(A[0]!==e){let{fileAnchor:i,filePath:s,thread:l,isFirstThread:o,ghostUser:c,manuallyUpdateCommentsWithThisThreadId:u,...m}=e;t=s,d=l,a=o,n=c,r=m,A[0]=e,A[1]=t,A[2]=n,A[3]=a,A[4]=r,A[5]=d}else t=A[1],n=A[2],a=A[3],r=A[4],d=A[5];let O=(0,l.useRef)(null);A[6]===Symbol.for("react.memo_cache_sentinel")?(u=(0,nl.A)("localStorage"),A[6]=u):u=A[6];let P=u,F=d?.isResolved,[M,$]=(0,l.useState)(""),[B,V]=(0,l.useState)(F??!1);A[7]!==F||A[8]!==d.id?(h=()=>{let e=localStorage.getItem(`reviewThreadIsCollapsed_${d.id}`);null!==e?V(JSON.parse(e)):F&&V(!0)},f=[F,d.id],A[7]=F,A[8]=d.id,A[9]=h,A[10]=f):(h=A[9],f=A[10]),(0,l.useEffect)(h,f),A[11]!==B||A[12]!==d.id?(p=()=>{window.requestAnimationFrame(()=>{P.setItem(`reviewThreadIsCollapsed_${d.id}`,JSON.stringify(!B))}),V(sB)},A[11]=B,A[12]=d.id,A[13]=p):p=A[13];let U=p,{sendAnalyticsEvent:q}=(0,tK.s)(),{mutate:G}=(0,nD.H)(t,o.zW);A[14]!==G||A[15]!==q||A[16]!==d?(g=()=>{d&&!d.isResolved&&(G({threadId:d.id},{onError:()=>$("Failed to resolve thread"),onSuccess:()=>{V(!0),P.removeItem(`reviewThreadIsCollapsed_${d.id}`)}}),q("comments.resolve_thread","RESOLVE_CONVERSATION_BUTTON"))},A[14]=G,A[15]=q,A[16]=d,A[17]=g):g=A[17];let H=g,{mutate:K}=(0,nE.i)(t,o.zW);A[18]!==q||A[19]!==d||A[20]!==K?(y=()=>{d&&(K({threadId:d.id},{onError:()=>$("Failed to unresolve thread"),onSuccess:()=>{V(!1),P.removeItem(`reviewThreadIsCollapsed_${d.id}`)}}),q("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON"))},A[18]=q,A[19]=d,A[20]=K,A[21]=y):y=A[21];let W=y;if(!d||!(d.commentsData?.comments&&d.commentsData.comments.length>0))return null;let z=d?.commentsData?.comments[0]?.reviewVariantType===t3.hH.Automated?d.commentsData?.comments[0]?.automatedComment:null,Q=z&&z.dismissable,Z=z&&z.source===t3.vk.LicenseCompliance,J=!!d.isResolved;A[22]===Symbol.for("react.memo_cache_sentinel")?(v=(0,nA.M3)(),A[22]=v):v=A[22];let Y=v;A[23]!==d.commentsData?.comments?(b=Y&&d.commentsData?.comments?.some(s$),A[23]=d.commentsData?.comments,A[24]=b):b=A[24];let X=b,ee=d.commentsData?.comments[0]?.createdAt,et=d.commentsData?.comments[0]?.author?.login??"Unknown Author",en=`${F?"Unresolve":"Resolve"} comment`;if(ee){let e;A[25]!==ee?(e=(0,ns.C)(new Date(ee)),A[25]=ee,A[26]=e):e=A[26];let t=e;en=`${F?"Unresolve":"Resolve"} ${et}'s comment, ${t}`}A[27]===Symbol.for("react.memo_cache_sentinel")?(j=(0,i.jsx)(nu,{}),A[27]=j):j=A[27],A[28]===Symbol.for("react.memo_cache_sentinel")?(w=(0,x.$)("px-1",sA),A[28]=w):w=A[28];let ei=B?"Expand comment":"Collapse comment",ea=B?c.ChevronRightIcon:c.ChevronDownIcon;return A[29]!==U||A[30]!==a||A[31]!==ei||A[32]!==ea?(_=(0,i.jsx)(m.K,{"aria-label":ei,icon:ea,size:"small",variant:"invisible",onClick:U,"data-is-first-collapse-button":a}),A[29]=U,A[30]=a,A[31]=ei,A[32]=ea,A[33]=_):_=A[33],A[34]===Symbol.for("react.memo_cache_sentinel")?(C=(0,i.jsx)("h2",{className:sO,children:"Comment on file"}),A[34]=C):C=A[34],A[35]!==d.positioning?.isOutdated?(N=d.positioning?.isOutdated&&(0,i.jsx)(no.A,{variant:"secondary",children:"Outdated"}),A[35]=d.positioning?.isOutdated,A[36]=N):N=A[36],A[37]!==J?(S=J&&(0,i.jsx)(no.A,{variant:"secondary",children:"Resolved"}),A[37]=J,A[38]=S):S=A[38],A[39]!==N||A[40]!==S?(I=(0,i.jsxs)("div",{className:sP,children:[N,S]}),A[39]=N,A[40]=S,A[41]=I):I=A[41],A[42]!==_||A[43]!==I?(k=(0,i.jsxs)("div",{className:w,children:[_,C,I]}),A[42]=_,A[43]=I,A[44]=k):k=A[44],A[45]===Symbol.for("react.memo_cache_sentinel")?(L=(0,i.jsxs)("div",{className:sF,children:[(0,i.jsx)(eZ.A,{}),(0,i.jsx)("p",{children:"Loading comments"})]}),A[45]=L):L=A[45],A[46]!==M?(T=M&&(0,i.jsxs)(nd.A,{variant:"danger",className:"m-2",children:[(0,i.jsx)(c.StopIcon,{className:"mr-2"}),M]}),A[46]=M,A[47]=T):T=A[47],A[48]!==z||A[49]!==Q||A[50]!==t||A[51]!==n||A[52]!==H||A[53]!==W||A[54]!==B||A[55]!==X||A[56]!==F||A[57]!==J||A[58]!==Z||A[59]!==en||A[60]!==r||A[61]!==d?(D=!B&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(nT,{lineMarkersKey:o.zW,batchingEnabled:!0,filePath:t,gridCellId:`${t}-file-level-markers`,isInlineComment:!1,thread:d,shouldLimitHeight:!1,...r,ghostUser:n}),X&&!Q&&!Z&&(0,i.jsxs)("div",{className:"d-flex flex-items-center p-2 border-top flex-wrap",children:[(0,i.jsx)(ek.Q,{"aria-label":en,onClick:J?W:H,className:"mr-2",children:F?"Unresolve comment":"Resolve comment"}),J&&d.resolvedBy&&(0,i.jsxs)("span",{className:"fgColor-muted f6",children:[(0,i.jsx)("b",{children:d.resolvedBy})," marked this comment as resolved"]})]}),Q&&(0,i.jsx)(n$,{automatedComment:z,thread:d,filePath:t,lineMarkersKey:o.zW,setErrorMessage:$,setIsCollapsed:V,safeLocalStorage:P})]}),A[48]=z,A[49]=Q,A[50]=t,A[51]=n,A[52]=H,A[53]=W,A[54]=B,A[55]=X,A[56]=F,A[57]=J,A[58]=Z,A[59]=en,A[60]=r,A[61]=d,A[62]=D):D=A[62],A[63]!==T||A[64]!==D?(E=(0,i.jsxs)(l.Suspense,{fallback:L,children:[T,D]}),A[63]=T,A[64]=D,A[65]=E):E=A[65],A[66]!==k||A[67]!==E?(R=(0,i.jsx)(nr.t,{fallback:j,children:(0,i.jsxs)("div",{className:"rounded-2 bgColor-default",ref:O,children:[k,E]})}),A[66]=k,A[67]=E,A[68]=R):R=A[68],R}:function({fileAnchor:e,filePath:t,thread:n,isFirstThread:a,ghostUser:s,manuallyUpdateCommentsWithThisThreadId:r,...d}){let u=(0,l.useRef)(null),h=(0,nl.A)("localStorage"),f=n?.isResolved,[p,g]=(0,l.useState)(""),[y,v]=(0,l.useState)(f??!1);(0,l.useEffect)(()=>{let e=localStorage.getItem(`reviewThreadIsCollapsed_${n.id}`);null!==e?v(JSON.parse(e)):f&&v(!0)},[f,n.id]);let{sendAnalyticsEvent:b}=(0,tK.s)(),{mutate:j}=(0,nD.H)(t,o.zW),{mutate:w}=(0,nE.i)(t,o.zW);if(!n||!(n.commentsData?.comments&&n.commentsData.comments.length>0))return null;let _=n?.commentsData?.comments[0]?.reviewVariantType===t3.hH.Automated?n.commentsData?.comments[0]?.automatedComment:null,C=_&&_.dismissable,N=_&&_.source===t3.vk.LicenseCompliance,S=!!n.isResolved,I=(0,nA.M3)()&&n.commentsData?.comments?.some(e=>e.state?.toUpperCase()!=="PENDING"),k=n.commentsData?.comments[0]?.createdAt,L=n.commentsData?.comments[0]?.author?.login??"Unknown Author",T=`${f?"Unresolve":"Resolve"} comment`;if(k){let e=(0,ns.C)(new Date(k));T=`${f?"Unresolve":"Resolve"} ${L}'s comment, ${e}`}return(0,i.jsx)(nr.t,{fallback:(0,i.jsx)(nu,{}),children:(0,i.jsxs)("div",{className:"rounded-2 bgColor-default",ref:u,children:[(0,i.jsxs)("div",{className:(0,x.$)("px-1",sA),children:[(0,i.jsx)(m.K,{"aria-label":y?"Expand comment":"Collapse comment",icon:y?c.ChevronRightIcon:c.ChevronDownIcon,size:"small",variant:"invisible",onClick:()=>{window.requestAnimationFrame(()=>{h.setItem(`reviewThreadIsCollapsed_${n.id}`,JSON.stringify(!y))}),v(e=>!e)},"data-is-first-collapse-button":a}),(0,i.jsx)("h2",{className:sO,children:"Comment on file"}),(0,i.jsxs)("div",{className:sP,children:[n.positioning?.isOutdated&&(0,i.jsx)(no.A,{variant:"secondary",children:"Outdated"}),S&&(0,i.jsx)(no.A,{variant:"secondary",children:"Resolved"})]})]}),(0,i.jsxs)(l.Suspense,{fallback:(0,i.jsxs)("div",{className:sF,children:[(0,i.jsx)(eZ.A,{}),(0,i.jsx)("p",{children:"Loading comments"})]}),children:[p&&(0,i.jsxs)(nd.A,{variant:"danger",className:"m-2",children:[(0,i.jsx)(c.StopIcon,{className:"mr-2"}),p]}),!y&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(nT,{lineMarkersKey:o.zW,batchingEnabled:!0,filePath:t,gridCellId:`${t}-file-level-markers`,isInlineComment:!1,thread:n,shouldLimitHeight:!1,...d,ghostUser:s}),I&&!C&&!N&&(0,i.jsxs)("div",{className:"d-flex flex-items-center p-2 border-top flex-wrap",children:[(0,i.jsx)(ek.Q,{"aria-label":T,onClick:S?()=>{n&&(w({threadId:n.id},{onError:()=>g("Failed to unresolve thread"),onSuccess:()=>{v(!1),h.removeItem(`reviewThreadIsCollapsed_${n.id}`)}}),b("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON"))}:()=>{n&&!n.isResolved&&(j({threadId:n.id},{onError:()=>g("Failed to resolve thread"),onSuccess:()=>{v(!0),h.removeItem(`reviewThreadIsCollapsed_${n.id}`)}}),b("comments.resolve_thread","RESOLVE_CONVERSATION_BUTTON"))},className:"mr-2",children:f?"Unresolve comment":"Resolve comment"}),S&&n.resolvedBy&&(0,i.jsxs)("span",{className:"fgColor-muted f6",children:[(0,i.jsx)("b",{children:n.resolvedBy})," marked this comment as resolved"]})]}),C&&(0,i.jsx)(n$,{automatedComment:_,thread:n,filePath:t,lineMarkersKey:o.zW,setErrorMessage:g,setIsCollapsed:v,safeLocalStorage:h})]})]})]})})};function s$(e){return e.state?.toUpperCase()!=="PENDING"}function sB(e){return!e}try{sM.displayName||(sM.displayName="FileReviewThread")}catch{}let sV=(0,a.GV)()?function(e){let t,n,a,r,o,d,c,u=(0,s.c)(19);if(u[0]!==e){let{conversationListThreads:i,filePath:s,manuallyUpdateCommentsWithThisThreadId:l,ghostUser:o,...d}=e;t=i,n=s,a=o,r=d,u[0]=e,u[1]=t,u[2]=n,u[3]=a,u[4]=r}else t=u[1],n=u[2],a=u[3],r=u[4];let m=(0,l.useRef)(null);if(u[5]!==t?(o={containerRef:m,markers:t,disabled:!1,focusInStrategy:"closest"},u[5]=t,u[6]=o):o=u[6],tZ(o),u[7]!==t||u[8]!==n||u[9]!==a||u[10]!==r){let e;u[12]!==t.length||u[13]!==n||u[14]!==a||u[15]!==r?(e=(e,s)=>(0,i.jsx)("div",{className:(0,x.$)("mt-1 border rounded-2 color-border-default color-shadow-small",s===t.length-1?"mb-1":"mb-2"),"data-first-marker":0===s,"data-marker-id":`${e.id}`,tabIndex:0,children:(0,i.jsx)(sM,{subjectId:r.subjectId,viewerData:r.viewerData,filePath:n,thread:e,ghostUser:a},e.id)},`review-thread-${e.id}`),u[12]=t.length,u[13]=n,u[14]=a,u[15]=r,u[16]=e):e=u[16],d=t.map(e),u[7]=t,u[8]=n,u[9]=a,u[10]=r,u[11]=d}else d=u[11];return u[17]!==d?(c=(0,i.jsx)("div",{className:"d-flex pt-1 px-1",children:(0,i.jsx)("div",{className:ni,ref:m,children:d})}),u[17]=d,u[18]=c):c=u[18],c}:function({conversationListThreads:e,filePath:t,manuallyUpdateCommentsWithThisThreadId:n,ghostUser:a,...s}){let r=(0,l.useRef)(null);return tZ({containerRef:r,markers:e,disabled:!1,focusInStrategy:"closest"}),(0,i.jsx)("div",{className:"d-flex pt-1 px-1",children:(0,i.jsx)("div",{className:ni,ref:r,children:e.map((n,r)=>(0,i.jsx)("div",{className:(0,x.$)("mt-1 border rounded-2 color-border-default color-shadow-small",r===e.length-1?"mb-1":"mb-2"),"data-first-marker":0===r,"data-marker-id":`${n.id}`,tabIndex:0,children:(0,i.jsx)(sM,{subjectId:s.subjectId,viewerData:s.viewerData,filePath:t,thread:n,ghostUser:a},n.id)},`review-thread-${n.id}`))})})};try{sV.displayName||(sV.displayName="FileMarkers")}catch{}let sU=new Set,sq="b:0-l:null-r:null";function sG(e){switch(e){case"COMMIT":return"Due to the large number of changes in the selected commit, only one file is being shown at a time.";case"RANGE":return"Due to the large number of changes in the selected commit range, only one file is being shown at a time.";default:return"Due to the large number of changes in this pull request, only one file is being shown at a time."}}let sH=(0,l.forwardRef)((0,a.GV)()?function(e,t){let n,a,d,u,m,h,f,p,y,v,b,j,w,_,C,N,S,I,L,T=(0,s.c)(131),{addFileCommentButtonRef:D,collapsed:E,currentUser:R,diffLines:A,diffManuallyExpanded:O,diffSize:P,helpUrl:F,fileComments:$,headerStickyOffset:B,hiddenFeatures:V,isAddingFileComment:U,isBinary:q,isSelected:G,isSubmodule:H,isTooBig:K,leftSideContent:W,linesAdded:z,linesChanged:Q,linesDeleted:Z,newTreeEntry:J,newCommitOid:Y,objectId:X,oldTreeEntry:ee,oldCommitOid:et,onToggleCollapse:en,path:ei,pathDigest:ea,pullRequestGlobalRelayId:es,repository:er,richDiffState:el,rightSideContent:eo,setIsAddingFileComment:ed,hasExpandedAllRanges:ec,expandAllContextLines:eu,canExpandOrCollapseLines:em,status:eh,submodule:ef,truncatedReason:ep,addInjectedContextLines:eg,loadDiff:ey}=e,ex=void 0===V?sU:V,ev=void 0!==G&&G,eb=H&&!!ef,ej=!eb&&!el?.showRichDiff,[ew,e_]=(0,l.useState)(O),eC=(0,k.j5)(),{comparisonView:eN}=(0,k.L3)();T[0]!==R.hasCopilotAccess||T[1]!==q||T[2]!==H||T[3]!==Y||T[4]!==J||T[5]!==et||T[6]!==ee||T[7]!==ei||T[8]!==ea||T[9]!==er||T[10]!==eh?(n={isBinary:q,isSubmodule:H,path:ei,status:eh,repository:er,newCommitOid:Y,newTreeEntry:J,oldCommitOid:et,oldTreeEntry:ee,pathDigest:ea,hasCopilotAccess:R.hasCopilotAccess},T[0]=R.hasCopilotAccess,T[1]=q,T[2]=H,T[3]=Y,T[4]=J,T[5]=et,T[6]=ee,T[7]=ei,T[8]=ea,T[9]=er,T[10]=eh,T[11]=n):n=T[11];let eS=sR(n);T[12]!==ey?(a=async()=>{await ey(),e_(!0)},T[12]=ey,T[13]=a):a=T[13];let eI=a,{baseOid:ek,headOid:eL}=(0,k.E4)(),eT=(0,eq.u)("cotd_ui");T[14]===Symbol.for("react.memo_cache_sentinel")?(d=(0,e4.G7)("pr_simple_diffs"),T[14]=d):d=T[14];let eD=d,{effectiveRange:eE}=(0,k.L3)(),{mutate:eR}=ad();T[15]!==ed?(u=()=>{ed(!0)},T[15]=ed,T[16]=u):u=T[16];let eA=u;T[17]!==eA?(m={F0:{startNewComment:eA,diffLineKey:sq}},T[17]=eA,T[18]=m):m=T[18];let eO=m;T[19]!==eT||T[20]!==eR||T[21]!==eE||T[22]!==eL||T[23]!==ei||T[24]!==ed||T[25]!==ek?(h=e=>{let{onCompleted:t,onError:n,submitBatch:i,text:a}=e;eT?eR(new ReviewCommentFactory({filePath:ei,effectiveDiffRange:eE,submitBatch:i,text:a}).fileRequestData(),{onError:n,onSuccess:e=>{t?.(e.thread.id,e.comment.databaseId),ed(!1)}}):eR({text:a,path:ei,submitBatch:i,subjectType:o.Wr.File,comparisonEndOid:eL,comparisonStartOid:ek},{onError:n,onSuccess:e=>{t?.(e.thread.id,e.comment.databaseId),ed(!1)}})},T[19]=eT,T[20]=eR,T[21]=eE,T[22]=eL,T[23]=ei,T[24]=ed,T[25]=ek,T[26]=h):h=T[26];let eP=h;T[27]!==D||T[28]!==ed?(f=()=>{ed(!1),D?.current?.focus()},T[27]=D,T[28]=ed,T[29]=f):f=T[29];let eF=f,eM=R?.avatarURL??"",e$=R?.splitPreference,eB=R?.login??"",eV=R?.lineSpacing,eU=R?.shouldDisplayComments,eG=R?.shouldDisplayEditOptions,eK=R?.tabSize??4,eW=R?.canComment,ez=R?.canApplySuggestion;T[30]!==eM||T[31]!==e$||T[32]!==eB||T[33]!==eV||T[34]!==eU||T[35]!==eG||T[36]!==eK||T[37]!==eW||T[38]!==ez?(p={avatarUrl:eM,diffViewPreference:e$,login:eB,lineSpacingPreference:eV,shouldDisplayComments:eU,shouldDisplayEditOptions:eG,tabSizePreference:eK,viewerCanComment:eW,viewerCanApplySuggestion:ez},T[30]=eM,T[31]=e$,T[32]=eB,T[33]=eV,T[34]=eU,T[35]=eG,T[36]=eK,T[37]=eW,T[38]=ez,T[39]=p):p=T[39];let eQ=p,eZ=(0,l.useId)(),eJ=`heading-${eZ}`;e:{if("split"===new URLSearchParams(g.cg?.location.search).get("diff")){y=!0;break e}y="split"===R.splitPreference}let eY=y,e0=J?.lineCount??ee?.lineCount??0,e1=`diff-${ea}`,e2=`diff-${ea}`;T[40]===Symbol.for("react.memo_cache_sentinel")?(v=(0,x.$)(sf.A.diffTargetable,sf.A.diff),T[40]=v):v=T[40];let e3=`${ea}_${A.length}`;T[41]===Symbol.for("react.memo_cache_sentinel")?(b=eD?{contentVisibility:"auto"}:void 0,T[41]=b):b=T[41];let e5=`${void 0===B?0:B}px`;T[42]!==e5?(j={"--header-sticky-offset":e5},T[42]=e5,T[43]=j):j=T[43];let e6=`#diff-${ea}`,e7=el?.richDiff?.canToggleRichDiff,e8=J?.mode,e9=J?.path,te=ee?.mode,tt=ee?.path;T[44]!==E||T[45]!==en?(w=e=>en(e,!E),T[44]=E,T[45]=en,T[46]=w):w=T[46];let tn=el?.onToggleRichDiff,ti=el?.showRichDiff;return T[47]!==em||T[48]!==E||T[49]!==P||T[50]!==eu||T[51]!==ec||T[52]!==eJ||T[53]!==ex||T[54]!==q||T[55]!==eC||T[56]!==W||T[57]!==z||T[58]!==Q||T[59]!==Z||T[60]!==ei||T[61]!==eo||T[62]!==eh||T[63]!==e6||T[64]!==e7||T[65]!==e8||T[66]!==e9||T[67]!==te||T[68]!==tt||T[69]!==w||T[70]!==tn||T[71]!==ti?(_=(0,i.jsx)(r.B,{headingId:eJ,hiddenFeatures:ex,areLinesExpanded:ec,canExpandOrCollapseLines:em,fileLinkHref:e6,isCollapsed:E,isBinary:q,size:P,canToggleRichDiff:e7,linesAdded:z,linesChanged:Q,linesDeleted:Z,newMode:e8,newPath:e9,oldMode:te,oldPath:tt,patchStatus:eh,path:ei,onToggleExpandAllLines:eu,onToggleFileCollapsed:w,onToggleDiffDisplay:tn,additionalLeftSideContent:W,rightSideContent:eo,showRichDiff:ti,isInSingleFileMode:eC}),T[47]=em,T[48]=E,T[49]=P,T[50]=eu,T[51]=ec,T[52]=eJ,T[53]=ex,T[54]=q,T[55]=eC,T[56]=W,T[57]=z,T[58]=Q,T[59]=Z,T[60]=ei,T[61]=eo,T[62]=eh,T[63]=e6,T[64]=e7,T[65]=e8,T[66]=e9,T[67]=te,T[68]=tt,T[69]=w,T[70]=tn,T[71]=ti,T[72]=_):_=T[72],T[73]!==j||T[74]!==_?(C=(0,i.jsx)("div",{className:sf.A.diffHeaderWrapper,style:j,children:_}),T[73]=j,T[74]=_,T[75]=C):C=T[75],T[76]!==E||T[77]!==eS||T[78]!==A||T[79]!==$||T[80]!==eP||T[81]!==ec||T[82]!==F||T[83]!==U||T[84]!==q||T[85]!==eY||T[86]!==K||T[87]!==Q||T[88]!==ew||T[89]!==Y||T[90]!==J||T[91]!==X||T[92]!==et||T[93]!==ee||T[94]!==eF||T[95]!==eI||T[96]!==ei||T[97]!==ea||T[98]!==es||T[99]!==el||T[100]!==ej||T[101]!==eb||T[102]!==eh||T[103]!==ef||T[104]!==ep||T[105]!==eQ?(N=E?null:(0,i.jsxs)("div",{className:"border position-relative rounded-bottom-2",children:[(0,i.jsxs)(i.Fragment,{children:[$.length>0&&(0,i.jsx)(sV,{conversationListThreads:$,filePath:ei,subjectId:es||""}),U&&(0,i.jsx)("div",{className:(0,x.$)("border rounded-2 color-border-default m-1 rounded-2 bgColor-default",sf.A.diffAddFileThread),children:(0,i.jsx)(eH,{batchingEnabled:!0,filePath:ei,fileLevelComment:!0,isLeftSide:void 0,subjectId:es||"",viewerData:eQ,onAddComment:eP,onClose:eF})})]}),eb&&(0,i.jsx)(s_,{submodule:ef}),el?.showRichDiff&&(0,i.jsx)(eX,{queryConfig:el.queryConfig,initialData:el.richDiff}),ej&&(0,i.jsx)(su,{hasExpandedAllRanges:ec,copilotChatReference:eS,diffEntryData:{diffLines:A,isBinary:q,isTooBig:K,linesChanged:Q,newTreeEntry:J,newCommitOid:Y,objectId:X,oldTreeEntry:ee,oldCommitOid:et,path:ei,pathDigest:ea,status:eh,truncatedReason:ep},baseHelpUrl:F,subjectId:es||"",viewerData:eQ,isSplitView:eY,diffLinesManuallyUnhidden:ew,onHandleLoadDiff:eI})]}),T[76]=E,T[77]=eS,T[78]=A,T[79]=$,T[80]=eP,T[81]=ec,T[82]=F,T[83]=U,T[84]=q,T[85]=eY,T[86]=K,T[87]=Q,T[88]=ew,T[89]=Y,T[90]=J,T[91]=X,T[92]=et,T[93]=ee,T[94]=eF,T[95]=eI,T[96]=ei,T[97]=ea,T[98]=es,T[99]=el,T[100]=ej,T[101]=eb,T[102]=eh,T[103]=ef,T[104]=ep,T[105]=eQ,T[106]=N):N=T[106],T[107]!==eJ||T[108]!==ev||T[109]!==t||T[110]!==e2||T[111]!==e3||T[112]!==C||T[113]!==N?(S=(0,i.jsxs)("div",{role:"region",ref:t,"aria-labelledby":eJ,id:e2,className:v,"data-targeted":ev,style:b,children:[C,N]},e3),T[107]=eJ,T[108]=ev,T[109]=t,T[110]=e2,T[111]=e3,T[112]=C,T[113]=N,T[114]=S):S=T[114],T[115]!==eN||T[116]!==eC?(I=eC&&(0,i.jsxs)("div",{className:sf.A.diffFooter,children:[(0,i.jsx)(c.InfoIcon,{size:16,"aria-hidden":"true"}),(0,i.jsx)("span",{className:"text-center",children:sG(eN)})]}),T[115]=eN,T[116]=eC,T[117]=I):I=T[117],T[118]!==eg||T[119]!==A||T[120]!==e0||T[121]!==ex||T[122]!==eY||T[123]!==J||T[124]!==ee||T[125]!==ei||T[126]!==eO||T[127]!==e1||T[128]!==S||T[129]!==I?(L=(0,i.jsxs)(M,{addInjectedContextLines:eg,diffAnchor:e1,diffLines:A,fileLineCount:e0,path:ei,startNewConversationForLineOrFileMap:eO,hiddenFeatures:ex,isSplitView:eY,oldTreeEntry:ee,newTreeEntry:J,children:[S,I]}),T[118]=eg,T[119]=A,T[120]=e0,T[121]=ex,T[122]=eY,T[123]=J,T[124]=ee,T[125]=ei,T[126]=eO,T[127]=e1,T[128]=S,T[129]=I,T[130]=L):L=T[130],L}:function({addFileCommentButtonRef:e,collapsed:t,currentUser:n,diffLines:a,diffManuallyExpanded:s,diffSize:d,helpUrl:u,fileComments:m,headerStickyOffset:h=0,hiddenFeatures:f=sU,isAddingFileComment:p,isBinary:y,isSelected:v=!1,isSubmodule:b,isTooBig:j,leftSideContent:w,linesAdded:_,linesChanged:C,linesDeleted:N,newTreeEntry:S,newCommitOid:I,objectId:L,oldTreeEntry:T,oldCommitOid:D,onToggleCollapse:E,path:R,pathDigest:A,pullRequestGlobalRelayId:O,repository:P,richDiffState:F,rightSideContent:$,setIsAddingFileComment:B,hasExpandedAllRanges:V,expandAllContextLines:U,canExpandOrCollapseLines:q,status:G,submodule:H,truncatedReason:K,addInjectedContextLines:W,loadDiff:z},Q){let Z=b&&!!H,J=!Z&&!F?.showRichDiff,[Y,X]=(0,l.useState)(s),ee=(0,k.j5)(),{comparisonView:et}=(0,k.L3)(),en=sR({isBinary:y,isSubmodule:b,path:R,status:G,repository:P,newCommitOid:I,newTreeEntry:S,oldCommitOid:D,oldTreeEntry:T,pathDigest:A,hasCopilotAccess:n.hasCopilotAccess}),ei=async()=>{await z(),X(!0)},{baseOid:ea,headOid:es}=(0,k.E4)(),er=(0,eq.u)("cotd_ui"),el=(0,e4.G7)("pr_simple_diffs"),{effectiveRange:eo}=(0,k.L3)(),{mutate:ed}=ad(),ec=(0,l.useCallback)(()=>{B(!0)},[B]),eu=(0,l.useMemo)(()=>({F0:{startNewComment:ec,diffLineKey:sq}}),[ec]),em=(0,l.useMemo)(()=>({avatarUrl:n?.avatarURL??"",diffViewPreference:n?.splitPreference,login:n?.login??"",lineSpacingPreference:n?.lineSpacing,shouldDisplayComments:n?.shouldDisplayComments,shouldDisplayEditOptions:n?.shouldDisplayEditOptions,tabSizePreference:n?.tabSize??4,viewerCanComment:n?.canComment,viewerCanApplySuggestion:n?.canApplySuggestion}),[n.avatarURL,n.canApplySuggestion,n.canComment,n.lineSpacing,n.login,n.shouldDisplayComments,n.shouldDisplayEditOptions,n.splitPreference,n.tabSize]),eh=(0,l.useId)(),ef=`heading-${eh}`,ep=(0,l.useMemo)(()=>"split"===new URLSearchParams(g.cg?.location.search).get("diff")||"split"===n.splitPreference,[n.splitPreference]),eg=S?.lineCount??T?.lineCount??0;return(0,i.jsxs)(M,{addInjectedContextLines:W,diffAnchor:`diff-${A}`,diffLines:a,fileLineCount:eg,path:R,startNewConversationForLineOrFileMap:eu,hiddenFeatures:f,isSplitView:ep,oldTreeEntry:T,newTreeEntry:S,children:[(0,i.jsxs)("div",{role:"region",ref:Q,"aria-labelledby":ef,id:`diff-${A}`,className:(0,x.$)(sf.A.diffTargetable,sf.A.diff),"data-targeted":v,style:el?{contentVisibility:"auto"}:void 0,children:[(0,i.jsx)("div",{className:sf.A.diffHeaderWrapper,style:{"--header-sticky-offset":`${h}px`},children:(0,i.jsx)(r.B,{headingId:ef,hiddenFeatures:f,areLinesExpanded:V,canExpandOrCollapseLines:q,fileLinkHref:`#diff-${A}`,isCollapsed:t,isBinary:y,size:d,canToggleRichDiff:F?.richDiff?.canToggleRichDiff,linesAdded:_,linesChanged:C,linesDeleted:N,newMode:S?.mode,newPath:S?.path,oldMode:T?.mode,oldPath:T?.path,patchStatus:G,path:R,onToggleExpandAllLines:U,onToggleFileCollapsed:e=>E(e,!t),onToggleDiffDisplay:F?.onToggleRichDiff,additionalLeftSideContent:w,rightSideContent:$,showRichDiff:F?.showRichDiff,isInSingleFileMode:ee})}),t?null:(0,i.jsxs)("div",{className:"border position-relative rounded-bottom-2",children:[(0,i.jsxs)(i.Fragment,{children:[m.length>0&&(0,i.jsx)(sV,{conversationListThreads:m,filePath:R,subjectId:O||""}),p&&(0,i.jsx)("div",{className:(0,x.$)("border rounded-2 color-border-default m-1 rounded-2 bgColor-default",sf.A.diffAddFileThread),children:(0,i.jsx)(eH,{batchingEnabled:!0,filePath:R,fileLevelComment:!0,isLeftSide:void 0,subjectId:O||"",viewerData:em,onAddComment:({onCompleted:e,onError:t,submitBatch:n,text:i})=>{er?ed(new ReviewCommentFactory({filePath:R,effectiveDiffRange:eo,submitBatch:n,text:i}).fileRequestData(),{onError:t,onSuccess:t=>{e?.(t.thread.id,t.comment.databaseId),B(!1)}}):ed({text:i,path:R,submitBatch:n,subjectType:o.Wr.File,comparisonEndOid:es,comparisonStartOid:ea},{onError:t,onSuccess:t=>{e?.(t.thread.id,t.comment.databaseId),B(!1)}})},onClose:()=>{B(!1),e?.current?.focus()}})})]}),Z&&(0,i.jsx)(s_,{submodule:H}),F?.showRichDiff&&(0,i.jsx)(eX,{queryConfig:F.queryConfig,initialData:F.richDiff}),J&&(0,i.jsx)(su,{hasExpandedAllRanges:V,copilotChatReference:en,diffEntryData:{diffLines:a,isBinary:y,isTooBig:j,linesChanged:C,newTreeEntry:S,newCommitOid:I,objectId:L,oldTreeEntry:T,oldCommitOid:D,path:R,pathDigest:A,status:G,truncatedReason:K},baseHelpUrl:u,subjectId:O||"",viewerData:em,isSplitView:ep,diffLinesManuallyUnhidden:Y,onHandleLoadDiff:ei})]})]},`${A}_${a.length}`),ee&&(0,i.jsxs)("div",{className:sf.A.diffFooter,children:[(0,i.jsx)(c.InfoIcon,{size:16,"aria-hidden":"true"}),(0,i.jsx)("span",{className:"text-center",children:sG(et)})]})]})}),sK=(0,a.GV)()?function(e){let t,n,a,o,d,u=(0,s.c)(24),{path:m,pathDigest:h,linesAdded:f,linesChanged:p,linesDeleted:g,oldTreeEntry:y,newTreeEntry:v,status:b}=e,j=(0,l.useId)(),w=`heading-${j}`,[_,C]=(0,l.useState)(!1),N=`diff-${h}`;u[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,x.$)(sf.A.diffTargetable,sf.A.diff),u[0]=t):t=u[0];let S=`${h}_error`,I=v?.mode,k=v?.path,L=y?.mode,T=y?.path;return u[1]!==_?(n=()=>C(!_),u[1]=_,u[2]=n):n=u[2],u[3]!==w||u[4]!==_||u[5]!==f||u[6]!==p||u[7]!==g||u[8]!==m||u[9]!==b||u[10]!==I||u[11]!==k||u[12]!==L||u[13]!==T||u[14]!==n?(a=(0,i.jsx)("div",{className:sf.A.diffHeaderWrapper,children:(0,i.jsx)(r.B,{headingId:w,isCollapsed:_,isBinary:!1,linesAdded:f,linesChanged:p,linesDeleted:g,newMode:I,newPath:k,oldMode:L,oldPath:T,patchStatus:b,path:m,onToggleFileCollapsed:n})}),u[3]=w,u[4]=_,u[5]=f,u[6]=p,u[7]=g,u[8]=m,u[9]=b,u[10]=I,u[11]=k,u[12]=L,u[13]=T,u[14]=n,u[15]=a):a=u[15],u[16]!==_?(o=!_&&(0,i.jsx)("div",{className:"border position-relative rounded-bottom-2",children:(0,i.jsxs)(nc.E,{children:[(0,i.jsx)(nc.E.Visual,{children:(0,i.jsx)(c.AlertIcon,{size:"medium",className:"fgColor-muted"})}),(0,i.jsx)(nc.E.Heading,{as:"h4",children:"There was an issue loading this file"}),(0,i.jsxs)(nc.E.Description,{children:[" ","Try refreshing the page or if the problem persists"," ",(0,i.jsx)("a",{className:"fgColor-muted",href:"https://support.github.com/",children:(0,i.jsx)("u",{children:"contact support"})}),"."]})]})}),u[16]=_,u[17]=o):o=u[17],u[18]!==w||u[19]!==N||u[20]!==o||u[21]!==S||u[22]!==a?(d=(0,i.jsxs)("div",{role:"region","aria-labelledby":w,id:N,className:t,children:[a,o]},S),u[18]=w,u[19]=N,u[20]=o,u[21]=S,u[22]=a,u[23]=d):d=u[23],d}:function({path:e,pathDigest:t,linesAdded:n,linesChanged:a,linesDeleted:s,oldTreeEntry:o,newTreeEntry:d,status:u}){let m=(0,l.useId)(),h=`heading-${m}`,[f,p]=(0,l.useState)(!1);return(0,i.jsxs)("div",{role:"region","aria-labelledby":h,id:`diff-${t}`,className:(0,x.$)(sf.A.diffTargetable,sf.A.diff),children:[(0,i.jsx)("div",{className:sf.A.diffHeaderWrapper,children:(0,i.jsx)(r.B,{headingId:h,isCollapsed:f,isBinary:!1,linesAdded:n,linesChanged:a,linesDeleted:s,newMode:d?.mode,newPath:d?.path,oldMode:o?.mode,oldPath:o?.path,patchStatus:u,path:e,onToggleFileCollapsed:()=>p(!f)})}),!f&&(0,i.jsx)("div",{className:"border position-relative rounded-bottom-2",children:(0,i.jsxs)(nc.E,{children:[(0,i.jsx)(nc.E.Visual,{children:(0,i.jsx)(c.AlertIcon,{size:"medium",className:"fgColor-muted"})}),(0,i.jsx)(nc.E.Heading,{as:"h4",children:"There was an issue loading this file"}),(0,i.jsxs)(nc.E.Description,{children:[" ","Try refreshing the page or if the problem persists"," ",(0,i.jsx)("a",{className:"fgColor-muted",href:"https://support.github.com/",children:(0,i.jsx)("u",{children:"contact support"})}),"."]})]})})]},`${t}_error`)},sW=(0,l.memo)(sH);try{sH.displayName||(sH.displayName="DiffUnmemoized")}catch{}try{sK.displayName||(sK.displayName="DiffErrorFallback")}catch{}try{sW.displayName||(sW.displayName="Diff")}catch{}},82603:(e,t,n)=>{n.d(t,{dG:()=>u,hG:()=>f,o5:()=>m});var i=n(68273),a=n(21728),s=n(96540),r=n(97286),l=n(65510),o=n(96379),d=n(20622);function c(e){return{queryKey:[d.uT.codeowners,e],queryFn:async()=>{let t=`${e}/page_data/${d.uT.codeowners}`,n=await (0,o.QJ)(t);if(!n.ok)throw Error(`HTTP ${n.status}`);return await n.json()},staleTime:1/0}}let u=(0,i.Z6)()?function(e){let t,n,i=(0,a.c)(6),{basePath:s,initialData:l}=e;i[0]!==s?(t=c(s),i[0]=s,i[1]=t):t=i[1];let{queryFn:o,queryKey:d}=t;return i[2]!==l||i[3]!==o||i[4]!==d?(n={queryKey:d,queryFn:o,initialData:l,staleTime:1/0},i[2]=l,i[3]=o,i[4]=d,i[5]=n):n=i[5],(0,r.I)(n)}:function({basePath:e,initialData:t}){let{queryFn:n,queryKey:i}=c(e);return(0,r.I)({queryKey:i,queryFn:n,initialData:t,staleTime:1/0})},m=(0,i.Z6)()?function(e){let t,n,i,s=(0,a.c)(8),{basePath:r,diffPath:o}=e;s[0]!==r?(t=c(r),s[0]=r,s[1]=t):t=s[1];let{queryFn:d,queryKey:u}=t;s[2]!==o?(n=e=>f({codeownersData:e,diffPath:o}),s[2]=o,s[3]=n):n=s[3];let m=n;return s[4]!==d||s[5]!==u||s[6]!==m?(i={queryKey:u,queryFn:d,staleTime:1/0,select:m},s[4]=d,s[5]=u,s[6]=m,s[7]=i):i=s[7],(0,l.U)(i)}:function({basePath:e,diffPath:t}){let{queryFn:n,queryKey:i}=c(e);return(0,l.U)({queryKey:i,queryFn:n,staleTime:1/0,select:(0,s.useCallback)(e=>f({codeownersData:e,diffPath:t}),[t])})},h={isOwnedByViewer:!1,owners:[],ruleLineNumber:void 0,ruleUrl:void 0};function f({diffPath:e,codeownersData:t}){if(!t)return h;let n=t.ownershipByPath[e];return n?{isOwnedByViewer:n.isOwnedByViewer,owners:n.owners||[],ruleLineNumber:n.ruleLineNumber,ruleUrl:n.ruleUrl}:h}},85933:(e,t,n)=>{function i(){return!!document.querySelector('react-app[data-lazy="true"]')}function a(){return!!document.querySelector('react-app[data-alternate="true"]')}function s(){return!!document.querySelector("header.AppHeader")}function r(){return performance.getEntriesByType("resource").some(e=>"fetch"===e.initiatorType&&e.name.includes("_graphql?"))}function l(){return performance.getEntriesByType("resource").some(e=>"script"===e.initiatorType)}n.d(t,{Dk:()=>s,NT:()=>c,X:()=>d,_:()=>i,aE:()=>r,u$:()=>a,xF:()=>l}),n(69599);let o=null;function d(){return o}function c(e){o=e}},86909:(e,t,n)=>{n.d(t,{YH:()=>N,Gt:()=>C,Vv:()=>T});var i,a=n(74848),s=n(68273),r=n(21728),l=n(77430),o=n(73017),d=n(38621),c=n(26108),u=n(98552),m=n(69497),h=n(21373),f=n(34164),p=n(48505);let g="Annotation-module__annotation--KlX5M",y="Annotation-module__annotationSource--fZyli",x="Annotation-module__annotationMessage--gFM9M",v="Annotation-module__inlineReviewThreadHeading--Qj9j8";var b=n(79036),j=n(96540),w=n(82075),_=n(71315);let C={[p.UZ.Failure]:(0,a.jsx)(d.StopIcon,{className:"fgColor-danger mr-2"}),[p.UZ.Warning]:(0,a.jsx)(d.AlertIcon,{className:"fgColor-attention mr-2"}),[p.UZ.Notice]:(0,a.jsx)(d.InfoIcon,{className:"fgColor-muted mr-2"})},N=(0,s.GV)()?function(e){let t,n,i,s,p,v,j,w=(0,r.c)(31),{annotation:_,inSidePanel:C}=e,N=C?"h3":"h2",{isCollapsed:S,handleToggleCollapsed:L}=T(_),D=b.GF[_.annotationLevel];return w[0]!==D.borderColor?(t=(0,f.$)("p-1 bgColor-default",D.borderColor,g),w[0]=D.borderColor,w[1]=t):t=w[1],w[2]!==L||w[3]!==C||w[4]!==S?(n=!C&&(0,a.jsx)(c.K,{"aria-label":S?"Expand annotation":"Collapse annotation",icon:S?d.ChevronRightIcon:d.ChevronDownIcon,size:"small",variant:"invisible",onClick:L}),w[2]=L,w[3]=C,w[4]=S,w[5]=n):n=w[5],w[6]!==_||w[7]!==C?(i=!C&&(0,a.jsx)(I,{annotation:_}),w[6]=_,w[7]=C,w[8]=i):i=w[8],w[9]!==_||w[10]!==C?(s=C&&(0,a.jsx)(k,{annotation:_}),w[9]=_,w[10]=C,w[11]=s):s=w[11],w[12]!==n||w[13]!==i||w[14]!==s?(p=(0,a.jsxs)("div",{className:"d-flex flex-items-center",children:[n,i,s]}),w[12]=n,w[13]=i,w[14]=s,w[15]=p):p=w[15],w[16]!==N||w[17]!==_.annotationLevel||w[18]!==_.appAvatarAltText||w[19]!==_.appAvatarUrl||w[20]!==_.checkRun||w[21]!==_.checkSuiteName||w[22]!==_.message||w[23]!==_.title||w[24]!==C||w[25]!==S?(v=(!S||C)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"ml-4 mt-2",children:_.title&&(0,a.jsx)(u.A,{weight:"semibold",size:"medium",className:b.GF[_.annotationLevel].primaryColorClass,children:_.title})}),(0,a.jsxs)(N,{className:"sr-only",children:[b.GF[_.annotationLevel].ariaLabel,": ",_.title]}),(0,a.jsx)("div",{className:"mb-3 mt-1 ml-4",children:_.message&&(0,a.jsx)(o.$6,{html:_.message,className:x})}),(0,a.jsxs)("div",{className:"d-flex flex-items-center flex-justify-between ml-4 pr-2 pb-2",children:[(0,a.jsxs)("div",{className:y,children:[(0,a.jsx)(l.r,{src:_.appAvatarUrl,alt:_.appAvatarAltText}),(0,a.jsxs)(m.A,{className:"ml-2",maxWidth:"300px",inline:!0,title:`${_.checkSuiteName} / ${_.checkRun.name}`,children:[(0,a.jsx)(u.A,{weight:"semibold",size:"small",children:_.checkSuiteName})," ","/ ",(0,a.jsx)(u.A,{size:"small",children:_.checkRun.name})]})]}),_.checkRun.detailsUrl&&(0,a.jsx)(h.Q,{as:"a",href:_.checkRun.detailsUrl,size:"small",children:"View details"})]})]}),w[16]=N,w[17]=_.annotationLevel,w[18]=_.appAvatarAltText,w[19]=_.appAvatarUrl,w[20]=_.checkRun,w[21]=_.checkSuiteName,w[22]=_.message,w[23]=_.title,w[24]=C,w[25]=S,w[26]=v):v=w[26],w[27]!==t||w[28]!==p||w[29]!==v?(j=(0,a.jsxs)("div",{className:t,children:[p,v]}),w[27]=t,w[28]=p,w[29]=v,w[30]=j):j=w[30],j}:function({annotation:e,inSidePanel:t}){let n=(0,j.useMemo)(()=>t?"h3":"h2",[t]),{isCollapsed:i,handleToggleCollapsed:s}=T(e);return(0,a.jsxs)("div",{className:(0,f.$)("p-1 bgColor-default",b.GF[e.annotationLevel].borderColor,g),children:[(0,a.jsxs)("div",{className:"d-flex flex-items-center",children:[!t&&(0,a.jsx)(c.K,{"aria-label":i?"Expand annotation":"Collapse annotation",icon:i?d.ChevronRightIcon:d.ChevronDownIcon,size:"small",variant:"invisible",onClick:s}),!t&&(0,a.jsx)(I,{annotation:e}),t&&(0,a.jsx)(k,{annotation:e})]}),(!i||t)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"ml-4 mt-2",children:e.title&&(0,a.jsx)(u.A,{weight:"semibold",size:"medium",className:b.GF[e.annotationLevel].primaryColorClass,children:e.title})}),(0,a.jsxs)(n,{className:"sr-only",children:[b.GF[e.annotationLevel].ariaLabel,": ",e.title]}),(0,a.jsx)("div",{className:"mb-3 mt-1 ml-4",children:e.message&&(0,a.jsx)(o.$6,{html:e.message,className:x})}),(0,a.jsxs)("div",{className:"d-flex flex-items-center flex-justify-between ml-4 pr-2 pb-2",children:[(0,a.jsxs)("div",{className:y,children:[(0,a.jsx)(l.r,{src:e.appAvatarUrl,alt:e.appAvatarAltText}),(0,a.jsxs)(m.A,{className:"ml-2",maxWidth:"300px",inline:!0,title:`${e.checkSuiteName} / ${e.checkRun.name}`,children:[(0,a.jsx)(u.A,{weight:"semibold",size:"small",children:e.checkSuiteName})," ","/ ",(0,a.jsx)(u.A,{size:"small",children:e.checkRun.name})]})]}),e.checkRun.detailsUrl&&(0,a.jsx)(h.Q,{as:"a",href:e.checkRun.detailsUrl,size:"small",children:"View details"})]})]})]})},S=(0,s.GV)()?function(e){let t,n=(0,r.c)(2),{children:i}=e;return n[0]!==i?(t=(0,a.jsx)("span",{className:"text-semibold fgColor-default",children:i}),n[0]=i,n[1]=t):t=n[1],t}:function({children:e}){return(0,a.jsx)("span",{className:"text-semibold fgColor-default",children:e})},I=(0,s.GV)()?function(e){let t,n,i=(0,r.c)(6),{annotation:s}=e,l=C[s.annotationLevel],o=b.GF[s.annotationLevel];return i[0]!==s.endLine?(t=(0,a.jsxs)(S,{children:["R",s.endLine]}),i[0]=s.endLine,i[1]=t):t=i[1],i[2]!==l||i[3]!==o.ariaLabel||i[4]!==t?(n=(0,a.jsxs)("h2",{className:v,children:[l,o.ariaLabel," on line"," ",t]}),i[2]=l,i[3]=o.ariaLabel,i[4]=t,i[5]=n):n=i[5],n}:function({annotation:e}){return(0,a.jsxs)("h2",{className:v,children:[C[e.annotationLevel],b.GF[e.annotationLevel].ariaLabel," on line"," ",(0,a.jsxs)(S,{children:["R",e.endLine]})]})},k=(0,s.GV)()?function(e){let t,n,i=(0,r.c)(3),{annotation:s}=e;i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,f.$)(v,"ml-4","pt-1","pl-0"),i[0]=t):t=i[0];let l=b.GF[s.annotationLevel];return i[1]!==l.ariaLabel?(n=(0,a.jsx)("div",{className:t,children:(0,a.jsx)(S,{children:l.ariaLabel})}),i[1]=l.ariaLabel,i[2]=n):n=i[2],n}:function({annotation:e}){return(0,a.jsx)("div",{className:(0,f.$)(v,"ml-4","pt-1","pl-0"),children:(0,a.jsx)(S,{children:b.GF[e.annotationLevel].ariaLabel})})};function L(e){return`AnnotationIsCollapsed_${e.path}_${e.endLine}_${e.annotationLevel}_${e.title}`}let T=(0,s.GV)()?function(e){let t,n,i,a,s,l=(0,r.c)(10);l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,w.A)("localStorage"),l[0]=t):t=l[0];let o=t,[d,c]=(0,j.useState)(!1);l[1]!==e?(n=()=>{let t=localStorage.getItem(L(e));null!==t&&c(JSON.parse(t))},i=[e],l[1]=e,l[2]=n,l[3]=i):(n=l[2],i=l[3]),(0,j.useEffect)(n,i),l[4]!==e||l[5]!==d?(a=()=>{_.cg?.requestAnimationFrame(()=>{o.setItem(L(e),JSON.stringify(!d))}),c(D)},l[4]=e,l[5]=d,l[6]=a):a=l[6];let u=a;return l[7]!==u||l[8]!==d?(s={isCollapsed:d,handleToggleCollapsed:u},l[7]=u,l[8]=d,l[9]=s):s=l[9],s}:function(e){let t=(0,w.A)("localStorage"),[n,i]=(0,j.useState)(!1);return(0,j.useEffect)(()=>{let t=localStorage.getItem(L(e));null!==t&&i(JSON.parse(t))},[e]),{isCollapsed:n,handleToggleCollapsed:()=>{_.cg?.requestAnimationFrame(()=>{t.setItem(L(e),JSON.stringify(!n))}),i(e=>!e)}}};function D(e){return!e}try{N.displayName||(N.displayName="Annotation")}catch{}try{(i=AnnotationHeadingTag).displayName||(i.displayName="AnnotationHeadingTag")}catch{}try{S.displayName||(S.displayName="Emphasis")}catch{}try{I.displayName||(I.displayName="AnnotationBanner")}catch{}try{k.displayName||(k.displayName="SidePanelAnnotationBanner")}catch{}},87255:(e,t,n)=>{n.d(t,{Y:()=>N});var i,a=n(74848),s=n(21728),r=n(70170),l=n(53419),o=n(29731),d=n(83494),c=n(88431),u=n(96379),m=n(56149),h=n(86877),f=n(4175),p=n(21373),g=n(15220),y=n(96540),x=n(40961),v=n(2635),b=n(33592),j=n(38621),w=n(5524);let _={Role:{tooltip:"Role, domain, style, and focus areas",body:`Your role:
- {role_type} expert in {domain}
- Focus on {key_skill_area}
`},Communication:{tooltip:"Language, tone and format",body:`Communication:
- Write in {tone/language}
- Reference {source_type} documentation
- Structure responses as {format}
`},"Code preferences":{tooltip:"Code style, patterns, and conventions",body:`Code guidelines:
- Use {language} conventions
- Follow {pattern/code_guidelines}
- Optimize for {goal}
`}},C=(0,y.forwardRef)(function(e,t){let n,i,r,l,o,d,c,u,m=(0,s.c)(19),{onSelect:h}=e,[f,p]=(0,y.useState)(!1);m[0]!==f?(n=()=>p(!f),m[0]=f,m[1]=n):n=m[1];let g=n;m[2]===Symbol.for("react.memo_cache_sentinel")?(i={marginBottom:"1px"},m[2]=i):i=m[2],m[3]!==h||m[4]!==f?(r=f&&Object.entries(_)?.map(e=>{let[t,n]=e;return(0,a.jsxs)(w.l.Item,{"aria-label":`${n.tooltip}`,className:"mx-0 border fgColor-muted d-inline-block width-auto",onSelect:()=>h(t,n.body),children:[(0,a.jsx)(j.PlusIcon,{}),t]},t)}),m[3]=h,m[4]=f,m[5]=r):r=m[5],m[6]!==r?(l=(0,a.jsx)(w.l,{className:"d-inline-flex flex-wrap gap-2 rounded-2",children:r}),m[6]=r,m[7]=l):l=m[7];let x=f?"Hide templates":"Show templates";return m[8]===Symbol.for("react.memo_cache_sentinel")?(o={border:"1px solid transparent"},m[8]=o):o=m[8],m[9]!==f?(d=f?(0,a.jsx)(j.XIcon,{}):(0,a.jsx)(j.LightBulbIcon,{}),m[9]=f,m[10]=d):d=m[10],m[11]!==x||m[12]!==d||m[13]!==g?(c=(0,a.jsx)(w.l,{className:"d-flex flex-column flex-justify-end",children:(0,a.jsx)(w.l.Item,{"aria-label":x,"data-testid":"toggle-templates",className:"fgColor-muted d-inline-block width-auto flex-justify-end mx-0",style:o,onSelect:g,children:d})}),m[11]=x,m[12]=d,m[13]=g,m[14]=c):c=m[14],m[15]!==t||m[16]!==l||m[17]!==c?(u=(0,a.jsxs)("div",{ref:t,className:"d-inline-flex flex-justify-between position-absolute bgColor-default right-0 left-0 bottom-0 ml-2 mr-3",style:i,children:[l,c]}),m[15]=t,m[16]=l,m[17]=c,m[18]=u):u=m[18],u});try{C.displayName||(C.displayName="PersonalInstructionsTemplates")}catch{}try{(i=PersonalInstructionsTemplatesWithRef).displayName||(i.displayName="PersonalInstructionsTemplatesWithRef")}catch{}let N=({onDismiss:e,returnFocusRef:t})=>{let n=(0,v.Pk)(),i=(0,b.b)(),[j,w]=(0,y.useState)(n.personalInstructions??""),[_,N]=(0,y.useState)(void 0),[I,k]=(0,y.useState)(!1),L=(0,y.useRef)(null),T=(0,y.useRef)(null),[D,E]=(0,y.useState)(""),R=((e,t)=>{let n,i,a=(0,s.c)(4),[l,o]=(0,y.useState)(48);return a[0]!==e||500!==a[1]?(n=()=>{let t=(0,r.s)(()=>{e?.current&&o(e.current.clientHeight??48)},500),n=new ResizeObserver(t);return e?.current&&n.observe(e.current),()=>{t.cancel(),n?.disconnect?.()}},i=[e,500],a[0]=e,a[1]=500,a[2]=n,a[3]=i):(n=a[2],i=a[3]),(0,y.useEffect)(n,i),l})(T);(0,c.N)(()=>{L?.current&&(L.current.scrollTop=L.current.scrollHeight)},[j]);let A=(0,y.useCallback)(async()=>{if(!I){k(!0),D&&(0,l.BI)("copilot_personal_instruction_template_usage",{content:D});try{let t=await (0,u.lS)("/copilot/personal_instructions",{method:"POST",body:{prompt:j}});if(t.ok)(0,l.BI)("dotcom_chat.activate",{target:"PERSONAL_INSTRUCTIONS_SAVE",mode:"immersive"}),i.dispatch({type:"SET_PERSONAL_INSTRUCTIONS",personalInstructions:j}),(0,x.flushSync)(()=>e());else{let e=await t.json();N(String(e.errorMessage))}}catch{N("An error occurred while saving your personal instructions.")}finally{k(!1)}}},[I,j,i,e,D]),O=(e,t)=>{t&&(w(j?`${j}
${t}`:t),E(e),L?.current?.focus())},P=()=>{A()},F=(0,y.useCallback)(()=>{(0,l.BI)("dotcom_chat.dismiss",{target:"PERSONAL_INSTRUCTIONS_DISMISS",mode:"immersive"}),(0,x.flushSync)(()=>e())},[e]);return(0,a.jsx)(m.ZL,{children:(0,a.jsx)(g.l,{onClose:F,title:"Personal instructions",subtitle:"Set up Copilot to align with your workflows and preferences. These instructions will only impact your personal conversation.",width:"large",returnFocusRef:t,renderBody:()=>(0,a.jsx)(g.l.Body,{children:(0,a.jsx)("form",{onSubmit:A,children:(0,a.jsxs)(h.A,{children:[(0,a.jsx)(h.A.Label,{visuallyHidden:!0,children:"Instructions"}),(0,a.jsx)("div",{className:"width-full position-relative",children:(0,a.jsxs)(d.tL,{commands:{"github:submit-form":P},children:[(0,a.jsx)(f.Ay,{ref:L,className:"width-full",style:{paddingBottom:`${R}px`},"aria-label":"Prompt",rows:7,name:"prompt",placeholder:"Your instructions",value:j,validationStatus:_||j.length>4e3?"error":void 0,...(0,o.G)("prompt-input"),onChange:e=>{w(e.target.value),N(void 0)}}),(0,a.jsx)(C,{ref:T,onSelect:O})]})}),(0,a.jsx)(S,{text:j,promptCharLimit:4e3}),_&&(0,a.jsx)(h.A.Validation,{variant:"error",children:(0,a.jsx)("span",{...(0,o.G)("error-message"),children:_})})]})})}),renderFooter:()=>(0,a.jsxs)("div",{className:"PersonalInstructionsDialog-module__footerContainer--T9wxr",children:[(0,a.jsx)(p.Q,{variant:"default",onClick:F,children:"Cancel"}),(0,a.jsx)(p.Q,{loading:I,loadingAnnouncement:"Saving personal instructions",variant:"primary",onClick:A,children:"Save"})]})})})};function S(e){let t,n,i,r,l=(0,s.c)(10),{text:d,promptCharLimit:c}=e;l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.G)("current-character-count"),l[0]=t):t=l[0],l[1]!==d.length?(n=(0,a.jsx)("span",{className:"text-tabular-nums",...t,children:d.length}),l[1]=d.length,l[2]=n):n=l[2],l[3]!==c||l[4]!==n?(i=(0,a.jsxs)(a.Fragment,{children:[n," ","/ ",c," characters"]}),l[3]=c,l[4]=n,l[5]=i):i=l[5];let u=i;return l[6]!==u||l[7]!==c||l[8]!==d.length?(r=(0,a.jsx)(a.Fragment,{children:d.length>c?(0,a.jsx)(h.A.Validation,{variant:"error",children:u}):(0,a.jsx)(h.A.Caption,{children:u})}),l[6]=u,l[7]=c,l[8]=d.length,l[9]=r):r=l[9],r}try{N.displayName||(N.displayName="PersonalInstructionsDialog")}catch{}try{S.displayName||(S.displayName="CharacterCount")}catch{}},88008:(e,t,n)=>{n.d(t,{CE:()=>s,Ol:()=>r,hW:()=>l});var i=n(95800);function a(e,t){return`${e}-${t}-active-batch-suggestions`}function s(e,t,n){let s=a(e,t);(0,i.SO)(s,JSON.stringify(n))}function r(e,t){let n=a(e,t),s=(0,i.Gq)(n);if(!s)return[];try{let e=JSON.parse(s);return Array.isArray(e)?e:[]}catch{return[]}}function l(e,t){let n=a(e,t);(0,i.Ai)(n)}},89155:(e,t,n)=>{n.d(t,{F:()=>l});var i=n(68273),a=n(21728),s=n(39029),r=n(34261);let l=(0,i.Z6)()?function(e){let t,n=(0,a.c)(1),{refetch:i}=(0,r.W)();n[0]===Symbol.for("react.memo_cache_sentinel")?(t={git_updated:!0,title_updated:!0},n[0]=t):t=n[0],(0,s.og)(e,i,t)}:function(e){let{refetch:t}=(0,r.W)();(0,s.og)(e,t,{git_updated:!0,title_updated:!0})}},89781:(e,t,n)=>{n.d(t,{A:()=>N});var i=n(74848),a=n(21728),s=n(69093),r=n(17925),l=n(53419),o=n(96459),d=n(26607);let c=e=>{let t,n,s,r,l,o,c,u,m=(0,a.c)(16);m[0]!==e?({children:s,icon:t,isNew:r,...n}=e,m[0]=e,m[1]=t,m[2]=n,m[3]=s,m[4]=r):(t=m[1],n=m[2],s=m[3],r=m[4]);let h=void 0!==r&&r;return m[5]!==t?(l=(0,i.jsx)(t,{}),m[5]=t,m[6]=l):l=m[6],m[7]!==s?(o=(0,i.jsx)("span",{className:"CommandPill-module__text--ggGhT",children:s}),m[7]=s,m[8]=o):o=m[8],m[9]!==h?(c=h&&(0,i.jsx)(d.A,{size:"small",variant:"accent",children:"New"}),m[9]=h,m[10]=c):c=m[10],m[11]!==n||m[12]!==l||m[13]!==o||m[14]!==c?(u=(0,i.jsxs)("button",{className:"CommandPill-module__button--dwT_a",...n,children:[l,o,c]}),m[11]=n,m[12]=l,m[13]=o,m[14]=c,m[15]=u):u=m[15],u};try{c.displayName||(c.displayName="CommandPill")}catch{}let u=JSON.parse('{"Create issues":{"id":"create-issues-group","name":"Create issue","color":"var(--display-gray-fgColor)","icon":"issue-draft","entries":[{"id":"create-issue","message":"First, create a new draft issue. Then ask for additional information to fill out the issue.","titleHtml":"Create a new issue"},{"id":"create-issue-with-subissues","message":"First, create an issue with sub issues. Then ask for additional information to fill out these issues.","titleHtml":"Create an issue with sub-issues"}]},"Write code":{"id":"write-code-group","name":"Write code","color":"var(--display-gray-fgColor)","icon":"file","entries":[{"id":"create-profile-readme","message":"First, create an outstanding README for my GitHub profile using only Markdown. Then ask for key details (such as profession, top skills, favorite projects, or social links) to further refine and personalize it.","titleHtml":"Create a profile README"},{"id":"generate-html-calculator","message":"Generate a simple calculator using HTML, CSS, and JavaScript.","titleHtml":"Generate a simple calculator"},{"id":"make-pong","message":"Create a simple Pong game using HTML, CSS, and JavaScript. The player should control the left paddle with their mouse and arrow keys up/down, the right paddle is the computer. Make sure the game includes a bouncing ball, a scoreboard and collision detection for paddles and walls.","titleHtml":"Make a Pong game"},{"id":"mermaid-architecture","message":"Create a Markdown file with a Mermaid diagram showing an architecture overview.","titleHtml":"Design a Mermaid architecture overview"}]},"Git":{"id":"git-group","name":"Git","color":"var(--display-gray-fgColor)","icon":"git-branch","entries":[{"id":"basic-git-commands","message":"Explain what basic Git commands are and how to use them. Include commands like `git status`, `git init`, `git clone`, `git add`, `git commit`, `git push`, and `git pull`. Provide examples for each command.","titleHtml":"Basic Git commands"},{"id":"git-branching","message":"Explain how to create and manage branches in Git. Include commands like `git branch`, `git checkout`, `git merge`, and `git rebase`. Provide examples for each command.","titleHtml":"Git branching"},{"id":"advanced-git-commands","message":"Explain advanced Git commands and their usage. Include commands like `git stash`, `git cherry-pick`, `git revert`, and `git reset`. Provide examples for each command.","titleHtml":"Advanced Git commands"}]},"Issues":{"id":"issues-group","name":"Issues","color":"var(--display-gray-fgColor)","icon":"issue-opened","entries":[{"id":"list-open-issues","message":"List the latest open issues assigned to me.","titleHtml":"Issues assigned to me"},{"id":"create-issue","message":"First, create a new draft issue. Then ask for additional information to fill out the issue.","titleHtml":"Create a new issue"},{"id":"summarize-issue","message":"Summarize the latest issue that I\'ve opened including all comments.","titleHtml":"Summarize my latest issue"}]},"Pull requests":{"id":"pull-requests-group","name":"Pull requests","color":"var(--display-gray-fgColor)","icon":"git-pull-request","entries":[{"id":"list-open-prs","message":"List my latest open pull requests.","titleHtml":"My open pull requests"},{"id":"summarize-pr","message":"Search for my latest merged PR and summarize it. What was the purpose and the key changes made?","titleHtml":"Summarize my latest PR"}]}}'),m=JSON.parse('{"Write code":{"id":"write-code-group","name":"Write code","color":"var(--display-gray-fgColor)","icon":"file","entries":[{"id":"create-profile-readme","message":"First, create an outstanding README for my GitHub profile using only Markdown. Then ask for key details (such as profession, top skills, favorite projects, or social links) to further refine and personalize it.","titleHtml":"Create a profile README"},{"id":"generate-html-calculator","message":"Generate a simple calculator using HTML, CSS, and JavaScript.","titleHtml":"Generate a simple calculator"},{"id":"make-pong","message":"Create a simple Pong game using HTML, CSS, and JavaScript. The player should control the left paddle with their mouse and arrow keys up/down, the right paddle is the computer. Make sure the game includes a bouncing ball, a scoreboard and collision detection for paddles and walls.","titleHtml":"Make a Pong game"},{"id":"mermaid-architecture","message":"Create a Markdown file with a Mermaid diagram showing an architecture overview.","titleHtml":"Design a Mermaid architecture overview"}]},"Git":{"id":"git-group","name":"Git","color":"var(--display-gray-fgColor)","icon":"git-branch","entries":[{"id":"basic-git-commands","message":"Explain what basic Git commands are and how to use them. Include commands like `git status`, `git init`, `git clone`, `git add`, `git commit`, `git push`, and `git pull`. Provide examples for each command.","titleHtml":"Basic Git commands"},{"id":"git-branching","message":"Explain how to create and manage branches in Git. Include commands like `git branch`, `git checkout`, `git merge`, and `git rebase`. Provide examples for each command.","titleHtml":"Git branching"},{"id":"advanced-git-commands","message":"Explain advanced Git commands and their usage. Include commands like `git stash`, `git cherry-pick`, `git revert`, and `git reset`. Provide examples for each command.","titleHtml":"Advanced Git commands"}]},"Issues":{"id":"issues-group","name":"Issues","color":"var(--display-gray-fgColor)","icon":"issue-opened","entries":[{"id":"list-open-issues","message":"List the latest open issues assigned to me.","titleHtml":"Issues assigned to me"},{"id":"create-issue","message":"First, create a new draft issue. Then ask for additional information to fill out the issue.","titleHtml":"Create a new issue"},{"id":"create-issue-with-subissues","message":"First, create an issue with sub issues. Then ask for additional information to fill out these issues.","titleHtml":"Create an issue with sub-issues"},{"id":"summarize-issue","message":"Summarize the latest issue that I\'ve opened including all comments.","titleHtml":"Summarize my latest issue"}]},"Pull requests":{"id":"pull-requests-group","name":"Pull requests","color":"var(--display-gray-fgColor)","icon":"git-pull-request","entries":[{"id":"list-open-prs","message":"List my latest open pull requests.","titleHtml":"My open pull requests"},{"id":"summarize-pr","message":"Search for my latest merged PR and summarize it. What was the purpose and the key changes made?","titleHtml":"Summarize my latest PR"}]}}');var h=n(73017),f=n(94236),p=n(5524),g=n(96540),y=n(82595),x=n(38621);let v=g.forwardRef((e,t)=>{let n,s,r,l,o=(0,a.c)(15),{testId:d,name:c,icon:u,color:m,onClick:h,dropdown:f,open:p}=e,g=`starter-${d}`;return o[0]!==m||o[1]!==u?(n=y.I&&(0,i.jsx)("div",{className:"StarterPill-module__icon--GKvj8",children:(0,i.jsx)(y.I,{icon:u,color:m})}),o[0]=m,o[1]=u,o[2]=n):n=o[2],o[3]!==f?(s=f&&(0,i.jsx)("div",{className:"StarterPill-module__dropdown--NngRn",children:(0,i.jsx)(x.TriangleDownIcon,{})}),o[3]=f,o[4]=s):s=o[4],o[5]!==c||o[6]!==s?(r=(0,i.jsxs)("div",{className:"StarterPill-module__title--Nsp36",children:[c,s]}),o[5]=c,o[6]=s,o[7]=r):r=o[7],o[8]!==h||o[9]!==p||o[10]!==t||o[11]!==g||o[12]!==n||o[13]!==r?(l=(0,i.jsxs)("button",{ref:t,className:"StarterPill-module__container--d2dFs",onClick:h,"aria-expanded":p,"data-testid":g,children:[n,r]}),o[8]=h,o[9]=p,o[10]=t,o[11]=g,o[12]=n,o[13]=r,o[14]=l):l=o[14],l});function b(e){let t,n,s,r,l,o,d=(0,a.c)(21),{group:c,onEntrySelect:u}=e,[m,y]=(0,g.useState)(!1),x=(0,g.useRef)(null);d[0]!==m?(t=()=>{y(!m)},d[0]=m,d[1]=t):t=d[1];let b=t;if(d[2]!==c.color||d[3]!==c.icon||d[4]!==c.id||d[5]!==c.name||d[6]!==b||d[7]!==m?(n=(0,i.jsx)(f.W.Anchor,{children:(0,i.jsx)(v,{ref:x,testId:c.id,name:c.name,icon:c.icon,color:c.color,onClick:b,dropdown:!0,open:m})}),d[2]=c.color,d[3]=c.icon,d[4]=c.id,d[5]=c.name,d[6]=b,d[7]=m,d[8]=n):n=d[8],d[9]===Symbol.for("react.memo_cache_sentinel")?(s={width:"260px"},d[9]=s):s=d[9],d[10]!==c.entries||d[11]!==u){let e;d[13]!==u?(e=e=>(0,i.jsx)(p.l.Item,{onSelect:()=>u(e),children:(0,i.jsx)(h.$6,{html:e.titleHtml})},e.id),d[13]=u,d[14]=e):e=d[14],r=c.entries.map(e),d[10]=c.entries,d[11]=u,d[12]=r}else r=d[12];return d[15]!==r?(l=(0,i.jsx)(f.W.Overlay,{style:s,children:(0,i.jsx)(p.l,{children:r})}),d[15]=r,d[16]=l):l=d[16],d[17]!==m||d[18]!==n||d[19]!==l?(o=(0,i.jsx)("li",{children:(0,i.jsxs)(f.W,{open:m,onOpenChange:y,children:[n,l]})}),d[17]=m,d[18]=n,d[19]=l,d[20]=o):o=d[20],o}v.displayName="StarterPill";try{b.displayName||(b.displayName="StarterGroupWithMenu")}catch{}let j=e=>{let t,n,r,l,o,d,h,f,p=(0,a.c)(29),{onSelect:g,onIceBreakerSelect:y,iceBreakersExperimentEnabled:x,paidUser:v}=e;p[0]===Symbol.for("react.memo_cache_sentinel")?(t={enabled:!0},p[0]=t):t=p[0];let{availableCommands:j}=(0,s.j)(t);if(p[1]!==j||p[2]!==x||p[3]!==y||p[4]!==g||p[5]!==v){d=Symbol.for("react.early_return_sentinel");e:{let e,t;p[11]!==v?(e=e=>"git-group"===e.id||"pull-requests-group"===e.id||!v&&"write-code-group"===e.id,p[11]=v,p[12]=e):e=p[12];let a=(function(e=!1){return Object.values(e?m:u)})(!0).filter(e);p[13]!==j||p[14]!==x||p[15]!==v?(t=x?j.filter(e=>"brainstorm"!==e.key&&(!!v||"spark"!==e.key)):j,p[13]=j,p[14]=x,p[15]=v,p[16]=t):t=p[16];let s=t;if(0===s.length){d=null;break e}if(o="CommandStarters-module__container--y1QAx",n="CommandStarters-module__list--sK_4w",p[17]!==s||p[18]!==g){let e;p[20]!==g?(e=e=>(0,i.jsx)("li",{children:(0,i.jsx)(c,{icon:e.icon,onClick:()=>g(e),isNew:e.isNew,children:e.name})},e.key),p[20]=g,p[21]=e):e=p[21],r=s.map(e),p[17]=s,p[18]=g,p[19]=r}else r=p[19];l=x&&a.map(e=>(0,i.jsx)(b,{group:e,onEntrySelect:y},e.id))}p[1]=j,p[2]=x,p[3]=y,p[4]=g,p[5]=v,p[6]=n,p[7]=r,p[8]=l,p[9]=o,p[10]=d}else n=p[6],r=p[7],l=p[8],o=p[9],d=p[10];return d!==Symbol.for("react.early_return_sentinel")?d:(p[22]!==n||p[23]!==r||p[24]!==l?(h=(0,i.jsxs)("ul",{className:n,children:[r,l]}),p[22]=n,p[23]=r,p[24]=l,p[25]=h):h=p[25],p[26]!==o||p[27]!==h?(f=(0,i.jsx)("div",{className:o,children:h}),p[26]=o,p[27]=h,p[28]=f):f=p[28],f)};try{j.displayName||(j.displayName="CommandStarters")}catch{}var w=n(69676),_=n(79080);let C=e=>{let t,n,s,r,l,o,d,c,u,m,h,f,y,x,v,b,j,C,N,S,I,k,L,T,D=(0,a.c)(67),{chatCommand:E,suggestions:R,onSelect:A,anchorRef:O,textAreaRef:P}=e,[F,M]=(0,g.useState)(0),[$,B]=(0,g.useState)(0),[V,U]=(0,g.useState)(!1),[q,G]=(0,g.useState)(void 0),[H,K]=(0,g.useState)(-1),[W,z]=(0,g.useState)(""),Q=(0,g.useRef)(null),Z=(0,g.useRef)(null);if(D[0]!==E||D[1]!==R||D[2]!==W){let e;D[4]!==E||D[5]!==W?(e=e=>{let t=`/${E} ${e}`.toLowerCase(),n=W.toLowerCase().trim();return t.includes(n)&&t!==n},D[4]=E,D[5]=W,D[6]=e):e=D[6],t=R.filter(e),D[0]=E,D[1]=R,D[2]=W,D[3]=t}else t=D[3];let J=t,Y=V&&J.length>0;D[7]!==O?(n=()=>{if(Z.current&&O.current){let{top:e,left:t}=(0,w.uG)(Z.current,O.current,{align:"start",side:"outside-bottom",anchorOffset:4});M(e),B(t)}},D[7]=O,D[8]=n):n=D[8];let X=n;D[9]!==P?(s=()=>{P.current===document.activeElement&&U(!0)},r=[P],D[9]=P,D[10]=s,D[11]=r):(s=D[10],r=D[11]),(0,g.useEffect)(s,r),D[12]!==P?(l=()=>{let e=P.current;if(!e)return;let t=()=>{z(e.value)};return z(e.value),e.addEventListener("input",t),()=>{e.removeEventListener("input",t)}},o=[P],D[12]=P,D[13]=l,D[14]=o):(l=D[13],o=D[14]),(0,g.useEffect)(l,o),D[15]!==O||D[16]!==Y||D[17]!==X?(d=()=>{let e=O.current;if(!Y||!e)return;let t=()=>{O.current&&(G(O.current.getBoundingClientRect().width),X())};return t(),Q.current||(Q.current=new ResizeObserver(t)),Q.current.observe(e),()=>{Q.current&&Q.current.unobserve(e)}},c=[Y,O,X],D[15]=O,D[16]=Y,D[17]=X,D[18]=d,D[19]=c):(d=D[18],c=D[19]),(0,g.useEffect)(d,c),D[20]!==P?(u=e=>!!e&&((P.current?.contains(e)??!1)||(Z.current?.contains(e)??!1)),D[20]=P,D[21]=u):u=D[21];let ee=u;D[22]!==ee||D[23]!==P?(m=()=>{let e=P.current;if(!e)return;let t=e=>{ee(e.relatedTarget)||U(!1)};return e.addEventListener("blur",t),()=>{e.removeEventListener("blur",t)}},h=[P,ee],D[22]=ee,D[23]=P,D[24]=m,D[25]=h):(m=D[24],h=D[25]),(0,g.useEffect)(m,h),D[26]!==E||D[27]!==P?(f=()=>{let e=P.current;if(!e)return;let t=()=>{E&&U(!0)};return e.addEventListener("focus",t),()=>{e.removeEventListener("focus",t)}},y=[P,E],D[26]=E,D[27]=P,D[28]=f,D[29]=y):(f=D[28],y=D[29]),(0,g.useEffect)(f,y),D[30]===Symbol.for("react.memo_cache_sentinel")?(x=()=>{U(!1),K(-1)},D[30]=x):x=D[30];let et=x;D[31]!==Y||D[32]!==P?(v=()=>{let e=P.current;if(!e||!Y)return;let t=e=>{(1!==e.key.length||e.ctrlKey||e.metaKey||e.altKey||e.isComposing)&&"Backspace"!==e.key&&"Delete"!==e.key||K(-1)};return e.addEventListener("keydown",t),()=>{e.removeEventListener("keydown",t)}},b=[P,Y],D[31]=Y,D[32]=P,D[33]=v,D[34]=b):(v=D[33],b=D[34]),(0,g.useEffect)(v,b),D[35]!==E||D[36]!==Y||D[37]!==A||D[38]!==P||D[39]!==J?(j=()=>{let e=P.current;if(!e||!Y)return;let t=e=>{if("ArrowDown"===e.key||"ArrowUp"===e.key){e.preventDefault();let t="ArrowDown"===e.key?"down":"up";K(e=>{let n,i;return n="down"===t?-1===e?0:Math.min(e+1,J.length-1):-1===e?J.length-1:Math.max(e-1,0),(i=J[n])&&A(E,i),n})}};return e.addEventListener("keydown",t),()=>{e.removeEventListener("keydown",t)}},C=[P,Y,J,E,A],D[35]=E,D[36]=Y,D[37]=A,D[38]=P,D[39]=J,D[40]=j,D[41]=C):(j=D[40],C=D[41]),(0,g.useEffect)(j,C),D[42]!==ee?(N=e=>{e.target instanceof Node&&ee(e.target)||et()},D[42]=ee,D[43]=N):N=D[43];let en=N;D[44]!==E||D[45]!==A?(S=e=>{A(E,e),K(-1)},D[44]=E,D[45]=A,D[46]=S):S=D[46];let ei=S;if(!Y)return null;if(D[47]!==q?(I=q?{width:`${q}px`}:void 0,D[47]=q,D[48]=I):I=D[48],D[49]!==E||D[50]!==ei||D[51]!==H||D[52]!==J){let e;D[54]!==E||D[55]!==ei||D[56]!==H?(e=(e,t)=>(0,i.jsxs)(p.l.Item,{size:"large",onSelect:()=>ei(e),active:t===H,children:[(0,i.jsx)(p.l.LeadingVisual,{children:(0,i.jsxs)("span",{className:"fgColor-muted",children:["/",E]})}),e]},e),D[54]=E,D[55]=ei,D[56]=H,D[57]=e):e=D[57],k=J.map(e),D[49]=E,D[50]=ei,D[51]=H,D[52]=J,D[53]=k}else k=D[53];return D[58]!==k?(L=(0,i.jsx)(p.l,{children:k}),D[58]=k,D[59]=L):L=D[59],D[60]!==O||D[61]!==$||D[62]!==en||D[63]!==I||D[64]!==L||D[65]!==F?(T=(0,i.jsx)(_.Ay,{top:F,left:$,onClickOutside:en,onEscape:et,returnFocusRef:O,"aria-label":"Command suggestions",style:I,"data-testid":"command-suggestions-overlay",ref:Z,preventFocusOnOpen:!0,children:L}),D[60]=O,D[61]=$,D[62]=en,D[63]=I,D[64]=L,D[65]=F,D[66]=T):T=D[66],T};try{C.displayName||(C.displayName="CommandSuggestions")}catch{}function N(e){let t,n,d,c,u,m,h,f,p,g=(0,a.c)(33),{chatCommand:y,chatInputRef:x,containerRef:v,textAreaRef:b,iceBreakersExperimentEnabled:w,paidUser:_}=e;g[0]===Symbol.for("react.memo_cache_sentinel")?(t={enabled:!0},g[0]=t):t=g[0];let{availableCommands:N,availableCommandKeys:S}=(0,s.j)(t),I=(0,o.Z)();g[1]!==S||g[2]!==x||g[3]!==I||g[4]!==b?(n=e=>{((0,l.BI)("dotcom_chat.activate",{target:"COMMAND_STARTER_SELECTED",mode:"immersive",command:e.key}),e.enabled?.()===!1&&e.disabledAction)?e.disabledAction(I):(x.current?.setText(t=>{let n=(0,r.V)(t,S);return n?t.replace(`/${n}`,`/${e.key}`):`/${e.key} ${t}`}),b.current?.focus())},g[1]=S,g[2]=x,g[3]=I,g[4]=b,g[5]=n):n=g[5];let k=n;g[6]!==x||g[7]!==w||g[8]!==b?(d=(e,t)=>{(0,l.BI)("dotcom_chat.activate",{target:"COMMAND_SUGGESTION_SELECTED",mode:"immersive",command:e,suggestion:t,iceBreakerFFEnabled:w}),x.current?.setText(`/${e} ${t}`.trim()),b.current?.focus()},g[6]=x,g[7]=w,g[8]=b,g[9]=d):d=g[9];let L=d;g[10]!==x||g[11]!==w||g[12]!==b?(c=e=>{(0,l.BI)("dotcom_chat.activate",{target:"COMMAND_SUGGESTION_SELECTED",mode:"immersive",command:e.id,suggestion:e.message,iceBreakerFFEnabled:w}),x.current?.setText(`${e.message}`.trim()),b.current?.focus()},g[10]=x,g[11]=w,g[12]=b,g[13]=c):c=g[13];let T=c;g[14]!==N||g[15]!==y?(u=y?N.find(e=>e.key===y)?.suggestions:null,g[14]=N,g[15]=y,g[16]=u):u=g[16];let D=u,E=D&&D.length>0;return g[17]!==y||g[18]!==v||g[19]!==L||g[20]!==E||g[21]!==D||g[22]!==b?(m=y&&E&&(0,i.jsx)(C,{chatCommand:y,suggestions:D,onSelect:L,anchorRef:v,textAreaRef:b},y),g[17]=y,g[18]=v,g[19]=L,g[20]=E,g[21]=D,g[22]=b,g[23]=m):m=g[23],g[24]===Symbol.for("react.memo_cache_sentinel")?(h=(0,i.jsx)("h2",{className:"sr-only",children:"Chat Commands"}),g[24]=h):h=g[24],g[25]!==k||g[26]!==T||g[27]!==w||g[28]!==_?(f=(0,i.jsxs)(i.Fragment,{children:[h,(0,i.jsx)(j,{onSelect:k,onIceBreakerSelect:T,iceBreakersExperimentEnabled:w,paidUser:_})]}),g[25]=k,g[26]=T,g[27]=w,g[28]=_,g[29]=f):f=g[29],g[30]!==m||g[31]!==f?(p=(0,i.jsxs)(i.Fragment,{children:[m,f]}),g[30]=m,g[31]=f,g[32]=p):p=g[32],p}try{N.displayName||(N.displayName="CommandStartersAndSuggestions")}catch{}},90122:(e,t,n)=>{n.d(t,{DO:()=>r,Vq:()=>s,ZP:()=>i});let i=()=>/{{([\w-]+)(?:\.([.\w-]+))?(?:\|([\w-]+))?}}/g,a=`Respond with only the content \u{2014} no introductions, explanations, or extra text.
Only use code blocks when they add semantic value (e.g., mermaid diagrams, specific programming languages), not for general markdown formatting, unless the user explicitly asks for it.`;async function s(e){return[{role:"system",content:a},{role:"user",content:e.content}]}function r(e){return null==e?"":"string"==typeof e?e:e&&"object"==typeof e?JSON.stringify(e,null,2):Array.isArray(e)?e.map(r).join(`
`):String(e)}},90177:(e,t,n)=>{n.d(t,{c:()=>u});var i=n(74848),a=n(21728),s=n(38621),r=n(21373),l=n(94236),o=n(5524),d=n(73783),c=n(26108);let u=(0,n(96540).forwardRef)(function(e,t){let n,u,m,h,f=(0,a.c)(40),{value:p,isLoading:g,onClick:y,onStop:x,variant:v,disabled:b,iconOnly:j,showPickInputsOption:w,onRunWithInputs:_,leadingVisual:C}=e,N=void 0===v?"invisible":v;f[0]!==g||f[1]!==p?(n=()=>g?"Loading...":p?"Run node":"Run loop",f[0]=g,f[1]=p,f[2]=n):n=f[2];let S=n;f[3]!==g||f[4]!==y||f[5]!==x?(u=e=>{g?x?.(e):y(e)},f[3]=g,f[4]=y,f[5]=x,f[6]=u):u=f[6];let I=u;f[7]!==_?(m=()=>{_?.()},f[7]=_,f[8]=m):m=f[8];let k=m;if(void 0!==w&&w&&!g&&!j){let e,n,a,c,u;return f[9]!==b||f[10]!==I||f[11]!==C||f[12]!==t||f[13]!==N?(e=(0,i.jsx)(r.Q,{ref:t,disabled:b,variant:N,onClick:I,leadingVisual:C,children:"Run"}),f[9]=b,f[10]=I,f[11]=C,f[12]=t,f[13]=N,f[14]=e):e=f[14],f[15]!==b||f[16]!==N?(n=(0,i.jsx)(l.W.Button,{disabled:b,variant:N,icon:s.TriangleDownIcon,"aria-label":"More run options",className:"ExecuteButton-module__executeButtonSplitDropdown--WsP8k"}),f[15]=b,f[16]=N,f[17]=n):n=f[17],f[18]!==k?(a=(0,i.jsx)(l.W.Overlay,{children:(0,i.jsx)(o.l,{children:(0,i.jsx)(o.l.Item,{onSelect:k,children:"Run with custom inputs"})})}),f[18]=k,f[19]=a):a=f[19],f[20]!==n||f[21]!==a?(c=(0,i.jsxs)(l.W,{children:[n,a]}),f[20]=n,f[21]=a,f[22]=c):c=f[22],f[23]!==e||f[24]!==c?(u=(0,i.jsxs)(d.A,{children:[e,c]}),f[23]=e,f[24]=c,f[25]=u):u=f[25],u}if(!j){let e,n=g?"danger":N,a=g?"Stop":"Run";return f[26]!==b||f[27]!==I||f[28]!==C||f[29]!==t||f[30]!==n||f[31]!==a?(e=(0,i.jsx)(r.Q,{ref:t,disabled:b,variant:n,onClick:I,leadingVisual:C,children:a}),f[26]=b,f[27]=I,f[28]=C,f[29]=t,f[30]=n,f[31]=a,f[32]=e):e=f[32],e}let L=S(),T=g?s.SquareFillIcon:s.SyncIcon,D=g?"danger":N;return f[33]!==b||f[34]!==I||f[35]!==t||f[36]!==L||f[37]!==T||f[38]!==D?(h=(0,i.jsx)(c.K,{ref:t,disabled:b,"aria-label":L,icon:T,onClick:I,variant:D}),f[33]=b,f[34]=I,f[35]=t,f[36]=L,f[37]=T,f[38]=D,f[39]=h):h=f[39],h});try{u.displayName||(u.displayName="ExecuteButton")}catch{}},90756:(e,t,n)=>{n.d(t,{R:()=>a,j:()=>LoopError});var i=n(50467);let LoopError=class LoopError extends Error{constructor(e,t){super(e),(0,i._)(this,"httpStatus",void 0),this.httpStatus=t,this.name="LoopError"}};function a(e){return e instanceof LoopError}},91348:(e,t,n)=>{n.d(t,{FT:()=>p,Gx:()=>m,Hx:()=>y,NZ:()=>g,f0:()=>o,kX:()=>h,nT:()=>c});var i=n(31629),a=n(21046),s=n(90122),r=n(39087),l=n(45363);function o(e){let t={nodes:new Map,edges:[],layers:[]};if(!e)return t;for(let n of e){if(!n?.id)continue;let e=u(n.id);t.nodes.set(e,n)}for(let n of e)for(let e of d(n)){let i=u(e);n?.id&&i&&t.edges.push({from:i,to:n.id})}let n=function(e){let t={},n=new Set,i=(s,r=0)=>{try{if(n.has(s))throw Error(`Potential cycle detected at node ${s}`);if(n.add(s),r>100)return(0,a.FF)(`Maximum recursion depth reached for node ${s}`),0;if(void 0!==t[s])return t[s];let l=e.nodes.get(s);if(!l)return t[s]=0,0;let o=d(l);if(o&&0!==o.size){let e=[...o].map(e=>{let t=u(e);return i(t,r+1)});t[s]=Math.max(...e)+1}else{let n=e.edges.filter(e=>e.from===s).map(e=>e.to);0===n.length?t[s]=-1:t[s]=1}return t[s]}finally{n.delete(s)}};for(let[n]of e.nodes)if(!t[n])try{i(n)}catch(e){(0,a.vV)(`Error computing layer for node ${n}:`,e),t[n]=0}let s=Math.max(...Object.values(t))+1;for(let e of Object.keys(t))-1===t[e]&&(t[e]=s);let r=[];for(let[n,i]of Object.entries(t)){let t=e.nodes.get(n);t&&(r[i]||(r[i]=[]),r[i].push(t))}return r.filter(Boolean)}(t);return t.layers=n,t}function d(e){let t=(0,s.ZP)();return new Set((e.content.match(t)||[]).map(e=>e.replace(/[{}]/g,"")))}function c(e){return new Set([...d(e)].map(u))}function u(e){return e.match(/^[^|.]+/)?.[0]??e}let m=(e,t)=>{if(!e||"object"!=typeof e||!e.title&&!e.description&&!e.content)return null;let n={...e,title:e.title||"",description:e.description||"",type:l.C.getMetadata(e.type)?e.type:"text",content:e.content||"",id:(e.id||"").trim()};if("text"===n.type&&(n.metadata=function(e){if((0,i.ir)(e))return r.j[e.metadata.inputType]?e.metadata:{inputType:"text"}}(e)||{inputType:"text"}),"string"!=typeof n.content&&(n.content=""),(0,i.jq)(n)){let e=t.find(e=>e.id===n.loopId);if(e){let t=n.loopInputValues?.reduce((e,t)=>(e[t.inputId]=t,e),{})||{};n.loopInputValues=e.nodes?.filter(e=>(0,i.ir)(e)).map(e=>{let n=t[e.id];if(!n)throw Error(`Input not found for node ${e.id}`);return{inputId:e.id,nodeId:n.nodeId,doMapInput:!!n.doMapInput}})}}return n},h=(e,t)=>{var n;let i={...n=e,nodes:n.nodes.map(f)};return{...i,nodes:(i.nodes||[]).map(e=>m(e,t)).filter(e=>null!==e)}};function f(e){return"prompt"===e.type&&"model"in e&&"string"==typeof e.model?{...e,metadata:{model:e.model}}:"text"===e.type&&"inputType"in e?{...e,metadata:function(e){if("type"in e&&"string"==typeof e.type){let t="file"===e.type?"text":e.type;return{...e,inputType:t}}return e}(e.inputType)}:e}function p(e){let t=o(e.nodes);return e.nodes.filter(e=>x(e,t))}function g(e){let t={nodes:new Map,edges:[...e.edges],layers:[...e.layers]};for(let[n,i]of e.nodes)t.nodes.set(n,i);let n=[...e.nodes].filter(([,t])=>x(t,e));if(n.length>0){let e="virtual-output";for(let[,i]of(t.nodes.set(e,{type:"output",id:e}),n))t.edges.push({from:i.id,to:e})}return t}function y(e){return"virtual-output"===e}function x(e,t){return!t.edges.some(t=>t.from===e.id)&&t.edges.some(t=>t.to===e.id)}},93161:(e,t,n)=>{n.d(t,{D:()=>i});let i={value:null,startedAt:void 0,completedAt:void 0}},93364:(e,t,n)=>{function i(e){return{success:!0,data:e}}function a(e,t){var n;return{success:!1,error:(n=e)?"string"==typeof n?n:"object"!=typeof n?(void 0)??s:"message"in n&&"string"==typeof n.message?n.message:"error"in n&&"string"==typeof n.error?n.error:(void 0)??s:(void 0)??s,httpStatus:t?.status}}n.d(t,{$j:()=>i,YD:()=>a});let s="Unknown error"},93380:(e,t,n)=>{n.d(t,{B:()=>s});var i=n(21728),a=n(96540);function s(e){let t,n,s,r=(0,i.c)(4),[l,o]=(0,a.useState)(e);r[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>o(!0),r[0]=t):t=r[0];let d=t;r[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>o(!1),r[1]=n):n=r[1];let c=n;return r[2]!==l?(s=[l,d,c],r[2]=l,r[3]=s):s=r[3],s}},93642:(e,t,n)=>{function i(e,t){for(let n of function e(t,n=[]){var i,s;let r;if(""===t)return n;let l=t.match(a());if(!l)return n;let o=l.groups.fence;if(!o)return n;let d=o.includes("~")?"~":"`",c=t.match((r=a([i=d],s=o.length),RegExp(`${r.source}(?:\r?
)(?<suggestion>.*?)(?:\r?
)^ {0,3}${i}{${s},}[ 	]*$`,"ms")));if(!c)return n;let u=0,m=l.groups.indent;""!==m&&(u=m.length);let h=c.groups.suggestion;if(u>0){let e=RegExp(`^ {0,${u}}`,"m");h=h.replace(e,"")}return n.push(h),e(t.slice(c.index+c[0].length),n)}(e))if(n===t)return{isValid:!1,errorMessage:"Suggested change cannot be the same as the original line"};return{isValid:!0,errorMessage:""}}function a(e=["`","~"],t){let n=t?`{${t}}`:"{3,}",i=e.map(e=>`${e}${n}`);return RegExp(`^(?<indent> {0,3})(?<fence>${i.join("|")})suggestion[ 	]*$`,"m")}n.d(t,{u:()=>i})},95807:(e,t,n)=>{n.d(t,{i:()=>v});var i=n(74848),a=n(68273),s=n(21728),r=n(96379),l=n(21373),o=n(69726),d=n(11196),c=n(96540),u=n(30459),m=n(57224),h=n(70263);let f="PullRequestsProcessingIndicator-module__button--IKkby",p="PullRequestsProcessingIndicator-module__indicator--iNiwb",g="PullRequestsProcessingIndicator-module__text--JUMXg";function y(e,t){return Math.round(e.getTime()-t.getTime())/1e3}let x={stale:!1,latest_unsynced_push_to_head_ref_at:null};function v({processingIndicatorUrl:e,repositoryId:t,pullRequestId:n}){let[a,s]=(0,c.useState)(x),l=(0,h.A)(),o=(0,c.useCallback)(async()=>{try{let t=await (0,r.lS)(e);if(t.ok){let e=await t.json();l()&&s(e)}}catch{l()&&s(x)}},[l,e]);(0,c.useEffect)(()=>{o()},[]);let{stale:d,latest_unsynced_push_to_head_ref_at:u}=a;return(0,i.jsx)("div",{className:"border-left pl-1",children:(0,i.jsx)(m.y,{appName:"pull-requests-processing-indicator",category:"render",metadata:{},children:(0,i.jsx)(b,{pullRequestId:n,repositoryId:t,stale:d,latest_unsynced_push_to_head_ref_at:u})})})}let b=(0,a.Z6)()?function(e){let t,n,a=(0,s.c)(6),{pullRequestId:r,repositoryId:c,stale:m,latest_unsynced_push_to_head_ref_at:h}=e,{sendAnalyticsEvent:x}=(0,u.s)();if(!m||!h)return null;if(a[0]!==h||a[1]!==r||a[2]!==c||a[3]!==x){t=Symbol.for("react.early_return_sentinel");e:{let e=y(new Date,new Date(h));if(e<20||e>=86400){t=null;break e}x("pull_requests.processing_indicator","",{repositoryId:c,pullRequestId:r,secondsSinceLastPush:e})}a[0]=h,a[1]=r,a[2]=c,a[3]=x,a[4]=t}else t=a[4];return t!==Symbol.for("react.early_return_sentinel")?t:(a[5]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(d.m,{text:"Recent push is being processed and will appear soon",direction:"s",children:(0,i.jsx)(l.Q,{as:"a",href:"https://gh.io/pr-sync-in-progress",variant:"invisible",className:f,children:(0,i.jsxs)("div",{className:p,children:[(0,i.jsx)(o.A,{size:"small"}),(0,i.jsx)("span",{className:g,children:"Processing updates"})]})})}),a[5]=n):n=a[5],n)}:function({pullRequestId:e,repositoryId:t,stale:n,latest_unsynced_push_to_head_ref_at:a}){let{sendAnalyticsEvent:s}=(0,u.s)();if(!n||!a)return null;let r=y(new Date,new Date(a));return r<20||r>=86400?null:(s("pull_requests.processing_indicator","",{repositoryId:t,pullRequestId:e,secondsSinceLastPush:r}),(0,i.jsx)(d.m,{text:"Recent push is being processed and will appear soon",direction:"s",children:(0,i.jsx)(l.Q,{as:"a",href:"https://gh.io/pr-sync-in-progress",variant:"invisible",className:f,children:(0,i.jsxs)("div",{className:p,children:[(0,i.jsx)(o.A,{size:"small"}),(0,i.jsx)("span",{className:g,children:"Processing updates"})]})})}))};try{v.displayName||(v.displayName="PullRequestsProcessingIndicatorWithDataFetching")}catch{}try{b.displayName||(b.displayName="PullRequestsProcessingIndicator")}catch{}},96002:(e,t,n)=>{n.d(t,{u:()=>c});var i=n(74848),a=n(21728),s=n(53419),r=n(74753),l=n(73077),o=n(11680),d=n(79184);function c(){let e,t,n,s,c=(0,a.c)(6),{resetDate:m}=(0,d.xR)();c[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(r.s,{children:(0,i.jsx)("h2",{children:"Limit reached"})}),c[0]=e):e=c[0],c[1]!==m?(t=(0,i.jsxs)(i.Fragment,{children:[e,"You have reached your free plan limit. Limit resets on ",m,"."]}),c[1]=m,c[2]=t):t=c[2];let h=t;c[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(l.z,{as:"a",href:"https://github.com/features/copilot#pricing",onClick:u,children:"Upgrade"}),c[3]=n):n=c[3];let f=n;return c[4]!==h?(s=(0,i.jsx)("div",{className:"FreeChatExceededBanner-module__container--yeDGw",children:(0,i.jsx)(o.l,{variant:"upsell",title:"Limit reached",description:h,hideTitle:!0,primaryAction:f})}),c[4]=h,c[5]=s):s=c[5],s}function u(){(0,s.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}try{c.displayName||(c.displayName="FreeChatExceededBanner")}catch{}},96868:(e,t,n)=>{n.d(t,{Fj:()=>s,Kh:()=>a,qB:()=>r});var i=n(33026);let a={CANVAS:"canvas",OUTPUT:"output"},s={CHAT:"chat",NODE:"node",ABOUT:"about"},r={focusedNodeId:null,hoveredNodeId:null,view:a.CANVAS,sidePanelView:s.CHAT,version:i.U8,showLinkCopiedBanner:!1,showDuplicatedBanner:!1}},97695:(e,t,n)=>{n.d(t,{H:()=>m});var i=n(68273),a=n(21728),s=n(48845),r=n(20622),l=n(97665),o=n(94747),d=n(69510),c=n(27011),u=n(21067);let m=(0,i.Z6)()?function(e,t){let n,i,m,h,f=(0,a.c)(12),p=(0,c.Kp)();f[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,u.cj)(),f[0]=n):n=f[0];let g=n,y=`${p}/page_data/${r.uT.resolveThread}`,x=(0,l.jE)(),{updateThread:v}=(0,c.an)();return f[1]!==y?(i=async e=>{let{threadId:t}=e,n=await (0,s.q$)(y,{method:"POST",body:{threadId:t}});(0,s.R)(n)},f[1]=y,f[2]=i):i=f[2],f[3]!==p||f[4]!==e||f[5]!==t||f[6]!==x||f[7]!==v?(m=(n,i)=>(v(Number(i.threadId),e,t,e=>{if(e)return{...e,isResolved:!0,resolvedBy:g}}),x.invalidateQueries({queryKey:(0,d.XG)(p)})),f[3]=p,f[4]=e,f[5]=t,f[6]=x,f[7]=v,f[8]=m):m=f[8],f[9]!==i||f[10]!==m?(h={mutationFn:i,onSuccess:m},f[9]=i,f[10]=m,f[11]=h):h=f[11],(0,o.n)(h)}:function(e,t){let n=(0,c.Kp)(),i=(0,u.cj)(),a=`${n}/page_data/${r.uT.resolveThread}`,m=(0,l.jE)(),{updateThread:h}=(0,c.an)();return(0,o.n)({mutationFn:async({threadId:e})=>{let t=await (0,s.q$)(a,{method:"POST",body:{threadId:e}});(0,s.R)(t)},onSuccess:(a,s)=>(h(Number(s.threadId),e,t,e=>{if(e)return{...e,isResolved:!0,resolvedBy:i}}),m.invalidateQueries({queryKey:(0,d.XG)(n)}))})}},99279:(e,t,n)=>{n.d(t,{G:()=>i});let i=n(12435).$h.create("pull-requests")},99519:(e,t,n)=>{n.d(t,{EY:()=>r,qT:()=>s});var i=n(96540);let a=(0,i.createContext)(null),s=a.Provider;function r(){let e=(0,i.useContext)(a);if(!e)throw Error("useLoopsService must be used inside a LoopsServiceProvider");return e}try{a.displayName||(a.displayName="LoopsServiceContext")}catch{}},99993:(e,t,n)=>{n.d(t,{M1:()=>m,_N:()=>f,c_:()=>h});var i=n(21728),a=n(97665),s=n(97286),r=n(61526),l=n(99519),o=n(78456),d=n(33026),c=n(50050),u=n(90756);let m="loop";function h(e,t){return[m,e,t]}function f(e,t){let n,f,y,x,v=(0,i.c)(15),{loopID:b}=(0,r.g)(),j=(0,l.EY)(),w=(0,a.jE)(),_=(0,c.Ud)(g),C=t||_||d.kj;v[0]!==b||v[1]!==C?(n=[m,b,C],v[0]=b,v[1]=C,v[2]=n):n=v[2];let N=n;v[3]!==b||v[4]!==w||v[5]!==j||v[6]!==C?(f=async()=>{if(!b)return null;let e=o.Io.find(e=>e.id===b)??null;if(e)return e;let t=await j.getLoop(b,C);if(!t||!t.success)throw new u.j(t?.error||"Failed to load loop",t?.httpStatus);return t.data.version&&t.data.version!==C&&w.setQueryData(h(t.data.id,t.data.version),t.data),t.data},v[3]=b,v[4]=w,v[5]=j,v[6]=C,v[7]=f):f=v[7];let S=!!b;return v[8]!==e?(y=e&&{select:e},v[8]=e,v[9]=y):y=v[9],v[10]!==N||v[11]!==f||v[12]!==S||v[13]!==y?(x={placeholderData:p,queryKey:N,queryFn:f,enabled:S,...y,staleTime:3e5},v[10]=N,v[11]=f,v[12]=S,v[13]=y,v[14]=x):x=v[14],(0,s.I)(x)}function p(e){return e}function g(e){return e?.version}}}]);
//# sourceMappingURL=55989-efafa115bd50.js.map